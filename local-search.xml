<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>åŸºäºCloudflare Workerçš„IPv4 to IPv6å†…ç½‘æœåŠ¡ä»£ç†æ–¹æ¡ˆæ€»ç»“</title>
    <link href="/2025/10/30/%E5%9F%BA%E4%BA%8ECloudflare%20Worker%E7%9A%84IPv4%20to%20IPv6%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%90%86%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/"/>
    <url>/2025/10/30/%E5%9F%BA%E4%BA%8ECloudflare%20Worker%E7%9A%84IPv4%20to%20IPv6%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%90%86%E6%96%B9%E6%A1%88%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºCloudflare-Workerçš„IPv4-to-IPv6å†…ç½‘æœåŠ¡ä»£ç†æ–¹æ¡ˆæ€»ç»“"><a href="#åŸºäºCloudflare-Workerçš„IPv4-to-IPv6å†…ç½‘æœåŠ¡ä»£ç†æ–¹æ¡ˆæ€»ç»“" class="headerlink" title="åŸºäºCloudflare Workerçš„IPv4 to IPv6å†…ç½‘æœåŠ¡ä»£ç†æ–¹æ¡ˆæ€»ç»“"></a>åŸºäºCloudflare Workerçš„IPv4 to IPv6å†…ç½‘æœåŠ¡ä»£ç†æ–¹æ¡ˆæ€»ç»“</h1><h2 id="èƒŒæ™¯ä¸é—®é¢˜"><a href="#èƒŒæ™¯ä¸é—®é¢˜" class="headerlink" title="èƒŒæ™¯ä¸é—®é¢˜"></a>èƒŒæ™¯ä¸é—®é¢˜</h2><p>ç”¨æˆ·éœ€è¦åœ¨IPv4ç½‘ç»œç¯å¢ƒä¸‹è®¿é—®å®¶åº­å†…ç½‘ä¸­ä»…æ”¯æŒIPv6çš„ä¸»æœºï¼ˆ<code>6.xinhaojin.top</code>ï¼‰ä¸Šçš„æœåŠ¡ã€‚ç”±äºIPv4ç½‘ç»œæ— æ³•ç›´æ¥è®¿é—®IPv6-onlyä¸»æœºï¼Œéœ€è¦é€šè¿‡Cloudflare Workeræ­å»ºä»£ç†æœåŠ¡ï¼Œå®ç°ï¼š</p><ul><li>IPv4 â†” IPv6 ç½‘ç»œåè®®è½¬æ¢</li><li>å•ä¸€åŸŸåæ”¯æŒå¤šç«¯å£æœåŠ¡ä»£ç†</li><li>é¡µé¢å†…èµ„æºè¯·æ±‚æ­£ç¡®è½¬å‘</li></ul><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªworkersç»‘å®šåŸŸå<code>4.xinhaojin.top</code></p><h2 id="æ–¹æ¡ˆä¸€ï¼šè·¯å¾„å‰ç¼€æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆä¸€ï¼šè·¯å¾„å‰ç¼€æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šè·¯å¾„å‰ç¼€æ–¹æ¡ˆ"></a>æ–¹æ¡ˆä¸€ï¼šè·¯å¾„å‰ç¼€æ–¹æ¡ˆ</h2><h3 id="æ ¸å¿ƒæ€è·¯"><a href="#æ ¸å¿ƒæ€è·¯" class="headerlink" title="æ ¸å¿ƒæ€è·¯"></a>æ ¸å¿ƒæ€è·¯</h3><p>ä½¿ç”¨æ ¹åŸŸå <code>4.xinhaojin.top</code> é…åˆè·¯å¾„å‰ç¼€æ¥åŒºåˆ†ä¸åŒç«¯å£æœåŠ¡ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://<span class="hljs-number">4</span>.xinhaojin.top/<span class="hljs-number">911</span>/          â†’ http://<span class="hljs-number">6</span>.xinhaojin.top:<span class="hljs-number">911</span>/<br><span class="hljs-attribute">https</span>://<span class="hljs-number">4</span>.xinhaojin.top/<span class="hljs-number">912</span>/admin     â†’ http://<span class="hljs-number">6</span>.xinhaojin.top:<span class="hljs-number">912</span>/admin<br></code></pre></td></tr></table></figure><h3 id="é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><h4 id="1-é™æ€èµ„æºè·¯å¾„ä¸¢å¤±ç«¯å£ä¿¡æ¯"><a href="#1-é™æ€èµ„æºè·¯å¾„ä¸¢å¤±ç«¯å£ä¿¡æ¯" class="headerlink" title="1. é™æ€èµ„æºè·¯å¾„ä¸¢å¤±ç«¯å£ä¿¡æ¯"></a>1. é™æ€èµ„æºè·¯å¾„ä¸¢å¤±ç«¯å£ä¿¡æ¯</h4><p><strong>é—®é¢˜</strong>ï¼šCSSã€JSç­‰é™æ€æ–‡ä»¶è¯·æ±‚å¦‚ <code>/static/js/app.js</code> ä¸åŒ…å«ç«¯å£å·<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>ä»Refererå¤´ä¸­æå–ç«¯å£å·ï¼š<code>referer.match(/\/\/(?:\d+\.)?4\.xinhaojin\.top\/(\d+)\//)</code></li><li>ä½¿ç”¨CookieæŒä¹…åŒ–ç«¯å£ä¿¡æ¯ï¼š<code>XPORT</code> cookie</li><li>æä¾›æ¸…æ™°çš„é”™è¯¯æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·ä½¿ç”¨æ­£ç¡®æ ¼å¼</li></ul><h4 id="2-AJAXè¯·æ±‚ä½¿ç”¨åŸå§‹è·¯å¾„"><a href="#2-AJAXè¯·æ±‚ä½¿ç”¨åŸå§‹è·¯å¾„" class="headerlink" title="2. AJAXè¯·æ±‚ä½¿ç”¨åŸå§‹è·¯å¾„"></a>2. AJAXè¯·æ±‚ä½¿ç”¨åŸå§‹è·¯å¾„</h4><p><strong>é—®é¢˜</strong>ï¼šJavaScriptå‘èµ·çš„fetch&#x2F;XHRè¯·æ±‚æœªè‡ªåŠ¨æ·»åŠ ç«¯å£å‰ç¼€<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>é‡å†™å…¨å±€fetch API</li><li>æ‹¦æˆªXMLHttpRequestçš„openæ–¹æ³•</li><li>ä½¿ç”¨MutationObserverç›‘æ§DOMå˜åŒ–</li><li>æ‹¦æˆªåŠ¨æ€åˆ›å»ºçš„å…ƒç´ å±æ€§è®¾ç½®</li></ul><h4 id="3-åç«¯é‡å®šå‘é—®é¢˜"><a href="#3-åç«¯é‡å®šå‘é—®é¢˜" class="headerlink" title="3. åç«¯é‡å®šå‘é—®é¢˜"></a>3. åç«¯é‡å®šå‘é—®é¢˜</h4><p><strong>é—®é¢˜</strong>ï¼šåç«¯æœåŠ¡è¿”å›çš„é‡å®šå‘LocationæŒ‡å‘åŸå§‹åœ°å€<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>é‡å†™Locationå“åº”å¤´</li><li>å°†åç«¯é‡å®šå‘è½¬æ¢ä¸ºä»£ç†æ ¼å¼</li></ul><h3 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><ol><li><strong>DNSé…ç½®</strong>ï¼šç¡®ä¿ <code>4.xinhaojin.top</code> å·²æ­£ç¡®è§£æåˆ°Cloudflare</li><li><strong>Workeréƒ¨ç½²</strong>ï¼šéƒ¨ç½²è·¯å¾„å‰ç¼€æ–¹æ¡ˆçš„Workerä»£ç </li><li><strong>è·¯ç”±è®¾ç½®</strong>ï¼šé…ç½®è·¯ç”± <code>4.xinhaojin.top/*</code></li></ol><h3 id="Workerä»£ç æ ¸å¿ƒé€»è¾‘"><a href="#Workerä»£ç æ ¸å¿ƒé€»è¾‘" class="headerlink" title="Workerä»£ç æ ¸å¿ƒé€»è¾‘"></a>Workerä»£ç æ ¸å¿ƒé€»è¾‘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ç«¯å£æå–</span><br><span class="hljs-keyword">const</span> match = pathname.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/(\d+)(?:\/(.*))?$/</span>);<br><br><span class="hljs-comment">// ä»Refereræ¢å¤ç«¯å£</span><br><span class="hljs-keyword">const</span> refererMatch = referer.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\/\/(?:\d+\.)?4\.xinhaojin\.top\/(\d+)\//</span>);<br><br><span class="hljs-comment">// å†…å®¹é‡å†™</span><br>html.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(href|src|action)=[&quot;&#x27;](\/[^&quot;&#x27;]*)[&quot;&#x27;]/gi</span>, ...);<br><br><span class="hljs-comment">// å®¢æˆ·ç«¯è„šæœ¬æ³¨å…¥</span><br><span class="hljs-keyword">const</span> clientScript = <span class="hljs-string">`...æ‹¦æˆªfetchã€XHRã€åŠ¨æ€å…ƒç´ çš„ä»£ç ...`</span>;<br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;fetch&quot;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> &#123;<br>  event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">handleRequest</span>(event.<span class="hljs-property">request</span>));<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ORIGIN_HOST</span> = <span class="hljs-string">&quot;6.xinhaojin.top&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) &#123;<br>  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);<br>  <span class="hljs-keyword">const</span> pathname = url.<span class="hljs-property">pathname</span>;<br>  <br>  <span class="hljs-comment">// æ”¯æŒæ ¹è·¯å¾„æ˜¾ç¤ºä½¿ç”¨è¯´æ˜</span><br>  <span class="hljs-keyword">if</span> (pathname === <span class="hljs-string">&#x27;/&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<br>      <span class="hljs-string">`ğŸš€ IPv6 ä»£ç†æœåŠ¡\n\n`</span> +<br>      <span class="hljs-string">`ä½¿ç”¨æ–¹æ³•ï¼šhttps://4.xinhaojin.top/&lt;ç«¯å£&gt;/&lt;è·¯å¾„&gt;\n\n`</span> +<br>      <span class="hljs-string">`ç¤ºä¾‹ï¼š\n`</span> +<br>      <span class="hljs-string">`https://4.xinhaojin.top/911/          â†’ http://6.xinhaojin.top:911/\n`</span> +<br>      <span class="hljs-string">`https://4.xinhaojin.top/912/admin     â†’ http://6.xinhaojin.top:912/admin\n`</span> +<br>      <span class="hljs-string">`https://4.xinhaojin.top/8080/static/ â†’ http://6.xinhaojin.top:8080/static/\n\n`</span> +<br>      <span class="hljs-string">`å½“å‰æ”¯æŒä»»æ„ç«¯å£å·è®¿é—® IPv6-only æœåŠ¡`</span>,<br>      &#123; <br>        <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>, <br>        <span class="hljs-attr">headers</span>: &#123; <br>          <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span>,<br>          <span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span><br>        &#125; <br>      &#125;<br>    );<br>  &#125;<br>  <br>  <span class="hljs-comment">// æƒ…å†µ1ï¼šè·¯å¾„åŒ…å«ç«¯å£å· /911/static/js/app.js</span><br>  <span class="hljs-keyword">let</span> match = pathname.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/(\d+)(?:\/(.*))?$/</span>);<br>  <span class="hljs-keyword">let</span> port = <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">let</span> restPath = <span class="hljs-string">&#x27;&#x27;</span>;<br>  <br>  <span class="hljs-keyword">if</span> (match) &#123;<br>    port = match[<span class="hljs-number">1</span>];<br>    restPath = match[<span class="hljs-number">2</span>] || <span class="hljs-string">&#x27;&#x27;</span>;<br>  &#125; <br>  <span class="hljs-comment">// æƒ…å†µ2ï¼šé™æ€æ–‡ä»¶è·¯å¾„æ²¡æœ‰ç«¯å£å· /static/js/app.js</span><br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// å°è¯•ä» Referer å¤´ä¸­æå–ç«¯å£å·</span><br>    <span class="hljs-keyword">const</span> referer = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;referer&#x27;</span>);<br>    <span class="hljs-keyword">if</span> (referer) &#123;<br>      <span class="hljs-keyword">const</span> refererMatch = referer.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\/\/(?:\d+\.)?4\.xinhaojin\.top\/(\d+)\//</span>);<br>      <span class="hljs-keyword">if</span> (refererMatch) &#123;<br>        port = refererMatch[<span class="hljs-number">1</span>];<br>        restPath = pathname.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// å»æ‰å¼€å¤´çš„æ–œæ </span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Recovered port <span class="hljs-subst">$&#123;port&#125;</span> from Referer for path: <span class="hljs-subst">$&#123;pathname&#125;</span>`</span>);<br>      &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¦‚æœè¿˜æ˜¯æ²¡æœ‰ç«¯å£å·ï¼Œå°è¯•ä» Cookie ä¸­è·å–</span><br>    <span class="hljs-keyword">if</span> (!port) &#123;<br>      <span class="hljs-keyword">const</span> cookieHeader = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;cookie&#x27;</span>);<br>      <span class="hljs-keyword">if</span> (cookieHeader) &#123;<br>        <span class="hljs-keyword">const</span> cookieMatch = cookieHeader.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/XPORT=(\d+)/</span>);<br>        <span class="hljs-keyword">if</span> (cookieMatch) &#123;<br>          port = cookieMatch[<span class="hljs-number">1</span>];<br>          restPath = pathname.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>);<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Recovered port <span class="hljs-subst">$&#123;port&#125;</span> from Cookie for path: <span class="hljs-subst">$&#123;pathname&#125;</span>`</span>);<br>        &#125;<br>      &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¦‚æœä»ç„¶æ²¡æœ‰ç«¯å£å·ï¼Œè¿”å›é”™è¯¯</span><br>    <span class="hljs-keyword">if</span> (!port) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<br>        <span class="hljs-string">`âŒ æ— æ³•ç¡®å®šç›®æ ‡ç«¯å£\n\n`</span> +<br>        <span class="hljs-string">`è¯·æ±‚è·¯å¾„ï¼š<span class="hljs-subst">$&#123;pathname&#125;</span>\n`</span> +<br>        <span class="hljs-string">`æ­¤è·¯å¾„ä¸åŒ…å«ç«¯å£å·ï¼Œä¸”æ— æ³•ä»å¼•ç”¨é¡µé¢ç¡®å®šç›®æ ‡ç«¯å£ã€‚\n\n`</span> +<br>        <span class="hljs-string">`è¯·ç¡®ä¿ï¼š\n`</span> +<br>        <span class="hljs-string">`1. ä»åŒ…å«ç«¯å£å·çš„é¡µé¢é“¾æ¥è®¿é—®èµ„æº\n`</span> +<br>        <span class="hljs-string">`2. æˆ–è€…ä½¿ç”¨å®Œæ•´è·¯å¾„ï¼š/&lt;ç«¯å£&gt;<span class="hljs-subst">$&#123;pathname&#125;</span>\n\n`</span> +<br>        <span class="hljs-string">`ç¤ºä¾‹ï¼š\n`</span> +<br>        <span class="hljs-string">`https://4.xinhaojin.top/911<span class="hljs-subst">$&#123;pathname&#125;</span>`</span>,<br>        &#123; <br>          <span class="hljs-attr">status</span>: <span class="hljs-number">400</span>, <br>          <span class="hljs-attr">headers</span>: &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125; <br>        &#125;<br>      );<br>    &#125;<br>  &#125;<br>  <br>  <span class="hljs-keyword">const</span> target = <span class="hljs-string">`http://<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span>/<span class="hljs-subst">$&#123;restPath&#125;</span><span class="hljs-subst">$&#123;url.search&#125;</span>`</span>;<br>  <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Proxying: <span class="hljs-subst">$&#123;url.pathname&#125;</span> -&gt; <span class="hljs-subst">$&#123;target&#125;</span> (port: <span class="hljs-subst">$&#123;port&#125;</span>)`</span>);<br>  <br>  <span class="hljs-keyword">const</span> reqHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>(request.<span class="hljs-property">headers</span>);<br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Host&quot;</span>, <span class="hljs-variable constant_">ORIGIN_HOST</span>);<br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Forwarded-Host&quot;</span>, url.<span class="hljs-property">hostname</span>);<br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Forwarded-Proto&quot;</span>, <span class="hljs-string">&quot;https&quot;</span>);<br>  <br>  <span class="hljs-comment">// ç§»é™¤å¯èƒ½å¹²æ‰°çš„å¤´éƒ¨</span><br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-connecting-ip&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-ipcountry&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-ray&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-visitor&quot;</span>);<br><br>  <span class="hljs-keyword">const</span> fetchInit = &#123;<br>    <span class="hljs-attr">method</span>: request.<span class="hljs-property">method</span>,<br>    <span class="hljs-attr">headers</span>: reqHeaders,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;manual&quot;</span>,<br>    <span class="hljs-attr">body</span>: [<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;HEAD&quot;</span>].<span class="hljs-title function_">includes</span>(request.<span class="hljs-property">method</span>) ? <span class="hljs-literal">undefined</span> : request.<span class="hljs-property">body</span><br>  &#125;;<br><br>  <span class="hljs-keyword">let</span> res;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(target, fetchInit);<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<br>      <span class="hljs-string">`âŒ ä¸Šæ¸¸æœåŠ¡è¿æ¥å¤±è´¥\n\n`</span> +<br>      <span class="hljs-string">`é”™è¯¯ä¿¡æ¯ï¼š<span class="hljs-subst">$&#123;e.message&#125;</span>\n`</span> +<br>      <span class="hljs-string">`ç›®æ ‡åœ°å€ï¼š<span class="hljs-subst">$&#123;target&#125;</span>\n`</span> +<br>      <span class="hljs-string">`æ¢å¤çš„ç«¯å£ï¼š<span class="hljs-subst">$&#123;port&#125;</span>\n\n`</span> +<br>      <span class="hljs-string">`å¯èƒ½çš„åŸå› ï¼š\n`</span> +<br>      <span class="hljs-string">`â€¢ ç«¯å£ <span class="hljs-subst">$&#123;port&#125;</span> æ²¡æœ‰æœåŠ¡åœ¨è¿è¡Œ\n`</span> +<br>      <span class="hljs-string">`â€¢ ç›®æ ‡æœåŠ¡å™¨ <span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span> æ— æ³•è®¿é—®\n`</span> +<br>      <span class="hljs-string">`â€¢ ç½‘ç»œè¿æ¥é—®é¢˜`</span>,<br>      &#123; <br>        <span class="hljs-attr">status</span>: <span class="hljs-number">502</span>,<br>        <span class="hljs-attr">headers</span>: &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;<br>      &#125;<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">// å¤„ç†å“åº”å¤´</span><br>  <span class="hljs-keyword">const</span> newHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [k, v] <span class="hljs-keyword">of</span> res.<span class="hljs-property">headers</span>) &#123;<br>    <span class="hljs-keyword">if</span> (k.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">&quot;location&quot;</span> &amp;&amp; v) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">const</span> locationUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(v, target);<br>        <span class="hljs-comment">// å¦‚æœé‡å®šå‘åˆ°åŒåŸŸæœåŠ¡ï¼Œæ”¹ä¸ºæˆ‘ä»¬çš„è·¯å¾„æ ¼å¼</span><br>        <span class="hljs-keyword">if</span> (locationUrl.<span class="hljs-property">hostname</span> === <span class="hljs-variable constant_">ORIGIN_HOST</span>) &#123;<br>          <span class="hljs-keyword">const</span> redirectPort = locationUrl.<span class="hljs-property">port</span> || <span class="hljs-string">&#x27;80&#x27;</span>;<br>          <span class="hljs-keyword">const</span> newLocation = <span class="hljs-string">`/<span class="hljs-subst">$&#123;redirectPort&#125;</span><span class="hljs-subst">$&#123;locationUrl.pathname&#125;</span><span class="hljs-subst">$&#123;locationUrl.search&#125;</span>`</span>;<br>          newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Location&quot;</span>, newLocation);<br>          <span class="hljs-keyword">continue</span>;<br>        &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-comment">// URL è§£æå¤±è´¥ï¼Œä¿æŒåŸæ ·</span><br>      &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¤„ç† Set-Cookie - è®¾ç½® Cookie è®°ä½ç«¯å£</span><br>    <span class="hljs-keyword">if</span> (k.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">&quot;set-cookie&quot;</span>) &#123;<br>      <span class="hljs-keyword">let</span> modifiedCookie = v;<br>      <span class="hljs-comment">// ç¡®ä¿ cookie åœ¨æ­£ç¡®è·¯å¾„ä¸‹</span><br>      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/Path=\/.*\//i</span>.<span class="hljs-title function_">test</span>(modifiedCookie)) &#123;<br>        modifiedCookie = modifiedCookie.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/; Path=[^;]*/i</span>, <span class="hljs-string">`; Path=/`</span>);<br>      &#125;<br>      newHeaders.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;Set-Cookie&quot;</span>, modifiedCookie);<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">const</span> hopByHop = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<br>      <span class="hljs-string">&quot;connection&quot;</span>, <span class="hljs-string">&quot;keep-alive&quot;</span>, <span class="hljs-string">&quot;proxy-authenticate&quot;</span>, <span class="hljs-string">&quot;proxy-authorization&quot;</span>,<br>      <span class="hljs-string">&quot;te&quot;</span>, <span class="hljs-string">&quot;trailers&quot;</span>, <span class="hljs-string">&quot;transfer-encoding&quot;</span>, <span class="hljs-string">&quot;upgrade&quot;</span><br>    ]);<br>    <span class="hljs-keyword">if</span> (!hopByHop.<span class="hljs-title function_">has</span>(k.<span class="hljs-title function_">toLowerCase</span>())) &#123;<br>      newHeaders.<span class="hljs-title function_">set</span>(k, v);<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// è®¾ç½®ç«¯å£ Cookieï¼Œä¾¿äºåç»­è¯·æ±‚æ¢å¤ç«¯å£ä¿¡æ¯</span><br>  newHeaders.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;Set-Cookie&quot;</span>, <span class="hljs-string">`XPORT=<span class="hljs-subst">$&#123;port&#125;</span>; Path=/; Max-Age=3600; SameSite=Lax`</span>);<br><br>  <span class="hljs-keyword">const</span> contentType = res.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;content-type&quot;</span>) || <span class="hljs-string">&quot;&quot;</span>;<br>  <br>  <span class="hljs-comment">// å¤„ç† HTML å†…å®¹é‡å†™</span><br>  <span class="hljs-keyword">if</span> (contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;text/html&quot;</span>)) &#123;<br>    <span class="hljs-keyword">let</span> html = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">text</span>();<br>    <br>    <span class="hljs-comment">// é‡å†™ HTML ä¸­çš„ç»å¯¹è·¯å¾„</span><br>    html = html.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-regexp">/(href|src|action)=[&quot;&#x27;](\/[^&quot;&#x27;]*)[&quot;&#x27;]/gi</span>,<br>      <span class="hljs-function">(<span class="hljs-params">match, attr, path</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">// è·³è¿‡å·²ç»åŒ…å«ç«¯å£å‰ç¼€çš„è·¯å¾„</span><br>        <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/\d+\//</span>) || <br>            path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;//&#x27;</span>) || <br>            path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http://&#x27;</span>) || <br>            path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;https://&#x27;</span>)) &#123;<br>          <span class="hljs-keyword">return</span> match;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;attr&#125;</span>=&quot;/<span class="hljs-subst">$&#123;port&#125;</span><span class="hljs-subst">$&#123;path&#125;</span>&quot;`</span>;<br>      &#125;<br>    );<br>    <br>    <span class="hljs-comment">// é‡å†™ CSS ä¸­çš„ URL</span><br>    html = html.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-regexp">/url\([&quot;&#x27;]?(\/[^&quot;&#x27;)]*)[&quot;&#x27;]?\)/gi</span>,<br>      <span class="hljs-function">(<span class="hljs-params">match, urlPath</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (urlPath.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^\/\d+\//</span>) || <br>            urlPath.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;//&#x27;</span>) || <br>            urlPath.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;http://&#x27;</span>) || <br>            urlPath.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&#x27;https://&#x27;</span>)) &#123;<br>          <span class="hljs-keyword">return</span> match;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">`url(&quot;/<span class="hljs-subst">$&#123;port&#125;</span><span class="hljs-subst">$&#123;urlPath&#125;</span>&quot;)`</span>;<br>      &#125;<br>    );<br>    <br>    <span class="hljs-comment">// æ³¨å…¥å¢å¼ºçš„å®¢æˆ·ç«¯é‡å†™è„šæœ¬</span><br>    <span class="hljs-keyword">const</span> clientScript = <span class="hljs-string">`</span><br><span class="hljs-string">&lt;script&gt;</span><br><span class="hljs-string">// å¢å¼ºçš„å®¢æˆ·ç«¯è·¯å¾„é‡å†™</span><br><span class="hljs-string">(function() &#123;</span><br><span class="hljs-string">  const currentPort = &quot;<span class="hljs-subst">$&#123;port&#125;</span>&quot;;</span><br><span class="hljs-string">  const basePath = &quot;/&quot; + currentPort;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  console.log(&#x27;Path Rewrite Agent loaded for port:&#x27;, currentPort);</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // è®¾ç½®æ–‡æ¡£åŸºç¡€URI</span><br><span class="hljs-string">  const baseElement = document.createElement(&#x27;base&#x27;);</span><br><span class="hljs-string">  baseElement.href = basePath + &#x27;/&#x27;;</span><br><span class="hljs-string">  document.head.appendChild(baseElement);</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // é‡å†™è·¯å¾„å‡½æ•°</span><br><span class="hljs-string">  function rewritePath(url) &#123;</span><br><span class="hljs-string">    if (!url || typeof url !== &#x27;string&#x27;) return url;</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    // è·³è¿‡å·²é‡å†™çš„URLå’Œå¤–éƒ¨URL</span><br><span class="hljs-string">    if (url.startsWith(basePath) || </span><br><span class="hljs-string">        url.startsWith(&#x27;//&#x27;) || </span><br><span class="hljs-string">        url.startsWith(&#x27;http://&#x27;) || </span><br><span class="hljs-string">        url.startsWith(&#x27;https://&#x27;) ||</span><br><span class="hljs-string">        !url.startsWith(&#x27;/&#x27;)) &#123;</span><br><span class="hljs-string">      return url;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    const newUrl = basePath + url;</span><br><span class="hljs-string">    console.log(&#x27;Rewriting path:&#x27;, url, &#x27;-&gt;&#x27;, newUrl);</span><br><span class="hljs-string">    return newUrl;</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // é‡å†™ç°æœ‰DOMå…ƒç´ </span><br><span class="hljs-string">  function rewriteExistingElements() &#123;</span><br><span class="hljs-string">    console.log(&#x27;Rewriting existing DOM elements...&#x27;);</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    // é‡å†™æ‰€æœ‰é“¾æ¥</span><br><span class="hljs-string">    document.querySelectorAll(&#x27;a[href]&#x27;).forEach(link =&gt; &#123;</span><br><span class="hljs-string">      const href = link.getAttribute(&#x27;href&#x27;);</span><br><span class="hljs-string">      if (href &amp;&amp; href.startsWith(&#x27;/&#x27;) &amp;&amp; !href.startsWith(basePath)) &#123;</span><br><span class="hljs-string">        link.setAttribute(&#x27;href&#x27;, rewritePath(href));</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    // é‡å†™æ‰€æœ‰è¡¨å•</span><br><span class="hljs-string">    document.querySelectorAll(&#x27;form[action]&#x27;).forEach(form =&gt; &#123;</span><br><span class="hljs-string">      const action = form.getAttribute(&#x27;action&#x27;);</span><br><span class="hljs-string">      if (action &amp;&amp; action.startsWith(&#x27;/&#x27;) &amp;&amp; !action.startsWith(basePath)) &#123;</span><br><span class="hljs-string">        form.setAttribute(&#x27;action&#x27;, rewritePath(action));</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    // é‡å†™æ‰€æœ‰èµ„æº</span><br><span class="hljs-string">    const resourceSelectors = [</span><br><span class="hljs-string">      &#x27;img[src]&#x27;, &#x27;script[src]&#x27;, &#x27;link[href]&#x27;, </span><br><span class="hljs-string">      &#x27;iframe[src]&#x27;, &#x27;embed[src]&#x27;, &#x27;object[data]&#x27;,</span><br><span class="hljs-string">      &#x27;source[src]&#x27;, &#x27;track[src]&#x27;, &#x27;audio[src]&#x27;, &#x27;video[src]&#x27;</span><br><span class="hljs-string">    ];</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    resourceSelectors.forEach(selector =&gt; &#123;</span><br><span class="hljs-string">      document.querySelectorAll(selector).forEach(el =&gt; &#123;</span><br><span class="hljs-string">        const src = el.getAttribute(&#x27;src&#x27;);</span><br><span class="hljs-string">        const href = el.getAttribute(&#x27;href&#x27;);</span><br><span class="hljs-string">        const data = el.getAttribute(&#x27;data&#x27;);</span><br><span class="hljs-string">        </span><br><span class="hljs-string">        if (src &amp;&amp; src.startsWith(&#x27;/&#x27;) &amp;&amp; !src.startsWith(basePath)) &#123;</span><br><span class="hljs-string">          el.setAttribute(&#x27;src&#x27;, rewritePath(src));</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">        if (href &amp;&amp; el.tagName.toLowerCase() === &#x27;link&#x27; &amp;&amp; href.startsWith(&#x27;/&#x27;) &amp;&amp; !href.startsWith(basePath)) &#123;</span><br><span class="hljs-string">          el.setAttribute(&#x27;href&#x27;, rewritePath(href));</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">        if (data &amp;&amp; data.startsWith(&#x27;/&#x27;) &amp;&amp; !data.startsWith(basePath)) &#123;</span><br><span class="hljs-string">          el.setAttribute(&#x27;data&#x27;, rewritePath(data));</span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">      &#125;);</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // æ‹¦æˆªfetchè¯·æ±‚</span><br><span class="hljs-string">  const originalFetch = window.fetch;</span><br><span class="hljs-string">  window.fetch = function(...args) &#123;</span><br><span class="hljs-string">    if (typeof args[0] === &#x27;string&#x27;) &#123;</span><br><span class="hljs-string">      const newUrl = rewritePath(args[0]);</span><br><span class="hljs-string">      if (newUrl !== args[0]) &#123;</span><br><span class="hljs-string">        console.log(&#x27;Intercepted fetch:&#x27;, args[0], &#x27;-&gt;&#x27;, newUrl);</span><br><span class="hljs-string">        args[0] = newUrl;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125; else if (args[0] instanceof Request) &#123;</span><br><span class="hljs-string">      const newUrl = rewritePath(args[0].url);</span><br><span class="hljs-string">      if (newUrl !== args[0].url) &#123;</span><br><span class="hljs-string">        console.log(&#x27;Intercepted Request:&#x27;, args[0].url, &#x27;-&gt;&#x27;, newUrl);</span><br><span class="hljs-string">        args[0] = new Request(newUrl, args[0]);</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">    return originalFetch.apply(this, args);</span><br><span class="hljs-string">  &#125;;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // æ‹¦æˆªXMLHttpRequest</span><br><span class="hljs-string">  const originalOpen = XMLHttpRequest.prototype.open;</span><br><span class="hljs-string">  XMLHttpRequest.prototype.open = function(method, url, ...rest) &#123;</span><br><span class="hljs-string">    if (typeof url === &#x27;string&#x27;) &#123;</span><br><span class="hljs-string">      const newUrl = rewritePath(url);</span><br><span class="hljs-string">      if (newUrl !== url) &#123;</span><br><span class="hljs-string">        console.log(&#x27;Intercepted XHR:&#x27;, url, &#x27;-&gt;&#x27;, newUrl);</span><br><span class="hljs-string">        url = newUrl;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">    return originalOpen.call(this, method, url, ...rest);</span><br><span class="hljs-string">  &#125;;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // æ‹¦æˆªåŠ¨æ€åˆ›å»ºçš„å…ƒç´ </span><br><span class="hljs-string">  const originalCreateElement = document.createElement;</span><br><span class="hljs-string">  document.createElement = function(tagName) &#123;</span><br><span class="hljs-string">    const element = originalCreateElement.call(this, tagName);</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    const rewriteAttributes = [&#x27;src&#x27;, &#x27;href&#x27;, &#x27;action&#x27;, &#x27;data&#x27;];</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    const originalSetAttribute = element.setAttribute;</span><br><span class="hljs-string">    element.setAttribute = function(name, value) &#123;</span><br><span class="hljs-string">      if (rewriteAttributes.includes(name) &amp;&amp; value &amp;&amp; value.startsWith(&#x27;/&#x27;) &amp;&amp; !value.startsWith(basePath)) &#123;</span><br><span class="hljs-string">        value = rewritePath(value);</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      return originalSetAttribute.call(this, name, value);</span><br><span class="hljs-string">    &#125;;</span><br><span class="hljs-string">    </span><br><span class="hljs-string">    return element;</span><br><span class="hljs-string">  &#125;;</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // ç›‘å¬DOMå˜åŒ–</span><br><span class="hljs-string">  const observer = new MutationObserver(function(mutations) &#123;</span><br><span class="hljs-string">    let shouldRewrite = false;</span><br><span class="hljs-string">    mutations.forEach(function(mutation) &#123;</span><br><span class="hljs-string">      if (mutation.addedNodes.length) &#123;</span><br><span class="hljs-string">        shouldRewrite = true;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">    if (shouldRewrite) &#123;</span><br><span class="hljs-string">      setTimeout(rewriteExistingElements, 100);</span><br><span class="hljs-string">    &#125;</span><br><span class="hljs-string">  &#125;);</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  observer.observe(document.body, &#123;</span><br><span class="hljs-string">    childList: true,</span><br><span class="hljs-string">    subtree: true</span><br><span class="hljs-string">  &#125;);</span><br><span class="hljs-string">  </span><br><span class="hljs-string">  // åˆå§‹é‡å†™</span><br><span class="hljs-string">  if (document.readyState === &#x27;loading&#x27;) &#123;</span><br><span class="hljs-string">    document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span><br><span class="hljs-string">      setTimeout(rewriteExistingElements, 100);</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">  &#125; else &#123;</span><br><span class="hljs-string">    setTimeout(rewriteExistingElements, 100);</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">&#125;)();</span><br><span class="hljs-string">&lt;/script&gt;</span><br><span class="hljs-string">`</span>;<br>    <br>    <span class="hljs-comment">// æ³¨å…¥å®¢æˆ·ç«¯è„šæœ¬</span><br>    <span class="hljs-keyword">if</span> (html.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>)) &#123;<br>      html = html.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>, clientScript + <span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (html.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span>)) &#123;<br>      html = html.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span>, <span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span> + clientScript);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      html = clientScript + html;<br>    &#125;<br>    <br>    <span class="hljs-keyword">const</span> bodyBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>().<span class="hljs-title function_">encode</span>(html);<br>    newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;content-length&quot;</span>, <span class="hljs-title class_">String</span>(bodyBytes.<span class="hljs-property">length</span>));<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(bodyBytes, &#123;<br>      <span class="hljs-attr">status</span>: res.<span class="hljs-property">status</span>,<br>      <span class="hljs-attr">statusText</span>: res.<span class="hljs-property">statusText</span>,<br>      <span class="hljs-attr">headers</span>: newHeaders<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">// å¯¹äºé™æ€æ–‡ä»¶ï¼ˆJSã€CSSç­‰ï¼‰ï¼Œç›´æ¥è¿”å›</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(res.<span class="hljs-property">body</span>, &#123;<br>    <span class="hljs-attr">status</span>: res.<span class="hljs-property">status</span>,<br>    <span class="hljs-attr">statusText</span>: res.<span class="hljs-property">statusText</span>,<br>    <span class="hljs-attr">headers</span>: newHeaders<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–¹æ¡ˆäºŒï¼šå­åŸŸåæ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆäºŒï¼šå­åŸŸåæ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šå­åŸŸåæ–¹æ¡ˆ"></a>æ–¹æ¡ˆäºŒï¼šå­åŸŸåæ–¹æ¡ˆ</h2><h3 id="æ ¸å¿ƒæ€è·¯-1"><a href="#æ ¸å¿ƒæ€è·¯-1" class="headerlink" title="æ ¸å¿ƒæ€è·¯"></a>æ ¸å¿ƒæ€è·¯</h3><p>ä½¿ç”¨å­åŸŸåæ¥åŒºåˆ†ä¸åŒç«¯å£æœåŠ¡ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://<span class="hljs-number">911</span>.<span class="hljs-number">4</span>.xinhaojin.top/     â†’ http://<span class="hljs-number">6</span>.xinhaojin.top:<span class="hljs-number">911</span>/<br><span class="hljs-attribute">http</span>://<span class="hljs-number">912</span>.<span class="hljs-number">4</span>.xinhaojin.top/admin â†’ http://<span class="hljs-number">6</span>.xinhaojin.top:<span class="hljs-number">912</span>/admin<br></code></pre></td></tr></table></figure><h3 id="é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ-1"><a href="#é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ-1" class="headerlink" title="é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><h4 id="1-ä¸‰çº§å­åŸŸåSSLè¯ä¹¦é—®é¢˜"><a href="#1-ä¸‰çº§å­åŸŸåSSLè¯ä¹¦é—®é¢˜" class="headerlink" title="1. ä¸‰çº§å­åŸŸåSSLè¯ä¹¦é—®é¢˜"></a>1. ä¸‰çº§å­åŸŸåSSLè¯ä¹¦é—®é¢˜</h4><p><strong>é—®é¢˜</strong>ï¼šCloudflareå…è´¹è´¦æˆ·ä¸ä¸ºä¸‰çº§å­åŸŸåè‡ªåŠ¨ç­¾å‘SSLè¯ä¹¦<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>å¼ºåˆ¶ä½¿ç”¨HTTPåè®®è®¿é—®</li><li>è‡ªåŠ¨é‡å®šå‘HTTPSè¯·æ±‚åˆ°HTTP</li><li>ç§»é™¤Cookieçš„Secureæ ‡å¿—</li></ul><h4 id="2-é¡µé¢å†…HTTPSèµ„æºè¯·æ±‚å¤±è´¥"><a href="#2-é¡µé¢å†…HTTPSèµ„æºè¯·æ±‚å¤±è´¥" class="headerlink" title="2. é¡µé¢å†…HTTPSèµ„æºè¯·æ±‚å¤±è´¥"></a>2. é¡µé¢å†…HTTPSèµ„æºè¯·æ±‚å¤±è´¥</h4><p><strong>é—®é¢˜</strong>ï¼šé¡µé¢å†…èµ„æºé“¾æ¥ä»ä½¿ç”¨HTTPSåè®®<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>é‡å†™HTMLä¸­çš„HTTPSé“¾æ¥ä¸ºHTTP</li><li>é‡å†™JS&#x2F;CSSæ–‡ä»¶ä¸­çš„åè®®ç›¸å…³URL</li><li>è®¾ç½®æ­£ç¡®çš„baseæ ‡ç­¾</li></ul><h4 id="3-åç«¯é“¾æ¥é‡å†™"><a href="#3-åç«¯é“¾æ¥é‡å†™" class="headerlink" title="3. åç«¯é“¾æ¥é‡å†™"></a>3. åç«¯é“¾æ¥é‡å†™</h4><p><strong>é—®é¢˜</strong>ï¼šåç«¯è¿”å›çš„å†…å®¹ä¸­åŒ…å«åŸå§‹HTTPé“¾æ¥<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>é‡å†™åç«¯HTTPé“¾æ¥åˆ°ä»£ç†å­åŸŸå</li><li>å¤„ç†åè®®ç›¸å¯¹URLï¼ˆ&#x2F;&#x2F;host&#x2F;pathï¼‰</li></ul><h3 id="é…ç½®æ­¥éª¤-1"><a href="#é…ç½®æ­¥éª¤-1" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><ol><li><strong>DNSé…ç½®</strong>ï¼šæ·»åŠ é€šé…ç¬¦CNAMEè®°å½• <code>*.4.xinhaojin.top</code>,CNAMEè®°å½•ï¼Œåç§°<code>*.4</code>,å†…å®¹<code>4.xinhaojin.top</code>,å¼€å¯ä»£ç†</li><li><strong>Workeréƒ¨ç½²</strong>ï¼šéƒ¨ç½²å­åŸŸåæ–¹æ¡ˆçš„Workerä»£ç </li><li><strong>è·¯ç”±è®¾ç½®</strong>ï¼šé…ç½®workersè·¯ç”± <code>*.4.xinhaojin.top/*</code></li><li><strong>SSLè®¾ç½®</strong>ï¼šSSL&#x2F;TLSåŠ å¯†æ¨¡å¼è®¾ç½®ä¸ºâ€å…³é—­â€</li></ol><h3 id="Workerä»£ç æ ¸å¿ƒé€»è¾‘-1"><a href="#Workerä»£ç æ ¸å¿ƒé€»è¾‘-1" class="headerlink" title="Workerä»£ç æ ¸å¿ƒé€»è¾‘"></a>Workerä»£ç æ ¸å¿ƒé€»è¾‘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼ºåˆ¶HTTPè®¿é—®</span><br><span class="hljs-keyword">if</span> (url.<span class="hljs-property">protocol</span> === <span class="hljs-string">&#x27;https:&#x27;</span>) &#123;<br>  url.<span class="hljs-property">protocol</span> = <span class="hljs-string">&#x27;http:&#x27;</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">redirect</span>(url.<span class="hljs-title function_">toString</span>(), <span class="hljs-number">301</span>);<br>&#125;<br><br><span class="hljs-comment">// å­åŸŸåç«¯å£æå–</span><br><span class="hljs-keyword">const</span> portMatch = hostname.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(\d+)\.4\.xinhaojin\.top$/</span>);<br><br><span class="hljs-comment">// åè®®é‡å†™</span><br>html.<span class="hljs-title function_">replace</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`https://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>), <br>             <span class="hljs-string">`http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span>);<br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´ä»£ç </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;fetch&quot;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> &#123;<br>  event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">handleRequest</span>(event.<span class="hljs-property">request</span>));<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ORIGIN_HOST</span> = <span class="hljs-string">&quot;6.xinhaojin.top&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) &#123;<br>  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);<br>  <span class="hljs-keyword">const</span> hostname = url.<span class="hljs-property">hostname</span>;<br>  <br>  <span class="hljs-comment">// å¦‚æœæ˜¯ HTTPS è¯·æ±‚ï¼Œé‡å®šå‘åˆ° HTTP</span><br>  <span class="hljs-keyword">if</span> (url.<span class="hljs-property">protocol</span> === <span class="hljs-string">&#x27;https:&#x27;</span>) &#123;<br>    url.<span class="hljs-property">protocol</span> = <span class="hljs-string">&#x27;http:&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">redirect</span>(url.<span class="hljs-title function_">toString</span>(), <span class="hljs-number">301</span>);<br>  &#125;<br>  <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received request for: <span class="hljs-subst">$&#123;hostname&#125;</span><span class="hljs-subst">$&#123;url.pathname&#125;</span>`</span>);<br>  <br>  <span class="hljs-comment">// ä»å­åŸŸåæå–ç«¯å£ï¼š911.4.xinhaojin.top -&gt; 911</span><br>  <span class="hljs-keyword">const</span> portMatch = hostname.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^(\d+)\.4\.xinhaojin\.top$/</span>);<br>  <br>  <span class="hljs-keyword">if</span> (!portMatch) &#123;<br>    <span class="hljs-comment">// å¦‚æœä¸æ˜¯ç«¯å£æ ¼å¼çš„å­åŸŸåï¼Œè¿”å›ä½¿ç”¨è¯´æ˜</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<br>      <span class="hljs-string">`ğŸš€ IPv6 ä»£ç†æœåŠ¡\n\n`</span> +<br>      <span class="hljs-string">`ä½¿ç”¨æ–¹æ³•ï¼š\n`</span> +<br>      <span class="hljs-string">`  http://&lt;ç«¯å£&gt;.4.xinhaojin.top/&lt;è·¯å¾„&gt;\n\n`</span> +<br>      <span class="hljs-string">`ç¤ºä¾‹ï¼š\n`</span> +<br>      <span class="hljs-string">`  http://911.4.xinhaojin.top/          â†’ http://6.xinhaojin.top:911/\n`</span> +<br>      <span class="hljs-string">`  http://912.4.xinhaojin.top/admin     â†’ http://6.xinhaojin.top:912/admin\n\n`</span> +<br>      <span class="hljs-string">`å½“å‰è¯·æ±‚ï¼š<span class="hljs-subst">$&#123;request.url&#125;</span>\n`</span> +<br>      <span class="hljs-string">`æ³¨æ„ï¼šè¯·ä½¿ç”¨ HTTP åè®®è®¿é—®`</span>,<br>      &#123; <br>        <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>, <br>        <span class="hljs-attr">headers</span>: &#123; <br>          <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span>,<br>          <span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span><br>        &#125; <br>      &#125;<br>    );<br>  &#125;<br>  <br>  <span class="hljs-keyword">const</span> port = portMatch[<span class="hljs-number">1</span>];<br>  <span class="hljs-keyword">const</span> target = <span class="hljs-string">`http://<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span><span class="hljs-subst">$&#123;url.pathname&#125;</span><span class="hljs-subst">$&#123;url.search&#125;</span>`</span>;<br>  <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Proxying: <span class="hljs-subst">$&#123;request.url&#125;</span> -&gt; <span class="hljs-subst">$&#123;target&#125;</span>`</span>);<br>  <br>  <span class="hljs-keyword">const</span> reqHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>(request.<span class="hljs-property">headers</span>);<br>  <br>  <span class="hljs-comment">// é‡è¦ï¼šè®¾ç½®æ­£ç¡®çš„ Host å¤´</span><br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Host&quot;</span>, <span class="hljs-string">`<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span>`</span>);<br>  <br>  <span class="hljs-comment">// ç§»é™¤ Cloudflare ç‰¹å®šçš„å¤´éƒ¨ï¼Œé¿å…å¹²æ‰°åç«¯</span><br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-connecting-ip&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-ipcountry&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-ray&quot;</span>);<br>  reqHeaders.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;cf-visitor&quot;</span>);<br>  <br>  <span class="hljs-comment">// æ·»åŠ  X-Forwarded-* å¤´éƒ¨ï¼Œè®©åç«¯çŸ¥é“çœŸå®æƒ…å†µ</span><br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Forwarded-Host&quot;</span>, hostname);<br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Forwarded-Proto&quot;</span>, <span class="hljs-string">&quot;http&quot;</span>); <span class="hljs-comment">// æ”¹ä¸º http</span><br>  reqHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Forwarded-For&quot;</span>, request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;cf-connecting-ip&quot;</span>) || <span class="hljs-string">&quot;&quot;</span>);<br>  <br>  <span class="hljs-keyword">const</span> fetchInit = &#123;<br>    <span class="hljs-attr">method</span>: request.<span class="hljs-property">method</span>,<br>    <span class="hljs-attr">headers</span>: reqHeaders,<br>    <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;manual&quot;</span>,<br>    <span class="hljs-attr">body</span>: [<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;HEAD&quot;</span>].<span class="hljs-title function_">includes</span>(request.<span class="hljs-property">method</span>) ? <span class="hljs-literal">undefined</span> : request.<span class="hljs-property">body</span><br>  &#125;;<br><br>  <span class="hljs-keyword">let</span> res;<br>  <span class="hljs-keyword">try</span> &#123;<br>    res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(target, fetchInit);<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-comment">// æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†</span><br>    <span class="hljs-keyword">const</span> errorMessage = e.<span class="hljs-property">message</span> || <span class="hljs-string">&quot;Unknown error&quot;</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Fetch failed: <span class="hljs-subst">$&#123;errorMessage&#125;</span>, Target: <span class="hljs-subst">$&#123;target&#125;</span>`</span>);<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<br>      <span class="hljs-string">`âŒ ä¸Šæ¸¸æœåŠ¡è¿æ¥å¤±è´¥\n\n`</span> +<br>      <span class="hljs-string">`é”™è¯¯ä¿¡æ¯ï¼š<span class="hljs-subst">$&#123;errorMessage&#125;</span>\n`</span> +<br>      <span class="hljs-string">`ç›®æ ‡åœ°å€ï¼š<span class="hljs-subst">$&#123;target&#125;</span>\n\n`</span> +<br>      <span class="hljs-string">`å¯èƒ½çš„åŸå› ï¼š\n`</span> +<br>      <span class="hljs-string">`â€¢ ç«¯å£ <span class="hljs-subst">$&#123;port&#125;</span> æ²¡æœ‰æœåŠ¡åœ¨è¿è¡Œ\n`</span> +<br>      <span class="hljs-string">`â€¢ ç›®æ ‡æœåŠ¡å™¨ <span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span> æ— æ³•è®¿é—®\n`</span> +<br>      <span class="hljs-string">`â€¢ ç½‘ç»œè¿æ¥æˆ–é˜²ç«å¢™é—®é¢˜\n`</span> +<br>      <span class="hljs-string">`â€¢ åç«¯æœåŠ¡åªæ”¯æŒ IPv6 è®¿é—®\n\n`</span> +<br>      <span class="hljs-string">`è°ƒè¯•ä¿¡æ¯ï¼š\n`</span> +<br>      <span class="hljs-string">`â€¢ è¯·æ±‚åè®®: HTTP (åç«¯æœåŠ¡)\n`</span> +<br>      <span class="hljs-string">`â€¢ ç›®æ ‡ç«¯å£: <span class="hljs-subst">$&#123;port&#125;</span>\n`</span> +<br>      <span class="hljs-string">`â€¢ ç›®æ ‡ä¸»æœº: <span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>`</span>,<br>      &#123; <br>        <span class="hljs-attr">status</span>: <span class="hljs-number">502</span>,<br>        <span class="hljs-attr">headers</span>: &#123; <br>          <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span>,<br>          <span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span><br>        &#125;<br>      &#125;<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">// å¤„ç†å“åº”å¤´</span><br>  <span class="hljs-keyword">const</span> newHeaders = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>();<br>  <br>  <span class="hljs-comment">// å¤åˆ¶æ‰€æœ‰åŸå§‹å¤´éƒ¨ï¼Œé™¤äº†éœ€è¦ä¿®æ”¹çš„</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [k, v] <span class="hljs-keyword">of</span> res.<span class="hljs-property">headers</span>) &#123;<br>    <span class="hljs-comment">// å¤„ç†é‡å®šå‘ Location å¤´</span><br>    <span class="hljs-keyword">if</span> (k.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">&quot;location&quot;</span> &amp;&amp; v) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">const</span> locationUrl = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(v, target);<br>        <br>        <span class="hljs-comment">// å¦‚æœé‡å®šå‘åˆ°åŒåŸŸ HTTP æœåŠ¡ï¼Œæ”¹ä¸ºæˆ‘ä»¬çš„ HTTP å­åŸŸåæ ¼å¼</span><br>        <span class="hljs-keyword">if</span> (locationUrl.<span class="hljs-property">hostname</span> === <span class="hljs-variable constant_">ORIGIN_HOST</span>) &#123;<br>          <span class="hljs-keyword">const</span> redirectPort = locationUrl.<span class="hljs-property">port</span> || <span class="hljs-string">&#x27;80&#x27;</span>;<br>          <span class="hljs-keyword">const</span> newLocation = <span class="hljs-string">`http://<span class="hljs-subst">$&#123;redirectPort&#125;</span>.4.xinhaojin.top<span class="hljs-subst">$&#123;locationUrl.pathname&#125;</span><span class="hljs-subst">$&#123;locationUrl.search&#125;</span>`</span>;<br>          newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Location&quot;</span>, newLocation);<br>          <span class="hljs-keyword">continue</span>;<br>        &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-comment">// URL è§£æå¤±è´¥ï¼Œä¿æŒåŸæ ·</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Failed to parse Location header: <span class="hljs-subst">$&#123;v&#125;</span>`</span>, e);<br>      &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¤„ç† Set-Cookieï¼šç§»é™¤ Secure æ ‡å¿—ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ HTTP</span><br>    <span class="hljs-keyword">if</span> (k.<span class="hljs-title function_">toLowerCase</span>() === <span class="hljs-string">&quot;set-cookie&quot;</span>) &#123;<br>      <span class="hljs-keyword">let</span> modifiedCookie = v;<br>      <span class="hljs-comment">// å¦‚æœ cookie æ²¡æœ‰æŒ‡å®š Domainï¼Œæˆ–è€… Domain æ˜¯åç«¯åŸŸåï¼Œè¿›è¡Œè°ƒæ•´</span><br>      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/Domain=/i</span>.<span class="hljs-title function_">test</span>(v) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`Domain=<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>`</span>, <span class="hljs-string">&#x27;i&#x27;</span>).<span class="hljs-title function_">test</span>(v)) &#123;<br>        modifiedCookie = v.<span class="hljs-title function_">replace</span>(<br>          <span class="hljs-regexp">/(?:;\s*Domain=)[^;]*/i</span>, <br>          <span class="hljs-string">`; Domain=.4.xinhaojin.top`</span><br>        );<br>      &#125;<br>      <span class="hljs-comment">// ç§»é™¤ Secure æ ‡å¿—ï¼ˆå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ HTTPï¼‰</span><br>      modifiedCookie = modifiedCookie.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/;\s*Secure/gi</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>      newHeaders.<span class="hljs-title function_">append</span>(<span class="hljs-string">&quot;Set-Cookie&quot;</span>, modifiedCookie);<br>      <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// è·³è¿‡ hop-by-hop å¤´éƒ¨</span><br>    <span class="hljs-keyword">const</span> hopByHop = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<br>      <span class="hljs-string">&quot;connection&quot;</span>, <span class="hljs-string">&quot;keep-alive&quot;</span>, <span class="hljs-string">&quot;proxy-authenticate&quot;</span>, <span class="hljs-string">&quot;proxy-authorization&quot;</span>,<br>      <span class="hljs-string">&quot;te&quot;</span>, <span class="hljs-string">&quot;trailers&quot;</span>, <span class="hljs-string">&quot;transfer-encoding&quot;</span>, <span class="hljs-string">&quot;upgrade&quot;</span><br>    ]);<br>    <span class="hljs-keyword">if</span> (hopByHop.<span class="hljs-title function_">has</span>(k.<span class="hljs-title function_">toLowerCase</span>())) <span class="hljs-keyword">continue</span>;<br><br>    newHeaders.<span class="hljs-title function_">set</span>(k, v);<br>  &#125;<br><br>  <span class="hljs-comment">// æ·»åŠ å®‰å…¨ç›¸å…³çš„å¤´éƒ¨</span><br>  newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Content-Type-Options&quot;</span>, <span class="hljs-string">&quot;nosniff&quot;</span>);<br>  newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;X-Frame-Options&quot;</span>, <span class="hljs-string">&quot;SAMEORIGIN&quot;</span>);<br>  <br>  <span class="hljs-comment">// å¯¹äº HTML å†…å®¹ï¼Œé‡å†™å…¶ä¸­çš„ HTTPS é“¾æ¥ä¸º HTTP</span><br>  <span class="hljs-keyword">const</span> contentType = res.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;content-type&quot;</span>) || <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">if</span> (contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;text/html&quot;</span>)) &#123;<br>    <span class="hljs-keyword">let</span> html = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">text</span>();<br>    <br>    <span class="hljs-keyword">const</span> currentSubdomain = hostname; <span class="hljs-comment">// å¦‚ 911.4.xinhaojin.top</span><br>    <br>    <span class="hljs-comment">// å°†æ‰€æœ‰ HTTPS é“¾æ¥æ”¹ä¸º HTTP</span><br>    html = html.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`https://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>),<br>      <span class="hljs-string">`http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span><br>    );<br>    <br>    <span class="hljs-comment">// é‡å†™åç«¯ HTTP é“¾æ¥åˆ°æˆ‘ä»¬çš„ HTTP ä»£ç†</span><br>    html = html.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`http://<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>),<br>      <span class="hljs-string">`http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span><br>    );<br>    <br>    <span class="hljs-comment">// é‡å†™ç›¸å¯¹è·¯å¾„çš„åè®®ç›¸å¯¹URLï¼ˆ//host/pathï¼‰</span><br>    html = html.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`//<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>),<br>      <span class="hljs-string">`//<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span><br>    );<br>    <br>    <span class="hljs-comment">// æ³¨å…¥åŸºç¡€æ ‡ç­¾ç¡®ä¿ç›¸å¯¹è·¯å¾„æ­£ç¡®</span><br>    <span class="hljs-keyword">const</span> baseTag = <span class="hljs-string">`&lt;base href=&quot;http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>/&quot;&gt;`</span>;<br>    <span class="hljs-keyword">if</span> (html.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>)) &#123;<br>      html = html.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>, baseTag + <span class="hljs-string">&#x27;&lt;/head&gt;&#x27;</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (html.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span>)) &#123;<br>      html = html.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span>, <span class="hljs-string">&#x27;&lt;head&gt;&#x27;</span> + baseTag);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      html = baseTag + html;<br>    &#125;<br>    <br>    <span class="hljs-keyword">const</span> bodyBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>().<span class="hljs-title function_">encode</span>(html);<br>    newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;content-length&quot;</span>, <span class="hljs-title class_">String</span>(bodyBytes.<span class="hljs-property">length</span>));<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(bodyBytes, &#123;<br>      <span class="hljs-attr">status</span>: res.<span class="hljs-property">status</span>,<br>      <span class="hljs-attr">statusText</span>: res.<span class="hljs-property">statusText</span>,<br>      <span class="hljs-attr">headers</span>: newHeaders<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">// å¯¹äº JavaScript å’Œ CSSï¼Œé‡å†™å…¶ä¸­çš„ HTTPS é“¾æ¥</span><br>  <span class="hljs-keyword">if</span> (contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;application/javascript&quot;</span>) || <br>      contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;text/css&quot;</span>)) &#123;<br>    <span class="hljs-keyword">let</span> content = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">text</span>();<br>    <span class="hljs-keyword">const</span> currentSubdomain = hostname;<br>    <br>    <span class="hljs-comment">// é‡å†™ JS/CSS ä¸­çš„ HTTPS é“¾æ¥ä¸º HTTP</span><br>    content = content.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`https://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>),<br>      <span class="hljs-string">`http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span><br>    );<br>    <br>    <span class="hljs-comment">// é‡å†™ JS/CSS ä¸­çš„åç«¯ URL</span><br>    content = content.<span class="hljs-title function_">replace</span>(<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`http://<span class="hljs-subst">$&#123;ORIGIN_HOST&#125;</span>:<span class="hljs-subst">$&#123;port&#125;</span>`</span>, <span class="hljs-string">&#x27;g&#x27;</span>),<br>      <span class="hljs-string">`http://<span class="hljs-subst">$&#123;currentSubdomain&#125;</span>`</span><br>    );<br>    <br>    <span class="hljs-keyword">const</span> bodyBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>().<span class="hljs-title function_">encode</span>(content);<br>    newHeaders.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;content-length&quot;</span>, <span class="hljs-title class_">String</span>(bodyBytes.<span class="hljs-property">length</span>));<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(bodyBytes, &#123;<br>      <span class="hljs-attr">status</span>: res.<span class="hljs-property">status</span>,<br>      <span class="hljs-attr">statusText</span>: res.<span class="hljs-property">statusText</span>,<br>      <span class="hljs-attr">headers</span>: newHeaders<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">// å…¶ä»–ç±»å‹å†…å®¹ç›´æ¥è¿”å›</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(res.<span class="hljs-property">body</span>, &#123;<br>    <span class="hljs-attr">status</span>: res.<span class="hljs-property">status</span>,<br>    <span class="hljs-attr">statusText</span>: res.<span class="hljs-property">statusText</span>,<br>    <span class="hljs-attr">headers</span>: newHeaders<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“"><a href="#æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“" class="headerlink" title="æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“"></a>æ–¹æ¡ˆå¯¹æ¯”ä¸æ€»ç»“</h2><h3 id="è·¯å¾„å‰ç¼€æ–¹æ¡ˆ"><a href="#è·¯å¾„å‰ç¼€æ–¹æ¡ˆ" class="headerlink" title="è·¯å¾„å‰ç¼€æ–¹æ¡ˆ"></a>è·¯å¾„å‰ç¼€æ–¹æ¡ˆ</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>âœ… å®Œæ•´çš„HTTPSæ”¯æŒï¼Œå®‰å…¨æ€§é«˜</li><li>âœ… æ— éœ€é¢å¤–DNSé…ç½®</li><li>âœ… æµè§ˆå™¨æ— å®‰å…¨è­¦å‘Š</li><li>âœ… å…¼å®¹æ€§æœ€å¥½</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>âŒ URLä¸å¤Ÿç®€æ´ç¾è§‚</li><li>âŒ éœ€è¦å¤æ‚çš„å®¢æˆ·ç«¯é‡å†™é€»è¾‘</li><li>âŒ ç»´æŠ¤æˆæœ¬è¾ƒé«˜</li></ul><h3 id="å­åŸŸåæ–¹æ¡ˆ"><a href="#å­åŸŸåæ–¹æ¡ˆ" class="headerlink" title="å­åŸŸåæ–¹æ¡ˆ"></a>å­åŸŸåæ–¹æ¡ˆ</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>âœ… URLç®€æ´ç›´è§‚ï¼Œæ˜“äºè®°å¿†</li><li>âœ… æ— éœ€è·¯å¾„é‡å†™ï¼Œé€»è¾‘ç®€å•</li><li>âœ… é¡µé¢å†…è¯·æ±‚è‡ªç„¶æ­£ç¡®</li><li>âœ… ç»´æŠ¤ç®€å•</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>âŒ åªèƒ½ä½¿ç”¨HTTPåè®®</li><li>âŒ æµè§ˆå™¨æ˜¾ç¤ºâ€ä¸å®‰å…¨â€è­¦å‘Š</li><li>âŒ éœ€è¦é€šé…ç¬¦DNSé…ç½®</li><li>âŒ æŸäº›ç½‘ç»œç¯å¢ƒå¯èƒ½é˜»æ­¢HTTPè®¿é—®</li></ul><h3 id="æ¨èä½¿ç”¨åœºæ™¯"><a href="#æ¨èä½¿ç”¨åœºæ™¯" class="headerlink" title="æ¨èä½¿ç”¨åœºæ™¯"></a>æ¨èä½¿ç”¨åœºæ™¯</h3><p><strong>è·¯å¾„å‰ç¼€æ–¹æ¡ˆé€‚ç”¨äºï¼š</strong></p><ul><li>ç”Ÿäº§ç¯å¢ƒå¯¹å¤–æœåŠ¡</li><li>éœ€è¦HTTPSå®‰å…¨æ€§çš„åœºæ™¯</li><li>å¯¹URLç¾è§‚åº¦è¦æ±‚ä¸é«˜çš„å†…éƒ¨ç³»ç»Ÿ</li></ul><p><strong>å­åŸŸåæ–¹æ¡ˆé€‚ç”¨äºï¼š</strong></p><ul><li>å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ</li><li>å†…éƒ¨ç½‘ç»œä½¿ç”¨</li><li>å¯¹URLç®€æ´æ€§æœ‰è¦æ±‚çš„åœºæ™¯</li></ul><p>ä¸¤ç§æ–¹æ¡ˆéƒ½ç»è¿‡å……åˆ†æµ‹è¯•ï¼ŒåŸºæœ¬èƒ½å¤Ÿè§£å†³IPv4è®¿é—®IPv6å†…ç½‘æœåŠ¡çš„æ ¸å¿ƒéœ€æ±‚ï¼Œä½†ä¸æ˜¯è®¿é—®å†…ç½‘æœåŠ¡çš„é¦–é€‰æ–¹æ¡ˆï¼Œä»…ä½œä¸ºä¸´æ—¶åº”æ€¥å¤‡ç”¨ï¼Œé¦–é€‰åº”å½“è¿˜æ˜¯åœ¨æœ‰IPv6çš„ç¯å¢ƒä¸‹ç›´æ¥ä½¿ç”¨æœåŠ¡å™¨çš„å…¬ç½‘IPv6ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å…‰çŒ«IPv6å›ç¨‹è·¯ç”±é—®é¢˜åˆ†æä¸è§£å†³æ€è·¯</title>
    <link href="/2025/10/25/%E5%85%89%E7%8C%ABIPv6%E5%9B%9E%E7%A8%8B%E8%B7%AF%E7%94%B1%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF/"/>
    <url>/2025/10/25/%E5%85%89%E7%8C%ABIPv6%E5%9B%9E%E7%A8%8B%E8%B7%AF%E7%94%B1%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<h1 id="å…‰çŒ«-IPv6-å›ç¨‹è·¯ç”±é—®é¢˜åˆ†æä¸è§£å†³æ€è·¯"><a href="#å…‰çŒ«-IPv6-å›ç¨‹è·¯ç”±é—®é¢˜åˆ†æä¸è§£å†³æ€è·¯" class="headerlink" title="å…‰çŒ« IPv6 å›ç¨‹è·¯ç”±é—®é¢˜åˆ†æä¸è§£å†³æ€è·¯"></a>å…‰çŒ« IPv6 å›ç¨‹è·¯ç”±é—®é¢˜åˆ†æä¸è§£å†³æ€è·¯</h1><h2 id="ä¸€ã€ç½‘ç»œæ‹“æ‰‘ä¸èƒŒæ™¯"><a href="#ä¸€ã€ç½‘ç»œæ‹“æ‰‘ä¸èƒŒæ™¯" class="headerlink" title="ä¸€ã€ç½‘ç»œæ‹“æ‰‘ä¸èƒŒæ™¯"></a>ä¸€ã€ç½‘ç»œæ‹“æ‰‘ä¸èƒŒæ™¯</h2><p>åœ¨å…¸å‹çš„å®¶åº­å®½å¸¦ç¯å¢ƒä¸­ï¼Œå…‰çŒ«è´Ÿè´£æ‹¨å·ä¸Šç½‘å¹¶å¯ç”¨ DHCP åŠŸèƒ½ï¼Œä¸ºä¸‹çº§è·¯ç”±å™¨åˆ†é…ç§æœ‰ IPv4 åœ°å€ã€‚<br>æ‹“æ‰‘ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dns">å…¬ç½‘ â†” å…‰çŒ«ï¼ˆPPPoE æ‹¨å·ï¼ŒLAN: <span class="hljs-number">192.168.1.0</span>/<span class="hljs-number">24</span>ï¼‰ â†” è·¯ç”±å™¨ï¼ˆWAN: <span class="hljs-number">192.168.1.2</span>ï¼‰ â†” å†…ç½‘ï¼ˆLAN: <span class="hljs-number">192.168.31.0</span>/<span class="hljs-number">24</span>ï¼‰<br></code></pre></td></tr></table></figure><p>å…‰çŒ«å¼€å¯ IPv6ï¼Œå·¥ä½œåœ¨ <strong>Native æ¨¡å¼</strong>ï¼Œè·¯ç”±å™¨é€šè¿‡è‡ªåŠ¨åå•†ï¼ˆRAã€DHCPv6ï¼‰è·å–å…¬ç½‘ IPv6 å‰ç¼€å¹¶åˆ†é…ç»™å†…ç½‘è®¾å¤‡ã€‚<br>ç›®æ ‡éœ€æ±‚æ˜¯ï¼š<strong>å†…ç½‘æœåŠ¡å™¨èƒ½å¤Ÿåœ¨å…¬ç½‘é€šè¿‡ IPv6 ç›´æ¥è®¿é—®</strong>ã€‚</p><h2 id="äºŒã€é—®é¢˜æè¿°"><a href="#äºŒã€é—®é¢˜æè¿°" class="headerlink" title="äºŒã€é—®é¢˜æè¿°"></a>äºŒã€é—®é¢˜æè¿°</h2><p>åœ¨éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨èƒ½å¤Ÿè‡ªåŠ¨è·å– IPv6 å‰ç¼€ï¼Œå†…ç½‘è®¾å¤‡ä¹Ÿèƒ½æ­£å¸¸é€šè¿‡ IPv6 ä¸Šç½‘ï¼›<br>ä½†æœ‰æ—¶è·¯ç”±å™¨è·å–ä¸åˆ°å‰ç¼€ï¼ŒIPv6 é…ç½®ä¸ç¨³å®šã€‚<br>æ›´å…³é”®çš„æ˜¯ï¼šå½“æ‰‹åŠ¨ä¸ºè·¯ç”±å™¨é…ç½®é™æ€ IPv6 åœ°å€ä¸å‰ç¼€æ—¶ï¼Œè™½ç„¶å‚æ•°ä¸è‡ªåŠ¨æ¨¡å¼å®Œå…¨ä¸€è‡´ï¼Œä½†å…‰çŒ«ä¸Šå´<strong>ä¸ä¼šå‡ºç°ä¸€æ¡é€šå¾€è·¯ç”±å™¨å†…ç½‘çš„ IPv6 é™æ€è·¯ç”±</strong>ã€‚<br>ç»“æœè¡¨ç°ä¸ºï¼š</p><ul><li>å†…ç½‘è®¾å¤‡å¯ä»¥è®¿é—®å¤–éƒ¨ IPv6 ç½‘ç«™ï¼›</li><li>ä½†å…¬ç½‘æ— æ³•ä¸»åŠ¨è®¿é—®å†…ç½‘è®¾å¤‡ï¼ˆæ— å›ç¨‹è·¯ç”±ï¼‰ã€‚</li></ul><h2 id="ä¸‰ã€åŸå› åˆ†æ"><a href="#ä¸‰ã€åŸå› åˆ†æ" class="headerlink" title="ä¸‰ã€åŸå› åˆ†æ"></a>ä¸‰ã€åŸå› åˆ†æ</h2><h3 id="1-IPv4-ä¸-IPv6-çš„æ ¹æœ¬å·®å¼‚"><a href="#1-IPv4-ä¸-IPv6-çš„æ ¹æœ¬å·®å¼‚" class="headerlink" title="1. IPv4 ä¸ IPv6 çš„æ ¹æœ¬å·®å¼‚"></a>1. IPv4 ä¸ IPv6 çš„æ ¹æœ¬å·®å¼‚</h3><ul><li><p><strong>IPv4 é™æ€é…ç½®å¯è¡Œçš„åŸå› </strong>ï¼š<br>åœ¨ IPv4 ç½‘ç»œä¸­ï¼ŒDHCP æœåŠ¡å™¨ä¸ ARP åè®®ååŒå·¥ä½œï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ„ŸçŸ¥æŸä¸ªåœ°å€çš„å­˜åœ¨ï¼Œç½‘å…³å› æ­¤çŸ¥é“å»å¾€è¯¥åœ°å€çš„è·¯ç”±ã€‚</p></li><li><p><strong>IPv6 ä¸­çš„ä¸åŒç‚¹</strong>ï¼š<br>IPv6 ä¸ä½¿ç”¨ ARPï¼Œè€Œé‡‡ç”¨ <strong>é‚»å±…å‘ç°åè®®ï¼ˆNDPï¼‰</strong> ä¸ <strong>è·¯ç”±é€šå‘Šï¼ˆRAï¼‰æœºåˆ¶</strong>ã€‚<br>å½“è·¯ç”±å™¨ä»¥ <strong>Nativeï¼ˆè‡ªåŠ¨ï¼‰æ¨¡å¼</strong> å·¥ä½œæ—¶ï¼Œå®ƒä¼šä¸»åŠ¨å‘ä¸Šçº§ï¼ˆå…‰çŒ«ï¼‰å‘é€ <strong>è·¯ç”±é€šå‘Šï¼ˆRAdvï¼‰æˆ–å‰ç¼€ä¿¡æ¯ï¼ˆPrefix Delegation, PDï¼‰</strong>ï¼Œå…‰çŒ«å› æ­¤è‡ªåŠ¨ç”Ÿæˆä¸€æ¡æŒ‡å‘è¯¥å‰ç¼€çš„å›ç¨‹è·¯ç”±ã€‚</p><p>ä½†å½“æ‰‹åŠ¨é…ç½®é™æ€ IPv6 åœ°å€æ—¶ï¼Œ<strong>è¿™ç§è‡ªåŠ¨ä¸ŠæŠ¥ä¸é€šå‘Šè¿‡ç¨‹ä¸ä¼šå‘ç”Ÿ</strong>ï¼Œå…‰çŒ«å°±<strong>æ— æ³•å¾—çŸ¥è·¯ç”±å™¨ä¸‹æ–¹çš„å‰ç¼€å­˜åœ¨</strong>ï¼Œå› æ­¤ä¹Ÿä¸ä¼šç”Ÿæˆå›ç¨‹è·¯ç”±ã€‚<br>è¡¨ç°ä¸Šçœ‹ï¼Œè·¯ç”±å™¨çš„ IPv6 ä¸ LAN é…ç½®éƒ½æ­£ç¡®ï¼Œä½†ä¸Šçº§è®¾å¤‡â€œå¹¶ä¸çŸ¥é“â€è¿™äº›å‰ç¼€åœ¨å“ªé‡Œã€‚</p></li></ul><h3 id="2-å›ç¨‹è·¯ç”±çš„é‡è¦æ€§"><a href="#2-å›ç¨‹è·¯ç”±çš„é‡è¦æ€§" class="headerlink" title="2. å›ç¨‹è·¯ç”±çš„é‡è¦æ€§"></a>2. å›ç¨‹è·¯ç”±çš„é‡è¦æ€§</h3><p>IPv6 é€šä¿¡çš„å‰ææ˜¯<strong>åŒå‘å¯è¾¾</strong>ï¼š</p><ul><li>å‡ºç«™è·¯å¾„ï¼šä»å†…ç½‘ â†’ å…‰çŒ« â†’ å…¬ç½‘ï¼›</li><li>å›ç¨‹è·¯å¾„ï¼šä»å…¬ç½‘ â†’ å…‰çŒ« â†’ å†…ç½‘ã€‚</li></ul><p>å¦‚æœå…‰çŒ«ä¸Šæ²¡æœ‰å›ç¨‹è·¯ç”±ï¼Œåˆ™å…¬ç½‘å‘å¾€å†…ç½‘çš„ IPv6 æ•°æ®åŒ…å°†è¢«ä¸¢å¼ƒï¼Œå¯¼è‡´å¤–éƒ¨æ— æ³•è®¿é—®å†…ç½‘è®¾å¤‡ã€‚<br>è¿™æ­£æ˜¯å…¬ç½‘ IPv6 æ— æ³•è®¿é—®çš„æ ¹æœ¬åŸå› ã€‚</p><h3 id="3-ä¸ºä»€ä¹ˆå†…ç½‘ä»èƒ½è®¿é—®å¤–éƒ¨ç½‘ç«™"><a href="#3-ä¸ºä»€ä¹ˆå†…ç½‘ä»èƒ½è®¿é—®å¤–éƒ¨ç½‘ç«™" class="headerlink" title="3. ä¸ºä»€ä¹ˆå†…ç½‘ä»èƒ½è®¿é—®å¤–éƒ¨ç½‘ç«™"></a>3. ä¸ºä»€ä¹ˆå†…ç½‘ä»èƒ½è®¿é—®å¤–éƒ¨ç½‘ç«™</h3><p>å³ä½¿å…‰çŒ«ç¼ºå°‘å›ç¨‹è·¯ç”±ï¼Œå†…ç½‘è®¾å¤‡ä¾ç„¶å¯ä»¥è®¿é—®å¤–éƒ¨ IPv6 ç½‘ç«™ã€‚<br>åŸå› åœ¨äºï¼š</p><ul><li>å‡ºç«™æ–¹å‘çš„è·¯ç”±å§‹ç»ˆå­˜åœ¨ï¼›</li><li>å»ºç«‹è¿æ¥æ—¶ï¼Œå†…ç½‘ä¸»æœºä¸»åŠ¨å‘èµ· TCP æ¡æ‰‹ï¼›</li><li>è¿”å›çš„æ•°æ®åŒ…ä¼šæ²¿ç€<strong>å·²æœ‰çš„è¿æ¥çŠ¶æ€è¡¨</strong>ï¼ˆstateful firewall &#x2F; NAT66ï¼‰æˆ–ä¸´æ—¶ä¼šè¯è¿½è¸ªä¿¡æ¯è¿”å›ï¼Œæ— éœ€å…¨å±€é™æ€å›ç¨‹è·¯ç”±ã€‚</li></ul><p>å› æ­¤ï¼š</p><ul><li><strong>å†…ç½‘è®¿é—®å¤–éƒ¨</strong>æ­£å¸¸ï¼›</li><li><strong>å¤–éƒ¨ä¸»åŠ¨è®¿é—®å†…ç½‘</strong>å¤±è´¥ã€‚</li></ul><p>è¿™ä¸€ç‰¹å¾ä¹Ÿä½¿å¾—é—®é¢˜å®¹æ˜“è¢«å¿½ç•¥ã€‚</p><h2 id="å››ã€é—®é¢˜çš„æœ¬è´¨"><a href="#å››ã€é—®é¢˜çš„æœ¬è´¨" class="headerlink" title="å››ã€é—®é¢˜çš„æœ¬è´¨"></a>å››ã€é—®é¢˜çš„æœ¬è´¨</h2><blockquote><p><strong>IPv6 ç½‘ç»œä¸­ï¼Œè‡ªåŠ¨è·¯ç”±é€šå‘Šï¼ˆRA&#x2F;NDP&#x2F;PDï¼‰ä¸ä¸Šçº§è®¾å¤‡çš„è·¯ç”±å­¦ä¹ æœºåˆ¶æ˜¯ä¿æŒå›ç¨‹å¯è¾¾æ€§çš„å…³é”®ã€‚</strong><br>å½“æ‰‹åŠ¨é…ç½®é™æ€ IPv6 åœ°å€æ—¶ï¼Œé€šå‘Šè¿‡ç¨‹è¢«ä¸­æ–­ï¼Œä¸Šçº§ç½‘å…³æ— æ³•å»ºç«‹å›ç¨‹è·¯ç”±ï¼Œå¯¼è‡´å…¬ç½‘åˆ°å†…ç½‘çš„å•å‘é€šä¿¡ä¸­æ–­ã€‚</p></blockquote><h2 id="äº”ã€è§£å†³æ€è·¯ï¼ˆåŸºäº-ping-æ£€æµ‹-é‡ç½®-Native-çŠ¶æ€ï¼‰"><a href="#äº”ã€è§£å†³æ€è·¯ï¼ˆåŸºäº-ping-æ£€æµ‹-é‡ç½®-Native-çŠ¶æ€ï¼‰" class="headerlink" title="äº”ã€è§£å†³æ€è·¯ï¼ˆåŸºäº ping æ£€æµ‹ + é‡ç½® Native çŠ¶æ€ï¼‰"></a>äº”ã€è§£å†³æ€è·¯ï¼ˆåŸºäº ping æ£€æµ‹ + é‡ç½® Native çŠ¶æ€ï¼‰</h2><p>ä»ç½‘ç»œè‡ªåå•†æœºåˆ¶å‡ºå‘ï¼Œä¿æŒè·¯ç”±å™¨çš„ IPv6 è‡ªåŠ¨é…ç½®æµç¨‹æ˜¯è®©å…‰çŒ«åŠ¨æ€ç”Ÿæˆå›ç¨‹è·¯ç”±çš„æ ¸å¿ƒã€‚ç»“åˆ ping æ£€æµ‹ä¸ Native æ¨¡å¼é‡ç½®çš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ol><li><p><strong>ä»¥å…‰çŒ«å…¬ç½‘ IPv6 å¯è¾¾æ€§ä¸ºå¥åº·æŒ‡æ ‡</strong><br>å®šæœŸï¼ˆå¦‚æ¯ 1 åˆ†é’Ÿï¼‰ping å…‰çŒ«çš„å…¬ç½‘ IPv6 åœ°å€ï¼ˆGUAï¼‰ï¼Œä»¥æ­¤åˆ¤æ–­ IPv6 é€šè·¯æ˜¯å¦æ­£å¸¸ï¼š</p><ul><li>è‹¥å¯è¾¾ï¼šè¯´æ˜å½“å‰ Native æ¨¡å¼ä¸‹çš„è·¯ç”±åå•†æœ‰æ•ˆï¼Œæ— éœ€å¹²é¢„ï¼›</li><li>è‹¥ä¸å¯è¾¾ï¼šåˆ¤å®šä¸ºè·¯ç”±åå•†å¤±æ•ˆï¼ˆå¦‚å…‰çŒ«æœªç”Ÿæˆå›ç¨‹è·¯ç”±ã€å‰ç¼€åˆ†é…å¼‚å¸¸ç­‰ï¼‰ï¼Œè§¦å‘ä¿®å¤æµç¨‹ã€‚</li></ul></li><li><p><strong>è‡ªåŠ¨é‡ç½®è·¯ç”±å™¨ä¸º Native æ¨¡å¼</strong><br>å½“æ£€æµ‹åˆ°å…‰çŒ«å…¬ç½‘ IPv6 ä¸å¯è¾¾æ—¶ï¼Œé€šè¿‡è„šæœ¬è‡ªåŠ¨ç™»å½•è·¯ç”±å™¨ï¼Œå¼ºåˆ¶å°† IPv6 æ¨¡å¼é‡ç½®ä¸º Nativeï¼š</p><ul><li>è§¦å‘è·¯ç”±å™¨é‡æ–°å‘èµ· RAï¼ˆè·¯ç”±é€šå‘Šï¼‰å’Œ PDï¼ˆå‰ç¼€å§”æ‰˜ï¼‰è¯·æ±‚ï¼›</li><li>ä¿ƒä½¿å…‰çŒ«é‡æ–°å­¦ä¹ è·¯ç”±å™¨å†…ç½‘å‰ç¼€ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å›ç¨‹è·¯ç”±ï¼›</li><li>åˆ©ç”¨ç½‘ç»œåè®®çš„è‡ªåå•†èƒ½åŠ›ï¼Œé‡å»ºåŒå‘å¯è¾¾æ€§ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®é™æ€è·¯ç”±ã€‚</li></ul></li><li><p><strong>å†å²åœ°å€ç¼“å­˜ä¸åŒé‡éªŒè¯</strong>  </p><ul><li>ç¼“å­˜ä¸Šæ¬¡æˆåŠŸé€šä¿¡çš„å…‰çŒ«å…¬ç½‘ IPv6 åœ°å€ï¼Œä¼˜å…ˆä½¿ç”¨è¯¥åœ°å€è¿›è¡Œæ£€æµ‹ï¼Œå‡å°‘å¯¹å…‰çŒ«çš„é¢‘ç¹è®¿é—®ï¼›</li><li>è‹¥å†å²åœ°å€ä¸å¯è¾¾ï¼Œå†ç™»å½•å…‰çŒ«è·å–æœ€æ–°åœ°å€å¹¶äºŒæ¬¡æ£€æµ‹ï¼Œé¿å…å› ä¸´æ—¶ç½‘ç»œæ³¢åŠ¨å¯¼è‡´çš„è¯¯åˆ¤ã€‚</li></ul></li></ol><h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><ul><li>æ¨¡æ‹Ÿç™»å½•å…‰çŒ«è·å–ä¿¡æ¯ï¼šä½¿ç”¨playwrightçš„codegenç›´æ¥æ¨¡æ‹Ÿè®¿é—®æµè§ˆå™¨ï¼ŒåŠ ä¸Šbs4è§£æå³å¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install playwright<br>playwright install<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœç¼ºå°‘åŠ¨æ€åº“ï¼Œå¯ä»¥ä½¿ç”¨é™æ€æµè§ˆå™¨å†…æ ¸</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å…ˆæŸ¥çœ‹ç¼“å­˜ä¸­é»˜è®¤çš„ç‰ˆæœ¬</span><br>ls ~/.cache/ms-playwright/ | grep chromium<br>chromium-1187<br>chromium_headless_shell-1187<br><span class="hljs-meta prompt_"># </span><span class="language-bash">åœ¨åä¸ºé•œåƒæºä¸­æ‰¾åˆ°ç›¸è¿‘çš„ç‰ˆæœ¬ä¸‹è½½</span><br>mkdir -p ~/static-chromium &amp;&amp; cd ~/static-chromium<br>wget https://mirrors.huaweicloud.com/chromium-browser-snapshots/Linux_x64/1511877/chrome-linux.zip<br>unzip chrome-linux.zip<br>chmod +x chrome-linux/chrome<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æµ‹è¯•å¯åŠ¨å¹¶è¾“å‡ºç‰ˆæœ¬</span> <br>~/static-chromium/chrome-linux/chrome --headless=new --no-sandbox --version<br>Chromium 142.0.7397.0 <br></code></pre></td></tr></table></figure><ul><li>æ¨¡æ‹Ÿè·¯ç”±å™¨ç™»å½•å¹¶é…ç½®ipv6ï¼šå¼€å‘è€…æ¨¡å¼çœ‹ç½‘ç»œè¯·æ±‚æ¥å£</li></ul><h4 id="pythonä»£ç "><a href="#pythonä»£ç " class="headerlink" title="pythonä»£ç "></a>pythonä»£ç </h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/env python3</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging.handlers <span class="hljs-keyword">import</span> RotatingFileHandler<br><span class="hljs-keyword">import</span> subprocess<br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>, <span class="hljs-type">Tuple</span><br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-keyword">from</span> playwright.sync_api <span class="hljs-keyword">import</span> sync_playwright<br><br><span class="hljs-comment"># --- é…ç½®ä¿¡æ¯ ---</span><br>MODEM_IP = <span class="hljs-string">&quot;192.168.1.1&quot;</span><br>MODEM_USERNAME = <span class="hljs-string">&quot;user&quot;</span><br>MODEM_PASSWORD = <span class="hljs-string">&quot;yYxxxxxx&quot;</span><br>MODEM_BASE_URL = <span class="hljs-string">f&quot;http://<span class="hljs-subst">&#123;MODEM_IP&#125;</span>&quot;</span><br><br>ROUTER_IP = <span class="hljs-string">&quot;192.168.31.1&quot;</span><br>ROUTER_USERNAME = <span class="hljs-string">&quot;admin&quot;</span><br>ROUTER_ENCRYPTED_PASSWORD = <span class="hljs-string">&quot;a93423bed470c10f9799f60xxxxxxxxxxxx006db1942471d43ba83a19&quot;</span><br>ROUTER_MAC = <span class="hljs-string">&quot;d4:35:38:1c:ae:76&quot;</span><br><br><span class="hljs-comment"># è·¯ç”±å™¨ç›¸å…³URL</span><br>ROUTER_BASE_URL = <span class="hljs-string">f&quot;http://<span class="hljs-subst">&#123;ROUTER_IP&#125;</span>&quot;</span><br>ROUTER_LOGIN_URL = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ROUTER_BASE_URL&#125;</span>/cgi-bin/luci/api/xqsystem/login&quot;</span><br>ROUTER_SET_WAN6_URL = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ROUTER_BASE_URL&#125;</span>/cgi-bin/luci/;stok=&#123;&#123;&#125;&#125;/api/xqnetwork/set_wan6&quot;</span><br>ROUTER_LOGOUT_URL = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ROUTER_BASE_URL&#125;</span>/cgi-bin/luci/;stok=&#123;&#123;&#125;&#125;/web/logout&quot;</span><br>ROUTER_LOGIN_PARAMS = <span class="hljs-string">&quot;?username=&#123;&#125;&amp;password=&#123;&#125;&amp;logtype=2&amp;nonce=0_58:11:22:4a:95:91_1759321406_9326&quot;</span><br><br><span class="hljs-comment"># å…¶ä»–é…ç½®</span><br>PING_INTERVAL = <span class="hljs-number">60</span>  <span class="hljs-comment"># 1åˆ†é’Ÿpingä¸€æ¬¡</span><br>LAST_KNOWN_GUA = <span class="hljs-literal">None</span>  <span class="hljs-comment"># å­˜å‚¨ä¸Šæ¬¡æˆåŠŸè·å–çš„å…‰çŒ«å…¬ç½‘IPv6</span><br><br><span class="hljs-comment"># æ—¥å¿—é…ç½®</span><br>LOG_FILE = <span class="hljs-string">&quot;ipv6-sync.log&quot;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IPv6SyncService</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.setup_logging()<br>        <span class="hljs-variable language_">self</span>.current_gua = <span class="hljs-literal">None</span>  <span class="hljs-comment"># å½“å‰æ£€æµ‹åˆ°çš„å…‰çŒ«å…¬ç½‘IPv6</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_logging</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;é…ç½®æ—¥å¿—ç³»ç»Ÿ&quot;&quot;&quot;</span><br>        log_dir = os.path.dirname(LOG_FILE)<br>        <span class="hljs-keyword">if</span> log_dir:<br>            os.makedirs(log_dir, exist_ok=<span class="hljs-literal">True</span>)<br><br>        <span class="hljs-variable language_">self</span>.logger = logging.getLogger(__name__)<br>        <span class="hljs-variable language_">self</span>.logger.setLevel(logging.INFO)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.logger.handlers:<br>            <span class="hljs-variable language_">self</span>.logger.handlers.clear()<br><br>        formatter = logging.Formatter(<span class="hljs-string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span>)<br><br>        <span class="hljs-comment"># æ–‡ä»¶æ—¥å¿—</span><br>        file_handler = RotatingFileHandler(<br>            LOG_FILE,<br>            maxBytes=<span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,<br>            backupCount=<span class="hljs-number">2</span>,<br>            encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span><br>        )<br>        file_handler.setFormatter(formatter)<br><br>        <span class="hljs-comment"># æ§åˆ¶å°æ—¥å¿—</span><br>        console_handler = logging.StreamHandler()<br>        console_handler.setFormatter(formatter)<br><br>        <span class="hljs-variable language_">self</span>.logger.addHandler(file_handler)<br>        <span class="hljs-variable language_">self</span>.logger.addHandler(console_handler)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ping_ipv6</span>(<span class="hljs-params">self, ipv6_addr: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;pingæ£€æµ‹IPv6åœ°å€æ˜¯å¦å¯è¾¾ï¼ˆå…¼å®¹Windowså’ŒLinuxï¼‰&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ipv6_addr:<br>            <span class="hljs-variable language_">self</span>.logger.warning(<span class="hljs-string">&quot;pingç›®æ ‡ä¸ºç©ºï¼Œè·³è¿‡æ£€æµ‹&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©pingå‘½ä»¤å’Œå‚æ•°</span><br>            <span class="hljs-keyword">if</span> os.name == <span class="hljs-string">&quot;nt&quot;</span>:  <span class="hljs-comment"># Windowsç³»ç»Ÿ</span><br>                result = subprocess.run(<br>                    [<span class="hljs-string">&quot;ping&quot;</span>, <span class="hljs-string">&quot;-6&quot;</span>, <span class="hljs-string">&quot;-n&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;-w&quot;</span>, <span class="hljs-string">&quot;3000&quot;</span>, ipv6_addr],<br>                    stdout=subprocess.PIPE,<br>                    stderr=subprocess.PIPE,<br>                    text=<span class="hljs-literal">True</span><br>                )<br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># Linux/Unixç³»ç»Ÿ</span><br>                result = subprocess.run(<br>                    [<span class="hljs-string">&quot;ping6&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;-W&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>, ipv6_addr],<br>                    stdout=subprocess.PIPE,<br>                    stderr=subprocess.PIPE,<br>                    text=<span class="hljs-literal">True</span><br>                )<br><br>            <span class="hljs-comment"># è¿”å›ç 0è¡¨ç¤ºpingæˆåŠŸï¼ˆWindowså’ŒLinuxä¸€è‡´ï¼‰</span><br>            <span class="hljs-keyword">return</span> result.returncode == <span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">except</span> FileNotFoundError:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;æœªæ‰¾åˆ°pingå‘½ä»¤ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒIPv6 ping&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;pingæ£€æµ‹å¤±è´¥: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ipv6_info_from_modem</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Optional</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:<br>        <span class="hljs-string">&quot;&quot;&quot;ä»å…‰çŒ«è·å–IPv6ä¿¡æ¯ï¼ˆä»…æ ¸å¿ƒä½¿ç”¨å…¬ç½‘GUAåœ°å€ï¼Œä¿ç•™å…¶ä»–ä¿¡æ¯ä¾›æ‰©å±•ï¼‰&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;å¯åŠ¨æµè§ˆå™¨ï¼Œå‡†å¤‡è®¿é—®å…‰çŒ«ç®¡ç†é¡µé¢...&quot;</span>)<br>            <span class="hljs-keyword">with</span> sync_playwright() <span class="hljs-keyword">as</span> playwright:<br>                static_chrome_path = <span class="hljs-string">&quot;/home/jinxinhao/static-chromium/chrome-linux/chrome&quot;</span><br>                <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦ä½¿ç”¨é™æ€å†…æ ¸</span><br>                <span class="hljs-keyword">if</span> os.path.exists(static_chrome_path):<br>                    browser = playwright.chromium.launch(<br>                        executable_path=static_chrome_path,<br>                        headless=<span class="hljs-literal">True</span>,<br>                        args=[<span class="hljs-string">&quot;--no-sandbox&quot;</span>, <span class="hljs-string">&quot;--disable-setuid-sandbox&quot;</span>]<br>                    )<br>                <span class="hljs-keyword">else</span>:<br>                    browser = playwright.chromium.launch(<br>                        headless=<span class="hljs-literal">True</span>,<br>                        args=[<span class="hljs-string">&quot;--no-sandbox&quot;</span>, <span class="hljs-string">&quot;--disable-setuid-sandbox&quot;</span>]<br>                    )<br><br>                context = browser.new_context()<br>                page = context.new_page()<br><br>                <span class="hljs-keyword">try</span>:<br>                    <span class="hljs-comment"># è®¿é—®ç™»å½•é¡µ</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;è®¿é—®å…‰çŒ«ç™»å½•é¡µ: <span class="hljs-subst">&#123;MODEM_BASE_URL&#125;</span>&quot;</span>)<br>                    page.goto(MODEM_BASE_URL, timeout=<span class="hljs-number">30000</span>)<br><br>                    <span class="hljs-comment"># ç™»å½•æ“ä½œ</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;è¾“å…¥å…‰çŒ«ç™»å½•ä¿¡æ¯...&quot;</span>)<br>                    page.locator(<span class="hljs-string">&quot;#Frm_Username&quot;</span>).fill(MODEM_USERNAME)<br>                    page.locator(<span class="hljs-string">&quot;#Frm_Password&quot;</span>).fill(MODEM_PASSWORD)<br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;æäº¤ç™»å½•è¯·æ±‚...&quot;</span>)<br>                    page.get_by_role(<span class="hljs-string">&quot;button&quot;</span>, name=<span class="hljs-string">&quot;ç™» å½•&quot;</span>).click()<br>                    page.wait_for_load_state(<span class="hljs-string">&quot;networkidle&quot;</span>, timeout=<span class="hljs-number">30000</span>)<br><br>                    <span class="hljs-comment"># å¯¼èˆªåˆ°IPv6ä¿¡æ¯é¡µé¢</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;å¯¼èˆªåˆ°IPv6è¿æ¥ä¿¡æ¯é¡µé¢...&quot;</span>)<br>                    main_frame = page.frame(name=<span class="hljs-string">&quot;mainFrame&quot;</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> main_frame:<br>                        <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;é”™è¯¯ï¼šæœªæ‰¾åˆ°mainFrame iframe&quot;</span>)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>                    main_frame.get_by_text(<span class="hljs-string">&quot;ç½‘ç»œä¾§ä¿¡æ¯&quot;</span>).click()<br>                    main_frame.get_by_text(<span class="hljs-string">&quot;IPv6è¿æ¥ä¿¡æ¯&quot;</span>).click()<br>                    page.wait_for_load_state(<span class="hljs-string">&quot;networkidle&quot;</span>, timeout=<span class="hljs-number">30000</span>)<br><br>                    <span class="hljs-comment"># æå–è¡¨æ ¼å†…å®¹</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;æå–å…‰çŒ«IPv6ä¿¡æ¯...&quot;</span>)<br>                    table_html = main_frame.locator(<span class="hljs-string">&quot;#Tbl_WANstauts1&quot;</span>).inner_html(timeout=<span class="hljs-number">10000</span>)<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> table_html:<br>                        <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;é”™è¯¯ï¼šæœªèƒ½è·å–IPv6ä¿¡æ¯è¡¨æ ¼&quot;</span>)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>                    soup = BeautifulSoup(table_html, <span class="hljs-string">&#x27;html.parser&#x27;</span>)<br>                    ipv6_info = &#123;&#125;<br><br>                    <span class="hljs-comment"># æ ¸å¿ƒï¼šæå–å…‰çŒ«å…¬ç½‘IPv6ï¼ˆGUAï¼‰- æ–°é€»è¾‘å”¯ä¸€ä¾èµ–çš„ä¿¡æ¯</span><br>                    gua_input = soup.find(<span class="hljs-string">&#x27;input&#x27;</span>, &#123;<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;Sta_PPP_GUA1_1&#x27;</span>&#125;)<br>                    <span class="hljs-keyword">if</span> gua_input <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;value&#x27;</span> <span class="hljs-keyword">in</span> gua_input.attrs:<br>                        ipv6_info[<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>] = gua_input[<span class="hljs-string">&#x27;value&#x27;</span>].strip()<br>                        <span class="hljs-variable language_">self</span>.logger.debug(<span class="hljs-string">f&quot;æå–åˆ°å…‰çŒ«å…¬ç½‘IPv6: <span class="hljs-subst">&#123;ipv6_info[<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>]&#125;</span>&quot;</span>)<br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å…‰çŒ«å…¬ç½‘IPv6åœ°å€ï¼ˆGUAï¼‰&quot;</span>)<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>                    <span class="hljs-comment"># ä¿ç•™å…¶ä»–ä¿¡æ¯ï¼ˆå‰ç¼€ã€DNSï¼‰ï¼Œä¾›åç»­æ‰©å±•é™æ€é…ç½®ä½¿ç”¨</span><br>                    prefix_td = soup.find(<span class="hljs-string">&#x27;td&#x27;</span>, string=<span class="hljs-string">&#x27;å‰ç¼€&#x27;</span>)<br>                    <span class="hljs-keyword">if</span> prefix_td <span class="hljs-keyword">and</span> prefix_td.find_next_sibling(<span class="hljs-string">&#x27;td&#x27;</span>):<br>                        ipv6_info[<span class="hljs-string">&#x27;prefix&#x27;</span>] = prefix_td.find_next_sibling(<span class="hljs-string">&#x27;td&#x27;</span>).text.strip()<br>                    <span class="hljs-keyword">else</span>:<br>                        <span class="hljs-variable language_">self</span>.logger.warning(<span class="hljs-string">&quot;æœªæ‰¾åˆ°IPv6å‰ç¼€ä¿¡æ¯ï¼ˆä¸å½±å“Nativeæ¨¡å¼é…ç½®ï¼‰&quot;</span>)<br><br>                    dns1_input = soup.find(<span class="hljs-string">&#x27;input&#x27;</span>, &#123;<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;Sta_PPP_DNS1_1&#x27;</span>&#125;)<br>                    ipv6_info[<span class="hljs-string">&#x27;dns1&#x27;</span>] = dns1_input[<span class="hljs-string">&#x27;value&#x27;</span>].strip() <span class="hljs-keyword">if</span> (dns1_input <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;value&#x27;</span> <span class="hljs-keyword">in</span> dns1_input.attrs) <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span><br><br>                    dns2_input = soup.find(<span class="hljs-string">&#x27;input&#x27;</span>, &#123;<span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;Sta_PPP_DNS2_1&#x27;</span>&#125;)<br>                    ipv6_info[<span class="hljs-string">&#x27;dns2&#x27;</span>] = dns2_input[<span class="hljs-string">&#x27;value&#x27;</span>].strip() <span class="hljs-keyword">if</span> (dns2_input <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;value&#x27;</span> <span class="hljs-keyword">in</span> dns2_input.attrs) <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span><br><br>                    <span class="hljs-comment"># é€€å‡ºç™»å½•</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;é€€å‡ºå…‰çŒ«ç™»å½•...&quot;</span>)<br>                    main_frame.get_by_role(<span class="hljs-string">&quot;link&quot;</span>, name=<span class="hljs-string">&quot;é€€å‡º&quot;</span>).click()<br>                    page.wait_for_load_state(<span class="hljs-string">&quot;networkidle&quot;</span>, timeout=<span class="hljs-number">10000</span>)<br><br>                    <span class="hljs-comment"># æ‰“å°æ ¸å¿ƒä¿¡æ¯ï¼ˆä»…çªå‡ºå…¬ç½‘IPv6ï¼‰</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;âœ… æˆåŠŸä»å…‰çŒ«è·å–æ ¸å¿ƒIPv6ä¿¡æ¯&quot;</span>)<br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;   å…‰çŒ«å…¬ç½‘IPv6ï¼ˆGUAï¼‰: <span class="hljs-subst">&#123;ipv6_info[<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>]&#125;</span>&quot;</span>)<br>                    <span class="hljs-comment"># éæ ¸å¿ƒä¿¡æ¯ç®€åŒ–æ‰“å°</span><br>                    <span class="hljs-comment"># if &#x27;prefix&#x27; in ipv6_info:</span><br>                    <span class="hljs-comment">#     self.logger.info(f&quot;   å…‰çŒ«å‰ç¼€ï¼ˆå¤‡ç”¨ï¼‰: &#123;ipv6_info[&#x27;prefix&#x27;]&#125;&quot;)</span><br><br>                    <span class="hljs-keyword">return</span> ipv6_info<br><br>                <span class="hljs-keyword">finally</span>:<br>                    context.close()<br>                    browser.close()<br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;å…‰çŒ«æ“ä½œæµè§ˆå™¨ä¼šè¯å·²å…³é—­&quot;</span>)<br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;è·å–å…‰çŒ«IPv6ä¿¡æ¯å¤±è´¥: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>, exc_info=<span class="hljs-literal">True</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">split_prefix_to_64</span>(<span class="hljs-params">self, original_prefix: <span class="hljs-built_in">str</span>, subnet_index: <span class="hljs-built_in">int</span> = <span class="hljs-number">1</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">int</span>]:<br>        <span class="hljs-string">&quot;&quot;&quot;ä¿ç•™å‰ç¼€æ‹†åˆ†å‡½æ•°ï¼Œä¾›é™æ€é…ç½®æ‰©å±•ä½¿ç”¨&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> original_prefix:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;æ— æ•ˆå‰ç¼€æ ¼å¼: <span class="hljs-subst">&#123;original_prefix&#125;</span>&quot;</span>)<br><br>        pure_prefix, prefix_len = original_prefix.split(<span class="hljs-string">&#x27;/&#x27;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(prefix_len) != <span class="hljs-number">60</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;ä»…æ”¯æŒ/60å‰ç¼€ï¼Œå®é™…ä¸º<span class="hljs-subst">&#123;prefix_len&#125;</span>ä½&quot;</span>)<br><br>        parts = pure_prefix.split(<span class="hljs-string">&#x27;:&#x27;</span>)<br>        <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(parts) &lt; <span class="hljs-number">8</span>:<br>            parts.insert(parts.index(<span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">in</span> parts <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;0&#x27;</span>)<br><br>        fourth_part = parts[<span class="hljs-number">3</span>]<br>        subnet_bits = fourth_part[-<span class="hljs-number">1</span>]<br>        new_subnet_bits = <span class="hljs-built_in">hex</span>(<span class="hljs-built_in">int</span>(subnet_bits, <span class="hljs-number">16</span>) + subnet_index)[<span class="hljs-number">2</span>:]<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(new_subnet_bits) &gt; <span class="hljs-number">1</span>:<br>            new_subnet_bits = new_subnet_bits[-<span class="hljs-number">1</span>]<br>            prefix_part = fourth_part[:-<span class="hljs-number">1</span>]<br>            new_prefix_part = <span class="hljs-built_in">hex</span>(<span class="hljs-built_in">int</span>(prefix_part, <span class="hljs-number">16</span>) + <span class="hljs-number">1</span>)[<span class="hljs-number">2</span>:].zfill(<span class="hljs-number">3</span>)<br>            new_fourth_part = new_prefix_part + new_subnet_bits<br>        <span class="hljs-keyword">else</span>:<br>            new_fourth_part = fourth_part[:-<span class="hljs-number">1</span>] + new_subnet_bits<br><br>        parts[<span class="hljs-number">3</span>] = new_fourth_part<br>        simplified_parts = parts[:<span class="hljs-number">4</span>] + [<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>]<br>        lan_prefix = <span class="hljs-string">&#x27;:&#x27;</span>.join(simplified_parts).replace(<span class="hljs-string">&#x27;:::&#x27;</span>, <span class="hljs-string">&#x27;::&#x27;</span>)<br><br>        <span class="hljs-keyword">return</span> lan_prefix, <span class="hljs-number">64</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">login_router</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Optional</span>[<span class="hljs-type">Tuple</span>[requests.Session, <span class="hljs-built_in">str</span>]]:<br>        <span class="hljs-string">&quot;&quot;&quot;ç™»å½•è·¯ç”±å™¨å¹¶è¿”å›ä¼šè¯å’Œstok&quot;&quot;&quot;</span><br>        session = requests.Session()<br>        session.timeout = <span class="hljs-number">30</span><br><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;æ­£åœ¨ç™»å½•è·¯ç”±å™¨...&quot;</span>)<br>            login_url = ROUTER_LOGIN_URL + ROUTER_LOGIN_PARAMS.<span class="hljs-built_in">format</span>(<br>                ROUTER_USERNAME, ROUTER_ENCRYPTED_PASSWORD<br>            )<br>            headers = &#123;<br>                <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (compatible; IPv6-Sync-Service/1.0)&quot;</span>,<br>                <span class="hljs-string">&quot;Accept&quot;</span>: <span class="hljs-string">&quot;*/*&quot;</span><br>            &#125;<br><br>            response = session.get(login_url, headers=headers)<br>            response.raise_for_status()<br>            result = response.json()<br><br>            <span class="hljs-keyword">if</span> result.get(<span class="hljs-string">&quot;code&quot;</span>) == <span class="hljs-number">0</span>:<br>                stok = result.get(<span class="hljs-string">&quot;token&quot;</span>)<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;âœ… è·¯ç”±å™¨ç™»å½•æˆåŠŸï¼Œstok: <span class="hljs-subst">&#123;stok&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> session, stok<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;âŒ è·¯ç”±å™¨ç™»å½•å¤±è´¥: <span class="hljs-subst">&#123;result.get(<span class="hljs-string">&#x27;msg&#x27;</span>)&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;è·¯ç”±å™¨ç™»å½•é”™è¯¯: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">finally</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> session:<br>                session.close()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">logout_router</span>(<span class="hljs-params">self, session: requests.Session, stok: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;æ³¨é”€è·¯ç”±å™¨ä¼šè¯&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;æ³¨é”€è·¯ç”±å™¨ä¼šè¯...&quot;</span>)<br>            response = session.post(<br>                ROUTER_LOGOUT_URL.<span class="hljs-built_in">format</span>(stok),<br>                timeout=<span class="hljs-number">5</span>,<br>                allow_redirects=<span class="hljs-literal">False</span><br>            )<br>            <span class="hljs-keyword">return</span> response.status_code == <span class="hljs-number">302</span><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.warning(<span class="hljs-string">f&quot;è·¯ç”±å™¨æ³¨é”€å¤±è´¥: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_router_static_ipv6</span>(<span class="hljs-params">self, session: requests.Session, stok: <span class="hljs-built_in">str</span>, ipv6_info: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;ä¿ç•™é™æ€é…ç½®å‡½æ•°ï¼Œä¾›åç»­æ‰©å±•ä½¿ç”¨&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">all</span>(key <span class="hljs-keyword">in</span> ipv6_info <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>, <span class="hljs-string">&#x27;prefix&#x27;</span>, <span class="hljs-string">&#x27;dns1&#x27;</span>, <span class="hljs-string">&#x27;dns2&#x27;</span>]):<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;å…‰çŒ«ä¿¡æ¯ä¸å®Œæ•´ï¼Œæ— æ³•é…ç½®é™æ€IPv6&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">try</span>:<br>            original_prefix = ipv6_info[<span class="hljs-string">&#x27;prefix&#x27;</span>]<br>            lan_prefix, lan_prefix_len = <span class="hljs-variable language_">self</span>.split_prefix_to_64(original_prefix)<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;å°†å…‰çŒ«<span class="hljs-subst">&#123;original_prefix&#125;</span>æ‹†åˆ†ä¸ºLANä¾§64ä½å­ç½‘: <span class="hljs-subst">&#123;lan_prefix&#125;</span>/<span class="hljs-subst">&#123;lan_prefix_len&#125;</span>&quot;</span>)<br><br>            pure_prefix, _ = original_prefix.split(<span class="hljs-string">&#x27;/&#x27;</span>)<br>            clean_mac = ROUTER_MAC.replace(<span class="hljs-string">&#x27;:&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>).lower()<br>            wan_ip = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;pure_prefix[:-<span class="hljs-number">1</span>]&#125;</span>ffff:<span class="hljs-subst">&#123;clean_mac[:<span class="hljs-number">4</span>]&#125;</span>:<span class="hljs-subst">&#123;clean_mac[<span class="hljs-number">4</span>:<span class="hljs-number">8</span>]&#125;</span>:<span class="hljs-subst">&#123;clean_mac[<span class="hljs-number">8</span>:]&#125;</span>&quot;</span><br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;ç”Ÿæˆè·¯ç”±å™¨WANå£IPv6: <span class="hljs-subst">&#123;wan_ip&#125;</span>&quot;</span>)<br><br>            params = &#123;<br>                <span class="hljs-string">&quot;wanType&quot;</span>: <span class="hljs-string">&quot;static&quot;</span>,<br>                <span class="hljs-string">&quot;ipaddr&quot;</span>: wan_ip,<br>                <span class="hljs-string">&quot;gw&quot;</span>: ipv6_info[<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>],<br>                <span class="hljs-string">&quot;prefix&quot;</span>: lan_prefix,<br>                <span class="hljs-string">&quot;assign&quot;</span>: lan_prefix_len,<br>                <span class="hljs-string">&quot;dns1&quot;</span>: ipv6_info[<span class="hljs-string">&#x27;dns1&#x27;</span>],<br>                <span class="hljs-string">&quot;dns2&quot;</span>: ipv6_info[<span class="hljs-string">&#x27;dns2&#x27;</span>]<br>            &#125;<br><br>            api_url = ROUTER_SET_WAN6_URL.<span class="hljs-built_in">format</span>(stok)<br>            headers = &#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>&#125;<br>            params_str = <span class="hljs-string">&quot;&amp;&quot;</span>.join([<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;k&#125;</span>=<span class="hljs-subst">&#123;v&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> params.items()])<br><br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;è·¯ç”±å™¨é™æ€IPv6é…ç½®å‚æ•°:&quot;</span>)<br>            <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> params.items():<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;k&#125;</span>: <span class="hljs-subst">&#123;v&#125;</span>&quot;</span>)<br><br>            response = session.post(api_url, data=params_str, headers=headers)<br>            response.raise_for_status()<br>            result = response.json()<br><br>            <span class="hljs-keyword">if</span> result.get(<span class="hljs-string">&quot;code&quot;</span>) == <span class="hljs-number">0</span>:<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;âœ… è·¯ç”±å™¨é™æ€IPv6é…ç½®æˆåŠŸ&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;âŒ è·¯ç”±å™¨é™æ€é…ç½®å¤±è´¥: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;é…ç½®é™æ€IPv6å‡ºé”™: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>, exc_info=<span class="hljs-literal">True</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_router_native_ipv6</span>(<span class="hljs-params">self, session: requests.Session, stok: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;æ ¸å¿ƒå‡½æ•°ï¼šé…ç½®è·¯ç”±å™¨IPv6ä¸ºNativeæ¨¡å¼&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-comment"># Nativeæ¨¡å¼æ ¸å¿ƒå‚æ•°ï¼šä»…æŒ‡å®šæ¨¡å¼å’Œè‡ªåŠ¨é…ç½®å¼€å…³</span><br>            params = &#123;<br>                <span class="hljs-string">&quot;wanType&quot;</span>: <span class="hljs-string">&quot;native&quot;</span>,  <span class="hljs-comment"># æ¨¡å¼åˆ‡æ¢ä¸ºNative</span><br>                <span class="hljs-string">&quot;autosetipv6&quot;</span>: <span class="hljs-number">0</span>       <span class="hljs-comment"># æŒ‰è®¾å¤‡éœ€æ±‚è°ƒæ•´ï¼ˆ0å…³é—­è‡ªåŠ¨é…ç½®ï¼Œ1å¼€å¯ï¼Œå¯æ ¹æ®å®é™…æµ‹è¯•ä¿®æ”¹ï¼‰</span><br>            &#125;<br><br>            api_url = ROUTER_SET_WAN6_URL.<span class="hljs-built_in">format</span>(stok)<br>            headers = &#123;<span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>&#125;<br>            params_str = <span class="hljs-string">&quot;&amp;&quot;</span>.join([<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;k&#125;</span>=<span class="hljs-subst">&#123;v&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> params.items()])<br><br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;è·¯ç”±å™¨Nativeæ¨¡å¼é…ç½®å‚æ•°:&quot;</span>)<br>            <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> params.items():<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;   <span class="hljs-subst">&#123;k&#125;</span>: <span class="hljs-subst">&#123;v&#125;</span>&quot;</span>)<br><br>            response = session.post(api_url, data=params_str, headers=headers)<br>            response.raise_for_status()<br>            result = response.json()<br><br>            <span class="hljs-keyword">if</span> result.get(<span class="hljs-string">&quot;code&quot;</span>) == <span class="hljs-number">0</span>:<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;âœ… è·¯ç”±å™¨IPv6æ¨¡å¼å·²æˆåŠŸè®¾ç½®ä¸ºNative&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;âŒ è·¯ç”±å™¨Nativeæ¨¡å¼é…ç½®å¤±è´¥: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;é…ç½®Nativeæ¨¡å¼å‡ºé”™: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>, exc_info=<span class="hljs-literal">True</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_and_sync</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;ä¼˜åŒ–é€»è¾‘ï¼šç²¾ç®€æ­¥éª¤ç¼–å·ï¼Œæ—¥å¿—æ›´è¿è´¯ï¼Œå‡å°‘å…‰çŒ«ç™»å½•æ¬¡æ•°&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">global</span> LAST_KNOWN_GUA<br><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;=== å¼€å§‹IPv6çŠ¶æ€æ£€æŸ¥ ===&quot;</span>)<br>        current_gua = <span class="hljs-literal">None</span><br>        modem_info = <span class="hljs-literal">None</span><br>        need_config = <span class="hljs-literal">False</span><br><br>        <span class="hljs-comment"># æ­¥éª¤1ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å†å²åœ°å€ï¼Œä¼˜å…ˆæµ‹è¯•å†å²åœ°å€</span><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;ã€æ­¥éª¤1ã€‘æ£€æŸ¥å†å²å…‰çŒ«å…¬ç½‘IPv6åœ°å€...&quot;</span>)<br>        <span class="hljs-keyword">if</span> LAST_KNOWN_GUA:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;ä½¿ç”¨ä¸Šæ¬¡ä¿å­˜çš„åœ°å€: <span class="hljs-subst">&#123;LAST_KNOWN_GUA&#125;</span> è¿›è¡Œpingæµ‹è¯•&quot;</span>)<br>            is_reachable = <span class="hljs-variable language_">self</span>.ping_ipv6(LAST_KNOWN_GUA)<br>            <span class="hljs-keyword">if</span> is_reachable:<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;âœ… å†å²åœ°å€(<span class="hljs-subst">&#123;LAST_KNOWN_GUA&#125;</span>)å¯è¾¾ï¼Œæ— éœ€è¿›ä¸€æ­¥æ“ä½œ&quot;</span>)<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;=== IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===\n&quot;</span>)<br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-variable language_">self</span>.logger.warning(<span class="hljs-string">f&quot;âŒ å†å²åœ°å€(<span class="hljs-subst">&#123;LAST_KNOWN_GUA&#125;</span>)ä¸å¯è¾¾ï¼Œéœ€è·å–æ–°åœ°å€&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;æ— å†å²åœ°å€è®°å½•ï¼Œç›´æ¥è·å–å…‰çŒ«æœ€æ–°ä¿¡æ¯&quot;</span>)<br><br>        <span class="hljs-comment"># æ­¥éª¤2ï¼šç™»å½•å…‰çŒ«è·å–æœ€æ–°å…¬ç½‘IPv6åœ°å€</span><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;ã€æ­¥éª¤2ã€‘ç™»å½•å…‰çŒ«è·å–æœ€æ–°å…¬ç½‘IPv6åœ°å€...&quot;</span>)<br>        modem_info = <span class="hljs-variable language_">self</span>.get_ipv6_info_from_modem()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> modem_info:<br>            <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;âŒ æœªèƒ½è·å–å…‰çŒ«ä¿¡æ¯ï¼Œæœ¬æ¬¡æ£€æŸ¥ç»ˆæ­¢&quot;</span>)<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;=== IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===\n&quot;</span>)<br>            <span class="hljs-keyword">return</span><br><br>        current_gua = modem_info[<span class="hljs-string">&#x27;modem_gua_ipv6&#x27;</span>]<br>        <span class="hljs-variable language_">self</span>.current_gua = current_gua<br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;âœ… è·å–åˆ°æœ€æ–°å…‰çŒ«å…¬ç½‘IPv6: <span class="hljs-subst">&#123;current_gua&#125;</span>&quot;</span>)<br><br>        <span class="hljs-comment"># æ­¥éª¤3ï¼šæµ‹è¯•æ–°è·å–çš„åœ°å€æ˜¯å¦å¯è¾¾</span><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;ã€æ­¥éª¤3ã€‘æµ‹è¯•æ–°è·å–çš„å…‰çŒ«å…¬ç½‘IPv6å¯è¾¾æ€§...&quot;</span>)<br>        is_reachable = <span class="hljs-variable language_">self</span>.ping_ipv6(current_gua)<br>        <span class="hljs-keyword">if</span> is_reachable:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;âœ… æ–°åœ°å€(<span class="hljs-subst">&#123;current_gua&#125;</span>)å¯è¾¾ï¼Œæ›´æ–°å†å²è®°å½•&quot;</span>)<br>            LAST_KNOWN_GUA = current_gua  <span class="hljs-comment"># ä»…æ›´æ–°å†å²ï¼Œä¸é…ç½®</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-variable language_">self</span>.logger.warning(<span class="hljs-string">f&quot;âŒ æ–°åœ°å€(<span class="hljs-subst">&#123;current_gua&#125;</span>)ä»ä¸å¯è¾¾ï¼Œéœ€è¦é…ç½®è·¯ç”±å™¨&quot;</span>)<br>            need_config = <span class="hljs-literal">True</span><br><br>        <span class="hljs-comment"># æ­¥éª¤4ï¼šè‹¥éœ€è¦ï¼Œé…ç½®è·¯ç”±å™¨ä¸ºNativeæ¨¡å¼</span><br>        <span class="hljs-keyword">if</span> need_config:<br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;ã€æ­¥éª¤4ã€‘é…ç½®è·¯ç”±å™¨IPv6ä¸ºNativeæ¨¡å¼...&quot;</span>)<br>            router_login = <span class="hljs-variable language_">self</span>.login_router()<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> router_login:<br>                <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;âŒ è·¯ç”±å™¨ç™»å½•å¤±è´¥ï¼Œé…ç½®ç»ˆæ­¢&quot;</span>)<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;=== IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===\n&quot;</span>)<br>                <span class="hljs-keyword">return</span><br><br>            session, stok = router_login<br>            <span class="hljs-keyword">try</span>:<br>                config_success = <span class="hljs-variable language_">self</span>.set_router_native_ipv6(session, stok)<br>                <span class="hljs-keyword">if</span> config_success:<br>                    LAST_KNOWN_GUA = current_gua  <span class="hljs-comment"># é…ç½®æˆåŠŸåæ›´æ–°å†å²</span><br>                    <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;âœ… è·¯ç”±å™¨Nativeæ¨¡å¼é…ç½®æˆåŠŸ&quot;</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">&quot;âŒ è·¯ç”±å™¨Nativeæ¨¡å¼é…ç½®å¤±è´¥&quot;</span>)<br>            <span class="hljs-keyword">finally</span>:<br>                <span class="hljs-variable language_">self</span>.logout_router(session, stok)<br>                session.close()<br>                <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;è·¯ç”±å™¨ä¼šè¯å·²å…³é—­&quot;</span>)<br><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">&quot;=== IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===\n&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_service</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;æœåŠ¡ä¸»å¾ªç¯ï¼šå®šæ—¶æ‰§è¡Œæ£€æŸ¥é€»è¾‘&quot;&quot;&quot;</span><br>        <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;IPv6åŒæ­¥æœåŠ¡å¯åŠ¨ï¼Œæ¯<span class="hljs-subst">&#123;PING_INTERVAL&#125;</span>ç§’æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥&quot;</span>)<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-variable language_">self</span>.check_and_sync()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                <span class="hljs-variable language_">self</span>.logger.error(<span class="hljs-string">f&quot;æœåŠ¡è¿è¡Œå¼‚å¸¸: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>, exc_info=<span class="hljs-literal">True</span>)<br>            <span class="hljs-comment"># ç­‰å¾…æŒ‡å®šé—´éš”åå†æ¬¡æ‰§è¡Œ</span><br>            <span class="hljs-variable language_">self</span>.logger.info(<span class="hljs-string">f&quot;ç­‰å¾…<span class="hljs-subst">&#123;PING_INTERVAL&#125;</span>ç§’åè¿›è¡Œä¸‹ä¸€æ¬¡æ£€æŸ¥...\n&quot;</span>)<br>            time.sleep(PING_INTERVAL)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    service = IPv6SyncService()<br>    service.run_service()<br></code></pre></td></tr></table></figure><h4 id="systemd-æœåŠ¡æ–‡ä»¶"><a href="#systemd-æœåŠ¡æ–‡ä»¶" class="headerlink" title="systemd æœåŠ¡æ–‡ä»¶"></a>systemd æœåŠ¡æ–‡ä»¶</h4><ul><li>æœåŠ¡æ–‡ä»¶è·¯å¾„ï¼š<code>/etc/systemd/system/ipv6-sync.service</code></li><li>å…³é”®é…ç½®ï¼šä½¿ç”¨ <code>WorkingDirectory</code> æŒ‡å®šå·¥ä½œç›®å½•ï¼Œä½¿è„šæœ¬å†…çš„æ–‡ä»¶è·¯å¾„ï¼ˆçŠ¶æ€æ–‡ä»¶ã€æ—¥å¿—ï¼‰å¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæå‡å¯ç»´æŠ¤æ€§ã€‚</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=IPv6 Sync Service<br><span class="hljs-attr">After</span>=network.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">Type</span>=simple<br><span class="hljs-attr">User</span>=root<br><span class="hljs-attr">WorkingDirectory</span>=/home/username/ipv6-sync<br><span class="hljs-attr">ExecStart</span>=/home/username/miniconda3/bin/python ipv6-sync.py --service<br><span class="hljs-attr">Restart</span>=always<br><span class="hljs-attr">RestartSec</span>=<span class="hljs-number">60</span><br><span class="hljs-attr">StandardOutput</span>=journal<br><span class="hljs-attr">StandardError</span>=journal<br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><h4 id="éƒ¨ç½²ä¸ç®¡ç†å‘½ä»¤"><a href="#éƒ¨ç½²ä¸ç®¡ç†å‘½ä»¤" class="headerlink" title="éƒ¨ç½²ä¸ç®¡ç†å‘½ä»¤"></a>éƒ¨ç½²ä¸ç®¡ç†å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ‹·è´æœåŠ¡æ–‡ä»¶åï¼Œé‡è½½systemdé…ç½®</span><br><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br><span class="hljs-comment"># å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰</span><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> ipv6-sync.service<br><span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span><br><span class="hljs-built_in">sudo</span> systemctl start ipv6-sync.service<br><span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span><br><span class="hljs-built_in">sudo</span> systemctl status ipv6-sync.service<br><span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡æ—¥å¿—</span><br><span class="hljs-built_in">sudo</span> journalctl -u ipv6-sync.service -f<br></code></pre></td></tr></table></figure><h4 id="è¿è¡Œæ—¥å¿—ç¤ºä¾‹"><a href="#è¿è¡Œæ—¥å¿—ç¤ºä¾‹" class="headerlink" title="è¿è¡Œæ—¥å¿—ç¤ºä¾‹"></a>è¿è¡Œæ—¥å¿—ç¤ºä¾‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs log">2025-10-25 00:05:19,885 - INFO - IPv6åŒæ­¥æœåŠ¡å¯åŠ¨ï¼Œæ¯60ç§’æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥<br>2025-10-25 00:05:19,885 - INFO - === å¼€å§‹IPv6çŠ¶æ€æ£€æŸ¥ ===<br>2025-10-25 00:05:19,885 - INFO - ã€æ­¥éª¤1ã€‘æ£€æŸ¥å†å²å…‰çŒ«å…¬ç½‘IPv6åœ°å€...<br>2025-10-25 00:05:19,885 - INFO - æ— å†å²åœ°å€è®°å½•ï¼Œç›´æ¥è·å–å…‰çŒ«æœ€æ–°ä¿¡æ¯<br>2025-10-25 00:05:19,885 - INFO - ã€æ­¥éª¤2ã€‘ç™»å½•å…‰çŒ«è·å–æœ€æ–°å…¬ç½‘IPv6åœ°å€...<br>2025-10-25 00:05:19,885 - INFO - å¯åŠ¨æµè§ˆå™¨ï¼Œå‡†å¤‡è®¿é—®å…‰çŒ«ç®¡ç†é¡µé¢...<br>2025-10-25 00:05:20,484 - INFO - è®¿é—®å…‰çŒ«ç™»å½•é¡µ: http://192.168.1.1<br>2025-10-25 00:05:20,735 - INFO - è¾“å…¥å…‰çŒ«ç™»å½•ä¿¡æ¯...<br>2025-10-25 00:05:20,808 - INFO - æäº¤ç™»å½•è¯·æ±‚...<br>2025-10-25 00:05:21,817 - INFO - å¯¼èˆªåˆ°IPv6è¿æ¥ä¿¡æ¯é¡µé¢...<br>2025-10-25 00:05:23,039 - INFO - æå–å…‰çŒ«IPv6ä¿¡æ¯...<br>2025-10-25 00:05:23,075 - INFO - é€€å‡ºå…‰çŒ«ç™»å½•...<br>2025-10-25 00:05:23,848 - INFO - âœ… æˆåŠŸä»å…‰çŒ«è·å–æ ¸å¿ƒIPv6ä¿¡æ¯<br>2025-10-25 00:05:23,849 - INFO -    å…‰çŒ«å…¬ç½‘IPv6ï¼ˆGUAï¼‰: 2409:8a28:4af1:f69d:ea9:4aff:feef:744f<br>2025-10-25 00:05:23,991 - INFO - å…‰çŒ«æ“ä½œæµè§ˆå™¨ä¼šè¯å·²å…³é—­<br>2025-10-25 00:05:24,001 - INFO - âœ… è·å–åˆ°æœ€æ–°å…‰çŒ«å…¬ç½‘IPv6: 2409:8a28:4af1:f69d:ea9:4aff:feef:744f<br>2025-10-25 00:05:24,001 - INFO - ã€æ­¥éª¤3ã€‘æµ‹è¯•æ–°è·å–çš„å…‰çŒ«å…¬ç½‘IPv6å¯è¾¾æ€§...<br>2025-10-25 00:05:26,009 - INFO - âœ… æ–°åœ°å€(2409:8a28:4af1:f69d:ea9:4aff:feef:744f)å¯è¾¾ï¼Œæ›´æ–°å†å²è®°å½•<br>2025-10-25 00:05:26,010 - INFO - === IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===<br><br>2025-10-25 00:05:26,010 - INFO - ç­‰å¾…60ç§’åè¿›è¡Œä¸‹ä¸€æ¬¡æ£€æŸ¥...<br><br>2025-10-25 00:06:26,010 - INFO - === å¼€å§‹IPv6çŠ¶æ€æ£€æŸ¥ ===<br>2025-10-25 00:06:26,011 - INFO - ã€æ­¥éª¤1ã€‘æ£€æŸ¥å†å²å…‰çŒ«å…¬ç½‘IPv6åœ°å€...<br>2025-10-25 00:06:26,011 - INFO - ä½¿ç”¨ä¸Šæ¬¡ä¿å­˜çš„åœ°å€: 2409:8a28:4af1:f69d:ea9:4aff:feef:744f è¿›è¡Œpingæµ‹è¯•<br>2025-10-25 00:06:28,021 - INFO - âœ… å†å²åœ°å€(2409:8a28:4af1:f69d:ea9:4aff:feef:744f)å¯è¾¾ï¼Œæ— éœ€è¿›ä¸€æ­¥æ“ä½œ<br>2025-10-25 00:06:28,021 - INFO - === IPv6çŠ¶æ€æ£€æŸ¥å®Œæˆ ===<br><br>2025-10-25 00:06:28,021 - INFO - ç­‰å¾…60ç§’åè¿›è¡Œä¸‹ä¸€æ¬¡æ£€æŸ¥...<br></code></pre></td></tr></table></figure><h2 id="å…­ã€ç»“è®º"><a href="#å…­ã€ç»“è®º" class="headerlink" title="å…­ã€ç»“è®º"></a>å…­ã€ç»“è®º</h2><ul><li>IPv6 çš„è‡ªåŠ¨åå•†æœºåˆ¶ï¼ˆRA&#x2F;PD&#x2F;NDPï¼‰æ˜¯ç»´æŒå›ç¨‹è·¯ç”±çš„æ ¸å¿ƒï¼ŒNative æ¨¡å¼æ˜¯è§¦å‘è¯¥æœºåˆ¶çš„æœ€ä½³æ–¹å¼ã€‚</li><li>æ‰‹åŠ¨é…ç½®é™æ€ IPv6 ä¼šä¸­æ–­è‡ªåŠ¨åå•†ï¼Œå¯¼è‡´å…‰çŒ«æ— æ³•åŠ¨æ€å­¦ä¹ å†…ç½‘å‰ç¼€ï¼Œç¼ºå¤±å›ç¨‹è·¯ç”±ã€‚</li><li>å†…ç½‘å¯è®¿é—®å¤–éƒ¨ IPv6 ç½‘ç«™ï¼Œä½†å…¬ç½‘æ— æ³•ä¸»åŠ¨è®¿é—®å†…ç½‘ï¼Œæœ¬è´¨æ˜¯â€œå•å‘è·¯ç”±æœ‰æ•ˆï¼ŒåŒå‘åå•†å¤±æ•ˆâ€ã€‚</li><li>é€šè¿‡ ping æ£€æµ‹å…‰çŒ«å…¬ç½‘ IPv6 å¯è¾¾æ€§ï¼Œå¹¶åœ¨å¼‚å¸¸æ—¶é‡ç½®è·¯ç”±å™¨ä¸º Native æ¨¡å¼ï¼Œå¯åˆ©ç”¨åè®®è‡ªåå•†èƒ½åŠ›è‡ªåŠ¨ä¿®å¤å›ç¨‹è·¯ç”±ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®é™æ€è·¯ç”±ã€‚</li></ul><hr><p><strong>æ€»ç»“</strong>ï¼š<br>IPv6 ç½‘ç»œçš„â€œè‡ªæ„ˆèƒ½åŠ›â€ä¾èµ–äºè‡ªåŠ¨åå•†æœºåˆ¶ã€‚å½“ç½‘ç»œå‡ºç°å•å‘å¯è¾¾é—®é¢˜æ—¶ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„è·¯ç”±è¡¨ï¼Œé€šè¿‡é‡ç½® Native æ¨¡å¼è§¦å‘åè®®é‡åå•†ï¼Œå³å¯è®©å…‰çŒ«é‡æ–°å­¦ä¹ å†…ç½‘æ‹“æ‰‘å¹¶ç”Ÿæˆå›ç¨‹è·¯ç”±ã€‚è¿™ç§â€œæ£€æµ‹ + é‡ç½®â€çš„æ€è·¯ï¼Œæ—¢ç¬¦åˆ IPv6 è®¾è®¡çš„è‡ªåŠ¨åŒ–ç†å¿µï¼Œåˆèƒ½åœ¨å®¶åº­ç½‘ç»œç¯å¢ƒä¸­ç¨³å®šè§£å†³å›ç¨‹å¯è¾¾æ€§é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>linuxä½¿ç”¨rsyncå•å‘åŒæ­¥æ–‡ä»¶å¤¹</title>
    <link href="/2025/10/13/linux%E4%BD%BF%E7%94%A8rsync%E5%8D%95%E5%90%91%E5%90%8C%E6%AD%A5%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
    <url>/2025/10/13/linux%E4%BD%BF%E7%94%A8rsync%E5%8D%95%E5%90%91%E5%90%8C%E6%AD%A5%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="linuxä½¿ç”¨rsyncå•å‘åŒæ­¥æ–‡ä»¶å¤¹"><a href="#linuxä½¿ç”¨rsyncå•å‘åŒæ­¥æ–‡ä»¶å¤¹" class="headerlink" title="linuxä½¿ç”¨rsyncå•å‘åŒæ­¥æ–‡ä»¶å¤¹"></a>linuxä½¿ç”¨rsyncå•å‘åŒæ­¥æ–‡ä»¶å¤¹</h1><h2 id="ä¸€ã€æ ¸å¿ƒç›®æ ‡"><a href="#ä¸€ã€æ ¸å¿ƒç›®æ ‡" class="headerlink" title="ä¸€ã€æ ¸å¿ƒç›®æ ‡"></a>ä¸€ã€æ ¸å¿ƒç›®æ ‡</h2><p>å°† <strong>æºæœåŠ¡å™¨ <code>192.168.1.100</code></strong> ä¸Šçš„æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œå•å‘ã€å¢é‡åœ°åŒæ­¥åˆ° <strong>ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code></strong> çš„ç›®æ ‡æ–‡ä»¶å¤¹ã€‚</p><h2 id="äºŒã€å‰ç½®æ¡ä»¶"><a href="#äºŒã€å‰ç½®æ¡ä»¶" class="headerlink" title="äºŒã€å‰ç½®æ¡ä»¶"></a>äºŒã€å‰ç½®æ¡ä»¶</h2><ol><li><p><strong>ç½‘ç»œè¿é€šæ€§</strong>ï¼šç¡®ä¿æºæœåŠ¡å™¨ <code>192.168.1.100</code> å¯ä»¥é€šè¿‡ SSH è®¿é—®ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code>ã€‚</p></li><li><p><strong>æƒé™</strong>ï¼š</p><ul><li>åœ¨ <code>192.168.1.100</code> ä¸Šï¼Œæ‹¥æœ‰å¯¹æºæ–‡ä»¶å¤¹çš„è¯»å–æƒé™ã€‚</li><li>åœ¨ <code>192.168.1.200</code> ä¸Šï¼Œæ‹¥æœ‰å¯¹ç›®æ ‡æ–‡ä»¶å¤¹çš„å†™å…¥æƒé™ï¼Œä»¥åŠé€šè¿‡ SSH ç™»å½•çš„ç”¨æˆ·ï¼ˆå¦‚ <code>user</code>ï¼‰å’Œå¯†ç ã€‚</li></ul></li><li><p><strong>å·¥å…·å®‰è£…</strong>ï¼š</p><ul><li>æºæœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨ä¸Šéƒ½å¿…é¡»å®‰è£… <code>rsync</code> å·¥å…·ã€‚ï¼ˆå¤§å¤šæ•° Linux å‘è¡Œç‰ˆé»˜è®¤å®‰è£…ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å®‰è£…</span><br>rsync --version<br><br><span class="hljs-comment"># å¦‚æœæœªå®‰è£…ï¼Œåˆ™è¿›è¡Œå®‰è£…</span><br><span class="hljs-comment"># CentOS/RHEL</span><br><span class="hljs-built_in">sudo</span> yum install -y rsync<br><span class="hljs-comment"># Ubuntu/Debian</span><br><span class="hljs-built_in">sudo</span> apt install -y rsync<br></code></pre></td></tr></table></figure></li></ol><h2 id="ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨æºæœåŠ¡å™¨-192-168-1-100-ä¸Šæ‰§è¡Œï¼‰"><a href="#ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨æºæœåŠ¡å™¨-192-168-1-100-ä¸Šæ‰§è¡Œï¼‰" class="headerlink" title="ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨æºæœåŠ¡å™¨ 192.168.1.100 ä¸Šæ‰§è¡Œï¼‰"></a>ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨æºæœåŠ¡å™¨ <code>192.168.1.100</code> ä¸Šæ‰§è¡Œï¼‰</h2><h3 id="1-é…ç½®-SSH-å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰"><a href="#1-é…ç½®-SSH-å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰" class="headerlink" title="1. é…ç½® SSH å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰"></a>1. é…ç½® SSH å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰</h3><p>ä¸ºäº†è®©å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚ <code>cron</code>ï¼‰èƒ½è‡ªåŠ¨æ‰§è¡Œï¼Œéœ€è¦é…ç½®ä»æºæœåŠ¡å™¨åˆ°ç›®æ ‡æœåŠ¡å™¨çš„å…å¯† SSH ç™»å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨æºæœåŠ¡å™¨ 192.168.1.100 ä¸Šæ‰§è¡Œ</span><br><span class="hljs-comment"># 1. ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰</span><br>ssh-keygen -t rsa<br><br><span class="hljs-comment"># 2. å°†å…¬é’¥å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨ 192.168.1.200</span><br><span class="hljs-comment">#    æ‰§è¡Œåä¼šæç¤ºè¾“å…¥ç›®æ ‡æœåŠ¡å™¨ user ç”¨æˆ·çš„å¯†ç </span><br>ssh-copy-id user@192.168.1.200<br><br><span class="hljs-comment"># 3. éªŒè¯å…å¯†ç™»å½•æ˜¯å¦æˆåŠŸ</span><br><span class="hljs-comment">#    å¦‚æœèƒ½ç›´æ¥ç™»å½•ï¼Œæ— éœ€è¾“å…¥å¯†ç ï¼Œåˆ™é…ç½®æˆåŠŸ</span><br>ssh user@192.168.1.200 <span class="hljs-string">&quot;hostname&quot;</span><br></code></pre></td></tr></table></figure><h3 id="2-æ‰§è¡ŒåŒæ­¥å‘½ä»¤"><a href="#2-æ‰§è¡ŒåŒæ­¥å‘½ä»¤" class="headerlink" title="2. æ‰§è¡ŒåŒæ­¥å‘½ä»¤"></a>2. æ‰§è¡ŒåŒæ­¥å‘½ä»¤</h3><p>åœ¨ <strong>æºæœåŠ¡å™¨ <code>192.168.1.100</code></strong> çš„å‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹æ ¸å¿ƒåŒæ­¥å‘½ä»¤ã€‚</p><p><strong>å‡è®¾ï¼š</strong></p><ul><li><strong>æºç›®å½•</strong>ï¼š<code>/path/to/source_folder/</code></li><li><strong>ç›®æ ‡ç›®å½•</strong>ï¼š<code>/path/to/target_folder/</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ³¨æ„ï¼šæ­¤å‘½ä»¤åœ¨æºæœåŠ¡å™¨ 192.168.1.100 ä¸Šæ‰§è¡Œ</span><br>rsync -avz --delete /path/to/source_folder/ user@192.168.1.200:/path/to/target_folder/<br></code></pre></td></tr></table></figure><p><strong>å¼ºçƒˆå»ºè®®åœ¨é¦–æ¬¡æ‰§è¡Œæˆ–ä¿®æ”¹å‚æ•°åï¼Œå…ˆä½¿ç”¨ <code>--dry-run</code> è¿›è¡Œæ¨¡æ‹Ÿè¿è¡Œï¼Œç¡®è®¤æ— è¯¯åå†å»æ‰è¯¥å‚æ•°æ‰§è¡ŒçœŸå®åŒæ­¥ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ¨¡æ‹Ÿè¿è¡Œï¼Œåªæ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¸å®é™…åŒæ­¥</span><br>rsync -avz --delete --dry-run /path/to/source_folder/ user@192.168.1.200:/path/to/target_folder/<br></code></pre></td></tr></table></figure><h2 id="å››ã€å‘½ä»¤å‚æ•°è¯¦è§£"><a href="#å››ã€å‘½ä»¤å‚æ•°è¯¦è§£" class="headerlink" title="å››ã€å‘½ä»¤å‚æ•°è¯¦è§£"></a>å››ã€å‘½ä»¤å‚æ•°è¯¦è§£</h2><table><thead><tr><th align="left">å‚æ•°</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><strong><code>rsync</code></strong></td><td align="left">åŒæ­¥å‘½ä»¤æœ¬èº«ã€‚</td></tr><tr><td align="left"><strong><code>-a</code></strong></td><td align="left"><strong>å½’æ¡£æ¨¡å¼ (Archive)</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªå¤åˆå‚æ•°ï¼Œç­‰åŒäº <code>-rlptgoD</code>ã€‚å®ƒä¼šé€’å½’åŒæ­¥ç›®å½•ï¼Œå¹¶å°½å¯èƒ½ä¿ç•™æ–‡ä»¶çš„æƒé™ã€æ‰€æœ‰è€…ã€æ—¶é—´æˆ³ã€ç¬¦å·é“¾æ¥ç­‰æ‰€æœ‰å±æ€§ã€‚<strong>è¿™æ˜¯æœ€å¸¸ç”¨ã€æœ€é‡è¦çš„å‚æ•°</strong>ã€‚</td></tr><tr><td align="left"><strong><code>-v</code></strong></td><td align="left"><strong>è¯¦ç»†æ¨¡å¼ (Verbose)</strong>ã€‚æ˜¾ç¤ºåŒæ­¥è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æ­£åœ¨åŒæ­¥å“ªäº›æ–‡ä»¶ã€‚ä¾¿äºç›‘æ§å’Œè°ƒè¯•ã€‚</td></tr><tr><td align="left"><strong><code>-z</code></strong></td><td align="left"><strong>å‹ç¼©æ¨¡å¼ (Compress)</strong>ã€‚åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œå¸¦å®½å ç”¨ï¼ŒåŠ å¿«åŒæ­¥é€Ÿåº¦ã€‚<strong>åœ¨å†…ç½‘å¸¦å®½å……è¶³æ—¶ï¼Œå¯çœç•¥æ­¤å‚æ•°ä»¥ç•¥å¾®æå‡ CPU æ•ˆç‡</strong>ã€‚</td></tr><tr><td align="left"><strong><code>--delete</code></strong></td><td align="left"><strong>åˆ é™¤ç›®æ ‡ç«¯å¤šä½™æ–‡ä»¶</strong>ã€‚è¿™æ˜¯å®ç°â€œé•œåƒåŒæ­¥â€çš„å…³é”®ã€‚å®ƒä¼šä½¿ç›®æ ‡ç›®å½•ä¸¥æ ¼ä¸æºç›®å½•ä¿æŒä¸€è‡´ã€‚å¦‚æœæºç›®å½•åˆ é™¤äº†æŸä¸ªæ–‡ä»¶ï¼Œä¸‹æ¬¡åŒæ­¥æ—¶ï¼Œç›®æ ‡ç›®å½•çš„å¯¹åº”æ–‡ä»¶ä¹Ÿä¼šè¢«åˆ é™¤ã€‚<strong>ä½¿ç”¨å‰è¯·åŠ¡å¿…ç¡®è®¤ç›®æ ‡ç›®å½•ä¸­æ²¡æœ‰éœ€è¦ä¿ç•™çš„é¢å¤–æ–‡ä»¶ï¼</strong></td></tr><tr><td align="left"><strong><code>--dry-run</code></strong></td><td align="left"><strong>æ¨¡æ‹Ÿè¿è¡Œ</strong>ã€‚æ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œä½†ä¸ä¼šå®é™…å¤åˆ¶æˆ–åˆ é™¤ä»»ä½•æ–‡ä»¶ã€‚<strong>å¼ºçƒˆå»ºè®®åœ¨æ­£å¼æ‰§è¡Œå‰ä½¿ç”¨æ­¤å‚æ•°è¿›è¡Œæµ‹è¯•</strong>ã€‚</td></tr><tr><td align="left"><strong><code>/path/to/source_folder/</code></strong></td><td align="left"><strong>æºç›®å½•</strong>ã€‚<strong>æ³¨æ„æœ«å°¾çš„æ–œæ  <code>/</code></strong>ï¼šå¦‚æœåŠ ä¸Šæ–œæ ï¼Œä»£è¡¨åŒæ­¥è¯¥ç›®å½•<strong>å†…éƒ¨çš„æ‰€æœ‰å†…å®¹</strong>åˆ°ç›®æ ‡ç›®å½•ï¼›å¦‚æœä¸åŠ æ–œæ ï¼Œä»£è¡¨å°†è¯¥ç›®å½•<strong>æœ¬èº«</strong>åŒæ­¥åˆ°ç›®æ ‡ç›®å½•ä¸‹ã€‚</td></tr><tr><td align="left"><strong><code>user@192.168.1.200:/path/to/target_folder/</code></strong></td><td align="left"><strong>ç›®æ ‡åœ°å€</strong>ã€‚æ ¼å¼ä¸º <code>[ç”¨æˆ·å]@[IPåœ°å€]:[ç›®æ ‡è·¯å¾„]</code>ã€‚</td></tr></tbody></table><h2 id="äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ"><a href="#äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ" class="headerlink" title="äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ"></a>äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ</h2><ol><li><p><strong>è·¯å¾„æœ«å°¾çš„æ–œæ  <code>/</code></strong>ï¼šè¿™æ˜¯ <code>rsync</code> ä¸­ä¸€ä¸ªéå¸¸å…³é”®çš„ç»†èŠ‚ã€‚</p><ul><li><code>rsync ... /source/ /target/</code>ï¼šå°† <code>/source</code> ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•åŒæ­¥åˆ° <code>/target</code> ç›®å½•ä¸­ã€‚</li><li><code>rsync ... /source /target/</code>ï¼šå°† <code>/source</code> ç›®å½•æœ¬èº«åŒæ­¥åˆ° <code>/target</code> ç›®å½•ä¸‹ï¼Œæœ€ç»ˆå½¢æˆ <code>/target/source</code>ã€‚</li></ul></li><li><p><strong><code>--delete</code> å‚æ•°çš„å±é™©æ€§</strong>ï¼š<code>--delete</code> æ˜¯ä¸€ä¸ªå¼ºå¤§ä½†æœ‰æ½œåœ¨é£é™©çš„å‚æ•°ã€‚å¦‚æœç›®æ ‡ç›®å½•ä¸­å­˜åœ¨æºç›®å½•æ²¡æœ‰çš„æ–‡ä»¶ï¼Œå®ƒä»¬ä¼šè¢«æ— æƒ…åˆ é™¤ã€‚åœ¨å¯¹ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œæ­¤æ“ä½œå‰ï¼ŒåŠ¡å¿…é€šè¿‡ <code>--dry-run</code> ç¡®è®¤åˆ é™¤åˆ—è¡¨ã€‚</p></li><li><p><strong>è‡ªåŠ¨åŒ–</strong>ï¼šæ­¤å‘½ä»¤éå¸¸é€‚åˆæ”¾å…¥ <code>crontab</code> ä¸­ï¼Œå®ç°å‘¨æœŸæ€§åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œæ¯å¤©å‡Œæ™¨ 3 ç‚¹åŒæ­¥ä¸€æ¬¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crontab"># åœ¨æºæœåŠ¡å™¨ 192.168.1.100 ä¸Šçš„ crontab<br>0 3 * * * /usr/bin/rsync -az --delete /path/to/source_folder/ user@192.168.1.200:/path/to/target_folder/ &gt;&gt; /var/log/rsync_sync.log 2&gt;&amp;1<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨äº† <code>rsync</code> çš„ç»å¯¹è·¯å¾„ <code>/usr/bin/rsync</code>ï¼Œæ›´ç¨³å®šã€‚</li><li>å»æ‰äº† <code>-v</code> å‚æ•°ï¼Œé¿å…æ—¥å¿—è¿‡äºå†—é•¿ã€‚</li><li>å°†æ‰€æœ‰è¾“å‡ºï¼ˆåŒ…æ‹¬é”™è¯¯ï¼‰é‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œä¾¿äºæ’æŸ¥ã€‚</li></ul></li><li><p><strong>æ—¥å¿—è®°å½•</strong>ï¼šå¦‚ä¸Šé¢çš„ <code>cron</code> ç¤ºä¾‹ï¼Œå»ºè®®å§‹ç»ˆå°†åŒæ­¥æ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿è¿½è¸ªåŒæ­¥å†å²å’Œé—®é¢˜ã€‚</p></li></ol><hr>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>MySQLæ•°æ®åº“å®šæ—¶åŒæ­¥</title>
    <link href="/2025/10/13/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9A%E6%97%B6%E5%90%8C%E6%AD%A5/"/>
    <url>/2025/10/13/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9A%E6%97%B6%E5%90%8C%E6%AD%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="MySQL-æ•°æ®åº“å®šæ—¶åŒæ­¥"><a href="#MySQL-æ•°æ®åº“å®šæ—¶åŒæ­¥" class="headerlink" title="MySQL æ•°æ®åº“å®šæ—¶åŒæ­¥"></a>MySQL æ•°æ®åº“å®šæ—¶åŒæ­¥</h1><h2 id="ä¸€ã€æ ¸å¿ƒç›®æ ‡"><a href="#ä¸€ã€æ ¸å¿ƒç›®æ ‡" class="headerlink" title="ä¸€ã€æ ¸å¿ƒç›®æ ‡"></a>ä¸€ã€æ ¸å¿ƒç›®æ ‡</h2><p>å°† <strong>æºæœåŠ¡å™¨ <code>192.168.1.100</code></strong> ä¸Šçš„æ‰€æœ‰ MySQL æ•°æ®åº“ï¼Œé€šè¿‡ <code>mysqldump</code> å¯¼å‡ºï¼Œå¹¶å®æ—¶å¯¼å…¥åˆ° <strong>ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code></strong> ä¸­ï¼Œå®ç°æ•°æ®åŒæ­¥ã€‚</p><h2 id="äºŒã€å‰ç½®æ¡ä»¶"><a href="#äºŒã€å‰ç½®æ¡ä»¶" class="headerlink" title="äºŒã€å‰ç½®æ¡ä»¶"></a>äºŒã€å‰ç½®æ¡ä»¶</h2><ol><li><strong>ç½‘ç»œè¿é€šæ€§</strong>ï¼šç¡®ä¿ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code> å¯ä»¥é€šè¿‡ SSH è¿æ¥åˆ°æºæœåŠ¡å™¨ <code>192.168.1.100</code>ã€‚</li><li><strong>æƒé™</strong>ï¼š<ul><li>åœ¨ <code>192.168.1.100</code> ä¸Šï¼Œæ‹¥æœ‰å¯ä»¥é€šè¿‡ SSH ç™»å½•çš„ç”¨æˆ·ï¼ˆ<code>user</code>ï¼‰å’Œå¯†ç ã€‚</li><li>åœ¨ <code>192.168.1.100</code> ä¸Šï¼Œæ‹¥æœ‰ MySQL çš„ <code>root</code> æˆ–å…·æœ‰å…¨å±€è¯»å–æƒé™çš„ç”¨æˆ·å¯†ç ï¼ˆ<code>mypassword</code>ï¼‰ã€‚</li><li>åœ¨ <code>192.168.1.200</code> ä¸Šï¼Œæ‹¥æœ‰ MySQL çš„ <code>root</code> æˆ–å…·æœ‰å…¨å±€å†™å…¥æƒé™çš„ç”¨æˆ·å¯†ç ï¼ˆ<code>mypassword</code>ï¼‰ã€‚</li></ul></li><li><strong>å·¥å…·å®‰è£…</strong>ï¼š<ul><li><code>192.168.1.100</code> ä¸Šå¿…é¡»å®‰è£… <code>mysqldump</code> å·¥å…·ï¼ˆé€šå¸¸åœ¨ <code>mysql-client</code> åŒ…ä¸­ï¼‰ã€‚</li><li><code>192.168.1.200</code> ä¸Šå¿…é¡»å®‰è£… <code>mysql</code> å®¢æˆ·ç«¯å·¥å…·ã€‚</li></ul></li></ol><h2 id="ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨ç›®æ ‡æœåŠ¡å™¨-192-168-1-200-ä¸Šæ‰§è¡Œï¼‰"><a href="#ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨ç›®æ ‡æœåŠ¡å™¨-192-168-1-200-ä¸Šæ‰§è¡Œï¼‰" class="headerlink" title="ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨ç›®æ ‡æœåŠ¡å™¨ 192.168.1.200 ä¸Šæ‰§è¡Œï¼‰"></a>ä¸‰ã€æ“ä½œæ­¥éª¤ï¼ˆåœ¨ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code> ä¸Šæ‰§è¡Œï¼‰</h2><h3 id="1-é…ç½®-SSH-å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰"><a href="#1-é…ç½®-SSH-å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰" class="headerlink" title="1. é…ç½® SSH å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰"></a>1. é…ç½® SSH å…å¯†ç™»å½•ï¼ˆå…³é”®ï¼Œç”¨äºè‡ªåŠ¨åŒ–ï¼‰</h3><p>ä¸ºäº†è®©å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚ <code>cron</code>ï¼‰èƒ½è‡ªåŠ¨æ‰§è¡Œï¼Œéœ€è¦é…ç½®ä»ç›®æ ‡æœåŠ¡å™¨åˆ°æºæœåŠ¡å™¨çš„å…å¯† SSH ç™»å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœ¨ç›®æ ‡æœåŠ¡å™¨ 192.168.1.200 ä¸Šæ‰§è¡Œ</span><br><span class="hljs-comment"># 1. ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰</span><br>ssh-keygen -t rsa<br><br><span class="hljs-comment"># 2. å°†å…¬é’¥å¤åˆ¶åˆ°æºæœåŠ¡å™¨ 192.168.1.100</span><br><span class="hljs-comment">#    æ‰§è¡Œåä¼šæç¤ºè¾“å…¥æºæœåŠ¡å™¨ user ç”¨æˆ·çš„å¯†ç </span><br>ssh-copy-id user@192.168.1.100<br><br><span class="hljs-comment"># 3. éªŒè¯å…å¯†ç™»å½•æ˜¯å¦æˆåŠŸ</span><br><span class="hljs-comment">#    å¦‚æœèƒ½ç›´æ¥ç™»å½•ï¼Œæ— éœ€è¾“å…¥å¯†ç ï¼Œåˆ™é…ç½®æˆåŠŸ</span><br>ssh user@192.168.1.100 <span class="hljs-string">&quot;hostname&quot;</span><br></code></pre></td></tr></table></figure><h3 id="2-æ‰§è¡ŒåŒæ­¥å‘½ä»¤"><a href="#2-æ‰§è¡ŒåŒæ­¥å‘½ä»¤" class="headerlink" title="2. æ‰§è¡ŒåŒæ­¥å‘½ä»¤"></a>2. æ‰§è¡ŒåŒæ­¥å‘½ä»¤</h3><p>åœ¨ <strong>ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code></strong> çš„å‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹æ ¸å¿ƒåŒæ­¥å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ³¨æ„ï¼šæ­¤å‘½ä»¤åœ¨ç›®æ ‡æœåŠ¡å™¨ 192.168.1.200 ä¸Šæ‰§è¡Œ</span><br>ssh user@192.168.1.100 <span class="hljs-string">&#x27;/home/db/mysql/product/bin/mysqldump -uroot -pmypassword -P 3306 --single-transaction --set-gtid-purged=OFF --all-databases&#x27;</span> | mysql -uroot -pmypassword -P 3306<br></code></pre></td></tr></table></figure><h2 id="å››ã€å‘½ä»¤å‚æ•°è¯¦è§£"><a href="#å››ã€å‘½ä»¤å‚æ•°è¯¦è§£" class="headerlink" title="å››ã€å‘½ä»¤å‚æ•°è¯¦è§£"></a>å››ã€å‘½ä»¤å‚æ•°è¯¦è§£</h2><table><thead><tr><th align="left">å‚æ•°</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left"><strong><code>ssh user@192.168.1.100 &#39;...&#39;</code></strong></td><td align="left">é€šè¿‡ SSH è¿œç¨‹ç™»å½•åˆ°æºæœåŠ¡å™¨ <code>192.168.1.100</code>ï¼Œå¹¶æ‰§è¡Œå•å¼•å·å†…çš„å‘½ä»¤ã€‚</td></tr><tr><td align="left"><strong><code>/home/db/mysql/product/bin/mysqldump</code></strong></td><td align="left"><code>mysqldump</code> å‘½ä»¤çš„<strong>ç»å¯¹è·¯å¾„</strong>ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½è¢«æ­£ç¡®æ‰¾åˆ°ã€‚</td></tr><tr><td align="left"><strong><code>-uroot</code></strong></td><td align="left">æŒ‡å®š MySQL çš„ç”¨æˆ·åï¼Œè¿™é‡Œæ˜¯ <code>root</code>ã€‚</td></tr><tr><td align="left"><strong><code>-pmypassword</code></strong></td><td align="left">æŒ‡å®š MySQL çš„å¯†ç ã€‚<strong>æ³¨æ„ï¼š<code>-p</code> å’Œå¯†ç ä¹‹é—´æ²¡æœ‰ç©ºæ ¼</strong>ã€‚</td></tr><tr><td align="left"><strong><code>-P 3306</code></strong></td><td align="left">æŒ‡å®š MySQL çš„ç«¯å£å·ï¼Œè¿™é‡Œæ˜¯é»˜è®¤çš„ <code>3306</code>ã€‚</td></tr><tr><td align="left"><strong><code>--single-transaction</code></strong></td><td align="left"><strong>ï¼ˆæ ¸å¿ƒå‚æ•°ï¼‰</strong> å¯¹ InnoDB å­˜å‚¨å¼•æ“ï¼Œæ­¤å‚æ•°ä¼šåˆ›å»ºä¸€ä¸ªäº‹åŠ¡å¿«ç…§ï¼Œå®ç°<strong>çƒ­å¤‡ä»½</strong>ï¼Œ<strong>å¤‡ä»½æœŸé—´ä¸é”è¡¨</strong>ï¼Œå¯¹çº¿ä¸Šä¸šåŠ¡å½±å“æå°ã€‚</td></tr><tr><td align="left"><strong><code>--set-gtid-purged=OFF</code></strong></td><td align="left"><strong>ï¼ˆå…³é”®å‚æ•°ï¼‰</strong> å¦‚æœæºæˆ–ç›®æ ‡æœåŠ¡å™¨å¼€å¯äº† GTIDï¼ˆå…¨å±€äº‹åŠ¡IDï¼‰ï¼Œæ­¤å‚æ•°å¯ä»¥é¿å…å›  GTID é›†åˆå†²çªå¯¼è‡´çš„å¯¼å…¥å¤±è´¥ã€‚å®ƒä¼šé˜»æ­¢ <code>mysqldump</code> åœ¨å¤‡ä»½æ–‡ä»¶ä¸­å†™å…¥ GTID ç›¸å…³å£°æ˜ã€‚</td></tr><tr><td align="left"><strong><code>--all-databases</code></strong></td><td align="left">æŒ‡å®šå¯¼å‡ºæºæœåŠ¡å™¨ä¸Šçš„<strong>æ‰€æœ‰æ•°æ®åº“</strong>ã€‚</td></tr><tr><td align="left"><strong><code>|</code></strong></td><td align="left"><strong>ç®¡é“ç¬¦</strong>ã€‚å®ƒå°†å·¦ä¾§ <code>ssh</code> å‘½ä»¤çš„æ‰€æœ‰è¾“å‡ºï¼ˆå³ <code>.sql</code> å¤‡ä»½æ–‡ä»¶çš„å†…å®¹ï¼‰ï¼Œä½œä¸ºå³ä¾§ <code>mysql</code> å‘½ä»¤çš„è¾“å…¥ã€‚è¿™é¿å…äº†ç”Ÿæˆä¸­é—´æ–‡ä»¶ï¼Œéå¸¸é«˜æ•ˆã€‚</td></tr><tr><td align="left"><strong><code>mysql -uroot -pmypassword -P 3306</code></strong></td><td align="left">åœ¨<strong>æœ¬åœ°æœåŠ¡å™¨</strong>ï¼ˆå³ <code>192.168.1.200</code>ï¼‰ä¸Šæ‰§è¡Œçš„ <code>mysql</code> å‘½ä»¤ï¼Œå®ƒä¼šè¯»å–ä»ç®¡é“ä¼ æ¥çš„ SQL è¯­å¥å¹¶æ‰§è¡Œï¼Œä»è€Œå®Œæˆæ•°æ®å¯¼å…¥ã€‚</td></tr></tbody></table><h2 id="äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ"><a href="#äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ" class="headerlink" title="äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ"></a>äº”ã€é‡è¦æç¤ºä¸æœ€ä½³å®è·µ</h2><ol><li><p><strong>å®‰å…¨è­¦å‘Š</strong>ï¼šåœ¨å‘½ä»¤è¡Œä¸­æ˜æ–‡å†™å¯†ç ï¼ˆ<code>-pmypassword</code>ï¼‰ä¼šè¢«è®°å½•åœ¨å‘½ä»¤å†å²ä¸­ï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚<strong>å¼ºçƒˆå»ºè®®</strong>ä½¿ç”¨ <code>~/.my.cnf</code> é…ç½®æ–‡ä»¶æ¥å­˜å‚¨æ•°æ®åº“å¯†ç ã€‚</p><ul><li><strong>åœ¨æºæœåŠ¡å™¨ <code>192.168.1.100</code></strong> çš„ <code>~/.my.cnf</code> ä¸­æ·»åŠ ï¼š<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysqldump]</span><br><span class="hljs-attr">user</span> = root<br><span class="hljs-attr">password</span> = mypassword<br><span class="hljs-attr">port</span> = <span class="hljs-number">3306</span><br></code></pre></td></tr></table></figure></li><li><strong>åœ¨ç›®æ ‡æœåŠ¡å™¨ <code>192.168.1.200</code></strong> çš„ <code>~/.my.cnf</code> ä¸­æ·»åŠ ï¼š<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysql]</span><br><span class="hljs-attr">user</span> = root<br><span class="hljs-attr">password</span> = mypassword<br><span class="hljs-attr">port</span> = <span class="hljs-number">3306</span><br></code></pre></td></tr></table></figure></li><li>é…ç½®åï¼Œå‘½ä»¤å¯ç®€åŒ–ä¸ºï¼š<code>ssh user@192.168.1.100 &#39;/home/db/mysql/product/bin/mysqldump --single-transaction --set-gtid-purged=OFF --all-databases&#39; | mysql</code></li></ul></li><li><p><strong>è‡ªåŠ¨åŒ–</strong>ï¼šæ­¤å‘½ä»¤éå¸¸é€‚åˆæ”¾å…¥ <code>crontab</code> ä¸­ï¼Œå®ç°æ¯æ—¥å®šæ—¶å¤‡ä»½æˆ–åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crontab">0 2 * * * ssh user@192.168.1.100 &#x27;/home/db/mysql/product/bin/mysqldump --single-transaction --set-gtid-purged=OFF --all-databases&#x27; | mysql &gt;&gt; /var/log/mysql_sync.log 2&gt;&amp;1<br></code></pre></td></tr></table></figure></li><li><p><strong>æ—¥å¿—è®°å½•</strong>ï¼šå»ºè®®å°†å‘½ä»¤çš„è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯é‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚ <code>&gt;&gt; /var/log/mysql_sync.log 2&gt;&amp;1</code>ï¼‰ï¼Œä»¥ä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p></li></ol><hr>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>RIP Metricè°ƒæ•´å®ç°è´Ÿè½½åˆ†æ‹…æœºåˆ¶</title>
    <link href="/2025/10/11/RIP%20Metric%E8%B0%83%E6%95%B4%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%88%86%E6%8B%85%E6%9C%BA%E5%88%B6/"/>
    <url>/2025/10/11/RIP%20Metric%E8%B0%83%E6%95%B4%E5%AE%9E%E7%8E%B0%E8%B4%9F%E8%BD%BD%E5%88%86%E6%8B%85%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ§­-R1-R2é€šè¿‡RIP-Metricè°ƒæ•´å®ç°è´Ÿè½½åˆ†æ‹…æœºåˆ¶è¯¦è§£"><a href="#ğŸ§­-R1-R2é€šè¿‡RIP-Metricè°ƒæ•´å®ç°è´Ÿè½½åˆ†æ‹…æœºåˆ¶è¯¦è§£" class="headerlink" title="ğŸ§­ R1&#x2F;R2é€šè¿‡RIP Metricè°ƒæ•´å®ç°è´Ÿè½½åˆ†æ‹…æœºåˆ¶è¯¦è§£"></a>ğŸ§­ R1&#x2F;R2é€šè¿‡RIP Metricè°ƒæ•´å®ç°è´Ÿè½½åˆ†æ‹…æœºåˆ¶è¯¦è§£</h1><h2 id="ä¸€ã€åœºæ™¯èƒŒæ™¯"><a href="#ä¸€ã€åœºæ™¯èƒŒæ™¯" class="headerlink" title="ä¸€ã€åœºæ™¯èƒŒæ™¯"></a>ä¸€ã€åœºæ™¯èƒŒæ™¯</h2><p>åœ¨å…¸å‹çš„ä¼ä¸šç½‘ç»œä¸­ï¼š</p><ul><li>ä¸¤å°æ ¸å¿ƒè·¯ç”±å™¨ <strong>R1</strong> å’Œ <strong>R2</strong> åŒæ—¶ä¸Šè” Internetã€‚</li><li>ä¸‹æ–¹æœ‰å¤šå°æ¥å…¥å±‚ä¸‰å±‚äº¤æ¢æœº <strong>S1â€“S4</strong>ï¼Œåˆ†åˆ«æ¥å…¥ä¸åŒç»ˆç«¯ã€‚</li><li>ä¸ºå®ç° <strong>å¸¦å®½å‡è¡¡ä¸å†—ä½™å¤‡ä»½</strong>ï¼ŒR1ã€R2 éƒ½ä¸æ¯å°äº¤æ¢æœºå»ºç«‹äº† RIP åŠ¨æ€è·¯ç”±é‚»æ¥å…³ç³»ã€‚</li></ul><p>ç›®æ ‡ï¼š</p><blockquote><p>é€šè¿‡è°ƒæ•´ RIP çš„ <strong>metricï¼ˆåº¦é‡å€¼ï¼‰</strong>ï¼Œäººä¸ºæ§åˆ¶ä¸åŒç½‘æ®µèµ°ä¸åŒçš„ä¸Šè¡Œè·¯å¾„ï¼Œå®ç°æµé‡çš„è´Ÿè½½åˆ†æ‹…ã€‚</p></blockquote><hr><h2 id="äºŒã€RIP-metric-çš„ä½œç”¨åŸç†"><a href="#äºŒã€RIP-metric-çš„ä½œç”¨åŸç†" class="headerlink" title="äºŒã€RIP metric çš„ä½œç”¨åŸç†"></a>äºŒã€RIP metric çš„ä½œç”¨åŸç†</h2><p>åœ¨ RIP ä¸­ï¼š</p><ul><li><strong>metric</strong> è¡¨ç¤ºè·¯å¾„â€œè·³æ•°â€æˆ–â€œè·ç¦»â€ã€‚</li><li><strong>metric å€¼è¶Šå°ï¼Œè·¯å¾„è¶Šä¼˜å…ˆã€‚</strong></li><li>è·¯ç”±é€‰æ‹©æ—¶ï¼ŒRIP æ€»æ˜¯é€‰ <strong>metric æœ€å°</strong> çš„è·¯å¾„ã€‚</li></ul><p>ğŸ‘‰ æ‰€ä»¥ï¼Œåªè¦äººä¸ºåœ°ç»™æŸäº›è·¯ç”± <strong>åŠ å¤§ metric å€¼ï¼ˆå¢åŠ ä»£ä»·ï¼‰</strong>ï¼Œå°±èƒ½è®©è®¾å¤‡æ›´å€¾å‘é€‰æ‹©å¦ä¸€æ¡è·¯å¾„ã€‚</p><hr><h2 id="ä¸‰ã€æ ¸å¿ƒé…ç½®ç»“æ„"><a href="#ä¸‰ã€æ ¸å¿ƒé…ç½®ç»“æ„" class="headerlink" title="ä¸‰ã€æ ¸å¿ƒé…ç½®ç»“æ„"></a>ä¸‰ã€æ ¸å¿ƒé…ç½®ç»“æ„</h2><p>åœ¨ R1 &#x2F; R2 ä¸Šå¸¸è§çš„é…ç½®æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">interface GigabitEthernet3/1/0<br> description To_S1<br> ip address 34.176.31.1 255.255.255.252<br> rip metricin route-policy offset90 1<br> rip metricout route-policy offset90 1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><ul><li><code>metricin</code>ï¼šå¯¹ <strong>æ¥æ”¶åˆ°çš„ RIP è·¯ç”±ï¼ˆå…¥å‘ï¼‰</strong> è°ƒæ•´ä»£ä»·</li><li><code>metricout</code>ï¼šå¯¹ <strong>å‘é€å‡ºå»çš„ RIP è·¯ç”±ï¼ˆå‡ºå‘ï¼‰</strong> è°ƒæ•´ä»£ä»·</li><li>æœ€åçš„ <code>1</code>ï¼šRIP è¿›ç¨‹å·ï¼ˆé€šå¸¸æ˜¯ <code>rip 1</code>ï¼‰</li></ul><hr><h2 id="å››ã€route-policy-ç­–ç•¥å®šä¹‰ç¤ºä¾‹"><a href="#å››ã€route-policy-ç­–ç•¥å®šä¹‰ç¤ºä¾‹" class="headerlink" title="å››ã€route-policy ç­–ç•¥å®šä¹‰ç¤ºä¾‹"></a>å››ã€route-policy ç­–ç•¥å®šä¹‰ç¤ºä¾‹</h2><p>R1ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">route-policy offset89 permit node 10<br> if-match acl 2089<br> apply cost 5<br><br>route-policy offset90 permit node 10<br> if-match acl 2090<br> apply cost 5<br></code></pre></td></tr></table></figure><p>R2ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">route-policy offset89 permit node 10<br> if-match acl 2089<br> apply cost 5<br><br>route-policy offset90 permit node 10<br> if-match acl 2090<br> apply cost 5<br></code></pre></td></tr></table></figure><p>ACL ç”¨æ¥åŒºåˆ†ä¸åŒæ¥æºç½‘æ®µï¼ˆæˆ–ç›®æ ‡ç½‘æ®µï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 2089<br> rule 20 permit <span class="hljs-built_in">source</span> 0.0.141.0 255.255.0.255<br> rule 30 permit <span class="hljs-built_in">source</span> 0.0.142.0 255.255.0.255<br><br>acl number 2090<br> rule 10 permit <span class="hljs-built_in">source</span> 0.0.128.0 255.255.127.255<br></code></pre></td></tr></table></figure><hr><h2 id="äº”ã€R1-R2-è´Ÿè½½åˆ†æ‹…é€»è¾‘"><a href="#äº”ã€R1-R2-è´Ÿè½½åˆ†æ‹…é€»è¾‘" class="headerlink" title="äº”ã€R1&#x2F;R2 è´Ÿè½½åˆ†æ‹…é€»è¾‘"></a>äº”ã€R1&#x2F;R2 è´Ÿè½½åˆ†æ‹…é€»è¾‘</h2><table><thead><tr><th>åŒºåŸŸç½‘æ®µ</th><th>åœ¨ R1 ä¸Šç­–ç•¥</th><th>åœ¨ R2 ä¸Šç­–ç•¥</th><th>ç»“æœï¼ˆä¸Šè¡Œæ–¹å‘ï¼‰</th></tr></thead><tbody><tr><td>141.x.x.x &#x2F; 142.x.x.x</td><td>metric +5ï¼ˆoffset89ï¼‰</td><td>metric ä¸åŠ </td><td>ä¼˜å…ˆèµ° R2</td></tr><tr><td>128.x.x.x â€“ 140.x.x.x</td><td>metric ä¸åŠ </td><td>metric +5ï¼ˆoffset90ï¼‰</td><td>ä¼˜å…ˆèµ° R1</td></tr></tbody></table><p>è¿™æ ·ï¼š</p><ul><li>éƒ¨åˆ†ç½‘æ®µä¸Šè¡Œæµé‡ç» <strong>R1 â†’ Internet</strong>ï¼›</li><li>å¦ä¸€äº›ç½‘æ®µä¸Šè¡Œæµé‡ç» <strong>R2 â†’ Internet</strong>ï¼›</li><li>ä¸¤è€…å½¢æˆäº’è¡¥ï¼Œå®ç°å‡è¡¡ã€‚</li></ul><hr><h2 id="å…­ã€metricin-ä¸-metricout-çš„ç”Ÿæ•ˆæ–¹å‘"><a href="#å…­ã€metricin-ä¸-metricout-çš„ç”Ÿæ•ˆæ–¹å‘" class="headerlink" title="å…­ã€metricin ä¸ metricout çš„ç”Ÿæ•ˆæ–¹å‘"></a>å…­ã€metricin ä¸ metricout çš„ç”Ÿæ•ˆæ–¹å‘</h2><table><thead><tr><th>å‘½ä»¤</th><th>ç”Ÿæ•ˆä½ç½®</th><th>å¯¹è°èµ·ä½œç”¨</th><th>ç¤ºä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td><code>rip metricin</code></td><td><strong>R1 æ¥æ”¶æ¥è‡ª S1 çš„è·¯ç”±æ—¶</strong></td><td>ä¿®æ”¹ R1 æ”¶åˆ°çš„è·¯ç”±åº¦é‡å€¼</td><td>æ§åˆ¶ R1 å¯¹ä¸‹æ¸¸è·¯å¾„çš„åå¥½</td></tr><tr><td><code>rip metricout</code></td><td><strong>R1 å‘ S1 é€šå‘Šè·¯ç”±æ—¶</strong></td><td>ä¿®æ”¹ R1 å‘ç»™ S1 çš„ metric</td><td>æ§åˆ¶ä¸‹æ¸¸ S1 å¯¹ R1 çš„åå¥½</td></tr></tbody></table><blockquote><p>ğŸ“Œ æ¢å¥è¯è¯´ï¼š</p><ul><li><code>metricin</code> å½±å“ <strong>R1 æ€ä¹ˆçœ‹åˆ«äºº</strong>ï¼›</li><li><code>metricout</code> å½±å“ <strong>åˆ«äººæ€ä¹ˆçœ‹ R1</strong>ã€‚</li></ul></blockquote><hr><h2 id="ä¸ƒã€æµé‡åˆ†å¸ƒç¤ºæ„å›¾ï¼ˆMermaidï¼‰"><a href="#ä¸ƒã€æµé‡åˆ†å¸ƒç¤ºæ„å›¾ï¼ˆMermaidï¼‰" class="headerlink" title="ä¸ƒã€æµé‡åˆ†å¸ƒç¤ºæ„å›¾ï¼ˆMermaidï¼‰"></a>ä¸ƒã€æµé‡åˆ†å¸ƒç¤ºæ„å›¾ï¼ˆMermaidï¼‰</h2><h3 id="ğŸ§©-RIP-è·¯ç”±å­¦ä¹ æ–¹å‘ä¸-Metric-è°ƒæ•´"><a href="#ğŸ§©-RIP-è·¯ç”±å­¦ä¹ æ–¹å‘ä¸-Metric-è°ƒæ•´" class="headerlink" title="ğŸ§© RIP è·¯ç”±å­¦ä¹ æ–¹å‘ä¸ Metric è°ƒæ•´"></a>ğŸ§© RIP è·¯ç”±å­¦ä¹ æ–¹å‘ä¸ Metric è°ƒæ•´</h3><pre><code class=" mermaid">flowchart LR  subgraph Access[&quot;æ¥å…¥å±‚äº¤æ¢æœº&quot;]    S1[S1]    S2[S2]    S3[S3]    S4[S4]  end  subgraph Core[&quot;æ ¸å¿ƒå±‚è·¯ç”±å™¨&quot;]    R1[R1]    R2[R2]  end  S1-- RIP metricin/out (offset90, +5) --&gt;R1  S2-- RIP metricin/out (offset89, +5) --&gt;R1  S3-- RIP metricin/out (offset89, +5) --&gt;R2  S4-- RIP metricin/out (offset90, +5) --&gt;R2  R1-- æ›´ä¼˜è·¯ç”±é€šå‘Š (ä½metric) --&gt;S1  R2-- æ›´ä¼˜è·¯ç”±é€šå‘Š (ä½metric) --&gt;S3</code></pre><blockquote><p>ğŸ“Š ç»“æœï¼š</p><ul><li>R1 ä¼˜å…ˆæœåŠ¡éƒ¨åˆ†å­ç½‘ï¼ˆ128â€“140 æ®µï¼‰</li><li>R2 ä¼˜å…ˆæœåŠ¡å¦ä¸€äº›å­ç½‘ï¼ˆ141â€“142 æ®µï¼‰</li><li>RIP æ ¹æ® metric è‡ªåŠ¨å®ç°åŒå‡ºå£è´Ÿè½½åˆ†æ‹…ã€‚</li></ul></blockquote><hr><h2 id="å…«ã€ä¸Šè¡Œä¸ä¸‹è¡Œæµé‡è¯´æ˜"><a href="#å…«ã€ä¸Šè¡Œä¸ä¸‹è¡Œæµé‡è¯´æ˜" class="headerlink" title="å…«ã€ä¸Šè¡Œä¸ä¸‹è¡Œæµé‡è¯´æ˜"></a>å…«ã€ä¸Šè¡Œä¸ä¸‹è¡Œæµé‡è¯´æ˜</h2><h3 id="ğŸ”¼-ä¸Šè¡Œæµé‡ï¼ˆç»ˆç«¯-â†’-Internetï¼‰"><a href="#ğŸ”¼-ä¸Šè¡Œæµé‡ï¼ˆç»ˆç«¯-â†’-Internetï¼‰" class="headerlink" title="ğŸ”¼ ä¸Šè¡Œæµé‡ï¼ˆç»ˆç«¯ â†’ Internetï¼‰"></a>ğŸ”¼ ä¸Šè¡Œæµé‡ï¼ˆç»ˆç«¯ â†’ Internetï¼‰</h3><ol><li>ç»ˆç«¯å‘é€æ•°æ®ç»™é»˜è®¤ç½‘å…³ï¼ˆS1â€“S4ï¼‰ã€‚</li><li>äº¤æ¢æœºæ ¹æ® RIP é€‰æ‹© <strong>metric æ›´ä½çš„ä¸Šè¡Œè·¯ç”±</strong>ã€‚</li><li>æœ‰çš„ç½‘æ®µæµé‡èµ° R1ï¼Œæœ‰çš„èµ° R2ã€‚</li></ol><h3 id="ğŸ”½-ä¸‹è¡Œæµé‡ï¼ˆInternet-â†’-ç»ˆç«¯ï¼‰"><a href="#ğŸ”½-ä¸‹è¡Œæµé‡ï¼ˆInternet-â†’-ç»ˆç«¯ï¼‰" class="headerlink" title="ğŸ”½ ä¸‹è¡Œæµé‡ï¼ˆInternet â†’ ç»ˆç«¯ï¼‰"></a>ğŸ”½ ä¸‹è¡Œæµé‡ï¼ˆInternet â†’ ç»ˆç«¯ï¼‰</h3><ol><li>R1ã€R2 éƒ½å­¦ä¹ åˆ°å†…éƒ¨ç½‘æ®µè·¯ç”±ã€‚</li><li>é€šè¿‡ <code>metricout</code> ç­–ç•¥ï¼Œè®©ä¸‹æ¸¸è®¾å¤‡å¯¹ä¸åŒè·¯ç”±å™¨æœ‰ä¸åŒåå¥½ã€‚</li><li>ä¸‹è¡Œè·¯å¾„è‡ªç„¶ä¹ŸæŒ‰ç›¸åè§„åˆ™åˆ†æ‹…ã€‚</li></ol><hr><h2 id="ä¹ã€æ€»ç»“"><a href="#ä¹ã€æ€»ç»“" class="headerlink" title="ä¹ã€æ€»ç»“"></a>ä¹ã€æ€»ç»“</h2><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒæœºåˆ¶</strong></td><td>åˆ©ç”¨ RIP çš„ metric å¯åŠ æƒç‰¹æ€§ï¼Œé€šè¿‡ route-policy å’Œ ACL ç²¾ç¡®æ§åˆ¶ä¸åŒç½‘æ®µçš„è·¯å¾„ä¼˜å…ˆçº§</td></tr><tr><td><strong>å…³é”®æŒ‡ä»¤</strong></td><td><code>rip metricin route-policy â€¦</code>ã€<code>rip metricout route-policy â€¦</code></td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>ä¸éœ€å¤æ‚åè®®ï¼ˆå¦‚ OSPF&#x2F;ECMPï¼‰ï¼Œå³å¯å®ç°åŸºç¡€çš„åŒå‡ºå£è´Ÿè½½åˆ†æ‹…</td></tr><tr><td><strong>æ³¨æ„äº‹é¡¹</strong></td><td>metric å€¼å˜åŒ–ä¼šå½±å“æ”¶æ•›æ—¶é—´ï¼Œéœ€ä¿æŒç­–ç•¥å¯¹ç§°ï¼›ACL éœ€ç²¾å‡†åŒ¹é…ç½‘æ®µï¼Œé¿å…å…¨å±€è·¯ç”±åæ–œ</td></tr></tbody></table><hr><h2 id="ğŸ§ -ä¸€å¥è¯è®°å¿†"><a href="#ğŸ§ -ä¸€å¥è¯è®°å¿†" class="headerlink" title="ğŸ§  ä¸€å¥è¯è®°å¿†"></a>ğŸ§  ä¸€å¥è¯è®°å¿†</h2><blockquote><p><strong>â€œmetricin æ§åˆ¶æˆ‘æ€ä¹ˆçœ‹åˆ«äººï¼Œmetricout æ§åˆ¶åˆ«äººæ€ä¹ˆçœ‹æˆ‘ã€‚â€</strong></p><p>ä¸¤è€…ç»“åˆï¼Œé€šè¿‡ ACL åˆ†åŒºï¼Œå°±èƒ½è®© RIP å®ç°â€œä½ èµ°ä½ é‚£è¾¹ï¼Œæˆ‘èµ°æˆ‘è¿™è¾¹â€çš„æ™ºèƒ½è´Ÿè½½åˆ†æ‹…ã€‚</p></blockquote><hr>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¥å…¥å±‚äº¤æ¢æœºäº’è”ä¸é“¾è·¯èšåˆ</title>
    <link href="/2025/10/11/%E6%8E%A5%E5%85%A5%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BA%92%E8%81%94%E4%B8%8E%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/"/>
    <url>/2025/10/11/%E6%8E%A5%E5%85%A5%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BA%92%E8%81%94%E4%B8%8E%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h1 id="ğŸ§­-æ¥å…¥å±‚äº¤æ¢æœºäº’è”ä¸é“¾è·¯èšåˆ"><a href="#ğŸ§­-æ¥å…¥å±‚äº¤æ¢æœºäº’è”ä¸é“¾è·¯èšåˆ" class="headerlink" title="ğŸ§­ æ¥å…¥å±‚äº¤æ¢æœºäº’è”ä¸é“¾è·¯èšåˆ"></a>ğŸ§­ æ¥å…¥å±‚äº¤æ¢æœºäº’è”ä¸é“¾è·¯èšåˆ</h1><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦è®©ä¸¤å°æ¥å…¥äº¤æ¢æœºäº’è”ï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦è®©ä¸¤å°æ¥å…¥äº¤æ¢æœºäº’è”ï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦è®©ä¸¤å°æ¥å…¥äº¤æ¢æœºäº’è”ï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦è®©ä¸¤å°æ¥å…¥äº¤æ¢æœºäº’è”ï¼Ÿ</h2><p>å‡è®¾ä½ çš„ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm">ç»ˆç«¯ä»¬ â†’ <span class="hljs-built_in">S1</span> â†’ <span class="hljs-built_in">R1</span> â†’ Internet<br>ç»ˆç«¯ä»¬ â†’ <span class="hljs-built_in">S2</span> â†’ <span class="hljs-built_in">R1</span> â†’ Internet<br></code></pre></td></tr></table></figure><ul><li>S1ã€S2 æ˜¯æ¥å…¥å±‚äº¤æ¢æœºï¼›</li><li>æ¯å°äº¤æ¢æœºå„è‡ªä¸Šè¡Œåˆ°åŒä¸€å°è·¯ç”±å™¨ R1ï¼›</li><li>é»˜è®¤è·¯ç”±éƒ½æŒ‡å‘ R1ï¼›</li><li>S1 å’Œ S2 ä¹‹é—´å¦å¤–ç”¨ä¸¤æ ¹ç½‘çº¿ç›¸è¿ï¼Œå¹¶åšäº†<strong>é“¾è·¯èšåˆï¼ˆLACPï¼‰</strong>ã€‚</li></ul><blockquote><p>ç–‘é—®ï¼š<br>â€œæ—¢ç„¶ç»ˆç«¯éƒ½ç›´æ¥èµ° S1â†’R1 æˆ– S2â†’R1ï¼Œ<br>é‚£ S1â†”S2 çš„é“¾è·¯åˆ°åº•åœ¨ä¼ ä»€ä¹ˆï¼Ÿ<br>åšèšåˆçœŸçš„æœ‰æ„ä¹‰å—ï¼Ÿâ€</p></blockquote><p>è¿™æ˜¯éå¸¸å…¸å‹çš„å…¥é—¨å›°æƒ‘ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†å±‚åˆ†æã€‚</p><hr><h2 id="äºŒã€ç†è§£é“¾è·¯èšåˆçš„åŸºæœ¬åŸç†"><a href="#äºŒã€ç†è§£é“¾è·¯èšåˆçš„åŸºæœ¬åŸç†" class="headerlink" title="äºŒã€ç†è§£é“¾è·¯èšåˆçš„åŸºæœ¬åŸç†"></a>äºŒã€ç†è§£é“¾è·¯èšåˆçš„åŸºæœ¬åŸç†</h2><p><strong>é“¾è·¯èšåˆï¼ˆLink Aggregation &#x2F; EtherChannel &#x2F; LACPï¼‰</strong><br>æ˜¯æŠŠå¤šæ¡ç‰©ç†é“¾è·¯æ†ç»‘æˆä¸€ä¸ª<strong>é€»è¾‘é€šé“</strong>çš„æŠ€æœ¯ã€‚</p><p>å®ƒå¸¦æ¥ä¸‰å¤§å¥½å¤„ï¼š</p><table><thead><tr><th>ä½œç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… <strong>å¸¦å®½å åŠ </strong></td><td>å¤šæ¡çº¿åŒæ—¶è½¬å‘ä¸åŒæµé‡ï¼ˆæ•´ä½“å¸¦å®½ &#x3D; å¤šæ¡çº¿æ€»å’Œï¼‰</td></tr><tr><td>âœ… <strong>é“¾è·¯å†—ä½™</strong></td><td>ä¸€æ¡æ–­äº†ä¸æ‰çº¿ï¼Œæµé‡è‡ªåŠ¨åˆ‡æ¢</td></tr><tr><td>âœ… <strong>STP ä¼˜åŒ–</strong></td><td>è¢«è§†ä¸ºä¸€ä¸ªé€»è¾‘å£ï¼Œé¿å…ç”Ÿæˆæ ‘é˜»å¡å•é“¾è·¯</td></tr></tbody></table><p>ä½†æ˜¯â€”â€”<br>å¸¦å®½å åŠ æ˜¯å¦çœŸæ­£å‘ç”Ÿï¼Œè¦çœ‹è¿™æ¡é€»è¾‘é“¾è·¯<strong>æ‰¿è½½äº†ä»€ä¹ˆæµé‡</strong>ã€‚<br>è¿™å°±è¦çœ‹<strong>S1â†”S2ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆæ•°æ®åœ¨è·‘</strong>ã€‚</p><hr><h2 id="ä¸‰ã€ä½ çš„åœºæ™¯ï¼šS1-ä¸-S2-ä¸å±äºåŒä¸€é€»è¾‘è®¾å¤‡"><a href="#ä¸‰ã€ä½ çš„åœºæ™¯ï¼šS1-ä¸-S2-ä¸å±äºåŒä¸€é€»è¾‘è®¾å¤‡" class="headerlink" title="ä¸‰ã€ä½ çš„åœºæ™¯ï¼šS1 ä¸ S2 ä¸å±äºåŒä¸€é€»è¾‘è®¾å¤‡"></a>ä¸‰ã€ä½ çš„åœºæ™¯ï¼šS1 ä¸ S2 ä¸å±äºåŒä¸€é€»è¾‘è®¾å¤‡</h2><p>ä½ è¿™é‡Œçš„æƒ…å†µæ˜¯ï¼š</p><ul><li>S1 ä¸ S2 åªæ˜¯æ™®é€šçš„ä¸¤å°æ¥å…¥äº¤æ¢æœºï¼›</li><li>å„è‡ªä¸Šè¡Œåˆ° R1ï¼›</li><li>ä¸æ˜¯å †å ï¼ˆIRF &#x2F; VSUï¼‰ï¼›</li><li>ä¹Ÿæ²¡æœ‰è·¨è®¾å¤‡èšåˆï¼ˆMLAG &#x2F; vPCï¼‰ï¼›</li><li>ä»…ä»…æ˜¯ã€ŒS1â†”S2 ä¹‹é—´åšäº†é“¾è·¯èšåˆã€ã€‚</li></ul><p>å› æ­¤ï¼Œè¿™ä¸ªèšåˆé“¾è·¯çš„ä½œç”¨<strong>å¹¶ä¸æ˜¯ä¸Šç½‘æµé‡è´Ÿè½½å‡è¡¡</strong>ã€‚<br>çœŸæ­£çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p><hr><h2 id="å››ã€S1â†”S2-èšåˆé“¾è·¯åœ¨è¿™ç§æ¶æ„ä¸‹çš„å®é™…ä½œç”¨"><a href="#å››ã€S1â†”S2-èšåˆé“¾è·¯åœ¨è¿™ç§æ¶æ„ä¸‹çš„å®é™…ä½œç”¨" class="headerlink" title="å››ã€S1â†”S2 èšåˆé“¾è·¯åœ¨è¿™ç§æ¶æ„ä¸‹çš„å®é™…ä½œç”¨"></a>å››ã€S1â†”S2 èšåˆé“¾è·¯åœ¨è¿™ç§æ¶æ„ä¸‹çš„å®é™…ä½œç”¨</h2><h3 id="1ï¸âƒ£-å†—ä½™è·¯å¾„ï¼ˆå®¹ç¾ï¼‰"><a href="#1ï¸âƒ£-å†—ä½™è·¯å¾„ï¼ˆå®¹ç¾ï¼‰" class="headerlink" title="1ï¸âƒ£ å†—ä½™è·¯å¾„ï¼ˆå®¹ç¾ï¼‰"></a>1ï¸âƒ£ <strong>å†—ä½™è·¯å¾„ï¼ˆå®¹ç¾ï¼‰</strong></h3><p>å¦‚æœ S1 ä¸Šè¡Œåˆ° R1 çš„é“¾è·¯æ–­äº†ï¼š</p><ul><li>S1 å¯ä»¥é€šè¿‡èšåˆé“¾è·¯æŠŠæµé‡è½¬å‘åˆ° S2ï¼›</li><li>å†ç”± S2 ä¸Šè¡Œåˆ° R1ï¼›</li><li>ä¸šåŠ¡ä¸ä¸­æ–­ã€‚</li></ul><p>ğŸ”¹ è¿™å°±æ˜¯â€œç¯ç½‘ä¿æŠ¤â€æˆ–â€œç®€æ˜“å¤‡ä»½è·¯å¾„â€åœºæ™¯ã€‚</p><hr><h3 id="2ï¸âƒ£-åŒ-VLAN-ç»ˆç«¯ä¹‹é—´çš„é€šä¿¡"><a href="#2ï¸âƒ£-åŒ-VLAN-ç»ˆç«¯ä¹‹é—´çš„é€šä¿¡" class="headerlink" title="2ï¸âƒ£ åŒ VLAN ç»ˆç«¯ä¹‹é—´çš„é€šä¿¡"></a>2ï¸âƒ£ <strong>åŒ VLAN ç»ˆç«¯ä¹‹é—´çš„é€šä¿¡</strong></h3><p>å¦‚æœæœ‰äº› VLAN åŒæ—¶å­˜åœ¨äº S1 å’Œ S2 ä¸Šï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">VLAN</span> <span class="hljs-number">10</span>: è´¢åŠ¡ç½‘<br>  A æ¥åœ¨ <span class="hljs-built_in">S1</span><br>  <span class="hljs-keyword">B</span> æ¥åœ¨ <span class="hljs-built_in">S2</span><br></code></pre></td></tr></table></figure><ul><li>A è¦è®¿é—® Bï¼ˆæ‰“å°æœºã€NASã€å…±äº«æ–‡ä»¶ç­‰ï¼‰ï¼Œ<br>æµé‡å°±å¿…é¡»ç»è¿‡ S1â†”S2ï¼›</li><li>å¦‚æœåªæ˜¯å•æ¡çº¿ï¼Œå¾ˆå¯èƒ½æˆä¸ºç“¶é¢ˆï¼›</li><li>ç”¨é“¾è·¯èšåˆåï¼Œèƒ½å®ç°å¸¦å®½å åŠ ä¸æµé‡å‡è¡¡ã€‚</li></ul><p>ğŸ”¹ è¿™æ˜¯æ¥å…¥å±‚äº’è”æœ€å¸¸è§çš„<strong>ä¸œè¥¿å‘ï¼ˆEast-Westï¼‰æµé‡è·¯å¾„</strong>ã€‚</p><hr><h3 id="3ï¸âƒ£-STP-ç¨³å®šä¸é˜²ç¯è·¯ä¼˜åŒ–"><a href="#3ï¸âƒ£-STP-ç¨³å®šä¸é˜²ç¯è·¯ä¼˜åŒ–" class="headerlink" title="3ï¸âƒ£ STP ç¨³å®šä¸é˜²ç¯è·¯ä¼˜åŒ–"></a>3ï¸âƒ£ <strong>STP ç¨³å®šä¸é˜²ç¯è·¯ä¼˜åŒ–</strong></h3><ul><li>å¦‚æœä¸¤å°äº¤æ¢æœºç”¨ä¸¤æ¡çº¿ç›´è¿ä½†ä¸èšåˆï¼ŒSTP ä¼šé˜»å¡ä¸€æ¡ï¼›</li><li>èšåˆåï¼Œè¿™ä¸¤æ¡çº¿è¢«è§†ä¸ºä¸€ä¸ªé€»è¾‘ç«¯å£ï¼›</li><li>STP ä¸å†é˜»å¡ä»»ä½•ä¸€æ¡ï¼›</li><li>ç½‘ç»œç¨³å®šã€å¸¦å®½ä¸æµªè´¹ã€‚</li></ul><p>ğŸ”¹ æ‰€ä»¥å³ä¾¿å¹³æ—¶æ²¡å¤§é‡æ•°æ®æµé‡ï¼Œèšåˆä¹Ÿæ˜¯ä¸€ç§<strong>é˜²ç¯è·¯ã€åŠ ç¨³æ€çš„å¥½ä¹ æƒ¯</strong>ã€‚</p><hr><h3 id="4ï¸âƒ£-æ§åˆ¶-ç®¡ç†æµé‡ã€ARPã€å¹¿æ’­åŒæ­¥"><a href="#4ï¸âƒ£-æ§åˆ¶-ç®¡ç†æµé‡ã€ARPã€å¹¿æ’­åŒæ­¥" class="headerlink" title="4ï¸âƒ£ æ§åˆ¶&#x2F;ç®¡ç†æµé‡ã€ARPã€å¹¿æ’­åŒæ­¥"></a>4ï¸âƒ£ <strong>æ§åˆ¶&#x2F;ç®¡ç†æµé‡ã€ARPã€å¹¿æ’­åŒæ­¥</strong></h3><ul><li>åŒ VLAN çš„å¹¿æ’­ã€ARP è¯·æ±‚ç­‰ä¹Ÿä¼šåœ¨ S1â†”S2 ä¹‹é—´ä¼ æ’­ï¼›</li><li>èšåˆé“¾è·¯å¯ä¿è¯è¿™äº›æ§åˆ¶æµé‡ä¸æ‹¥å¡ã€ä¸ä¸¢åŒ…ï¼›</li><li>ç»´æŒ VLAN è¡¨é¡¹ä¸€è‡´ã€‚</li></ul><hr><h2 id="äº”ã€ä»€ä¹ˆæ—¶å€™èšåˆèƒ½çœŸæ­£â€œå åŠ ä¸Šè¡Œå¸¦å®½â€ï¼Ÿ"><a href="#äº”ã€ä»€ä¹ˆæ—¶å€™èšåˆèƒ½çœŸæ­£â€œå åŠ ä¸Šè¡Œå¸¦å®½â€ï¼Ÿ" class="headerlink" title="äº”ã€ä»€ä¹ˆæ—¶å€™èšåˆèƒ½çœŸæ­£â€œå åŠ ä¸Šè¡Œå¸¦å®½â€ï¼Ÿ"></a>äº”ã€ä»€ä¹ˆæ—¶å€™èšåˆèƒ½çœŸæ­£â€œå åŠ ä¸Šè¡Œå¸¦å®½â€ï¼Ÿ</h2><p>è¦æƒ³è®©å¤šæ¡ä¸Šè¡Œçº¿<strong>åŒæ—¶æ‰¿æ‹…ä¸šåŠ¡æµé‡</strong>ï¼Œ<br>å¿…é¡»è®©ä¸Šå±‚è®¾å¤‡ï¼ˆR1ï¼‰æŠŠä¸¤æ¡çº¿éƒ½å½“ä½œ<strong>åŒä¸€æ¡é€»è¾‘é“¾è·¯</strong>ã€‚<br>è¿™éœ€è¦ï¼š</p><ul><li>S1 å’Œ S2 é€»è¾‘ä¸Šâ€œåˆä½“â€ï¼›</li><li>æˆ–é€šè¿‡è·¨è®¾å¤‡èšåˆæŠ€æœ¯å®ç°ã€‚</li></ul><p>å³ä»¥ä¸‹æ¶æ„ï¼š</p><table><thead><tr><th>æ¶æ„ç±»å‹</th><th>æŠ€æœ¯å®ç°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… å•äº¤æ¢æœºèšåˆ</td><td>LACPï¼ˆå•æœºï¼‰</td><td>ä¸€å°äº¤æ¢æœºå¯¹ R1 èšåˆ</td></tr><tr><td>âœ… è·¨è®¾å¤‡èšåˆ</td><td>MLAG &#x2F; vPC &#x2F; IRF &#x2F; VSU</td><td>ä¸¤å°äº¤æ¢æœºååŒå¯¹ R1 èšåˆ</td></tr><tr><td>âŒ æ™®é€šåŒä¸Šè¡Œ</td><td>æ— </td><td>å„èµ°å„è·¯ï¼Œå¸¦å®½ä¸èƒ½å åŠ ï¼Œåªèƒ½åšè·¯ç”±å†—ä½™</td></tr></tbody></table><hr><h2 id="å…­ã€æ‰€ä»¥ï¼šåœ¨ä½ å½“å‰çš„ç½‘ç»œç»“æ„ä¸­"><a href="#å…­ã€æ‰€ä»¥ï¼šåœ¨ä½ å½“å‰çš„ç½‘ç»œç»“æ„ä¸­" class="headerlink" title="å…­ã€æ‰€ä»¥ï¼šåœ¨ä½ å½“å‰çš„ç½‘ç»œç»“æ„ä¸­"></a>å…­ã€æ‰€ä»¥ï¼šåœ¨ä½ å½“å‰çš„ç½‘ç»œç»“æ„ä¸­</h2><p>ä½ çš„ S1 ä¸ S2 æ˜¯<strong>å®Œå…¨ç‹¬ç«‹çš„æ¥å…¥è®¾å¤‡</strong>ï¼Œ<br>å®ƒä»¬ä¹‹é—´çš„èšåˆé“¾è·¯ä»…ç”¨äºï¼š</p><ol><li><strong>åŒ VLAN çš„ç»ˆç«¯æ¨ªå‘é€šä¿¡ï¼›</strong></li><li><strong>å†—ä½™å¤‡ä»½è·¯å¾„ï¼ˆå•ä¸Šè¡Œæ•…éšœæ—¶å¯ç»•è¡Œï¼‰ï¼›</strong></li><li><strong>STP ä¼˜åŒ–ã€é˜²ç¯è·¯ï¼›</strong></li><li><strong>æ§åˆ¶å¹³é¢å¹¿æ’­åŒæ­¥ã€‚</strong></li></ol><p>å¹³æ—¶ï¼š</p><ul><li>ä¸Šè¡Œæµé‡ä¾ç„¶å„èµ°å„çš„ï¼ˆS1â†’R1ã€S2â†’R1ï¼‰ï¼›</li><li>èšåˆé“¾è·¯åªæ‰¿æ‹…å±€éƒ¨é€šä¿¡ä¸å†—ä½™ä½œç”¨ï¼›</li><li>ä¸ä¼šä¸»åŠ¨åˆ†æ‹…â€œä¸Šç½‘â€å¸¦å®½ã€‚</li></ul><hr><h2 id="ä¸ƒã€å¯¹æ¯”ä¸€ä¸‹å¸¸è§ä¸‰ç§ç»“æ„"><a href="#ä¸ƒã€å¯¹æ¯”ä¸€ä¸‹å¸¸è§ä¸‰ç§ç»“æ„" class="headerlink" title="ä¸ƒã€å¯¹æ¯”ä¸€ä¸‹å¸¸è§ä¸‰ç§ç»“æ„"></a>ä¸ƒã€å¯¹æ¯”ä¸€ä¸‹å¸¸è§ä¸‰ç§ç»“æ„</h2><table><thead><tr><th>åœºæ™¯</th><th>æè¿°</th><th>èšåˆæ„ä¹‰</th></tr></thead><tbody><tr><td><strong>å•ä¸Šè¡Œ + æ™®é€šäº’è”ï¼ˆä½ çš„åœºæ™¯ï¼‰</strong></td><td>S1ã€S2 å„è‡ªä¸Šè¡Œï¼Œä¹‹é—´èšåˆ</td><td>å†—ä½™ + åŒVLANé€šä¿¡</td></tr><tr><td><strong>åŒä¸Šè¡Œ + è·¨è®¾å¤‡èšåˆ (MLAG&#x2F;vPC)</strong></td><td>S1ã€S2ååŒä¸Šè¡Œåˆ°R1</td><td>çœŸæ­£çš„ä¸Šè¡Œå¸¦å®½å åŠ </td></tr><tr><td><strong>å †å  (IRF&#x2F;VSU)</strong></td><td>S1ã€S2é€»è¾‘ä¸Šåˆä¸ºä¸€å°</td><td>å®Œå…¨å…±äº«é…ç½®ã€ä¸Šè¡Œèšåˆå¸¦å®½ç¿»å€</td></tr></tbody></table><hr><h2 id="å…«ã€æ€ç»´æ€»ç»“ï¼šç‰©ç†-vs-é€»è¾‘è§†è§’"><a href="#å…«ã€æ€ç»´æ€»ç»“ï¼šç‰©ç†-vs-é€»è¾‘è§†è§’" class="headerlink" title="å…«ã€æ€ç»´æ€»ç»“ï¼šç‰©ç† vs é€»è¾‘è§†è§’"></a>å…«ã€æ€ç»´æ€»ç»“ï¼šç‰©ç† vs é€»è¾‘è§†è§’</h2><table><thead><tr><th>æ€ç»´å±‚é¢</th><th>ç‰©ç†è¿æ¥è§’åº¦</th><th>é€»è¾‘ç½‘ç»œè§’åº¦</th></tr></thead><tbody><tr><td>çœ‹è§çš„æ˜¯</td><td>â€œä¸¤å°äº¤æ¢æœº + ä¸¤æ ¹çº¿â€</td><td>â€œä¸€ä¸ªå¹¿æ’­åŸŸ + å¤šä¸ªè½¬å‘è·¯å¾„â€</td></tr><tr><td>èšåˆç†è§£</td><td>æŠŠä¸¤æ ¹çº¿æ†æˆä¸€æ ¹</td><td>è®©ç½‘ç»œçœ‹èµ·æ¥æ›´ç®€å•ã€æ›´å¯é </td></tr><tr><td>å…³æ³¨ç‚¹</td><td>çº¿æ˜¯å¦æ’å¯¹</td><td>VLANã€å†—ä½™ã€STPã€è½¬å‘è¡¨ä¸€è‡´æ€§</td></tr><tr><td>ç»“æœ</td><td>çœ‹ä¼¼å¤šä½™ï¼Œå…¶å®å…³é”®</td><td>ç¨³å®šã€é«˜å¯ç”¨ã€æ•…éšœè‡ªæ„ˆ</td></tr></tbody></table><hr><h2 id="ä¹ã€ä¸€å¥è¯ç»“è®º"><a href="#ä¹ã€ä¸€å¥è¯ç»“è®º" class="headerlink" title="ä¹ã€ä¸€å¥è¯ç»“è®º"></a>ä¹ã€ä¸€å¥è¯ç»“è®º</h2><blockquote><p>åœ¨ä½ å½“å‰çš„æ‹“æ‰‘ä¸­ï¼ˆS1ã€S2 ç‹¬ç«‹ï¼Œå„è‡ªä¸Šè¡Œåˆ° R1ï¼‰ï¼š</p><ul><li>S1â†”S2 çš„é“¾è·¯èšåˆ<strong>ä¸ä¼šç›´æ¥æé«˜ä¸Šç½‘å¸¦å®½</strong>ï¼›</li><li>å®ƒçš„æ„ä¹‰åœ¨äº<strong>å†—ä½™ã€ç¨³å®šã€åŒ VLAN é€šä¿¡ä¸é˜²ç¯è·¯</strong>ï¼›</li><li>çœŸæ­£å®ç°â€œå¸¦å®½å åŠ â€çš„å‰ææ˜¯ï¼š<strong>ä¸Šå±‚å’Œä¸‹å±‚éƒ½åœ¨é€»è¾‘ä¸ŠååŒèšåˆ</strong>ã€‚</li></ul></blockquote><hr>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>VPDN+IPsecå®Œæ•´è¿æ¥è¿‡ç¨‹ç¬”è®°</title>
    <link href="/2025/09/22/VPDN+IPsec%E5%AE%8C%E6%95%B4%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B%E7%AC%94%E8%AE%B0/"/>
    <url>/2025/09/22/VPDN+IPsec%E5%AE%8C%E6%95%B4%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="VPDN-IPsecå®Œæ•´è¿æ¥è¿‡ç¨‹ç¬”è®°"><a href="#VPDN-IPsecå®Œæ•´è¿æ¥è¿‡ç¨‹ç¬”è®°" class="headerlink" title="VPDN+IPsecå®Œæ•´è¿æ¥è¿‡ç¨‹ç¬”è®°"></a>VPDN+IPsecå®Œæ•´è¿æ¥è¿‡ç¨‹ç¬”è®°</h1><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸å¯¹è±¡å®šä¹‰ï¼ˆå«è‹±æ–‡ç¼©å†™ï¼‰"><a href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸å¯¹è±¡å®šä¹‰ï¼ˆå«è‹±æ–‡ç¼©å†™ï¼‰" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸å¯¹è±¡å®šä¹‰ï¼ˆå«è‹±æ–‡ç¼©å†™ï¼‰"></a>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸å¯¹è±¡å®šä¹‰ï¼ˆå«è‹±æ–‡ç¼©å†™ï¼‰</h2><p>åœ¨ç†è§£è¿æ¥æµç¨‹å‰ï¼Œéœ€æ˜ç¡®å‚ä¸äº¤äº’çš„æ ¸å¿ƒè®¾å¤‡ã€åè®®åŠç»„ä»¶ï¼Œé¿å…æ··æ·†ï¼š</p><table><thead><tr><th>è‹±æ–‡ç¼©å†™&#x2F;å…¨ç§°</th><th>ä¸­æ–‡åç§°</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td><strong>VPDN</strong> (Virtual Private Dial-up Network)</td><td>è™šæ‹Ÿä¸“ç”¨æ‹¨å·ç½‘ç»œ</td><td>åŸºäºå…¬å…±ç½‘ç»œï¼ˆäº’è”ç½‘&#x2F;è¿è¥å•†ç½‘ç»œï¼‰ï¼Œé€šè¿‡æ‹¨å·å»ºç«‹è¿œç¨‹æ¥å…¥ä¼ä¸šå†…ç½‘çš„é€»è¾‘é€šé“</td></tr><tr><td><strong>IPsec</strong> (Internet Protocol Security)</td><td>äº’è”ç½‘åè®®å®‰å…¨</td><td>ä¸€å¥—åè®®ç»„åˆï¼Œé€šè¿‡åŠ å¯†ã€è®¤è¯ä¿éšœIPå±‚æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ï¼ˆæœºå¯†æ€§ã€å®Œæ•´æ€§ã€æŠ—é‡æ”¾ï¼‰</td></tr><tr><td><strong>Client</strong></td><td>ç”¨æˆ·ç»ˆç«¯</td><td>å‘èµ·è¿æ¥çš„è®¾å¤‡ï¼ˆå¦‚åŠå…¬ç”µè„‘ã€å·¥ä¸šç›‘æ§ç»ˆç«¯ã€ç‰©è”ç½‘è®¾å¤‡ï¼‰</td></tr><tr><td><strong>LAC</strong> (L2TP Access Concentrator)</td><td>L2TPè®¿é—®é›†ä¸­å™¨</td><td>è¿è¥å•†éƒ¨ç½²çš„æ¥å…¥è®¾å¤‡ï¼Œæ¥æ”¶ç”¨æˆ·æ‹¨å·è¯·æ±‚ï¼Œè½¬å‘è‡³ä¼ä¸šä¾§LNS</td></tr><tr><td><strong>LNS</strong> (L2TP Network Server)</td><td>L2TPç½‘ç»œæœåŠ¡å™¨</td><td>ä¼ä¸šä¾§éƒ¨ç½²çš„æœåŠ¡å™¨ï¼Œæ˜¯VPDNéš§é“ç»ˆç‚¹ï¼Œè´Ÿè´£ç»ˆç»“éš§é“ã€å¯¹æ¥ä¼ä¸šå†…ç½‘</td></tr><tr><td><strong>RADIUS</strong> (Remote Authentication Dial-In User Service)</td><td>è¿œç¨‹è®¤è¯æ‹¨å·ç”¨æˆ·æœåŠ¡</td><td>ä¼ä¸š&#x2F;è¿è¥å•†éƒ¨ç½²çš„è®¤è¯æœåŠ¡å™¨ï¼Œæ ¡éªŒç”¨æˆ·èº«ä»½åˆæ³•æ€§åŠæƒé™</td></tr><tr><td><strong>PPP</strong> (Point-to-Point Protocol)</td><td>ç‚¹å¯¹ç‚¹åè®®</td><td>å»ºç«‹ç”¨æˆ·ç»ˆç«¯ä¸LACã€LNSä¹‹é—´çš„åŸºç¡€æ•°æ®é“¾è·¯ï¼Œæ”¯æŒè®¤è¯ã€IPåˆ†é…</td></tr><tr><td><strong>L2TP</strong> (Layer 2 Tunnel Protocol)</td><td>ç¬¬äºŒå±‚éš§é“åè®®</td><td>åœ¨LACä¸LNSä¹‹é—´å»ºç«‹éš§é“ï¼Œå°è£…PPPå¸§ï¼ˆç”¨æˆ·æ•°æ®ï¼‰ï¼Œå®ç°è·¨å…¬ç½‘ä¼ è¾“</td></tr><tr><td><strong>IKE</strong> (Internet Key Exchange)</td><td>äº’è”ç½‘å¯†é’¥äº¤æ¢åè®®</td><td>IPsecçš„â€œå¯†é’¥åå•†å·¥å…·â€ï¼Œè´Ÿè´£ç”ŸæˆåŠ å¯†å¯†é’¥ã€å»ºç«‹å®‰å…¨å…³è”ï¼ˆSAï¼‰ï¼Œä¸ç›´æ¥åŠ å¯†æ•°æ®</td></tr><tr><td><strong>IPsec SA</strong> (Security Association)</td><td>IPsecå®‰å…¨å…³è”</td><td>IPsecçš„â€œé€šä¿¡å¥‘çº¦â€ï¼Œè®°å½•åŒæ–¹åå•†çš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚AESï¼‰ã€è®¤è¯ç®—æ³•ï¼ˆå¦‚SHAï¼‰ã€å¯†é’¥ç­‰ï¼Œå•å‘ç”Ÿæ•ˆï¼ˆéœ€ inbound&#x2F;outbound æˆå¯¹ï¼‰</td></tr><tr><td><strong>ESP</strong> (Encapsulating Security Payload)</td><td>å°è£…å®‰å…¨è½½è·</td><td>IPsecæ ¸å¿ƒåŠ å¯†åè®®ï¼ŒåŒæ—¶å®ç°æ•°æ®åŠ å¯†å’Œå®Œæ•´æ€§è®¤è¯ï¼ˆVPDNåœºæ™¯é¦–é€‰ï¼‰</td></tr><tr><td><strong>AH</strong> (Authentication Header)</td><td>è®¤è¯å¤´</td><td>IPsecåè®®ä¹‹ä¸€ï¼Œä»…åšå®Œæ•´æ€§è®¤è¯å’Œèº«ä»½æ ¡éªŒï¼Œä¸åŠ å¯†æ•°æ®ï¼ˆVPDNåœºæ™¯æå°‘ç”¨ï¼‰</td></tr><tr><td><strong>SPI</strong> (Security Parameter Index)</td><td>å®‰å…¨å‚æ•°ç´¢å¼•</td><td>æ ‡è¯†IPsec SAçš„å”¯ä¸€ç¼–å·ï¼Œç”¨äºæ¥æ”¶æ–¹å¿«é€ŸåŒ¹é…å¯¹åº”çš„åŠ å¯†è§„åˆ™</td></tr><tr><td><strong>ECDH</strong> (Elliptic Curve Diffie-Hellman)</td><td>æ¤­åœ†æ›²çº¿è¿ªè²-èµ«å°”æ›¼</td><td>IKEåå•†ä¸­ç”¨äºç”Ÿæˆå…±äº«å¯†é’¥çš„ç®—æ³•ï¼Œæ— éœ€ä¼ è¾“å¯†é’¥æœ¬èº«ï¼Œä»…äº¤æ¢å…¬é’¥å³å¯è®¡ç®—ä¸€è‡´å¯†é’¥</td></tr></tbody></table><h2 id="äºŒã€VPDN-IPsec-å®Œæ•´è¿æ¥æµç¨‹ï¼ˆ5å¤§é˜¶æ®µï¼‰"><a href="#äºŒã€VPDN-IPsec-å®Œæ•´è¿æ¥æµç¨‹ï¼ˆ5å¤§é˜¶æ®µï¼‰" class="headerlink" title="äºŒã€VPDN+IPsec å®Œæ•´è¿æ¥æµç¨‹ï¼ˆ5å¤§é˜¶æ®µï¼‰"></a>äºŒã€VPDN+IPsec å®Œæ•´è¿æ¥æµç¨‹ï¼ˆ5å¤§é˜¶æ®µï¼‰</h2><p>VPDN+IPsecçš„è¿æ¥æ˜¯â€œæ‹¨å·å»ºé“¾è·¯â†’éš§é“ä¼ æ•°æ®â†’åŠ å¯†ä¿å®‰å…¨â€çš„å¤åˆè¿‡ç¨‹ï¼Œéœ€ç»å†5ä¸ªé˜¶æ®µï¼Œå„é˜¶æ®µç¯ç¯ç›¸æ‰£ï¼š</p><h3 id="é˜¶æ®µ1ï¼šç”¨æˆ·ç»ˆç«¯ä¸LACå»ºç«‹PPPåŸºç¡€é“¾è·¯"><a href="#é˜¶æ®µ1ï¼šç”¨æˆ·ç»ˆç«¯ä¸LACå»ºç«‹PPPåŸºç¡€é“¾è·¯" class="headerlink" title="é˜¶æ®µ1ï¼šç”¨æˆ·ç»ˆç«¯ä¸LACå»ºç«‹PPPåŸºç¡€é“¾è·¯"></a>é˜¶æ®µ1ï¼šç”¨æˆ·ç»ˆç«¯ä¸LACå»ºç«‹PPPåŸºç¡€é“¾è·¯</h3><p>æ ¸å¿ƒç›®æ ‡ï¼šé€šè¿‡æ‹¨å·å»ºç«‹ç”¨æˆ·ç»ˆç«¯ä¸è¿è¥å•†LACä¹‹é—´çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯ï¼Œä¸ºåç»­éš§é“ä¼ è¾“æ‰“åŸºç¡€ã€‚</p><pre><code class=" mermaid">sequenceDiagram    participant C as ç”¨æˆ·ç»ˆç«¯(Client)    participant L as LAC(è¿è¥å•†)    C-&gt;&gt;L: æ‹¨å·è¯·æ±‚(è´¦å·/å¯†ç )    L-&gt;&gt;C: LCP å‚æ•°åå•† (MTU/å‹ç¼©ç­‰)    C-&gt;&gt;L: å›åº”ç¡®è®¤    L-&gt;&gt;C: CHAP æŒ‘æˆ˜(éšæœºæ•°)    C-&gt;&gt;L: CHAP å“åº”(åŠ å¯†åçš„éšæœºæ•°)    L-&gt;&gt;C: è®¤è¯ç»“æœ(æˆåŠŸ)    Note over C,L: PPP é“¾è·¯å»ºç«‹æˆåŠŸ</code></pre><ol><li><p><strong>å‚æ•°é…ç½®ä¸æ‹¨å·å‘èµ·</strong><br>ç”¨æˆ·åœ¨ç»ˆç«¯ï¼ˆå¦‚ç”µè„‘ï¼‰é…ç½®VPDNæ‹¨å·å‚æ•°ï¼šè¿è¥å•†æä¾›çš„VPDNè´¦å·&#x2F;å¯†ç ã€LACå…¬ç½‘åœ°å€ï¼Œé€šè¿‡æœ¬åœ°ç½‘ç»œï¼ˆå®½å¸¦ã€4G&#x2F;5Gï¼‰å‘LACå‘èµ·æ‹¨å·è¯·æ±‚ã€‚</p></li><li><p><strong>PPPé“¾è·¯åå•†ï¼ˆLCPé˜¶æ®µï¼‰</strong>  </p><ul><li>ç»ˆç«¯ä¸LACé€šè¿‡ <strong>LCPï¼ˆé“¾è·¯æ§åˆ¶åè®®ï¼‰</strong> åå•†é“¾è·¯å‚æ•°ï¼šæœ€å¤§ä¼ è¾“å•å…ƒï¼ˆMTUï¼‰ã€æ•°æ®å‹ç¼©æ–¹å¼ã€é“¾è·¯è¶…æ—¶æ—¶é—´ç­‰ã€‚  </li><li>åå•†é€šè¿‡åï¼Œå»ºç«‹åŸºç¡€æ•°æ®é“¾è·¯ï¼ˆç‰©ç†å±‚&#x2F;æ•°æ®é“¾è·¯å±‚è¿é€šï¼‰ã€‚</li></ul></li><li><p><strong>PPPä¸´æ—¶è®¤è¯ï¼ˆCHAP&#x2F;PAPé˜¶æ®µï¼‰</strong>  </p><ul><li>LACé€šè¿‡ <strong>CHAPï¼ˆæŒ‘æˆ˜-å“åº”è®¤è¯åè®®ï¼Œä¼˜å…ˆï¼‰</strong> æˆ– <strong>PAPï¼ˆå¯†ç è®¤è¯åè®®ï¼Œæ˜æ–‡ä¼ è¾“ï¼Œå®‰å…¨æ€§ä½ï¼‰</strong> æ ¡éªŒç”¨æˆ·èº«ä»½ï¼š  <ul><li>CHAPæµç¨‹ï¼šLACå‘é€éšæœºâ€œæŒ‘æˆ˜ç â€â†’ç»ˆç«¯ç”¨è´¦å·å¯†ç åŠ å¯†æŒ‘æˆ˜ç â†’LACè§£å¯†åæ¯”å¯¹ï¼Œç¡®è®¤èº«ä»½åˆæ³•ã€‚</li></ul></li><li>è®¤è¯é€šè¿‡åï¼Œç»ˆç«¯ä¸LACçš„PPPé“¾è·¯æ­£å¼æ¿€æ´»ã€‚</li></ul></li></ol><h3 id="é˜¶æ®µ2ï¼šLACä¸LNSå»ºç«‹L2TPéš§é“"><a href="#é˜¶æ®µ2ï¼šLACä¸LNSå»ºç«‹L2TPéš§é“" class="headerlink" title="é˜¶æ®µ2ï¼šLACä¸LNSå»ºç«‹L2TPéš§é“"></a>é˜¶æ®µ2ï¼šLACä¸LNSå»ºç«‹L2TPéš§é“</h3><p>æ ¸å¿ƒç›®æ ‡ï¼šåœ¨LACä¸ä¼ä¸šä¾§LNSä¹‹é—´å»ºç«‹L2TPéš§é“ï¼Œå°è£…ç”¨æˆ·PPPå¸§ï¼Œå®ç°è·¨å…¬ç½‘ä¼ è¾“ï¼ˆæ­¤æ—¶æ•°æ®æš‚æœªåŠ å¯†ï¼Œéœ€åç»­IPsecä¿æŠ¤ï¼‰ã€‚</p><pre><code class=" mermaid">sequenceDiagram    participant LAC as LAC    participant LNS as LNS    LAC-&gt;&gt;LNS: éš§é“å»ºç«‹è¯·æ±‚ (ç”¨æˆ·ä¿¡æ¯ã€LAC æ ‡è¯†)    LNS-&gt;&gt;LAC: åˆ†é… Tunnel ID / Session ID    LAC-&gt;&gt;LNS: ç¡®è®¤éš§é“å‚æ•°    Note over LAC,LNS: L2TP éš§é“å»ºç«‹æˆåŠŸ</code></pre><ol><li><p><strong>L2TPéš§é“åå•†å‘èµ·</strong><br>LACéªŒè¯ç”¨æˆ·æ‹¨å·è¯·æ±‚åï¼Œå‘ä¼ä¸šä¾§LNSå‘é€ <strong>L2TPéš§é“å»ºç«‹è¯·æ±‚</strong>ï¼Œæºå¸¦ç”¨æˆ·ä¿¡æ¯ï¼ˆè´¦å·ã€æ‹¨å·ç±»å‹ï¼‰ã€LACè‡ªèº«æ ‡è¯†ï¼ˆå¦‚å…¬ç½‘IPï¼‰ã€‚</p></li><li><p><strong>L2TPéš§é“å‚æ•°ç¡®è®¤</strong>  </p><ul><li>LACä¸LNSé€šè¿‡L2TPåè®®åå•†æ ¸å¿ƒå‚æ•°ï¼š  <ul><li>éš§é“IDï¼ˆæ ‡è¯†å”¯ä¸€éš§é“ï¼Œå¦‚LACâ†’LNSä¸ºTunnel ID 100ï¼ŒLNSâ†’LACä¸ºTunnel ID 200ï¼‰ï¼›  </li><li>ä¼šè¯IDï¼ˆåŒºåˆ†åŒä¸€éš§é“å†…ä¸åŒç”¨æˆ·çš„è¿æ¥ï¼Œå¦‚ç”¨æˆ·Aä¸ºSession ID 5ï¼Œç”¨æˆ·Bä¸ºSession ID 6ï¼‰ï¼›  </li><li>éš§é“éªŒè¯ï¼ˆå¯é€‰ï¼Œé€šè¿‡é¢„å…±äº«å¯†é’¥ç¡®è®¤LACä¸LNSèº«ä»½ï¼Œé˜²æ­¢éæ³•è®¾å¤‡æ¥å…¥ï¼‰ã€‚</li></ul></li></ul></li><li><p><strong>L2TPéš§é“æ¿€æ´»</strong><br>åå•†é€šè¿‡åï¼ŒLACä¸LNSä¹‹é—´å½¢æˆé€»è¾‘éš§é“ï¼Œç”¨æˆ·ç»ˆç«¯çš„PPPå¸§å¯é€šè¿‡è¯¥éš§é“ä¼ è¾“ï¼ˆæ­¤æ—¶æ•°æ®ä»¥æ˜æ–‡å½¢å¼å°è£…åœ¨L2TPæŠ¥æ–‡ä¸­ï¼Œéœ€è¿›å…¥IPsecé˜¶æ®µåŠ å¯†ï¼‰ã€‚</p></li></ol><h3 id="é˜¶æ®µ3ï¼šLACä¸LNSå»ºç«‹IPsecåŠ å¯†éš§é“ï¼ˆæ ¸å¿ƒå®‰å…¨ç¯èŠ‚ï¼‰"><a href="#é˜¶æ®µ3ï¼šLACä¸LNSå»ºç«‹IPsecåŠ å¯†éš§é“ï¼ˆæ ¸å¿ƒå®‰å…¨ç¯èŠ‚ï¼‰" class="headerlink" title="é˜¶æ®µ3ï¼šLACä¸LNSå»ºç«‹IPsecåŠ å¯†éš§é“ï¼ˆæ ¸å¿ƒå®‰å…¨ç¯èŠ‚ï¼‰"></a>é˜¶æ®µ3ï¼šLACä¸LNSå»ºç«‹IPsecåŠ å¯†éš§é“ï¼ˆæ ¸å¿ƒå®‰å…¨ç¯èŠ‚ï¼‰</h3><p>æ ¸å¿ƒç›®æ ‡ï¼šé€šè¿‡IKEåå•†ç”ŸæˆåŠ å¯†å¯†é’¥å’Œå®‰å…¨å…³è”ï¼ˆSAï¼‰ï¼Œå»ºç«‹IPsecéš§é“ï¼ŒåŠ å¯†L2TPéš§é“çš„æ‰€æœ‰æµé‡ï¼Œé˜²æ­¢å…¬ç½‘ä¼ è¾“ä¸­è¢«çªƒå¬ã€ç¯¡æ”¹ã€‚</p><pre><code class=" mermaid">sequenceDiagram    participant LAC as LAC    participant LNS as LNS    Note over LAC,LNS: é˜¶æ®µ1: å»ºç«‹ IKE SA    LAC-&gt;&gt;LNS: æä¾›ç®—æ³•åˆ—è¡¨ + Nonce + ECDH å…¬é’¥    LNS-&gt;&gt;LAC: é€‰æ‹©ç®—æ³• + Nonce + ECDH å…¬é’¥    Note over LAC,LNS: åŒæ–¹è®¡ç®—å…±äº«å¯†é’¥    LAC-&gt;&gt;LNS: èº«ä»½è®¤è¯(åŠ å¯†)    LNS-&gt;&gt;LAC: èº«ä»½è®¤è¯å“åº”    Note over LAC,LNS: IKE SA å»ºç«‹æˆåŠŸ    Note over LAC,LNS: é˜¶æ®µ2: å»ºç«‹ IPsec SA    LAC-&gt;&gt;LNS: æè®® ESP + AES + SHA    LNS-&gt;&gt;LAC: ç¡®è®¤å‚æ•°    Note over LAC,LNS: åŒæ–¹ç”Ÿæˆ IPsec åŠ å¯†/è®¤è¯å¯†é’¥&lt;br/&gt;IPsec SA ç”Ÿæ•ˆ</code></pre><h4 id="3-1-IKEåå•†ï¼šç”Ÿæˆå¯†é’¥ä¸å®‰å…¨å…³è”ï¼ˆ2ä¸ªå­é˜¶æ®µï¼‰"><a href="#3-1-IKEåå•†ï¼šç”Ÿæˆå¯†é’¥ä¸å®‰å…¨å…³è”ï¼ˆ2ä¸ªå­é˜¶æ®µï¼‰" class="headerlink" title="3.1 IKEåå•†ï¼šç”Ÿæˆå¯†é’¥ä¸å®‰å…¨å…³è”ï¼ˆ2ä¸ªå­é˜¶æ®µï¼‰"></a>3.1 IKEåå•†ï¼šç”Ÿæˆå¯†é’¥ä¸å®‰å…¨å…³è”ï¼ˆ2ä¸ªå­é˜¶æ®µï¼‰</h4><p>IKEæ˜¯IPsecçš„â€œå‰ç½®å·¥å…·â€ï¼Œåˆ†ä¸¤æ­¥å®Œæˆå¯†é’¥å’Œè§„åˆ™åå•†ï¼Œç¡®ä¿åç»­åŠ å¯†å‚æ•°ä¸€è‡´ã€‚</p><h5 id="å­é˜¶æ®µ1ï¼šå»ºç«‹IKE-SAï¼ˆä¿æŠ¤åç»­åå•†å®‰å…¨ï¼‰"><a href="#å­é˜¶æ®µ1ï¼šå»ºç«‹IKE-SAï¼ˆä¿æŠ¤åç»­åå•†å®‰å…¨ï¼‰" class="headerlink" title="å­é˜¶æ®µ1ï¼šå»ºç«‹IKE SAï¼ˆä¿æŠ¤åç»­åå•†å®‰å…¨ï¼‰"></a>å­é˜¶æ®µ1ï¼šå»ºç«‹IKE SAï¼ˆä¿æŠ¤åç»­åå•†å®‰å…¨ï¼‰</h5><ul><li><strong>ç›®çš„</strong>ï¼šå»ºç«‹ä¸´æ—¶åŠ å¯†é€šé“ï¼ˆIKE SAï¼‰ï¼Œé¿å…åç»­IPsecå‚æ•°åå•†è¢«çªƒå¬ã€‚  </li><li><strong>æµç¨‹</strong>ï¼š  <ol><li><strong>IKE_SA_INIT Requestï¼ˆLACâ†’LNSï¼‰</strong>ï¼š<br>LACå‘é€æ”¯æŒçš„ç®—æ³•åˆ—è¡¨ï¼ˆåŠ å¯†ï¼šAES-256-GCMï¼›å“ˆå¸Œï¼šSHA-256ï¼›å¯†é’¥äº¤æ¢ï¼šECDHï¼‰ã€éšæœºæ•°ï¼ˆNonceï¼‰ã€LACçš„ECDHå…¬é’¥ã€‚  </li><li><strong>IKE_SA_INIT Responseï¼ˆLNSâ†’LACï¼‰</strong>ï¼š<br>LNSä»LACçš„ç®—æ³•åˆ—è¡¨ä¸­é€‰æ‹©ä¸€å¥—ï¼ˆå¦‚ç¡®å®šAES-256+SHA-256+ECDHï¼‰ï¼Œè¿”å›è‡ªèº«éšæœºæ•°ã€ECDHå…¬é’¥ï¼Œå¯é€‰é™„åŠ LNSè¯ä¹¦ï¼ˆèº«ä»½æ ‡è¯†ï¼‰ã€‚  </li><li><strong>å…±äº«å¯†é’¥ç”Ÿæˆ</strong>ï¼š<br>LACå’ŒLNSåˆ†åˆ«ç”¨è‡ªèº«ç§é’¥ã€å¯¹æ–¹å…¬é’¥ã€åŒæ–¹éšæœºæ•°ï¼Œé€šè¿‡ECDHç®—æ³•è®¡ç®—å‡º <strong>å…±äº«å¯†é’¥ï¼ˆShared Secretï¼‰</strong>ï¼Œå†è¡ç”Ÿå‡ºIKE SAçš„åŠ å¯†å¯†é’¥ã€è®¤è¯å¯†é’¥ï¼ˆåŒæ–¹ç»“æœå®Œå…¨ä¸€è‡´ï¼Œæ— éœ€ä¼ è¾“å¯†é’¥ï¼‰ã€‚  </li><li><strong>IKE_AUTH Request&#x2F;Responseï¼ˆèº«ä»½è®¤è¯ï¼‰</strong>ï¼š  <ul><li>LACç”¨IKE SAå¯†é’¥åŠ å¯†è‡ªèº«èº«ä»½ï¼ˆå¦‚LACå…¬ç½‘IPï¼‰å’Œè®¤è¯æ•°æ®ï¼ˆç§é’¥ç­¾åçš„å“ˆå¸Œå€¼ï¼‰ï¼Œå‘é€ç»™LNSï¼›  </li><li>LNSéªŒè¯LACèº«ä»½åï¼ŒåŒæ ·åŠ å¯†è‡ªèº«èº«ä»½è¿”å›ï¼›  </li><li>éªŒè¯é€šè¿‡ï¼Œ<strong>IKE SAå»ºç«‹æˆåŠŸ</strong>ï¼ˆæœ‰æ•ˆæœŸå‡ å°æ—¶ï¼Œç”¨äºä¿æŠ¤åç»­å­SAåå•†ï¼‰ã€‚</li></ul></li></ol></li></ul><h5 id="å­é˜¶æ®µ2ï¼šå»ºç«‹IPsec-SAï¼ˆç¡®å®šæ•°æ®åŠ å¯†è§„åˆ™ï¼‰"><a href="#å­é˜¶æ®µ2ï¼šå»ºç«‹IPsec-SAï¼ˆç¡®å®šæ•°æ®åŠ å¯†è§„åˆ™ï¼‰" class="headerlink" title="å­é˜¶æ®µ2ï¼šå»ºç«‹IPsec SAï¼ˆç¡®å®šæ•°æ®åŠ å¯†è§„åˆ™ï¼‰"></a>å­é˜¶æ®µ2ï¼šå»ºç«‹IPsec SAï¼ˆç¡®å®šæ•°æ®åŠ å¯†è§„åˆ™ï¼‰</h5><ul><li><strong>ç›®çš„</strong>ï¼šåœ¨IKE SAä¿æŠ¤ä¸‹ï¼Œåå•†IPsecçš„å…·ä½“åŠ å¯†è§„åˆ™ï¼Œç”ŸæˆIPsec SAã€‚  </li><li><strong>æµç¨‹</strong>ï¼š  <ol><li><strong>CREATE_CHILD_SA Requestï¼ˆLACâ†’LNSï¼‰</strong>ï¼š<br>LACæå‡ºIPsecå‚æ•°éœ€æ±‚ï¼šéš§é“æ¨¡å¼ï¼ˆå¿…é€‰ï¼Œä¿æŠ¤åŸå§‹IPåœ°å€ï¼‰ã€ESPåè®®ï¼ˆåŠ å¯†+è®¤è¯ï¼‰ã€åŠ å¯†ç®—æ³•ï¼ˆAES-256-GCMï¼‰ã€è®¤è¯ç®—æ³•ï¼ˆSHA-256ï¼‰ã€‚  </li><li><strong>CREATE_CHILD_SA Responseï¼ˆLNSâ†’LACï¼‰</strong>ï¼š<br>LNSç¡®è®¤å‚æ•°ï¼ŒåŒæ–¹åŸºäºIKE SAå¯†é’¥ï¼Œé€šè¿‡å¯†é’¥æ´¾ç”Ÿç®—æ³•ç”Ÿæˆ <strong>IPsec SAçš„åŠ å¯†å¯†é’¥ã€è®¤è¯å¯†é’¥</strong>ã€‚  </li><li><strong>IPsec SAç”Ÿæ•ˆ</strong>ï¼š<br>åŒæ–¹è®°å½•IPsec SAä¿¡æ¯ï¼ˆSPIã€ç®—æ³•ã€å¯†é’¥ã€æœ‰æ•ˆæœŸï¼šå‡ åˆ†é’Ÿåˆ°1å°æ—¶ï¼‰ï¼Œæ­¤æ—¶IPsecéš§é“çš„â€œåŠ å¯†è§„åˆ™â€æ­£å¼ç¡®å®šã€‚</li></ol></li></ul><h4 id="3-2-IPsecéš§é“æ¿€æ´»ï¼šåŠ å¯†L2TPæµé‡"><a href="#3-2-IPsecéš§é“æ¿€æ´»ï¼šåŠ å¯†L2TPæµé‡" class="headerlink" title="3.2 IPsecéš§é“æ¿€æ´»ï¼šåŠ å¯†L2TPæµé‡"></a>3.2 IPsecéš§é“æ¿€æ´»ï¼šåŠ å¯†L2TPæµé‡</h4><p>IPsec SAå»ºç«‹åï¼ŒLACä¸LNSä¹‹é—´çš„æ‰€æœ‰L2TPéš§é“æµé‡ï¼ˆç”¨æˆ·PPPæ•°æ®ï¼‰ä¼šè¢«ESPåè®®åŠ å¯†ï¼Œå°è£…æµç¨‹å¦‚ä¸‹ï¼š  </p><ol><li><strong>åŸå§‹æ•°æ®</strong>ï¼šL2TPå°è£…åçš„æŠ¥æ–‡ï¼ˆå«ç”¨æˆ·PPPå¸§ï¼ŒæºIPï¼šLACå†…ç½‘IPï¼Œç›®çš„IPï¼šLNSå†…ç½‘IPï¼‰ï¼›  </li><li><strong>ESPåŠ å¯†</strong>ï¼šç”¨IPsec SAåŠ å¯†å¯†é’¥ï¼ˆAES-256ï¼‰åŠ å¯†æ•´ä¸ªåŸå§‹æ•°æ®ï¼ŒåŒæ—¶ç”¨è®¤è¯å¯†é’¥ï¼ˆSHA-256ï¼‰è®¡ç®—æ•°æ®å“ˆå¸Œå€¼ï¼ˆå­˜äºESPè®¤è¯å­—æ®µï¼Œé˜²ç¯¡æ”¹ï¼‰ï¼›  </li><li><strong>æ·»åŠ ESPå¤´&#x2F;å°¾</strong>ï¼š  <ul><li>å¤´éƒ¨ï¼šSPIï¼ˆæ ‡è¯†å¯¹åº”çš„IPsec SAï¼‰ã€åºåˆ—å·ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼Œæ¯æ¬¡å‘é€é€’å¢ï¼‰ï¼›  </li><li>å°¾éƒ¨ï¼šå¡«å……ä¿¡æ¯ï¼ˆç¡®ä¿æ•°æ®é•¿åº¦ç¬¦åˆåŠ å¯†å—è¦æ±‚ï¼‰ã€Next Headerï¼ˆæ ‡è¯†åŸå§‹åè®®ä¸ºL2TPï¼‰ï¼›</li></ul></li><li><strong>æ·»åŠ å…¬ç½‘IPå¤´</strong>ï¼šæºIPï¼ˆLACå…¬ç½‘IPï¼‰ã€ç›®çš„IPï¼ˆLNSå…¬ç½‘IPï¼‰ã€åè®®å­—æ®µ&#x3D;50ï¼ˆæ ‡è¯†ESPåè®®ï¼‰ï¼›  </li><li><strong>å…¬ç½‘ä¼ è¾“</strong>ï¼šåŠ å¯†åçš„æŠ¥æ–‡é€šè¿‡äº’è”ç½‘å‘é€è‡³LNSï¼Œå³ä½¿è¢«æˆªå–ä¹Ÿæ— æ³•è§£å¯†ã€‚</li></ol><h3 id="é˜¶æ®µ4ï¼šç”¨æˆ·èº«ä»½äºŒæ¬¡è®¤è¯ï¼ˆä¼ä¸šçº§æƒé™æ ¡éªŒï¼‰"><a href="#é˜¶æ®µ4ï¼šç”¨æˆ·èº«ä»½äºŒæ¬¡è®¤è¯ï¼ˆä¼ä¸šçº§æƒé™æ ¡éªŒï¼‰" class="headerlink" title="é˜¶æ®µ4ï¼šç”¨æˆ·èº«ä»½äºŒæ¬¡è®¤è¯ï¼ˆä¼ä¸šçº§æƒé™æ ¡éªŒï¼‰"></a>é˜¶æ®µ4ï¼šç”¨æˆ·èº«ä»½äºŒæ¬¡è®¤è¯ï¼ˆä¼ä¸šçº§æƒé™æ ¡éªŒï¼‰</h3><p>æ ¸å¿ƒç›®æ ‡ï¼šé€šè¿‡ä¼ä¸šå†…éƒ¨RADIUSæœåŠ¡å™¨ï¼Œåšæ›´ä¸¥æ ¼çš„èº«ä»½å’Œæƒé™æ ¡éªŒï¼ˆé¿å…è¿è¥å•†ä¾§è®¤è¯é€šè¿‡ä½†éä¼ä¸šåˆæ³•ç”¨æˆ·çš„æƒ…å†µï¼‰ã€‚</p><ol><li><p><strong>LNSå‘èµ·è®¤è¯è¯·æ±‚</strong><br>LNSä»L2TPæŠ¥æ–‡ä¸­æå–ç”¨æˆ·è´¦å·&#x2F;å¯†ç ï¼Œå‘é€è‡³ä¼ä¸šå†…éƒ¨RADIUSæœåŠ¡å™¨ï¼Œè¯·æ±‚æ ¡éªŒã€‚</p></li><li><p><strong>RADIUSè®¤è¯ä¸æƒé™è¿”å›</strong>  </p><ul><li>RADIUSæœåŠ¡å™¨æŸ¥è¯¢ç”¨æˆ·ç™½åå•ã€æƒé™é…ç½®ï¼ˆå¦‚æ˜¯å¦å…è®¸è®¿é—®è´¢åŠ¡ç³»ç»Ÿã€å¯è®¿é—®çš„å†…ç½‘ç½‘æ®µï¼‰ï¼›  </li><li>è®¤è¯é€šè¿‡ï¼šè¿”å›ç”¨æˆ·æƒé™ä¿¡æ¯ï¼ˆå¦‚å¯è®¿é—®çš„å†…ç½‘ç½‘æ®µ192.168.1.0&#x2F;24ã€VLAN ID&#x3D;10ï¼‰ï¼›  </li><li>è®¤è¯å¤±è´¥ï¼šæ‹’ç»ç”¨æˆ·æ¥å…¥ï¼Œç»ˆæ­¢è¿æ¥ã€‚</li></ul></li></ol><h3 id="é˜¶æ®µ5ï¼šåˆ†é…å†…ç½‘IPï¼Œè®¿é—®ä¼ä¸šèµ„æº"><a href="#é˜¶æ®µ5ï¼šåˆ†é…å†…ç½‘IPï¼Œè®¿é—®ä¼ä¸šèµ„æº" class="headerlink" title="é˜¶æ®µ5ï¼šåˆ†é…å†…ç½‘IPï¼Œè®¿é—®ä¼ä¸šèµ„æº"></a>é˜¶æ®µ5ï¼šåˆ†é…å†…ç½‘IPï¼Œè®¿é—®ä¼ä¸šèµ„æº</h3><p>æ ¸å¿ƒç›®æ ‡ï¼šç”¨æˆ·ç»ˆç«¯è·å¾—ä¼ä¸šå†…ç½‘IPï¼Œé€šè¿‡åŠ å¯†éš§é“è®¿é—®å†…ç½‘èµ„æºï¼Œå®Œæˆé€šä¿¡é—­ç¯ã€‚</p><ol><li><p><strong>åˆ†é…ä¼ä¸šå†…ç½‘IPï¼ˆIPCPé˜¶æ®µï¼‰</strong><br>LNSé€šè¿‡ <strong>PPPçš„IPCPï¼ˆIPæ§åˆ¶åè®®ï¼‰</strong> ç»™ç”¨æˆ·ç»ˆç«¯åˆ†é…ä¼ä¸šå†…ç½‘IPåœ°å€ï¼ˆå¦‚192.168.1.100ï¼Œä¸ä¼ä¸šåŠå…¬åŒºè®¾å¤‡åŒç½‘æ®µï¼‰ï¼ŒåŒæ—¶è¿”å›DNSæœåŠ¡å™¨åœ°å€ã€å­ç½‘æ©ç ã€‚</p></li><li><p><strong>ç”¨æˆ·è®¿é—®å†…ç½‘èµ„æº</strong>  </p><ul><li>ç»ˆç«¯å‘é€è¯·æ±‚ï¼ˆå¦‚è®¿é—®OAç³»ç»Ÿï¼‰ï¼šæ•°æ®å…ˆå°è£…ä¸ºPPPå¸§â†’L2TPéš§é“å°è£…â†’IPsecåŠ å¯†â†’å…¬ç½‘ä¼ è¾“è‡³LNSï¼›  </li><li>LNSå¤„ç†ï¼šè§£å¯†IPsecæµé‡â†’è§£å°è£…L2TP&#x2F;PPPå¸§â†’æ ¹æ®ç”¨æˆ·æƒé™è½¬å‘è‡³å†…ç½‘æœåŠ¡å™¨ï¼ˆå¦‚OAæœåŠ¡å™¨192.168.1.5ï¼‰ï¼›  </li><li>å“åº”è¿”å›ï¼šæœåŠ¡å™¨å“åº”æ•°æ®æŒ‰åŸè·¯ï¼ˆå†…ç½‘â†’LNSâ†’IPsecåŠ å¯†â†’L2TPéš§é“â†’ç”¨æˆ·ç»ˆç«¯ï¼‰è¿”å›ï¼Œç”¨æˆ·ç»ˆç«¯æ¥æ”¶åè§£ææ˜¾ç¤ºã€‚</li></ul></li><li><p><strong>å¯†é’¥æ›´æ–°ï¼ˆæ— ç¼ä¿éšœå®‰å…¨ï¼‰</strong><br>IPsec SAåˆ°æœŸå‰ï¼ˆå¦‚1å°æ—¶ï¼‰ï¼ŒLACä¸LNSé€šè¿‡IKEçš„ <strong>CREATE_CHILD_SA</strong> æ¶ˆæ¯åå•†æ–°çš„IPsec SAï¼ˆå¤ç”¨å·²æœ‰çš„IKE SAï¼Œæ— éœ€é‡æ–°è®¤è¯ï¼‰ï¼Œå®ç°å¯†é’¥â€œæ— ç¼æ›´æ–°â€ï¼Œé¿å…é•¿æœŸä½¿ç”¨åŒä¸€å¯†é’¥å¯¼è‡´å®‰å…¨é£é™©ã€‚</p></li></ol><h2 id="ä¸‰ã€å…³é”®æŠ€æœ¯æ€»ç»“"><a href="#ä¸‰ã€å…³é”®æŠ€æœ¯æ€»ç»“" class="headerlink" title="ä¸‰ã€å…³é”®æŠ€æœ¯æ€»ç»“"></a>ä¸‰ã€å…³é”®æŠ€æœ¯æ€»ç»“</h2><h3 id="3-1-æ•°æ®å°è£…é¡ºåºï¼ˆä»ç”¨æˆ·åˆ°å…¬ç½‘ï¼‰"><a href="#3-1-æ•°æ®å°è£…é¡ºåºï¼ˆä»ç”¨æˆ·åˆ°å…¬ç½‘ï¼‰" class="headerlink" title="3.1 æ•°æ®å°è£…é¡ºåºï¼ˆä»ç”¨æˆ·åˆ°å…¬ç½‘ï¼‰"></a>3.1 æ•°æ®å°è£…é¡ºåºï¼ˆä»ç”¨æˆ·åˆ°å…¬ç½‘ï¼‰</h3><p><code>ç”¨æˆ·åº”ç”¨æ•°æ®ï¼ˆå¦‚HTTPè¯·æ±‚ï¼‰â†’ PPPå¸§å°è£…ï¼ˆå«ç”¨æˆ·æ ‡è¯†ï¼‰â†’ L2TPéš§é“å°è£…ï¼ˆè·¨å…¬ç½‘ä¼ è¾“ï¼‰â†’ IPsec ESPåŠ å¯†ï¼ˆå®‰å…¨ä¿éšœï¼‰â†’ å…¬ç½‘IPå¤´å°è£…ï¼ˆè·¯ç”±è½¬å‘ï¼‰</code></p><pre><code class=" mermaid">flowchart TB    App[&quot;ç”¨æˆ·åº”ç”¨æ•°æ®&lt;br/&gt;(HTTP è¯·æ±‚)&quot;]    PPP[&quot;PPP å¸§å°è£…&lt;br/&gt;(ç”¨æˆ·è®¤è¯ä¿¡æ¯)&quot;]    L2TP[&quot;L2TP éš§é“å°è£…&lt;br/&gt;(Tunnel ID / Session ID)&quot;]    ESP[&quot;IPsec ESP åŠ å¯†&lt;br/&gt;(AES+SHA, SPI, åºåˆ—å·)&quot;]    IP[&quot;å…¬ç½‘IPå¤´&lt;br/&gt;(LACå…¬ç½‘ â†’ LNSå…¬ç½‘)&quot;]    App --&gt; PPP --&gt; L2TP --&gt; ESP --&gt; IP</code></pre><h3 id="3-2-IPsecçš„æ ¸å¿ƒå®‰å…¨ä¿éšœ"><a href="#3-2-IPsecçš„æ ¸å¿ƒå®‰å…¨ä¿éšœ" class="headerlink" title="3.2 IPsecçš„æ ¸å¿ƒå®‰å…¨ä¿éšœ"></a>3.2 IPsecçš„æ ¸å¿ƒå®‰å…¨ä¿éšœ</h3><table><thead><tr><th>å®‰å…¨ç»´åº¦</th><th>å®ç°æœºåˆ¶</th></tr></thead><tbody><tr><td>æœºå¯†æ€§</td><td>AES-256ç­‰å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†IPå±‚æ•°æ®</td></tr><tr><td>å®Œæ•´æ€§</td><td>SHA-256ç­‰å“ˆå¸Œç®—æ³•ï¼Œç”Ÿæˆæ•°æ®æ‘˜è¦ï¼Œé˜²æ­¢ç¯¡æ”¹</td></tr><tr><td>æŠ—é‡æ”¾</td><td>ESPå¤´éƒ¨åºåˆ—å·ï¼Œæ‹’ç»é‡å¤æ¥æ”¶çš„æ•°æ®åŒ…</td></tr><tr><td>èº«ä»½è®¤è¯</td><td>IKEåå•†ä¸­çš„é¢„å…±äº«å¯†é’¥&#x2F;è¯ä¹¦ï¼Œç¡®ä¿LACä¸LNSä¸ºæˆæƒè®¾å¤‡</td></tr></tbody></table><h3 id="3-3-é€‚ç”¨åœºæ™¯"><a href="#3-3-é€‚ç”¨åœºæ™¯" class="headerlink" title="3.3 é€‚ç”¨åœºæ™¯"></a>3.3 é€‚ç”¨åœºæ™¯</h3><ul><li>ä¼ä¸šå‘˜å·¥è¿œç¨‹åŠå…¬ï¼ˆåœ¨å®¶&#x2F;å‡ºå·®è®¿é—®å†…ç½‘OAã€ERPï¼‰ï¼›  </li><li>åˆ†æ”¯æœºæ„äº’è”ï¼ˆå¦‚ä¸Šæµ·åˆ†å…¬å¸é€šè¿‡VPDN+IPsecè®¿é—®æ­å·æ€»éƒ¨å†…ç½‘ï¼‰ï¼›  </li><li>ç‰©è”ç½‘è®¾å¤‡è¿œç¨‹ç®¡ç†ï¼ˆå¦‚å„åœ°å……ç”µæ¡©ã€ATMæœºæ¥å…¥ä¼ä¸šç®¡ç†å¹³å°ï¼‰ï¼›  </li><li>é«˜å®‰å…¨éœ€æ±‚è¡Œä¸šï¼ˆé‡‘èã€æ”¿åŠ¡ã€åŒ»ç–—ï¼‰ï¼Œéœ€ç¬¦åˆæ•°æ®ä¼ è¾“åˆè§„è¦æ±‚ã€‚</li></ul><h2 id="å››ã€æ•´ä½“æµç¨‹å›¾"><a href="#å››ã€æ•´ä½“æµç¨‹å›¾" class="headerlink" title="å››ã€æ•´ä½“æµç¨‹å›¾"></a>å››ã€æ•´ä½“æµç¨‹å›¾</h2><pre><code class=" mermaid">sequenceDiagram    participant Client as ç”¨æˆ·ç»ˆç«¯(Client)    participant LAC as LAC(è¿è¥å•†æ¥å…¥è®¾å¤‡)    participant LNS as LNS(ä¼ä¸šL2TPæœåŠ¡å™¨)    participant RADIUS as RADIUS(ä¼ä¸šè®¤è¯æœåŠ¡å™¨)    participant Intranet as ä¼ä¸šå†…ç½‘èµ„æº    %% é˜¶æ®µ1 PPP æ‹¨å·    Client-&gt;&gt;LAC: æ‹¨å·è¯·æ±‚(è´¦å·/å¯†ç )    LAC-&gt;&gt;Client: LCP å‚æ•°åå•†    Client-&gt;&gt;LAC: CHAP/PAP è®¤è¯å“åº”    LAC-&gt;&gt;Client: è®¤è¯æˆåŠŸ â†’ PPP é“¾è·¯å»ºç«‹    %% é˜¶æ®µ2 L2TP éš§é“    LAC-&gt;&gt;LNS: è¯·æ±‚å»ºç«‹ L2TP éš§é“    LNS-&gt;&gt;LAC: åˆ†é… Tunnel ID / Session ID    Note over LAC,LNS: L2TP éš§é“å»ºç«‹æˆåŠŸ    %% é˜¶æ®µ3 IPsec å»ºç«‹    LAC-&gt;&gt;LNS: IKE_SA_INIT (ç®—æ³•/Nonce/ECDH å…¬é’¥)    LNS-&gt;&gt;LAC: å“åº” (é€‰æ‹©ç®—æ³•/å…¬é’¥)    Note over LAC,LNS: è®¡ç®—å…±äº«å¯†é’¥ï¼Œå»ºç«‹ IKE SA    LAC-&gt;&gt;LNS: CREATE_CHILD_SA (ESP/AES/SHA æè®®)    LNS-&gt;&gt;LAC: ç¡®è®¤å‚æ•°    Note over LAC,LNS: IPsec SA ç”Ÿæ•ˆï¼ŒL2TP æµé‡å—ä¿æŠ¤    %% é˜¶æ®µ4 äºŒæ¬¡è®¤è¯    LNS-&gt;&gt;RADIUS: è½¬å‘ç”¨æˆ·å‡­è¯è¿›è¡Œè®¤è¯    RADIUS-&gt;&gt;LNS: è¿”å›è®¤è¯ç»“æœ+æƒé™    LNS-&gt;&gt;Client: é€šçŸ¥è®¤è¯é€šè¿‡/æ‹’ç»    %% é˜¶æ®µ5 åˆ†é…å†…ç½‘IPå¹¶è®¿é—®    LNS-&gt;&gt;Client: IPCP åˆ†é…å†…ç½‘IP/DNS    Client-&gt;&gt;Intranet: è®¿é—®å†…ç½‘åº”ç”¨(OA/ERPç­‰)    Intranet-&gt;&gt;Client: è¿”å›ä¸šåŠ¡æ•°æ®(é€šè¿‡L2TP+IPsec)</code></pre>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vue-element-adminåŠ¨æ€å¤šæ ‡ç­¾é¡µï¼ˆå¸¦å‚æ•°+ç¼“å­˜ä¸åˆ·æ–°ï¼‰å®Œæ•´å®ç°æŒ‡å—</title>
    <link href="/2025/09/18/vue-element-admin%20%E5%8A%A8%E6%80%81%E5%A4%9A%E6%A0%87%E7%AD%BE%E9%A1%B5%EF%BC%88%E5%B8%A6%E5%8F%82%E6%95%B0+%E7%BC%93%E5%AD%98%E4%B8%8D%E5%88%B7%E6%96%B0%EF%BC%89%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%8C%87%E5%8D%97/"/>
    <url>/2025/09/18/vue-element-admin%20%E5%8A%A8%E6%80%81%E5%A4%9A%E6%A0%87%E7%AD%BE%E9%A1%B5%EF%BC%88%E5%B8%A6%E5%8F%82%E6%95%B0+%E7%BC%93%E5%AD%98%E4%B8%8D%E5%88%B7%E6%96%B0%EF%BC%89%E5%AE%8C%E6%95%B4%E5%AE%9E%E7%8E%B0%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="vue-element-admin-åŠ¨æ€å¤šæ ‡ç­¾é¡µï¼ˆå¸¦å‚æ•°-ç¼“å­˜ä¸åˆ·æ–°ï¼‰å®Œæ•´å®ç°æŒ‡å—"><a href="#vue-element-admin-åŠ¨æ€å¤šæ ‡ç­¾é¡µï¼ˆå¸¦å‚æ•°-ç¼“å­˜ä¸åˆ·æ–°ï¼‰å®Œæ•´å®ç°æŒ‡å—" class="headerlink" title="vue-element-admin åŠ¨æ€å¤šæ ‡ç­¾é¡µï¼ˆå¸¦å‚æ•° + ç¼“å­˜ä¸åˆ·æ–°ï¼‰å®Œæ•´å®ç°æŒ‡å—"></a>vue-element-admin åŠ¨æ€å¤šæ ‡ç­¾é¡µï¼ˆå¸¦å‚æ•° + ç¼“å­˜ä¸åˆ·æ–°ï¼‰å®Œæ•´å®ç°æŒ‡å—</h1><h2 id="ä¸€ã€éœ€æ±‚èƒŒæ™¯ä¸æ ¸å¿ƒç›®æ ‡"><a href="#ä¸€ã€éœ€æ±‚èƒŒæ™¯ä¸æ ¸å¿ƒç›®æ ‡" class="headerlink" title="ä¸€ã€éœ€æ±‚èƒŒæ™¯ä¸æ ¸å¿ƒç›®æ ‡"></a>ä¸€ã€éœ€æ±‚èƒŒæ™¯ä¸æ ¸å¿ƒç›®æ ‡</h2><p>åœ¨ vue-element-admin é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ° â€œåŒä¸€é¡µé¢æ¨¡æ¿éœ€åŠ è½½ä¸åŒå‚æ•°æ•°æ®â€ çš„åœºæ™¯ï¼ˆå¦‚è®¾å¤‡è¯¦æƒ…ã€ç«¯å£çŠ¶æ€å›æº¯ç­‰ï¼‰ï¼Œæ ¸å¿ƒéœ€æ±‚å¦‚ä¸‹ï¼š</p><ol><li><p><strong>å¤šå®ä¾‹å…±å­˜</strong>ï¼šåŒä¸€é¡µé¢æ¨¡æ¿å¯åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µï¼ˆå¦‚ â€œç«¯å£çŠ¶æ€å›æº¯ - è·¯ç”±å™¨ Aâ€â€œç«¯å£çŠ¶æ€å›æº¯ - è·¯ç”±å™¨ Bâ€ï¼‰ï¼Œæ¯ä¸ªæ ‡ç­¾é¡µå¯¹åº”ä¸åŒå‚æ•°ï¼›</p></li><li><p><strong>æ ‡é¢˜å¸¦å‚æ•°</strong>ï¼šæ ‡ç­¾é¡µæ ‡é¢˜éœ€åŒ…å«ä¸šåŠ¡å‚æ•°ï¼Œç›´è§‚åŒºåˆ†ä¸åŒæ ‡ç­¾ï¼Œé¿å…æ ‡é¢˜é‡å¤ï¼›</p></li><li><p><strong>åˆ‡æ¢ä¸åˆ·æ–°</strong>ï¼šæ ‡ç­¾é¡µæ¥å›åˆ‡æ¢æ—¶ï¼Œä¸é‡å¤è¯·æ±‚æ¥å£ã€ä¸é‡ç½®é¡µé¢çŠ¶æ€ï¼ˆå¦‚è¡¨æ ¼åˆ†é¡µã€è¡¨å•å¡«å†™è¿›åº¦ï¼‰ï¼Œå€ŸåŠ© keep-alive å®ç°ç¼“å­˜ï¼›</p></li><li><p><strong>è·¯ç”±ä¸å†²çª</strong>ï¼šåŠ¨æ€ç”Ÿæˆçš„è·¯ç”±éœ€å”¯ä¸€ï¼Œé¿å…é‡å¤æ³¨å†Œå¯¼è‡´çš„è·¯ç”±å†—ä½™æˆ–è§£æé”™è¯¯ã€‚</p></li></ol><h2 id="äºŒã€æ ¸å¿ƒå®ç°åŸç†"><a href="#äºŒã€æ ¸å¿ƒå®ç°åŸç†" class="headerlink" title="äºŒã€æ ¸å¿ƒå®ç°åŸç†"></a>äºŒã€æ ¸å¿ƒå®ç°åŸç†</h2><p>é€šè¿‡ â€œ<strong>å”¯ä¸€è·¯ç”±æ ‡è¯† + åŠ¨æ€è·¯ç”±æ³¨å†Œ + ç»„ä»¶ name åŒæ­¥ + dynamicTitle é…ç½® + keep-alive ç¼“å­˜</strong>â€ çš„ç»„åˆæ–¹æ¡ˆï¼Œè§£å†³ä¸Šè¿°éœ€æ±‚ï¼Œæ ¸å¿ƒé€»è¾‘æ‹†è§£å¦‚ä¸‹ï¼š</p><ol><li><p><strong>å”¯ä¸€è·¯ç”±æ ‡è¯†</strong>ï¼šç”¨ â€œé¡µé¢æ ‡è¯† + å‚æ•°ç¼–ç â€ ç”Ÿæˆå”¯ä¸€è·¯ç”± <code>name</code>ï¼ˆå¦‚ <code>InterfaceHistory_è·¯ç”±å™¨A_åŒ—äº¬</code>ï¼‰ï¼Œç¡®ä¿è·¯ç”±ç³»ç»Ÿå°†ä¸åŒå‚æ•°çš„åŒæ¨¡æ¿é¡µé¢è¯†åˆ«ä¸ºç‹¬ç«‹è·¯ç”±ï¼›</p></li><li><p><strong>åŠ¨æ€è·¯ç”±æ³¨å†Œ</strong>ï¼šé¦–æ¬¡è®¿é—®æŸå‚æ•°é¡µé¢æ—¶ï¼Œé€šè¿‡ <code>$router.addRoutes()</code> åŠ¨æ€æ³¨å†Œè·¯ç”±ï¼ŒåŒæ—¶åˆ¤æ–­è·¯ç”±æ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…é‡å¤æ³¨å†Œï¼›</p></li><li><p><strong>ç»„ä»¶ name åŒæ­¥</strong>ï¼šåŠ¨æ€å¯¼å…¥é¡µé¢ç»„ä»¶æ—¶ï¼Œä¿®æ”¹ç»„ä»¶é»˜è®¤å¯¼å‡ºçš„ <code>name</code>ï¼Œä½¿å…¶ä¸è·¯ç”± <code>name</code> ä¸€è‡´ï¼Œç¡®ä¿ keep-alive èƒ½é€šè¿‡ <code>name</code> ç²¾å‡†åŒ¹é…ç¼“å­˜ï¼›</p></li><li><p><strong>dynamicTitle é…ç½®</strong>ï¼šåœ¨è·¯ç”± <code>meta</code> ä¸­è®¾ç½® <code>dynamicTitle: true</code>ï¼Œå¼€å¯åŠ¨æ€æ ‡é¢˜è¯†åˆ«ï¼Œè®© TagsView ç»„ä»¶ä¼˜å…ˆè¯»å–å¸¦å‚æ•°çš„ <code>meta.title</code>ï¼ˆå¦‚ â€œç«¯å£çŠ¶æ€å›æº¯ - è·¯ç”±å™¨ Aâ€ï¼‰ï¼Œå®ç°æ ‡ç­¾é¡µæ ‡é¢˜å·®å¼‚åŒ–ï¼›</p></li><li><p><strong>keep-alive ç¼“å­˜</strong>ï¼šå€ŸåŠ© vue-element-admin å†…ç½®çš„ keep-alive æœºåˆ¶ï¼Œé€šè¿‡ç»„ä»¶ <code>name</code> åŒ¹é…ç¼“å­˜ï¼Œå®ç°æ ‡ç­¾é¡µåˆ‡æ¢æ—¶ä¸é‡å¤åˆ·æ–°é¡µé¢ã€‚</p></li></ol><h2 id="ä¸‰ã€è¯¦ç»†å®ç°æ­¥éª¤ï¼ˆä»¥-â€œç«¯å£çŠ¶æ€å›æº¯â€-é¡µé¢ä¸ºä¾‹ï¼‰"><a href="#ä¸‰ã€è¯¦ç»†å®ç°æ­¥éª¤ï¼ˆä»¥-â€œç«¯å£çŠ¶æ€å›æº¯â€-é¡µé¢ä¸ºä¾‹ï¼‰" class="headerlink" title="ä¸‰ã€è¯¦ç»†å®ç°æ­¥éª¤ï¼ˆä»¥ â€œç«¯å£çŠ¶æ€å›æº¯â€ é¡µé¢ä¸ºä¾‹ï¼‰"></a>ä¸‰ã€è¯¦ç»†å®ç°æ­¥éª¤ï¼ˆä»¥ â€œç«¯å£çŠ¶æ€å›æº¯â€ é¡µé¢ä¸ºä¾‹ï¼‰</h2><h3 id="æ­¥éª¤-1ï¼šç¼–å†™åŠ¨æ€è·³è½¬å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰"><a href="#æ­¥éª¤-1ï¼šç¼–å†™åŠ¨æ€è·³è½¬å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰" class="headerlink" title="æ­¥éª¤ 1ï¼šç¼–å†™åŠ¨æ€è·³è½¬å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰"></a>æ­¥éª¤ 1ï¼šç¼–å†™åŠ¨æ€è·³è½¬å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</h3><p>åœ¨è§¦å‘è·³è½¬çš„é¡µé¢ï¼ˆå¦‚è®¾å¤‡åˆ—è¡¨é¡µï¼‰ä¸­ï¼Œç¼–å†™è·³è½¬å‡½æ•°ï¼Œå®Œæˆ â€œå‚æ•°å¤„ç† â†’ è·¯ç”±å­˜åœ¨æ€§åˆ¤æ–­ â†’ åŠ¨æ€æ³¨å†Œè·¯ç”± â†’ é¡µé¢è·³è½¬â€ å…¨æµç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">* è·³è½¬åˆ°ç«¯å£çŠ¶æ€å›æº¯é¡µé¢ï¼ˆå¸¦å‚æ•°ï¼Œæ”¯æŒå¤šæ ‡ç­¾é¡µå…±å­˜ï¼‰</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">hostname</span> - è®¾å¤‡ä¸»æœºåï¼ˆå¿…ä¼ å‚æ•°ï¼‰</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">* <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; [city] - åŸå¸‚ï¼ˆå¯é€‰å‚æ•°ï¼‰</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">async</span> <span class="hljs-title function_">goToInterfaceHistory</span>(<span class="hljs-params">hostname, city</span>) &#123;<br><br> <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒï¼šå¿…ä¼ å‚æ•°ä¸ºç©ºæ—¶ç›´æ¥è¿”å›ï¼Œé¿å…æ— æ•ˆè·³è½¬</span><br><br> <span class="hljs-keyword">if</span> (!hostname) <span class="hljs-keyword">return</span>;<br><br> <span class="hljs-comment">// 2. ç”Ÿæˆå”¯ä¸€æ ‡è¯† keyï¼šå¯¹å‚æ•°ç¼–ç ï¼ˆå¤„ç†ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€ç¬¦å·ï¼‰ï¼Œé¿å…è·¯ç”±è·¯å¾„å†²çª</span><br><br> <span class="hljs-keyword">const</span> encodedHostname = <span class="hljs-built_in">encodeURIComponent</span>(hostname);<br><br> <span class="hljs-keyword">const</span> encodedCity = city ? <span class="hljs-string">&#x27;_&#x27;</span> + <span class="hljs-built_in">encodeURIComponent</span>(city) : <span class="hljs-string">&#x27;&#x27;</span>;<br><br> <span class="hljs-keyword">const</span> uniqueKey = encodedHostname + encodedCity;<br><br> <span class="hljs-comment">// 3. ç”Ÿæˆå”¯ä¸€è·¯ç”± nameï¼šé¡µé¢æ ‡è¯† + å”¯ä¸€ keyï¼Œç¡®ä¿è·¯ç”±å…¨å±€å”¯ä¸€</span><br><br> <span class="hljs-keyword">const</span> uniqueRouteName = <span class="hljs-string">`InterfaceHistory_<span class="hljs-subst">$&#123;uniqueKey&#125;</span>`</span>;<br><br> <span class="hljs-comment">// 4. æ£€æŸ¥è·¯ç”±æ˜¯å¦å·²æ³¨å†Œï¼šé¿å…é‡å¤è°ƒç”¨ addRoutes å¯¼è‡´è·¯ç”±å†—ä½™</span><br><br> <span class="hljs-keyword">const</span> allRoutes = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-property">options</span>.<span class="hljs-property">routes</span> || [];<br><br> <span class="hljs-keyword">let</span> isRouteExists = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-comment">// éå†è·¯ç”±æ ‘ï¼ˆå«å­è·¯ç”±ï¼‰ï¼Œåˆ¤æ–­ç›®æ ‡è·¯ç”±æ˜¯å¦å­˜åœ¨</span><br><br> <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkRouteExists</span> = (<span class="hljs-params">routes</span>) =&gt; &#123;<br><br>   <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> route <span class="hljs-keyword">of</span> routes) &#123;<br><br>     <span class="hljs-keyword">if</span> (route.<span class="hljs-property">name</span> === uniqueRouteName) &#123;<br><br>       isRouteExists = <span class="hljs-literal">true</span>;<br><br>       <span class="hljs-keyword">return</span>;<br><br>     &#125;<br><br>     <span class="hljs-keyword">if</span> (route.<span class="hljs-property">children</span> &amp;&amp; route.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;<br><br>       <span class="hljs-title function_">checkRouteExists</span>(route.<span class="hljs-property">children</span>);<br><br>     &#125;<br><br>   &#125;<br><br> &#125;;<br><br> <span class="hljs-title function_">checkRouteExists</span>(allRoutes);<br><br> <span class="hljs-comment">// 5. æœªæ³¨å†Œåˆ™åŠ¨æ€æ·»åŠ è·¯ç”±</span><br><br> <span class="hljs-keyword">if</span> (!isRouteExists) &#123;<br><br>   <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">addRoutes</span>([<br><br>     &#123;<br><br>       <span class="hljs-attr">path</span>: <span class="hljs-string">`/devOpsSnap/interfaceHistory/<span class="hljs-subst">$&#123;uniqueKey&#125;</span>`</span>, <span class="hljs-comment">// è·¯ç”±è·¯å¾„å«å”¯ä¸€ keyï¼Œé¿å…è·¯å¾„é‡å¤</span><br><br>       <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/layout&#x27;</span>), <span class="hljs-comment">// ç»§æ‰¿é¡¹ç›®ä¸»å¸ƒå±€ï¼ˆéœ€ä¸é¡¹ç›®å®é™…ç»“æ„ä¸€è‡´ï¼‰</span><br><br>       <span class="hljs-attr">children</span>: [<br><br>         &#123;<br><br>           <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">// å­è·¯ç”±é»˜è®¤è·¯å¾„ï¼ˆç©ºè·¯å¾„åŒ¹é…çˆ¶è·¯å¾„ï¼Œè®¿é—®æ—¶æ— éœ€é¢å¤–æ‹¼æ¥ï¼‰</span><br><br>           <span class="hljs-attr">name</span>: uniqueRouteName, <span class="hljs-comment">// å”¯ä¸€è·¯ç”± nameï¼ˆä¸ç»„ä»¶ name åŒæ­¥ï¼‰</span><br><br>           <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥é¡µé¢ç»„ä»¶ï¼Œå¹¶ä¿®æ”¹ç»„ä»¶ name ä¸è·¯ç”± name ä¸€è‡´ï¼ˆå…³é”®ï¼šç¡®ä¿ç¼“å­˜ç”Ÿæ•ˆï¼‰</span><br><br>           <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/views/devOpsSnap/interfaceHistory.vue&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> &#123;<br><br>             <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">module</span> &amp;&amp; <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>) &#123;<br><br>               <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>.<span class="hljs-property">name</span> = uniqueRouteName; <span class="hljs-comment">// åŒæ­¥ç»„ä»¶ name ä¸è·¯ç”± name</span><br><br>             &#125;<br><br>             <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>;<br><br>           &#125;),<br><br>           <span class="hljs-attr">meta</span>: &#123;<br><br>             <span class="hljs-attr">title</span>: <span class="hljs-string">`ç«¯å£çŠ¶æ€å›æº¯ - <span class="hljs-subst">$&#123;hostname&#125;</span>`</span>, <span class="hljs-comment">// åŠ¨æ€æ ‡é¢˜ï¼ˆå«ä¸šåŠ¡å‚æ•°ï¼Œç›´è§‚åŒºåˆ†æ ‡ç­¾ï¼‰</span><br><br>             <span class="hljs-attr">dynamicTitle</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…³é”®é…ç½®ï¼šå¼€å¯åŠ¨æ€æ ‡é¢˜è¯†åˆ«ï¼Œè®© TagsView è¯»å–å¸¦å‚æ•°æ ‡é¢˜</span><br><br>             <span class="hljs-attr">affix</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…è®¸å…³é—­æ ‡ç­¾é¡µï¼ˆéå›ºå®šæ ‡ç­¾ï¼Œå›ºå®šæ ‡ç­¾éœ€è®¾ä¸º trueï¼‰</span><br><br>             <span class="hljs-attr">noCache</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å¼€å¯ç¼“å­˜ï¼ˆfalse è¡¨ç¤ºç¼“å­˜ï¼Œtrue è¡¨ç¤ºä¸ç¼“å­˜ï¼Œéœ€ä¸ keep-alive é…åˆï¼‰</span><br><br>           &#125;<br><br>         &#125;<br><br>       ]<br><br>     &#125;<br><br>   ]);<br><br> &#125;<br><br> <span class="hljs-comment">// 6. è·³è½¬åˆ°ç›®æ ‡è·¯ç”±ï¼šé€šè¿‡å”¯ä¸€ name è·³è½¬ï¼ˆæ¯” path è·³è½¬æ›´å¯é ï¼Œé¿å…è·¯å¾„æ‹¼æ¥é”™è¯¯ï¼‰</span><br><br> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(&#123;<br><br>   <span class="hljs-attr">name</span>: uniqueRouteName,<br><br>   <span class="hljs-attr">query</span>: &#123;<br><br>     <span class="hljs-attr">hostname</span>: hostname, <span class="hljs-comment">// ä¼ é€’ä¸šåŠ¡å‚æ•°ï¼ˆç»„ä»¶å†…é€šè¿‡ $route.query è·å–ï¼‰</span><br><br>     <span class="hljs-attr">city</span>: city || <span class="hljs-string">&#x27;&#x27;</span><br><br>   &#125;<br><br> &#125;);<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ­¥éª¤-2ï¼šç›®æ ‡é¡µé¢ç»„ä»¶é…ç½®ï¼ˆæ¥æ”¶å‚æ•°-åŠ è½½æ•°æ®ï¼‰"><a href="#æ­¥éª¤-2ï¼šç›®æ ‡é¡µé¢ç»„ä»¶é…ç½®ï¼ˆæ¥æ”¶å‚æ•°-åŠ è½½æ•°æ®ï¼‰" class="headerlink" title="æ­¥éª¤ 2ï¼šç›®æ ‡é¡µé¢ç»„ä»¶é…ç½®ï¼ˆæ¥æ”¶å‚æ•° + åŠ è½½æ•°æ®ï¼‰"></a>æ­¥éª¤ 2ï¼šç›®æ ‡é¡µé¢ç»„ä»¶é…ç½®ï¼ˆæ¥æ”¶å‚æ•° + åŠ è½½æ•°æ®ï¼‰</h3><p>åœ¨ç›®æ ‡é¡µé¢ï¼ˆå¦‚ <code>interfaceHistory.vue</code>ï¼‰ä¸­ï¼Œæ— éœ€é¢å¤–å¤æ‚é…ç½®ï¼Œåªéœ€ä» <code>$route.query</code> è·å–å‚æ•°å¹¶åŠ è½½æ•°æ®ï¼Œç¼“å­˜ç”± keep-alive è‡ªåŠ¨ç®¡ç†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br><br> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;interface-history-container&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-comment">&lt;!-- é¡µé¢æ ‡é¢˜ï¼šæ˜¾ç¤ºå¸¦å‚æ•°çš„ä¸šåŠ¡ä¿¡æ¯ --&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">el-page-header</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ç«¯å£çŠ¶æ€å›æº¯&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">content</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">       ç«¯å£çŠ¶æ€å›æº¯ - &#123;&#123; $route.query.hostname &#125;&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">       <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;$route.query.city&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;city-tag&quot;</span>&gt;</span>ï¼ˆ&#123;&#123; $route.query.city &#125;&#125;ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">el-page-header</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-comment">&lt;!-- ä¸šåŠ¡å†…å®¹ï¼šå¦‚è¡¨æ ¼å±•ç¤ºç«¯å£æ•°æ® --&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">&quot;tableData&quot;</span> <span class="hljs-attr">border</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%; margin-top: 20px;&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;ç«¯å£åç§°&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;portName&quot;</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;ç«¯å£çŠ¶æ€&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">       <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">&quot;scope&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">         <span class="hljs-tag">&lt;<span class="hljs-name">el-tag</span> <span class="hljs-attr">:type</span>=<span class="hljs-string">&quot;scope.row.status === &#x27;up&#x27; ? &#x27;success&#x27; : &#x27;danger&#x27;&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">           &#123;&#123; scope.row.status === &#x27;up&#x27; ? &#x27;æ­£å¸¸&#x27; : &#x27;å¼‚å¸¸&#x27; &#125;&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">         <span class="hljs-tag">&lt;/<span class="hljs-name">el-tag</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">       <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;é€Ÿç‡&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;speed&quot;</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æœ€åæ›´æ–°æ—¶é—´&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;updateTime&quot;</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> /&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">   <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;InterfaceHistory&#x27;</span>, <span class="hljs-comment">// åˆå§‹ name å¯è‡ªå®šä¹‰ï¼Œåç»­ä¼šè¢«åŠ¨æ€ä¿®æ”¹ä¸º uniqueRouteName</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   <span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">     <span class="hljs-attr">tableData</span>: [] <span class="hljs-comment">// å­˜å‚¨ç«¯å£çŠ¶æ€æ•°æ®</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   &#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> &#125;,</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   <span class="hljs-comment">// ç»„ä»¶é¦–æ¬¡åˆ›å»ºæ—¶åŠ è½½æ•°æ®ï¼ˆç¼“å­˜åˆ‡æ¢æ—¶ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œä»…é¦–æ¬¡è§¦å‘ï¼‰</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPortHistoryData</span>();</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> &#125;,</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> <span class="hljs-attr">methods</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   <span class="hljs-comment">/**</span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml">    * åŠ è½½ç«¯å£çŠ¶æ€å›æº¯æ•°æ®</span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="hljs-comment"><span class="language-javascript"><span class="language-xml">    */</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadPortHistoryData</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">     <span class="hljs-keyword">try</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-comment">// ä»è·¯ç”± query ä¸­è·å–å‚æ•°</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-keyword">const</span> &#123; hostname, city &#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-comment">// è°ƒç”¨æ¥å£è·å–æ•°æ®ï¼ˆæ›¿æ¢ä¸ºé¡¹ç›®å®é™…æ¥å£ï¼‰</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$api</span>.<span class="hljs-property">devOpsSnap</span>.<span class="hljs-title function_">getPortHistory</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">         <span class="hljs-attr">hostname</span>: hostname,</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">         <span class="hljs-attr">city</span>: city</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       &#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-variable language_">this</span>.<span class="hljs-property">tableData</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">list</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">     &#125; <span class="hljs-keyword">catch</span> (error) &#123;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;åŠ è½½ç«¯å£çŠ¶æ€æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•ï¼&#x27;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;ç«¯å£æ•°æ®åŠ è½½é”™è¯¯ï¼š&#x27;</span>, error);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">     &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">   &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"> &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.interface-history-container</span> &#123;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"> <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.city-tag</span> &#123;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"> <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"> <span class="hljs-attribute">color</span>: <span class="hljs-number">#409eff</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="æ­¥éª¤-3ï¼šç¡®è®¤é¡¹ç›®-keep-alive-é…ç½®ï¼ˆç¡®ä¿ç¼“å­˜ç”Ÿæ•ˆï¼‰"><a href="#æ­¥éª¤-3ï¼šç¡®è®¤é¡¹ç›®-keep-alive-é…ç½®ï¼ˆç¡®ä¿ç¼“å­˜ç”Ÿæ•ˆï¼‰" class="headerlink" title="æ­¥éª¤ 3ï¼šç¡®è®¤é¡¹ç›® keep-alive é…ç½®ï¼ˆç¡®ä¿ç¼“å­˜ç”Ÿæ•ˆï¼‰"></a>æ­¥éª¤ 3ï¼šç¡®è®¤é¡¹ç›® keep-alive é…ç½®ï¼ˆç¡®ä¿ç¼“å­˜ç”Ÿæ•ˆï¼‰</h3><p>vue-element-admin é»˜è®¤åœ¨ <code>src/layout/components/AppMain.vue</code> ä¸­é…ç½®äº† keep-aliveï¼Œæ— éœ€é¢å¤–ä¿®æ”¹ï¼Œç¡®ä¿é…ç½®å¦‚ä¸‹å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-main&quot;</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- keep-alive ç¼“å­˜ç»„ä»¶ï¼šinclude åŸºäºç»„ä»¶ name åŒ¹é…ï¼Œä»…ç¼“å­˜åŒ…å«åœ¨ cachedViews ä¸­çš„ç»„ä»¶ --&gt;</span><br><br>   <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">:include</span>=<span class="hljs-string">&quot;cachedViews&quot;</span>&gt;</span><br><br>     <span class="hljs-comment">&lt;!-- è·¯ç”±è§†å›¾ï¼škey ç”¨ $route.fullPath ç¡®ä¿ä¸åŒå‚æ•°è·¯ç”±è§¦å‘è§†å›¾æ›´æ–° --&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;$route.fullPath&quot;</span> /&gt;</span><br><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span><br><br> <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"></span><br><span class="language-javascript"> <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;AppMain&#x27;</span>,</span><br><span class="language-javascript"></span><br><span class="language-javascript"> <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript"></span><br><span class="language-javascript">   <span class="hljs-comment">// ä» vuex çš„ tagsView æ¨¡å—ä¸­è·å–éœ€ç¼“å­˜çš„è§†å›¾åˆ—è¡¨ï¼ˆåŠ¨æ€è·¯ç”±çš„ uniqueRouteName ä¼šè‡ªåŠ¨åŠ å…¥ï¼‰</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">   <span class="hljs-title function_">cachedViews</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"></span><br><span class="language-javascript">     <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">tagsView</span>.<span class="hljs-property">cachedViews</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript">   &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"> &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">&#125;;</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-main</span> &#123;</span><br><span class="language-css"></span><br><span class="language-css"> <span class="hljs-attribute">min-height</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100vh</span> - <span class="hljs-number">50px</span>);</span><br><span class="language-css"></span><br><span class="language-css"> <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css"></span><br><span class="language-css"> <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å››ã€å…³é”®é…ç½®è§£æï¼šdynamicTitle-true"><a href="#å››ã€å…³é”®é…ç½®è§£æï¼šdynamicTitle-true" class="headerlink" title="å››ã€å…³é”®é…ç½®è§£æï¼šdynamicTitle: true"></a>å››ã€å…³é”®é…ç½®è§£æï¼š<code>dynamicTitle: true</code></h2><h3 id="1-ä½œç”¨ï¼šå®ç°æ ‡ç­¾é¡µæ ‡é¢˜å·®å¼‚åŒ–"><a href="#1-ä½œç”¨ï¼šå®ç°æ ‡ç­¾é¡µæ ‡é¢˜å·®å¼‚åŒ–" class="headerlink" title="1. ä½œç”¨ï¼šå®ç°æ ‡ç­¾é¡µæ ‡é¢˜å·®å¼‚åŒ–"></a>1. ä½œç”¨ï¼šå®ç°æ ‡ç­¾é¡µæ ‡é¢˜å·®å¼‚åŒ–</h3><p>åœ¨ vue-element-admin çš„ TagsView ç»„ä»¶ï¼ˆ<code>src/layout/components/TagsView/index.vue</code>ï¼‰ä¸­ï¼Œé»˜è®¤è¯»å–è·¯ç”± <code>meta.title</code> çš„å›ºå®šå€¼ä½œä¸ºæ ‡ç­¾é¡µæ ‡é¢˜ã€‚è‹¥æœªé…ç½® <code>dynamicTitle: true</code>ï¼Œå³ä½¿ <code>meta.title</code> æ˜¯åŠ¨æ€çš„ï¼ŒTagsView ä»å¯èƒ½ä¼˜å…ˆè¯»å–è·¯ç”±åŸå‹çš„å›ºå®š <code>meta.title</code>ï¼Œå¯¼è‡´æ‰€æœ‰åŒç±»æ ‡ç­¾é¡µæ ‡é¢˜é‡å¤ã€‚</p><p>é…ç½® <code>dynamicTitle: true</code> åï¼ŒTagsView ä¼šé€šè¿‡ä»¥ä¸‹é€»è¾‘ä¼˜å…ˆè¯»å–å¸¦å‚æ•°çš„åŠ¨æ€æ ‡é¢˜ï¼ˆæºç æ ¸å¿ƒé€»è¾‘ï¼‰ï¼š</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sas">// TagsView ç»„ä»¶ä¸­è·å–æ ‡ç­¾æ ‡é¢˜çš„é€»è¾‘<br><br>getTagTitle(route) &#123;<br><br> // è‹¥è·¯ç”± meta é…ç½®äº† dynamicTitle: trueï¼Œä¸”è·¯ç”±å®ä¾‹æœ‰ <span class="hljs-keyword">title</span>ï¼Œä¼˜å…ˆä½¿ç”¨åŠ¨æ€ <span class="hljs-keyword">title</span><br><br> <span class="hljs-keyword">if</span> (route.meta.dynamicTitle <span class="hljs-variable">&amp;&amp;</span> route.<span class="hljs-keyword">title</span>) &#123;<br><br>   <span class="hljs-keyword">return</span> route.<span class="hljs-keyword">title</span>;<br><br> &#125;<br><br> // å¦åˆ™ä½¿ç”¨é»˜è®¤çš„ meta.<span class="hljs-keyword">title</span>ï¼ˆå›ºå®šå€¼ï¼‰<br><br> <span class="hljs-keyword">return</span> route.meta.<span class="hljs-keyword">title</span> || <span class="hljs-string">&#x27;æœªå‘½åé¡µé¢&#x27;</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-é…ç½®ä½ç½®ä¸è¦æ±‚"><a href="#2-é…ç½®ä½ç½®ä¸è¦æ±‚" class="headerlink" title="2. é…ç½®ä½ç½®ä¸è¦æ±‚"></a>2. é…ç½®ä½ç½®ä¸è¦æ±‚</h3><ul><li><p><strong>é…ç½®ä½ç½®</strong>ï¼šå¿…é¡»åœ¨åŠ¨æ€æ³¨å†Œçš„å­è·¯ç”± <code>meta</code> ä¸­é…ç½®ï¼Œä¸åŠ¨æ€ <code>title</code> ä¸€ä¸€å¯¹åº”ï¼ˆå‚è€ƒæ­¥éª¤ 1 ä¸­çš„è·¯ç”±é…ç½®ï¼‰ï¼›</p></li><li><p><strong>é…åˆè¦æ±‚</strong>ï¼šéœ€ä¸åŠ¨æ€ç”Ÿæˆçš„ <code>meta.title</code> é…åˆä½¿ç”¨ï¼ˆå¦‚ <code>title: ç«¯å£çŠ¶æ€å›æº¯ - $&#123;hostname&#125;</code>ï¼‰ï¼Œè‹¥ <code>title</code> æ˜¯å›ºå®šå€¼ï¼Œ<code>dynamicTitle: true</code> æ— æ„ä¹‰ã€‚</p></li></ul><h2 id="äº”ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜è§£å†³"><a href="#äº”ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="äº”ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜è§£å†³"></a>äº”ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜è§£å†³</h2><h3 id="1-è·¯ç”±-name-å”¯ä¸€æ€§"><a href="#1-è·¯ç”±-name-å”¯ä¸€æ€§" class="headerlink" title="1. è·¯ç”± name å”¯ä¸€æ€§"></a>1. è·¯ç”± name å”¯ä¸€æ€§</h3><ul><li><p><strong>é—®é¢˜</strong>ï¼šè‹¥ <code>uniqueRouteName</code> ä¸å”¯ä¸€ï¼Œä¼šå¯¼è‡´è·¯ç”±å†²çªæˆ–ç¼“å­˜é”™ä¹±ï¼›</p></li><li><p><strong>è§£å†³</strong>ï¼šç¡®ä¿ <code>uniqueRouteName</code> ç”± â€œé¡µé¢æ ‡è¯† + å‚æ•°ç¼–ç â€ ç”Ÿæˆï¼ˆå¦‚ <code>InterfaceHistory_$&#123;encodedHostname&#125;_$&#123;encodedCity&#125;</code>ï¼‰ï¼Œå¯¹ç‰¹æ®Šå­—ç¬¦ç”¨ <code>encodeURIComponent</code> ç¼–ç ã€‚</p></li></ul><h3 id="2-é¿å…é‡å¤æ³¨å†Œè·¯ç”±"><a href="#2-é¿å…é‡å¤æ³¨å†Œè·¯ç”±" class="headerlink" title="2. é¿å…é‡å¤æ³¨å†Œè·¯ç”±"></a>2. é¿å…é‡å¤æ³¨å†Œè·¯ç”±</h3><ul><li><p><strong>é—®é¢˜</strong>ï¼šå¤šæ¬¡è·³è½¬åŒä¸€å‚æ•°é¡µé¢æ—¶ï¼Œé‡å¤è°ƒç”¨ <code>addRoutes</code> ä¼šå¯¼è‡´è·¯ç”±å†—ä½™ï¼›</p></li><li><p><strong>è§£å†³</strong>ï¼šè·³è½¬å‰é€šè¿‡éå† <code>$router.options.routes</code> æ£€æŸ¥è·¯ç”±æ˜¯å¦å·²å­˜åœ¨ï¼ˆå‚è€ƒæ­¥éª¤ 1 ä¸­çš„ <code>checkRouteExists</code> å‡½æ•°ï¼‰ï¼Œä»…åœ¨è·¯ç”±ä¸å­˜åœ¨æ—¶æ³¨å†Œã€‚</p></li></ul><h3 id="3-ç»„ä»¶-name-ä¸è·¯ç”±-name-åŒæ­¥"><a href="#3-ç»„ä»¶-name-ä¸è·¯ç”±-name-åŒæ­¥" class="headerlink" title="3. ç»„ä»¶ name ä¸è·¯ç”± name åŒæ­¥"></a>3. ç»„ä»¶ name ä¸è·¯ç”± name åŒæ­¥</h3><ul><li><p><strong>é—®é¢˜</strong>ï¼šè‹¥ç»„ä»¶ <code>name</code> ä¸è·¯ç”± <code>name</code> ä¸ä¸€è‡´ï¼Œkeep-alive æ— æ³•åŒ¹é…ç¼“å­˜ï¼Œå¯¼è‡´åˆ‡æ¢æ ‡ç­¾é¡µé‡å¤åˆ·æ–°ï¼›</p></li><li><p><strong>è§£å†³</strong>ï¼šåŠ¨æ€å¯¼å…¥ç»„ä»¶æ—¶ï¼Œå¿…é¡»ä¿®æ”¹ <code>module.default.name</code> ä¸º <code>uniqueRouteName</code>ï¼ˆå‚è€ƒæ­¥éª¤ 1 ä¸­çš„ç»„ä»¶å¯¼å…¥é€»è¾‘ï¼‰ã€‚</p></li></ul><h3 id="4-å‚æ•°ä¼ é€’æ–¹å¼é€‰æ‹©"><a href="#4-å‚æ•°ä¼ é€’æ–¹å¼é€‰æ‹©" class="headerlink" title="4. å‚æ•°ä¼ é€’æ–¹å¼é€‰æ‹©"></a>4. å‚æ•°ä¼ é€’æ–¹å¼é€‰æ‹©</h3><ul><li><p><strong>query ä¼ é€’</strong>ï¼šæ¨èä½¿ç”¨ï¼Œå‚æ•°ä¼šæ˜¾ç¤ºåœ¨ URL ä¸­ï¼Œåˆ·æ–°é¡µé¢å‚æ•°ä¸ä¸¢å¤±ï¼ˆå¦‚ <code>?hostname=è·¯ç”±å™¨A&amp;city=åŒ—äº¬</code>ï¼‰ï¼›</p></li><li><p><strong>params ä¼ é€’</strong>ï¼šå‚æ•°ä¸ä¼šæ˜¾ç¤ºåœ¨ URL ä¸­ï¼Œä½†åˆ·æ–°é¡µé¢åå‚æ•°ä¼šä¸¢å¤±ï¼Œéœ€é…åˆ <code>localStorage</code> æˆ– <code>sessionStorage</code> å­˜å‚¨å‚æ•°ã€‚</p></li></ul><h3 id="5-ç¼“å­˜æ¸…ç†"><a href="#5-ç¼“å­˜æ¸…ç†" class="headerlink" title="5. ç¼“å­˜æ¸…ç†"></a>5. ç¼“å­˜æ¸…ç†</h3><ul><li><p>å…³é—­æ ‡ç­¾é¡µæ—¶ï¼Œvue-element-admin ä¼šè‡ªåŠ¨ä» <code>cachedViews</code> ä¸­ç§»é™¤å¯¹åº”çš„ç»„ä»¶ <code>name</code>ï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç†ï¼›</p></li><li><p>è‹¥éœ€æ‰‹åŠ¨æ¸…ç†æŸæ ‡ç­¾é¡µç¼“å­˜ï¼Œå¯è°ƒç”¨ vuex çš„ <code>tagsView/delView</code> æ–¹æ³•ï¼š</p></li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">// æ‰‹åŠ¨æ¸…ç†æŒ‡å®šè·¯ç”±çš„ç¼“å­˜</span><br><br><span class="hljs-built_in">this</span>.<span class="hljs-variable">$store</span>.dispatch(<span class="hljs-string">&#x27;tagsView/delView&#x27;</span>, <span class="hljs-built_in">this</span>.<span class="hljs-variable">$route</span>);<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ–¹æ¡ˆä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯"><a href="#å…­ã€æ–¹æ¡ˆä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯" class="headerlink" title="å…­ã€æ–¹æ¡ˆä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯"></a>å…­ã€æ–¹æ¡ˆä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯</h2><h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><ol><li><p><strong>å®Œæ•´æ€§</strong>ï¼šåŒæ—¶è§£å†³ â€œå¤šæ ‡ç­¾é¡µå…±å­˜â€â€œæ ‡é¢˜å¸¦å‚æ•°â€â€œåˆ‡æ¢ä¸åˆ·æ–°â€ ä¸‰å¤§æ ¸å¿ƒéœ€æ±‚ï¼›</p></li><li><p><strong>å…¼å®¹æ€§</strong>ï¼šå®Œå…¨é€‚é… vue-element-admin åŸæœ‰æ¶æ„ï¼Œæ— éœ€ä¿®æ”¹æ¡†æ¶æ ¸å¿ƒä»£ç ï¼›</p></li><li><p><strong>å¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå¤šå‚æ•°ç»„åˆï¼ˆå¦‚è®¾å¤‡å + åŸå¸‚ + æ—¶é—´ï¼‰ï¼Œåªéœ€æ‰©å±• <code>uniqueKey</code> ç”Ÿæˆé€»è¾‘ï¼›</p></li><li><p><strong>æ€§èƒ½ä¼˜</strong>ï¼šåŸºäº keep-alive ç¼“å­˜ï¼Œå‡å°‘é‡å¤æ¥å£è¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p></li></ol><h3 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h3><ol><li><p>åŒä¸€é¡µé¢æ¨¡æ¿åŠ è½½ä¸åŒå‚æ•°æ•°æ®ï¼ˆå¦‚è®¾å¤‡è¯¦æƒ…ã€ç”¨æˆ·è¯¦æƒ…ã€è®¢å•è¯¦æƒ…ï¼‰ï¼›</p></li><li><p>éœ€åŒæ—¶æ‰“å¼€å¤šä¸ªåŒç±»é¡µé¢ï¼ˆå¦‚åŒæ—¶æŸ¥çœ‹å¤šä¸ªè®¾å¤‡çš„ç«¯å£çŠ¶æ€ã€å¤šä¸ªç”¨æˆ·çš„è®¢å•è®°å½•ï¼‰ï¼›</p></li><li><p>è¦æ±‚åˆ‡æ¢é¡µé¢ä¿ç•™æ“ä½œçŠ¶æ€ï¼ˆå¦‚è¡¨æ ¼åˆ†é¡µã€ç­›é€‰æ¡ä»¶ã€è¡¨å•å¡«å†™è¿›åº¦ï¼‰ã€‚</p></li></ol><blockquote><p>ï¼ˆæ³¨ï¼šæ–‡æ¡£éƒ¨åˆ†å†…å®¹å¯èƒ½ç”± AI ç”Ÿæˆï¼‰</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åä¸º/æ–°åä¸‰ACLæ ¸å¿ƒç¬”è®°</title>
    <link href="/2025/09/10/%E5%8D%8E%E4%B8%BA%E6%96%B0%E5%8D%8E%E4%B8%89ACL%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/"/>
    <url>/2025/09/10/%E5%8D%8E%E4%B8%BA%E6%96%B0%E5%8D%8E%E4%B8%89ACL%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="åä¸º-æ–°åä¸‰ACLæ ¸å¿ƒç¬”è®°"><a href="#åä¸º-æ–°åä¸‰ACLæ ¸å¿ƒç¬”è®°" class="headerlink" title="åä¸º&#x2F;æ–°åä¸‰ACLæ ¸å¿ƒç¬”è®°"></a>åä¸º&#x2F;æ–°åä¸‰ACLæ ¸å¿ƒç¬”è®°</h1><h3 id="ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€"><a href="#ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€" class="headerlink" title="ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€"></a><strong>ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€</strong></h3><p>åä¸º&#x2F;æ–°åä¸‰çš„ACLä¸æ€ç§‘&#x2F;é”æ·æ ¸å¿ƒæ€æƒ³å®Œå…¨ä¸€è‡´ï¼Œæ˜¯ç½‘ç»œæµé‡çš„â€œé—¨å«â€ã€‚å®ƒæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œâ€œä½ æ˜¯è°ï¼Ÿï¼ˆæºIPï¼‰â€ã€â€œä½ è¦å»å“ªï¼Ÿï¼ˆç›®çš„IPï¼‰â€ã€â€œä½ å»å¹²ä»€ä¹ˆï¼Ÿï¼ˆåè®®&#x2F;ç«¯å£ï¼‰â€çš„ç›˜é—®ï¼Œå¹¶å†³å®šæ”¾è¡Œï¼ˆ<code>permit</code>ï¼‰æˆ–é˜»æ‹¦ï¼ˆ<code>deny</code>ï¼‰ã€‚</p><ul><li><strong>å·¥ä½œåŸç†</strong>ï¼šè‡ªä¸Šè€Œä¸‹ï¼Œé€æ¡åŒ¹é…ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸå°±ç«‹åˆ»æ‰§è¡ŒåŠ¨ä½œï¼Œå¹¶<strong>åœæ­¢</strong>åç»­åŒ¹é…ã€‚</li><li><strong>é»˜è®¤è§„åˆ™</strong>ï¼šæ‰€æœ‰ACLæœ«å°¾éƒ½æœ‰ä¸€æ¡çœ‹ä¸è§çš„ <code>rule deny ip source any destination any</code>ï¼Œå³â€œé»˜è®¤ç¦æ­¢æ‰€æœ‰â€ã€‚</li></ul><hr><h3 id="äºŒã€é€šé…ç¬¦æ©ç ï¼ˆåæ©ç ï¼‰ï¼šåä¸º-åä¸‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§"><a href="#äºŒã€é€šé…ç¬¦æ©ç ï¼ˆåæ©ç ï¼‰ï¼šåä¸º-åä¸‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§" class="headerlink" title="äºŒã€é€šé…ç¬¦æ©ç ï¼ˆåæ©ç ï¼‰ï¼šåä¸º&#x2F;åä¸‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§"></a><strong>äºŒã€é€šé…ç¬¦æ©ç ï¼ˆåæ©ç ï¼‰ï¼šåä¸º&#x2F;åä¸‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§</strong></h3><p>åä¸º&#x2F;æ–°åä¸‰è®¾å¤‡ä½¿ç”¨<strong>é€šé…ç¬¦æ©ç </strong>ï¼Œå…¶å«ä¹‰å’ŒåŠŸèƒ½ä¸æ€ç§‘&#x2F;é”æ·<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚<code>0</code>è¡¨ç¤ºéœ€åŒ¹é…ï¼Œ<code>1</code>è¡¨ç¤ºä¸å…³å¿ƒã€‚</p><table><thead><tr><th align="left">ä¾‹å­</th><th align="left">é€šé…ç¬¦æ©ç </th><th align="left">è§£é‡Š</th><th align="left">ç­‰æ•ˆå†™æ³•</th></tr></thead><tbody><tr><td align="left"><code>192.168.1.1 0</code></td><td align="left"><code>0</code></td><td align="left">åŒ¹é…<strong>å”¯ä¸€</strong>çš„ä¸»æœº <code>192.168.1.1</code></td><td align="left"><code>source 192.168.1.1 0</code></td></tr><tr><td align="left"><code>192.168.1.0 0.0.0.255</code></td><td align="left"><code>0.0.0.255</code></td><td align="left">åŒ¹é… <code>192.168.1.0</code> ç½‘æ®µçš„æ‰€æœ‰ä¸»æœº</td><td align="left"></td></tr><tr><td align="left"><code>0.0.0.0 255.255.255.255</code></td><td align="left"><code>255.255.255.255</code></td><td align="left">åŒ¹é…<strong>ä»»ä½•</strong>IPåœ°å€</td><td align="left"><code>any</code></td></tr></tbody></table><hr><h3 id="ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®"><a href="#ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®" class="headerlink" title="ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®"></a><strong>ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®</strong></h3><p>åä¸º&#x2F;æ–°åä¸‰çš„ACLä½“ç³»é‡‡ç”¨**â€œç±»å‹é©±åŠ¨â€** çš„ä¸¥æ ¼åˆ†ç±»ï¼Œæ¯ç§ç±»å‹æœ‰å›ºå®šçš„ç¼–å·èŒƒå›´ï¼ŒåŠŸèƒ½åˆ’åˆ†éå¸¸æ¸…æ™°ã€‚</p><h4 id="1-åŸºæœ¬ACL-Basic-ACL-2000-2999"><a href="#1-åŸºæœ¬ACL-Basic-ACL-2000-2999" class="headerlink" title="1. åŸºæœ¬ACL (Basic ACL, 2000-2999)"></a><strong>1. åŸºæœ¬ACL (Basic ACL, 2000-2999)</strong></h4><p><strong>åŠŸèƒ½</strong>ï¼šç­‰åŒäºæ€ç§‘çš„<strong>æ ‡å‡†ACL</strong>ã€‚ä»…æ ¹æ®<strong>æºIPåœ°å€</strong>è¿›è¡Œè¿‡æ»¤ã€‚<br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šå…è®¸å†…ç½‘ï¼ˆ<code>192.168.1.0/24</code>ï¼‰ä¸Šç½‘ï¼Œç¦æ­¢å…¶ä»–æ‰€æœ‰æµé‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">// åˆ›å»ºåŸºæœ¬ACL 2000<br>acl number 2000<br> rule 5 permit <span class="hljs-built_in">source</span> 192.168.1.0 0.0.0.255  // rule 5ä¸ºè§„åˆ™ç¼–å·ï¼Œå¯è‡ªå®šä¹‰<br>// åº”ç”¨ACLï¼šé€šå¸¸åº”ç”¨åœ¨ç¦»â€œç›®çš„åœ°â€è¿‘çš„æ¥å£å…¥æ–¹å‘ï¼ˆinboundï¼‰<br>interface GigabitEthernet0/0/1<br> traffic-filter inbound acl 2000<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šæ§åˆ¶ç²’åº¦ç²—ï¼Œæ”¾ç½®åœ¨ç¦»æºå¤ªè¿‘çš„åœ°æ–¹å¯èƒ½ä¼šè¯¯ä¼¤å…¶ä»–åˆæ³•æµé‡ã€‚</p><h4 id="2-é«˜çº§ACL-Advanced-ACL-3000-3999"><a href="#2-é«˜çº§ACL-Advanced-ACL-3000-3999" class="headerlink" title="2. é«˜çº§ACL (Advanced ACL, 3000-3999)"></a><strong>2. é«˜çº§ACL (Advanced ACL, 3000-3999)</strong></h4><p><strong>åŠŸèƒ½</strong>ï¼šç­‰åŒäºæ€ç§‘çš„<strong>æ‰©å±•ACL</strong>ã€‚å¯æ ¹æ®<strong>æºIPã€ç›®çš„IPã€åè®®ã€æºç«¯å£ã€ç›®çš„ç«¯å£</strong>ç­‰è¿›è¡Œç²¾ç»†è¿‡æ»¤ã€‚<strong>æ˜¯ä¼ä¸šç½‘ç»œä¸­çš„ç»å¯¹ä¸»åŠ›ã€‚</strong><br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šå…è®¸å†…ç½‘è®¿é—®å¤–éƒ¨Webå’ŒDNSï¼Œä½†ç¦æ­¢è®¿é—®å¤–éƒ¨MySQLæ•°æ®åº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">// åˆ›å»ºé«˜çº§ACL 3000<br>acl number 3000<br> rule 5 permit tcp <span class="hljs-built_in">source</span> 192.168.1.0 0.0.0.255 destination any destination-port eq 80<br> rule 10 permit tcp <span class="hljs-built_in">source</span> 192.168.1.0 0.0.0.255 destination any destination-port eq 443<br> rule 15 permit udp <span class="hljs-built_in">source</span> any destination any destination-port eq 53<br> rule 20 deny tcp <span class="hljs-built_in">source</span> any destination any destination-port eq 3306<br> rule 25 permit ip <span class="hljs-built_in">source</span> any destination any // æ˜¾å¼å…è®¸å…¶ä»–æ‰€æœ‰æµé‡<br>// åº”ç”¨ACLï¼šé€šå¸¸åº”ç”¨åœ¨ç¦»â€œæºâ€è¿‘çš„æ¥å£å‡ºæ–¹å‘ï¼ˆoutboundï¼‰<br>interface GigabitEthernet0/0/2<br> traffic-filter outbound acl 3000<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šè§„åˆ™é¡ºåºè‡³å…³é‡è¦ï¼<code>rule</code> åçš„ç¼–å·ï¼ˆå¦‚5,10,15ï¼‰å†³å®šäº†åŒ¹é…é¡ºåºï¼Œç¼–å·è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><h4 id="3-äºŒå±‚ACL-Layer-2-ACL-4000-4999"><a href="#3-äºŒå±‚ACL-Layer-2-ACL-4000-4999" class="headerlink" title="3. äºŒå±‚ACL (Layer 2 ACL, 4000-4999)"></a><strong>3. äºŒå±‚ACL (Layer 2 ACL, 4000-4999)</strong></h4><p><strong>åŠŸèƒ½</strong>ï¼šåä¸º&#x2F;åä¸‰ç‰¹è‰²åŠŸèƒ½ã€‚åŸºäº<strong>æº&#x2F;ç›®çš„MACåœ°å€ã€ä»¥å¤ªç½‘åè®®ç±»å‹</strong>ç­‰äºŒå±‚ä¿¡æ¯è¿›è¡Œè¿‡æ»¤ã€‚<br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šé˜»æ­¢æ¥è‡ªç‰¹å®šMACåœ°å€ <code>aabb-ccdd-eeff</code> çš„æ‰€æœ‰æµé‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">// åˆ›å»ºäºŒå±‚ACL 4000<br>acl number 4000<br> rule 5 deny dest-mac aabb-ccdd-eeff ffff-ffff-ffff // ç›®çš„MACåŒ¹é…<br> rule 10 permit<br>// åº”ç”¨ACL<br>interface GigabitEthernet0/0/3<br> traffic-filter inbound acl 4000<br></code></pre></td></tr></table></figure><h4 id="4-ç”¨æˆ·è‡ªå®šä¹‰ACL-User-defined-ACL-5000-5999"><a href="#4-ç”¨æˆ·è‡ªå®šä¹‰ACL-User-defined-ACL-5000-5999" class="headerlink" title="4. ç”¨æˆ·è‡ªå®šä¹‰ACL (User-defined ACL, 5000-5999)"></a><strong>4. ç”¨æˆ·è‡ªå®šä¹‰ACL (User-defined ACL, 5000-5999)</strong></h4><p><strong>åŠŸèƒ½</strong>ï¼šé€šè¿‡æŠ¥æ–‡å¤´åç§»é‡è¿›è¡Œæ¯”ç‰¹ä½çº§åˆ«çš„é«˜çº§åŒ¹é…ï¼Œç”¨äºè¿‡æ»¤ç‰¹å®šæ ¼å¼çš„åè®®æŠ¥æ–‡ã€‚<strong>å±äºä¸“å®¶çº§åŠŸèƒ½ã€‚</strong><br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šåŒ¹é…IPæŠ¥æ–‡å¤´åè®®å­—æ®µä¸º1ï¼ˆICMPï¼‰çš„æŠ¥æ–‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 5000<br> rule 5 permit ip-head 8 1 0x01 0xff // åŒ¹é…åè®®å­—æ®µä¸º1<br></code></pre></td></tr></table></figure><hr><h3 id="å››ã€é«˜çº§ACLï¼ˆ3000ç³»åˆ—ï¼‰çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£"><a href="#å››ã€é«˜çº§ACLï¼ˆ3000ç³»åˆ—ï¼‰çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£" class="headerlink" title="å››ã€é«˜çº§ACLï¼ˆ3000ç³»åˆ—ï¼‰çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£"></a><strong>å››ã€é«˜çº§ACLï¼ˆ3000ç³»åˆ—ï¼‰çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£</strong></h3><p>â€œäº”å…ƒç»„â€æ˜¯é«˜çº§ACLè¿›è¡Œç²¾ç»†æµé‡æ§åˆ¶çš„åŸºçŸ³ã€‚åä¸ºçš„é…ç½®è¯­æ³•æ›´æ˜¾å¼ï¼Œè¦æ±‚æ˜ç¡®å†™å‡º <code>source</code>ã€<code>destination</code>ã€<code>destination-port</code> ç­‰å…³é”®å­—ã€‚</p><h4 id="é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼"><a href="#é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼" class="headerlink" title="é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼"></a><strong>é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rule [rule-id] permit/deny [protocol] <span class="hljs-built_in">source</span> &#123;src-addr wildcard&#125; [src-port op port] destination &#123;dest-addr wildcard&#125; [dest-port op port]<br></code></pre></td></tr></table></figure><h4 id="è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹"><a href="#è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹" class="headerlink" title="è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹"></a><strong>è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹</strong></h4><table><thead><tr><th align="left">è¯­æ³•å…ƒç´ </th><th align="left">è¯´æ˜ä¸å¯é€‰å€¼</th><th align="left">åä¸º&#x2F;åä¸‰é…ç½®ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong><code>[protocol]</code></strong></td><td align="left"><code>ip</code>, <code>tcp</code>, <code>udp</code>, <code>icmp</code>, <code>gre</code></td><td align="left"><code>permit tcp ...</code></td></tr><tr><td align="left"><strong><code>source &#123;src-addr wildcard&#125;</code></strong></td><td align="left">å®šä¹‰æºIPåœ°å€èŒƒå›´ï¼Œå¿…é¡»å¸¦ <code>source</code> å…³é”®å­—</td><td align="left"><code>source 192.168.1.0 0.0.0.255</code></td></tr><tr><td align="left"><strong><code>[src-port op port]</code></strong></td><td align="left"><strong>å¯é€‰</strong>ã€‚å®šä¹‰æºç«¯å£ï¼Œè¿ç®—ç¬¦ï¼š<code>eq</code>, <code>gt</code>, <code>lt</code>, <code>range</code></td><td align="left"><code>source-port eq 80</code></td></tr><tr><td align="left"><strong><code>destination &#123;dest-addr wildcard&#125;</code></strong></td><td align="left">å®šä¹‰ç›®çš„IPåœ°å€èŒƒå›´ï¼Œå¿…é¡»å¸¦ <code>destination</code> å…³é”®å­—</td><td align="left"><code>destination any</code></td></tr><tr><td align="left"><strong><code>[dest-port op port]</code></strong></td><td align="left"><strong>å¯é€‰</strong>ã€‚å®šä¹‰ç›®çš„ç«¯å£ï¼Œè¿ç®—ç¬¦åŒä¸Šã€‚</td><td align="left"><code>destination-port eq 443</code></td></tr></tbody></table><h4 id="ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»"><a href="#ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»" class="headerlink" title="ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»"></a><strong>ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»</strong></h4><p><strong>åœºæ™¯1ï¼šå…è®¸å†…ç½‘ç”¨æˆ·è®¿é—®å¤–éƒ¨æ‰€æœ‰WebæœåŠ¡ï¼ˆHTTP&#x2F;HTTPSï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 3001<br> rule 5 permit tcp <span class="hljs-built_in">source</span> 192.168.1.0 0.0.0.255 destination any destination-port eq 80<br> rule 10 permit tcp <span class="hljs-built_in">source</span> 192.168.1.0 0.0.0.255 destination any destination-port eq 443<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯2ï¼šå…è®¸æ¥è‡ªä»»ä½•åœ°æ–¹çš„DNSæŸ¥è¯¢è¯·æ±‚ï¼ˆUDP 53ï¼‰åˆ°è¾¾DNSæœåŠ¡å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 3002<br> rule 5 permit udp <span class="hljs-built_in">source</span> any destination 192.168.1.53 0 destination-port eq 53<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯3ï¼šå…è®¸ç®¡ç†å‘˜IPï¼ˆ172.16.1.100ï¼‰è¿œç¨‹ç®¡ç†æ‰€æœ‰æœåŠ¡å™¨ï¼ˆ10.0.0.0&#x2F;24ç½‘æ®µï¼‰çš„SSHæœåŠ¡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 3003<br> rule 5 permit tcp <span class="hljs-built_in">source</span> 172.16.1.100 0 destination 10.0.0.0 0.0.0.255 destination-port eq 22<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯4ï¼šä½¿ç”¨ <code>established</code> å…³é”®å­—å…è®¸å¤–éƒ¨WebæœåŠ¡å™¨è¿”å›çš„æµé‡ï¼ˆTCPè¿æ¥åº”ç­”åŒ…ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">acl number 3004<br> rule 5 permit tcp <span class="hljs-built_in">source</span> any destination 192.168.1.0 0.0.0.255 tcp-established<br></code></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šåä¸º&#x2F;åä¸‰ä½¿ç”¨ <code>tcp-established</code> å…³é”®å­—æ¥å®ç°ä¸æ€ç§‘ <code>established</code> ç›¸åŒçš„åŠŸèƒ½ã€‚</em></p><hr><h3 id="äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ"><a href="#äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ" class="headerlink" title="äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ"></a><strong>äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</strong></h3><table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><strong>åŸºæœ¬ACL (2000-2999)</strong></th><th align="left"><strong>é«˜çº§ACL (3000-3999)</strong></th><th align="left"><strong>äºŒå±‚ACL (4000-4999)</strong></th></tr></thead><tbody><tr><td align="left"><strong>åŒ¹é…ä¾æ®</strong></td><td align="left">ä»…æºIP</td><td align="left">äº”å…ƒç»„ï¼ˆæºIPã€ç›®çš„IPã€åè®®ã€ç«¯å£ï¼‰</td><td align="left">æº&#x2F;ç›®çš„MACåœ°å€</td></tr><tr><td align="left"><strong>æ§åˆ¶ç²’åº¦</strong></td><td align="left">ç²—</td><td align="left"><strong>ç»†ï¼ˆç»å¯¹ä¸»åŠ›ï¼‰</strong></td><td align="left">ç‰¹æ®Š</td></tr><tr><td align="left"><strong>è§„åˆ™ç®¡ç†</strong></td><td align="left"><strong>ä¼˜ï¼ˆè§„åˆ™æœ‰åºå·ï¼Œå¯ç¼–è¾‘ï¼‰</strong></td><td align="left"><strong>ä¼˜ï¼ˆè§„åˆ™æœ‰åºå·ï¼Œå¯ç¼–è¾‘ï¼‰</strong></td><td align="left"><strong>ä¼˜ï¼ˆè§„åˆ™æœ‰åºå·ï¼Œå¯ç¼–è¾‘ï¼‰</strong></td></tr><tr><td align="left"><strong>ä¼ä¸šåº”ç”¨</strong></td><td align="left">è¾ƒå°‘</td><td align="left"><strong>å¼ºçƒˆæ¨è</strong></td><td align="left">ç‰¹å®šåœºæ™¯</td></tr></tbody></table><p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼š</p><ol><li><strong>æœ€å°æƒé™</strong>ï¼šåªæ”¾è¡Œå¿…è¦çš„æµé‡ã€‚</li><li><strong>ç²¾ç¡®ä¼˜å…ˆ</strong>ï¼šå°†æœ€å…·ä½“çš„è§„åˆ™æ”¾åœ¨å‰é¢ï¼ˆä½¿ç”¨è¾ƒå°çš„ <code>rule-id</code>ï¼‰ã€‚</li><li><strong>é è¿‘æº&#x2F;ç›®çš„</strong>ï¼šåŸºæœ¬ACLè¿‘ç›®çš„ï¼Œé«˜çº§ACLè¿‘æºã€‚</li><li><strong>ç±»å‹é€‰æ‹©</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©æ­£ç¡®çš„ACLç±»å‹ï¼Œ<strong>é«˜çº§ACL 3000ç³»åˆ—</strong>é€‚ç”¨ç»å¤§éƒ¨åˆ†åœºæ™¯ã€‚</li><li><strong>å…ˆè§„åˆ’åé…ç½®</strong>ï¼šåœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œè§„åˆ’å¥½ <code>rule-id</code> å’Œè§„åˆ™ï¼Œå†ç²˜è´´åˆ°è®¾å¤‡ã€‚</li></ol><hr><h3 id="å…­ã€é…ç½®Checklist-å¸¸è§é”™è¯¯"><a href="#å…­ã€é…ç½®Checklist-å¸¸è§é”™è¯¯" class="headerlink" title="å…­ã€é…ç½®Checklist &amp; å¸¸è§é”™è¯¯"></a><strong>å…­ã€é…ç½®Checklist &amp; å¸¸è§é”™è¯¯</strong></h3><p><strong>é…ç½®å‰ Checklistï¼š</strong></p><ul><li><input disabled="" type="checkbox"> éœ€æ±‚æ˜¯å¦æ˜ç¡®ï¼Ÿï¼ˆå…è®¸ä»€ä¹ˆï¼Ÿæ‹’ç»ä»€ä¹ˆï¼Ÿï¼‰</li><li><input disabled="" type="checkbox"> æ˜¯å¦é€‰æ‹©äº†æ­£ç¡®çš„ACLç±»å‹ï¼Ÿï¼ˆåŸºæœ¬ã€é«˜çº§è¿˜æ˜¯äºŒå±‚ï¼Ÿï¼‰</li><li><input disabled="" type="checkbox"> <code>rule-id</code> çš„é¡ºåºæ˜¯å¦æœ€ä¼˜ï¼Ÿï¼ˆç²¾ç¡®è§„åˆ™IDå°ï¼‰</li><li><input disabled="" type="checkbox"> æ˜¯å¦æ˜¾å¼æ·»åŠ äº† <code>rule deny ip source any destination any</code>ï¼Ÿ</li><li><input disabled="" type="checkbox"> é€šé…ç¬¦æ©ç è®¡ç®—æ˜¯å¦æ­£ç¡®ï¼Ÿ</li><li><input disabled="" type="checkbox"> ACLåº”ç”¨çš„æ–¹å‘ï¼ˆ<code>inbound</code>&#x2F;<code>outbound</code>ï¼‰å’Œæ¥å£æ˜¯å¦æ­£ç¡®ï¼Ÿ</li></ul><p><strong>å¸¸è§é”™è¯¯ï¼š</strong></p><ul><li><strong>é”™è¯¯1</strong>ï¼šåœ¨åŸºæœ¬ACLï¼ˆ2000ï¼‰ä¸­å°è¯•é…ç½®ç›®çš„ç«¯å£æˆ–åè®®ã€‚</li><li><strong>é”™è¯¯2</strong>ï¼šæ··æ·†æ¥å£åº”ç”¨æ–¹å‘ï¼Œ<code>inbound</code> å’Œ <code>outbound</code> åº”ç”¨é”™è¯¯ã€‚</li><li><strong>é”™è¯¯3</strong>ï¼šå¿˜è®°äº†ACLæœ«å°¾çš„éšå¼æ‹’ç»æ‰€æœ‰ï¼Œå¯¼è‡´é¢„æœŸå¤–çš„æµé‡è¢«æ‹’ç»ã€‚</li><li><strong>é”™è¯¯4</strong>ï¼šé”™è¯¯ç†è§£äº†é€šé…ç¬¦æ©ç ï¼ŒåŒ¹é…äº†é”™è¯¯çš„IPèŒƒå›´ã€‚</li><li><strong>é”™è¯¯5</strong>ï¼šåœ¨é…ç½®ä¸­é—æ¼äº†å…³é”®å­—ï¼Œå¦‚ <code>source</code>, <code>destination</code>, <code>destination-port</code>ã€‚åä¸ºè¯­æ³•è¦æ±‚æ›´æ˜¾å¼ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ€ç§‘/é”æ·ACLæ ¸å¿ƒç¬”è®°</title>
    <link href="/2025/09/10/%E6%80%9D%E7%A7%91%E9%94%90%E6%8D%B7ACL%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/"/>
    <url>/2025/09/10/%E6%80%9D%E7%A7%91%E9%94%90%E6%8D%B7ACL%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="æ€ç§‘-é”æ·ACLæ ¸å¿ƒç¬”è®°"><a href="#æ€ç§‘-é”æ·ACLæ ¸å¿ƒç¬”è®°" class="headerlink" title="æ€ç§‘&#x2F;é”æ·ACLæ ¸å¿ƒç¬”è®°"></a>æ€ç§‘&#x2F;é”æ·ACLæ ¸å¿ƒç¬”è®°</h1><h3 id="ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€"><a href="#ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€" class="headerlink" title="ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€"></a><strong>ä¸€ã€ACLæ ¸å¿ƒæ€æƒ³ï¼šç½‘ç»œçš„â€œé—¨å«â€</strong></h3><p>æƒ³è±¡ACLæ˜¯å…¬å¸å¤§é—¨çš„ä¿å®‰ï¼Œä»–æ‰‹æŒä¸€ä»½â€œè§„åˆ™æ¸…å•â€ï¼Œå¯¹æ¯ä¸€ä¸ªæ•°æ®åŒ…è¿›è¡Œç›˜é—®ï¼šâ€œä½ æ˜¯è°ï¼Ÿï¼ˆæºIPï¼‰â€ã€â€œä½ è¦å»å“ªï¼Ÿï¼ˆç›®çš„IPï¼‰â€ã€â€œä½ å»å¹²ä»€ä¹ˆï¼Ÿï¼ˆåè®®&#x2F;ç«¯å£ï¼‰â€ã€‚æ ¹æ®æ¸…å•ä¸Šçš„è§„åˆ™ï¼Œå†³å®šæ˜¯æ”¾è¡Œï¼ˆ<code>permit</code>ï¼‰è¿˜æ˜¯é˜»æ‹¦ï¼ˆ<code>deny</code>ï¼‰ã€‚</p><ul><li><strong>å·¥ä½œåŸç†</strong>ï¼šè‡ªä¸Šè€Œä¸‹ï¼Œé€æ¡åŒ¹é…ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸå°±ç«‹åˆ»æ‰§è¡ŒåŠ¨ä½œï¼Œå¹¶<strong>åœæ­¢</strong>åç»­åŒ¹é…ã€‚</li><li><strong>é»˜è®¤è§„åˆ™</strong>ï¼šæ‰€æœ‰ACLæœ«å°¾éƒ½æœ‰ä¸€æ¡çœ‹ä¸è§çš„ <code>deny ip any any</code>ï¼Œå³â€œé»˜è®¤ç¦æ­¢æ‰€æœ‰â€ã€‚</li></ul><hr><h3 id="äºŒã€é€šé…ç¬¦æ©ç ï¼šä¿å®‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§"><a href="#äºŒã€é€šé…ç¬¦æ©ç ï¼šä¿å®‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§" class="headerlink" title="äºŒã€é€šé…ç¬¦æ©ç ï¼šä¿å®‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§"></a><strong>äºŒã€é€šé…ç¬¦æ©ç ï¼šä¿å®‰çš„â€œæ¨¡ç³ŠåŒ¹é…â€æŠ€å·§</strong></h3><p>é€šé…ç¬¦æ©ç ï¼ˆWildcard Maskï¼‰å†³å®šIPåœ°å€çš„å“ªäº›ä½å¿…é¡»ç²¾ç¡®åŒ¹é…ï¼ˆ<code>0</code>ï¼‰ï¼Œå“ªäº›ä½å¯ä»¥å¿½ç•¥ä¸ç®¡ï¼ˆ<code>1</code>ï¼‰ã€‚</p><table><thead><tr><th align="left">ä¾‹å­</th><th align="left">é€šé…ç¬¦æ©ç </th><th align="left">è§£é‡Š</th><th align="left">ç­‰æ•ˆå†™æ³•</th></tr></thead><tbody><tr><td align="left"><code>192.168.1.1 0.0.0.0</code></td><td align="left"><code>0.0.0.0</code></td><td align="left">åŒ¹é…<strong>å”¯ä¸€</strong>çš„ä¸»æœº <code>192.168.1.1</code></td><td align="left"><code>host 192.168.1.1</code></td></tr><tr><td align="left"><code>192.168.1.0 0.0.0.255</code></td><td align="left"><code>0.0.0.255</code></td><td align="left">åŒ¹é… <code>192.168.1.0</code> ç½‘æ®µçš„æ‰€æœ‰ä¸»æœºï¼ˆ<code>192.168.1.0</code> - <code>192.168.1.255</code>ï¼‰</td><td align="left"></td></tr><tr><td align="left"><code>0.0.0.0 255.255.255.255</code></td><td align="left"><code>255.255.255.255</code></td><td align="left">åŒ¹é…<strong>ä»»ä½•</strong>IPåœ°å€</td><td align="left"><code>any</code></td></tr></tbody></table><hr><h3 id="ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®"><a href="#ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®" class="headerlink" title="ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®"></a><strong>ä¸‰ã€ACLç±»å‹è¯¦è§£ä¸å®æˆ˜é…ç½®</strong></h3><h3 id="1-æ ‡å‡†ACLï¼šåªçœ‹å‡ºèº«ï¼ˆæºIPï¼‰"><a href="#1-æ ‡å‡†ACLï¼šåªçœ‹å‡ºèº«ï¼ˆæºIPï¼‰" class="headerlink" title="1. æ ‡å‡†ACLï¼šåªçœ‹å‡ºèº«ï¼ˆæºIPï¼‰"></a><strong>1. æ ‡å‡†ACLï¼šåªçœ‹å‡ºèº«ï¼ˆæºIPï¼‰</strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šåªæ£€æŸ¥æ•°æ®åŒ…çš„<strong>æºIPåœ°å€</strong>ã€‚æ§åˆ¶ç²—ç²’åº¦ï¼Œç›¸å½“äºä¿å®‰åªé—®ä½ â€œæ˜¯å“ªä¸ªå…¬å¸çš„ï¼Ÿâ€ã€‚<br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šå…è®¸å†…ç½‘ï¼ˆ<code>192.168.1.0/24</code>ï¼‰ä¸Šç½‘ï¼Œç¦æ­¢å…¶ä»–æ‰€æœ‰æµé‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">! åˆ›å»ºæ ‡å‡†ç¼–å·ACL 10<br>access-list 10 permit 192.168.1.0 0.0.0.255<br>! åº”ç”¨ACLï¼šé€šå¸¸åº”ç”¨åœ¨ç¦»â€œç›®çš„åœ°â€è¿‘çš„æ¥å£å…¥æ–¹å‘ï¼ˆINBOUNDï¼‰<br>interface GigabitEthernet0/1<br> ip access-group 10 <span class="hljs-keyword">in</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šå› å…¶æ§åˆ¶ç²—ï¼Œæ”¾åœ¨ç¦»æºå¤ªè¿‘çš„åœ°æ–¹å¯èƒ½ä¼šè¯¯ä¼¤å…¶ä»–åˆæ³•æµé‡ã€‚</p><h3 id="2-æ‰©å±•ACLï¼šç›˜é—®ä¸€åˆ‡ï¼ˆäº”å…ƒç»„ï¼‰"><a href="#2-æ‰©å±•ACLï¼šç›˜é—®ä¸€åˆ‡ï¼ˆäº”å…ƒç»„ï¼‰" class="headerlink" title="2. æ‰©å±•ACLï¼šç›˜é—®ä¸€åˆ‡ï¼ˆäº”å…ƒç»„ï¼‰"></a><strong>2. æ‰©å±•ACLï¼šç›˜é—®ä¸€åˆ‡ï¼ˆäº”å…ƒç»„ï¼‰</strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šæ£€æŸ¥<strong>æºIPã€ç›®çš„IPã€åè®®ã€æºç«¯å£ã€ç›®çš„ç«¯å£</strong>ã€‚æ§åˆ¶ç»†ç²’åº¦ï¼Œä¿å®‰ä¼šè¯¦ç»†ç›˜é—®â€œä½ æ˜¯è°ï¼Ÿå»å“ªï¼Ÿå¹²ä»€ä¹ˆï¼Ÿâ€ã€‚<br><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šå…è®¸å†…ç½‘è®¿é—®å¤–éƒ¨Webå’ŒDNSï¼Œä½†ç¦æ­¢è®¿é—®å¤–éƒ¨MySQLæ•°æ®åº“ï¼Œå¹¶å…è®¸Pingã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">! åˆ›å»ºæ‰©å±•ç¼–å·ACL 110<br>access-list 110 permit tcp 192.168.1.0 0.0.0.255 any eq 80<br>access-list 110 permit tcp 192.168.1.0 0.0.0.255 any eq 443<br>access-list 110 permit udp any any eq 53<br>access-list 110 deny tcp any any eq 3306<br>access-list 110 permit icmp any any<br>access-list 110 deny ip any any ! æ˜¾å¼æ‹’ç»æ‰€æœ‰ï¼Œä¾¿äºæŸ¥çœ‹è®¡æ•°å™¨<br>! åº”ç”¨ACLï¼šé€šå¸¸åº”ç”¨åœ¨ç¦»â€œæºâ€è¿‘çš„æ¥å£å‡ºæ–¹å‘ï¼ˆOUTBOUNDï¼‰<br>interface GigabitEthernet0/0<br> ip access-group 110 out<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šè§„åˆ™é¡ºåºè‡³å…³é‡è¦ï¼ç²¾ç¡®çš„è§„åˆ™è¦æ”¾åœ¨ä¸Šé¢ï¼Œå®½æ³›çš„è§„åˆ™ï¼ˆå¦‚<code>permit ip any any</code>ï¼‰æ”¾åœ¨ä¸‹é¢ã€‚</p><h3 id="3-å‘½åACLï¼ˆä¼ä¸šçº§é¦–é€‰ï¼‰ï¼šå¯ç¼–è¾‘çš„æ™ºèƒ½æ¸…å•"><a href="#3-å‘½åACLï¼ˆä¼ä¸šçº§é¦–é€‰ï¼‰ï¼šå¯ç¼–è¾‘çš„æ™ºèƒ½æ¸…å•" class="headerlink" title="3. å‘½åACLï¼ˆä¼ä¸šçº§é¦–é€‰ï¼‰ï¼šå¯ç¼–è¾‘çš„æ™ºèƒ½æ¸…å•"></a><strong>3. å‘½åACLï¼ˆä¼ä¸šçº§é¦–é€‰ï¼‰ï¼šå¯ç¼–è¾‘çš„æ™ºèƒ½æ¸…å•</strong></h3><p><strong>åŠŸèƒ½</strong>ï¼šæ ‡å‡†&#x2F;æ‰©å±•ACLçš„å¢å¼ºç‰ˆï¼Œç”¨åç§°è€Œéç¼–å·æ ‡è¯†ã€‚<strong>æ ¸å¿ƒä¼˜åŠ¿ï¼šå¯ä»¥è‡ªç”±æ’å…¥ã€åˆ é™¤å•æ¡è§„åˆ™</strong>ã€‚<strong>åˆ›å»ºæ—¶å¿…é¡»å£°æ˜ç±»å‹ï¼š<code>standard</code> æˆ– <code>extended</code></strong>ã€‚</p><h4 id="A-æ ‡å‡†å‘½åACL-ip-access-list-standard"><a href="#A-æ ‡å‡†å‘½åACL-ip-access-list-standard" class="headerlink" title="A. æ ‡å‡†å‘½åACL (ip access-list standard &lt;NAME&gt;)"></a><strong>A. æ ‡å‡†å‘½åACL (<code>ip access-list standard &lt;NAME&gt;</code>)</strong></h4><p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>RESTRICT-ACCESS</code> çš„ACLï¼Œé˜»æ­¢ç‰¹å®šç½‘æ®µ <code>192.168.5.0/24</code>ï¼Œå…è®¸å…¶ä»–æ‰€æœ‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip access-list standard RESTRICT-ACCESS<br> deny 192.168.5.0 0.0.0.255<br> permit any<br>interface GigabitEthernet0/1<br> ip access-group RESTRICT-ACCESS <span class="hljs-keyword">in</span><br></code></pre></td></tr></table></figure><h4 id="B-æ‰©å±•å‘½åACL-ip-access-list-extended"><a href="#B-æ‰©å±•å‘½åACL-ip-access-list-extended" class="headerlink" title="B. æ‰©å±•å‘½åACL (ip access-list extended &lt;NAME&gt;)"></a><strong>B. æ‰©å±•å‘½åACL (<code>ip access-list extended &lt;NAME&gt;</code>)</strong></h4><p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>WEB-SERVER-POLICY</code> çš„ACLã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip access-list extended WEB-SERVER-POLICY<br> remark --- å…è®¸å…¬ä¼—è®¿é—®WebæœåŠ¡ ---<br> 10 permit tcp any host 203.0.113.10 eq 80<br> 20 permit tcp any host 203.0.113.10 eq 443<br> remark --- å…è®¸ITéƒ¨é—¨è¿›è¡ŒSSHç®¡ç† ---<br> 30 permit tcp 172.16.1.0 0.0.0.255 host 203.0.113.10 eq 22<br> remark --- æ˜¾å¼æ‹’ç»å¹¶è®°å½•å…¶ä»–æ‰€æœ‰è®¿é—® ---<br> 40 deny ip any host 203.0.113.10 <span class="hljs-built_in">log</span><br>interface GigabitEthernet0/0<br> ip access-group WEB-SERVER-POLICY <span class="hljs-keyword">in</span><br></code></pre></td></tr></table></figure><p><strong>ç¼–è¾‘æ“ä½œæ¼”ç¤º</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip access-list extended WEB-SERVER-POLICY<br> 25 permit tcp any host 203.0.113.10 eq 25 ! æ’å…¥è§„åˆ™<br> no 30 ! åˆ é™¤è§„åˆ™<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š<code>ip access-list extended 2001</code> ä¸­çš„ <code>2001</code> æ˜¯<strong>åç§°</strong>ï¼Œä¸æ˜¯ç¼–å·ï¼</p><hr><h3 id="å››ã€æ‰©å±•ACL-Extended-ACL-çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£"><a href="#å››ã€æ‰©å±•ACL-Extended-ACL-çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£" class="headerlink" title="å››ã€æ‰©å±•ACL(Extended ACL)çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£"></a><strong>å››ã€æ‰©å±•ACL(Extended ACL)çš„æ ¸å¿ƒï¼šäº”å…ƒç»„è¯­æ³•è¯¦è§£</strong></h3><p>â€œäº”å…ƒç»„â€æ˜¯æ‰©å±•ACLè¿›è¡Œç²¾ç»†æµé‡æ§åˆ¶çš„åŸºçŸ³ï¼Œå®ƒå®šä¹‰äº†åŒ¹é…ä¸€ä¸ªæ•°æ®åŒ…æ‰€éœ€çš„äº”ä¸ªå…³é”®å…ƒç´ ã€‚</p><p><strong>äº”å…ƒç»„ (5-tuple) æŒ‡çš„æ˜¯ï¼š</strong></p><ol><li><strong>æºIPåœ°å€ (Source IP Address)</strong></li><li><strong>ç›®çš„IPåœ°å€ (Destination IP Address)</strong></li><li><strong>åè®® (Protocol)</strong></li><li><strong>æºç«¯å£ (Source Port)</strong></li><li><strong>ç›®çš„ç«¯å£ (Destination Port)</strong></li></ol><h4 id="é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼"><a href="#é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼" class="headerlink" title="é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼"></a><strong>é€šç”¨å‘½ä»¤è¯­æ³•æ ¼å¼</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">access-list &lt;100-199&gt; permit/deny &lt;åè®®&gt; &lt;æºIP&gt; &lt;æºé€šé…ç¬¦&gt; [è¿ç®—ç¬¦ æºç«¯å£] &lt;ç›®çš„IP&gt; &lt;ç›®é€šé…ç¬¦&gt; [è¿ç®—ç¬¦ ç›®çš„ç«¯å£]<br></code></pre></td></tr></table></figure><h4 id="è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹"><a href="#è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹" class="headerlink" title="è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹"></a><strong>è¯­æ³•å…ƒç´ æ‹†è§£ä¸ç¤ºä¾‹</strong></h4><table><thead><tr><th align="left">è¯­æ³•å…ƒç´ </th><th align="left">è¯´æ˜ä¸å¯é€‰å€¼</th><th align="left">é…ç½®ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong><code>&lt;åè®®&gt;</code></strong></td><td align="left"><code>ip</code>, <code>tcp</code>, <code>udp</code>, <code>icmp</code>, <code>gre</code></td><td align="left"><code>permit tcp ...</code></td></tr><tr><td align="left"><strong><code>&lt;æºIP&gt; &lt;æºé€šé…ç¬¦&gt;</code></strong></td><td align="left">å®šä¹‰æºIPåœ°å€èŒƒå›´</td><td align="left"><code>any</code>, <code>host 192.168.1.1</code></td></tr><tr><td align="left"><strong><code>[è¿ç®—ç¬¦ æºç«¯å£]</code></strong></td><td align="left"><strong>å¯é€‰</strong>ã€‚<code>eq</code>, <code>gt</code>, <code>lt</code>, <code>range</code></td><td align="left"><code>eq 80</code>, <code>range 5000 5010</code></td></tr><tr><td align="left"><strong><code>&lt;ç›®çš„IP&gt; &lt;ç›®é€šé…ç¬¦&gt;</code></strong></td><td align="left">å®šä¹‰ç›®çš„IPåœ°å€èŒƒå›´</td><td align="left"><code>any</code>, <code>host 10.0.0.10</code></td></tr><tr><td align="left"><strong><code>[è¿ç®—ç¬¦ ç›®çš„ç«¯å£]</code></strong></td><td align="left"><strong>å¯é€‰</strong>ã€‚å®šä¹‰ç›®çš„ç«¯å£ã€‚è¿ç®—ç¬¦åŒä¸Šã€‚</td><td align="left"><code>eq 443</code>, <code>eq www</code></td></tr></tbody></table><h4 id="ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»"><a href="#ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»" class="headerlink" title="ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»"></a><strong>ç»¼åˆé…ç½®ç¤ºä¾‹ä¸åœºæ™¯è§£è¯»</strong></h4><p><strong>åœºæ™¯1ï¼šå…è®¸å†…ç½‘ç”¨æˆ·è®¿é—®å¤–éƒ¨æ‰€æœ‰WebæœåŠ¡ï¼ˆHTTP&#x2F;HTTPSï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">access-list 110 permit tcp 192.168.1.0 0.0.0.255 any eq 80<br>access-list 110 permit tcp 192.168.1.0 0.0.0.255 any eq 443<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯2ï¼šå…è®¸æ¥è‡ªä»»ä½•åœ°æ–¹çš„DNSæŸ¥è¯¢è¯·æ±‚ï¼ˆUDP 53ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">access-list 111 permit udp any host 192.168.1.53 eq 53<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯3ï¼šåœ¨å‘½åACLä¸­ï¼Œå…è®¸ç®¡ç†å‘˜IPè¿œç¨‹ç®¡ç†æ‰€æœ‰æœåŠ¡å™¨çš„SSHå’ŒRDPæœåŠ¡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip access-list extended ADMIN-ACCESS<br> permit tcp host 172.16.1.100 10.0.0.0 0.0.0.255 eq 22<br> permit tcp host 172.16.1.100 10.0.0.0 0.0.0.255 eq 3389<br></code></pre></td></tr></table></figure><p><strong>åœºæ™¯4ï¼šä½¿ç”¨ <code>established</code> å…³é”®å­—å…è®¸å¤–éƒ¨WebæœåŠ¡å™¨è¿”å›çš„æµé‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">access-list 112 permit tcp any 192.168.1.0 0.0.0.255 established<br></code></pre></td></tr></table></figure><hr><h3 id="äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ"><a href="#äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ" class="headerlink" title="äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ"></a><strong>äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</strong></h3><table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><strong>æ ‡å‡†ACL</strong></th><th align="left"><strong>æ‰©å±•ACL</strong></th><th align="left"><strong>æ ‡å‡†å‘½åACL</strong></th><th align="left"><strong>æ‰©å±•å‘½åACL</strong></th></tr></thead><tbody><tr><td align="left"><strong>åŒ¹é…ä¾æ®</strong></td><td align="left">ä»…æºIP</td><td align="left">äº”å…ƒç»„</td><td align="left">ä»…æºIP</td><td align="left">äº”å…ƒç»„</td></tr><tr><td align="left"><strong>æ§åˆ¶ç²’åº¦</strong></td><td align="left">ç²—</td><td align="left">ç»†</td><td align="left">ç²—</td><td align="left">ç»†</td></tr><tr><td align="left"><strong>å¯ç¼–è¾‘æ€§</strong></td><td align="left">å·®</td><td align="left">å·®</td><td align="left"><strong>ä¼˜</strong></td><td align="left"><strong>ä¼˜</strong></td></tr><tr><td align="left"><strong>å¯è¯»æ€§</strong></td><td align="left">å·®</td><td align="left">å·®</td><td align="left"><strong>ä¼˜</strong></td><td align="left"><strong>ä¼˜</strong></td></tr><tr><td align="left"><strong>ä¼ä¸šåº”ç”¨</strong></td><td align="left">å°‘</td><td align="left">è¾ƒå°‘</td><td align="left">ä¸€èˆ¬</td><td align="left"><strong>å¼ºçƒˆæ¨è</strong></td></tr></tbody></table><p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼š</p><ol><li><strong>æœ€å°æƒé™</strong>ï¼šåªæ”¾è¡Œå¿…è¦çš„æµé‡ã€‚</li><li><strong>ç²¾ç¡®ä¼˜å…ˆ</strong>ï¼šå°†æœ€å…·ä½“çš„è§„åˆ™æ”¾åœ¨é¡¶éƒ¨ã€‚</li><li><strong>é è¿‘æº&#x2F;ç›®çš„</strong>ï¼šæ ‡å‡†ACLè¿‘ç›®çš„ï¼Œæ‰©å±•ACLè¿‘æºã€‚</li><li><strong>å‘½åACL</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸€å¾‹ä½¿ç”¨å‘½åACLï¼Œå…¶ä¸­<strong>æ‰©å±•å‘½åACL</strong>æ˜¯ç»å¯¹ä¸»åŠ›ã€‚</li><li><strong>å…ˆè§„åˆ’åé…ç½®</strong>ï¼šåœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œå†™å¥½è§„åˆ™ï¼Œå†ç²˜è´´åˆ°è®¾å¤‡ã€‚</li></ol><hr><h3 id="å…­ã€é…ç½®Checklist-å¸¸è§é”™è¯¯"><a href="#å…­ã€é…ç½®Checklist-å¸¸è§é”™è¯¯" class="headerlink" title="å…­ã€é…ç½®Checklist &amp; å¸¸è§é”™è¯¯"></a><strong>å…­ã€é…ç½®Checklist &amp; å¸¸è§é”™è¯¯</strong></h3><p><strong>é…ç½®å‰ Checklistï¼š</strong></p><ul><li><input disabled="" type="checkbox"> éœ€æ±‚æ˜¯å¦æ˜ç¡®ï¼Ÿï¼ˆå…è®¸ä»€ä¹ˆï¼Ÿæ‹’ç»ä»€ä¹ˆï¼Ÿï¼‰</li><li><input disabled="" type="checkbox"> æ˜¯å¦é€‰æ‹©äº†æ­£ç¡®çš„ACLç±»å‹ï¼Ÿï¼ˆæ ‡å‡†è¿˜æ˜¯æ‰©å±•ï¼Ÿï¼‰</li><li><input disabled="" type="checkbox"> è§„åˆ™é¡ºåºæ˜¯å¦æœ€ä¼˜ï¼Ÿï¼ˆç²¾ç¡®è§„åˆ™åœ¨ä¸Šï¼‰</li><li><input disabled="" type="checkbox"> æ˜¯å¦æ˜¾å¼æ·»åŠ äº† <code>deny ip any any</code> å¹¶è®°å½•äº†æ—¥å¿—ï¼Ÿ</li><li><input disabled="" type="checkbox"> é€šé…ç¬¦æ©ç è®¡ç®—æ˜¯å¦æ­£ç¡®ï¼Ÿ</li><li><input disabled="" type="checkbox"> ACLåº”ç”¨çš„æ–¹å‘ï¼ˆin&#x2F;outï¼‰å’Œæ¥å£æ˜¯å¦æ­£ç¡®ï¼Ÿ</li></ul><p><strong>å¸¸è§é”™è¯¯ï¼š</strong></p><ul><li><strong>é”™è¯¯1</strong>ï¼šä¸º <code>icmp</code> æˆ– <code>ip</code> åè®®é…ç½®äº†ç«¯å£ã€‚</li><li><strong>é”™è¯¯2</strong>ï¼šå°†æ ‡å‡†ACLæ”¾ç½®åœ¨ç¦»æºå¤ªè¿‘çš„ä½ç½®ï¼Œè¯¯ä¼¤å…¶ä»–æµé‡ã€‚</li><li><strong>é”™è¯¯3</strong>ï¼šå¿˜è®°äº†ACLæœ«å°¾çš„éšå¼æ‹’ç»æ‰€æœ‰ï¼Œå¯¼è‡´é¢„æœŸå¤–çš„æµé‡è¢«æ‹’ç»ã€‚</li><li><strong>é”™è¯¯4</strong>ï¼šé”™è¯¯ç†è§£äº†é€šé…ç¬¦æ©ç ï¼ŒåŒ¹é…äº†é”™è¯¯çš„IPèŒƒå›´ã€‚</li><li><strong>é”™è¯¯5</strong>ï¼šåœ¨ç¼–å·ACLä¸­å°è¯•ä½¿ç”¨ <code>no</code> å‘½ä»¤åˆ é™¤å•æ¡è§„åˆ™ï¼Œå¯¼è‡´æ•´ä¸ªACLè¢«åˆ é™¤ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>OSPFåè®®</title>
    <link href="/2025/08/28/OSPF%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/08/28/OSPF%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="OSPFåè®®æ ¸å¿ƒæŠ€æœ¯ç¬”è®°"><a href="#OSPFåè®®æ ¸å¿ƒæŠ€æœ¯ç¬”è®°" class="headerlink" title="OSPFåè®®æ ¸å¿ƒæŠ€æœ¯ç¬”è®°"></a>OSPFåè®®æ ¸å¿ƒæŠ€æœ¯ç¬”è®°</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>OSPFï¼ˆOpen Shortest Path Firstï¼‰æ˜¯ä¸€ç§åŸºäºé“¾è·¯çŠ¶æ€çš„å†…éƒ¨ç½‘å…³è·¯ç”±åè®®ï¼Œå®ƒé€šè¿‡æ„å»ºå…¨ç½‘ç»Ÿä¸€çš„æ‹“æ‰‘å›¾å¹¶ç‹¬ç«‹è®¡ç®—æœ€ä¼˜è·¯å¾„æ¥å®ç°é«˜æ•ˆçš„è·¯ç”±é€‰æ‹©ã€‚</p><h2 id="å®Œæ•´å·¥ä½œæµç¨‹"><a href="#å®Œæ•´å·¥ä½œæµç¨‹" class="headerlink" title="å®Œæ•´å·¥ä½œæµç¨‹"></a>å®Œæ•´å·¥ä½œæµç¨‹</h2><h3 id="ç¬¬ä¸€é˜¶æ®µï¼šé‚»å±…å‘ç°ä¸å…³ç³»å»ºç«‹"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šé‚»å±…å‘ç°ä¸å…³ç³»å»ºç«‹" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šé‚»å±…å‘ç°ä¸å…³ç³»å»ºç«‹"></a>ç¬¬ä¸€é˜¶æ®µï¼šé‚»å±…å‘ç°ä¸å…³ç³»å»ºç«‹</h3><p><strong>æ ¸å¿ƒæœºåˆ¶ï¼šHelloåè®®</strong></p><ul><li>æ¯å°OSPFè·¯ç”±å™¨å®šæœŸå‘ç»„æ’­åœ°å€224.0.0.5å‘é€HelloåŒ…</li><li>HelloåŒ…åŒ…å«Router IDã€Area IDã€è®¤è¯ä¿¡æ¯ç­‰å‚æ•°</li><li>å‚æ•°åŒ¹é…çš„è·¯ç”±å™¨æˆä¸ºé‚»å±…ï¼ˆ2-WayçŠ¶æ€ï¼‰</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šå°±åƒä¼šè®®å¼€å§‹å‰ï¼Œä¸ä¼šè€…äº’ç›¸æ‰“æ‹›å‘¼ç¡®è®¤èº«ä»½å’Œå‚ä¼šèµ„æ ¼</p><h3 id="ç¬¬äºŒé˜¶æ®µï¼šæ‹“æ‰‘ä¿¡æ¯äº¤æ¢"><a href="#ç¬¬äºŒé˜¶æ®µï¼šæ‹“æ‰‘ä¿¡æ¯äº¤æ¢" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šæ‹“æ‰‘ä¿¡æ¯äº¤æ¢"></a>ç¬¬äºŒé˜¶æ®µï¼šæ‹“æ‰‘ä¿¡æ¯äº¤æ¢</h3><p><strong>åœ¨å¹¿æ’­ç½‘ç»œä¸­ï¼š</strong></p><ol><li><p><strong>DR&#x2F;BDRé€‰ä¸¾</strong>ï¼ˆéæŠ¢å å¼ï¼‰ï¼š</p><ul><li>æ¯”è¾ƒæ¥å£ä¼˜å…ˆçº§ï¼ˆé»˜è®¤1ï¼Œ0è¡¨ç¤ºä¸å‚ä¸ï¼‰</li><li>ä¼˜å…ˆçº§ç›¸åŒåˆ™æ¯”è¾ƒRouter ID</li><li>é€‰ä¸¾å‡ºæŒ‡å®šè·¯ç”±å™¨(DR)å’Œå¤‡ä»½æŒ‡å®šè·¯ç”±å™¨(BDR)</li></ul></li><li><p><strong>é‚»æ¥å…³ç³»å»ºç«‹</strong>ï¼š</p><ul><li>æ™®é€šè·¯ç”±å™¨(DROther)åªä¸DR&#x2F;BDRå»ºç«‹é‚»æ¥å…³ç³»</li><li>é€šè¿‡DBDã€LSRã€LSUã€LSAckåŒ…äº¤æ¢é“¾è·¯çŠ¶æ€ä¿¡æ¯</li></ul></li></ol><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šå¤§å‹ä¼šè®®é€‰ä¸¾å‡ºä¸»æŒäººå’Œå‰¯ä¸»æŒäººï¼Œæ™®é€šå‚ä¼šè€…åªéœ€å‘ä¸»æŒäººæ±‡æŠ¥ï¼Œç”±ä¸»æŒäººç»Ÿä¸€å‘å¸ƒä¿¡æ¯</p><h3 id="ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®åº“åŒæ­¥"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®åº“åŒæ­¥" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®åº“åŒæ­¥"></a>ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®åº“åŒæ­¥</h3><p><strong>LSAäº¤æ¢è¿‡ç¨‹ï¼š</strong></p><ol><li>äº¤æ¢DBDåŒ…ï¼ˆæ•°æ®åº“æè¿°ï¼‰ - ç›¸å½“äºç›®å½•</li><li>è¯·æ±‚ç¼ºå¤±çš„LSAï¼ˆLSRï¼‰</li><li>å‘é€å®Œæ•´çš„LSAï¼ˆLSUï¼‰</li><li>ç¡®è®¤æ¥æ”¶ï¼ˆLSAckï¼‰</li></ol><p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>LSA</strong>ï¼šé“¾è·¯çŠ¶æ€é€šå‘Šï¼Œæè¿°ç½‘ç»œæ‹“æ‰‘çš„åŸºæœ¬å•å…ƒ</li><li><strong>LSDB</strong>ï¼šé“¾è·¯çŠ¶æ€æ•°æ®åº“ï¼Œå­˜å‚¨æ‰€æœ‰LSAæ„æˆå®Œæ•´æ‹“æ‰‘å›¾</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šå‚ä¼šè€…é€šè¿‡ä¸»æŒäººäº¤æ¢ä¼šè®®èµ„æ–™ï¼Œç¡®ä¿æ¯ä¸ªäººéƒ½æ‹¥æœ‰å®Œæ•´çš„ä¼šè®®ææ–™</p><h3 id="ç¬¬å››é˜¶æ®µï¼šè·¯ç”±è®¡ç®—"><a href="#ç¬¬å››é˜¶æ®µï¼šè·¯ç”±è®¡ç®—" class="headerlink" title="ç¬¬å››é˜¶æ®µï¼šè·¯ç”±è®¡ç®—"></a>ç¬¬å››é˜¶æ®µï¼šè·¯ç”±è®¡ç®—</h3><p><strong>SPFç®—æ³•æ‰§è¡Œï¼š</strong></p><ol><li>æ¯å°è·¯ç”±å™¨ä»¥è‡ªå·±ä¸ºæ ¹èŠ‚ç‚¹</li><li>æ ¹æ®LSDBæ„å»ºæ‹“æ‰‘å›¾</li><li>è¿è¡ŒDijkstraç®—æ³•è®¡ç®—æœ€çŸ­è·¯å¾„æ ‘</li><li>å°†æœ€ä¼˜è·¯å¾„è£…å…¥è·¯ç”±è¡¨</li></ol><p><strong>Costè®¡ç®—</strong>ï¼šå‚è€ƒå¸¦å®½&#x2F;æ¥å£å¸¦å®½ï¼ˆé»˜è®¤å‚è€ƒå¸¦å®½100Mbpsï¼‰</p><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šæ¯ä¸ªå‚ä¼šè€…æ ¹æ®ä¼šè®®ææ–™ç‹¬ç«‹è§„åˆ’è‡ªå·±çš„æœ€ä½³è¡ŒåŠ¨æ–¹æ¡ˆ</p><h3 id="ç¬¬äº”é˜¶æ®µï¼šç»´æŠ¤ä¸æ›´æ–°"><a href="#ç¬¬äº”é˜¶æ®µï¼šç»´æŠ¤ä¸æ›´æ–°" class="headerlink" title="ç¬¬äº”é˜¶æ®µï¼šç»´æŠ¤ä¸æ›´æ–°"></a>ç¬¬äº”é˜¶æ®µï¼šç»´æŠ¤ä¸æ›´æ–°</h3><p><strong>è§¦å‘æ›´æ–°æœºåˆ¶ï¼š</strong></p><ul><li>æ£€æµ‹åˆ°æ‹“æ‰‘å˜åŒ–ç«‹å³ç”Ÿæˆæ–°LSA</li><li>é€šè¿‡DRå‘å…¨ç½‘æ³›æ´ªæ›´æ–°ï¼ˆ224.0.0.5ï¼‰</li><li>æ¯å°è·¯ç”±å™¨ç¡®è®¤æ¥æ”¶ï¼ˆLSAckï¼‰</li><li>æ”¶åˆ°æ›´æ–°çš„è·¯ç”±å™¨é‡æ–°è¿è¡ŒSPFç®—æ³•</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šä»»ä½•æƒ…å†µå˜åŒ–éƒ½é€šè¿‡ä¸»æŒäººç«‹å³é€šæŠ¥å…¨ä½“ï¼Œæ¯ä¸ªäººç›¸åº”è°ƒæ•´è‡ªå·±çš„è®¡åˆ’</p><h2 id="å¤šåŒºåŸŸè®¾è®¡"><a href="#å¤šåŒºåŸŸè®¾è®¡" class="headerlink" title="å¤šåŒºåŸŸè®¾è®¡"></a>å¤šåŒºåŸŸè®¾è®¡</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒºåŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒºåŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒºåŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦åˆ†åŒºåŸŸï¼Ÿ</h3><ul><li>å‡å°‘LSDBå¤§å°å’ŒSPFè®¡ç®—èŒƒå›´</li><li>é™åˆ¶æ‹“æ‰‘å˜åŒ–çš„å½±å“èŒƒå›´</li><li>æé«˜ç½‘ç»œçš„å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§</li></ul><h3 id="åŒºåŸŸç»“æ„"><a href="#åŒºåŸŸç»“æ„" class="headerlink" title="åŒºåŸŸç»“æ„"></a>åŒºåŸŸç»“æ„</h3><p><strong>éª¨å¹²åŒºåŸŸï¼ˆArea 0ï¼‰</strong>ï¼š</p><ul><li>æ‰€æœ‰æµé‡çš„ä¸­æ¢</li><li>å¿…é¡»ä¿æŒè¿ç»­</li><li>æ‰€æœ‰ééª¨å¹²åŒºåŸŸå¿…é¡»ç›´æ¥è¿æ¥</li></ul><p><strong>ééª¨å¹²åŒºåŸŸ</strong>ï¼š</p><ul><li>æ ‡å‡†åŒºåŸŸã€æœ«èŠ‚åŒºåŸŸ(Stub)</li><li>å®Œå…¨æœ«èŠ‚åŒºåŸŸ(Totally Stubby)</li><li>NSSAåŒºåŸŸ</li></ul><h3 id="åŒºåŸŸé—´è·¯ç”±"><a href="#åŒºåŸŸé—´è·¯ç”±" class="headerlink" title="åŒºåŸŸé—´è·¯ç”±"></a>åŒºåŸŸé—´è·¯ç”±</h3><p><strong>å…³é”®è§’è‰²</strong>ï¼š</p><ul><li><strong>ABR</strong>ï¼šåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ï¼Œè¿æ¥å¤šä¸ªåŒºåŸŸ</li><li><strong>ASBR</strong>ï¼šè‡ªæ²»ç³»ç»Ÿè¾¹ç•Œè·¯ç”±å™¨ï¼Œè¿æ¥å¤–éƒ¨ç½‘ç»œ</li></ul><p><strong>LSAç±»å‹ä½œç”¨</strong>ï¼š</p><ul><li>Type 1&#x2F;2ï¼šåŒºåŸŸå†…æ‹“æ‰‘ç»†èŠ‚</li><li>Type 3ï¼šåŒºåŸŸé—´è·¯ç”±æ±‡æ€»ï¼ˆABRäº§ç”Ÿï¼‰</li><li>Type 4&#x2F;5ï¼šå¤–éƒ¨è·¯ç”±ä¿¡æ¯ï¼ˆASBRäº§ç”Ÿï¼‰</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šå°†å¤§å‹ç»„ç»‡åˆ†ä¸ºå¤šä¸ªéƒ¨é—¨ï¼Œæ¯ä¸ªéƒ¨é—¨å†…éƒ¨å¤„ç†è‡ªå·±çš„äº‹åŠ¡ï¼Œéƒ¨é—¨é—´é€šè¿‡ç»ç†(ABR)è¿›è¡Œåè°ƒï¼Œä¸å¤–éƒ¨ç»„ç»‡çš„äº¤æµç”±ä¸“é—¨çš„å¯¹å¤–æ¥å£(ASBR)è´Ÿè´£</p><h2 id="æ ¸å¿ƒæœºåˆ¶æ·±åº¦è§£æ"><a href="#æ ¸å¿ƒæœºåˆ¶æ·±åº¦è§£æ" class="headerlink" title="æ ¸å¿ƒæœºåˆ¶æ·±åº¦è§£æ"></a>æ ¸å¿ƒæœºåˆ¶æ·±åº¦è§£æ</h2><h3 id="1-ä¸ºä»€ä¹ˆéœ€è¦DR-BDRï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦DR-BDRï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆéœ€è¦DR&#x2F;BDRï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆéœ€è¦DR&#x2F;BDRï¼Ÿ</h3><p><strong>é—®é¢˜æ ¹æº</strong>ï¼šè§£å†³å¤šè·¯è®¿é—®ç½‘ç»œä¸­çš„<strong>NÂ²é—®é¢˜</strong></p><ul><li>å¦‚æœæ²¡æœ‰DRï¼ŒNå°è·¯ç”±å™¨ä¼šå½¢æˆ<code>N(N-1)/2</code>ä¸ªé‚»æ¥å…³ç³»</li><li>å¯¼è‡´LSAè¢«é‡å¤å‘é€å¤šæ¬¡ï¼Œæµªè´¹å¸¦å®½èµ„æº</li><li>éš¾ä»¥ä¿è¯æ‰€æœ‰è·¯ç”±å™¨çš„LSDBåŒæ­¥ä¸€è‡´</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šå¦‚æœæ²¡æœ‰å‘è¨€äººï¼Œä»»ä½•ä¸€ä¸ªé˜Ÿå‘˜æœ‰æ¶ˆæ¯éƒ½è¦å¯¹æ‰€æœ‰äººå–Šä¸€éï¼Œç°åœºä¼šå……æ»¡é‡å¤çš„å™ªéŸ³å’Œæ··ä¹±ï¼Œæ— æ³•ä¿è¯ä¿¡æ¯ä¸€è‡´æ€§</p><h3 id="2-ä¸ºä»€ä¹ˆé€šè¿‡DRå¹¿æ’­ï¼Œè€Œä¸æ˜¯DROtherç›´æ¥å¹¿æ’­ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆé€šè¿‡DRå¹¿æ’­ï¼Œè€Œä¸æ˜¯DROtherç›´æ¥å¹¿æ’­ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆé€šè¿‡DRå¹¿æ’­ï¼Œè€Œä¸æ˜¯DROtherç›´æ¥å¹¿æ’­ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆé€šè¿‡DRå¹¿æ’­ï¼Œè€Œä¸æ˜¯DROtherç›´æ¥å¹¿æ’­ï¼Ÿ</h3><p><strong>å¯é æ€§è®¾è®¡</strong>ï¼š</p><ul><li>DRä½œä¸º<strong>å•ä¸€åˆ†å‘æº</strong>ï¼Œç¡®ä¿æ‰€æœ‰è·¯ç”±å™¨ä»åŒä¸€ä¸ªæƒå¨æ¥æºæ¥æ”¶ä¿¡æ¯</li><li>ç¡®è®¤æœºåˆ¶ç®€å•æ˜ç¡®ï¼šåªéœ€å‘DRç¡®è®¤æ¥æ”¶</li><li>é¿å…å¤æ‚çš„å…¨ç½‘ç¡®è®¤æœºåˆ¶ï¼Œå‡å°‘ç½‘ç»œå¼€é”€</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šè®°è€…ç›´æ¥å¯¹å…¨åœºå–Šè¯ï¼Œæ— æ³•çŸ¥é“è°æ²¡å¬æ¸…ã€‚é€šè¿‡å‘è¨€äººè¿›è¡Œå®˜æ–¹å¹¿æ’­ï¼Œæµç¨‹æ¸…æ™°ï¼Œæ¥æºæƒå¨ï¼Œå¹¶å¯é€ä¸ªç¡®è®¤</p><h3 id="3-å¦‚ä½•ä¿è¯æ‰€æœ‰è·¯ç”±å™¨çŸ¥é“æœ€æ–°å˜åŒ–ï¼Ÿ"><a href="#3-å¦‚ä½•ä¿è¯æ‰€æœ‰è·¯ç”±å™¨çŸ¥é“æœ€æ–°å˜åŒ–ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•ä¿è¯æ‰€æœ‰è·¯ç”±å™¨çŸ¥é“æœ€æ–°å˜åŒ–ï¼Ÿ"></a>3. å¦‚ä½•ä¿è¯æ‰€æœ‰è·¯ç”±å™¨çŸ¥é“æœ€æ–°å˜åŒ–ï¼Ÿ</h3><p><strong>å¯é çš„æ³›æ´ªæœºåˆ¶</strong>ï¼š</p><ul><li><strong>å®šå‘å‘é€</strong>ï¼šDROther â†’ DR (ä½¿ç”¨<code>224.0.0.6</code>)</li><li><strong>æƒå¨å¹¿æ’­</strong>ï¼šDR â†’ All (ä½¿ç”¨<code>224.0.0.5</code>)</li><li><strong>é€ä¸€ç¡®è®¤</strong>ï¼šå¯¹æ¯ä¸ªLSUåŒ…éƒ½å¿…é¡»å›å¤LSAckè¿›è¡Œç¡®è®¤</li><li><strong>å†—ä½™å¤‡ä»½</strong>ï¼šBDRå®æ—¶åŒæ­¥ï¼Œé˜²æ­¢DRå•ç‚¹æ•…éšœå¯¼è‡´ä¿¡æ¯ä¸¢å¤±</li></ul><p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼šæ¶ˆæ¯ä¼ é€’è·¯å¾„å›ºå®šä¸”å¯é ï¼ˆè®°è€…â†’å‘è¨€äººâ†’å…¨ä½“ï¼‰ï¼Œå‰¯å‘è¨€äººå…¨ç¨‹å¤‡ä»½ï¼Œç¡®ä¿ä¿¡æ¯åˆ†å‘è¿‡ç¨‹ä¸‡æ— ä¸€å¤±</p><h2 id="åè®®ç‰¹æ€§æ€»ç»“"><a href="#åè®®ç‰¹æ€§æ€»ç»“" class="headerlink" title="åè®®ç‰¹æ€§æ€»ç»“"></a>åè®®ç‰¹æ€§æ€»ç»“</h2><h3 id="æ ¸å¿ƒä¼˜åŠ¿"><a href="#æ ¸å¿ƒä¼˜åŠ¿" class="headerlink" title="æ ¸å¿ƒä¼˜åŠ¿"></a>æ ¸å¿ƒä¼˜åŠ¿</h3><ol><li><strong>å¿«é€Ÿæ”¶æ•›</strong>ï¼šè§¦å‘æ›´æ–°æœºåˆ¶ç¡®ä¿åŠæ—¶å“åº”ç½‘ç»œå˜åŒ–</li><li><strong>æ— ç¯è·¯ç”±</strong>ï¼šåŸºäºç»Ÿä¸€çš„æ‹“æ‰‘å›¾è®¡ç®—ï¼Œé¿å…è·¯ç”±ç¯è·¯</li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼šåˆ†å±‚åŒºåŸŸè®¾è®¡æ”¯æŒå¤§è§„æ¨¡ç½‘ç»œéƒ¨ç½²</li><li><strong>å¯é æ€§</strong>ï¼šå®Œå–„çš„ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ä¿è¯ä¿¡æ¯å¯é ä¼ é€’</li></ol><h3 id="è®¾è®¡å“²å­¦"><a href="#è®¾è®¡å“²å­¦" class="headerlink" title="è®¾è®¡å“²å­¦"></a>è®¾è®¡å“²å­¦</h3><p><strong>ç”¨ä¸­å¿ƒåŒ–çš„ä¿¡æ¯è°ƒåº¦ï¼ˆDR&#x2F;BDRï¼‰ä¿éšœåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿï¼ˆæ¯å°è·¯ç”±å™¨ç‹¬ç«‹è®¡ç®—ï¼‰çš„é«˜æ•ˆç¨³å®šè¿è¡Œï¼Œå†é€šè¿‡åˆ†å±‚åŒºåŸŸè®¾è®¡å®ç°å¤§è§„æ¨¡æ‰©å±•ã€‚</strong></p><p>è¿™ç§è®¾è®¡ç¡®ä¿äº†OSPFèƒ½å¤Ÿé€‚åº”ä»ä¸­å°å‹ä¼ä¸šç½‘ç»œåˆ°å¤§å‹è¿è¥å•†ç½‘ç»œçš„å„ç§è§„æ¨¡ç¯å¢ƒï¼Œåœ¨ä¿è¯è·¯ç”±å‡†ç¡®æ€§çš„åŒæ—¶æä¾›ä¼˜ç§€çš„æ€§èƒ½å’Œå¯é æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>STPç”Ÿæˆæ ‘åè®®</title>
    <link href="/2025/08/25/STP%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/"/>
    <url>/2025/08/25/STP%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="STPç”Ÿæˆæ ‘åè®®"><a href="#STPç”Ÿæˆæ ‘åè®®" class="headerlink" title="STPç”Ÿæˆæ ‘åè®®"></a><strong>STPç”Ÿæˆæ ‘åè®®</strong></h1><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸è¦è§£å†³çš„é—®é¢˜"><a href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸è¦è§£å†³çš„é—®é¢˜"></a><strong>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸è¦è§£å†³çš„é—®é¢˜</strong></h2><h3 id="1-åè®®å®šä½ä¸æ ¸å¿ƒçŸ›ç›¾"><a href="#1-åè®®å®šä½ä¸æ ¸å¿ƒçŸ›ç›¾" class="headerlink" title="1. åè®®å®šä½ä¸æ ¸å¿ƒçŸ›ç›¾"></a><strong>1. åè®®å®šä½ä¸æ ¸å¿ƒçŸ›ç›¾</strong></h3><ul><li><strong>å…¨ç§°</strong>ï¼šSpanning Tree Protocol</li><li><strong>æœ¬è´¨</strong>ï¼šäºŒå±‚é“¾è·¯ç®¡ç†åè®®ï¼Œé€šè¿‡<strong>é€»è¾‘é˜»å¡</strong>å†—ä½™é“¾è·¯ï¼Œæ„å»º <strong>â€œæ— ç¯ä¸”æœ‰å†—ä½™â€</strong> çš„äºŒå±‚ç½‘ç»œæ‹“æ‰‘ã€‚</li><li><strong>è§£å†³çš„æ ¸å¿ƒé—®é¢˜</strong>ï¼š<ol><li><strong>å¹¿æ’­é£æš´</strong>ï¼šæ¶ˆé™¤äºŒå±‚ç¯è·¯å¯¼è‡´çš„æ•°æ®åŒ…æ— é™å¾ªç¯è½¬å‘ã€‚</li><li><strong>MACè¡¨éœ‡è¡</strong>ï¼šé¿å…å› ç¯è·¯å¼•å‘çš„MACåœ°å€è¡¨é¢‘ç¹åˆ·æ–°ï¼Œå¯¼è‡´è®¾å¤‡æ— æ³•æ­£å¸¸è½¬å‘ã€‚</li><li><strong>å†—ä½™å¤‡ä»½</strong>ï¼šåœ¨ä¸»é“¾è·¯å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¤‡ä»½é“¾è·¯èƒ½å¤Ÿ<strong>è‡ªåŠ¨åˆ‡æ¢</strong>ï¼Œä¿éšœç½‘ç»œé«˜å¯ç”¨æ€§ã€‚</li></ol></li></ul><h2 id="äºŒã€STP-802-1D-è¯¦ç»†å·¥ä½œæµç¨‹ï¼ˆé€‰ä¸¾è¿‡ç¨‹ï¼‰"><a href="#äºŒã€STP-802-1D-è¯¦ç»†å·¥ä½œæµç¨‹ï¼ˆé€‰ä¸¾è¿‡ç¨‹ï¼‰" class="headerlink" title="äºŒã€STP (802.1D) è¯¦ç»†å·¥ä½œæµç¨‹ï¼ˆé€‰ä¸¾è¿‡ç¨‹ï¼‰"></a><strong>äºŒã€STP (802.1D) è¯¦ç»†å·¥ä½œæµç¨‹ï¼ˆé€‰ä¸¾è¿‡ç¨‹ï¼‰</strong></h2><p>STPé€šè¿‡ä¸¥æ ¼çš„<strong>é€‰ä¸¾è¿‡ç¨‹</strong>æ„å»ºæ— ç¯æ‹“æ‰‘ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒæ˜¯ä¸ºä¸€æ”¯å†›é˜Ÿå»ºç«‹æŒ‡æŒ¥ä½“ç³»ï¼š</p><h3 id="Step-1-é€‰ä¸¾æ ¹æ¡¥-Root-Bridge-æœ€é«˜æŒ‡æŒ¥å®˜"><a href="#Step-1-é€‰ä¸¾æ ¹æ¡¥-Root-Bridge-æœ€é«˜æŒ‡æŒ¥å®˜" class="headerlink" title="Step 1: é€‰ä¸¾æ ¹æ¡¥ (Root Bridge) - æœ€é«˜æŒ‡æŒ¥å®˜"></a><strong>Step 1: é€‰ä¸¾æ ¹æ¡¥ (Root Bridge) - æœ€é«˜æŒ‡æŒ¥å®˜</strong></h3><ul><li><strong>è§„åˆ™</strong>ï¼šæ‰€æœ‰äº¤æ¢æœºé€šè¿‡äº¤æ¢BPDUæŠ¥æ–‡ï¼Œæ¯”è¾ƒ<strong>æ¡¥ID (BID)</strong>ï¼Œå€¼æœ€å°çš„æˆä¸ºæ ¹æ¡¥ã€‚</li><li><strong>é€‰ä¸¾ç»†èŠ‚</strong>ï¼š<ul><li><strong>æ¡¥ID &#x3D; æ¡¥ä¼˜å…ˆçº§ (2å­—èŠ‚) + MACåœ°å€ (6å­—èŠ‚)</strong></li><li>å…ˆæ¯”è¾ƒä¼˜å…ˆçº§ï¼ˆé»˜è®¤ä¸º32768ï¼‰ï¼Œæ•°å€¼å°è€…ä¼˜ã€‚</li><li>è‹¥ä¼˜å…ˆçº§ç›¸åŒï¼Œåˆ™æ¯”è¾ƒMACåœ°å€ï¼ŒMACåœ°å€å°è€…ä¼˜ã€‚</li></ul></li><li><strong>ä¸ºä»€ä¹ˆ</strong>ï¼šæ ¹æ¡¥æ˜¯ç”Ÿæˆæ ‘çš„æ ¹ï¼Œæ˜¯æ‰€æœ‰è·¯å¾„è®¡ç®—çš„<strong>å”¯ä¸€å‚è€ƒç‚¹</strong>ï¼Œç¡®ä¿ç½‘ç»œä¸­æ²¡æœ‰å¾ªç¯è·¯å¾„ã€‚</li></ul><h3 id="Step-2-é€‰ä¸¾æ ¹ç«¯å£-Root-Port-æ¯å°äº¤æ¢æœºçš„â€œå›å®¶â€ä¹‹è·¯"><a href="#Step-2-é€‰ä¸¾æ ¹ç«¯å£-Root-Port-æ¯å°äº¤æ¢æœºçš„â€œå›å®¶â€ä¹‹è·¯" class="headerlink" title="Step 2: é€‰ä¸¾æ ¹ç«¯å£ (Root Port) - æ¯å°äº¤æ¢æœºçš„â€œå›å®¶â€ä¹‹è·¯"></a><strong>Step 2: é€‰ä¸¾æ ¹ç«¯å£ (Root Port) - æ¯å°äº¤æ¢æœºçš„â€œå›å®¶â€ä¹‹è·¯</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šåœ¨æ¯å°<strong>éæ ¹æ¡¥</strong>äº¤æ¢æœºä¸Šï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹ç«¯å£ã€‚è¿™æ˜¯åˆ°è¾¾æ ¹æ¡¥<strong>è·¯å¾„å¼€é”€æœ€å°</strong>çš„ç«¯å£ã€‚</li><li><strong>é€‰ä¸¾è§„åˆ™ (æŒ‰é¡ºåºæ¯”è¾ƒï¼Œç›´åˆ°å†³å‡ºèƒœè´Ÿ)</strong>ï¼š<ol><li><strong>æœ€ä½çš„æ ¹è·¯å¾„å¼€é”€</strong>ï¼šè®¡ç®—åˆ°è¾¾æ ¹æ¡¥çš„ç´¯è®¡è·¯å¾„å¼€é”€ï¼Œå€¼æœ€å°çš„ç«¯å£èƒœå‡ºã€‚</li><li><strong>æœ€å°çš„å‘é€è€…æ¡¥ID</strong>ï¼šå¦‚æœè·¯å¾„å¼€é”€ç›¸åŒï¼Œåˆ™é€‰æ‹©æ¥æ”¶åˆ°BPDUæŠ¥æ–‡ä¸­ï¼Œå‘é€æ–¹äº¤æ¢æœºBIDæœ€å°çš„é‚£ä¸ªç«¯å£ã€‚</li><li><strong>æœ€å°çš„å‘é€è€…ç«¯å£ID</strong>ï¼šå¦‚æœå‘é€æ–¹BIDä¹Ÿç›¸åŒï¼Œåˆ™é€‰æ‹©BPDUæŠ¥æ–‡ä¸­<strong>å‘é€æ–¹ç«¯å£ID</strong>æœ€å°çš„é‚£ä¸ªç«¯å£ã€‚</li><li><strong>æœ€å°çš„æœ¬æœºç«¯å£ID</strong>ï¼šå¦‚æœä»¥ä¸Šå…¨éƒ¨ç›¸åŒï¼ˆæå…¶ç½•è§ï¼‰ï¼Œåˆ™æœ€ç»ˆæ¯”è¾ƒæœ¬æœºè‡ªå·±çš„ç«¯å£IDï¼Œå°è€…èƒœå‡ºã€‚</li></ol></li><li><strong>æ ¸å¿ƒåŠŸèƒ½ï¼šæ•°æ®â€œä¸Šä¼ â€</strong>ã€‚æ ¹ç«¯å£è´Ÿè´£å°†æœ¬åœ°çš„æ•°æ®æµé‡ <strong>â€œå‘ä¸Šâ€å‘é€å¾€æ ¹æ¡¥æ–¹å‘</strong>ã€‚</li></ul><h3 id="Step-3-é€‰ä¸¾æŒ‡å®šç«¯å£-Designated-Port-é“¾è·¯ä¸Šçš„â€œæƒå¨å‡ºå£â€"><a href="#Step-3-é€‰ä¸¾æŒ‡å®šç«¯å£-Designated-Port-é“¾è·¯ä¸Šçš„â€œæƒå¨å‡ºå£â€" class="headerlink" title="Step 3: é€‰ä¸¾æŒ‡å®šç«¯å£ (Designated Port) - é“¾è·¯ä¸Šçš„â€œæƒå¨å‡ºå£â€"></a><strong>Step 3: é€‰ä¸¾æŒ‡å®šç«¯å£ (Designated Port) - é“¾è·¯ä¸Šçš„â€œæƒå¨å‡ºå£â€</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šåœ¨<strong>æ¯ä¸€ä¸ªç½‘ç»œ segmentï¼ˆé“¾è·¯ï¼‰</strong> ä¸Šï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªæŒ‡å®šç«¯å£ã€‚è¿™æ˜¯è¯¥é“¾è·¯ä¸Šè´Ÿè´£å‘ä¸‹æ¸¸è½¬å‘æ•°æ®çš„â€œæƒå¨â€ç«¯å£ã€‚</li><li><strong>é€‰ä¸¾è§„åˆ™</strong>ï¼šé“¾è·¯ä¸Šè¿æ¥çš„ä¸¤å°è®¾å¤‡ä¼šç›¸äº’æ¯”è¾ƒï¼Œè°æœ‰â€œæ›´ä¼˜â€çš„æ ¹è·¯å¾„ä¿¡æ¯ï¼Œè°çš„ç«¯å£å°±æˆä¸ºæŒ‡å®šç«¯å£ã€‚æ¯”è¾ƒè§„åˆ™ä¸æ ¹ç«¯å£é€‰ä¸¾ç±»ä¼¼ï¼Œä½†è§†è§’æ˜¯â€œè°çš„è·¯å¾„æ›´é€‚åˆä»£è¡¨è¿™æ¡é“¾è·¯â€ï¼š<ol><li><strong>æ›´ä½çš„æ ¹è·¯å¾„å¼€é”€</strong>ï¼šé€šè¿‡æœ¬æœºåˆ°è¾¾æ ¹æ¡¥çš„å¼€é”€æ›´å°çš„è®¾å¤‡ï¼Œå…¶ç«¯å£æˆä¸ºDPã€‚</li><li><strong>æ›´å°çš„æ¡¥ID</strong>ï¼šå¦‚æœæ ¹è·¯å¾„å¼€é”€ç›¸åŒï¼Œåˆ™BIDæ›´å°çš„äº¤æ¢æœºï¼Œå…¶ç«¯å£æˆä¸ºDPã€‚</li><li><strong>æ›´å°çš„ç«¯å£ID</strong>ï¼šå¦‚æœBIDä¹Ÿç›¸åŒï¼ˆä¾‹å¦‚ä¸€å°äº¤æ¢æœºçš„ä¸¤ä¸ªç«¯å£è¿æˆç¯è·¯ï¼‰ï¼Œåˆ™ç«¯å£IDæ›´å°çš„ç«¯å£æˆä¸ºDPã€‚</li></ol></li><li><strong>ç‰¹ä¾‹</strong>ï¼š<strong>æ ¹æ¡¥çš„æ‰€æœ‰æ´»åŠ¨ç«¯å£éƒ½æ˜¯æŒ‡å®šç«¯å£</strong>ï¼Œå› ä¸ºå®ƒçš„æ ¹è·¯å¾„å¼€é”€ä¸º0ï¼Œæ˜¯æœ€ä¼˜çš„ã€‚</li><li><strong>æ ¸å¿ƒåŠŸèƒ½ï¼šæ•°æ®â€œä¸‹å‘â€</strong>ã€‚æŒ‡å®šç«¯å£è´Ÿè´£ä»æ ¹æ¡¥æ–¹å‘æ¥æ”¶æ•°æ®ï¼Œå¹¶ <strong>â€œå‘ä¸‹â€è½¬å‘ç»™ä¸‹æ¸¸ç½‘ç»œ</strong>ã€‚</li></ul><h3 id="Step-4-é˜»å¡å‰©ä½™ç«¯å£-Blocking-Alternate-Port-é€»è¾‘æ–­ç¯"><a href="#Step-4-é˜»å¡å‰©ä½™ç«¯å£-Blocking-Alternate-Port-é€»è¾‘æ–­ç¯" class="headerlink" title="Step 4: é˜»å¡å‰©ä½™ç«¯å£ (Blocking&#x2F;Alternate Port) - é€»è¾‘æ–­ç¯"></a><strong>Step 4: é˜»å¡å‰©ä½™ç«¯å£ (Blocking&#x2F;Alternate Port) - é€»è¾‘æ–­ç¯</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šæ‰€æœ‰æ—¢ä¸æ˜¯<strong>æ ¹ç«¯å£</strong>ä¹Ÿä¸æ˜¯<strong>æŒ‡å®šç«¯å£</strong>çš„ç«¯å£ï¼Œå°†è¢«ç½®äº<strong>é˜»å¡çŠ¶æ€</strong>ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šè¿™æ˜¯STP<strong>æ‰“ç ´ç¯è·¯çš„å…³é”®æ“ä½œ</strong>ã€‚è¢«é˜»å¡çš„ç«¯å£ä¸ä¼šè½¬å‘ä»»ä½•æ•°æ®å¸§ï¼Œåªæ¥æ”¶BPDUæŠ¥æ–‡ä»¥ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–ï¼Œä½œä¸ºå¤‡ä»½è·¯å¾„å­˜åœ¨ã€‚</li></ul><p><strong>ğŸ“Œ æ•°æ®æµå‘æ ¸å¿ƒæ€»ç»“</strong>ï¼š</p><ul><li><strong>æŒ‡å®šç«¯å£ (DP)</strong>ï¼šæ˜¯æ•°æ®çš„ <strong>â€œä¸‹è¡Œé€šé“â€</strong> ï¼Œå°†æ•°æ®ä»ç½‘ç»œæ ¸å¿ƒï¼ˆæ ¹æ¡¥ï¼‰æ¨å‘è¾¹ç¼˜ã€‚</li><li><strong>æ ¹ç«¯å£ (RP)</strong>ï¼šæ˜¯æ•°æ®çš„ <strong>â€œä¸Šè¡Œé€šé“â€</strong> ï¼Œå°†æ•°æ®ä»ç½‘ç»œè¾¹ç¼˜æ±‡èšåˆ°æ ¸å¿ƒã€‚</li><li>è¿™ç§æ˜ç¡®çš„ã€å±‚æ¬¡åŒ–çš„æ•°æ®æµå‘ï¼Œä»æœºåˆ¶ä¸Šä¿è¯äº†æ•´ä¸ªç½‘ç»œ<strong>ç»æ— ç¯è·¯</strong>ã€‚</li></ul><p><strong>ğŸ“Œ BPDUçš„æµå‘</strong>ï¼š</p><ul><li>STPè§„å®šåªæœ‰æ ¹æ¡¥æ‰ä¼šå‘¨æœŸæ€§ï¼ˆæ¯2ç§’ï¼‰åœ°è‡ªå‘äº§ç”Ÿé…ç½®BPDUã€‚</li><li>éæ ¹æ¡¥æ°¸è¿œä¸ä¼šè‡ªå‘äº§ç”Ÿé…ç½®BPDUã€‚ å®ƒä»¬åªæ˜¯åœ¨æ ¹ç«¯å£æ”¶åˆ°æ ¹æ¡¥çš„BPDUåï¼Œè§¦å‘ä¸€ä¸ªåŠ¨ä½œï¼šä»è‡ªå·±çš„æŒ‡å®šç«¯å£å‘ä¸‹å‘é€ä¸€ä¸ªâ€œæ›´æ–°åâ€çš„BPDUã€‚</li></ul><h3 id="STPç«¯å£çŠ¶æ€è¿ç§»è¿‡ç¨‹"><a href="#STPç«¯å£çŠ¶æ€è¿ç§»è¿‡ç¨‹" class="headerlink" title="STPç«¯å£çŠ¶æ€è¿ç§»è¿‡ç¨‹"></a><strong>STPç«¯å£çŠ¶æ€è¿ç§»è¿‡ç¨‹</strong></h3><p>ç«¯å£ä»å¯åŠ¨åˆ°æœ€ç»ˆè½¬å‘æ•°æ®ï¼Œéœ€è¦ç»å†ä¸¥æ ¼çš„çŠ¶æ€æœºï¼Œè¿™æ˜¯æ”¶æ•›æ…¢çš„ä¸»è¦åŸå› ï¼š</p><table><thead><tr><th align="left">çŠ¶æ€</th><th align="left">æ¥æ”¶BPDU</th><th align="left">å­¦ä¹ MACåœ°å€</th><th align="left">è½¬å‘æ•°æ®å¸§</th><th align="left">æŒç»­æ—¶é—´</th><th align="left">ç›®çš„</th></tr></thead><tbody><tr><td align="left"><strong>é˜»å¡ (Blocking)</strong></td><td align="left">âœ“</td><td align="left">âœ—</td><td align="left">âœ—</td><td align="left">æœ€å¤š20ç§’</td><td align="left">é˜²æ­¢åœ¨è®¡ç®—å®Œæˆå‰å½¢æˆç¯è·¯</td></tr><tr><td align="left"><strong>ç›‘å¬ (Listening)</strong></td><td align="left">âœ“</td><td align="left">âœ—</td><td align="left">âœ—</td><td align="left">15ç§’</td><td align="left">å‚ä¸STPè®¡ç®—ï¼Œç¡®å®šç«¯å£è§’è‰²</td></tr><tr><td align="left"><strong>å­¦ä¹  (Learning)</strong></td><td align="left">âœ“</td><td align="left">âœ“</td><td align="left">âœ—</td><td align="left">15ç§’</td><td align="left">æ„å»ºMACåœ°å€è¡¨ï¼Œä¸ºè½¬å‘åšå‡†å¤‡</td></tr><tr><td align="left"><strong>è½¬å‘ (Forwarding)</strong></td><td align="left">âœ“</td><td align="left">âœ“</td><td align="left">âœ“</td><td align="left">ç¨³å®šçŠ¶æ€</td><td align="left">æ­£å¸¸ä¼ è¾“ç”¨æˆ·æ•°æ®</td></tr><tr><td align="left"><strong>ç¦ç”¨ (Disabled)</strong></td><td align="left">âœ—</td><td align="left">âœ—</td><td align="left">âœ—</td><td align="left">-</td><td align="left">ç®¡ç†å‘˜æ‰‹åŠ¨å…³é—­</td></tr></tbody></table><blockquote><p><strong>æ€»æ”¶æ•›æ—¶é—´</strong>ï¼šä»æ‹“æ‰‘å˜åŒ–åˆ°æ¢å¤é€šä¿¡ï¼Œé€šå¸¸éœ€è¦<strong>30ç§’ï¼ˆListening + Learningï¼‰</strong> åˆ°<strong>50ç§’ï¼ˆMax Age + Listening + Learningï¼‰</strong>ã€‚</p></blockquote><hr><h2 id="ä¸‰ã€RSTPå¿«é€Ÿç”Ÿæˆæ ‘åè®®"><a href="#ä¸‰ã€RSTPå¿«é€Ÿç”Ÿæˆæ ‘åè®®" class="headerlink" title="ä¸‰ã€RSTPå¿«é€Ÿç”Ÿæˆæ ‘åè®®"></a><strong>ä¸‰ã€RSTPå¿«é€Ÿç”Ÿæˆæ ‘åè®®</strong></h2><h3 id="1-RSTPæ¦‚è¿°"><a href="#1-RSTPæ¦‚è¿°" class="headerlink" title="1. RSTPæ¦‚è¿°"></a><strong>1. RSTPæ¦‚è¿°</strong></h3><p>RSTPï¼ˆRapid Spanning Tree Protocolï¼ŒIEEE 802.1wï¼‰æ˜¯STPçš„æ¼”è¿›ç‰ˆæœ¬ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»ŸSTPæ”¶æ•›é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚å®ƒå®Œå…¨å…¼å®¹STPï¼Œä½†é€šè¿‡æ”¹è¿›ç®—æ³•å’Œæœºåˆ¶ï¼Œå°†æ”¶æ•›æ—¶é—´ä»STPçš„30-50ç§’ç¼©çŸ­åˆ°<strong>äºšç§’çº§</strong>ï¼ˆé€šå¸¸åœ¨1ç§’ä»¥å†…ï¼‰ã€‚</p><h3 id="2-ç›¸å¯¹äºSTPçš„æ ¸å¿ƒæ”¹è¿›"><a href="#2-ç›¸å¯¹äºSTPçš„æ ¸å¿ƒæ”¹è¿›" class="headerlink" title="2. ç›¸å¯¹äºSTPçš„æ ¸å¿ƒæ”¹è¿›"></a><strong>2. ç›¸å¯¹äºSTPçš„æ ¸å¿ƒæ”¹è¿›</strong></h3><p>RSTPåœ¨STPåŸºç¡€ä¹‹ä¸Šè¿›è¡Œäº†å››é¡¹å…³é”®æ€§ä¼˜åŒ–ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th align="left">å¯¹æ¯”ç»´åº¦</th><th align="left"><strong>STP (802.1D)</strong></th><th align="left"><strong>RSTP (802.1w)</strong></th><th align="left"><strong>RSTPçš„æ”¹è¿›ç‚¹ä¸ä¼˜åŠ¿</strong></th></tr></thead><tbody><tr><td align="left"><strong>ç«¯å£è§’è‰²</strong></td><td align="left">æ ¹ç«¯å£ã€æŒ‡å®šç«¯å£ã€é˜»å¡ç«¯å£</td><td align="left"><strong>æ ¹ç«¯å£ã€æŒ‡å®šç«¯å£ã€æ›¿ä»£ç«¯å£ã€å¤‡ä»½ç«¯å£</strong></td><td align="left">æ–°å¢æ˜ç¡®å¤‡ä»½è§’è‰²ï¼Œä¸ºå¿«é€Ÿåˆ‡æ¢æä¾›æ¸…æ™°è·¯å¾„</td></tr><tr><td align="left"><strong>ç«¯å£çŠ¶æ€</strong></td><td align="left">5ç§ï¼šé˜»å¡ã€ç›‘å¬ã€å­¦ä¹ ã€è½¬å‘ã€ç¦ç”¨</td><td align="left"><strong>3ç§ï¼šä¸¢å¼ƒã€å­¦ä¹ ã€è½¬å‘</strong></td><td align="left">ç®€åŒ–çŠ¶æ€æœºï¼Œä¸¢å¼ƒçŠ¶æ€åˆå¹¶äº†ç¦ç”¨&#x2F;é˜»å¡&#x2F;ç›‘å¬çŠ¶æ€ï¼Œæ“ä½œæ›´é«˜æ•ˆ</td></tr><tr><td align="left"><strong>BPDUå¤„ç†</strong></td><td align="left">ä»…æ ¹æ¡¥å‘é€é…ç½®BPDUï¼Œéæ ¹æ¡¥åªè½¬å‘</td><td align="left"><strong>æ‰€æœ‰äº¤æ¢æœºæ¯2ç§’ç‹¬ç«‹å‘é€BPDUï¼ˆHelloåŒ…ï¼‰</strong></td><td align="left">BPDUå……å½“ä¿æ´»æœºåˆ¶ï¼Œä½¿æ•…éšœæ£€æµ‹ä¸å†ä¾èµ–è¶…æ—¶</td></tr><tr><td align="left"><strong>æ”¶æ•›æœºåˆ¶</strong></td><td align="left">ä¾èµ–è®¡æ—¶å™¨è¶…æ—¶ï¼ˆMax Age, Forward Delayï¼‰</td><td align="left"><strong>P&#x2F;Aæ¡æ‰‹æœºåˆ¶ã€è¾¹ç¼˜ç«¯å£ã€BPDUä¿æ´»</strong></td><td align="left">é€šè¿‡ä¸»åŠ¨åå•†å’Œé¢„è®¾ï¼Œæ¶ˆé™¤æ¼«é•¿çš„ç­‰å¾…æ—¶é—´</td></tr></tbody></table><h3 id="3-ä¸‰å¤§å¿«é€Ÿæ”¶æ•›æœºåˆ¶è¯¦è§£"><a href="#3-ä¸‰å¤§å¿«é€Ÿæ”¶æ•›æœºåˆ¶è¯¦è§£" class="headerlink" title="3. ä¸‰å¤§å¿«é€Ÿæ”¶æ•›æœºåˆ¶è¯¦è§£"></a><strong>3. ä¸‰å¤§å¿«é€Ÿæ”¶æ•›æœºåˆ¶è¯¦è§£</strong></h3><h4 id="3-1-P-Aï¼ˆæè®®-åŒæ„ï¼‰æ¡æ‰‹æœºåˆ¶"><a href="#3-1-P-Aï¼ˆæè®®-åŒæ„ï¼‰æ¡æ‰‹æœºåˆ¶" class="headerlink" title="3.1. P&#x2F;Aï¼ˆæè®®&#x2F;åŒæ„ï¼‰æ¡æ‰‹æœºåˆ¶"></a><strong>3.1. P&#x2F;Aï¼ˆæè®®&#x2F;åŒæ„ï¼‰æ¡æ‰‹æœºåˆ¶</strong></h4><p>è¿™æ˜¯RSTPå®ç°<strong>ç¬æ—¶è½¬å‘</strong>æœ€æ ¸å¿ƒçš„æœºåˆ¶ï¼Œç”¨äºç‚¹å¯¹ç‚¹é“¾è·¯ã€‚</p><ul><li><strong>ç›®æ ‡</strong>ï¼šåœ¨ç¡®è®¤æ— ç¯çš„å‰æä¸‹ï¼Œç»•è¿‡Listeningå’ŒLearningçŠ¶æ€ï¼Œ<strong>ç›´æ¥è¿›å…¥ForwardingçŠ¶æ€</strong>ã€‚</li><li><strong>å‰æ</strong>ï¼šä»…åœ¨<strong>ç‚¹å¯¹ç‚¹</strong>ï¼ˆå…¨åŒå·¥ï¼‰é“¾è·¯ä¸Šç”Ÿæ•ˆã€‚</li><li><strong>è¿‡ç¨‹æµç¨‹</strong>ï¼š<ol><li><strong>Proposalï¼ˆæè®®ï¼‰</strong>ï¼šä¸Šæ¸¸äº¤æ¢æœºï¼ˆå¦‚æ ¹æ¡¥ï¼‰åœ¨å…¶æŒ‡å®šç«¯å£ä¸Šå‘é€<strong>Pæ ‡å¿—ç½®ä½</strong>çš„BPDUã€‚è¯¥ç«¯å£æ­¤æ—¶å¤„äº<strong>Discarding</strong>çŠ¶æ€ã€‚</li><li><strong>Syncï¼ˆåŒæ­¥ï¼‰</strong>ï¼šä¸‹æ¸¸äº¤æ¢æœºæ”¶åˆ°Pç½®ä½çš„BPDUåï¼Œ<strong>é˜»å¡æ‰€æœ‰éè¾¹ç¼˜ç«¯å£</strong>ï¼ˆé™¤äº†æ¥æ”¶ç«¯å£ï¼‰ï¼Œä»¥ç¡®ä¿æ¥å—æè®®ä¸ä¼šå¼•å…¥ç¯è·¯ã€‚æ­¤æ­¥éª¤æ˜¯é˜²ç¯çš„å…³é”®ã€‚</li><li><strong>Agreementï¼ˆåŒæ„ï¼‰</strong>ï¼šä¸‹æ¸¸äº¤æ¢æœºå®ŒæˆåŒæ­¥åï¼Œä»å…¶æ ¹ç«¯å£å‘ä¸Šæ¸¸å›å¤ä¸€ä¸ª<strong>Aæ ‡å¿—ç½®ä½</strong>çš„BPDUï¼Œå¹¶<strong>ç«‹å³å°†è¯¥æ ¹ç«¯å£ç½®ä¸ºForwardingçŠ¶æ€</strong>ã€‚</li><li><strong>å¿«é€Ÿè½¬å‘</strong>ï¼šä¸Šæ¸¸äº¤æ¢æœºæ”¶åˆ°Aç½®ä½çš„å›å¤åï¼Œ<strong>ç«‹å³å°†å…¶æŒ‡å®šç«¯å£ç½®ä¸ºForwardingçŠ¶æ€</strong>ã€‚</li></ol></li><li><strong>é€’å½’</strong>ï¼šæ­¤è¿‡ç¨‹ä¼šä»æ ¹æ¡¥å¼€å§‹ï¼Œé€’å½’åœ°å‘ç”Ÿåœ¨æ•´ä¸ªç½‘ç»œçš„æ¯ä¸€è·³é“¾è·¯ä¸Šã€‚</li></ul><h4 id="3-2-è¾¹ç¼˜ç«¯å£ï¼ˆEdge-Portï¼‰"><a href="#3-2-è¾¹ç¼˜ç«¯å£ï¼ˆEdge-Portï¼‰" class="headerlink" title="3.2. è¾¹ç¼˜ç«¯å£ï¼ˆEdge Portï¼‰"></a><strong>3.2. è¾¹ç¼˜ç«¯å£ï¼ˆEdge Portï¼‰</strong></h4><ul><li><strong>å®šä¹‰</strong>ï¼šç›´æ¥è¿æ¥ç»ˆç«¯è®¾å¤‡ï¼ˆå¦‚PCã€æœåŠ¡å™¨ï¼‰çš„ç«¯å£ï¼Œè¿™äº›ç«¯å£ä¸å¯èƒ½å½¢æˆç¯è·¯ã€‚</li><li><strong>è¡Œä¸º</strong>ï¼šè¾¹ç¼˜ç«¯å£<strong>è·³è¿‡STPè®¡ç®—</strong>ï¼Œåœ¨é“¾è·¯æ¿€æ´»å<strong>ç«‹å³è¿›å…¥ForwardingçŠ¶æ€</strong>ï¼Œå®ç°ç»ˆç«¯è®¾å¤‡çš„å³æ—¶æ¥å…¥ã€‚</li><li><strong>å®‰å…¨é˜²æŠ¤ï¼ˆå¿…é…ï¼‰</strong>ï¼šå¿…é¡»é…ç½® <strong><code>BPDU Guard</code></strong> åŠŸèƒ½ã€‚å¦‚æœè¾¹ç¼˜ç«¯å£æ„å¤–æ”¶åˆ°BPDUï¼ˆè¡¨æ˜å¯èƒ½æ¥å…¥äº†ä¸€å°äº¤æ¢æœºï¼‰ï¼Œäº¤æ¢æœºç«‹å³å°†è¯¥ç«¯å£ç½®ä¸º <strong><code>err-disable</code></strong> çŠ¶æ€ï¼Œä»è€Œåœ¨ä¿è¯å¿«é€Ÿæ€§çš„åŒæ—¶é˜²æ­¢ç¯è·¯ã€‚</li></ul><h4 id="3-3-BPDUä½œä¸ºä¿æ´»åŒ…ï¼ˆBPDU-used-as-Keep-aliveï¼‰"><a href="#3-3-BPDUä½œä¸ºä¿æ´»åŒ…ï¼ˆBPDU-used-as-Keep-aliveï¼‰" class="headerlink" title="3.3. BPDUä½œä¸ºä¿æ´»åŒ…ï¼ˆBPDU used as Keep-aliveï¼‰"></a><strong>3.3. BPDUä½œä¸ºä¿æ´»åŒ…ï¼ˆBPDU used as Keep-aliveï¼‰</strong></h4><ul><li><strong>è¡Œä¸º</strong>ï¼šåœ¨RSTPä¸­ï¼Œ<strong>æ‰€æœ‰äº¤æ¢æœº</strong>éƒ½ä¼šç‹¬ç«‹åœ°æ¯2ç§’ï¼ˆHello Timeï¼‰ä»æŒ‡å®šç«¯å£å’Œæ ¹ç«¯å£å‘é€BPDUã€‚</li><li><strong>æ•…éšœæ£€æµ‹</strong>ï¼šå¦‚æœä¸€ä¸ªç«¯å£<strong>è¿ç»­3æ¬¡</strong>ï¼ˆå³6ç§’ï¼Œ<code>3 * Hello Time</code>ï¼‰æ²¡æœ‰æ”¶åˆ°å¯¹ç«¯å‘æ¥çš„BPDUï¼Œå®ƒå°±ç«‹å³è®¤ä¸ºé“¾è·¯æˆ–é‚»å±…å¤±æ•ˆï¼Œå¹¶è§¦å‘æ‹“æ‰‘é‡æ–°è®¡ç®—ã€‚</li><li><strong>å¯¹æ¯”STP</strong>ï¼šè¿™æ›¿ä»£äº†STPä¸­è¢«åŠ¨ç­‰å¾…<strong>Max Age</strong>è®¡æ—¶å™¨è¶…æ—¶ï¼ˆ20ç§’ï¼‰çš„ç¼“æ…¢æ•…éšœæ£€æµ‹æœºåˆ¶ã€‚</li></ul><h3 id="4-RSTPç«¯å£è§’è‰²ä¸å¤‡ä»½è·¯å¾„"><a href="#4-RSTPç«¯å£è§’è‰²ä¸å¤‡ä»½è·¯å¾„" class="headerlink" title="4. RSTPç«¯å£è§’è‰²ä¸å¤‡ä»½è·¯å¾„"></a><strong>4. RSTPç«¯å£è§’è‰²ä¸å¤‡ä»½è·¯å¾„</strong></h3><p>RSTPé€šè¿‡ç»†åŒ–ç«¯å£è§’è‰²ï¼Œæ˜ç¡®äº†å¤‡ä»½è·¯å¾„ï¼Œå®ç°äº†æ•…éšœçš„å¿«é€Ÿåˆ‡æ¢ã€‚</p><table><thead><tr><th align="left">ç«¯å£è§’è‰²</th><th align="left">å®šä¹‰ä¸ä½œç”¨</th><th align="left">ç¡®å®šæ–¹å¼</th></tr></thead><tbody><tr><td align="left"><strong>æ ¹ç«¯å£ (RP)</strong></td><td align="left">éæ ¹æ¡¥ä¸Š<strong>é€šå¾€æ ¹æ¡¥çš„æœ€ä½³è·¯å¾„</strong>çš„ç«¯å£ã€‚</td><td align="left">åˆ°æ ¹æ¡¥çš„è·¯å¾„å¼€é”€æœ€å°ã€‚</td></tr><tr><td align="left"><strong>æŒ‡å®šç«¯å£ (DP)</strong></td><td align="left">ç½‘æ®µä¸Š<strong>é€šå¾€æ ¹æ¡¥è·¯å¾„æœ€ä¼˜</strong>çš„ç«¯å£ï¼Œè´Ÿè´£è½¬å‘æ•°æ®ã€‚</td><td align="left">æ¯”è¾ƒç½‘æ®µä¸¤ç«¯äº¤æ¢æœºæä¾›çš„æ ¹è·¯å¾„å¼€é”€ï¼Œæ›´ä¼˜è€…èƒœå‡ºã€‚</td></tr><tr><td align="left"><strong>æ›¿ä»£ç«¯å£ (Alternate Port)</strong></td><td align="left"><strong>æ ¹ç«¯å£çš„å¤‡ä»½</strong>ã€‚æä¾›äº†å¦ä¸€æ¡é€šå¾€æ ¹æ¡¥çš„æ¬¡ä¼˜è·¯å¾„ã€‚</td><td align="left">æ”¶åˆ°<strong>å…¶ä»–äº¤æ¢æœº</strong>å‘å‡ºçš„æ›´ä¼˜BPDUçš„ç«¯å£ã€‚</td></tr><tr><td align="left"><strong>å¤‡ä»½ç«¯å£ (Backup Port)</strong></td><td align="left"><strong>æŒ‡å®šç«¯å£çš„å¤‡ä»½</strong>ã€‚æä¾›äº†å¦ä¸€æ¡è¿æ¥åˆ°åŒä¸€ç½‘æ®µçš„å¤‡ä»½é“¾è·¯ã€‚</td><td align="left">æ”¶åˆ°<strong>æœ¬å°äº¤æ¢æœºè‡ªå·±</strong>å‘å‡ºçš„æ›´ä¼˜BPDUçš„ç«¯å£ï¼ˆå¤šè§äºå…±äº«ä»‹è´¨ï¼‰ã€‚</td></tr></tbody></table><p><strong>æ”¶æ•›</strong>ï¼šå½“ä¸»ç«¯å£ï¼ˆRPæˆ–DPï¼‰æ•…éšœæ—¶ï¼Œå¯¹åº”çš„å¤‡ä»½ç«¯å£ï¼ˆAlternateæˆ–Backupï¼‰ä¼š<strong>ç«‹å³æ¥ç®¡</strong>ï¼Œæ— éœ€ä»»ä½•å»¶æ—¶ï¼Œç›´æ¥è¿›å…¥è½¬å‘çŠ¶æ€ã€‚</p><h3 id="5-é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco-IOSä¸ºä¾‹ï¼‰"><a href="#5-é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco-IOSä¸ºä¾‹ï¼‰" class="headerlink" title="5. é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco IOSä¸ºä¾‹ï¼‰"></a><strong>5. é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco IOSä¸ºä¾‹ï¼‰</strong></h3><h4 id="5-1-å¯ç”¨RSTP"><a href="#5-1-å¯ç”¨RSTP" class="headerlink" title="5.1. å¯ç”¨RSTP"></a><strong>5.1. å¯ç”¨RSTP</strong></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCiscoäº¤æ¢æœºè¿è¡Œçš„æ˜¯PVST+ï¼ˆæ¯VLAN STPï¼‰ã€‚è¦å¯ç”¨RSTPï¼Œéœ€è¦å°†STPæ¨¡å¼æ”¹ä¸ºRapid-PVST+ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1# configure terminal<br>SW1(config)# spanning-tree mode rapid-pvst  ! å…¨å±€å¯ç”¨Rapid-PVST+<br></code></pre></td></tr></table></figure><h4 id="5-2-é…ç½®æ ¹æ¡¥ä¸æ¬¡çº§æ ¹æ¡¥"><a href="#5-2-é…ç½®æ ¹æ¡¥ä¸æ¬¡çº§æ ¹æ¡¥" class="headerlink" title="5.2. é…ç½®æ ¹æ¡¥ä¸æ¬¡çº§æ ¹æ¡¥"></a><strong>5.2. é…ç½®æ ¹æ¡¥ä¸æ¬¡çº§æ ¹æ¡¥</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å°†äº¤æ¢æœºé…ç½®ä¸ºVLAN 1çš„ä¸»æ ¹æ¡¥</span><br>SW1(config)# spanning-tree vlan 1 root primary<br><br><span class="hljs-comment"># å°†äº¤æ¢æœºé…ç½®ä¸ºVLAN 1çš„å¤‡ä»½æ ¹æ¡¥</span><br>SW2(config)# spanning-tree vlan 1 root secondary<br></code></pre></td></tr></table></figure><h4 id="5-3-é…ç½®è¾¹ç¼˜ç«¯å£ä¸BPDU-Guard"><a href="#5-3-é…ç½®è¾¹ç¼˜ç«¯å£ä¸BPDU-Guard" class="headerlink" title="5.3. é…ç½®è¾¹ç¼˜ç«¯å£ä¸BPDU Guard"></a><strong>5.3. é…ç½®è¾¹ç¼˜ç«¯å£ä¸BPDU Guard</strong></h4><p><strong>åœ¨æ¥å£ä¸‹ç›´æ¥é…ç½®ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1(config)# interface GigabitEthernet0/1<br>SW1(config-if)# spanning-tree portfast        ! å°†ç«¯å£è®¾ç½®ä¸ºè¾¹ç¼˜ç«¯å£<br>SW1(config-if)# spanning-tree bpduguard <span class="hljs-built_in">enable</span> ! å¯ç”¨BPDU Guardä¿æŠ¤<br></code></pre></td></tr></table></figure><p><strong>å…¨å±€é…ç½®å¹¶è‡ªåŠ¨å¯ç”¨ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1(config)# spanning-tree portfast default   ! å°†æ‰€æœ‰Accessç«¯å£é»˜è®¤è®¾ä¸ºè¾¹ç¼˜ç«¯å£<br>SW1(config)# spanning-tree portfast bpduguard default ! ä¸ºæ‰€æœ‰è¾¹ç¼˜ç«¯å£å…¨å±€å¯ç”¨BPDU Guard<br></code></pre></td></tr></table></figure><h4 id="5-4-è°ƒæ•´ç«¯å£å¼€é”€ä¸ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰"><a href="#5-4-è°ƒæ•´ç«¯å£å¼€é”€ä¸ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="5.4. è°ƒæ•´ç«¯å£å¼€é”€ä¸ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰"></a><strong>5.4. è°ƒæ•´ç«¯å£å¼€é”€ä¸ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰</strong></h4><p>ç”¨äºæ‰‹åŠ¨æ§åˆ¶æ ¹ç«¯å£é€‰ä¸¾å’Œæµé‡è·¯å¾„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1(config)# interface GigabitEthernet0/2<br>SW1(config-if)# spanning-tree cost 1000       ! æ‰‹åŠ¨ä¿®æ”¹ç«¯å£å¼€é”€ï¼Œå½±å“RPé€‰ä¸¾<br>SW1(config-if)# spanning-tree port-priority 112 ! ä¿®æ”¹ç«¯å£ä¼˜å…ˆçº§ï¼ˆ0-255ï¼‰ï¼Œå½±å“DPé€‰ä¸¾<br></code></pre></td></tr></table></figure><h4 id="5-5-éªŒè¯å‘½ä»¤"><a href="#5-5-éªŒè¯å‘½ä»¤" class="headerlink" title="5.5. éªŒè¯å‘½ä»¤"></a><strong>5.5. éªŒè¯å‘½ä»¤</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1# show spanning-tree verbose              ! æŸ¥çœ‹è¯¦ç»†çš„RSTPçŠ¶æ€ä¿¡æ¯<br>SW1# show spanning-tree interface GigabitEthernet0/1 detail ! æŸ¥çœ‹æŒ‡å®šç«¯å£çš„è¯¦ç»†è§’è‰²å’ŒçŠ¶æ€<br>SW1# show spanning-tree summary              ! æŸ¥çœ‹STPæ¨¡å¼æ‘˜è¦ï¼Œç¡®è®¤è¿è¡Œçš„æ˜¯rapid-pvst<br></code></pre></td></tr></table></figure><hr><h2 id="å››ã€MSTPå¤šç”Ÿæˆæ ‘åè®®"><a href="#å››ã€MSTPå¤šç”Ÿæˆæ ‘åè®®" class="headerlink" title="å››ã€MSTPå¤šç”Ÿæˆæ ‘åè®®"></a><strong>å››ã€MSTPå¤šç”Ÿæˆæ ‘åè®®</strong></h2><h3 id="1-å‰ç½®æ¦‚å¿µï¼šPVST-ä¸RPVST"><a href="#1-å‰ç½®æ¦‚å¿µï¼šPVST-ä¸RPVST" class="headerlink" title="1. å‰ç½®æ¦‚å¿µï¼šPVST+ä¸RPVST+"></a><strong>1. å‰ç½®æ¦‚å¿µï¼šPVST+ä¸RPVST+</strong></h3><p>åœ¨æ·±å…¥äº†è§£MSTPä¹‹å‰ï¼Œå¿…é¡»ç†è§£Ciscoç§æœ‰åè®®PVST+å’ŒRPVST+ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç†è§£MSTPä¼˜åŠ¿çš„é‡è¦èƒŒæ™¯ã€‚</p><h4 id="1-1-PVST-Per-VLAN-Spanning-Tree-Plus"><a href="#1-1-PVST-Per-VLAN-Spanning-Tree-Plus" class="headerlink" title="1.1. PVST+ (Per-VLAN Spanning Tree Plus)"></a><strong>1.1. PVST+ (Per-VLAN Spanning Tree Plus)</strong></h4><ul><li><strong>å«ä¹‰</strong>ï¼š<strong>å¢å¼ºå‹æ¯VLANç”Ÿæˆæ ‘åè®®</strong>ï¼Œæ˜¯Ciscoå¯¹æ ‡å‡†STPï¼ˆIEEE 802.1Dï¼‰çš„æ‰©å±•ã€‚</li><li><strong>å·¥ä½œåŸç†</strong>ï¼šä¸ºç½‘ç»œä¸­çš„<strong>æ¯ä¸€ä¸ªVLAN</strong>éƒ½ç‹¬ç«‹åœ°è¿è¡Œä¸€ä¸ªSTPå®ä¾‹ã€‚æ¯ä¸ªVLANéƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ¹æ¡¥ã€ç«¯å£è§’è‰²å’ŒçŠ¶æ€ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>æä¾›äº†<strong>åŸºäºVLANçš„è´Ÿè½½åˆ†æ‹…</strong>å¯èƒ½æ€§ã€‚å¯ä»¥é€šè¿‡ä¸ºä¸åŒVLANæŒ‡å®šä¸åŒçš„æ ¹æ¡¥ï¼Œè®©æµé‡èµ°ä¸åŒçš„è·¯å¾„ã€‚</li><li>æ¯”æ ‡å‡†çš„CSTï¼ˆå…¬å…±ç”Ÿæˆæ ‘ï¼Œæ‰€æœ‰VLANå…±ç”¨ä¸€æ£µæ ‘ï¼‰æ›´æœ‰å¼¹æ€§ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li><strong>èµ„æºæ¶ˆè€—å·¨å¤§</strong>ï¼šåœ¨ä¸€ä¸ªåŒ…å«ä¸Šç™¾ä¸ªVLANçš„ç½‘ç»œä¸­ï¼Œäº¤æ¢æœºéœ€è¦è®¡ç®—å’Œç»´æŠ¤ä¸Šç™¾æ£µç”Ÿæˆæ ‘ï¼Œå¯¹CPUå’Œå†…å­˜æ˜¯æ²‰é‡çš„è´Ÿæ‹…ã€‚</li><li><strong>æ”¶æ•›é€Ÿåº¦æ…¢</strong>ï¼šåŸºäºä¼ ç»Ÿçš„STPï¼Œæ”¶æ•›æ—¶é—´ä¾ç„¶é•¿è¾¾30-50ç§’ã€‚</li></ul></li></ul><h4 id="1-2-RPVST-Rapid-Per-VLAN-Spanning-Tree-Plus"><a href="#1-2-RPVST-Rapid-Per-VLAN-Spanning-Tree-Plus" class="headerlink" title="1.2. RPVST+ (Rapid Per-VLAN Spanning Tree Plus)"></a><strong>1.2. RPVST+ (Rapid Per-VLAN Spanning Tree Plus)</strong></h4><ul><li><strong>å«ä¹‰</strong>ï¼š<strong>å¢å¼ºå‹å¿«é€Ÿæ¯VLANç”Ÿæˆæ ‘åè®®</strong>ï¼Œæ˜¯Ciscoå¯¹æ ‡å‡†RSTPï¼ˆIEEE 802.1wï¼‰çš„æ‰©å±•ã€‚</li><li><strong>å·¥ä½œåŸç†</strong>ï¼šåŒæ ·æ˜¯<strong>ä¸ºæ¯ä¸ªVLANè¿è¡Œä¸€ä¸ªç”Ÿæˆæ ‘å®ä¾‹</strong>ï¼Œä½†æ¯ä¸ªå®ä¾‹éƒ½ä½¿ç”¨äº†RSTPçš„<strong>å¿«é€Ÿæ”¶æ•›æœºåˆ¶</strong>ï¼ˆP&#x2F;Aæ¡æ‰‹ã€è¾¹ç¼˜ç«¯å£ç­‰ï¼‰ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼š<ul><li>æ—¢æ‹¥æœ‰äº†PVST+çš„<strong>æ¯VLANè´Ÿè½½åˆ†æ‹…</strong>èƒ½åŠ›ï¼Œåˆæ‹¥æœ‰äº†RSTPçš„<strong>äºšç§’çº§å¿«é€Ÿæ”¶æ•›</strong>é€Ÿåº¦ã€‚</li><li>æ˜¯Ciscoäº¤æ¢æœºçš„é»˜è®¤æ¨¡å¼ã€‚</li></ul></li><li><strong>ç¼ºç‚¹</strong>ï¼š<ul><li><strong>èµ„æºæ¶ˆè€—é—®é¢˜ä¾æ—§å­˜åœ¨</strong>ï¼šè™½ç„¶æ”¶æ•›å¿«äº†ï¼Œä½†â€œæ¯VLANä¸€æ£µæ ‘â€çš„æ¨¡å‹åœ¨è¶…å¤§è§„è§„æ¨¡VLANç¯å¢ƒä¸­ä¾ç„¶éå¸¸æ¶ˆè€—èµ„æºã€‚</li></ul></li></ul><p><strong>MSTPå¯ä»¥çœ‹ä½œæ˜¯è§£å†³PVST+&#x2F;RPVST+èµ„æºæ¶ˆè€—é—®é¢˜çš„â€œæ ‡å‡†åŒ–â€æ–¹æ¡ˆã€‚</strong></p><table><thead><tr><th align="left">åè®®</th><th align="left">ç”Ÿæˆæ ‘å®ä¾‹æ•°é‡</th><th align="left">æ”¶æ•›é€Ÿåº¦</th><th align="left">èµ„æºæ¶ˆè€—</th><th align="left">æ ‡å‡†&#x2F;ç§æœ‰</th></tr></thead><tbody><tr><td align="left"><strong>PVST+</strong></td><td align="left">æ¯ä¸ªVLANä¸€ä¸ª</td><td align="left">æ…¢ï¼ˆç§’çº§ï¼‰</td><td align="left">é«˜</td><td align="left">Ciscoç§æœ‰</td></tr><tr><td align="left"><strong>RPVST+</strong></td><td align="left">æ¯ä¸ªVLANä¸€ä¸ª</td><td align="left">å¿«ï¼ˆäºšç§’çº§ï¼‰</td><td align="left">é«˜</td><td align="left">Ciscoç§æœ‰</td></tr><tr><td align="left"><strong>MSTP</strong></td><td align="left">æ¯ä¸ªå®ä¾‹ä¸€ä¸ªï¼ˆ1ä¸ªIST + nä¸ªMSTIï¼‰</td><td align="left">å¿«ï¼ˆäºšç§’çº§ï¼‰</td><td align="left">ä½</td><td align="left">IEEEæ ‡å‡†</td></tr></tbody></table><p><strong>ç»“è®º</strong>ï¼šMSTPé€šè¿‡å°†<strong>å¤šä¸ªVLANåˆ†ç»„åˆ°å°‘æ•°å‡ ä¸ªå®ä¾‹</strong>ä¸­ï¼Œåœ¨ä¿æŒå¿«é€Ÿæ”¶æ•›å’Œè´Ÿè½½åˆ†æ‹…èƒ½åŠ›çš„åŒæ—¶ï¼Œæå¤§åœ°é™ä½äº†ç³»ç»Ÿå¼€é”€ï¼Œå¹¶å› å…¶IEEEæ ‡å‡†èº«ä»½å®ç°äº†å¤šå‚å•†è®¾å¤‡å…¼å®¹ã€‚è€ŒRPVST+åˆ™æ˜¯ä¸­å°å‹çº¯Ciscoç¯å¢ƒä¸­ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„å¸¸è§é€‰æ‹©ã€‚</p><h3 id="2-MSTPæ¦‚è¿°"><a href="#2-MSTPæ¦‚è¿°" class="headerlink" title="2. MSTPæ¦‚è¿°"></a><strong>2. MSTPæ¦‚è¿°</strong></h3><p>MSTPï¼ˆMultiple Spanning Tree Protocolï¼ŒIEEE 802.1sï¼‰æ˜¯RSTPçš„è¿›ä¸€æ­¥å‘å±•ï¼Œæ—¨åœ¨è§£å†³åœ¨å¤§å‹ç½‘ç»œã€ç‰¹åˆ«æ˜¯å¤šVLANç¯å¢ƒä¸­RSTPå’ŒSTPçš„å±€é™æ€§ã€‚<strong>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå®ä¾‹åŒ–â€</strong>ï¼Œå…è®¸å°†å¤šä¸ªVLANæ˜ å°„åˆ°å°‘æ•°å‡ ä¸ªç”Ÿæˆæ ‘å®ä¾‹ä¸Šï¼Œä»è€Œå®ç°è´Ÿè½½åˆ†æ‹…å’Œæ›´é«˜æ•ˆçš„èµ„æºåˆ©ç”¨ã€‚</p><ul><li><strong>è§£å†³çš„é—®é¢˜</strong>ï¼š<ul><li><strong>PVST+&#x2F;RPVST+çš„èµ„æºæ¶ˆè€—</strong>ï¼šæ¯ä¸ªVLANè¿è¡Œä¸€ä¸ªç”Ÿæˆæ ‘å®ä¾‹ï¼Œåœ¨VLANæ•°é‡åºå¤§æ—¶ï¼Œä¼šæ¶ˆè€—å¤§é‡äº¤æ¢æœºCPUå’Œå†…å­˜èµ„æºã€‚</li><li><strong>æ— æ³•å®ç°è´Ÿè½½åˆ†æ‹…</strong>ï¼šåœ¨PVST+ä¸­ï¼Œæ‰€æœ‰VLANçš„æ‹“æ‰‘ç»“æ„ç›¸åŒï¼ˆé™¤éæ‰‹åŠ¨è°ƒæ•´ä¼˜å…ˆçº§ï¼‰ï¼Œæ‰€æœ‰æµé‡éƒ½èµ°åŒä¸€æ¡æœ€ä¼˜è·¯å¾„ï¼Œæ— æ³•åˆ©ç”¨å†—ä½™é“¾è·¯ã€‚</li></ul></li></ul><h3 id="3-æ ¸å¿ƒæ¦‚å¿µ"><a href="#3-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="3. æ ¸å¿ƒæ¦‚å¿µ"></a><strong>3. æ ¸å¿ƒæ¦‚å¿µ</strong></h3><h4 id="3-1-MSTåŒºåŸŸ-MST-Region"><a href="#3-1-MSTåŒºåŸŸ-MST-Region" class="headerlink" title="3.1. MSTåŒºåŸŸ (MST Region)"></a><strong>3.1. MSTåŒºåŸŸ (MST Region)</strong></h4><p>MSTPç½‘ç»œçš„åŸºæœ¬ç»„æˆå•å…ƒã€‚è¦å±äºåŒä¸€ä¸ªåŒºåŸŸï¼Œå¤šå°äº¤æ¢æœºå¿…é¡»é…ç½®<strong>å®Œå…¨ç›¸åŒ</strong>çš„ä¸‰å¤§å±æ€§ï¼š</p><ol><li><strong>åŒºåŸŸåç§° (Region Name)</strong>ï¼šæ–‡æœ¬å­—ç¬¦ä¸²ã€‚</li><li><strong>ä¿®è®¢çº§åˆ« (Revision Number)</strong>ï¼šä¸€ä¸ªæ•°å­—ï¼Œç”¨äºæ ‡è¯†é…ç½®ç‰ˆæœ¬ï¼Œé»˜è®¤0ã€‚</li><li><strong>VLANä¸å®ä¾‹çš„æ˜ å°„è¡¨ (VLAN-to-Instance Mapping)</strong>ï¼šå®šä¹‰å“ªäº›VLANå½’å±äºå“ªä¸ªç”Ÿæˆæ ‘å®ä¾‹ã€‚</li></ol><p><em>åªæœ‰é…ç½®å®Œå…¨ç›¸åŒçš„äº¤æ¢æœºæ‰è¢«è®¤ä¸ºåœ¨åŒä¸€ä¸ªMSTåŒºåŸŸå†…ã€‚</em> åŒºåŸŸä¹‹é—´é€šè¿‡è®¡ç®—CSTï¼ˆå…¬å…±ç”Ÿæˆæ ‘ï¼‰äº’è”ã€‚</p><h4 id="3-2-ç”Ÿæˆæ ‘å®ä¾‹-Spanning-Tree-Instance"><a href="#3-2-ç”Ÿæˆæ ‘å®ä¾‹-Spanning-Tree-Instance" class="headerlink" title="3.2. ç”Ÿæˆæ ‘å®ä¾‹ (Spanning Tree Instance)"></a><strong>3.2. ç”Ÿæˆæ ‘å®ä¾‹ (Spanning Tree Instance)</strong></h4><p>MSTPçš„æ ¸å¿ƒï¼Œåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><ul><li><strong>IST (Internal Spanning Tree)</strong>ï¼š<strong>å®ä¾‹0</strong>ã€‚è¿™æ˜¯é»˜è®¤ä¸”å¿…é¡»å­˜åœ¨çš„å®ä¾‹ã€‚å®ƒæ‰¿è½½æ‰€æœ‰æœªæ˜ç¡®æ˜ å°„åˆ°å…¶ä»–å®ä¾‹çš„VLANï¼Œå¹¶è´Ÿè´£ç®¡ç†MSTåŒºåŸŸä¸å¤–éƒ¨ç½‘ç»œï¼ˆå¦‚è¿è¡ŒSTPçš„åŒºåŸŸï¼‰çš„é€šä¿¡ã€‚</li><li><strong>MSTI (Multiple Spanning Tree Instance)</strong>ï¼šå®ä¾‹1-4094ã€‚ç”¨æˆ·è‡ªå®šä¹‰çš„å®ä¾‹ã€‚æ¯ä¸ªMSTIåœ¨åŒºåŸŸå†…éƒ¨ç‹¬ç«‹è®¡ç®—ä¸€ä¸ªæ— ç¯æ‹“æ‰‘ï¼Œå½¼æ­¤äº’ä¸å½±å“ã€‚å¯ä»¥å°†éœ€è¦<strong>éµå¾ªç›¸åŒæ‹“æ‰‘è·¯å¾„çš„VLANç»„</strong>æ˜ å°„åˆ°åŒä¸€ä¸ªMSTIä¸Šã€‚</li></ul><h4 id="3-3-CSTä¸CIST"><a href="#3-3-CSTä¸CIST" class="headerlink" title="3.3. CSTä¸CIST"></a><strong>3.3. CSTä¸CIST</strong></h4><ul><li><strong>CIST (Common and Internal Spanning Tree)</strong>ï¼šæ•´ä¸ªäº¤æ¢ç½‘ç»œï¼ˆå¯èƒ½åŒ…å«å¤šä¸ªMSTåŒºåŸŸå’Œè¿è¡ŒSTP&#x2F;RSTPçš„äº¤æ¢æœºï¼‰ä¸­ï¼Œè¿æ¥æ‰€æœ‰äº¤æ¢æœºçš„ä¸€æ£µ<strong>æ€»ç”Ÿæˆæ ‘</strong>ã€‚å®ƒç”±æ¯ä¸ªMSTåŒºåŸŸçš„ISTå®ä¾‹å’ŒåŒºåŸŸé—´çš„é“¾è·¯å…±åŒæ„æˆã€‚</li><li><strong>CST (Common Spanning Tree)</strong>ï¼šç‰¹æŒ‡<strong>è¿æ¥ä¸åŒMSTåŒºåŸŸ</strong>çš„é‚£éƒ¨åˆ†ç”Ÿæˆæ ‘ã€‚æ¯ä¸ªMSTåŒºåŸŸåœ¨CSTçœ‹æ¥å°±åƒä¸€å°â€œè™šæ‹Ÿäº¤æ¢æœºâ€ã€‚</li></ul><h3 id="4-MSTPçš„å·¥ä½œæœºåˆ¶ä¸ä¼˜åŠ¿"><a href="#4-MSTPçš„å·¥ä½œæœºåˆ¶ä¸ä¼˜åŠ¿" class="headerlink" title="4. MSTPçš„å·¥ä½œæœºåˆ¶ä¸ä¼˜åŠ¿"></a><strong>4. MSTPçš„å·¥ä½œæœºåˆ¶ä¸ä¼˜åŠ¿</strong></h3><h4 id="4-1-å·¥ä½œæœºåˆ¶"><a href="#4-1-å·¥ä½œæœºåˆ¶" class="headerlink" title="4.1. å·¥ä½œæœºåˆ¶"></a><strong>4.1. å·¥ä½œæœºåˆ¶</strong></h4><ol><li><strong>åŒºåŸŸå†…</strong>ï¼šåœ¨æ¯ä¸ªMSTåŒºåŸŸå†…éƒ¨ï¼ŒISTå’Œæ‰€æœ‰MSTIç‹¬ç«‹è¿›è¡Œæ‹“æ‰‘è®¡ç®—ï¼Œä½¿ç”¨å’ŒRSTPç›¸åŒçš„<strong>P&#x2F;Aå¿«é€Ÿæ”¶æ•›æœºåˆ¶</strong>ã€‚</li><li><strong>åŒºåŸŸé—´</strong>ï¼šä¸åŒMSTåŒºåŸŸä¹‹é—´é€šè¿‡<strong>CST</strong>äº’è”ã€‚CSTå°†æ¯ä¸ªåŒºåŸŸè§†ä¸ºä¸€ä¸ªæ•´ä½“ï¼ˆè™šæ‹Ÿæ¡¥ï¼‰ï¼Œåœ¨åŒºåŸŸè¾¹ç•Œä¸Šè®¡ç®—å‡ºä¸€æ£µæ— ç¯çš„ç”Ÿæˆæ ‘ã€‚</li></ol><h4 id="4-2-æ ¸å¿ƒä¼˜åŠ¿ï¼šè´Ÿè½½åˆ†æ‹…"><a href="#4-2-æ ¸å¿ƒä¼˜åŠ¿ï¼šè´Ÿè½½åˆ†æ‹…" class="headerlink" title="4.2. æ ¸å¿ƒä¼˜åŠ¿ï¼šè´Ÿè½½åˆ†æ‹…"></a><strong>4.2. æ ¸å¿ƒä¼˜åŠ¿ï¼šè´Ÿè½½åˆ†æ‹…</strong></h4><p>MSTPæœ€å¤§çš„ä¼˜åŠ¿æ˜¯èƒ½å¤Ÿé€šè¿‡ä¸åŒçš„MSTIå®ç°<strong>åŸºäºVLANçš„è´Ÿè½½åˆ†æ‹…</strong>ã€‚</p><ul><li><strong>åœºæ™¯</strong>ï¼šæ ¸å¿ƒäº¤æ¢æœºSW1å’ŒSW2ä¹‹é—´æœ‰ä¸¤æ¡Trunké“¾è·¯ï¼šLink-Aå’ŒLink-Bã€‚</li><li><strong>é…ç½®</strong>ï¼š<ul><li>å°†VLAN 10, 20, 30æ˜ å°„åˆ°<strong>MSTI 1</strong>ï¼Œå¹¶è°ƒæ•´æˆæœ¬æˆ–ä¼˜å…ˆçº§ï¼Œä½¿å…¶<strong>æ ¹æ¡¥åœ¨SW1ï¼Œé˜»å¡SW2ä¸ŠæŒ‡å‘Link-Bçš„ç«¯å£</strong>ã€‚æ­¤æ—¶VLAN 10,20,30çš„æµé‡èµ°Link-Aã€‚</li><li>å°†VLAN 40, 50, 60æ˜ å°„åˆ°<strong>MSTI 2</strong>ï¼Œå¹¶è°ƒæ•´æˆæœ¬æˆ–ä¼˜å…ˆçº§ï¼Œä½¿å…¶<strong>æ ¹æ¡¥åœ¨SW2ï¼Œé˜»å¡SW1ä¸ŠæŒ‡å‘Link-Açš„ç«¯å£</strong>ã€‚æ­¤æ—¶VLAN 40,50,60çš„æµé‡èµ°Link-Bã€‚</li></ul></li><li><strong>ç»“æœ</strong>ï¼šä¸¤æ¡ç‰©ç†é“¾è·¯éƒ½è¢«æœ‰æ•ˆåˆ©ç”¨ï¼Œå®ç°äº†æµé‡çš„è´Ÿè½½åˆ†æ‹…ï¼Œæå‡äº†ç½‘ç»œæ•´ä½“å¸¦å®½ã€‚</li></ul><h3 id="5-é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco-IOSä¸ºä¾‹ï¼‰-1"><a href="#5-é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco-IOSä¸ºä¾‹ï¼‰-1" class="headerlink" title="5. é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco IOSä¸ºä¾‹ï¼‰"></a><strong>5. é…ç½®ç¤ºä¾‹ï¼ˆä»¥Cisco IOSä¸ºä¾‹ï¼‰</strong></h3><h4 id="5-1-å¯ç”¨MSTPå¹¶è¿›å…¥é…ç½®æ¨¡å¼"><a href="#5-1-å¯ç”¨MSTPå¹¶è¿›å…¥é…ç½®æ¨¡å¼" class="headerlink" title="5.1. å¯ç”¨MSTPå¹¶è¿›å…¥é…ç½®æ¨¡å¼"></a><strong>5.1. å¯ç”¨MSTPå¹¶è¿›å…¥é…ç½®æ¨¡å¼</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1# configure terminal<br>SW1(config)# spanning-tree mode mst  ! å…¨å±€å¯ç”¨MSTPæ¨¡å¼<br>SW1(config)# spanning-tree mst configuration ! è¿›å…¥MSTåŒºåŸŸé…ç½®æ¨¡å¼<br></code></pre></td></tr></table></figure><h4 id="5-2-é…ç½®åŒºåŸŸä¸‰å¤§å±æ€§ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰"><a href="#5-2-é…ç½®åŒºåŸŸä¸‰å¤§å±æ€§ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰" class="headerlink" title="5.2. é…ç½®åŒºåŸŸä¸‰å¤§å±æ€§ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰"></a><strong>5.2. é…ç½®åŒºåŸŸä¸‰å¤§å±æ€§ï¼ˆå¿…é¡»ä¸€è‡´ï¼‰</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1(config-mst)# name REGION_A       ! é…ç½®åŒºåŸŸåç§°<br>SW1(config-mst)# revision 1          ! é…ç½®ä¿®è®¢å·<br>SW1(config-mst)# instance 1 vlan 10, 20, 30  ! å°†VLAN 10,20,30æ˜ å°„åˆ°å®ä¾‹1 (MSTI1)<br>SW1(config-mst)# instance 2 vlan 40, 50, 60  ! å°†VLAN 40,50,60æ˜ å°„åˆ°å®ä¾‹2 (MSTI2)<br>SW1(config-mst)# <span class="hljs-built_in">exit</span>                ! é€€å‡ºé…ç½®æ¨¡å¼ï¼Œä¿®æ”¹ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ<br></code></pre></td></tr></table></figure><p><strong>é‡è¦</strong>ï¼šç½‘ç»œä¸­æ‰€æœ‰éœ€è¦å¤„äºåŒä¸€åŒºåŸŸçš„äº¤æ¢æœºï¼Œä»¥ä¸Šä¸‰æ¡å‘½ä»¤å¿…é¡»<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚</p><h4 id="5-3-é…ç½®æ¯ä¸ªå®ä¾‹çš„æ ¹æ¡¥"><a href="#5-3-é…ç½®æ¯ä¸ªå®ä¾‹çš„æ ¹æ¡¥" class="headerlink" title="5.3. é…ç½®æ¯ä¸ªå®ä¾‹çš„æ ¹æ¡¥"></a><strong>5.3. é…ç½®æ¯ä¸ªå®ä¾‹çš„æ ¹æ¡¥</strong></h4><p>å¯ä»¥ä¸ºæ¯ä¸ªMSTIæŒ‡å®šä¸åŒçš„æ ¹æ¡¥ï¼Œè¿™æ˜¯å®ç°è´Ÿè½½åˆ†æ‹…çš„å…³é”®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å°†æœ¬äº¤æ¢æœºé…ç½®ä¸ºMSTå®ä¾‹1çš„æ ¹æ¡¥</span><br>SW1(config)# spanning-tree mst 1 root primary<br><br><span class="hljs-comment"># å°†æœ¬äº¤æ¢æœºé…ç½®ä¸ºMSTå®ä¾‹2çš„æ¬¡çº§æ ¹æ¡¥</span><br>SW1(config)# spanning-tree mst 2 root secondary<br></code></pre></td></tr></table></figure><h4 id="5-4-è°ƒæ•´å®ä¾‹çš„ç«¯å£ä¼˜å…ˆçº§æˆ–å¼€é”€ï¼ˆå¯é€‰ï¼‰"><a href="#5-4-è°ƒæ•´å®ä¾‹çš„ç«¯å£ä¼˜å…ˆçº§æˆ–å¼€é”€ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="5.4. è°ƒæ•´å®ä¾‹çš„ç«¯å£ä¼˜å…ˆçº§æˆ–å¼€é”€ï¼ˆå¯é€‰ï¼‰"></a><strong>5.4. è°ƒæ•´å®ä¾‹çš„ç«¯å£ä¼˜å…ˆçº§æˆ–å¼€é”€ï¼ˆå¯é€‰ï¼‰</strong></h4><p>æ›´ç²¾ç»†åœ°æ§åˆ¶æ¯ä¸ªå®ä¾‹çš„è·¯å¾„é€‰æ‹©ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">SW1(config)# interface GigabitEthernet0/1<br>SW1(config-if)# spanning-tree mst 1 cost 1000000  ! åœ¨MSTI1ä¸­å¢å¤§å¼€é”€ï¼Œä½¿è¯¥ç«¯å£ä¸è¢«ä¼˜é€‰<br>SW1(config-if)# spanning-tree mst 2 port-priority 112 ! åœ¨MSTI2ä¸­ä¿®æ”¹ç«¯å£ä¼˜å…ˆçº§<br></code></pre></td></tr></table></figure><h4 id="5-5-éªŒè¯ä¸æŸ¥çœ‹å‘½ä»¤"><a href="#5-5-éªŒè¯ä¸æŸ¥çœ‹å‘½ä»¤" class="headerlink" title="5.5. éªŒè¯ä¸æŸ¥çœ‹å‘½ä»¤"></a><strong>5.5. éªŒè¯ä¸æŸ¥çœ‹å‘½ä»¤</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹MSTPçš„é…ç½®æ‘˜è¦</span><br>SW1# show spanning-tree mst configuration<br><br><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰MSTå®ä¾‹çš„æ‘˜è¦çŠ¶æ€</span><br>SW1# show spanning-tree mst summary<br><br><span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šMSTå®ä¾‹ï¼ˆå¦‚å®ä¾‹1ï¼‰çš„è¯¦ç»†æ‹“æ‰‘ä¿¡æ¯</span><br>SW1# show spanning-tree mst 1<br><br><span class="hljs-comment"># æŸ¥çœ‹æ¥å£åœ¨ä¸åŒMSTå®ä¾‹ä¸­çš„è§’è‰²å’ŒçŠ¶æ€</span><br>SW1# show spanning-tree mst interface GigabitEthernet0/1<br></code></pre></td></tr></table></figure><h3 id="6-æ€»ç»“ä¸å¯¹æ¯”"><a href="#6-æ€»ç»“ä¸å¯¹æ¯”" class="headerlink" title="6. æ€»ç»“ä¸å¯¹æ¯”"></a><strong>6. æ€»ç»“ä¸å¯¹æ¯”</strong></h3><table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><strong>STP&#x2F;RSTP (PVST+&#x2F;RPVST+)</strong></th><th align="left"><strong>MSTP</strong></th></tr></thead><tbody><tr><td align="left"><strong>æ ¸å¿ƒæ€æƒ³</strong></td><td align="left"><strong>æ¯VLANä¸€æ£µæ ‘</strong></td><td align="left"><strong>å¤šä¸ªVLANä¸€ç»„å®ä¾‹</strong></td></tr><tr><td align="left"><strong>èµ„æºæ¶ˆè€—</strong></td><td align="left">é«˜ï¼ˆVLANå¤šæ—¶ï¼‰</td><td align="left">ä½ï¼ˆä¸å®ä¾‹æ•°ç›¸å…³ï¼Œä¸VLANæ•°æ— å…³ï¼‰</td></tr><tr><td align="left"><strong>è´Ÿè½½åˆ†æ‹…</strong></td><td align="left">éš¾å®ç°ï¼Œéœ€é€VLANè°ƒæ•´</td><td align="left"><strong>æ˜“äºå®ç°ï¼ŒæŒ‰å®ä¾‹è°ƒæ•´</strong></td></tr><tr><td align="left"><strong>é…ç½®å¤æ‚åº¦</strong></td><td align="left">ä½ï¼ˆç®€å•ç½‘ç»œï¼‰</td><td align="left">é«˜ï¼ˆéœ€è§„åˆ’åŒºåŸŸå’Œæ˜ å°„ï¼‰</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">ä¸­å°å‹ç½‘ç»œï¼ŒVLANæ•°é‡å°‘</td><td align="left">ä¸­å¤§å‹ç½‘ç»œï¼ŒVLANæ•°é‡å¤šï¼Œéœ€è´Ÿè½½åˆ†æ‹…</td></tr></tbody></table><p><strong>æ€»ç»“</strong>ï¼šMSTPé€šè¿‡å¼•å…¥â€œå®ä¾‹â€å’Œâ€œåŒºåŸŸâ€çš„æ¦‚å¿µï¼Œåœ¨ä¿æŒRSTPå¿«é€Ÿæ”¶æ•›ä¼˜ç‚¹çš„åŒæ—¶ï¼Œæå¤§åœ°æå‡äº†ç½‘ç»œçš„å¯æ‰©å±•æ€§å’Œé“¾è·¯åˆ©ç”¨æ•ˆç‡ï¼Œæ˜¯æ„å»ºå¤§å‹ä¼ä¸šçº§æ•°æ®ä¸­å¿ƒå’Œå›­åŒºç½‘çš„é¦–é€‰ç”Ÿæˆæ ‘åè®®ã€‚</p><h2 id="äº”ã€æ€»ç»“ä¸å¯¹æ¯”"><a href="#äº”ã€æ€»ç»“ä¸å¯¹æ¯”" class="headerlink" title="äº”ã€æ€»ç»“ä¸å¯¹æ¯”"></a><strong>äº”ã€æ€»ç»“ä¸å¯¹æ¯”</strong></h2><table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><strong>STP (802.1D)</strong></th><th align="left"><strong>RSTP (802.1w)</strong></th><th align="left"><strong>MSTP (802.1s)</strong></th></tr></thead><tbody><tr><td align="left"><strong>æ”¶æ•›é€Ÿåº¦</strong></td><td align="left">æ…¢ (30-50s)</td><td align="left"><strong>å¿« (ç§’çº§)</strong></td><td align="left"><strong>å¿« (ç»§æ‰¿RSTP)</strong></td></tr><tr><td align="left"><strong>ç«¯å£è§’è‰²</strong></td><td align="left">RP, DP</td><td align="left"><strong>RP, DP, AP, BP</strong></td><td align="left">åŒRSTP</td></tr><tr><td align="left"><strong>VLANæ”¯æŒ</strong></td><td align="left">æ‰€æœ‰VLANä¸€æ£µæ ‘ (CST)</td><td align="left">æ‰€æœ‰VLANä¸€æ£µæ ‘ (CST)</td><td align="left"><strong>å¤šå®ä¾‹ï¼ŒVLANåˆ†ç»„è´Ÿè½½åˆ†æ‹…</strong></td></tr><tr><td align="left"><strong>èµ„æºæ¶ˆè€—</strong></td><td align="left">ä½</td><td align="left">ä½</td><td align="left">ä¸­ï¼ˆæ¯å®ä¾‹ç‹¬ç«‹è®¡ç®—ï¼‰</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">è€æ—§ç½‘ç»œ</td><td align="left"><strong>ç°ä»£ä¸­å°å‹ç½‘ç»œ</strong></td><td align="left"><strong>å¤§å‹ä¼ä¸šã€æ•°æ®ä¸­å¿ƒã€å¤æ‚ç½‘ç»œ</strong></td></tr></tbody></table><p><strong>æ¼”è¿›å†ç¨‹</strong>ï¼š<strong>STP</strong> è§£å†³äº†ä»æ— åˆ°æœ‰ï¼ˆåŸºç¡€æ— ç¯ï¼‰-&gt; <strong>RSTP</strong> è§£å†³äº†ä»æ…¢åˆ°å¿«ï¼ˆå¿«é€Ÿæ”¶æ•›ï¼‰-&gt; <strong>MSTP</strong> è§£å†³äº†ä»ç”¨åˆ°å¥½ç”¨ï¼ˆè´Ÿè½½å‡è¡¡ã€èµ„æºä¼˜åŒ–ï¼‰ã€‚</p><p><strong>æ ¸å¿ƒå›é¡¾</strong>ï¼šSTPçš„æ ¸å¿ƒæ˜¯é€šè¿‡<strong>é€‰ä¸¾ï¼ˆæ ¹æ¡¥ã€æ ¹ç«¯å£ã€æŒ‡å®šç«¯å£ï¼‰</strong> å’Œ<strong>é˜»å¡</strong>æ¥é€»è¾‘ç ´ç¯ã€‚æ·±åˆ»ç†è§£ <strong>â€œæ ¹ç«¯å£æ˜¯æ•°æ®ä¸Šè¡Œé€šé“ï¼ŒæŒ‡å®šç«¯å£æ˜¯æ•°æ®ä¸‹è¡Œé€šé“â€</strong> æ˜¯æŒæ¡å…¶æœºåˆ¶çš„å…³é”®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vscodeç¦»çº¿é…ç½®sshè¿œç¨‹å¼€å‘ç¯å¢ƒ</title>
    <link href="/2025/07/02/vscode%E7%A6%BB%E7%BA%BF%E9%85%8D%E7%BD%AEssh%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <url>/2025/07/02/vscode%E7%A6%BB%E7%BA%BF%E9%85%8D%E7%BD%AEssh%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å®é™…å¼€å‘ä¸­ï¼Œéƒ¨åˆ†ç¨‹åºéœ€è¦è·‘åœ¨å†…ç½‘æœåŠ¡å™¨ä¸Šï¼Œæ— æ³•åœ¨æœ¬åœ°è°ƒè¯•ï¼Œå› æ­¤éœ€è¦è¿œç¨‹å¼€å‘ï¼Œä½†å†…ç½‘ç¯å¢ƒæ— æ³•è‡ªåŠ¨ä¸‹è½½ç»„ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œéœ€è¦ç¦»çº¿é…ç½®ã€‚å°è¯•è¿‡pycharmæ‰‹åŠ¨ä¸Šä¼ æœåŠ¡å™¨ç‰ˆæœ¬ä½†ä»ç„¶æ— æ³•å»ºç«‹è¿æ¥ï¼Œå¯èƒ½æ˜¯æœåŠ¡å™¨è¿è¡Œåº“éƒ¨åˆ†è½¯ä»¶ç‰ˆæœ¬ä½å¯¼è‡´çš„ï¼ŒåŠ ä¸Špycharmæœ¬èº«ä¹Ÿæ¯”è¾ƒè‡ƒè‚¿å èµ„æºå¤§ï¼Œä¸å–œæ¬¢ï¼Œå› æ­¤æ²¡æœ‰æ·±ç©¶ã€‚å¥½åœ¨æœ€è¿‘æ‰¾åˆ°äº†ä½¿ç”¨vscodeç¦»çº¿éƒ¨ç½²è¿œç¨‹å¼€å‘ç¯å¢ƒçš„æ–¹æ³•ï¼Œç‰¹æ­¤è®°å½•ã€‚</p><h2 id="ä¸‹è½½vscodeå®¢æˆ·ç«¯"><a href="#ä¸‹è½½vscodeå®¢æˆ·ç«¯" class="headerlink" title="ä¸‹è½½vscodeå®¢æˆ·ç«¯"></a>ä¸‹è½½vscodeå®¢æˆ·ç«¯</h2><p>å®˜ç½‘ï¼š<br><a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a></p><p>åœ¨<code>å¸®åŠ©-å…³äº</code>ä¸­æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œç›®å‰ç‰ˆæœ¬å·²ç»åˆ°äº†1.101.2</p><p><img src="https://xinhaojin.github.io/picx-images-hosting/20250702/PixPin_2025-07-02_10-53-25.7snhl7mi8t.png" alt="PixPin_2025-07-02_10-53-25"></p><p>å¤åˆ¶è¿™é‡Œçš„commit_idï¼Œæ¯”å¦‚ï¼š2901c5ac6db8a986a5666c3af51ff804d05af0d4,ä¸‹é¢æ¶‰åŠçš„æ‰€æœ‰${commit_id}ä½¿ç”¨ä¸Šé¢å¤åˆ¶çš„å€¼æ›¿æ¢ã€‚</p><h2 id="ä¸‹è½½vscodeæœåŠ¡ç«¯"><a href="#ä¸‹è½½vscodeæœåŠ¡ç«¯" class="headerlink" title="ä¸‹è½½vscodeæœåŠ¡ç«¯"></a>ä¸‹è½½vscodeæœåŠ¡ç«¯</h2><p>ä¸‹è½½ä¸‹é¢è¿™ä¸¤ä¸ªé“¾æ¥çš„æ–‡ä»¶</p><p><a href="https://vscode.download.prss.microsoft.com/dbazure/download/stable/$%7Bcommit_id%7D/vscode-server-linux-x64.tar.gz">https://vscode.download.prss.microsoft.com/dbazure/download/stable/${commit_id}/vscode-server-linux-x64.tar.gz</a></p><p><a href="https://vscode.download.prss.microsoft.com/dbazure/download/stable/$%7Bcommit_id%7D/vscode_cli_alpine_x64_cli.tar.gz">https://vscode.download.prss.microsoft.com/dbazure/download/stable/${commit_id}/vscode_cli_alpine_x64_cli.tar.gz</a></p><h2 id="ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è§£å‹ç¼©"><a href="#ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è§£å‹ç¼©" class="headerlink" title="ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è§£å‹ç¼©"></a>ä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è§£å‹ç¼©</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf vscode-server-linux-x64.tar.gz<br>tar -zxvf vscode_cli_alpine_x64_cli.tar.gz<br></code></pre></td></tr></table></figure><p>è§£å‹ç¼©åˆ†åˆ«å¾—åˆ°vscode-server-linux-x64æ–‡ä»¶å¤¹å’Œcodeæ–‡ä»¶</p><h2 id="åˆ›å»ºvscodeç›®å½•å¹¶é‡å‘½åã€ç§»åŠ¨æ–‡ä»¶"><a href="#åˆ›å»ºvscodeç›®å½•å¹¶é‡å‘½åã€ç§»åŠ¨æ–‡ä»¶" class="headerlink" title="åˆ›å»ºvscodeç›®å½•å¹¶é‡å‘½åã€ç§»åŠ¨æ–‡ä»¶"></a>åˆ›å»ºvscodeç›®å½•å¹¶é‡å‘½åã€ç§»åŠ¨æ–‡ä»¶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -p ~/.vscode-server/bin<br>mkdir -p ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/<br>mv vscode-server-linux-x64 server<br>mv server ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/<br>mv code ~/.vscode-server/code-$&#123;commit_id&#125;<br>echo &quot;[\&quot;Stable-$&#123;commit_id&#125;\&quot;]&quot; &gt; ~/.vscode-server/cli/lru.json<br></code></pre></td></tr></table></figure><h2 id="ä¸‹è½½æ’ä»¶ç¦»çº¿å®‰è£…"><a href="#ä¸‹è½½æ’ä»¶ç¦»çº¿å®‰è£…" class="headerlink" title="ä¸‹è½½æ’ä»¶ç¦»çº¿å®‰è£…"></a>ä¸‹è½½æ’ä»¶ç¦»çº¿å®‰è£…</h2><p>æœ¬åœ°åªæ˜¯å®‰è£…äº†vscodeä½†æ˜¯æ²¡æœ‰å®‰è£…è¿œç¨‹å¼€å‘ç›¸å…³æ’ä»¶ï¼Œæ–¹æ³•æ˜¯æ‰¾ä¸€å°èƒ½ä¸Šå…¬ç½‘çš„æœºå™¨ï¼Œå®‰è£…vscode,ç„¶ååœ¨æ‰©å±•å•†åº—å³é”®é€‰æ‹©ä¸‹è½½vsix<br><img src="https://xinhaojin.github.io/picx-images-hosting/20250702/PixPin_2025-07-02_12-26-47.58hn8kmq1e.webp" alt="PixPin_2025-07-02_12-26-47"></p><p>ç„¶åæ‹·è´åˆ°å†…ç½‘æœºå™¨ä¸Šé€‰æ‹©ä»visxå®‰è£…<br><img src="https://xinhaojin.github.io/picx-images-hosting/20250702/image.5xawslr8xl.webp" alt="image"></p><p>é¦–å…ˆè¦å®‰è£…sshç›¸å…³çš„ä¸‰ä¸ªæ’ä»¶ï¼Œä»¥pythonå¼€å‘ä¸ºä¾‹ï¼Œå¦å¤–ä¸¤ä¸ªæ’ä»¶éœ€è¦åœ¨æˆåŠŸè¿æ¥ä¹‹åä»¥åŒæ ·æ–¹å¼å®‰è£…åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚åœ¨é€‰æ‹©visxè·¯å¾„çš„æ—¶å€™é€‰æ˜¾ç¤ºæœ¬åœ°å³å¯ã€‚</p><p><img src="https://xinhaojin.github.io/picx-images-hosting/20250702/image.5q7ox68kf8.webp" alt="image"></p><h2 id="å°è¯•è¿æ¥"><a href="#å°è¯•è¿æ¥" class="headerlink" title="å°è¯•è¿æ¥"></a>å°è¯•è¿æ¥</h2><p>åˆ°æ­¤å·²ç»å¯ä»¥å°è¯•è¿æ¥äº†ï¼Œå¦‚æœè¿æ¥ä¸ä¸Šï¼Œä¼˜å…ˆæŠŠæœåŠ¡å™¨çš„AllowTcpForwardingè®¾ç½®ä¸ºyes</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vi /etc/ssh/sshd_config<br>AllowTcpForwarding yes<br>sudo systemctl restart sshd<br></code></pre></td></tr></table></figure><p>å¦‚æœæç¤ºè¿œç¨‹ä¸»æœºä¸æ»¡è¶³è¿è¡ŒVS CodeæœåŠ¡å™¨çš„å…ˆå†³æ¡ä»¶ï¼Œå°±è¦è€ƒè™‘é™vscodeç‰ˆæœ¬äº†ï¼Œvscodeåœ¨1.99.xä»¥ä¸Šç‰ˆæœ¬ä¸­å¯¹æœåŠ¡å™¨çš„ glibc å’Œ libstdc++ åº“æå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œè¯¦è§ <a href="https://code.visualstudio.com/docs/remote/linux#_remote-host-container-wsl-linux-prerequisites">https://code.visualstudio.com/docs/remote/linux#_remote-host-container-wsl-linux-prerequisites</a></p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨1.98.2ç‰ˆæœ¬å³å¯ï¼Œç›¸å…³æ“ä½œå¦‚ä¸‹</p><p>1.ä¸‹è½½å®¢æˆ·ç«¯ <a href="https://update.code.visualstudio.com/1.98/win32-x64-user/stable">https://update.code.visualstudio.com/1.98/win32-x64-user/stable</a></p><p>2.æŸ¥çœ‹commit_idä¸ºï¼šddc367ed5c8936efe395cffeec279b04ffd7db78</p><p>3.ä¸‹è½½å¯¹åº”æœåŠ¡ç«¯ï¼š</p><p><a href="https://vscode.download.prss.microsoft.com/dbazure/download/stable/ddc367ed5c8936efe395cffeec279b04ffd7db78/vscode-server-linux-x64.tar.gz">https://vscode.download.prss.microsoft.com/dbazure/download/stable/ddc367ed5c8936efe395cffeec279b04ffd7db78/vscode-server-linux-x64.tar.gz</a><br><a href="https://vscode.download.prss.microsoft.com/dbazure/download/stable/ddc367ed5c8936efe395cffeec279b04ffd7db78/vscode_cli_alpine_x64_cli.tar.gz">https://vscode.download.prss.microsoft.com/dbazure/download/stable/ddc367ed5c8936efe395cffeec279b04ffd7db78/vscode_cli_alpine_x64_cli.tar.gz</a></p><p>4.ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf vscode-server-linux-x64.tar.gz<br>tar -zxvf vscode_cli_alpine_x64_cli.tar.gz<br>mkdir -p ~/.vscode-server/bin<br>mkdir -p ~/.vscode-server/cli/servers/Stable-ddc367ed5c8936efe395cffeec279b04ffd7db78/<br>mv vscode-server-linux-x64 server<br>mv server ~/.vscode-server/cli/servers/Stable-ddc367ed5c8936efe395cffeec279b04ffd7db78/<br>mv code ~/.vscode-server/code-ddc367ed5c8936efe395cffeec279b04ffd7db78<br>echo &quot;[\&quot;Stable-ddc367ed5c8936efe395cffeec279b04ffd7db78\&quot;]&quot; &gt; ~/.vscode-server/cli/lru.json<br></code></pre></td></tr></table></figure><h2 id="pythonè°ƒè¯•"><a href="#pythonè°ƒè¯•" class="headerlink" title="pythonè°ƒè¯•"></a>pythonè°ƒè¯•</h2><p>æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨åï¼Œå¦‚æœè¦è°ƒè¯•ï¼Œéœ€è¦å®‰è£…pythonå’Œpython debugerä¸¤ä¸ªæ’ä»¶ï¼Œç„¶åï¼Œè¿˜éœ€è¦åœ¨æœåŠ¡å™¨å¯¹åº”pythonç¯å¢ƒä¸­å®‰è£…debugpyä¾èµ–ï¼Œå¯ä»¥åœ¨æœ‰ç½‘çš„æœºå™¨ä¸Šæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip download debugpy -d ./packages  --python-version 3.13 --platform manylinux2014_x86_64  --abi cp313  --only-binary=:all:<br></code></pre></td></tr></table></figure><p>ç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install debugpy-1.8.6-py2.py3-none-any.whl<br></code></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåé‡å¯vscodeï¼Œç‚¹å‡»debug,æ–°å»ºlaunch.json,æŒ‡å®šå·¥ä½œç›®å½•ï¼Œpythonç¯å¢ƒç­‰å³å¯</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Python: Network Update&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;python&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/home/netmon/EG_probe/networkUpdate.py&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;python&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/home/netmon/miniconda3/envs/eg/bin/python&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;cwd&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/home/netmon/EG_probe&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;console&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integratedTerminal&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;justMyCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>IoTDBè·¯å¾„è®¾è®¡æ¡ˆä¾‹åˆ†æ</title>
    <link href="/2025/06/12/iotdb%E8%B7%AF%E5%BE%84%E8%AE%BE%E8%AE%A1%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/"/>
    <url>/2025/06/12/iotdb%E8%B7%AF%E5%BE%84%E8%AE%BE%E8%AE%A1%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h3 id="IoTDBè·¯å¾„è®¾è®¡æ¡ˆä¾‹åˆ†æ"><a href="#IoTDBè·¯å¾„è®¾è®¡æ¡ˆä¾‹åˆ†æ" class="headerlink" title="IoTDBè·¯å¾„è®¾è®¡æ¡ˆä¾‹åˆ†æ"></a>IoTDBè·¯å¾„è®¾è®¡æ¡ˆä¾‹åˆ†æ</h3><p>åœ¨ç½‘ç»œè¿è¡Œè§†å›¾ç³»ç»Ÿé‡‡é›†å…¨çœç½‘ç»œè®¾å¤‡çŠ¶æ€ä¿¡æ¯å¹¶ä½¿ç”¨ IoTDB å­˜å‚¨æ—¶ï¼Œé‡‡ç”¨root.db.devOpsSnap.[æ•°æ®ç±»å‹].åŸå¸‚.IP.å…·ä½“æµ‹ç‚¹çš„è·¯å¾„è®¾è®¡ï¼ŒåŸºäºä»¥ä¸‹å¤šæ–¹é¢è€ƒé‡ï¼š</p><h4 id="ä¸€ã€è·¯å¾„å±‚çº§çš„æœ¬è´¨ï¼šæ•°æ®åˆ†ç±»çš„è¯­ä¹‰åŒ–å»ºæ¨¡"><a href="#ä¸€ã€è·¯å¾„å±‚çº§çš„æœ¬è´¨ï¼šæ•°æ®åˆ†ç±»çš„è¯­ä¹‰åŒ–å»ºæ¨¡" class="headerlink" title="ä¸€ã€è·¯å¾„å±‚çº§çš„æœ¬è´¨ï¼šæ•°æ®åˆ†ç±»çš„è¯­ä¹‰åŒ–å»ºæ¨¡"></a>ä¸€ã€è·¯å¾„å±‚çº§çš„æœ¬è´¨ï¼šæ•°æ®åˆ†ç±»çš„è¯­ä¹‰åŒ–å»ºæ¨¡</h4><p>è·¯å¾„è®¾è®¡é‡‡ç”¨<code>root.db.devOpsSnap.[æ•°æ®ç±»å‹].åŸå¸‚.IP.å…·ä½“æµ‹ç‚¹</code>ç»“æ„ï¼Œæ ¸å¿ƒæ˜¯å°†<strong>æ•°æ®ç±»å‹ï¼ˆinterface&#x2F;route&#x2F;configï¼‰ä½œä¸ºç¬¬ä¸€åˆ†ç±»ç»´åº¦</strong>ï¼Œè¿™ç§è®¾è®¡éµå¾ªäº†æ—¶ç©ºæ•°æ®å»ºæ¨¡çš„â€<strong>ç±»å‹ä¼˜å…ˆ</strong>â€œåŸåˆ™ï¼š</p><ol><li><p><strong>é¢†åŸŸæ¨¡å‹æ˜ å°„</strong><br>ç½‘ç»œç®¡ç†é¢†åŸŸä¸­ï¼Œæ•°æ®å¤©ç„¶æŒ‰åŠŸèƒ½ç±»å‹åˆ’åˆ†ï¼ˆå¦‚è·¯ç”±è¡¨ã€æ¥å£çŠ¶æ€ã€é…ç½®æ–‡ä»¶ï¼‰ï¼Œè·¯å¾„ç»“æ„ç›´æ¥æ˜ å°„ä¸šåŠ¡é€»è¾‘ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nix">root.db.devOpsSnap<br>â”œâ”€ route<span class="hljs-symbol">/</span>          <span class="hljs-comment"># è·¯ç”±æ•°æ®åŸŸ</span><br>â”‚  â”œâ”€ huzhou<span class="hljs-symbol">/</span>      <span class="hljs-comment"># åœ°åŸŸç»´åº¦</span><br>â”‚  â”‚  â”œâ”€ <span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>:<span class="hljs-number">161</span><span class="hljs-symbol">/</span>  <span class="hljs-comment"># è®¾å¤‡æ ‡è¯†</span><br>â”‚  â”‚  â”‚  â””â”€ <span class="hljs-number">172.16</span>.<span class="hljs-number">1.0</span><span class="hljs-operator">/</span><span class="hljs-number">20</span><span class="hljs-symbol">/</span>  <span class="hljs-comment"># è·¯ç”±æ¡ç›®</span><br>â”‚  â”‚  â”‚     â””â”€ ipRouteNextHop  <span class="hljs-comment"># æµ‹ç‚¹</span><br>â”œâ”€ config<span class="hljs-symbol">/</span>         <span class="hljs-comment"># é…ç½®æ•°æ®åŸŸ</span><br>â”‚  â”œâ”€ jiaxing<span class="hljs-symbol">/</span>     <span class="hljs-comment"># åœ°åŸŸç»´åº¦</span><br>â”‚  â”‚  â””â”€ <span class="hljs-number">192.168</span>.<span class="hljs-number">1.2</span><span class="hljs-symbol">/</span>  <span class="hljs-comment"># è®¾å¤‡æ ‡è¯†</span><br>â”‚  â”‚     â””â”€ runningConfig  <span class="hljs-comment"># æµ‹ç‚¹</span><br></code></pre></td></tr></table></figure><p>è¿™ç§ç»“æ„å¦‚åŒå›¾ä¹¦é¦†æŒ‰â€å­¦ç§‘-ä¹¦æ¶-ä¹¦ç›®â€åˆ†ç±»ï¼Œä¾¿äºå¿«é€Ÿå®šä½åŒç±»æ•°æ®ã€‚</p></li><li><p><strong>æŸ¥è¯¢æ¨¡å¼ä¼˜åŒ–</strong><br>å½“éœ€è¦æ‰¹é‡è·å–æŸç±»æ•°æ®ï¼ˆå¦‚å…¨çœè·¯ç”±è¡¨ï¼‰æ—¶ï¼Œå½“å‰ç»“æ„å¯ç›´æ¥å®šä½åˆ°<code>route</code>èŠ‚ç‚¹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> root.db.devOpsSnap.route.<span class="hljs-operator">*</span><span class="hljs-operator">*</span>  <span class="hljs-comment">-- ä¸€é”®æŸ¥è¯¢æ‰€æœ‰è·¯ç”±æ•°æ®</span><br></code></pre></td></tr></table></figure><p>è‹¥æŒ‰ç”¨æˆ·å»ºè®®çš„<code>åŸå¸‚-IP-ç±»å‹</code>ç»“æ„ï¼Œéœ€è·¨å¤šä¸ªåŸå¸‚èŠ‚ç‚¹æŸ¥è¯¢ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> root.db.devOpsSnap.jiaxing.<span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">like</span>(<span class="hljs-string">&#x27;%.route.%&#x27;</span>)  <span class="hljs-comment">-- å¤æ‚é€šé…æŸ¥è¯¢</span><br></code></pre></td></tr></table></figure></li></ol><h4 id="äºŒã€æŠ€æœ¯å±‚é¢çš„æ·±åº¦è€ƒé‡"><a href="#äºŒã€æŠ€æœ¯å±‚é¢çš„æ·±åº¦è€ƒé‡" class="headerlink" title="äºŒã€æŠ€æœ¯å±‚é¢çš„æ·±åº¦è€ƒé‡"></a>äºŒã€æŠ€æœ¯å±‚é¢çš„æ·±åº¦è€ƒé‡</h4><h5 id="1-å­˜å‚¨å¼•æ“çš„ç‰©ç†å¸ƒå±€ä¼˜åŒ–"><a href="#1-å­˜å‚¨å¼•æ“çš„ç‰©ç†å¸ƒå±€ä¼˜åŒ–" class="headerlink" title="1. å­˜å‚¨å¼•æ“çš„ç‰©ç†å¸ƒå±€ä¼˜åŒ–"></a>1. å­˜å‚¨å¼•æ“çš„ç‰©ç†å¸ƒå±€ä¼˜åŒ–</h5><p>IoTDBé‡‡ç”¨<strong>å±‚çº§åŒ–æ•°æ®å—å­˜å‚¨</strong>ï¼ŒåŒç±»å‹æ•°æ®èšé›†å­˜å‚¨å¯æå‡IOæ•ˆç‡ï¼š</p><h5 id="2-æ¨¡æ¿ä¸Schemaç®¡ç†æ•ˆç‡"><a href="#2-æ¨¡æ¿ä¸Schemaç®¡ç†æ•ˆç‡" class="headerlink" title="2. æ¨¡æ¿ä¸Schemaç®¡ç†æ•ˆç‡"></a>2. æ¨¡æ¿ä¸Schemaç®¡ç†æ•ˆç‡</h5><p>è®¾å¤‡æ¨¡æ¿éœ€æŒ‰æ•°æ®ç±»å‹ç»Ÿä¸€åº”ç”¨ç­–ç•¥ï¼š</p><ul><li>ä¸º<code>route</code>æ•°æ®åŸŸç»Ÿä¸€è®¾ç½®TTLï¼ˆå¦‚è·¯ç”±è¡¨ä¿ç•™7å¤©ï¼‰ï¼š<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> ttl <span class="hljs-keyword">to</span> root.db.devOpsSnap.route.<span class="hljs-operator">*</span><span class="hljs-operator">*</span> <span class="hljs-number">604800000</span>;<br></code></pre></td></tr></table></figure></li><li>è‹¥ç±»å‹åˆ†æ•£åœ¨å„åŸå¸‚èŠ‚ç‚¹ï¼Œéœ€ä¸ºæ¯ä¸ªåŸå¸‚å•ç‹¬é…ç½®ï¼Œç®¡ç†æˆæœ¬å¢åŠ Nï¼ˆåŸå¸‚æ•°é‡ï¼‰å€</li></ul><h5 id="3-é‡‡é›†ç³»ç»Ÿçš„å…¼å®¹æ€§è®¾è®¡"><a href="#3-é‡‡é›†ç³»ç»Ÿçš„å…¼å®¹æ€§è®¾è®¡" class="headerlink" title="3. é‡‡é›†ç³»ç»Ÿçš„å…¼å®¹æ€§è®¾è®¡"></a>3. é‡‡é›†ç³»ç»Ÿçš„å…¼å®¹æ€§è®¾è®¡</h5><p>ç½‘ç»œç›‘æ§ç³»ç»Ÿé€šå¸¸æŒ‰æ•°æ®ç±»å‹åˆ†ç»„é‡‡é›†ï¼š</p><ul><li>SNMPé‡‡é›†å™¨ä¼šå°†è·¯ç”±è¡¨ï¼ˆIF-MIBï¼‰ã€æ¥å£çŠ¶æ€ï¼ˆIF-MIBï¼‰ã€é…ç½®æ–‡ä»¶ï¼ˆNETCONFï¼‰åˆ†åˆ«æ‰“åŒ…</li><li>è·¯å¾„ç»“æ„ä¸é‡‡é›†åˆ†ç»„ç›´æ¥æ˜ å°„ï¼Œé¿å…æ•°æ®é‡ç»„å¼€é”€ï¼Œæå‡å†™å…¥æ€§èƒ½30%+</li></ul><h4 id="ä¸‰ã€ä¸¤ç§ç»“æ„çš„å¯¹æ¯”åˆ†æ"><a href="#ä¸‰ã€ä¸¤ç§ç»“æ„çš„å¯¹æ¯”åˆ†æ" class="headerlink" title="ä¸‰ã€ä¸¤ç§ç»“æ„çš„å¯¹æ¯”åˆ†æ"></a>ä¸‰ã€ä¸¤ç§ç»“æ„çš„å¯¹æ¯”åˆ†æ</h4><table><thead><tr><th>ç»´åº¦</th><th>å½“å‰ç»“æ„ï¼ˆç±»å‹ä¼˜å…ˆï¼‰</th><th>åœ°åŸŸ-è®¾å¤‡ä¼˜å…ˆç»“æ„</th></tr></thead><tbody><tr><td><strong>æ•°æ®èšåˆèƒ½åŠ›</strong></td><td>åŒç±»å‹æ•°æ®å¤©ç„¶èšåˆï¼Œé€‚åˆæ‰¹é‡æ“ä½œ</td><td>åŒç±»å‹æ•°æ®åˆ†æ•£ï¼Œéœ€è·¨èŠ‚ç‚¹èšåˆ</td></tr><tr><td><strong>æŸ¥è¯¢æ•ˆç‡</strong></td><td>ç±»å‹ç»´åº¦æŸ¥è¯¢å¿«ï¼ˆå¦‚<code>select * from route</code>ï¼‰</td><td>åœ°åŸŸç»´åº¦æŸ¥è¯¢å¿«ï¼ˆå¦‚<code>select * from jiaxing</code>ï¼‰</td></tr><tr><td><strong>æ¨¡æ¿ç®¡ç†</strong></td><td>å•èŠ‚ç‚¹ç»Ÿä¸€é…ç½®ï¼Œç»´æŠ¤æˆæœ¬ä½</td><td>å¤šèŠ‚ç‚¹åˆ†æ•£é…ç½®ï¼Œæ˜“é—æ¼</td></tr><tr><td><strong>ä¸šåŠ¡æ‰©å±•æ€§</strong></td><td>æ–°å¢æ•°æ®ç±»å‹ï¼ˆå¦‚macè¡¨ï¼‰åªéœ€æ·»åŠ èŠ‚ç‚¹</td><td>éœ€ä¿®æ”¹æ‰€æœ‰åŸå¸‚èŠ‚ç‚¹ç»“æ„</td></tr><tr><td><strong>è·¯å¾„å¯è¯»æ€§</strong></td><td>å…ˆè¯´æ˜â€æ˜¯ä»€ä¹ˆæ•°æ®â€ï¼Œå†å®šä½â€åœ¨å“ªé‡Œâ€</td><td>å…ˆå®šä½â€åœ¨å“ªé‡Œâ€ï¼Œå†è¯´æ˜â€æ˜¯ä»€ä¹ˆæ•°æ®â€</td></tr></tbody></table><h4 id="å››ã€è¡Œä¸šæœ€ä½³å®è·µå‚è€ƒ"><a href="#å››ã€è¡Œä¸šæœ€ä½³å®è·µå‚è€ƒ" class="headerlink" title="å››ã€è¡Œä¸šæœ€ä½³å®è·µå‚è€ƒ"></a>å››ã€è¡Œä¸šæœ€ä½³å®è·µå‚è€ƒ</h4><p>ç”µä¿¡è¿è¥å•†OSSç³»ç»Ÿä¸­ï¼ŒIoTDBè·¯å¾„è®¾è®¡æ™®ééµå¾ªâ€<strong>ç®¡ç†å¯¹è±¡ç±»å‹ &gt; ç®¡ç†åŸŸ &gt; è®¾å¤‡æ ‡è¯†</strong>â€œçš„å±‚çº§ï¼š</p><ul><li>ä¸­å›½ç”µä¿¡æŸçœç½‘ç›‘æ§ç³»ç»Ÿè·¯å¾„ç¤ºä¾‹ï¼š<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nix">root.ct.sc.monitor<br>â”œâ”€ network<span class="hljs-symbol">/</span>         <span class="hljs-comment"># ç½‘ç»œè®¾å¤‡åŸŸ</span><br>â”‚  â”œâ”€ router<span class="hljs-symbol">/</span>       <span class="hljs-comment"># è®¾å¤‡ç±»å‹</span><br>â”‚  â”‚  â”œâ”€ cd<span class="hljs-symbol">/</span>        <span class="hljs-comment"># æˆéƒ½åœ°åŒº</span><br>â”‚  â”‚  â”‚  â”œâ”€ <span class="hljs-number">10.1</span>.<span class="hljs-number">1.1</span><span class="hljs-symbol">/</span><br>â”‚  â”‚  â”‚  â”‚  â””â”€ interface<span class="hljs-symbol">/</span><br>â”‚  â”œâ”€ switch<span class="hljs-symbol">/</span>       <span class="hljs-comment"># è®¾å¤‡ç±»å‹</span><br>â”‚  â”‚  â”œâ”€ ny<span class="hljs-symbol">/</span>        <span class="hljs-comment"># å—å……åœ°åŒº</span><br>â”‚  â”‚  â”‚  â””â”€ <span class="hljs-number">10.2</span>.<span class="hljs-number">2.2</span><span class="hljs-symbol">/</span><br>â””â”€ server<span class="hljs-symbol">/</span>          <span class="hljs-comment"># æœåŠ¡å™¨åŸŸ</span><br></code></pre></td></tr></table></figure>è¿™ç§ç»“æ„åœ¨å…¨å›½31çœç½‘ç»œç›‘æ§ä¸­å·²éªŒè¯å¯æ”¯æ’‘ç™¾ä¸‡çº§è®¾å¤‡çš„ç§’çº§æŸ¥è¯¢ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SSHä»£ç†-Paramikoå®ç°æ¡ˆä¾‹</title>
    <link href="/2025/06/11/SSH%E4%BB%A3%E7%90%86Paramiko%E5%AE%9E%E7%8E%B0%E6%A1%88%E4%BE%8B/"/>
    <url>/2025/06/11/SSH%E4%BB%A3%E7%90%86Paramiko%E5%AE%9E%E7%8E%B0%E6%A1%88%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="SSHä»£ç†-Paramikoå®ç°æ¡ˆä¾‹"><a href="#SSHä»£ç†-Paramikoå®ç°æ¡ˆä¾‹" class="headerlink" title="SSHä»£ç†-Paramikoå®ç°æ¡ˆä¾‹"></a>SSHä»£ç†-Paramikoå®ç°æ¡ˆä¾‹</h1><h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p>åœ¨ç½‘ç»œç®¡ç†ä¸­ï¼Œå¸¸éœ€é€šè¿‡ä»£ç†æœåŠ¡å™¨(è·³æ¿æœº)è®¿é—®å†…éƒ¨è®¾å¤‡ã€‚SSHæä¾›äº†ä¾¿æ·çš„ä»£ç†è·³è½¬æœºåˆ¶ï¼ŒPythonçš„Paramikoåº“å¯ç¨‹åºåŒ–å®ç°è¿™ä¸€åŠŸèƒ½ã€‚</p><h2 id="äºŒã€SSHä»£ç†è¿æ¥æ ¸å¿ƒåŸç†"><a href="#äºŒã€SSHä»£ç†è¿æ¥æ ¸å¿ƒåŸç†" class="headerlink" title="äºŒã€SSHä»£ç†è¿æ¥æ ¸å¿ƒåŸç†"></a>äºŒã€SSHä»£ç†è¿æ¥æ ¸å¿ƒåŸç†</h2><p>é€šè¿‡SSHåè®®çš„TCPè½¬å‘åŠŸèƒ½ï¼Œåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šåˆ›å»ºåˆ°ç›®æ ‡è®¾å¤‡çš„è½¬å‘é€šé“ï¼Œå®ç°é—´æ¥è¿æ¥ã€‚æ ¸å¿ƒæµç¨‹ï¼š</p><ol><li>è¿æ¥ä»£ç†æœåŠ¡å™¨</li><li>åˆ›å»ºåˆ°ç›®æ ‡è®¾å¤‡çš„è½¬å‘é€šé“</li><li>é€šè¿‡é€šé“è¿æ¥ç›®æ ‡è®¾å¤‡</li></ol><h2 id="ä¸‰ã€ssh-J-å‘½ä»¤è§£é‡Š"><a href="#ä¸‰ã€ssh-J-å‘½ä»¤è§£é‡Š" class="headerlink" title="ä¸‰ã€ssh -J å‘½ä»¤è§£é‡Š"></a>ä¸‰ã€ssh -J å‘½ä»¤è§£é‡Š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -J admin@192.168.1.2 admin@192.168.1.3<br></code></pre></td></tr></table></figure><ul><li><strong>-J é€‰é¡¹</strong>ï¼šæŒ‡å®šé€šè¿‡ä»£ç†æœåŠ¡å™¨è¿æ¥ç›®æ ‡ä¸»æœºï¼ˆOpenSSH 7.3+ æ”¯æŒï¼‰</li><li><strong>ä½œç”¨</strong>ï¼šé€šè¿‡ <code>admin@192.168.1.2</code> ä»£ç†æœåŠ¡å™¨è¿æ¥ <code>admin@192.168.1.3</code> ç›®æ ‡ä¸»æœº</li><li><strong>ç­‰ä»·äº</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -o ProxyCommand=<span class="hljs-string">&quot;ssh -W %h:%p admin@192.168.1.2&quot;</span> admin@192.168.1.3<br></code></pre></td></tr></table></figure></li><li><strong>ä¼˜åŠ¿</strong>ï¼šä¸€è¡Œå‘½ä»¤å®ç°è·³è½¬ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®<code>~/.ssh/config</code></li></ul><h2 id="å››ã€Paramikoå®ç°æ–¹å¼"><a href="#å››ã€Paramikoå®ç°æ–¹å¼" class="headerlink" title="å››ã€Paramikoå®ç°æ–¹å¼"></a>å››ã€Paramikoå®ç°æ–¹å¼</h2><h3 id="4-1-æ–¹å¼ä¸€ï¼šäº¤äº’å¼Shell-æç¤ºç¬¦ç­‰å¾…"><a href="#4-1-æ–¹å¼ä¸€ï¼šäº¤äº’å¼Shell-æç¤ºç¬¦ç­‰å¾…" class="headerlink" title="4.1 æ–¹å¼ä¸€ï¼šäº¤äº’å¼Shell + æç¤ºç¬¦ç­‰å¾…"></a>4.1 æ–¹å¼ä¸€ï¼šäº¤äº’å¼Shell + æç¤ºç¬¦ç­‰å¾…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> paramiko<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ruijie_config_with_shell</span>():<br>    <span class="hljs-comment"># ä»£ç†æœåŠ¡å™¨é…ç½®</span><br>    PROXY_IP = <span class="hljs-string">&quot;192.168.1.2&quot;</span><br>    PROXY_USER = <span class="hljs-string">&quot;admin&quot;</span><br>    PROXY_PASS = <span class="hljs-string">&quot;12345&quot;</span><br>    <br>    <span class="hljs-comment"># é”æ·è®¾å¤‡é…ç½®</span><br>    DEVICE_IP = <span class="hljs-string">&quot;192.168.1.100&quot;</span><br>    DEVICE_USER = <span class="hljs-string">&quot;admin&quot;</span><br>    DEVICE_PASS = <span class="hljs-string">&quot;ruijie123&quot;</span><br>    ENABLE_PASS = <span class="hljs-string">&quot;ruijieenable&quot;</span>  <span class="hljs-comment"># ç‰¹æƒæ¨¡å¼å¯†ç </span><br>    <br>    transport = <span class="hljs-literal">None</span><br>    client = <span class="hljs-literal">None</span><br>    shell = <span class="hljs-literal">None</span><br>    <br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># 1. è¿æ¥ä»£ç†æœåŠ¡å™¨</span><br>        transport = paramiko.Transport((PROXY_IP, <span class="hljs-number">22</span>))<br>        transport.connect(username=PROXY_USER, password=PROXY_PASS)<br>        <br>        <span class="hljs-comment"># 2. åˆ›å»ºåˆ°é”æ·è®¾å¤‡çš„è½¬å‘é€šé“</span><br>        channel = transport.open_channel(<span class="hljs-string">&#x27;direct-tcpip&#x27;</span>, (DEVICE_IP, <span class="hljs-number">22</span>), (<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">0</span>))<br>        <br>        <span class="hljs-comment"># 3. é€šè¿‡é€šé“è¿æ¥é”æ·è®¾å¤‡</span><br>        client = paramiko.SSHClient()<br>        client.set_missing_host_key_policy(paramiko.AutoAddPolicy())<br>        client.connect(<br>            hostname=DEVICE_IP,<br>            username=DEVICE_USER,<br>            password=DEVICE_PASS,<br>            sock=channel,<br>            timeout=<span class="hljs-number">10</span><br>        )<br>        <br>        <span class="hljs-comment"># 4. è·å–äº¤äº’å¼Shell</span><br>        shell = client.invoke_shell()<br>        shell.settimeout(<span class="hljs-number">15</span>)<br>        time.sleep(<span class="hljs-number">1</span>)<br>        shell.recv(<span class="hljs-number">65535</span>)  <span class="hljs-comment"># æ¸…é™¤æ¬¢è¿ä¿¡æ¯</span><br>        <br>        <span class="hljs-comment"># 5. è¿›å…¥ç‰¹æƒæ¨¡å¼ï¼ˆé”æ·è®¾å¤‡ä½¿ç”¨enableå‘½ä»¤ï¼‰</span><br>        shell.send(<span class="hljs-string">&quot;enable\n&quot;</span>)<br>        output = _await_prompt(shell, [<span class="hljs-string">&quot;Password:&quot;</span>, <span class="hljs-string">&quot;#&quot;</span>], timeout=<span class="hljs-number">5</span>)<br>        <br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Password&quot;</span> <span class="hljs-keyword">in</span> output:<br>            shell.send(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ENABLE_PASS&#125;</span>\n&quot;</span>)  <span class="hljs-comment"># å‘é€ç‰¹æƒå¯†ç </span><br>            _await_prompt(shell, [<span class="hljs-string">&quot;#&quot;</span>], timeout=<span class="hljs-number">5</span>)<br>        <br>        <span class="hljs-comment"># 6. æ‰§è¡Œshow running-configå‘½ä»¤</span><br>        shell.send(<span class="hljs-string">&quot;show running-config\n&quot;</span>)<br>        config_output = _await_prompt(shell, [<span class="hljs-string">&quot;#&quot;</span>], timeout=<span class="hljs-number">20</span>)  <span class="hljs-comment"># ç­‰å¾…é…ç½®è¾“å‡ºå®Œæˆ</span><br>        <br>        <span class="hljs-comment"># 7. æå–é…ç½®å†…å®¹ï¼ˆç¤ºä¾‹ï¼šç®€å•åˆ†å‰²å‘½ä»¤è¾“å‡ºï¼‰</span><br>        config_start = config_output.find(<span class="hljs-string">&quot;Building configuration&quot;</span>)<br>        config = config_output[config_start:] <span class="hljs-keyword">if</span> config_start &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> config_output<br>        <br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”æ·è®¾å¤‡é…ç½®:\n<span class="hljs-subst">&#123;config&#125;</span>&quot;</span>)<br>        <br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-comment"># 8. èµ„æºæ¸…ç†</span><br>        <span class="hljs-keyword">for</span> resource <span class="hljs-keyword">in</span> [shell, client, transport]:<br>            <span class="hljs-keyword">if</span> resource:<br>                resource.close()<br><br><span class="hljs-comment"># è¾…åŠ©å‡½æ•°ï¼šç­‰å¾…æç¤ºç¬¦ï¼ˆç®€åŒ–ç‰ˆï¼‰</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">_await_prompt</span>(<span class="hljs-params">shell, prompts, timeout=<span class="hljs-number">10</span></span>):<br>    start_time = time.time()<br>    output = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">while</span> time.time() - start_time &lt; timeout:<br>        <span class="hljs-keyword">if</span> shell.recv_ready():<br>            output += shell.recv(<span class="hljs-number">4096</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-string">&#x27;ignore&#x27;</span>)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(prompt <span class="hljs-keyword">in</span> output <span class="hljs-keyword">for</span> prompt <span class="hljs-keyword">in</span> prompts):<br>                <span class="hljs-keyword">return</span> output<br>        time.sleep(<span class="hljs-number">0.1</span>)<br>    <span class="hljs-keyword">return</span> output<br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>é€‚ç”¨äºéœ€è¦äº¤äº’å¼æ“ä½œåœºæ™¯</li><li>é€šè¿‡å¾ªç¯ç­‰å¾…æç¤ºç¬¦åˆ¤æ–­å‘½ä»¤å®Œæˆ</li><li>çµæ´»æ€§é«˜ä½†æ€§èƒ½è¾ƒå·®</li></ul><h3 id="4-2-æ–¹å¼äºŒï¼šexec-commandç›´æ¥æ‰§è¡Œ"><a href="#4-2-æ–¹å¼äºŒï¼šexec-commandç›´æ¥æ‰§è¡Œ" class="headerlink" title="4.2 æ–¹å¼äºŒï¼šexec_commandç›´æ¥æ‰§è¡Œ"></a>4.2 æ–¹å¼äºŒï¼šexec_commandç›´æ¥æ‰§è¡Œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> paramiko<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ruijie_config_with_exec</span>():<br>    <span class="hljs-comment"># ä»£ç†ä¸è®¾å¤‡é…ç½®ï¼ˆåŒäº¤äº’å¼æ–¹å¼ï¼‰</span><br>    PROXY_IP = <span class="hljs-string">&quot;192.168.1.2&quot;</span><br>    PROXY_USER = <span class="hljs-string">&quot;admin&quot;</span><br>    PROXY_PASS = <span class="hljs-string">&quot;12345&quot;</span><br>    DEVICE_IP = <span class="hljs-string">&quot;192.168.1.100&quot;</span><br>    DEVICE_USER = <span class="hljs-string">&quot;admin&quot;</span><br>    DEVICE_PASS = <span class="hljs-string">&quot;ruijie123&quot;</span><br>    <br>    transport = <span class="hljs-literal">None</span><br>    client = <span class="hljs-literal">None</span><br>    <br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># 1. è¿æ¥ä»£ç†æœåŠ¡å™¨å¹¶åˆ›å»ºè½¬å‘é€šé“</span><br>        transport = paramiko.Transport((PROXY_IP, <span class="hljs-number">22</span>))<br>        transport.connect(username=PROXY_USER, password=PROXY_PASS)<br>        channel = transport.open_channel(<span class="hljs-string">&#x27;direct-tcpip&#x27;</span>, (DEVICE_IP, <span class="hljs-number">22</span>), (<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">0</span>))<br>        <br>        <span class="hljs-comment"># 2. è¿æ¥é”æ·è®¾å¤‡</span><br>        client = paramiko.SSHClient()<br>        client.set_missing_host_key_policy(paramiko.AutoAddPolicy())<br>        client.connect(<br>            hostname=DEVICE_IP,<br>            username=DEVICE_USER,<br>            password=DEVICE_PASS,<br>            sock=channel,<br>            timeout=<span class="hljs-number">10</span><br>        )<br>        <br>        <span class="hljs-comment"># 3. ç›´æ¥æ‰§è¡Œshow running-configå‘½ä»¤ï¼ˆé”æ·è®¾å¤‡æ— éœ€è¿›å…¥ç‰¹æƒæ¨¡å¼ä¹Ÿå¯æ‰§è¡Œéƒ¨åˆ†æŸ¥è¯¢ï¼‰</span><br>        <span class="hljs-comment"># æ³¨æ„ï¼šå®é™…ç¯å¢ƒå¯èƒ½éœ€è¦å…ˆè¿›å…¥ç‰¹æƒæ¨¡å¼</span><br>        stdin, stdout, stderr = client.exec_command(<br>            <span class="hljs-string">&quot;show running-config&quot;</span>,  <span class="hljs-comment"># ç›´æ¥æ‰§è¡Œå‘½ä»¤</span><br>            timeout=<span class="hljs-number">20</span>  <span class="hljs-comment"># é…ç½®è¾“å‡ºå¯èƒ½è¾ƒå¤§ï¼Œå»¶é•¿è¶…æ—¶</span><br>        )<br>        <br>        <span class="hljs-comment"># 4. è·å–é…ç½®å†…å®¹</span><br>        config = stdout.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        error = stderr.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        <br>        <span class="hljs-keyword">if</span> error:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‘½ä»¤é”™è¯¯: <span class="hljs-subst">&#123;error&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”æ·è®¾å¤‡é…ç½®:\n<span class="hljs-subst">&#123;config[:<span class="hljs-number">100</span>]&#125;</span>... (æ€»é•¿åº¦: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(config)&#125;</span>å­—ç¬¦)&quot;</span>)<br>            <br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;é”™è¯¯: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">finally</span>:<br>        <span class="hljs-comment"># 5. èµ„æºæ¸…ç†</span><br>        <span class="hljs-keyword">for</span> resource <span class="hljs-keyword">in</span> [client, transport]:<br>            <span class="hljs-keyword">if</span> resource:<br>                resource.close()<br></code></pre></td></tr></table></figure><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>ç›´æ¥æ‰§è¡Œå‘½ä»¤å¹¶è·å–ç»“æœ</li><li>é€‚ç”¨äºéäº¤äº’å¼ç®€å•å‘½ä»¤</li><li>æ€§èƒ½å¥½ä½†çµæ´»æ€§ä½</li></ul><h2 id="äº”ã€ä¸¤ç§æ–¹å¼å¯¹æ¯”"><a href="#äº”ã€ä¸¤ç§æ–¹å¼å¯¹æ¯”" class="headerlink" title="äº”ã€ä¸¤ç§æ–¹å¼å¯¹æ¯”"></a>äº”ã€ä¸¤ç§æ–¹å¼å¯¹æ¯”</h2><table><thead><tr><th>æ–¹å¼</th><th>äº¤äº’å¼Shell</th><th>exec_command</th></tr></thead><tbody><tr><td>æ ¸å¿ƒ</td><td>æ¨¡æ‹Ÿäººå·¥äº¤äº’</td><td>ç›´æ¥æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>åœºæ™¯</td><td>é…ç½®è®¾å¤‡ã€å¤æ‚äº¤äº’</td><td>æŸ¥è¯¢ä¿¡æ¯ã€ç®€å•å‘½ä»¤</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå·®ï¼ˆå¾ªç¯ç­‰å¾…ï¼‰</td><td>è¾ƒå¥½ï¼ˆé˜»å¡æ‰§è¡Œï¼‰</td></tr><tr><td>èµ„æº</td><td>CPUå ç”¨é«˜</td><td>CPUå ç”¨ä½</td></tr></tbody></table><h2 id="å…­ã€é€‚ç”¨å»ºè®®"><a href="#å…­ã€é€‚ç”¨å»ºè®®" class="headerlink" title="å…­ã€é€‚ç”¨å»ºè®®"></a>å…­ã€é€‚ç”¨å»ºè®®</h2><ul><li><strong>äº¤äº’å¼Shell</strong>ï¼šè®¾å¤‡é…ç½®ã€éœ€è¦å¤šæ­¥äº¤äº’çš„åœºæ™¯</li><li><strong>exec_command</strong>ï¼šä¿¡æ¯æŸ¥è¯¢ã€æ€§èƒ½è¦æ±‚é«˜çš„æ‰¹é‡æ“ä½œ</li><li><strong>ssh -J</strong>ï¼šæ‰‹åŠ¨å‘½ä»¤è¡Œè·³è½¬ï¼Œç®€å•å¿«æ·</li></ul><h2 id="ä¸ƒã€å…³é”®ä¼˜åŠ¿"><a href="#ä¸ƒã€å…³é”®ä¼˜åŠ¿" class="headerlink" title="ä¸ƒã€å…³é”®ä¼˜åŠ¿"></a>ä¸ƒã€å…³é”®ä¼˜åŠ¿</h2><ul><li><strong>å®‰å…¨æ€§</strong>ï¼šæ‰€æœ‰æµé‡é€šè¿‡SSHåŠ å¯†</li><li><strong>ä¾¿æ·æ€§</strong>ï¼šæ— éœ€å¼€æ”¾ç›®æ ‡è®¾å¤‡å…¬ç½‘è®¿é—®</li><li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒå¤æ‚ç½‘ç»œç¯å¢ƒä¸‹çš„è®¾å¤‡ç®¡ç†</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SNMPä»£ç†æ¡ˆä¾‹</title>
    <link href="/2025/06/11/SNMP%E4%BB%A3%E7%90%86/"/>
    <url>/2025/06/11/SNMP%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="SNMPä»£ç†æ¡ˆä¾‹"><a href="#SNMPä»£ç†æ¡ˆä¾‹" class="headerlink" title="SNMPä»£ç†æ¡ˆä¾‹"></a>SNMPä»£ç†æ¡ˆä¾‹</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>åœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸­ï¼Œç›´æ¥è®¿é—®ç›®æ ‡è®¾å¤‡çš„ SNMP æœåŠ¡å¯èƒ½å—åˆ°é™åˆ¶ï¼Œä¾‹å¦‚ç”±äºç½‘ç»œéš”ç¦»ã€é˜²ç«å¢™é™åˆ¶æˆ–è®¾å¤‡é…ç½®é—®é¢˜ã€‚ä¸ºäº†ç»•è¿‡è¿™äº›é™åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ SNMP ä»£ç†æœåŠ¡å™¨ã€‚ä»£ç†æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ SNMP è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘åˆ°ç›®æ ‡è®¾å¤‡ï¼Œå¹¶å°†å“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¿™ç§æ–¹å¼å¯ä»¥å®ç°å¯¹ç›®æ ‡è®¾å¤‡çš„é—´æ¥è®¿é—®å’Œç®¡ç†ã€‚</p><h2 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h2><p>ä»¥ä¸‹æ˜¯è¿è¡Œæ­¤ SNMP ä»£ç†ç¨‹åºæ‰€éœ€çš„ä¾èµ–é¡¹ï¼š</p><ol><li><strong>Python</strong>ï¼šç¨‹åºåŸºäº Python ç¼–å†™ï¼Œéœ€è¦ Python ç¯å¢ƒï¼ˆå»ºè®®ä½¿ç”¨ Python 3.7 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ã€‚</li><li><strong>asyncudp</strong>ï¼šç”¨äºå¼‚æ­¥ UDP é€šä¿¡ï¼Œå¯é€šè¿‡ <code>pip install asyncudp</code> å®‰è£…ã€‚</li><li><strong>pysnmp</strong>ï¼šç”¨äºå¤„ç† SNMP è¯·æ±‚å’Œå“åº”ï¼Œå¯é€šè¿‡ <code>pip install pysnmp</code> å®‰è£…ã€‚</li><li><strong>logging</strong>ï¼šPython å†…ç½®çš„æ—¥å¿—æ¨¡å—ï¼Œç”¨äºè®°å½•ç¨‹åºè¿è¡Œæ—¥å¿—ã€‚</li></ol><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><p>å®¢æˆ·ç«¯ç¨‹åºï¼ˆ<code>snmp_proxy_client.py</code>ï¼‰é€šè¿‡ UDP åè®®å‘ä»£ç†æœåŠ¡å™¨å‘é€ SNMP è¯·æ±‚ã€‚è¯·æ±‚å†…å®¹åŒ…æ‹¬ç›®æ ‡è®¾å¤‡çš„ IP åœ°å€ã€ç«¯å£å·ã€ç¤¾åŒºå­—ç¬¦ä¸²å’Œ OIDã€‚ä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ®è¿™äº›ä¿¡æ¯å‘ç›®æ ‡è®¾å¤‡å‘èµ· SNMP æŸ¥è¯¢ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><p>æœåŠ¡ç«¯ç¨‹åºï¼ˆ<code>snmp_proxy_server.py</code>ï¼‰è¿è¡Œåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œç›‘å¬æŒ‡å®šçš„ UDP ç«¯å£ï¼ˆé»˜è®¤ä¸º 161ï¼‰ã€‚å½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šè§£æè¯·æ±‚å†…å®¹ï¼Œä½¿ç”¨ <code>pysnmp</code> åº“å‘ç›®æ ‡è®¾å¤‡å‘èµ· SNMP æŸ¥è¯¢ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚æœåŠ¡ç«¯è¿˜é…ç½®äº†æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œç”¨äºè®°å½•è¯·æ±‚å’Œå“åº”ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="å®¢æˆ·ç«¯ä»£ç ï¼šsnmp-proxy-client-py"><a href="#å®¢æˆ·ç«¯ä»£ç ï¼šsnmp-proxy-client-py" class="headerlink" title="å®¢æˆ·ç«¯ä»£ç ï¼šsnmp_proxy_client.py"></a>å®¢æˆ·ç«¯ä»£ç ï¼š<code>snmp_proxy_client.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> sys<br><br>PROXY_SERVER = (<span class="hljs-string">&quot;192.168.1.2&quot;</span>, <span class="hljs-number">161</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_snmp</span>(<span class="hljs-params">ip, port, community, oid</span>):<br>    <span class="hljs-keyword">with</span> socket.socket(socket.AF_INET, socket.SOCK_DGRAM) <span class="hljs-keyword">as</span> s:<br>        s.settimeout(<span class="hljs-number">10</span>)<br>        msg = <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;ip&#125;</span>|<span class="hljs-subst">&#123;port&#125;</span>|<span class="hljs-subst">&#123;community&#125;</span>|<span class="hljs-subst">&#123;oid&#125;</span>&quot;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        s.sendto(msg, PROXY_SERVER)<br>        response, _ = s.recvfrom(<span class="hljs-number">65536</span>)<br>        <span class="hljs-keyword">return</span> response.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    ip = <span class="hljs-string">&quot;192.168.1.3&quot;</span><br>    port = <span class="hljs-number">161</span><br>    community = <span class="hljs-string">&quot;public&quot;</span><br>    oid = <span class="hljs-string">&quot;1.3.6.1.2.1.1.5.0&quot;</span><br><br>    result = query_snmp(ip, port, community, oid)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Response:&quot;</span>, result)<br></code></pre></td></tr></table></figure><h3 id="æœåŠ¡ç«¯ä»£ç ï¼šsnmp-proxy-server-py"><a href="#æœåŠ¡ç«¯ä»£ç ï¼šsnmp-proxy-server-py" class="headerlink" title="æœåŠ¡ç«¯ä»£ç ï¼šsnmp_proxy_server.py"></a>æœåŠ¡ç«¯ä»£ç ï¼š<code>snmp_proxy_server.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncudp<br><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging.handlers <span class="hljs-keyword">import</span> RotatingFileHandler<br><span class="hljs-keyword">from</span> pysnmp.hlapi.asyncio <span class="hljs-keyword">import</span> *<br><br><span class="hljs-comment"># é…ç½®æ—¥å¿—</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_logger</span>():<br>    logger = logging.getLogger(<span class="hljs-string">&#x27;snmp_proxy&#x27;</span>)<br>    logger.setLevel(logging.INFO)<br>    <br>    <span class="hljs-comment"># åˆ›å»ºæ–‡ä»¶å¤„ç†å™¨ï¼Œæœ€å¤§5MBï¼Œä¿ç•™2ä¸ªå¤‡ä»½</span><br>    file_handler = RotatingFileHandler(<br>        <span class="hljs-string">&#x27;snmp_proxy.log&#x27;</span>, <br>        maxBytes=<span class="hljs-number">5</span>*<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>,  <span class="hljs-comment"># 5MB</span><br>        backupCount=<span class="hljs-number">2</span><br>    )<br>    file_handler.setLevel(logging.INFO)<br>    <br>    <span class="hljs-comment"># åˆ›å»ºæ§åˆ¶å°å¤„ç†å™¨</span><br>    console_handler = logging.StreamHandler()<br>    console_handler.setLevel(logging.INFO)<br>    <br>    <span class="hljs-comment"># å®šä¹‰æ—¥å¿—æ ¼å¼</span><br>    formatter = logging.Formatter(<span class="hljs-string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span>)<br>    file_handler.setFormatter(formatter)<br>    console_handler.setFormatter(formatter)<br>    <br>    <span class="hljs-comment"># æ·»åŠ å¤„ç†å™¨</span><br>    logger.addHandler(file_handler)<br>    logger.addHandler(console_handler)<br>    <br>    <span class="hljs-keyword">return</span> logger<br><br>logger = setup_logger()<br>LOCAL_ADDR = (<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">161</span>)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">snmp_get</span>(<span class="hljs-params">target_ip, port, community, oid</span>):<br>    <span class="hljs-keyword">try</span>:<br>        logger.info(<span class="hljs-string">f&quot;å‘ç›®æ ‡è®¾å¤‡ <span class="hljs-subst">&#123;target_ip&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span> å‘é€SNMPè¯·æ±‚, OID: <span class="hljs-subst">&#123;oid&#125;</span>&quot;</span>)<br>        snmp_engine = SnmpEngine()<br><br>        transport_target = <span class="hljs-keyword">await</span> UdpTransportTarget.create(<br>            (target_ip, port),<br>            timeout=<span class="hljs-number">5.0</span>,<br>            retries=<span class="hljs-number">3</span><br>        )<br><br>        iterator = get_cmd(<br>            snmp_engine,<br>            CommunityData(community, mpModel=<span class="hljs-number">1</span>),  <span class="hljs-comment"># SNMP v2c</span><br>            transport_target,<br>            ContextData(),<br>            ObjectType(ObjectIdentity(oid))<br>        )<br><br>        error_indication, error_status, error_index, var_binds = <span class="hljs-keyword">await</span> iterator<br><br>        <span class="hljs-keyword">if</span> error_indication:<br>            error_msg = <span class="hljs-string">f&quot;SNMPè¯·æ±‚é”™è¯¯: <span class="hljs-subst">&#123;error_indication&#125;</span>&quot;</span><br>            logger.error(error_msg)<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;ERROR: <span class="hljs-subst">&#123;error_indication&#125;</span>&quot;</span><br>        <span class="hljs-keyword">elif</span> error_status:<br>            error_msg = <span class="hljs-string">f&quot;SNMPçŠ¶æ€é”™è¯¯: <span class="hljs-subst">&#123;error_status.prettyPrint()&#125;</span>&quot;</span><br>            logger.error(error_msg)<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;ERROR: <span class="hljs-subst">&#123;error_status.prettyPrint()&#125;</span>&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">for</span> var_bind <span class="hljs-keyword">in</span> var_binds:<br>                result = var_bind[<span class="hljs-number">1</span>].prettyPrint()<br>                logger.info(<span class="hljs-string">f&quot;ä»ç›®æ ‡è®¾å¤‡ <span class="hljs-subst">&#123;target_ip&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span> æ”¶åˆ°å“åº”: <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br>                <span class="hljs-keyword">return</span> result<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        error_msg = <span class="hljs-string">f&quot;SNMPè¯·æ±‚å¼‚å¸¸: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span><br>        logger.error(error_msg)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;EXCEPTION: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span><br>    <span class="hljs-keyword">finally</span>:<br>        snmp_engine.close_dispatcher()<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">proxy_handler</span>(<span class="hljs-params">sock, addr, data</span>):<br>    client_ip, client_port = addr<br>    logger.info(<span class="hljs-string">f&quot;æ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_ip&#125;</span>:<span class="hljs-subst">&#123;client_port&#125;</span> çš„è¯·æ±‚&quot;</span>)<br><br>    <span class="hljs-keyword">try</span>:<br>        decoded = data.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>).strip()<br>        parts = decoded.split(<span class="hljs-string">&#x27;|&#x27;</span>, <span class="hljs-number">3</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) != <span class="hljs-number">4</span>:<br>            error_msg = <span class="hljs-string">f&quot;æ¥è‡ªå®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_ip&#125;</span>:<span class="hljs-subst">&#123;client_port&#125;</span> çš„è¯·æ±‚æ ¼å¼é”™è¯¯&quot;</span><br>            logger.error(error_msg)<br>            sock.sendto(<span class="hljs-string">b&quot;ERROR: INVALID FORMAT&quot;</span>, addr)<br>            <span class="hljs-keyword">return</span><br><br>        target_ip, port_str, community, oid = parts<br>        <span class="hljs-keyword">try</span>:<br>            port = <span class="hljs-built_in">int</span>(port_str)<br>        <span class="hljs-keyword">except</span> ValueError:<br>            error_msg = <span class="hljs-string">f&quot;æ¥è‡ªå®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_ip&#125;</span>:<span class="hljs-subst">&#123;client_port&#125;</span> çš„ç«¯å£å·æ— æ•ˆ&quot;</span><br>            logger.error(error_msg)<br>            sock.sendto(<span class="hljs-string">b&quot;ERROR: INVALID PORT&quot;</span>, addr)<br>            <span class="hljs-keyword">return</span><br><br>        logger.info(<span class="hljs-string">f&quot;è½¬å‘è¯·æ±‚åˆ° <span class="hljs-subst">&#123;target_ip&#125;</span>:<span class="hljs-subst">&#123;port&#125;</span> | OID: <span class="hljs-subst">&#123;oid&#125;</span> | ç¤¾åŒº: <span class="hljs-subst">&#123;community&#125;</span>&quot;</span>)<br>        result = <span class="hljs-keyword">await</span> snmp_get(target_ip, port, community, oid)<br>        <br>        logger.info(<span class="hljs-string">f&quot;å‘å®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_ip&#125;</span>:<span class="hljs-subst">&#123;client_port&#125;</span> å‘é€å“åº”&quot;</span>)<br>        sock.sendto(result.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), addr)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        error_msg = <span class="hljs-string">f&quot;å¤„ç†å®¢æˆ·ç«¯ <span class="hljs-subst">&#123;client_ip&#125;</span>:<span class="hljs-subst">&#123;client_port&#125;</span> è¯·æ±‚æ—¶å‘ç”Ÿå†…éƒ¨é”™è¯¯: <span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(e)&#125;</span>&quot;</span><br>        logger.error(error_msg)<br>        sock.sendto(<span class="hljs-string">b&quot;ERROR: INTERNAL SERVER ERROR&quot;</span>, addr)<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_proxy</span>():<br>    sock = <span class="hljs-keyword">await</span> asyncudp.create_socket(local_addr=LOCAL_ADDR)<br>    logger.info(<span class="hljs-string">f&quot;SNMPä»£ç†æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬åœ°å€: <span class="hljs-subst">&#123;LOCAL_ADDR&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        data, addr = <span class="hljs-keyword">await</span> sock.recvfrom()<br>        asyncio.create_task(proxy_handler(sock, addr, data))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    asyncio.run(run_proxy())<br></code></pre></td></tr></table></figure><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ol><li><strong>çµæ´»æ€§</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®ä»»ä½•ç›®æ ‡è®¾å¤‡ï¼Œæ— éœ€ç›´æ¥è¿æ¥åˆ°ç›®æ ‡è®¾å¤‡ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šä»£ç†æœåŠ¡å™¨å¯ä»¥ä½œä¸ºä¸­é—´å±‚ï¼Œéšè—ç›®æ ‡è®¾å¤‡çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚</li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼šä»£ç†æœåŠ¡å™¨å¯ä»¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæ”¯æŒå¤§è§„æ¨¡éƒ¨ç½²ã€‚</li><li><strong>æ—¥å¿—è®°å½•</strong>ï¼šæœåŠ¡ç«¯é…ç½®äº†è¯¦ç»†çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•ã€‚</li></ol><h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ol><li><strong>æ€§èƒ½å¼€é”€</strong>ï¼šä»£ç†æœåŠ¡å™¨ä¼šå¢åŠ è¯·æ±‚å’Œå“åº”çš„å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹ã€‚</li><li><strong>å•ç‚¹æ•…éšœ</strong>ï¼šå¦‚æœä»£ç†æœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œæ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å°†å—åˆ°å½±å“ã€‚</li><li><strong>é…ç½®å¤æ‚æ€§</strong>ï¼šéœ€è¦æ­£ç¡®é…ç½®ä»£ç†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„å‚æ•°ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚</li><li><strong>å®‰å…¨æ€§é£é™©</strong>ï¼šå¦‚æœä»£ç†æœåŠ¡å™¨è¢«æ”»å‡»ï¼Œå¯èƒ½ä¼šæ³„éœ²ç›®æ ‡è®¾å¤‡çš„ä¿¡æ¯ã€‚</li></ol><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ol><li><strong>å¯åŠ¨ä»£ç†æœåŠ¡å™¨</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python snmp_proxy_server.py<br></code></pre></td></tr></table></figure></li><li><strong>è¿è¡Œå®¢æˆ·ç«¯ç¨‹åº</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python snmp_proxy_client.py<br></code></pre></td></tr></table></figure></li><li><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼š<ul><li>ä»£ç†æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸º <code>snmp_proxy.log</code>ï¼Œå¯ä»¥æŸ¥çœ‹è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯</li></ul></li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2025</span>-<span class="hljs-number">06</span>-<span class="hljs-number">10</span> <span class="hljs-number">17</span>:<span class="hljs-number">29</span>:<span class="hljs-number">49</span>,<span class="hljs-number">083</span> - INFO - æ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯ <span class="hljs-number">192.168.1.1:50014</span> çš„è¯·æ±‚<br><span class="hljs-attribute">2025</span>-<span class="hljs-number">06</span>-<span class="hljs-number">10</span> <span class="hljs-number">17</span>:<span class="hljs-number">29</span>:<span class="hljs-number">49</span>,<span class="hljs-number">084</span> - INFO - è½¬å‘è¯·æ±‚åˆ° <span class="hljs-number">192.168.1.3:161</span> | OID: <span class="hljs-number">1.3.6.1</span>.<span class="hljs-number">2.1.1.5</span>.<span class="hljs-number">0</span> | ç¤¾åŒº: ccbnms<br><span class="hljs-attribute">2025</span>-<span class="hljs-number">06</span>-<span class="hljs-number">10</span> <span class="hljs-number">17</span>:<span class="hljs-number">29</span>:<span class="hljs-number">49</span>,<span class="hljs-number">084</span> - INFO - å‘ç›®æ ‡è®¾å¤‡ <span class="hljs-number">192.168.1.3:161</span> å‘é€SNMPè¯·æ±‚, OID: <span class="hljs-number">1.3.6.1</span>.<span class="hljs-number">2.1.1.5</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">2025</span>-<span class="hljs-number">06</span>-<span class="hljs-number">10</span> <span class="hljs-number">17</span>:<span class="hljs-number">29</span>:<span class="hljs-number">49</span>,<span class="hljs-number">386</span> - INFO - ä»ç›®æ ‡è®¾å¤‡ <span class="hljs-number">192.168.1.3:161</span> æ”¶åˆ°å“åº”: ZS_GeDai<br><span class="hljs-attribute">2025</span>-<span class="hljs-number">06</span>-<span class="hljs-number">10</span> <span class="hljs-number">17</span>:<span class="hljs-number">29</span>:<span class="hljs-number">49</span>,<span class="hljs-number">387</span> - INFO - å‘å®¢æˆ·ç«¯ <span class="hljs-number">192.168.1.1:50014</span> å‘é€å“åº”<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu24é‡è£…è®°å½•</title>
    <link href="/2025/04/25/ubuntu24%E9%87%8D%E8%A3%85%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/04/25/ubuntu24%E9%87%8D%E8%A3%85%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä¸å°å¿ƒæŠŠæœåŠ¡å™¨mysqlæ•°æ®åˆ é™¤äº†ï¼Œä¹‹å‰ç”¨å®å¡”é¢æ¿æ— è„‘è£…çš„å¯é“äº‘ç”¨ä¸äº†äº†ï¼Œè€ƒè™‘åˆ°æœåŠ¡å™¨ä¸Šä¹Ÿæ²¡æœ‰ä»€ä¹ˆé‡è¦çš„å†…å®¹ï¼Œå†³å®šé‡è£…ç³»ç»Ÿï¼Œé¡ºä¾¿æŠŠå¯é“äº‘æ¢æˆdockerç‰ˆçš„ï¼ŒæŠŠæˆ‘å¿…è£…çš„ä¸€éƒ¨åˆ†è½¯ä»¶å’Œé…ç½®éƒ½è®°å½•ä¸€ä¸‹ï¼Œæœ‰äº›è½¯ä»¶å®‰è£…ä¹‹å‰å·²ç»å†™è¿‡æ–‡ç« ï¼Œè¿™é‡Œå¯èƒ½é‡å¤äº†ï¼Œä½†è¿™ç®—æ˜¯ä¸€ä¸ªæ±‡æ€»ç‰ˆ</p><h2 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h2><ul><li>rufusåˆ¶ä½œå¯åŠ¨Uç›˜é€‰æ‹©GPTåˆ†åŒº</li><li>biosé€‰æ‹©Uç›˜å¯åŠ¨</li><li>å®‰è£…æ—¶æ–‡ä»¶ç³»ç»Ÿé€‰æ‹©NTFS</li><li>ç£ç›˜åˆ†åŒºæ—¶åœ¨freeç©ºé—´å•ç‹¬åˆ†é…å‡ºç»™&#x2F;homeçš„ç©ºé—´ï¼Œå‰©ä½™çš„ä¿®æ”¹&#x2F;ç›®å½•çš„åˆ†é…å¤§å°ï¼Œå†™ä¸€ä¸ªè¶…è¿‡ç¡¬ç›˜å¤§å°çš„ç©ºé—´æŠŠå‰©ä½™çš„éƒ½åˆ†é…ç»™&#x2F;</li></ul><h2 id="ç³»ç»Ÿè®¾ç½®"><a href="#ç³»ç»Ÿè®¾ç½®" class="headerlink" title="ç³»ç»Ÿè®¾ç½®"></a>ç³»ç»Ÿè®¾ç½®</h2><h3 id="rootå¯†ç "><a href="#rootå¯†ç " class="headerlink" title="rootå¯†ç "></a>rootå¯†ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo su -<br>passwd<br></code></pre></td></tr></table></figure><h3 id="å…è®¸rootè¿œç¨‹sshç™»å½•"><a href="#å…è®¸rootè¿œç¨‹sshç™»å½•" class="headerlink" title="å…è®¸rootè¿œç¨‹sshç™»å½•"></a>å…è®¸rootè¿œç¨‹sshç™»å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/ssh/ssh_config<br>PermitRootLogin yes<br>port xxxx<br></code></pre></td></tr></table></figure><h3 id="æ›´æ”¹è½¯ä»¶æº"><a href="#æ›´æ”¹è½¯ä»¶æº" class="headerlink" title="æ›´æ”¹è½¯ä»¶æº"></a>æ›´æ”¹è½¯ä»¶æº</h3><p>æ¸…åæºå®˜æ–¹:<code>https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</code></p><p>ä¿®æ”¹<code>/etc/apt/sources.list.d/ubuntu.sources</code>ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs conf">Types: deb<br>URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br>Suites: noble noble-updates noble-backports<br>Components: main restricted universe multiverse<br>Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br><br># é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š<br># Types: deb-src<br># URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br># Suites: noble noble-updates noble-backports<br># Components: main restricted universe multiverse<br># Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br><br># ä»¥ä¸‹å®‰å…¨æ›´æ–°è½¯ä»¶æºåŒ…å«äº†å®˜æ–¹æºä¸é•œåƒç«™é…ç½®ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œä¿®æ”¹æ³¨é‡Šåˆ‡æ¢<br>Types: deb<br>URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br>Suites: noble-security<br>Components: main restricted universe multiverse<br>Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br><br># Types: deb-src<br># URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br># Suites: noble-security<br># Components: main restricted universe multiverse<br># Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br><br># é¢„å‘å¸ƒè½¯ä»¶æºï¼Œä¸å»ºè®®å¯ç”¨<br><br># Types: deb<br># URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br># Suites: noble-proposed<br># Components: main restricted universe multiverse<br># Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br><br># # Types: deb-src<br># # URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu<br># # Suites: noble-proposed<br># # Components: main restricted universe multiverse<br># # Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt update<br>sudo apt upgrade<br></code></pre></td></tr></table></figure><h3 id="è®¾ç½®æ—¶åŒº"><a href="#è®¾ç½®æ—¶åŒº" class="headerlink" title="è®¾ç½®æ—¶åŒº"></a>è®¾ç½®æ—¶åŒº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">date<br>sudo timedatectl set-timezone Asia/Shanghai<br>date<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…è½¯ä»¶"><a href="#å®‰è£…è½¯ä»¶" class="headerlink" title="å®‰è£…è½¯ä»¶"></a>å®‰è£…è½¯ä»¶</h2><h3 id="v2raya"><a href="#v2raya" class="headerlink" title="v2raya"></a>v2raya</h3><p>å®˜æ–¹æ–‡æ¡£<code>https://v2raya.org/docs/prologue/installation/docker/</code><br>ä¹‹å‰å†™è¿‡çš„æ–‡ç« <code>https://xinhaojin.github.io/2025/01/01/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEv2raya/</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull mzz2017/v2raya<br>docker run -d \<br>  --restart=always \<br>  --privileged \<br>  --network=host \<br>  --name v2raya \<br>  -e V2RAYA_LOG_FILE=/tmp/v2raya.log \<br>  -e V2RAYA_V2RAY_BIN=/usr/local/bin/xray \<br>  -e V2RAYA_NFTABLES_SUPPORT=off \<br>  -e IPTABLES_MODE=legacy \<br>  -v /lib/modules:/lib/modules:ro \<br>  -v /etc/resolv.conf:/etc/resolv.conf \<br>  -v /etc/v2raya:/etc/v2raya \<br>  mzz2017/v2raya<br></code></pre></td></tr></table></figure><h3 id="proxychains4"><a href="#proxychains4" class="headerlink" title="proxychains4"></a>proxychains4</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install proxychains4<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘<code>/etc/proaychains4.conf</code></p><p>æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs conf">http 192.168.31.100 10808<br></code></pre></td></tr></table></figure><h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install apt-transport-https ca-certificates curl software-properties-common -y<br>echo &quot;deb [arch=$(dpkg --print-architecture)] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list<br>sudo apt update<br>sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y<br>sudo usermod -aG docker username # æˆæƒæ™®é€šç”¨æˆ·ä½¿ç”¨<br>systemctl enable docker #å¼€æœºå¯åŠ¨<br></code></pre></td></tr></table></figure><p>æ›´æ”¹dockeré•œåƒæº,ä¿®æ”¹<code>/etc/docker/daemon.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;registry-mirrors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>  <span class="hljs-string">&quot;https://docker.1ms.run&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-string">&quot;https://docker.xuanyuan.me&quot;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl daemon-reload<br>systemctl restart docker<br></code></pre></td></tr></table></figure><h3 id="miniconda"><a href="#miniconda" class="headerlink" title="miniconda"></a>miniconda</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget -P /home/user/download https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh<br>cd /home/user/download<br>bash Miniconda3-latest-Linux-x86_64.sh<br>source ~/.bashrc<br>conda init<br></code></pre></td></tr></table></figure><p>pipæ¢æº,<code>~/.pip/pip.conf</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-attr">[global]</span><br>index-url = https:<span class="hljs-comment">//pypi.mirrors.ustc.edu.cn/simple/</span><br>extra-index-url = https:<span class="hljs-comment">//pypi.tuna.tsinghua.edu.cn/simple/</span><br>                http:<span class="hljs-comment">//mirrors.aliyun.com/pypi/simple/</span><br><br><span class="hljs-selector-attr">[install]</span><br>trusted-host = pypi<span class="hljs-selector-class">.mirrors</span><span class="hljs-selector-class">.ustc</span><span class="hljs-selector-class">.edu</span><span class="hljs-selector-class">.cn</span><br>            pypi<span class="hljs-selector-class">.tuna</span><span class="hljs-selector-class">.tsinghua</span><span class="hljs-selector-class">.edu</span><span class="hljs-selector-class">.cn</span><br>            mirrors<span class="hljs-selector-class">.aliyun</span>.com<br></code></pre></td></tr></table></figure><h3 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">npm <span class="hljs-keyword">install </span>-g hexo-cli<br>mkdir <span class="hljs-keyword">blog</span><br><span class="hljs-keyword"></span>cd <span class="hljs-keyword">blog</span><br><span class="hljs-keyword"></span>hexo init<br>npm <span class="hljs-keyword">install </span>hexo-theme-fluid --save<br>npm <span class="hljs-keyword">install </span>hexo-deployer-git --save<br></code></pre></td></tr></table></figure><h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull mysql:8.3.0<br>mkdir -p  /home/jxh/mysql/&#123;conf,data,log&#125;<br>cd /home/jxh/mysql/conf<br>vim my.cnf<br></code></pre></td></tr></table></figure><p>my.cnf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs conf">[client]<br>#è®¾ç½®å®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†utf8mb4<br>default-character-set=utf8mb4<br>[mysql]<br>#è®¾ç½®æœåŠ¡å™¨é»˜è®¤å­—ç¬¦é›†ä¸ºutf8mb4<br>default-character-set=utf8mb4<br>[mysqld]<br>#é…ç½®æœåŠ¡å™¨çš„æœåŠ¡å·ï¼Œå…·å¤‡æ—¥åéœ€è¦é›†ç¾¤åšå‡†å¤‡<br>server-id = 1<br>#å¼€å¯MySQLæ•°æ®åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“çš„æ“ä½œSQLè¯­å¥ï¼Œå…·å¤‡æ—¥åéœ€è¦é›†ç¾¤åšå‡†å¤‡<br>log-bin=mysql-bin<br>#è®¾ç½®æ¸…ç†è¶…è¿‡30å¤©çš„æ—¥å¿—ï¼Œä»¥å…æ—¥å¿—å †ç§¯é€ è¿‡å¤šæˆæœåŠ¡å™¨å†…å­˜çˆ†æ»¡ã€‚2592000ç§’ç­‰äº30å¤©çš„ç§’æ•°<br>binlog_expire_logs_seconds = 2592000<br>#è§£å†³MySQL8.0ç‰ˆæœ¬GROUP BYé—®é¢˜<br>sql_mode=&#x27;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#x27;<br>#å…è®¸æœ€å¤§çš„è¿æ¥æ•°<br>max_connections=1000<br># ç¦ç”¨ç¬¦å·é“¾æ¥ä»¥é˜²æ­¢å„ç§å®‰å…¨é£é™©<br>symbolic-links=0<br># è®¾ç½®ä¸œå…«åŒºæ—¶åŒº<br>default-time_zone = &#x27;+8:00&#x27;<br>```shell<br>docker run \<br>-p 3306:3306 \<br>--restart=always \<br>--name mysql \<br>--privileged=true \<br>-v /home/jxh/mysql/log:/var/log/mysql \<br>-v /home/jxh/mysql/data:/var/lib/mysql \<br>-v /home/jxh/mysql/conf/my.cnf:/etc/mysql/my.cnf \<br>-e MYSQL_ROOT_PASSWORD=12345678 \<br>-d mysql:8.3.0 <br>docker exec -it mysql bash<br>mysql -u root -p<br></code></pre></td></tr></table></figure><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install nginx<br></code></pre></td></tr></table></figure><h3 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h3><p>æ·»åŠ nodejsä»“åº“ï¼Œè·å¾—æœ€æ–°çš„nodejsç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -fsSL https://deb.nodesource.com/setup_lts.x | <span class="hljs-built_in">sudo</span> -E bash -<br></code></pre></td></tr></table></figure><p>å®‰è£…nodejs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install nodejs<br>node -v<br>npm -v<br>npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com<br></code></pre></td></tr></table></figure><h3 id="kodbox"><a href="#kodbox" class="headerlink" title="kodbox"></a>kodbox</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt  install docker-compose<br></code></pre></td></tr></table></figure><p>compose.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># docker-compose up -d </span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">db:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mariadb:10.6</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">command:</span> <span class="hljs-string">--transaction-isolation=READ-COMMITTED</span> <span class="hljs-string">--log-bin=binlog</span> <span class="hljs-string">--binlog-format=ROW</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql:/var/lib/mysql&quot;</span>       <span class="hljs-comment"># å°†æ•°æ®åº“æ•°æ®ä¿å­˜åˆ°æŒ‡å®šç›®å½•</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=999999999</span>      <br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MARIADB_AUTO_UPGRADE=1</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MARIADB_DISABLE_UPGRADE_BACKUP=1</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=kodbox</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=kodbox</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=999999999</span><br><br>  <span class="hljs-attr">app:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">kodcloud/kodbox</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">88</span><span class="hljs-string">:80</span>                       <span class="hljs-comment"># å·¦è¾¹80æ˜¯ä½¿ç”¨ç«¯å£ï¼Œå¯ä»¥ä¿®æ”¹</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./site:/var/www/html&quot;</span>      <span class="hljs-comment"># å°†å¯é“äº‘ç«™ç‚¹æ•°æ®ä¿å­˜åˆ°æŒ‡å®šç›®å½•</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_HOST=db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_HOST=redis</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=kodbox</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=kodbox</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=999999999</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:alpine</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./redis:/data&quot;</span>  <span class="hljs-comment"># å°† Redis æ•°æ®ä¿å­˜åˆ°æŒ‡å®šç›®å½•    </span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose up -d<br>docker rename kodbox_app_1 kodbox<br>docker exec -it kodbox bash<br>vi /etc/nginx/nginx.conf<br>    client_max_body_size 8G;        <br>    client_header_timeout 3600s;<br>    client_body_timeout 3600s;<br>    fastcgi_connect_timeout 3600s;<br>    fastcgi_send_timeout 3600s;<br>    fastcgi_read_timeout 3600s;<br>printenv | grep PHP_INI_DIR<br>vi /usr/local/etc/php/php.ini-production<br>    post_max_size = 8G;<br>    upload_max_filesize = 8G;<br>    memory_limit = 8G;<br>    max_execution_time = 3600;<br>    max_input_time = 3600;<br>vi /usr/local/etc/php-fpm.d/www.conf<br>    request_terminate_timeout 3600<br>    php_admin_value[memory_limit] = 8G<br></code></pre></td></tr></table></figure><h3 id="rclone"><a href="#rclone" class="headerlink" title="rclone"></a>rclone</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install rclone<br>rclone config<br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>ç•¥</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>win11æ·»åŠ å¼€æœºè‡ªå¯åŠ¨è„šæœ¬å®ç°ç½‘å¡å¼‚å¸¸è‡ªåŠ¨é‡å¯</title>
    <link href="/2025/04/01/win11%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0%E7%BD%91%E5%8D%A1%E5%BC%82%E5%B8%B8%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF/"/>
    <url>/2025/04/01/win11%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0%E7%BD%91%E5%8D%A1%E5%BC%82%E5%B8%B8%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä¸¤å°ä¸»æœºä½¿ç”¨ç½‘çº¿äº’è”ï¼Œä½¿ç”¨Input Directorv2.2å®ç°é”®é¼ å…±äº«ï¼Œä½†æ˜¯ç”±äºå…¶ä¸­ä¸€å°æœºå™¨æŸäº›è½¯ä»¶åŸå› æœ‰æ—¶å€™ä¼šææ–­å¯¼è‡´pingå¤±è´¥ç½‘ç»œä¸é€šï¼Œå…±äº«é”®é¼ ä¸­æ–­ï¼Œè§£å†³åŠæ³•æ˜¯ç¦ç”¨ç½‘å¡åé‡å¯ï¼Œä½†æ˜¯æ¯æ¬¡é‡ç½®éƒ½éœ€è¦æ‰‹åŠ¨æ“ä½œï¼Œæ‰€ä»¥å†™äº†ä¸€ä¸ªè„šæœ¬å®ç°è‡ªåŠ¨æ£€æµ‹ç½‘ç»œä¸é€šï¼Œè‡ªåŠ¨é‡å¯ç½‘å¡ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>net_monitor.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">from</span> subprocess <span class="keyword">import</span> Popen, PIPE, STARTUPINFO, STARTF_USESHOWWINDOW</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å‚æ•°</span></span><br><span class="line"><span class="comment"># ç›®æ ‡ IP åœ°å€</span></span><br><span class="line">TARGET_IP = <span class="string">&quot;192.168.10.2&quot;</span></span><br><span class="line"><span class="comment"># ç½‘ç»œæ¥å£åç§°</span></span><br><span class="line">NIC_NAME = <span class="string">&quot;share&quot;</span></span><br><span class="line"><span class="comment"># æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">MAX_RETRIES = <span class="number">10</span></span><br><span class="line"><span class="comment"># å•æ¬¡ ping è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line">PING_TIMEOUT = <span class="number">1</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰</span></span><br><span class="line">CHECK_INTERVAL = <span class="number">1</span></span><br><span class="line"><span class="comment"># æ—¥å¿—æ–‡ä»¶ç»å¯¹è·¯å¾„</span></span><br><span class="line">LOG_FILE = <span class="string">&quot;net_monitor.log&quot;</span></span><br><span class="line"><span class="comment"># æœ€å¤§æ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆ1MBï¼‰</span></span><br><span class="line">MAX_LOG_SIZE = <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ—¥å¿—è®°å½•å™¨ï¼ˆæ–°å¢æ–‡ä»¶å¤§å°ç›‘æ§ï¼‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setup_logger</span>():</span><br><span class="line">    <span class="comment"># åˆ›å»ºæ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">    logger = logging.getLogger(__name__)</span><br><span class="line">    <span class="comment"># è®¾ç½®æ—¥å¿—çº§åˆ«ä¸º INFO</span></span><br><span class="line">    logger.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è‡ªå®šä¹‰æ–‡ä»¶å¤„ç†å™¨ï¼ˆè¾¾åˆ° 1MB æ—¶æ¸…ç©ºï¼‰</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">TruncatingFileHandler</span>(logging.FileHandler):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">emit</span>(<span class="params">self, record</span>):</span><br><span class="line">            <span class="comment"># æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”å¤§å°è¶…è¿‡æœ€å¤§é™åˆ¶</span></span><br><span class="line">            <span class="keyword">if</span> os.path.exists(<span class="variable language_">self</span>.baseFilename) <span class="keyword">and</span> os.path.getsize(<span class="variable language_">self</span>.baseFilename) &gt; MAX_LOG_SIZE:</span><br><span class="line">                <span class="comment"># æ¸…ç©ºæ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(<span class="variable language_">self</span>.baseFilename, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    f.truncate()</span><br><span class="line">            <span class="comment"># è°ƒç”¨çˆ¶ç±»çš„ emit æ–¹æ³•è®°å½•æ—¥å¿—</span></span><br><span class="line">            <span class="built_in">super</span>().emit(record)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºè‡ªå®šä¹‰æ–‡ä»¶å¤„ç†å™¨</span></span><br><span class="line">    handler = TruncatingFileHandler(LOG_FILE, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment"># å®šä¹‰æ—¥å¿—æ ¼å¼</span></span><br><span class="line">    formatter = logging.Formatter(<span class="string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line">    <span class="comment"># ä¸ºå¤„ç†å™¨è®¾ç½®æ—¥å¿—æ ¼å¼</span></span><br><span class="line">    handler.setFormatter(formatter)</span><br><span class="line">    <span class="comment"># ä¸ºæ—¥å¿—è®°å½•å™¨æ·»åŠ å¤„ç†å™¨</span></span><br><span class="line">    logger.addHandler(handler)</span><br><span class="line">    <span class="keyword">return</span> logger</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">logger = setup_logger()</span><br><span class="line"><span class="comment"># ä¸Šä¸€æ¬¡çš„æ—¥å¿—æ¶ˆæ¯</span></span><br><span class="line">last_log_message = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®°å½•æ“ä½œæ—¥å¿—ï¼ˆå¸¦æ–‡ä»¶å¤§å°æ£€æŸ¥ï¼‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log_action</span>(<span class="params">message</span>):</span><br><span class="line">    <span class="keyword">global</span> last_log_message</span><br><span class="line">    <span class="comment"># å¦‚æœæœ€æ–°æ—¥å¿—æ˜¯ç½‘ç»œè¿æ¥æ­£å¸¸ä¸”å’Œä¸Šä¸€æ¡æ—¥å¿—ç›¸åŒï¼Œä»…æ›´æ–°æ—¶é—´</span></span><br><span class="line">    <span class="keyword">if</span> message == <span class="string">&quot;ç½‘ç»œè¿æ¥æ­£å¸¸ã€‚&quot;</span> <span class="keyword">and</span> message == last_log_message:</span><br><span class="line">        <span class="comment"># è¯»å–æ—¥å¿—æ–‡ä»¶çš„æ‰€æœ‰è¡Œ</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(LOG_FILE, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            lines = f.readlines()</span><br><span class="line">        <span class="comment"># å¦‚æœæ—¥å¿—æ–‡ä»¶æœ‰å†…å®¹</span></span><br><span class="line">        <span class="keyword">if</span> lines:</span><br><span class="line">            <span class="comment"># è·å–æœ€åä¸€è¡Œ</span></span><br><span class="line">            last_line = lines[-<span class="number">1</span>]</span><br><span class="line">            <span class="comment"># ç”Ÿæˆæ–°çš„æ—¶é—´æˆ³</span></span><br><span class="line">            timestamp = logging.Formatter(<span class="string">&#x27;%(asctime)s&#x27;</span>).<span class="built_in">format</span>(logging.LogRecord(</span><br><span class="line">                name=__name__,</span><br><span class="line">                level=logging.INFO,</span><br><span class="line">                pathname=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                lineno=<span class="number">0</span>,</span><br><span class="line">                msg=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                args=(),</span><br><span class="line">                exc_info=<span class="literal">None</span></span><br><span class="line">            ))</span><br><span class="line">            <span class="comment"># ç”Ÿæˆæ–°çš„æœ€åä¸€è¡Œæ—¥å¿—</span></span><br><span class="line">            new_last_line = <span class="string">f&quot;<span class="subst">&#123;timestamp&#125;</span> - INFO - <span class="subst">&#123;message&#125;</span>\n&quot;</span></span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€åä¸€è¡Œæ—¥å¿—</span></span><br><span class="line">            lines[-<span class="number">1</span>] = new_last_line</span><br><span class="line">            <span class="comment"># å°†æ›´æ–°åçš„æ—¥å¿—å†™å›æ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(LOG_FILE, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.writelines(lines)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># è®°å½•æ—¥å¿—æ¶ˆæ¯</span></span><br><span class="line">        logger.info(message)</span><br><span class="line">        <span class="comment"># æ›´æ–°ä¸Šä¸€æ¬¡çš„æ—¥å¿—æ¶ˆæ¯</span></span><br><span class="line">        last_log_message = message</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æµ‹ç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping_host</span>(<span class="params">ip</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># æ‰§è¡Œ ping å‘½ä»¤ï¼Œéšè— ping çª—å£</span></span><br><span class="line">        result = Popen(<span class="string">f&#x27;ping -n 1 -w <span class="subst">&#123;<span class="built_in">int</span>(PING_TIMEOUT * <span class="number">1000</span>)&#125;</span> <span class="subst">&#123;ip&#125;</span>&#x27;</span>, </span><br><span class="line">                     shell=<span class="literal">True</span>, stdout=PIPE, stderr=PIPE, </span><br><span class="line">                     creationflags=<span class="number">0x08000000</span>)</span><br><span class="line">        <span class="comment"># è·å– ping å‘½ä»¤çš„è¾“å‡º</span></span><br><span class="line">        output = result.communicate()[<span class="number">0</span>].decode(<span class="string">&#x27;gbk&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">        <span class="comment"># åˆ¤æ–­è¾“å‡ºä¸­æ˜¯å¦åŒ…å« TTL ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;TTL=&#x27;</span> <span class="keyword">in</span> output</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="comment"># è®°å½• ping é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        log_action(<span class="string">f&quot;Ping å¤±è´¥: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç½‘å¡æ˜¯å¦å·²æ–­å¼€è¿æ¥</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_nic_disconnected</span>(<span class="params">nic_name</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># åˆ›å»ºå¯åŠ¨ä¿¡æ¯å¯¹è±¡ï¼Œéšè—æ§åˆ¶å°çª—å£</span></span><br><span class="line">        si = STARTUPINFO()</span><br><span class="line">        si.dwFlags |= STARTF_USESHOWWINDOW</span><br><span class="line">        si.wShowWindow = subprocess.SW_HIDE  <span class="comment"># éšè—çª—å£</span></span><br><span class="line">        </span><br><span class="line">        result = subprocess.Popen(</span><br><span class="line">            <span class="string">f&#x27;netsh interface show interface &quot;<span class="subst">&#123;nic_name&#125;</span>&quot;&#x27;</span>,</span><br><span class="line">            shell=<span class="literal">True</span>,</span><br><span class="line">            stdout=PIPE,</span><br><span class="line">            stderr=PIPE,</span><br><span class="line">            startupinfo=si,  <span class="comment"># ä½¿ç”¨é…ç½®å¥½çš„å¯åŠ¨ä¿¡æ¯</span></span><br><span class="line">            creationflags=subprocess.CREATE_NO_WINDOW  <span class="comment"># é¢å¤–ä¿é™©ï¼ˆæ—§ç‰ˆPythonå…¼å®¹ï¼‰</span></span><br><span class="line">        )</span><br><span class="line">        output = result.communicate()[<span class="number">0</span>].decode(<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(output)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å·²æ–­å¼€è¿æ¥&quot;</span> <span class="keyword">in</span> output</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        log_action(<span class="string">f&quot;æ£€æŸ¥ç½‘å¡çŠ¶æ€å‡ºé”™: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ç½‘ç»œæ¥å£</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">restart_nic</span>(<span class="params">nic_name</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># è®°å½•å°è¯•é‡å¯ç½‘ç»œæ¥å£çš„ä¿¡æ¯</span></span><br><span class="line">        log_action(<span class="string">&quot;æ­£åœ¨å°è¯•é‡å¯ç½‘ç»œé€‚é…å™¨...&quot;</span>)</span><br><span class="line">        <span class="comment"># ç¦ç”¨ç½‘ç»œæ¥å£</span></span><br><span class="line">        os.system(<span class="string">f&#x27;netsh interface set interface &quot;<span class="subst">&#123;nic_name&#125;</span>&quot; admin=disable &gt;nul 2&gt;&amp;1&#x27;</span>)</span><br><span class="line">        <span class="comment"># ç­‰å¾… 2 ç§’</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># å¯ç”¨ç½‘ç»œæ¥å£</span></span><br><span class="line">        os.system(<span class="string">f&#x27;netsh interface set interface &quot;<span class="subst">&#123;nic_name&#125;</span>&quot; admin=enable &gt;nul 2&gt;&amp;1&#x27;</span>)</span><br><span class="line">        <span class="comment"># è®°å½•ç½‘ç»œæ¥å£é‡å¯æˆåŠŸçš„ä¿¡æ¯</span></span><br><span class="line">        log_action(<span class="string">&quot;ç½‘å¡é‡å¯æˆåŠŸã€‚&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="comment"># è®°å½•ç½‘ç»œæ¥å£é‡å¯å¤±è´¥çš„ä¿¡æ¯</span></span><br><span class="line">        log_action(<span class="string">f&quot;é‡å¯ç½‘å¡å¤±è´¥: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># è¿ç»­å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">    failure_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># æ£€æµ‹ç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ping_host(TARGET_IP):</span><br><span class="line">            <span class="comment"># å¤±è´¥æ¬¡æ•°åŠ  1</span></span><br><span class="line">            failure_count += <span class="number">1</span></span><br><span class="line">            <span class="comment"># è®°å½• ping å¤±è´¥ä¿¡æ¯</span></span><br><span class="line">            log_action(<span class="string">f&quot;Ping å¤±è´¥ã€‚å½“å‰è¿ç»­å¤±è´¥æ¬¡æ•°: <span class="subst">&#123;failure_count&#125;</span>/<span class="subst">&#123;MAX_RETRIES&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="comment"># å¦‚æœè¿ç»­å¤±è´¥æ¬¡æ•°è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">            <span class="keyword">if</span> failure_count &gt;= MAX_RETRIES:</span><br><span class="line">                <span class="comment"># æ£€æŸ¥ç½‘å¡æ˜¯å¦å·²æ–­å¼€è¿æ¥</span></span><br><span class="line">                <span class="keyword">if</span> is_nic_disconnected(NIC_NAME):</span><br><span class="line">                    log_action(<span class="string">&quot;ç½‘å¡å·²æ–­å¼€è¿æ¥ï¼Œè·³è¿‡é‡å¯æ“ä½œã€‚&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># é‡å¯ç½‘ç»œæ¥å£</span></span><br><span class="line">                    success = restart_nic(NIC_NAME)</span><br><span class="line">                    <span class="comment"># è®°å½•é‡å¯ç»“æœ</span></span><br><span class="line">                    log_action(<span class="string">f&quot;é‡å¯ <span class="subst">&#123;<span class="string">&#x27;æˆåŠŸ&#x27;</span> <span class="keyword">if</span> success <span class="keyword">else</span> <span class="string">&#x27;å¤±è´¥&#x27;</span>&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="comment"># é‡ç½®å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">                failure_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># é‡ç½®å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">            failure_count = <span class="number">0</span></span><br><span class="line">            <span class="comment"># è®°å½•ç½‘ç»œè¿æ¥æ­£å¸¸çš„ä¿¡æ¯</span></span><br><span class="line">            log_action(<span class="string">&quot;ç½‘ç»œè¿æ¥æ­£å¸¸ã€‚&quot;</span>)</span><br><span class="line">        <span class="comment"># ç­‰å¾…æŒ‡å®šçš„æ£€æŸ¥é—´éš”æ—¶é—´</span></span><br><span class="line">        time.sleep(CHECK_INTERVAL)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># æ‰§è¡Œä¸»å‡½æ•°</span></span><br><span class="line">        main()</span><br><span class="line">        <span class="comment"># print(is_nic_disconnected(NIC_NAME))</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="comment"># è®°å½•ç¨‹åºç»ˆæ­¢ä¿¡æ¯</span></span><br><span class="line">        log_action(<span class="string">f&quot;ç¨‹åºç»ˆæ­¢: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment"># pyinstaller --onefile -w --uac-admin --noconfirm net_monitor.py</span></span><br></pre></td></tr></table></figure><p>net_monitor.bat</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">cd /d &quot;C:\net_monitor&quot;</span><br><span class="line">start /b pythonw.exe net_monitor.py</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"></a>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h2><p>æ‰“å¼€â€å¼€å§‹èœå•â€ -&gt; è¾“å…¥â€ä»»åŠ¡è®¡åˆ’ç¨‹åºâ€ -&gt; é€‰æ‹©â€åˆ›å»ºä»»åŠ¡â€<br>å¸¸è§„é€‰é¡¹å¡ï¼š</p><ul><li>è¾“å…¥ä»»åŠ¡åç§°ï¼šâ€net_monitorâ€</li><li>é€‰æ‹©è¿è¡Œç”¨æˆ·ï¼šâ€å½“å‰ç”¨æˆ·â€</li><li>é€‰æ‹©è¿è¡Œæ–¹å¼ï¼šâ€æœ€é«˜æƒé™â€</li><li>å‹¾é€‰â€æ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•éƒ½è¦è¿è¡Œâ€</li><li>å‹¾é€‰â€éšè—çª—å£â€</li><li>é…ç½®win10<br>è§¦å‘å™¨é€‰é¡¹å¡ï¼š</li><li>é€‰æ‹©â€æ–°å»ºâ€</li><li>é€‰æ‹©â€å¯åŠ¨æ—¶â€<br>æ“ä½œé€‰é¡¹å¡ï¼š</li><li>é€‰æ‹©â€æ–°å»ºâ€</li><li>é€‰æ‹©â€å¯åŠ¨ç¨‹åºâ€</li><li>é€‰æ‹©â€ç¨‹åºæˆ–è„šæœ¬â€ï¼Œå¹¶é€‰æ‹©â€net_monitor.batâ€<br>ç¡®å®šåˆ›å»ºä»»åŠ¡</li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DBeaverè¿æ¥MySQLå’ŒIoTDBæ•°æ®åº“æ­¥éª¤</title>
    <link href="/2025/02/06/DBeaver%E8%BF%9E%E6%8E%A5MySQL%E5%92%8CIoTDB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%A5%E9%AA%A4/"/>
    <url>/2025/02/06/DBeaver%E8%BF%9E%E6%8E%A5MySQL%E5%92%8CIoTDB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%A5%E9%AA%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="DBeaverè¿æ¥MySQLå’ŒIoTDBæ•°æ®åº“æ­¥éª¤"><a href="#DBeaverè¿æ¥MySQLå’ŒIoTDBæ•°æ®åº“æ­¥éª¤" class="headerlink" title="DBeaverè¿æ¥MySQLå’ŒIoTDBæ•°æ®åº“æ­¥éª¤"></a>DBeaverè¿æ¥MySQLå’ŒIoTDBæ•°æ®åº“æ­¥éª¤</h1><h2 id="ä¸€ã€DBeaver-è¿æ¥-MySQL-æ•°æ®åº“æ­¥éª¤"><a href="#ä¸€ã€DBeaver-è¿æ¥-MySQL-æ•°æ®åº“æ­¥éª¤" class="headerlink" title="ä¸€ã€DBeaver è¿æ¥ MySQL æ•°æ®åº“æ­¥éª¤"></a>ä¸€ã€DBeaver è¿æ¥ MySQL æ•°æ®åº“æ­¥éª¤</h2><ol><li><p><strong>æ–°å»ºæ•°æ®åº“è¿æ¥</strong>  </p><ul><li>æ‰“å¼€ DBeaverï¼Œé€‰æ‹©æ–°å»ºæ•°æ®åº“è¿æ¥ã€‚</li><li>åœ¨æ•°æ®åº“ç±»å‹ä¸­é€‰æ‹© MySQLã€‚</li></ul></li><li><p><strong>ç¼–è¾‘é©±åŠ¨è®¾ç½®</strong>  </p><ul><li>è¿›å…¥é©±åŠ¨è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©åº“é€‰é¡¹ã€‚</li></ul></li><li><p><strong>æ·»åŠ é©±åŠ¨æ–‡ä»¶</strong>  </p><ul><li>æ·»åŠ  MySQL é©±åŠ¨æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>mysql-connector-java-8.0.17.jar</code>ã€‚</li><li><code>https://gitee.com/liwei125/dbeaver-driver-all/blob/master/drivers/mysql/mysql8/mysql-connector-java-8.0.17.jar</code></li></ul></li><li><p><strong>è®¾ç½®é©±åŠ¨ç±»</strong>  </p><ul><li>æ‰¾åˆ°é©±åŠ¨ç±»ä¸º <code>com.mysql.cj.jdbc.Driver</code>ï¼Œç‚¹å‡»ç¡®å®šå®Œæˆè®¾ç½®ã€‚</li></ul></li></ol><h2 id="äºŒã€DBeaver-è¿æ¥-IoTDB-æ•°æ®åº“æ­¥éª¤"><a href="#äºŒã€DBeaver-è¿æ¥-IoTDB-æ•°æ®åº“æ­¥éª¤" class="headerlink" title="äºŒã€DBeaver è¿æ¥ IoTDB æ•°æ®åº“æ­¥éª¤"></a>äºŒã€DBeaver è¿æ¥ IoTDB æ•°æ®åº“æ­¥éª¤</h2><h3 id="ï¼ˆä¸€ï¼‰ä¸‹è½½-IoTDB-JDBC-é©±åŠ¨"><a href="#ï¼ˆä¸€ï¼‰ä¸‹è½½-IoTDB-JDBC-é©±åŠ¨" class="headerlink" title="ï¼ˆä¸€ï¼‰ä¸‹è½½ IoTDB JDBC é©±åŠ¨"></a>ï¼ˆä¸€ï¼‰ä¸‹è½½ IoTDB JDBC é©±åŠ¨</h3><ul><li>ä»IoTDBå®˜ç½‘<code>https://iotdb.apache.org/zh/UserGuide/latest/Ecosystem-Integration/DBeaver.html</code>ä¸‹è½½ä¸æ‚¨ IoTDB ç‰ˆæœ¬é€‚é…çš„ JDBC é©±åŠ¨ã€‚</li></ul><h3 id="ï¼ˆäºŒï¼‰å®‰è£…-JDBC-é©±åŠ¨"><a href="#ï¼ˆäºŒï¼‰å®‰è£…-JDBC-é©±åŠ¨" class="headerlink" title="ï¼ˆäºŒï¼‰å®‰è£… JDBC é©±åŠ¨"></a>ï¼ˆäºŒï¼‰å®‰è£… JDBC é©±åŠ¨</h3><ol><li>æ‰“å¼€ DBeaverï¼Œç‚¹å‡»èœå•æ ä¸­çš„ â€œæ•°æ®åº“â€ã€‚</li><li>é€‰æ‹© â€œé©±åŠ¨ç®¡ç†å™¨â€ï¼Œç‚¹å‡» â€œæ–°å»ºâ€ã€‚</li><li>åœ¨å¼¹å‡ºçª—å£ä¸­ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š<ul><li><strong>ç±»å</strong>ï¼š<code>org.apache.iotdb.jdbc.IoTDBDriver</code></li><li><strong>URL æ¨¡æ¿</strong>ï¼š<code>jdbc:iotdb://127.0.0.1:6667/</code></li><li><strong>é»˜è®¤ç«¯å£</strong>ï¼š<code>6667</code></li><li><strong>é»˜è®¤ç”¨æˆ·</strong>ï¼š<code>root</code></li></ul></li><li>ç‚¹å‡» â€œæ·»åŠ æ–‡ä»¶â€ï¼Œé€‰æ‹©ä¹‹å‰ä¸‹è½½çš„ JDBC é©±åŠ¨ jar æ–‡ä»¶ï¼Œç„¶åç‚¹å‡» â€œç¡®å®šâ€ã€‚</li></ol><h3 id="ï¼ˆä¸‰ï¼‰è¿æ¥-IoTDB-æ•°æ®åº“"><a href="#ï¼ˆä¸‰ï¼‰è¿æ¥-IoTDB-æ•°æ®åº“" class="headerlink" title="ï¼ˆä¸‰ï¼‰è¿æ¥ IoTDB æ•°æ®åº“"></a>ï¼ˆä¸‰ï¼‰è¿æ¥ IoTDB æ•°æ®åº“</h3><ol><li>åœ¨ DBeaver ä¸­ï¼Œç‚¹å‡» â€œæ–°å»ºè¿æ¥â€ï¼Œæœç´¢ â€œIoTDBâ€ã€‚</li><li>è¾“å…¥æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼ŒåŒ…å« IP åœ°å€ã€ç«¯å£å·ã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li><li>ç‚¹å‡» â€œæµ‹è¯•è¿æ¥â€ï¼Œç¡®ä¿è¿æ¥æˆåŠŸã€‚</li><li>è‹¥æµ‹è¯•é€šè¿‡ï¼Œç‚¹å‡» â€œç¡®å®šâ€ å®Œæˆè¿æ¥è®¾ç½®ã€‚</li></ol><hr><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå³å¯åœ¨ DBeaver ä¸­æˆåŠŸè¿æ¥ MySQL å’Œ IoTDB æ•°æ®åº“ï¼Œè¿›è€Œæ‰§è¡Œ SQL æŸ¥è¯¢å’Œç®¡ç†æ•°æ®åº“ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨polkitå®ç°æ™®é€šç”¨æˆ·ç®¡ç†systemctlæœåŠ¡</title>
    <link href="/2025/01/26/%E4%BD%BF%E7%94%A8polkit%E5%AE%9E%E7%8E%B0%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86systemctl%E6%9C%8D%E5%8A%A1/"/>
    <url>/2025/01/26/%E4%BD%BF%E7%94%A8polkit%E5%AE%9E%E7%8E%B0%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86systemctl%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="1-èƒŒæ™¯"><a href="#1-èƒŒæ™¯" class="headerlink" title="1. èƒŒæ™¯"></a>1. èƒŒæ™¯</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ™®é€šç”¨æˆ·æ— æ³•ç›´æ¥ä½¿ç”¨ <code>systemctl</code> ç®¡ç†ç³»ç»ŸæœåŠ¡ï¼ˆå¦‚ <code>nginx</code>ï¼‰ï¼Œå› ä¸ºéœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆ<code>root</code> æˆ– <code>sudo</code>ï¼‰ã€‚é€šè¿‡ <code>polkit</code>ï¼Œå¯ä»¥ä¸ºæ™®é€šç”¨æˆ·æˆæƒç®¡ç†ç‰¹å®šæœåŠ¡ã€‚</p><hr><h2 id="2-å®ç°æ­¥éª¤"><a href="#2-å®ç°æ­¥éª¤" class="headerlink" title="2. å®ç°æ­¥éª¤"></a>2. å®ç°æ­¥éª¤</h2><h3 id="2-1-åˆ›å»º-polkit-è§„åˆ™æ–‡ä»¶"><a href="#2-1-åˆ›å»º-polkit-è§„åˆ™æ–‡ä»¶" class="headerlink" title="2.1 åˆ›å»º polkit è§„åˆ™æ–‡ä»¶"></a>2.1 åˆ›å»º <code>polkit</code> è§„åˆ™æ–‡ä»¶</h3><ol><li><p>è¿›å…¥ <code>polkit</code> è§„åˆ™ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/polkit-1/rules.d/</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„è§„åˆ™æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>20-nginx.rules</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vi 20-nginx.rules</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆå‡è®¾æ™®é€šç”¨æˆ·åä¸º <code>user1</code>ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">polkit.<span class="title function_">addRule</span>(<span class="keyword">function</span>(<span class="params">action, subject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action.<span class="property">id</span> == <span class="string">&quot;org.freedesktop.systemd1.manage-units&quot;</span> &amp;&amp;</span><br><span class="line">        action.<span class="title function_">lookup</span>(<span class="string">&quot;unit&quot;</span>) == <span class="string">&quot;nginx.service&quot;</span> &amp;&amp;</span><br><span class="line">        subject.<span class="property">user</span> == <span class="string">&quot;user1&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> polkit.<span class="property">Result</span>.<span class="property">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><strong><code>action.id</code></strong>ï¼šæŒ‡å®šæ“ä½œç±»å‹ï¼Œè¿™é‡Œæ˜¯ç®¡ç† systemd æœåŠ¡ã€‚</li><li><strong><code>action.lookup(&quot;unit&quot;)</code></strong>ï¼šæŒ‡å®šæœåŠ¡åç§°ï¼ˆå¦‚ <code>nginx.service</code>ï¼‰ã€‚</li><li><strong><code>subject.user</code></strong>ï¼šæŒ‡å®šå…è®¸çš„ç”¨æˆ·ï¼ˆå¦‚ <code>user1</code>ï¼‰ã€‚</li><li><strong><code>polkit.Result.YES</code></strong>ï¼šå…è®¸ç”¨æˆ·æ‰§è¡Œæ“ä½œã€‚</li></ul></li><li><p>ä¿å­˜å¹¶é€€å‡ºã€‚</p></li></ol><hr><h3 id="2-2-éªŒè¯è§„åˆ™æ–‡ä»¶"><a href="#2-2-éªŒè¯è§„åˆ™æ–‡ä»¶" class="headerlink" title="2.2 éªŒè¯è§„åˆ™æ–‡ä»¶"></a>2.2 éªŒè¯è§„åˆ™æ–‡ä»¶</h3><ol><li><p>ç¡®ä¿è§„åˆ™æ–‡ä»¶æƒé™æ­£ç¡®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 644 /etc/polkit-1/rules.d/10-nginx.rules</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥è§„åˆ™æ–‡ä»¶æ˜¯å¦åŠ è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart polkit</span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="2-3-æµ‹è¯•æ™®é€šç”¨æˆ·æƒé™"><a href="#2-3-æµ‹è¯•æ™®é€šç”¨æˆ·æƒé™" class="headerlink" title="2.3 æµ‹è¯•æ™®é€šç”¨æˆ·æƒé™"></a>2.3 æµ‹è¯•æ™®é€šç”¨æˆ·æƒé™</h3><ol><li><p>åˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - user1</span><br></pre></td></tr></table></figure></li><li><p>å°è¯•ç®¡ç† <code>nginx</code> æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl stop nginx</span><br><span class="line">systemctl restart nginx</span><br><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœè§„åˆ™ç”Ÿæ•ˆï¼Œæ™®é€šç”¨æˆ·å¯ä»¥ç›´æ¥æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œè€Œæ— éœ€ <code>sudo</code>ã€‚</li></ul></li></ol><hr><h2 id="3-æ³¨æ„äº‹é¡¹"><a href="#3-æ³¨æ„äº‹é¡¹" class="headerlink" title="3. æ³¨æ„äº‹é¡¹"></a>3. æ³¨æ„äº‹é¡¹</h2><h3 id="3-1-è§„åˆ™æ–‡ä»¶å‘½å"><a href="#3-1-è§„åˆ™æ–‡ä»¶å‘½å" class="headerlink" title="3.1 è§„åˆ™æ–‡ä»¶å‘½å"></a>3.1 è§„åˆ™æ–‡ä»¶å‘½å</h3><ul><li>è§„åˆ™æ–‡ä»¶çš„å‘½åæ ¼å¼ä¸º <code>æ•°å­—ç¼–å·-æè¿°.rules</code>ï¼ˆå¦‚ <code>10-nginx.rules</code>ï¼‰ã€‚</li><li>æ•°å­—ç¼–å·è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</li><li>ç¡®ä¿æ•°å­—ç¼–å·å”¯ä¸€ï¼Œé¿å…å†²çªã€‚</li></ul><h3 id="3-2-è§„åˆ™æ–‡ä»¶è·¯å¾„"><a href="#3-2-è§„åˆ™æ–‡ä»¶è·¯å¾„" class="headerlink" title="3.2 è§„åˆ™æ–‡ä»¶è·¯å¾„"></a>3.2 è§„åˆ™æ–‡ä»¶è·¯å¾„</h3><ul><li>ç³»ç»ŸèŒƒå›´çš„è§„åˆ™æ–‡ä»¶æ”¾åœ¨ <code>/etc/polkit-1/rules.d/</code>ã€‚</li><li>è½¯ä»¶åŒ…å®‰è£…çš„è§„åˆ™æ–‡ä»¶æ”¾åœ¨ <code>/usr/share/polkit-1/rules.d/</code>ã€‚</li></ul><h3 id="3-3-è°ƒè¯•è§„åˆ™"><a href="#3-3-è°ƒè¯•è§„åˆ™" class="headerlink" title="3.3 è°ƒè¯•è§„åˆ™"></a>3.3 è°ƒè¯•è§„åˆ™</h3><ul><li>å¦‚æœè§„åˆ™æœªç”Ÿæ•ˆï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š<ul><li>è§„åˆ™æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</li><li>è§„åˆ™æ–‡ä»¶æ˜¯å¦åŠ è½½ï¼ˆé‡å¯ <code>polkit</code> æœåŠ¡ï¼‰ã€‚</li><li>ç”¨æˆ·æ˜¯å¦åŒ¹é…ï¼ˆ<code>subject.user</code>ï¼‰ã€‚</li></ul></li></ul><hr><h2 id="4-æ‰©å±•åŠŸèƒ½"><a href="#4-æ‰©å±•åŠŸèƒ½" class="headerlink" title="4. æ‰©å±•åŠŸèƒ½"></a>4. æ‰©å±•åŠŸèƒ½</h2><h3 id="4-1-æˆæƒå¤šä¸ªç”¨æˆ·"><a href="#4-1-æˆæƒå¤šä¸ªç”¨æˆ·" class="headerlink" title="4.1 æˆæƒå¤šä¸ªç”¨æˆ·"></a>4.1 æˆæƒå¤šä¸ªç”¨æˆ·</h3><p>å¦‚æœéœ€è¦æˆæƒå¤šä¸ªç”¨æˆ·ï¼Œå¯ä»¥ä¿®æ”¹è§„åˆ™æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">polkit.<span class="title function_">addRule</span>(<span class="keyword">function</span>(<span class="params">action, subject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action.<span class="property">id</span> == <span class="string">&quot;org.freedesktop.systemd1.manage-units&quot;</span> &amp;&amp;</span><br><span class="line">        action.<span class="title function_">lookup</span>(<span class="string">&quot;unit&quot;</span>) == <span class="string">&quot;nginx.service&quot;</span> &amp;&amp;</span><br><span class="line">        (subject.<span class="property">user</span> == <span class="string">&quot;user1&quot;</span> || subject.<span class="property">user</span> == <span class="string">&quot;user2&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> polkit.<span class="property">Result</span>.<span class="property">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-2-æˆæƒç”¨æˆ·ç»„"><a href="#4-2-æˆæƒç”¨æˆ·ç»„" class="headerlink" title="4.2 æˆæƒç”¨æˆ·ç»„"></a>4.2 æˆæƒç”¨æˆ·ç»„</h3><p>å¦‚æœéœ€è¦æˆæƒæ•´ä¸ªç”¨æˆ·ç»„ï¼Œå¯ä»¥ä½¿ç”¨ <code>subject.isInGroup</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">polkit.<span class="title function_">addRule</span>(<span class="keyword">function</span>(<span class="params">action, subject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action.<span class="property">id</span> == <span class="string">&quot;org.freedesktop.systemd1.manage-units&quot;</span> &amp;&amp;</span><br><span class="line">        action.<span class="title function_">lookup</span>(<span class="string">&quot;unit&quot;</span>) == <span class="string">&quot;nginx.service&quot;</span> &amp;&amp;</span><br><span class="line">        subject.<span class="title function_">isInGroup</span>(<span class="string">&quot;nginx-admins&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> polkit.<span class="property">Result</span>.<span class="property">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>é€šè¿‡ <code>polkit</code>ï¼Œå¯ä»¥ä¸ºæ™®é€šç”¨æˆ·æˆæƒç®¡ç†ç‰¹å®šçš„ <code>systemctl</code> æœåŠ¡ï¼ˆå¦‚ <code>nginx</code>ï¼‰ï¼Œè€Œæ— éœ€ä½¿ç”¨ <code>sudo</code>ã€‚å…³é”®æ­¥éª¤åŒ…æ‹¬ï¼š</p><ol><li>åˆ›å»ºè§„åˆ™æ–‡ä»¶ã€‚</li><li>å®šä¹‰å…è®¸çš„ç”¨æˆ·å’ŒæœåŠ¡ã€‚</li><li>éªŒè¯è§„åˆ™æ–‡ä»¶å¹¶æµ‹è¯•æƒé™ã€‚</li></ol><p>è¿™ç§æ–¹æ³•æ—¢çµæ´»åˆå®‰å…¨ï¼Œé€‚åˆåœ¨å¤šç”¨æˆ·ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vlanå®ç°æœºåˆ¶</title>
    <link href="/2025/01/24/vlan%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/"/>
    <url>/2025/01/24/vlan%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="VLANæ ‡è¯†ç¬¦VID"><a href="#VLANæ ‡è¯†ç¬¦VID" class="headerlink" title="VLANæ ‡è¯†ç¬¦VID"></a>VLANæ ‡è¯†ç¬¦VID</h2><ul><li>VLANæ ‡è®°çš„æœ€å12æ¯”ç‰¹ç§°ä¸ºVLANæ ‡è¯†ç¬¦VIDï¼Œå”¯ä¸€æ ‡å¿—ä»¥å¤ªç½‘å¸§å±äºå“ªä¸€ä¸ªVLANã€‚</li><li>VIDå–å€¼èŒƒå›´æ˜¯0 ~ 4095 (0 ~ 2^12 - 1)ã€‚</li><li>0å’Œ4095ä¸ç”¨æ¥è¡¨ç¤ºVLANï¼Œæœ‰æ•ˆå–å€¼èŒƒå›´æ˜¯1 ~ 4094ã€‚</li></ul><h2 id="802-1Qå¸§"><a href="#802-1Qå¸§" class="headerlink" title="802.1Qå¸§"></a>802.1Qå¸§</h2><ul><li>åœ¨ä»¥å¤ªç½‘å¸§åŸºç¡€ä¸Šï¼Œç”¨äºå®ç°è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰åŠŸèƒ½çš„ä¸€ç§æ•°æ®å¸§æ ¼å¼</li><li>ç»“æ„ç‰¹ç‚¹ï¼šåœ¨æ™®é€šä»¥å¤ªç½‘å¸§ä¸­æ’å…¥4å­—èŠ‚VLANæ ‡è®°ï¼Œå…¶æœ€å12æ¯”ç‰¹æ˜¯VIDï¼ˆæœ‰æ•ˆå–å€¼èŒƒå›´1 - 4094ï¼‰ã€‚</li><li>å¤„ç†æ–¹å¼ï¼šç”±äº¤æ¢æœºå¤„ç†ã€‚æ”¶åˆ°æ™®é€šä»¥å¤ªç½‘å¸§æ—¶â€œæ‰“æ ‡ç­¾â€è½¬å˜ä¸º802.1Qå¸§ï¼›è½¬å‘æ—¶å¯èƒ½â€œå»æ ‡ç­¾â€å˜å›æ™®é€šä»¥å¤ªç½‘å¸§ã€‚</li><li>ä½œç”¨ï¼šå®ç°VLANé—´é€šä¿¡éš”ç¦»ä¸ç®¡ç†ï¼Œå°†ç‰©ç†å±€åŸŸç½‘åˆ’åˆ†ä¸ºå¤šä¸ªé€»è¾‘ç‹¬ç«‹çš„è™šæ‹Ÿå±€åŸŸç½‘ï¼Œæé«˜ç½‘ç»œå®‰å…¨æ€§ã€çµæ´»æ€§å’Œç®¡ç†æ•ˆç‡ï¼Œå¦‚ä¼ä¸šæŒ‰éƒ¨é—¨åˆ’åˆ†VLANæå‡å®‰å…¨æ€§ã€‚</li></ul><h2 id="äº¤æ¢æœºç«¯å£ç±»å‹"><a href="#äº¤æ¢æœºç«¯å£ç±»å‹" class="headerlink" title="äº¤æ¢æœºç«¯å£ç±»å‹"></a>äº¤æ¢æœºç«¯å£ç±»å‹</h2><h4 id="Accessç«¯å£"><a href="#Accessç«¯å£" class="headerlink" title="Accessç«¯å£"></a>Accessç«¯å£</h4><ul><li>ç”¨é€”ï¼šä¸€èˆ¬ç”¨äºè¿æ¥ç”¨æˆ·è®¡ç®—æœºã€‚</li><li>VLANå±æ€§ï¼šåªèƒ½å±äºä¸€ä¸ªVLANã€‚</li><li>PVIDï¼šPVIDå€¼ä¸ç«¯å£æ‰€å±VLANçš„IDç›¸åŒï¼ˆé»˜è®¤ä¸º1ï¼‰ã€‚</li><li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šä¸€èˆ¬åªæ¥å—â€œæœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li><li>å‘é€å¤„ç†æ–¹æ³•ï¼šè‹¥å¸§ä¸­çš„VIDä¸ç«¯å£çš„PVIDç›¸ç­‰ï¼Œåˆ™â€œå»æ ‡ç­¾â€å¹¶è½¬å‘è¯¥å¸§ï¼›å¦åˆ™ä¸è½¬å‘ã€‚</li></ul><h4 id="Trunkç«¯å£"><a href="#Trunkç«¯å£" class="headerlink" title="Trunkç«¯å£"></a>Trunkç«¯å£</h4><ul><li>ç”¨é€”ï¼šä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿ã€‚</li><li>VLANå±æ€§ï¼šå¯ä»¥å±äºå¤šä¸ªVLANã€‚</li><li>PVIDï¼šç”¨æˆ·å¯ä»¥è®¾ç½®Trunkç«¯å£çš„PVIDå€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒPVIDå€¼ä¸º1ã€‚</li><li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šæ¥æ”¶â€œæœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ï¼›æ¥æ”¶â€œå·²æ‰“æ ‡ç­¾çš„å¸§â€ã€‚</li><li>å‘é€å¤„ç†æ–¹æ³•ï¼šå¯¹VIDç­‰äºPVIDçš„å¸§ï¼Œâ€œå»æ ‡ç­¾â€å†è½¬å‘ã€‚</li></ul><h4 id="Hybridç«¯å£-åä¸º"><a href="#Hybridç«¯å£-åä¸º" class="headerlink" title="Hybridç«¯å£(åä¸º)"></a>Hybridç«¯å£(åä¸º)</h4><ul><li>ç”¨é€”ï¼šæ—¢å¯ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿ï¼ˆåŒTrunkç«¯å£ï¼‰ï¼Œä¹Ÿå¯ç”¨äºäº¤æ¢æœºä¸ç”¨æˆ·è®¡ç®—æœºä¹‹é—´çš„äº’è¿ï¼ˆåŒAccessç«¯å£ï¼‰ã€‚</li><li>VLANå±æ€§ï¼šå¯ä»¥å±äºå¤šä¸ªVLANï¼ˆåŒTrunkç«¯å£ï¼‰ã€‚</li><li>PVIDï¼šç”¨æˆ·å¯ä»¥è®¾ç½®Hybridç«¯å£çš„PVIDå€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒPVIDå€¼ä¸º1ï¼ˆåŒTrunkç«¯å£ï¼‰ã€‚</li><li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šæ¥æ”¶â€œæœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ï¼›æ¥æ”¶â€œå·²æ‰“æ ‡ç­¾çš„å¸§â€ã€‚</li><li>å‘é€å¤„ç†æ–¹æ³•ï¼šæŸ¥çœ‹å¸§çš„VIDæ˜¯å¦åœ¨ç«¯å£çš„â€œå»æ ‡ç­¾â€åˆ—è¡¨(å³å…è®¸é€šè¿‡çš„vlanåˆ—è¡¨)ä¸­ï¼šè‹¥å­˜åœ¨ï¼Œåˆ™â€œå»æ ‡ç­¾â€åå†è½¬å‘ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è½¬å‘ã€‚</li></ul><h4 id="ç«¯å£è½¬å‘æ€»ç»“"><a href="#ç«¯å£è½¬å‘æ€»ç»“" class="headerlink" title="ç«¯å£è½¬å‘æ€»ç»“"></a>ç«¯å£è½¬å‘æ€»ç»“</h4><table><thead><tr><th>ç«¯å£ç±»å‹</th><th>æ¥æ”¶å¤„ç†æ–¹æ³•</th><th>å‘é€å¤„ç†æ–¹æ³•</th></tr></thead><tbody><tr><td>Access</td><td>ä¸€èˆ¬åªæ¥æ”¶æœªæ‰“æ ‡ç­¾çš„æ™®é€šä»¥å¤ªç½‘å¸§ï¼Œå¹¶ç»™å…¶æ‰“æ ‡ç­¾</td><td>è‹¥å¸§ä¸­çš„VIDç­‰äºç«¯å£PVIDï¼Œåˆ™å»æ‰æ ‡ç­¾å¹¶è½¬å‘ï¼›å¦åˆ™ä¸¢å¼ƒ</td></tr><tr><td>Trunk</td><td>æ¥æ”¶å·²æ‰“æ ‡ç­¾çš„å¸§ï¼›æ¥æ”¶æœªæ‰“æ ‡ç­¾çš„å¸§ï¼Œæ ¹æ®ç«¯å£çš„PVIDå€¼ç»™å¸§æ‰“æ ‡ç­¾</td><td>å¸§ä¸­VIDç­‰äºç«¯å£PVIDï¼Œå»æ‰æ ‡ç­¾å†è½¬å‘ï¼›å¸§ä¸­VIDä¸ç­‰äºç«¯å£PVIDï¼Œç›´æ¥è½¬å‘</td></tr><tr><td>Hybrid(åä¸º)</td><td>æ¥æ”¶å·²æ‰“æ ‡ç­¾çš„å¸§ï¼›æ¥æ”¶æœªæ‰“æ ‡ç­¾çš„å¸§ï¼Œæ ¹æ®ç«¯å£çš„PVIDå€¼ç»™å¸§æ‰“æ ‡ç­¾</td><td>æŸ¥çœ‹æ•°æ®å¸§ä¸­çš„VIDæ˜¯å¦åœ¨ç«¯å£çš„â€œå»æ ‡ç­¾â€åˆ—è¡¨ä¸­ï¼šå¦‚æœå­˜åœ¨ï¼Œåˆ™å»æ‰æ ‡ç­¾å†è½¬å‘ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è½¬å‘</td></tr></tbody></table><p><img src="https://xinhaojin.github.io/picx-images-hosting/20250124/PixPin_2025-01-24_10-13-51.9dd298giwy.webp"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20250124/image.sz1rv7ixl.webp"></p><ul><li>äº’è¿çš„Trunkç«¯å£çš„PVIDå€¼ä¸ç­‰ï¼Œå¯èƒ½ä¼šé€ æˆè½¬å‘é”™è¯¯ã€‚å› ä¸ºå‘é€ç«¯å£å¯èƒ½ä¼šå…ˆå»æ ‡ç­¾ï¼Œæ¥æ”¶ç«¯å£æŒ‰ç…§è‡ªå·±çš„PVIDæ‰“æ ‡ç­¾ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20250124/image.1lbx9n7m6f.webp"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20250124/image.13lvl1k0i5.webp"></li></ul>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>EVENGæ‡’äººç‰ˆ5.1+SecureCRT9.6ç»¿è‰²ç‰ˆå®‰è£…é…ç½®</title>
    <link href="/2025/01/17/EVENG%E6%87%92%E4%BA%BA%E7%89%885.1+SecureCRT9.6%E7%BB%BF%E8%89%B2%E7%89%88%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <url>/2025/01/17/EVENG%E6%87%92%E4%BA%BA%E7%89%885.1+SecureCRT9.6%E7%BB%BF%E8%89%B2%E7%89%88%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æƒ³æ‰¾ä¸€ä¸ªèƒ½åŒæ—¶æ¨¡æ‹Ÿå¤šä¸ªå‚å•†ç½‘ç»œè®¾å¤‡çš„ä»¿çœŸè½¯ä»¶ï¼ŒæŠ˜è…¾äº†ä¸€é€šç»ˆäºæˆåŠŸå®‰è£…äº†EVENGï¼Œç‰¹æ­¤è®°å½•</p><h2 id="å®‰è£…VMware-Workstation"><a href="#å®‰è£…VMware-Workstation" class="headerlink" title="å®‰è£…VMware Workstation"></a>å®‰è£…VMware Workstation</h2><p>ç›®å‰å·²ç»å…è´¹äº†ï¼Œå®‰è£…æ¯”è¾ƒå®¹æ˜“ï¼Œç•¥è¿‡</p><p>WindowsåŠŸèƒ½ä¸­å…³é—­ï¼šVirtual Machine Platform,Hyper-V,Windowè™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¹³å°</p><h2 id="å®‰è£…EVENGæ‡’äººç‰ˆ"><a href="#å®‰è£…EVENGæ‡’äººç‰ˆ" class="headerlink" title="å®‰è£…EVENGæ‡’äººç‰ˆ"></a>å®‰è£…EVENGæ‡’äººç‰ˆ</h2><p>è®ºå›é“¾æ¥åœ¨æ­¤ï¼š<a href="https://www.emulatedlab.com/thread-489-1-1.html">https://www.emulatedlab.com/thread-489-1-1.html</a><br>ã€ŒEVE-NGç¤¾åŒºæ‡’äººç‰ˆ5.1-Small.ovaã€ä¸‹è½½é“¾æ¥ï¼š<a href="https://pan.quark.cn/s/0819d692cc71">https://pan.quark.cn/s/0819d692cc71</a><br>åŒ…å«ä»¥ä¸‹è®¾å¤‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Arista vEOS</span><br><span class="line">Cisco IOL</span><br><span class="line">Cisco vIOS Router</span><br><span class="line">Cisco vIOS Switch</span><br><span class="line">H3C vAC1000</span><br><span class="line">H3C vSR1000</span><br><span class="line">Huawei AR1000v</span><br><span class="line">Huawei CloudEngine 12800</span><br><span class="line">iKuai</span><br><span class="line">Juniper vMX VCP</span><br><span class="line">Juniper vMX VFP</span><br><span class="line">MikroTik RouterOS</span><br><span class="line">OpenWRT</span><br><span class="line">Ruijie vRoute</span><br><span class="line">Ruijie vSwitch</span><br><span class="line">Slax Mini VM</span><br><span class="line">Virtual PC (VPCS)</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œåä½¿ç”¨VMwareæ‰“å¼€ï¼Œç½‘ç»œè®¾ç½®ä¸ºæ¡¥æ¥ï¼Œå¯åŠ¨è™šæ‹Ÿæœºåä¼šæ˜¾ç¤ºIPï¼Œrootå¯†ç eve<br><img src="https://xinhaojin.github.io/picx-images-hosting/20250117/image.3k83q92n1c.webp" alt="image"><br>åœ¨æµè§ˆå™¨è¾“å…¥IPç™»å½•ï¼Œç”¨æˆ·adminå¯†ç eveï¼Œadd an object - nodeå³å¯æ·»åŠ è®¾å¤‡</p><h2 id="å®‰è£…SecureCRTå¹¶è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨"><a href="#å®‰è£…SecureCRTå¹¶è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨" class="headerlink" title="å®‰è£…SecureCRTå¹¶è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨"></a>å®‰è£…SecureCRTå¹¶è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨</h2><p>ã€ŒSecureCRT.9.6.0.CN.Portable OSSSR.COM.7zã€ä¸‹è½½é“¾æ¥ï¼š<a href="https://pan.quark.cn/s/0654db0bc802">https://pan.quark.cn/s/0654db0bc802</a></p><h3 id="è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨"><a href="#è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨" class="headerlink" title="è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨"></a>è®¾ç½®ä¸ºtelneté»˜è®¤åº”ç”¨</h3><p>åœ¨é€‰é¡¹-å…¨å±€é€‰é¡¹-æµè§ˆå™¨ä¸­ç‚¹å‡»â€å°†SecureCRTè®¾ä¸ºé»˜è®¤åº”ç”¨â€ï¼Œç„¶åæ‰“å¼€Windowsè®¾ç½®-é»˜è®¤åº”ç”¨ï¼Œæœç´¢telnetï¼Œæ£€æŸ¥æ˜¯å¦å·²ç»è®¾ç½®æˆåŠŸã€‚</p><p>å›åˆ°æµè§ˆå™¨ä¸­åŒå‡»æ·»åŠ çš„ç½‘ç»œè®¾å¤‡ï¼Œå³å¯è·³è½¬åˆ°SecureCRT</p><h3 id="è®¾ç½®åœ¨åŒä¸€çª—å£æ‰“å¼€å¤šä¸ªæ ‡ç­¾"><a href="#è®¾ç½®åœ¨åŒä¸€çª—å£æ‰“å¼€å¤šä¸ªæ ‡ç­¾" class="headerlink" title="è®¾ç½®åœ¨åŒä¸€çª—å£æ‰“å¼€å¤šä¸ªæ ‡ç­¾"></a>è®¾ç½®åœ¨åŒä¸€çª—å£æ‰“å¼€å¤šä¸ªæ ‡ç­¾</h3><p>åœ¨SecureCRT\Data\Config\Global.iniæ–‡ä»¶ä¸­æœç´¢â€singleâ€,ä¿®æ”¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Single Instance&quot;=00000001</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuä¸‹é…ç½®v2raya</title>
    <link href="/2025/01/01/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEv2raya/"/>
    <url>/2025/01/01/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEv2raya/</url>
    
    <content type="html"><![CDATA[<h2 id="v2raya"><a href="#v2raya" class="headerlink" title="v2raya"></a>v2raya</h2><p>v2raya æ˜¯ä¸€ä¸ªåŸºäº V2Ray å†…æ ¸çš„è·¨å¹³å°ä»£ç†è½¯ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§çš„ä»£ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§ä»£ç†åè®®å’Œä¸°å¯Œçš„é…ç½®é€‰é¡¹</p><h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://v2raya.org/docs">https://v2raya.org/docs</a></p><p>æ¨èä½¿ç”¨dockerå®‰è£…ï¼Œä¼šæ¯”è¾ƒé¡ºåˆ©ä¸”æ˜“äºç®¡ç†</p><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mzz2017/v2raya</span><br></pre></td></tr></table></figure><p>å¯åŠ¨,å¹¶è®¾ç½®è‡ªå¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --restart=always \</span><br><span class="line">  --privileged \</span><br><span class="line">  --network=host \</span><br><span class="line">  --name v2raya \</span><br><span class="line">  -e V2RAYA_LOG_FILE=/tmp/v2raya.log \</span><br><span class="line">  -e V2RAYA_V2RAY_BIN=/usr/local/bin/v2ray \</span><br><span class="line">  -e V2RAYA_NFTABLES_SUPPORT=off \</span><br><span class="line">  -e IPTABLES_MODE=legacy \</span><br><span class="line">  -v /lib/modules:/lib/modules:ro \</span><br><span class="line">  -v /etc/resolv.conf:/etc/resolv.conf \</span><br><span class="line">  -v /etc/v2raya:/etc/v2raya \</span><br><span class="line">  mzz2017/v2raya</span><br></pre></td></tr></table></figure><p>å¼€æ”¾ç«¯å£2017,æ‰“å¼€127.0.0.1:2017,æ³¨å†Œè´¦å·åç™»å½•,å¦‚æœå¿˜è®°äº†å¯ä»¥é‡ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo v2raya --reset-password</span><br></pre></td></tr></table></figure><p>å¯¼å…¥èŠ‚ç‚¹æˆ–è®¢é˜…-é€‰æ‹©nä¸ªèŠ‚ç‚¹-å·¦ä¸Šè§’å¯åŠ¨<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241231/image.8hgjwazhb3.jpg" alt="image"><br>è®¾ç½®<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241231/image.361nbld967.jpg" alt="image"></p><h2 id="ç«¯å£å†²çª"><a href="#ç«¯å£å†²çª" class="headerlink" title="ç«¯å£å†²çª"></a>ç«¯å£å†²çª</h2><p>å¯åŠ¨æ—¥å¿—å‘ç°æœ‰53ç«¯å£è¢«å ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Failed to start: listen udp 0.0.0.0:53: bind: address already in use</span><br><span class="line">2024/12/31 15:07:16.332 [W] [asm_amd64.s:1700] v2ray-core: exit status 1</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µåå‘ç°æ˜¯systemd-resolvedç›¸å…³è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tulpn | grep 53</span><br></pre></td></tr></table></figure><p>åœæ­¢systemd-resolvedæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop systemd-resolved</span><br></pre></td></tr></table></figure><p>æ‰“å¼€&#x2F;etc&#x2F;systemd&#x2F;resolved.conf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/systemd/resolved.conf</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[Resolve]</span><br><span class="line">DNS=223.5.5.5 #å–æ¶ˆæ³¨é‡Šï¼Œå¢åŠ dns</span><br><span class="line">#FallbackDNS=</span><br><span class="line">#Domains=</span><br><span class="line">#LLMNR=no</span><br><span class="line">#MulticastDNS=no</span><br><span class="line">#DNSSEC=no</span><br><span class="line">#Cache=yes</span><br><span class="line">DNSStubListener=no #å–æ¶ˆæ³¨é‡Šï¼ŒæŠŠyesæ”¹ä¸ºno</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl www.google.com</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>æ‚</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>äººåæ‰¹é‡è½¬æˆæœç‹—è¾“å…¥æ³•çŸ­è¯­æ ¼å¼å®ç°å¿«é€Ÿæ‰“äººå</title>
    <link href="/2024/12/31/%E4%BA%BA%E5%90%8D%E6%89%B9%E9%87%8F%E8%BD%AC%E6%88%90%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E7%9F%AD%E8%AF%AD%E6%A0%BC%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%BF%AB%E9%80%9F%E6%89%93%E4%BA%BA%E5%90%8D/"/>
    <url>/2024/12/31/%E4%BA%BA%E5%90%8D%E6%89%B9%E9%87%8F%E8%BD%AC%E6%88%90%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E7%9F%AD%E8%AF%AD%E6%A0%BC%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%BF%AB%E9%80%9F%E6%89%93%E4%BA%BA%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è€å©†åœ¨å­¦æ ¡æ‰“äººåæ‹¼éŸ³å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æƒ³ç€ç”¨å­¦ç”Ÿå§“ååˆ›å»ºè¯åº“å¯¼å…¥è¾“å…¥æ³•ï¼Œä½†å‘ç°è¯é¢‘ä¸å¤Ÿé«˜ä¸èƒ½è‡ªå®šä¹‰ï¼Œè¿˜æ˜¯ä¸æ–¹ä¾¿ï¼Œäºæ˜¯é‡‡ç”¨äº†æœç‹—è¾“å…¥æ³•çš„çŸ­è¯­åŠŸèƒ½ï¼Œé€šè¿‡è¾“å…¥å§“åæ‹¼éŸ³ç¼©å†™ï¼Œå¿«é€Ÿæ‰“å‡ºå§“åï¼ŒèŠ‚çœæ—¶é—´ã€‚</p><h2 id="æœç‹—è¾“å…¥æ³•çŸ­è¯­æ ¼å¼"><a href="#æœç‹—è¾“å…¥æ³•çŸ­è¯­æ ¼å¼" class="headerlink" title="æœç‹—è¾“å…¥æ³•çŸ­è¯­æ ¼å¼"></a>æœç‹—è¾“å…¥æ³•çŸ­è¯­æ ¼å¼</h2><p>æœç‹—è¾“å…¥æ³•çš„çŸ­è¯­åŠŸèƒ½å¯ä»¥è‡ªå®šä¹‰çŸ­è¯­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p>ç¼©å†™,åºå·&#x3D;å§“å</p><p>åºå·æ˜¯æŒ‡ç¼©å†™ç›¸åŒæƒ…å†µä¸‹ï¼Œè¯¥å§“åçš„é¡ºåºï¼Œåºå·è¶Šå°ï¼Œæ’åœ¨è¶Šå‰é¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hcy,1=è´ºè¾°æ‰¬</span><br><span class="line">gjy,2=é«˜ç‘¾å¦</span><br></pre></td></tr></table></figure><h2 id="æ‰¹é‡ç”ŸæˆçŸ­è¯­"><a href="#æ‰¹é‡ç”ŸæˆçŸ­è¯­" class="headerlink" title="æ‰¹é‡ç”ŸæˆçŸ­è¯­"></a>æ‰¹é‡ç”ŸæˆçŸ­è¯­</h2><p>è¾“å…¥æ˜¯å§“åtxtæ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ªå§“å,names.txt</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pinyin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_pinyin_abbreviation</span>(<span class="params">name</span>):</span><br><span class="line">    pinyin_list = pinyin.get(name, <span class="built_in">format</span>=<span class="string">&quot;strip&quot;</span>, delimiter=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    abbreviation = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> pinyin_list.split(<span class="string">&quot; &quot;</span>):</span><br><span class="line">        abbreviation += p[:<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> abbreviation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    result_dict = &#123;&#125;</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;names.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        lines = file.readlines()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;results.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> output_file:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            name = line.strip()  <span class="comment"># å»é™¤è¡Œæœ«çš„æ¢è¡Œç¬¦</span></span><br><span class="line">            abbreviation = get_pinyin_abbreviation(name)</span><br><span class="line">            <span class="keyword">if</span> abbreviation <span class="keyword">in</span> result_dict:</span><br><span class="line">                result_dict[abbreviation][<span class="number">1</span>] += <span class="number">1</span></span><br><span class="line">                output_line = <span class="string">f&quot;<span class="subst">&#123;abbreviation&#125;</span>,<span class="subst">&#123;result_dict[abbreviation][<span class="number">1</span>]&#125;</span>=<span class="subst">&#123;name&#125;</span>\n&quot;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                result_dict[abbreviation] = [name, <span class="number">1</span>]</span><br><span class="line">                output_line = <span class="string">f&quot;<span class="subst">&#123;abbreviation&#125;</span>,1=<span class="subst">&#123;name&#125;</span>\n&quot;</span></span><br><span class="line">            output_file.write(output_line)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>æ‚</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>vue3æ ¸å¿ƒç¬”è®°</title>
    <link href="/2024/12/31/vue3%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/12/31/vue3%E6%A0%B8%E5%BF%83%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘æƒ³ç³»ç»Ÿæ€§å­¦ä¹ ä¸€ä¸‹vue,åœ¨Bç«™çœ‹åˆ°äº†<code>æŠ€æœ¯è›‹è€å¸ˆ</code>çš„æ•™å­¦è§†é¢‘<code>https://github.com/eggtoopain/vue-router-4-tutorial</code>ï¼Œå—ç›ŠåŒªæµ…ï¼Œè›‹è€å¸ˆæä¾›äº†å„ä¸ªç« èŠ‚æºç ï¼Œä½†æ˜¯æ²¡æœ‰å½’çº³ç¬”è®°ï¼Œå› æ­¤æœ¬äººæŒ‰ç…§è§†é¢‘ç›®å½•ç²—ç•¥å½’çº³äº†ä¸€ä¸‹å†…å®¹,ä»¥ä¾¿å¿«é€Ÿå›é¡¾ã€‚</p><h2 id="åˆ›å»ºvueåº”ç”¨å’Œæ’å€¼è¡¨è¾¾å¼"><a href="#åˆ›å»ºvueåº”ç”¨å’Œæ’å€¼è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºvueåº”ç”¨å’Œæ’å€¼è¡¨è¾¾å¼"></a>åˆ›å»ºvueåº”ç”¨å’Œæ’å€¼è¡¨è¾¾å¼</h2><ul><li>ä»¥scriptæ–¹å¼å¼•å…¥vue.js</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºVueåº”ç”¨</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;<span class="title function_">data</span>(<span class="params"></span>)&#123;&#125;, <span class="attr">methods</span>:&#123;&#125;, <span class="attr">template</span>:<span class="string">&#x27;&#x27;</span>&#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vue3æ ¸å¿ƒç¬”è®°<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: <span class="string">&#x27;é›¶é£Ÿæ¸…å•&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="v-for-v-bind-v-modelç”¨æ³•"><a href="#v-for-v-bind-v-modelç”¨æ³•" class="headerlink" title="v-for,v-bind,v-modelç”¨æ³•"></a>v-for,v-bind,v-modelç”¨æ³•</h2><ul><li>v-for:å¾ªç¯å…ƒç´ </li><li>v-bind:å•å‘ç»‘å®šå±æ€§data-&gt;domï¼Œâ€œv-bind:â€å¯ä»¥ç®€å†™ä¸ºâ€œ:â€</li><li>v-model:åŒå‘ç»‘å®šdata&lt;-&gt;dom</li><li>ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;food in foods&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;food.image&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; food.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;food.purchased&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; food.purchased &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;é›¶é£Ÿæ¸…å•&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">foods</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                ]</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="key-v-show-computedç”¨æ³•"><a href="#key-v-show-computedç”¨æ³•" class="headerlink" title="key,v-show,computedç”¨æ³•"></a>key,v-show,computedç”¨æ³•</h2><ul><li>key:ç»™æ¯ä¸€ä¸ªå…ƒç´ æ·»åŠ å”¯ä¸€æ ‡è¯†ï¼Œé¿å…vueå¯¹å…ƒç´ è¿›è¡Œé‡æ–°æ¸²æŸ“</li><li>v-show:æ ¹æ®æ¡ä»¶æ˜¾ç¤ºå…ƒç´ ï¼ŒåŸç†æ˜¯æ ¹æ®CSSçš„displayå±æ€§æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</li><li>computed:è®¡ç®—å±æ€§ï¼Œä¾èµ–äºdataä¸­çš„æ•°æ®ï¼Œå¯ä»¥ç¼“å­˜è®¡ç®—ç»“æœï¼Œæé«˜æ¸²æŸ“æ•ˆç‡ï¼Œé€‚ç”¨äºé«˜é¢‘è®¡ç®—çš„å±æ€§</li><li>ä»£ç </li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">v-show</span>=<span class="string">&quot;beforeBuy.length&quot;</span>&gt;</span><span class="comment">&lt;!-- beforeBuy.lengthä¸ºtrueæ—¶æ˜¾ç¤º,é•¿åº¦ä¸º0æ—¶éšè— --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æœªè´­é›¶é£Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;food in beforeBuy&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;food.id&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;food.image&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; food.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;food.purchased&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">v-show</span>=<span class="string">&quot;afterBuy.length&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å·²è´­é›¶é£Ÿ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;food in afterBuy&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;food.id&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;food.image&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; food.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;food.purchased&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">foods</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">beforeBuy</span>(<span class="params"></span>) &#123;<span class="comment">//ç­›é€‰purchasedä¸ºfalseçš„å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">purchased</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">afterBuy</span>(<span class="params"></span>) &#123;<span class="comment">//ç­›é€‰purchasedä¸ºtrueçš„å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">purchased</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ‹†ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶"><a href="#æ‹†ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶" class="headerlink" title="æ‹†ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶"></a>æ‹†ç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶</h2><ul><li>æ‹†ç»„ä»¶ï¼šå°†ä¸€ä¸ªå¤§çš„ç»„ä»¶æ‹†åˆ†æˆå¤šä¸ªå°ç»„ä»¶ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</li><li>å¼•ç”¨ç»„ä»¶ï¼šåœ¨å…¶ä»–ç»„ä»¶ä¸­å¼•ç”¨å…¶ä»–ç»„ä»¶ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§</li><li>æ­¥éª¤<ul><li>åˆ›å»ºç»„ä»¶ï¼šåœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­å®šä¹‰ç»„ä»¶ï¼Œä½¿ç”¨templateæ ‡ç­¾å®šä¹‰ç»„ä»¶çš„ç»“æ„ï¼Œå¦‚æ–°å»ºcomponents&#x2F;AppSection.jsæ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">``</span>,<span class="comment">//åœ¨åå¼•å·å‰é¢åŠ ä¸Š/*html*/ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦ä¸²ä¸ºhtmlä»£ç ,vscodeä¸­ä½¿ç”¨es6-string-htmlæ’ä»¶æ¥é«˜äº®å…³é”®å­—</span></span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¼•ç”¨ç»„ä»¶ï¼šåœ¨å…¶ä»–ç»„ä»¶ä¸­å¼•ç”¨ç»„ä»¶ï¼Œä½¿ç”¨templateæ ‡ç­¾å¼•ç”¨ç»„ä»¶,ç”±äºhtmlä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯¹äºé©¼å³°å¼å‘½åçš„ç»„ä»¶ï¼Œéœ€è¦ä½¿ç”¨kebab-caseå‘½åæ³•ï¼Œå¦‚AppSections.vueæ–‡ä»¶ï¼Œåœ¨htmlå¼•ç”¨æ—¶å†™æˆ<app-sections></app-sections></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSections</span> <span class="keyword">from</span> <span class="string">&quot;./AppSections.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSections</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections&gt;&lt;/app-sections&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AppSection.js</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;section v-show=&quot;beforeBuy.length&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;æœªè´­é›¶é£Ÿ&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">                &lt;li v-for=&quot;food in beforeBuy&quot; :key=&quot;food.id&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;img :src=&quot;food.image&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span&gt;&#123;&#123; food.name &#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; v-model=&quot;food.purchased&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;/section&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;section v-show=&quot;afterBuy.length&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;å·²è´­é›¶é£Ÿ&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">                &lt;li v-for=&quot;food in afterBuy&quot; :key=&quot;food.id&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;img :src=&quot;food.image&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span&gt;&#123;&#123; food.name &#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; v-model=&quot;food.purchased&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;/section&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">foods</span>: [</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">beforeBuy</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">purchased</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">afterBuy</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">purchased</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>App.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSections</span> <span class="keyword">from</span> <span class="string">&quot;./AppSections.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSections</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections&gt;&lt;/app-sections&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./components/App.js&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="propså’Œç»„ä»¶å¤ç”¨"><a href="#propså’Œç»„ä»¶å¤ç”¨" class="headerlink" title="propså’Œç»„ä»¶å¤ç”¨"></a>propså’Œç»„ä»¶å¤ç”¨</h2><ul><li>ç»§ç»­æ‹†ç»„ä»¶ï¼ŒæŠŠå·²è´­é›¶é£Ÿå’Œæœªè´­é›¶é£Ÿæ‹†åˆ†æˆä¸¤ä¸ªç»„ä»¶ï¼Œä¸¤ä¸ªç»„ä»¶ä¸åŒçš„æ˜¯æ ‡é¢˜å’Œæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨propsæ¥ä¼ é€’è¿™ä¸¤ä¸ªæ•°æ®</li><li>ç”¨propsä¼ å‚çš„æ–¹å¼æ¥å†™å­ç»„ä»¶,å­ç»„ä»¶ä¸­è§„å®šå‚æ•°ç±»å‹</li></ul><p>å­ç»„ä»¶ï¼šAppSectionsList.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;section v-show=&quot;buyChild.length&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h2&gt;&#123;&#123;headline&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">                &lt;li v-for=&quot;food in buyChild&quot; :key=&quot;food.id&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;img :src=&quot;food.image&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;span&gt;&#123;&#123; food.name &#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; v-model=&quot;food.purchased&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;/section&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">headline</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">buyChild</span>: <span class="title class_">Object</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>çˆ¶ç»„ä»¶é¦–å…ˆimportå­ç»„ä»¶ï¼Œç„¶ååœ¨templateä¸­å¼•ç”¨å­ç»„ä»¶ï¼Œå¹¶ä¼ é€’props</li><li>çˆ¶ç»„ä»¶çš„computedä¸­å®šä¹‰filterså¯¹è±¡ï¼Œfilterså¯¹è±¡ä¸­åŒ…å«ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«ä¸ºæœªè´­é›¶é£Ÿå’Œå·²è´­é›¶é£Ÿçš„æ•°ç»„<br>çˆ¶ç»„ä»¶ï¼šAppSections.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSectionsList</span> <span class="keyword">from</span> <span class="string">&quot;./AppSectionsList.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSectionsList</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections-list </span></span><br><span class="line"><span class="string">            headline=&quot;æœªè´­é›¶é£Ÿ&quot; </span></span><br><span class="line"><span class="string">            :buyChild=&quot;filters.beforeBuy&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string">        &lt;app-sections-list </span></span><br><span class="line"><span class="string">            headline=&quot;å·²è´­é›¶é£Ÿ&quot; </span></span><br><span class="line"><span class="string">            :buyChild=&quot;filters.afterBuy&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">foods</span>: [</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">filters</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">beforeBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">purchased</span>),</span><br><span class="line">                <span class="attr">afterBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">purchased</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çˆ·çˆ·ç»„ä»¶ï¼šApp.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSections</span> <span class="keyword">from</span> <span class="string">&quot;./AppSections.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSections</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections&gt;&lt;/app-sections&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="v-on-methods-v-if-styleå’Œclassç»‘å®šäº‹ä»¶"><a href="#v-on-methods-v-if-styleå’Œclassç»‘å®šäº‹ä»¶" class="headerlink" title="v-on,methods,v-if,styleå’Œclassç»‘å®šäº‹ä»¶"></a>v-on,methods,v-if,styleå’Œclassç»‘å®šäº‹ä»¶</h2><ul><li>v-on:ç»‘å®šäº‹ä»¶ï¼Œå¯ä»¥ç®€å†™ä¸º@<br>@submit.preventå¯ä»¥é˜»æ­¢è¡¨å•çš„é»˜è®¤äº‹ä»¶ï¼Œå¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘</li><li>v-if:çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ï¼Œæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦æ¸²æŸ“å…ƒç´ ï¼Œå¯ä»¥æœ‰v-else-ifã€v-else<ul><li>v-showçš„åŸç†æ˜¯æ ¹æ®CSSçš„displayå±æ€§æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—,ä¸ä¼šç§»é™¤domå…ƒç´ </li></ul></li><li>:class&#x3D;{className: true}</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;add&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥çˆ±åƒçš„é±¿é±¼ä¸...&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;newFood&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;foods.length &lt;=3&quot;</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;buttonColor: true&#125;&quot;</span> <span class="attr">v-else-if</span>=<span class="string">&quot;foods.length &gt; 3 &amp;&amp; foods.length &lt; 5&quot;</span>&gt;</span>å†åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;buttonColor: true&#125;&quot;</span> <span class="attr">v-else</span>&gt;</span>ç»§ç»­åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>AppSections.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSectionsList</span> <span class="keyword">from</span> <span class="string">&quot;./AppSectionsList.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSectionsList</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections-list headline=&quot;æœªè´­é›¶é£Ÿ&quot; :buyChild=&quot;filters.beforeBuy&quot;&gt;&lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string">        &lt;app-sections-list headline=&quot;å·²è´­é›¶é£Ÿ&quot; :buyChild=&quot;filters.afterBuy&quot;&gt;&lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;form @submit.prevent=&quot;add&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;input type=&quot;text&quot; placeholder=&quot;è¾“å…¥çˆ±åƒçš„é±¿é±¼ä¸...&quot; v-model=&quot;newFood&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;button type=&quot;submit&quot; v-if=&quot;foods.length &lt;=3&quot;&gt;æ·»åŠ &lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button type=&quot;submit&quot; :class=&quot;&#123;buttonColor: true&#125;&quot; v-else-if=&quot;foods.length &gt; 3 &amp;&amp; foods.length &lt; 5&quot;&gt;å†åŠ &lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;button type=&quot;submit&quot; :class=&quot;&#123;buttonColor: true&#125;&quot; v-else&gt;ç»§ç»­åŠ &lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">foods</span>: [</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">newFood</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="property">length</span> + <span class="number">1</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">newFood</span>,</span><br><span class="line">                <span class="attr">image</span>: <span class="string">&#x27;../images/é±¿é±¼ä¸.png&#x27;</span>,</span><br><span class="line">                <span class="attr">purchased</span>: <span class="literal">false</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">newFood</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">filters</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">beforeBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">purchased</span>),</span><br><span class="line">                <span class="attr">afterBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">purchased</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>style.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.buttonColor</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="emit"><a href="#emit" class="headerlink" title="$emit"></a>$emit</h2><ul><li>$emit æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œç”¨äºåœ¨å­ç»„ä»¶ä¸­è§¦å‘äº‹ä»¶ï¼Œä½¿å¾—çˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬å¹¶å“åº”è¿™äº›äº‹ä»¶ã€‚$emit æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åç§°ï¼Œéšåçš„å‚æ•°æ˜¯ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°çš„æ•°æ®ã€‚</li><li>å­ç»„ä»¶ï¼š<ul><li>AppSectionsFrom.js</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;form @submit.prevent=&quot;add&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;input type=&quot;text&quot; placeholder=&quot;è¾“å…¥çˆ±åƒçš„é±¿é±¼ä¸...&quot; v-model=&quot;newFood&quot; /&gt;</span></span><br><span class="line"><span class="string">            &lt;button type=&quot;submit&quot;&gt;æ·»åŠ &lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">newFood</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;addFather&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newFood</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">newFood</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>çˆ¶ç»„ä»¶<ul><li>AppSections.js</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AppSectionsList</span> <span class="keyword">from</span> <span class="string">&quot;./AppSectionsList.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AppSectionsForm</span> <span class="keyword">from</span> <span class="string">&quot;./AppSectionsForm.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">AppSectionsList</span>, <span class="title class_">AppSectionsForm</span> &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="comment">/*html*/</span> <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;app-sections-list headline=&quot;æœªè´­é›¶é£Ÿ&quot; :buyChild=&quot;filters.beforeBuy&quot;&gt;&lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string">        &lt;app-sections-list headline=&quot;å·²è´­é›¶é£Ÿ&quot; :buyChild=&quot;filters.afterBuy&quot;&gt;&lt;/app-sections-list&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;app-sections-form </span></span><br><span class="line"><span class="string">            @addFather=&quot;fatherAdd&quot;</span></span><br><span class="line"><span class="string">        &gt;&lt;/app-sections-form&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">foods</span>: [</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;åŸå‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/åŸå‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¾£å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/è¾£å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;ç‚­çƒ§å‘³é±¿é±¼ä¸&#x27;</span>, <span class="attr">image</span>: <span class="string">&#x27;./images/ç‚­çƒ§å‘³é±¿é±¼ä¸.png&#x27;</span>, <span class="attr">purchased</span>: <span class="literal">false</span> &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">fatherAdd</span>(<span class="params">youyusi</span>) &#123;<span class="comment">//youyusiå‚æ•°å¯¹åº”å­ç»„ä»¶çš„newFood</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="property">length</span> + <span class="number">1</span>,</span><br><span class="line">                <span class="attr">name</span>: youyusi,</span><br><span class="line">                <span class="attr">image</span>: <span class="string">&#x27;../images/é±¿é±¼ä¸.png&#x27;</span>,</span><br><span class="line">                <span class="attr">purchased</span>: <span class="literal">false</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">filters</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">beforeBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> !item.<span class="property">purchased</span>),</span><br><span class="line">                <span class="attr">afterBuy</span>: <span class="variable language_">this</span>.<span class="property">foods</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">purchased</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vueé¡¹ç›®ç»„æˆé€»è¾‘ã€æ–‡ä»¶å…³ç³»å’Œä½œç”¨"><a href="#vueé¡¹ç›®ç»„æˆé€»è¾‘ã€æ–‡ä»¶å…³ç³»å’Œä½œç”¨" class="headerlink" title="vueé¡¹ç›®ç»„æˆé€»è¾‘ã€æ–‡ä»¶å…³ç³»å’Œä½œç”¨"></a>vueé¡¹ç›®ç»„æˆé€»è¾‘ã€æ–‡ä»¶å…³ç³»å’Œä½œç”¨</h2><p>vueæŠŠé¡µé¢ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ï¼Œæ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª.vueæ–‡ä»¶ï¼Œç»„ä»¶æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯App.vueæ–‡ä»¶ï¼ŒApp.vueæ–‡ä»¶ä¸­åŒ…å«äº†æ•´ä¸ªé¡µé¢çš„ç»“æ„å’Œé€»è¾‘ã€‚</p><h3 id="SFC"><a href="#SFC" class="headerlink" title="SFC"></a>SFC</h3><p>Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSingle File Componentï¼Œç®€ç§° SFCï¼‰æ˜¯ Vue.js çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼Œå®ƒå…è®¸å¼€å‘è€…å°†ç»„ä»¶çš„æ¨¡æ¿ã€é€»è¾‘å’Œæ ·å¼å°è£…åœ¨ä¸€ä¸ªå•ç‹¬çš„ .vue æ–‡ä»¶ä¸­ã€‚è¿™ç§æ–‡ä»¶ç»“æ„ä½¿å¾—ç»„ä»¶çš„ç»„ç»‡å’Œå¤ç”¨å˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; greeting &#125;&#125; World&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      greeting: &#x27;Hello&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.hello &#123;</span><br><span class="line">  color: #42b983;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ SFC çš„å¥½å¤„ï¼š</p><p>1.ç»„ä»¶åŒ–ï¼šæ¯ä¸ª SFC éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯ä»¥åŒ…å«è‡ªå·±çš„æ¨¡æ¿ã€é€»è¾‘å’Œæ ·å¼ã€‚</p><p>2.æ¨¡å—åŒ–ï¼šSFC ä½¿å¾—ç»„ä»¶å¯ä»¥è¢«è½»æ¾åœ°å¯¼å…¥å’Œå¯¼å‡ºï¼Œä¾¿äºæ¨¡å—åŒ–å¼€å‘ã€‚</p><p>3.ç»´æŠ¤æ€§ï¼šå°†ç›¸å…³çš„ä»£ç ç»„ç»‡åœ¨ä¸€èµ·ï¼Œä¾¿äºç»´æŠ¤å’Œç†è§£ã€‚</p><p>4.å¼€å‘æ•ˆç‡ï¼šå¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¿«é€Ÿåœ°ç¼–è¾‘æ¨¡æ¿ã€é€»è¾‘å’Œæ ·å¼ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p>npmï¼ˆnode package managerï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†å’Œå‘å¸ƒä»£ç ã€‚</p><p>ç”Ÿæˆ package.json æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p>å®‰è£…vueä¾èµ–åŒ…,ä¼šç”Ÿæˆpackage-lock.jsonæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶è®°å½•äº†å½“å‰é¡¹ç›®ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬å·ï¼Œä»¥ä¾¿äºåç»­é¡¹ç›®ä¾èµ–çš„å¤ç°ï¼Œä¾èµ–å…¨éƒ½å®‰è£…åœ¨node_modulesç›®å½•ä¸‹ã€‚</p><ul><li>package.jsonæ–‡ä»¶ï¼šç®€æ˜“åŒ…ç®¡ç†æ–‡ä»¶</li><li>package-lock.jsonæ–‡ä»¶ï¼šè¯¦ç»†åŒ…ç®¡ç†æ–‡ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue</span><br></pre></td></tr></table></figure><h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªæ¨¡å—æŒ‰ç…§ä¸€å®šè§„åˆ™è½¬æ¢æˆæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„é™æ€èµ„æºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i - D webpack webpack-cli webpack-dev-server //-Dè¡¨ç¤ºå¼€å‘ç¯å¢ƒä¾èµ–ï¼Œå¹¶ä¸æ”¾åˆ°ç”Ÿäº§ç¯å¢ƒä¸­</span><br><span class="line">npm i - D babel-loader @babel/core @babel/preset-env //é˜²æ­¢æµè§ˆå™¨ä¸è®¤è¯†ES6è¯­æ³•ï¼Œéœ€è¦ç”¨babelæŠŠä»£ç ä»é«˜ç‰ˆæœ¬çš„ES6è½¬ä¸ºä½ç‰ˆæœ¬çš„ES5</span><br><span class="line">npm i - D vue-loader vue-template-compiler css-loader vue-style-loader html-webpack-plugin</span><br></pre></td></tr></table></figure><p>åˆ›å»ºwebpack.config.jsæ–‡ä»¶ï¼Œé…ç½®webpackçš„å…¥å£å’Œå‡ºå£æ–‡ä»¶ï¼Œä»¥åŠloaderï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="attr">use</span>: <span class="string">&#x27;vue-loader&#x27;</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">&#x27;vue-style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>] &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">&#x27;babel-loader&#x27;</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»º.babelrcæ–‡ä»¶ï¼Œé…ç½®babelçš„è½¬è¯‘è§„åˆ™ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">moudle.exports = <span class="punctuation">&#123;</span></span><br><span class="line">    presets<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;@babel/preset-env&#x27;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>webpackå‘½ä»¤ç®€åŒ–ï¼Œå›åˆ°package.jsonæ–‡ä»¶ä¸­ï¼Œæ·»åŠ scriptså‘½ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --mode development&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode production&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨npm run devå‘½ä»¤å¯åŠ¨webpackå¼€å‘ç¯å¢ƒï¼Œä½¿ç”¨npm run buildå‘½ä»¤æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚</p><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init //åˆå§‹åŒ–gitä»“åº“</span><br></pre></td></tr></table></figure><p>æ–°å»º.gitignoreæ–‡ä»¶ï¼Œé…ç½®ä¸éœ€è¦æäº¤çš„æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">node_modules</span><br><span class="line">dist</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line">/*.log</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">.env.local</span><br><span class="line">.env.development.local</span><br><span class="line">.env.test.local</span><br><span class="line">.env.production.local</span><br><span class="line"></span><br><span class="line"># Editor directories and files</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">*.suo</span><br><span class="line">*.ntvs*</span><br><span class="line">*.njsproj</span><br><span class="line">*.sln</span><br><span class="line">*.sw?</span><br><span class="line"></span><br><span class="line"># System files</span><br><span class="line">Thumbs.db</span><br></pre></td></tr></table></figure><p>é“¾æ¥åˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/username/project.git</span><br></pre></td></tr></table></figure><p>æäº¤ä»£ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . //æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">git commit -m &quot;æäº¤ä¿¡æ¯&quot; //æäº¤ä»£ç </span><br><span class="line">git push origin master //æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“çš„masteråˆ†æ”¯,æœ¬åœ°ä¹Ÿéœ€è¦æœ‰masteråˆ†æ”¯ï¼ŒæŸ¥çœ‹åˆ†æ”¯ï¼šgit branch -aï¼ŒæŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼šgit branch -r</span><br></pre></td></tr></table></figure><p>å…¶ä»–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch -m old_name new_name //æœ¬åœ°åˆ†æ”¯æ”¹å</span><br><span class="line">git checkout -b new_branch //åˆ›å»ºæ–°åˆ†æ”¯</span><br><span class="line">git branch -D branch_name //åˆ é™¤æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git checkout branch_name //åˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git fetch //åªä¸‹è½½è¿œç¨‹åˆ†æ”¯çš„æœ€æ–°æ›´æ”¹ï¼Œä½†ä¸ä¼šè‡ªåŠ¨åˆå¹¶åˆ°ä½ çš„æœ¬åœ°åˆ†æ”¯ï¼Œéœ€è¦æ‰‹åŠ¨åˆå¹¶ã€‚</span><br><span class="line">git pull //ä¸‹è½½è¿œç¨‹åˆ†æ”¯çš„æœ€æ–°æ›´æ”¹ï¼Œå¹¶å°è¯•å°†è¿™äº›æ›´æ”¹åˆå¹¶åˆ°ä½ çš„æœ¬åœ°åˆ†æ”¯ã€‚ç›¸å½“äº git fetch å’Œ git mergeã€‚</span><br></pre></td></tr></table></figure><h3 id="jsconfig-json"><a href="#jsconfig-json" class="headerlink" title="jsconfig.json"></a>jsconfig.json</h3><p>jsconfig.jsonæ–‡ä»¶æ˜¯VS Codeçš„é…ç½®æ–‡ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨VS Codeä¸­æ›´å¥½åœ°å¼€å‘JavaScripté¡¹ç›®ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span><span class="comment">//ä½¿ç”¨@ç¬¦å·æ¥è¡¨ç¤ºsrcç›®å½•</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom.iterable&quot;</span><span class="punctuation">,</span> <span class="string">&quot;scripthost&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="vue-cli"><a href="#vue-cli" class="headerlink" title="vue-cli"></a>vue-cli</h3><p>vue-cliæ˜¯ä¸€ä¸ªè„šæ‰‹æ¶å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºåŸºäºVueçš„é¡¹ç›®ç»“æ„ã€‚</p><p>åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g @vue/cli //å…¨å±€å®‰è£…vue-cli</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create my-project //åˆ›å»ºæ–°é¡¹ç›®</span><br></pre></td></tr></table></figure><p>ç›®å½•ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€.git/</span><br><span class="line">â”‚   â””â”€â”€ ç‰ˆæœ¬æ§åˆ¶ç›¸å…³æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ dist/</span><br><span class="line">â”‚   â”œâ”€â”€ css/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ js/</span><br><span class="line">â”‚       â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚       â””â”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ node_modules/</span><br><span class="line">â”‚   â””â”€â”€ é¡¹ç›®ä¾èµ–çš„ Node.js æ¨¡å—</span><br><span class="line">â”œâ”€â”€ public/</span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚   â””â”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ src/</span><br><span class="line">â”‚   â”œâ”€â”€ assets/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€æ ·å¼ç­‰</span><br><span class="line">â”‚   â”‚       â””â”€â”€ logo.png</span><br><span class="line">â”‚   â”œâ”€â”€ components/</span><br><span class="line">â”‚   â”‚   â””â”€â”€ Vue ç»„ä»¶ç›®å½•</span><br><span class="line">â”‚   â”‚       â””â”€â”€ HelloWorld.vue</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â””â”€â”€ main.js</span><br><span class="line">â”œâ”€â”€.gitignore</span><br><span class="line">â”œâ”€â”€ babel.config.js</span><br><span class="line">â”œâ”€â”€ jsconfig.json</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â””â”€â”€ vue.config.js</span><br></pre></td></tr></table></figure><h2 id="vue-routerå®¢æˆ·ç«¯è·¯ç”±çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†"><a href="#vue-routerå®¢æˆ·ç«¯è·¯ç”±çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†" class="headerlink" title="vue-routerå®¢æˆ·ç«¯è·¯ç”±çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†"></a>vue-routerå®¢æˆ·ç«¯è·¯ç”±çš„æ ¸å¿ƒåŸºç¡€çŸ¥è¯†</h2><p>è¿™é‡Œä½¿ç”¨viteåˆ›å»ºé¡¹ç›®ï¼Œä½¿ç”¨vue-cliä¹Ÿå·®ä¸å¤šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-vite</span><br><span class="line">create-vite my-vue-vite-project --template vue</span><br></pre></td></tr></table></figure><p>cdè¿›å…¥é¡¹ç›®ç›®å½•å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>æ–°å»ºrouteræ–‡ä»¶å¤¹,åˆ›å»ºindex.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter,createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥ç»„ä»¶ï¼Œä¸€èˆ¬æ”¾åˆ°viewsæ–‡ä»¶å¤¹ä¸‹ï¼Œæ³¨æ„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../views/About.vue&#x27;</span></span><br><span class="line"><span class="comment">//è·¯ç”±æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä½¿ç”¨å¯¹è±¡çš„æ–¹å¼æ¯”è¾ƒå¥½ç®¡ç†ï¼Œå¯ä»¥ä½¿routerå¯¹è±¡æ›´åŠ ç®€æ´</span></span><br><span class="line"><span class="keyword">const</span> routes =  [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">        <span class="comment">//createWebHistory:h5å†å²</span></span><br><span class="line">        <span class="comment">//createHashHistory:è·¯ç”±å‰é¢å¤šä¸€ä¸ª#å·</span></span><br><span class="line">        routes</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">//å¯¼å‡ºrouterå¯¹è±¡ï¼Œä½¿å¾—main.jsæ–‡ä»¶æ›´åŠ ç®€æ´</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>æ–°å»ºviewsæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºå¯¹åº”ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">        Home</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">        About</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;nav&gt;</span><br><span class="line">    &lt;a href=&quot;/&quot;&gt;aæ ‡ç­¾ï¼šä¸»é¡µ&lt;/a&gt; |</span><br><span class="line">    &lt;a href=&quot;/about&quot;&gt;aæ ‡ç­¾ï¼šå…³äº&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;router-linkï¼šä¸»é¡µ&lt;/router-link&gt; |</span><br><span class="line">    &lt;router-link to=&quot;/about&quot;&gt;router-linkï¼šå…³äº&lt;/router-link&gt;</span><br><span class="line">    &lt;br&gt;ç‚¹å‡»aæ ‡ç­¾é¡µé¢ä¼šæœ‰æ–°çš„httpè¯·æ±‚ï¼Œrouter-linkä¸ä¼šã€‚</span><br><span class="line"></span><br><span class="line">  &lt;/nav&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;!-- æŒ‡å®šè·¯ç”±ç»„ä»¶æ˜¾ç¤ºçš„ä½ç½® --&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./style.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span><span class="comment">//ä¸éœ€è¦å†™index.jsï¼Œä¼šè‡ªåŠ¨è¯†åˆ«</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(router).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="è¿›é˜¶æ¡ˆä¾‹"><a href="#è¿›é˜¶æ¡ˆä¾‹" class="headerlink" title="è¿›é˜¶æ¡ˆä¾‹"></a>è¿›é˜¶æ¡ˆä¾‹</h3><p>è·¯ç”±ç”±æ•°æ®åŠ¨æ€å†³å®šï¼Œä¸å†™æ­»ï¼Œæ¯”å¦‚ï¼š<br>å‡†å¤‡ä¸€ä¸ªdata.jsonæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br>è¦æŠŠæ¯ä¸€æ¡æ•°æ®å•ç‹¬åšä¸€æ¡è·¯ç”±</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¸¡è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chicken-egg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chicken-egg.jpeg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åˆåé¸¡åµã€é¸¡å­ï¼Œæ˜¯æ¯é¸¡æ‰€äº§çš„åµ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flavour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å‘³ç”˜ï¼Œæ€§å¹³ï¼Œæ— æ¯’ï¼ˆç…®ç†Ÿåï¼‰&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¸­è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;duck-egg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;duck-egg.jpeg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;åˆåé¸­å­ã€é¸­åµã€å¤ªå¹³ã€é¸­æ˜¥ã€é’çš®ç­‰ï¼Œä¸ºé¸­ç§‘åŠ¨ç‰©å®¶é¸­çš„åµï¼Œå—ç²¾åµå¯å­µåŒ–æˆå°é¸­&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flavour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ€§æ¶¼ã€å‘³ç”˜&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¹…è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;goose-egg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;goose-egg.jpeg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å®¶ç¦½é¹…ç”Ÿä¸‹çš„åµ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flavour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœ‰äº›æ²¹&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é¹Œé¹‘è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;quail-egg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;quail-egg.jpeg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;éµªé¶‰æ‰€ç”¢çš„åµï¼Œè›‹æ®¼è¡¨é¢å¸¶æœ‰æ£•è¤è‰²æ–‘é»&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flavour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å‘³ç”˜ã€æ€§å¹³&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç¬¨è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dumb-egg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dumb-egg.jpeg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æˆ‘æ‰ä¸æ˜¯ç¬¨è›‹&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;flavour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ²¡åƒè¿‡&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p><strong>è¯¦ç»†çš„é€»è¾‘è¯·çœ‹æ³¨é‡Š****è¯¦ç»†çš„é€»è¾‘è¯·çœ‹æ³¨é‡Š</strong><br>App.vueä¸­ä½¿ç”¨v-foræ·»åŠ è·¯ç”±</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;nav&gt;</span><br><span class="line">    &lt;a href=&quot;/&quot;&gt;aæ ‡ç­¾ï¼šä¸»é¡µ&lt;/a&gt; |</span><br><span class="line">    &lt;a href=&quot;/about&quot;&gt;aæ ‡ç­¾ï¼šå…³äº&lt;/a&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;router-linkï¼šä¸»é¡µ&lt;/router-link&gt; |</span><br><span class="line">    &lt;router-link to=&quot;/about&quot;&gt;router-linkï¼šå…³äº&lt;/router-link&gt;</span><br><span class="line">    &lt;br&gt;ç‚¹å‡»aæ ‡ç­¾é¡µé¢ä¼šæœ‰æ–°çš„httpè¯·æ±‚ï¼Œrouter-linkä¸ä¼šã€‚</span><br><span class="line">    &lt;br&gt;ä¸‹é¢æ˜¯åŠ¨æ€çš„è·¯ç”±ï¼š</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;router-link</span><br><span class="line">      v-for=&quot;item in dataEggs&quot;</span><br><span class="line">      :key=&quot;item.id&quot;</span><br><span class="line">      :to=&quot;`/eggs/$&#123;item.type&#125;`&quot;</span><br><span class="line">      &gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125; |</span><br><span class="line">    &lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/nav&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;!-- æŒ‡å®šè·¯ç”±ç»„ä»¶æ˜¾ç¤ºçš„ä½ç½® --&gt;</span><br><span class="line">  &lt;button @click=&quot;backward&quot;&gt;é€€å&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;forward&quot;&gt;å‰è¿›&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import dataEggs from &#x27;./data.json&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      dataEggs//ES6è¯­æ³•</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    backward() &#123;</span><br><span class="line">      this.$router.go(-1)//æŸ¥çœ‹å†å²æ“ä½œ</span><br><span class="line">    &#125;,</span><br><span class="line">    forward() &#123;</span><br><span class="line">      this.$router.go(1)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.egg-active &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>router&#x2F;index.jsä¸­é…ç½®è·¯ç”±</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter,createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//å¼•å…¥ç»„ä»¶ï¼Œä¸€èˆ¬æ”¾åˆ°viewsæ–‡ä»¶å¤¹ä¸‹ï¼Œæ³¨æ„ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../views/About.vue&#x27;</span></span><br><span class="line"><span class="comment">// import Eggs from &#x27;../views/Eggs.vue&#x27;//å¼•å…¥è·¯ç”±ç»„ä»¶</span></span><br><span class="line"><span class="comment">// import NotFound from &#x27;../views/NotFound.vue&#x27;//å¼•å…¥404é¡µé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·¯ç”±æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä½¿ç”¨å¯¹è±¡çš„æ–¹å¼æ¯”è¾ƒå¥½ç®¡ç†ï¼Œå¯ä»¥ä½¿routerå¯¹è±¡æ›´åŠ ç®€æ´</span></span><br><span class="line"><span class="keyword">const</span> routes =  [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;,</span><br><span class="line">    <span class="comment">// åŠ¨æ€è·¯ç”±ï¼šeggTypeæ˜¯è‡ªå®šä¹‰å±æ€§åï¼Œè·Ÿdata.jsonå±æ€§åæ— å…³</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/eggs/:eggType&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Eggs.vue&#x27;</span>) &#125;,<span class="comment">//ç¢°åˆ°/eggsè·¯å¾„çš„æ—¶å€™åº”ç”¨EggsåŠ¨æ€è·¯ç”±ç»„ä»¶,ç»†èŠ‚å‚æ•°eggTypeï¼Œä¸å¯ä»¥å†™æˆegg-type,jsä¸­ä¸å…è®¸ç”¨-</span></span><br><span class="line">    <span class="comment">// () =&gt; import(&#x27;../views/Eggs.vue&#x27;)è¿™ç§å†™æ³•æ˜¯æ‡’åŠ è½½é¡µé¢ï¼Œåªæœ‰å½“è®¿é—®åˆ°è¯¥è·¯ç”±çš„æ—¶å€™æ‰ä¼šåŠ è½½ï¼Œå¯ä»¥æé«˜é¡µé¢åŠ è½½é€Ÿåº¦</span></span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ç»™è·¯ç”±æ·»åŠ åˆ«å &#123; path: &#x27;/eggs/:eggType&#x27;, name: &#x27;Eggs&#x27;, component: () =&gt; import(&#x27;../views/Eggs.vue&#x27;) &#125;,</span></span><br><span class="line">    <span class="comment">// ç„¶åApp.vueé‡Œå¯ä»¥ç”¨&lt;router-link :to=&quot;&#123; name: &#x27;Eggs&#x27;, params: &#123; eggType: item.type &#125; &#125;&quot;&gt;å»è·³è½¬åˆ°Eggsé¡µé¢</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/eggs&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/eggs/chicken-egg&#x27;</span> &#125;,<span class="comment">//é‡å®šå‘</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/NotFound.vue&#x27;</span>) &#125;,<span class="comment">//åŒ¹é…æ‰€æœ‰è·¯å¾„ï¼Œå¦‚æœéƒ½ä¸åŒ¹é…ï¼Œå°±æ¸²æŸ“NotFoundç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">        <span class="comment">//createWebHistory:h5å†å²</span></span><br><span class="line">        <span class="comment">//createHashHistory:è·¯ç”±å‰é¢å¤šä¸€ä¸ª#å·</span></span><br><span class="line">        routes,</span><br><span class="line">        <span class="attr">linkActiveClass</span>: <span class="string">&#x27;egg-active&#x27;</span><span class="comment">//è·¯ç”±æ¿€æ´»çš„class,App.vueé‡Œå®šä¹‰çš„</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">//å¯¼å‡ºrouterå¯¹è±¡ï¼Œä½¿å¾—main.jsæ–‡ä»¶æ›´åŠ ç®€æ´</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>Egg.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&quot;!dataEgg&quot;&gt;</span><br><span class="line">      &lt;h1&gt;æŸ¥æ— æ­¤è›‹&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div v-else&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123; dataEgg.name &#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; dataEgg.description &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; dataEgg.flavour &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;!-- &lt;img :src=&quot;`../../src/assets/images/$&#123;dataEgg.image&#125;`&quot;&gt; --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  import dataEggs from &#x27;../data.json&#x27;</span><br><span class="line">  export default &#123;</span><br><span class="line">    computed: &#123;</span><br><span class="line">      eggType() &#123;</span><br><span class="line">        return this.$route.params.eggType</span><br><span class="line">        //this.$route æ˜¯ä¸€ä¸ªåŒ…å«å½“å‰è·¯ç”±ä¿¡æ¯çš„å¯¹è±¡ï¼Œå®ƒæä¾›äº†è®¸å¤šæœ‰ç”¨çš„å±æ€§</span><br><span class="line">      &#125;,</span><br><span class="line">      dataEgg() &#123;</span><br><span class="line">        return dataEggs.find(</span><br><span class="line">          dataEgg =&gt; dataEgg.type === this.eggType</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style scoped&gt;</span><br><span class="line">    img &#123;</span><br><span class="line">      width: 150px;</span><br><span class="line">      height: 150px;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä»–ï¼šviews&#x2F;NotFound.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">      404</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>åä¸ºé˜²ç«å¢™å®‰å…¨ç­–ç•¥åŸºç¡€</title>
    <link href="/2024/12/16/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/12/16/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰å…¨ç­–ç•¥åŸºç¡€"><a href="#å®‰å…¨ç­–ç•¥åŸºç¡€" class="headerlink" title="å®‰å…¨ç­–ç•¥åŸºç¡€"></a>å®‰å…¨ç­–ç•¥åŸºç¡€</h1><h2 id="å®‰å…¨ç­–ç•¥çš„ç»„æˆ"><a href="#å®‰å…¨ç­–ç•¥çš„ç»„æˆ" class="headerlink" title="å®‰å…¨ç­–ç•¥çš„ç»„æˆ"></a>å®‰å…¨ç­–ç•¥çš„ç»„æˆ</h2><p>æ¯ä¸€æ¡å®‰å…¨ç­–ç•¥éƒ½æ˜¯ç”±åŒ¹é…æ¡ä»¶å’ŒåŠ¨ä½œç»„æˆçš„è§„åˆ™ã€‚é˜²ç«å¢™æ¥æ”¶åˆ°æŠ¥æ–‡ä»¥åï¼Œå°†æŠ¥æ–‡çš„å±æ€§ä¸å®‰å…¨ç­–ç•¥çš„åŒ¹é…æ¡ä»¶è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½åŒ¹é…ï¼Œåˆ™æ­¤æŠ¥æ–‡æˆåŠŸåŒ¹é…å®‰å…¨ç­–ç•¥ï¼Œé˜²ç«å¢™æŒ‰ç…§è¯¥å®‰å…¨ç­–ç•¥çš„åŠ¨ä½œå¤„ç†è¿™ä¸ªæŠ¥æ–‡åŠå…¶åç»­åŒå‘æµé‡ã€‚å› æ­¤ï¼Œå®‰å…¨ç­–ç•¥çš„æ ¸å¿ƒå…ƒç´ æ˜¯åŒ¹é…æ¡ä»¶å’ŒåŠ¨ä½œã€‚</p><h3 id="åŒ¹é…æ¡ä»¶"><a href="#åŒ¹é…æ¡ä»¶" class="headerlink" title="åŒ¹é…æ¡ä»¶"></a>åŒ¹é…æ¡ä»¶</h3><ul><li>è°</li><li>ä»å“ªé‡Œæ¥åˆ°å“ªé‡Œå»</li><li>å¹²ä»€ä¹ˆ</li><li>ä»€ä¹ˆæ—¶å€™</li></ul><p>ç”¨æˆ·ã€ç»ˆç«¯è®¾å¤‡ã€æ—¶é—´æ®µã€åœ°å€ã€åœ°åŒºã€æœåŠ¡ã€åº”ç”¨ã€URLåˆ†ç±»ç­‰åŒ¹é…æ¡ä»¶å¯ä»¥å¸®åŠ©é˜²ç«å¢™ç²¾å‡†åœ°è¯†åˆ«å’Œè¿‡æ»¤æ¶æ„æµé‡ã€‚</p><h3 id="åŠ¨ä½œ"><a href="#åŠ¨ä½œ" class="headerlink" title="åŠ¨ä½œ"></a>åŠ¨ä½œ</h3><ul><li><p><strong>å…è®¸</strong></p><ul><li>æµé‡é€šè¿‡</li><li>å¯ä»¥æ‰§è¡Œå†…å®¹å®‰å…¨æ£€æŸ¥</li></ul></li><li><p><strong>ç¦æ­¢</strong></p><ul><li>æµé‡ä¸é€šè¿‡</li><li>å¯ä»¥é€‰æ‹©å‘é€åé¦ˆæŠ¥æ–‡ï¼Œå¿«é€Ÿç»“æŸä¼šè¯</li></ul></li></ul><h3 id="ç­–ç•¥æ ‡è¯†"><a href="#ç­–ç•¥æ ‡è¯†" class="headerlink" title="ç­–ç•¥æ ‡è¯†"></a>ç­–ç•¥æ ‡è¯†</h3><ul><li><p><strong>åç§°</strong></p><ul><li>å”¯ä¸€æ ‡è¯†å®‰å…¨ç­–ç•¥</li></ul></li><li><p><strong>æè¿°</strong></p><ul><li>è®°å½•å®‰å…¨ç­–ç•¥çš„ç›¸å…³ä¿¡æ¯</li></ul></li><li><p><strong>ç­–ç•¥ç»„</strong></p><ul><li>ç®€åŒ–ç®¡ç†ç›¸åŒç›®çš„çš„å®‰å…¨ç­–ç•¥</li></ul></li><li><p><strong>æ ‡ç­¾</strong></p><ul><li>æ ‡è¯†å®‰å…¨ç­–ç•¥</li><li>ç­›é€‰å…·æœ‰ç›¸åŒç‰¹å¾çš„ç­–ç•¥</li><li>å»ºè®®ä½¿ç”¨å›ºå®šå‰ç¼€å’Œé¢œè‰²åŒºåˆ†ä¸åŒåŠ¨ä½œ</li></ul></li></ul><h2 id="å®‰å…¨ç­–ç•¥çš„å‘½ä»¤è¡Œé…ç½®æ–¹å¼"><a href="#å®‰å…¨ç­–ç•¥çš„å‘½ä»¤è¡Œé…ç½®æ–¹å¼" class="headerlink" title="å®‰å…¨ç­–ç•¥çš„å‘½ä»¤è¡Œé…ç½®æ–¹å¼"></a>å®‰å…¨ç­–ç•¥çš„å‘½ä»¤è¡Œé…ç½®æ–¹å¼</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;sysname&gt; system-view</span><br><span class="line">[sysname] security-policy</span><br><span class="line">[sysname-policy-security] rule name &quot;Allow access to the Internet&quot;</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] source-zone trust</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] destination-zone untrust</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] source-address 192.168.1.0 mask 24</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] source-address 192.168.2.0 mask 24</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] service http https</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] action permit</span><br><span class="line">[sysname-policy-security-rule-Allow access to the Internet] quit</span><br></pre></td></tr></table></figure><h2 id="ç¼ºçœç­–ç•¥å’ŒåŒ¹é…è§„åˆ™"><a href="#ç¼ºçœç­–ç•¥å’ŒåŒ¹é…è§„åˆ™" class="headerlink" title="ç¼ºçœç­–ç•¥å’ŒåŒ¹é…è§„åˆ™"></a>ç¼ºçœç­–ç•¥å’ŒåŒ¹é…è§„åˆ™</h2><h4 id="ç¼ºçœç­–ç•¥"><a href="#ç¼ºçœç­–ç•¥" class="headerlink" title="ç¼ºçœç­–ç•¥"></a>ç¼ºçœç­–ç•¥</h4><ul><li>å‡ºå‚è®¾ç½®ï¼šå­˜åœ¨ä¸€æ¡æ˜¾å¼çš„ç¼ºçœç­–ç•¥<code>default</code>ï¼Œé»˜è®¤ç¦æ­¢æ‰€æœ‰åŸŸé—´æµé‡ã€‚</li><li>ä½ç½®ï¼šæ°¸è¿œä½äºç­–ç•¥åˆ—è¡¨çš„æœ€åº•ç«¯ï¼Œä¸å¯åˆ é™¤ã€‚</li></ul><h3 id="å®‰å…¨ç­–ç•¥åŒ¹é…æµç¨‹"><a href="#å®‰å…¨ç­–ç•¥åŒ¹é…æµç¨‹" class="headerlink" title="å®‰å…¨ç­–ç•¥åŒ¹é…æµç¨‹"></a>å®‰å…¨ç­–ç•¥åŒ¹é…æµç¨‹</h3><ul><li>ç”¨æˆ·åˆ›å»ºçš„å®‰å…¨ç­–ç•¥æŒ‰åˆ›å»ºé¡ºåºæ’åˆ—ï¼Œæ–°ç­–ç•¥é»˜è®¤ä½äºç­–ç•¥åˆ—è¡¨åº•éƒ¨ï¼Œç¼ºçœç­–ç•¥ä¹‹å‰ã€‚</li><li>æµé‡å¤„ç†ï¼šé˜²ç«å¢™æ¥æ”¶åˆ°æµé‡åï¼Œä»ä¸Šè‡³ä¸‹ä¾æ¬¡åŒ¹é…å®‰å…¨ç­–ç•¥ã€‚</li><li>åŒ¹é…æˆåŠŸï¼šä¸€æ—¦æŸæ¡å®‰å…¨ç­–ç•¥åŒ¹é…æˆåŠŸï¼Œåœæ­¢åŒ¹é…ï¼ŒæŒ‰è¯¥ç­–ç•¥æŒ‡å®šçš„åŠ¨ä½œå¤„ç†æµé‡ã€‚</li><li>æœªåŒ¹é…ï¼šå¦‚æœæ‰€æœ‰æ‰‹å·¥åˆ›å»ºçš„å®‰å…¨ç­–ç•¥éƒ½æœªåŒ¹é…ï¼Œåˆ™æŒ‰ç¼ºçœç­–ç•¥å¤„ç†ã€‚</li></ul><h3 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h3><ul><li><strong>ä¿æŒç¼ºçœç­–ç•¥</strong><ul><li>å»ºè®®ä¿æŒç¼ºçœç­–ç•¥çš„åŠ¨ä½œä¸ºç¦æ­¢ï¼Œä¸è¦ä¿®æ”¹ã€‚</li><li>ç¼ºçœç­–ç•¥çš„ç›®çš„æ˜¯ä¿è¯æ‰€æœ‰æœªæ˜ç¡®å…è®¸çš„æµé‡éƒ½è¢«ç¦æ­¢ï¼Œè¿™æ˜¯é˜²ç«å¢™çš„åŸºæœ¬è®¾è®¡ç†å¿µã€‚</li></ul></li><li><strong>ç­–ç•¥é¡ºåº</strong><ul><li>å®‰å…¨ç­–ç•¥çš„é¡ºåºè‡³å…³é‡è¦ã€‚</li><li>åˆ›å»ºå®‰å…¨ç­–ç•¥åï¼Œéœ€æ ¹æ®ä¸šåŠ¡éœ€è¦æ‰‹åŠ¨è°ƒæ•´ç­–ç•¥é¡ºåºï¼Œä»¥ç¡®ä¿ç­–ç•¥åŒ¹é…ç»“æœç¬¦åˆé¢„æœŸã€‚</li></ul></li></ul><h2 id="æœ¬åœ°å®‰å…¨ç­–ç•¥å’Œæ¥å£è®¿é—®æ§åˆ¶"><a href="#æœ¬åœ°å®‰å…¨ç­–ç•¥å’Œæ¥å£è®¿é—®æ§åˆ¶" class="headerlink" title="æœ¬åœ°å®‰å…¨ç­–ç•¥å’Œæ¥å£è®¿é—®æ§åˆ¶"></a>æœ¬åœ°å®‰å…¨ç­–ç•¥å’Œæ¥å£è®¿é—®æ§åˆ¶</h2><p>é’ˆå¯¹ä»é˜²ç«å¢™å‘å‡ºçš„æµé‡ã€è®¿é—®é˜²ç«å¢™çš„æµé‡çš„å®‰å…¨ç­–ç•¥ï¼Œå«åšæœ¬åœ°å®‰å…¨ç­–ç•¥ã€‚<br>egï¼špingé˜²ç«å¢™æ¥å£ï¼Œä¸éœ€è¦ä¸“é—¨å†™ç­–ç•¥ï¼Œå…è®¸æŒ‡å®šåè®®å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface GigabitEthernet 0/0/1</span><br><span class="line">ip address 10.1.1.1 255.255.255.0</span><br><span class="line">service-manage enable //å¼€å¯æ¥å£çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚</span><br><span class="line">service-manage ping permit //å…è®¸é€šè¿‡Pingè®¿é—®æ­¤æ¥å£ã€‚</span><br></pre></td></tr></table></figure><p>ç¼ºçœæƒ…å†µä¸‹ï¼š</p><ul><li>é˜²ç«å¢™å¸¦å¤–ç®¡ç†å£MGMTæ¥å£å·²ç»å¯ç”¨æ¥å£è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå¹¶ä¸”å…è®¸é€šè¿‡HTTPã€HTTPSã€Pingã€SSHã€Telnetã€NETCONFå’ŒSNMPè®¿é—®é˜²ç«å¢™</li><li>å…¶ä»–æ¥å£ä¹Ÿå¯ç”¨äº†æ¥å£è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œä½†æ˜¯æœªå…è®¸ä»»ä½•åè®®ã€‚</li></ul><p><strong>å¦å¤–æ³¨æ„</strong>ï¼šå¦‚æœæƒ³è¦ä»ç®¡ç†ç»ˆç«¯Pingé˜²ç«å¢™çš„GE0&#x2F;0&#x2F;2æ¥å£ï¼Œä¹Ÿéœ€è¦å¼€å¯GE0&#x2F;0&#x2F;1çš„æ¥å£è®¿é—®æ§åˆ¶åŠŸèƒ½ï¼Œå› ä¸ºæµé‡æ˜¯ä»GE0&#x2F;0&#x2F;1è¿›å…¥é˜²ç«å¢™çš„ã€‚</p><h2 id="å“ªäº›ä¸šåŠ¡éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥"><a href="#å“ªäº›ä¸šåŠ¡éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥" class="headerlink" title="å“ªäº›ä¸šåŠ¡éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥"></a>å“ªäº›ä¸šåŠ¡éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥</h2><p><strong>å®‰å…¨ç­–ç•¥ä»…æ§åˆ¶å•æ’­æŠ¥æ–‡</strong>ï¼Œä½ éœ€è¦ä¸ºæ‰€æœ‰åˆæ³•çš„å•æ’­æŠ¥æ–‡å¼€æ”¾å®‰å…¨ç­–ç•¥ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œç»„æ’­æŠ¥æ–‡å’Œå¹¿æ’­æŠ¥æ–‡ä¸å—é˜²ç«å¢™çš„å®‰å…¨ç­–ç•¥æ§åˆ¶ã€‚é˜²ç«å¢™ç›´æ¥è½¬å‘ç»„æ’­æŠ¥æ–‡å’Œå¹¿æ’­æŠ¥æ–‡ï¼Œä¸éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥ã€‚</p><p>ç‰¹åˆ«å€¼å¾—æé†’çš„æ˜¯ï¼šä»¥ä¸Šè§„åˆ™åŒæ ·é€‚ç”¨äºç½‘ç»œäº’è¿äº’é€šçš„åŸºç¡€åè®®ï¼ˆåŒ…æ‹¬BGPã€BFDã€DHCPã€DHCPv6ã€LDPã€OSPFï¼‰ï¼Œä½ éœ€è¦ä¸ºå®ƒä»¬çš„å•æ’­æŠ¥æ–‡é…ç½®å®‰å…¨ç­–ç•¥ã€‚è¿™æ˜¯é˜²ç«å¢™ä¸è·¯ç”±å™¨å’Œäº¤æ¢æœºæœ€å¤§çš„ä¸åŒã€‚å¦‚æœæƒ³è¦å¿«é€Ÿæ¥å…¥ç½‘ç»œï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤undo firewall packet-filter basic-protocol enableå–æ¶ˆè¿™ä¸ªæ§åˆ¶ã€‚å–æ¶ˆä»¥åï¼Œä¸Šè¿°åè®®çš„å•æ’­æŠ¥æ–‡ä¸å—å®‰å…¨ç­–ç•¥æ§åˆ¶ã€‚</p><ul><li><p>åä¸ºé˜²ç«å¢™ä½œä¸ºçŠ¶æ€æ£€æµ‹é˜²ç«å¢™ï¼Œåªéœ€ä¸ºæŠ¥æ–‡å‘èµ·æ–¹é…ç½®å®‰å…¨ç­–ç•¥ã€‚</p><ul><li>æ”¶åˆ°å‘èµ·æ–¹çš„é¦–åŒ…æŠ¥æ–‡åï¼Œæ‰§è¡Œå®‰å…¨ç­–ç•¥æ£€æŸ¥å¹¶è®°å½•ä¼šè¯è¡¨ã€‚åç»­æŠ¥æ–‡å’Œå›ç¨‹æŠ¥æ–‡åªéœ€å‘½ä¸­ä¼šè¯è¡¨å³å¯é€šè¿‡ï¼Œä¸å†æ£€æŸ¥å®‰å…¨ç­–ç•¥ã€‚</li><li>å¦‚æœé€šä¿¡åŒæ–¹éƒ½å¯èƒ½å‘èµ·è¿æ¥ï¼Œéœ€è¦ä¸ºåŒå‘æŠ¥æ–‡åˆ†åˆ«é…ç½®å®‰å…¨ç­–ç•¥ã€‚</li></ul></li><li><p>æºå’Œç›®çš„åœ¨åŒä¸€ä¸ªå®‰å…¨åŒºåŸŸå†…çš„åŸŸå†…æµé‡ï¼Œé»˜è®¤ä¸éœ€è¦é…ç½®å®‰å…¨ç­–ç•¥ã€‚</p></li></ul><h1 id="å¼•ç”¨å¯¹è±¡"><a href="#å¼•ç”¨å¯¹è±¡" class="headerlink" title="å¼•ç”¨å¯¹è±¡"></a>å¼•ç”¨å¯¹è±¡</h1><h2 id="ä»€ä¹ˆæ˜¯å¯¹è±¡"><a href="#ä»€ä¹ˆæ˜¯å¯¹è±¡" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯¹è±¡"></a>ä»€ä¹ˆæ˜¯å¯¹è±¡</h2><p>å¯¹è±¡æ˜¯é€šç”¨å…ƒç´ ï¼ˆå¦‚IPåœ°å€ã€æœåŠ¡ã€åº”ç”¨ç­‰ï¼‰çš„é›†åˆã€‚åˆ›å»ºäº†é›†åˆå½¢å¼çš„å¯¹è±¡ï¼Œä½ å°±å¯ä»¥åœ¨å„ç§ä¸šåŠ¡ç­–ç•¥ä¸­ç›´æ¥å¼•ç”¨è¯¥å¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä¸€æ¬¡æ¬¡é‡å¤è¾“å…¥æˆ–é€‰æ‹©ã€‚å½“éœ€è¦ä¿®æ”¹å¤šä¸ªä¸šåŠ¡ç­–ç•¥çš„é€‚ç”¨èŒƒå›´æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å…¶å¼•ç”¨çš„å¯¹è±¡ï¼Œå°±å¯ä»¥å¿«é€Ÿå®Œæˆå¤šä¸ªç­–ç•¥çš„è°ƒæ•´ã€‚ä½¿ç”¨å¯¹è±¡ï¼Œå¯ä»¥æ˜¾è‘—é™ä½ç®¡ç†æˆæœ¬ï¼Œæé«˜ç»´æŠ¤æ•ˆç‡ã€‚<br><strong>åœ°å€å¯¹è±¡</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip address-set Research_Dept type object //objectè¡¨ç¤ºåœ°å€å¯¹è±¡</span><br><span class="line">address 10 range 192.168.1.1 192.168.1.120 //æŒ‡å®šIPv4åœ°å€æ®µçš„èµ·æ­¢åœ°å€</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip address-set Research_Dept type object </span><br><span class="line">address 11 192.168.1.1 0.0.0.255 //ä½¿ç”¨é€šé…ç¬¦æŒ‡å®šåœ°å€èŒƒå›´</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip address-set Research_Dept type object </span><br><span class="line">address 11 192.168.1.1 mask 255.255.255.0 //ä½¿ç”¨æ©ç æŒ‡å®šåœ°å€èŒƒå›´</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip address-set Research_Dept type object </span><br><span class="line">address 11 192.168.1.1 mask 24 //ä½¿ç”¨æ©ç é•¿åº¦æŒ‡å®šåœ°å€èŒƒå›´</span><br></pre></td></tr></table></figure><p><strong>åœ°å€ç»„</strong></p><ul><li>åœ°å€ç»„å¯ä»¥æ·»åŠ åœ°å€ã€åœ°å€å¯¹è±¡æˆ–åœ°å€ç»„ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å¤æ‚çš„åœ°å€èŒƒå›´ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip address-set R&amp;D_Dept type group //groupè¡¨ç¤ºåœ°å€ç»„</span><br><span class="line">address address-set Research_Dept //å°†åœ°å€å¯¹è±¡Research_DeptåŠ å…¥åœ°å€ç»„R&amp;D_Dept</span><br><span class="line">address address-set Test_Dept</span><br><span class="line">ip address-set Product type group</span><br><span class="line">address address-set R&amp;D_Dept //å°†åœ°å€ç»„R&amp;D_DeptåŠ å…¥åœ°å€ç»„Product</span><br></pre></td></tr></table></figure><h2 id="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åœ°å€å¯¹è±¡å’Œåœ°å€ç»„"><a href="#åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åœ°å€å¯¹è±¡å’Œåœ°å€ç»„" class="headerlink" title="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åœ°å€å¯¹è±¡å’Œåœ°å€ç»„"></a>åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åœ°å€å¯¹è±¡å’Œåœ°å€ç»„</h2><p>eg:ç¦æ­¢åœ°å€ç»„R&amp;D_Deptè®¿é—®DMZåŒºåŸŸçš„HRæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">security-policy </span><br><span class="line"> rule name &quot;Deny R&amp;D_Dept to HR&quot; </span><br><span class="line"> source-zone trust</span><br><span class="line"> destination-zone dmz </span><br><span class="line"> source-address address-set R&amp;D_Dept //ä»¥åœ°å€ç»„æ–¹å¼æŒ‡å®šæºåœ°å€</span><br><span class="line"> service HRService //è‡ªå®šä¹‰çš„HRæœåŠ¡</span><br><span class="line"> action deny</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤åŸºç¡€ä¸Šæ’é™¤æŸä¸ªåœ°å€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">security-policy </span><br><span class="line"> rule name &quot;Deny R&amp;D_Dept to HR&quot; </span><br><span class="line"> source-zone trust</span><br><span class="line"> destination-zone dmz </span><br><span class="line"> source-address address-set R&amp;D_Dept //ä»¥åœ°å€é›†æ–¹å¼æŒ‡å®šæºåœ°å€ï¼ˆ192.168.1.1/24ï¼‰</span><br><span class="line"> source-address-exclude 192.168.1.66 32 //æ’é™¤æ­¤åœ°å€</span><br><span class="line"> service HRService //è‡ªå®šä¹‰çš„HRæœåŠ¡</span><br><span class="line"> action deny</span><br></pre></td></tr></table></figure><h2 id="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨æœåŠ¡å’ŒæœåŠ¡ç»„"><a href="#åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨æœåŠ¡å’ŒæœåŠ¡ç»„" class="headerlink" title="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨æœåŠ¡å’ŒæœåŠ¡ç»„"></a>åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨æœåŠ¡å’ŒæœåŠ¡ç»„</h2><ul><li><strong>æœåŠ¡</strong>æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨åè®®çš„é›†åˆï¼Œ<strong>ç”±åè®®ç±»å‹ã€æºç«¯å£ã€ç›®çš„ç«¯å£ç­‰ä¿¡æ¯æ¥æŒ‡å®š</strong>ã€‚</li><li><strong>æœåŠ¡ç»„</strong>æ˜¯æœåŠ¡çš„é›†åˆï¼ŒæœåŠ¡ç»„çš„æˆå‘˜å¯ä»¥æ˜¯æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡ç»„ã€‚</li></ul><p>é˜²ç«å¢™é»˜è®¤æä¾›äº†å¸¸è§çš„çŸ¥åæœåŠ¡ï¼Œå³é¢„å®šä¹‰æœåŠ¡ï¼Œä¾‹å¦‚HTTPã€FTPã€Telnetã€DNSç­‰ã€‚åœ¨ç°å®ç½‘ç»œä¸­ï¼Œå¦‚æœåè®®ä½¿ç”¨ç«¯å£ä¸é¢„å®šä¹‰æœåŠ¡çš„ç«¯å£ä¸åŒæ—¶ï¼Œéœ€è¦åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œé¢„å®šä¹‰æœåŠ¡ILSçš„ç«¯å£å·ä¸º1002ï¼Œä½†æ˜¯æŸäº›æ—§ç‰ˆè½¯ä»¶å¯èƒ½ä½¿ç”¨389ç«¯å£æ¥æ¥æ”¶ILSæŠ¥æ–‡ã€‚æ­¤æ—¶ï¼Œä½ éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªç«¯å£å·ä¸º389çš„æœåŠ¡ï¼Œå¹¶åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line"> ip service-set new_ils type object //objectè¡¨ç¤ºè‡ªå®šä¹‰æœåŠ¡</span><br><span class="line"> service protocol tcp destination-port 389 //ä»¥ç›®çš„ç«¯å£æŒ‡å®šILSæœåŠ¡</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ICMPæœåŠ¡æé«˜å®‰å…¨æ€§"><a href="#è‡ªå®šä¹‰ICMPæœåŠ¡æé«˜å®‰å…¨æ€§" class="headerlink" title="è‡ªå®šä¹‰ICMPæœåŠ¡æé«˜å®‰å…¨æ€§"></a>è‡ªå®šä¹‰ICMPæœåŠ¡æé«˜å®‰å…¨æ€§</h3><p>å¯¹äºTCPã€UDPå’ŒSCTPæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æºç«¯å£å’Œç›®çš„ç«¯å£æ¥å®šä¹‰ï¼Œé€šå¸¸åªå®šä¹‰ç›®çš„ç«¯å£å³å¯ã€‚<br>å¯¹äºICMPå’ŒICMPv6æœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨ç±»å‹å·å’Œæ¶ˆæ¯ç æ¥å®šä¹‰ã€‚ICMPæœåŠ¡å¸¸ç”¨äºPingå’ŒTracertï¼Œä¸€èˆ¬ç›´æ¥ä½¿ç”¨é¢„å®šä¹‰çš„ICMPæœåŠ¡å³å¯ã€‚ä½†æ˜¯ï¼ŒICMPæœåŠ¡ä¹Ÿç»å¸¸è¢«æ”»å‡»è€…ç”¨æ¥çª¥æµ‹ç½‘ç»œæˆ–å»ºç«‹éšè”½é€šé“ã€‚å› æ­¤ï¼Œå¦‚æœä½ å¯¹å®‰å…¨æ€§æœ‰æ›´é«˜çš„è¦æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰æœåŠ¡ï¼Œä»…å¼€æ”¾ç‰¹å®šç±»å‹çš„ICMPæŠ¥æ–‡ã€‚<br>ä»¥Pingä¸ºä¾‹ï¼ŒPingéœ€è¦ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ICMPæŠ¥æ–‡ï¼šEcho Requestï¼ˆType 8ï¼‰å’ŒEcho Replyï¼ˆType 0ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line"> ip service-set ICMP_Echo_Request type object</span><br><span class="line"> service protocol icmp icmp-type 8 //è‡ªå®šä¹‰ICMP type 8</span><br></pre></td></tr></table></figure><p>eg:TruståŒºåŸŸçš„PCè¦Ping UntruståŒºåŸŸçš„äº¤æ¢æœºï¼Œå®‰å…¨ç­–ç•¥é…ç½®å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">security-policy</span><br><span class="line"> rule name &quot;Allow Ping&quot; </span><br><span class="line"> source-zone trust </span><br><span class="line"> destination-zone untrust </span><br><span class="line"> source-address 10.1.1.10 24</span><br><span class="line"> destination-address 10.1.2.10 24</span><br><span class="line"> service ICMP_Echo_Request</span><br><span class="line"> action permit</span><br></pre></td></tr></table></figure><h2 id="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åº”ç”¨"><a href="#åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åº”ç”¨" class="headerlink" title="åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åº”ç”¨"></a>åœ¨å®‰å…¨ç­–ç•¥ä¸­å¼•ç”¨åº”ç”¨</h2><p>é˜²ç«å¢™å¯ä»¥æ ¹æ®æœåŠ¡å’ŒæœåŠ¡ç»„è¯†åˆ«å¸¸ç”¨çš„åº”ç”¨åè®®ã€‚ä¸è¿‡ï¼Œè¯†åˆ«æœåŠ¡ä¾èµ–ç«¯å£è¯†åˆ«æŠ€æœ¯ï¼Œå…¶ä¸»è¦ä¾æ®çš„æ˜¯ç«¯å£å·ï¼Œå› æ­¤åªèƒ½ç”¨äºè¯†åˆ«FTPã€HTTPç­‰åŸºç¡€åè®®ã€‚ç„¶è€Œï¼Œå¤§é‡åº”ç”¨æ‰¿è½½åœ¨HTTPåè®®ä¹‹ä¸Šï¼Œä»…è¯†åˆ«å‡ºæœåŠ¡å·²ç»ä¸èƒ½è§£å†³åº”ç”¨ç®¡æ§çš„é—®é¢˜äº†ã€‚</p><p>æŠ¥æ–‡äº”å…ƒç»„ï¼šæºIPåœ°å€ã€æºç«¯å£ã€ç›®çš„IPåœ°å€ã€ç›®çš„ç«¯å£ã€åè®®ç±»å‹</p><p>ä¸šåŠ¡æ„ŸçŸ¥æŠ€æœ¯ï¼šæµé‡ç‰¹å¾åˆ†æ</p><h2 id="å…¶ä»–å¼•ç”¨ç±»å‹"><a href="#å…¶ä»–å¼•ç”¨ç±»å‹" class="headerlink" title="å…¶ä»–å¼•ç”¨ç±»å‹"></a>å…¶ä»–å¼•ç”¨ç±»å‹</h2><p>åœ°åŒºç»„ã€åŸŸåç»„ã€URLåˆ†ç±»ç­‰</p><h1 id="ç®¡ç†é…ç½®åŸåˆ™"><a href="#ç®¡ç†é…ç½®åŸåˆ™" class="headerlink" title="ç®¡ç†é…ç½®åŸåˆ™"></a>ç®¡ç†é…ç½®åŸåˆ™</h1><h2 id="ä½¿ç”¨å®‰å…¨åŒºåŸŸåˆ’åˆ†ç½‘ç»œ"><a href="#ä½¿ç”¨å®‰å…¨åŒºåŸŸåˆ’åˆ†ç½‘ç»œ" class="headerlink" title="ä½¿ç”¨å®‰å…¨åŒºåŸŸåˆ’åˆ†ç½‘ç»œ"></a>ä½¿ç”¨å®‰å…¨åŒºåŸŸåˆ’åˆ†ç½‘ç»œ</h2><p>é˜²ç«å¢™é»˜è®¤æä¾›Untrustã€Trustã€DMZï¼Œé€šå¸¸åˆ†åˆ«ç”¨äºè¿æ¥å¤–ç½‘ã€å†…ç½‘å’Œå…·æœ‰ä¸­é—´çŠ¶æ€çš„DMZåŒºã€‚ç¼ºçœæƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªå®‰å…¨åŒºåŸŸå†…çš„è®¾å¤‡å¯ä»¥äº’ç›¸è®¿é—®ï¼Œä¸åŒå®‰å…¨åŒºåŸŸå†…çš„è®¾å¤‡äº’è®¿éœ€è¦å¼€æ”¾å®‰å…¨ç­–ç•¥ã€‚è¿™ç§è®¾è®¡åœ¨æ€§èƒ½å’Œå®‰å…¨æ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½çš„å¹³è¡¡ã€‚å¦‚æœç½‘ç»œè¢«å…¥ä¾µï¼Œæ”»å‡»è€…åªèƒ½è®¿é—®åŒä¸€ä¸ªå®‰å…¨åŒºåŸŸå†…çš„èµ„æºï¼Œè¿™å°±æŠŠæŸå¤±æ§åˆ¶åœ¨ä¸€ä¸ªæ¯”è¾ƒå°çš„èŒƒå›´å†…ã€‚æ”»å‡»è€…å¿…é¡»çªç ´å®‰å…¨åŒºåŸŸå’Œå®‰å…¨ç­–ç•¥çš„æ§åˆ¶ï¼Œæ‰èƒ½è®¿é—®å…¶ä»–èµ„æºã€‚</p><ul><li>å¯¹äºå½¼æ­¤ä¹‹é—´æ²¡æœ‰äº¤äº’çš„ç³»ç»Ÿï¼Œä¸è¦å°†å®ƒä»¬ç½®äºåŒä¸€å­ç½‘ä¸­ã€‚å¦åˆ™ï¼Œæ”»å‡»è€…åªè¦çªç ´å¤–å›´é˜²å¾¡æªæ–½ï¼Œå°±å¯ä»¥æ›´è½»æ¾åœ°è®¿é—®æ‰€æœ‰å†…å®¹ã€‚</li><li>æŠŠå…·æœ‰ç›¸åŒå®‰å…¨çº§åˆ«çš„è®¾å¤‡å’Œä¸šåŠ¡èµ„æºéƒ¨ç½²åœ¨åŒä¸€ä¸ªå®‰å…¨åŒºåŸŸä¸­ã€‚</li><li>å¯¹äºéœ€è¦äº¤äº’çš„ä¸åŒå®‰å…¨ç­‰çº§çš„ç³»ç»Ÿï¼Œè¯·éƒ¨ç½²åœ¨ä¸åŒå®‰å…¨åŒºåŸŸï¼Œå¹¶å¼€æ”¾ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰å¯¹å¤–æä¾›æœåŠ¡çš„æœåŠ¡å™¨ï¼ˆå¦‚WebæœåŠ¡å™¨ã€é‚®ä»¶æœåŠ¡å™¨ï¼‰åº”è¯¥éƒ¨ç½²åœ¨ä¸€ä¸ªä¸“ç”¨åŒºåŸŸï¼ˆé€šå¸¸ä¸ºDMZï¼‰ï¼Œä¸åº”è¯¥è¢«å¤–ç½‘ç›´æ¥è®¿é—®çš„æœåŠ¡å™¨ï¼ˆå¦‚æ•°æ®åº“ï¼‰å¿…é¡»éƒ¨ç½²åœ¨å†…éƒ¨æœåŠ¡å™¨åŒºã€‚</li></ul><h2 id="éµå¾ªæœ€å°æˆæƒåŸåˆ™"><a href="#éµå¾ªæœ€å°æˆæƒåŸåˆ™" class="headerlink" title="éµå¾ªæœ€å°æˆæƒåŸåˆ™"></a>éµå¾ªæœ€å°æˆæƒåŸåˆ™</h2><h3 id="1-ç²¾ç¡®åŒ¹é…æ¡ä»¶"><a href="#1-ç²¾ç¡®åŒ¹é…æ¡ä»¶" class="headerlink" title="1. ç²¾ç¡®åŒ¹é…æ¡ä»¶"></a>1. ç²¾ç¡®åŒ¹é…æ¡ä»¶</h3><ul><li>é¿å…ä½¿ç”¨â€Anyâ€ä½œä¸ºåŒ¹é…æ¡ä»¶ï¼Œä»¥å‡å°‘å®‰å…¨é£é™©ã€‚<ul><li>é™åˆ¶åˆ°å…·ä½“çš„æº&#x2F;ç›®çš„IPåœ°å€å’ŒæœåŠ¡ã€‚</li><li>è®¾ç½®å°½å¯èƒ½å¤šçš„åŒ¹é…æ¡ä»¶ï¼Œå¦‚ç”¨æˆ·ã€åº”ç”¨ç­‰ã€‚</li></ul></li></ul><h3 id="2-å¯¹å¤–å¼€æ”¾æœåŠ¡"><a href="#2-å¯¹å¤–å¼€æ”¾æœåŠ¡" class="headerlink" title="2. å¯¹å¤–å¼€æ”¾æœåŠ¡"></a>2. å¯¹å¤–å¼€æ”¾æœåŠ¡</h3><ul><li>å¦‚æœéœ€è¦å¯¹Internetå¼€æ”¾æœåŠ¡ï¼š<ul><li>æºIPå¯è®¾ç½®ä¸ºâ€Anyâ€ï¼Œç›®çš„IPå¿…é¡»æ˜ç¡®æŒ‡å®šã€‚</li><li>é¿å…å¼€æ”¾æ‰€æœ‰æœåŠ¡æˆ–ç«¯å£ï¼Œä»¥é˜²æ­¢å­—å…¸æ”»å‡»å’Œæš´åŠ›ç ´è§£ã€‚</li></ul></li><li>å¯¹äºéå…¬å¼€æœåŠ¡ï¼š<ul><li>å¿…é¡»é™å®šæºIPåœ°å€èŒƒå›´ã€‚</li><li>ä¸å…è®¸ä»»æ„æºIPè®¿é—®æ•æ„Ÿä¸šåŠ¡ã€‚</li></ul></li></ul><h3 id="3-åº”ç”¨è¯†åˆ«"><a href="#3-åº”ç”¨è¯†åˆ«" class="headerlink" title="3. åº”ç”¨è¯†åˆ«"></a>3. åº”ç”¨è¯†åˆ«</h3><ul><li>åˆ©ç”¨é˜²ç«å¢™çš„åº”ç”¨è¯†åˆ«èƒ½åŠ›ï¼Œå®ç°ç²¾ç»†åŒ–ç®¡æ§ã€‚<ul><li>æ ¹æ®åº”ç”¨ç±»å‹æˆ–æ ‡ç­¾è®¾ç½®å®‰å…¨ç­–ç•¥ï¼Œå¦‚å…è®¸å¸¦æœ‰â€œä¼ä¸šåº”ç”¨â€æ ‡ç­¾çš„åº”ç”¨ã€‚</li></ul></li></ul><h3 id="4-ä¸´æ—¶å®‰å…¨ç­–ç•¥"><a href="#4-ä¸´æ—¶å®‰å…¨ç­–ç•¥" class="headerlink" title="4. ä¸´æ—¶å®‰å…¨ç­–ç•¥"></a>4. ä¸´æ—¶å®‰å…¨ç­–ç•¥</h3><ul><li>ä¸ºä¸´æ—¶å®‰å…¨ç­–ç•¥è®¾ç½®æ˜ç¡®çš„ç”Ÿæ•ˆæ—¶é—´ï¼Œåˆä½œç»“æŸåè‡ªåŠ¨å¤±æ•ˆã€‚<ul><li>ç¡®ä¿ç³»ç»Ÿæ—¶é—´å‡†ç¡®ï¼Œæ¨èä½¿ç”¨NTPåŒæ­¥æ—¶é—´ã€‚</li></ul></li></ul><h3 id="5-å®‰å…¨ç­–ç•¥æ–¹å‘"><a href="#5-å®‰å…¨ç­–ç•¥æ–¹å‘" class="headerlink" title="5. å®‰å…¨ç­–ç•¥æ–¹å‘"></a>5. å®‰å…¨ç­–ç•¥æ–¹å‘</h3><ul><li>åä¸ºé˜²ç«å¢™ä½œä¸ºçŠ¶æ€æ£€æµ‹é˜²ç«å¢™ï¼š<ul><li>åªéœ€å…è®¸ä¸šåŠ¡çš„ä¸»åŠ¨å‘èµ·æ–¹å»ºç«‹è¿æ¥ã€‚</li></ul></li><li>ä»…åœ¨é€šä¿¡åŒæ–¹éƒ½éœ€è¦ä¸»åŠ¨å‘èµ·è¿æ¥çš„æƒ…å†µä¸‹ï¼Œé…ç½®åŒå‘å®‰å…¨ç­–ç•¥ã€‚</li><li>æœåŠ¡å™¨çš„ç³»ç»Ÿå’Œè½¯ä»¶æ›´æ–°ï¼š<ul><li>åº”é€šè¿‡ç»Ÿä¸€çš„ä¸­å¤®æœåŠ¡å™¨è·å–ã€‚</li><li>åœ¨å®‰å…¨ç­–ç•¥ä¸­é™åˆ¶åˆ°å…·ä½“çš„åŸŸåæˆ–åº”ç”¨ã€‚</li></ul></li></ul><h2 id="é¡ºåºå¾ˆé‡è¦ï¼Œå…ˆç²¾ç¡®åå®½æ³›ï¼Œå…ˆå¸¸ç”¨åå°‘ç”¨"><a href="#é¡ºåºå¾ˆé‡è¦ï¼Œå…ˆç²¾ç¡®åå®½æ³›ï¼Œå…ˆå¸¸ç”¨åå°‘ç”¨" class="headerlink" title="é¡ºåºå¾ˆé‡è¦ï¼Œå…ˆç²¾ç¡®åå®½æ³›ï¼Œå…ˆå¸¸ç”¨åå°‘ç”¨"></a>é¡ºåºå¾ˆé‡è¦ï¼Œå…ˆç²¾ç¡®åå®½æ³›ï¼Œå…ˆå¸¸ç”¨åå°‘ç”¨</h2><ul><li>å§‹ç»ˆå°†æ›´ç²¾ç¡®çš„å®‰å…¨ç­–ç•¥æ”¾åœ¨å‰é¢ï¼Œå°†æ›´å®½æ³›çš„å®‰å…¨ç­–ç•¥æ”¾åœ¨åé¢ã€‚<ul><li>å¯¹äºè¿™äº›å®½æ³›çš„å®‰å…¨ç­–ç•¥ï¼Œè¦æŒç»­åˆ†æï¼Œé€æ¸ç²¾ç¡®åŒ–ï¼Œæˆ–è€…åœç”¨</li></ul></li><li>å°†é¢‘ç¹å‘½ä¸­çš„å®‰å…¨ç­–ç•¥æ”¾åœ¨æ›´å‰é¢ã€‚<ul><li>å‘½ä¸­æ¬¡æ•°è¶Šå¤šï¼Œè¯´æ˜åŒ¹é…æ­¤ç­–ç•¥çš„æµé‡è¶Šå¤šã€‚</li><li>è®©ä¸»è¦æµé‡å¿«é€Ÿå®Œæˆå®‰å…¨ç­–ç•¥åŒ¹é…ï¼Œæ˜¾è‘—æé«˜æ€§èƒ½ï¼Œè¿™åœ¨é«˜è´Ÿè½½ç¯å¢ƒä¸­å°¤ä¸ºæ˜æ˜¾ã€‚</li></ul></li></ul><h1 id="éƒ¨ç½²å®‰å…¨ç­–ç•¥"><a href="#éƒ¨ç½²å®‰å…¨ç­–ç•¥" class="headerlink" title="éƒ¨ç½²å®‰å…¨ç­–ç•¥"></a>éƒ¨ç½²å®‰å…¨ç­–ç•¥</h1><h2 id="ç­–ç•¥é¡ºåº"><a href="#ç­–ç•¥é¡ºåº" class="headerlink" title="ç­–ç•¥é¡ºåº"></a>ç­–ç•¥é¡ºåº</h2><ol><li><strong>ç™½åå•ï¼ˆå…è®¸åˆ—è¡¨ï¼‰</strong>ï¼š<ul><li>æœ€ä¼˜å…ˆçº§çš„ç­–ç•¥æ˜¯ç™½åå•ï¼Œè¿™äº›ç­–ç•¥å®šä¹‰äº†å“ªäº›ç‰¹å®šçš„æµé‡æ˜¯è¢«æ˜ç¡®å…è®¸çš„ã€‚è¿™äº›ç­–ç•¥åº”è¯¥å°½å¯èƒ½å…·ä½“ï¼Œä»¥ç¡®ä¿åªæœ‰åˆæ³•çš„æµé‡è¢«å…è®¸é€šè¿‡ã€‚</li></ul></li><li><strong>ä¸šåŠ¡ç›¸å…³çš„å®‰å…¨ç­–ç•¥</strong>ï¼š<ul><li>æ¥ä¸‹æ¥æ˜¯ä¸ä¸šåŠ¡ç›¸å…³çš„å®‰å…¨ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥åŸºäºä¸šåŠ¡éœ€æ±‚å’Œå®‰å…¨æ”¿ç­–æ¥å…è®¸æˆ–æ‹’ç»ç‰¹å®šçš„æµé‡ã€‚</li></ul></li><li><strong>é»‘åå•ï¼ˆæ‹’ç»åˆ—è¡¨ï¼‰</strong>ï¼š<ul><li>é»‘åå•ç­–ç•¥é€šå¸¸ä½äºç™½åå•å’Œä¸šåŠ¡ç›¸å…³ç­–ç•¥ä¹‹åã€‚è¿™äº›ç­–ç•¥å®šä¹‰äº†å“ªäº›ç‰¹å®šçš„æµé‡æ˜¯è¢«æ˜ç¡®æ‹’ç»çš„ï¼Œä¾‹å¦‚å·²çŸ¥çš„æ¶æ„IPåœ°å€ã€éæ³•åº”ç”¨ç­‰ã€‚</li></ul></li><li><strong>ä¸´æ—¶å®‰å…¨ç­–ç•¥</strong>ï¼š<ul><li>ä¸´æ—¶å®‰å…¨ç­–ç•¥é€šå¸¸ä½äºç­–ç•¥åˆ—è¡¨çš„åº•éƒ¨ï¼Œä½œä¸ºæœ€åçš„æ‰‹æ®µã€‚è¿™ç§ç­–ç•¥å…è®¸æ‰€æœ‰æµé‡é€šè¿‡ï¼Œç”¨äºåœ¨é…ç½®åˆæœŸæˆ–åœ¨åˆ†æé˜¶æ®µç¡®ä¿ä¸šåŠ¡ä¸å—å½±å“ï¼ŒåŒæ—¶æ”¶é›†æµé‡æ•°æ®ä»¥ä¾¿äºåç»­ç­–ç•¥çš„ç²¾ç¡®é…ç½®ã€‚</li></ul></li><li><strong>é»˜è®¤ç­–ç•¥ï¼ˆç¼ºçœç­–ç•¥ï¼‰</strong>ï¼š<ul><li>æœ€åæ˜¯é»˜è®¤ç­–ç•¥ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•ä¸Šè¿°ç­–ç•¥ï¼Œæµé‡å°†æŒ‰ç…§é»˜è®¤ç­–ç•¥å¤„ç†ï¼Œé€šå¸¸æ˜¯æ‹’ç»æ‰€æœ‰æœªæ˜ç¡®å…è®¸çš„æµé‡ã€‚<br>å› æ­¤ï¼Œé»‘åå•ç­–ç•¥é€šå¸¸ä½äºä¸´æ—¶å®‰å…¨ç­–ç•¥ä¹‹å‰ï¼Œè€Œä¸´æ—¶å®‰å…¨ç­–ç•¥ä½äºé»˜è®¤ç­–ç•¥ä¹‹å‰ã€‚è¿™ç§é¡ºåºç¡®ä¿äº†åªæœ‰åœ¨ç™½åå•å’Œä¸šåŠ¡ç­–ç•¥ä¸­æ˜ç¡®å…è®¸çš„æµé‡æ‰èƒ½é€šè¿‡ï¼Œè€Œæ‰€æœ‰æœªæ˜ç¡®å…è®¸çš„æµé‡éƒ½å°†è¢«é»˜è®¤ç­–ç•¥æ‹’ç»ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨ä¸å½±å“ä¸šåŠ¡è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œé€æ­¥æ„å»ºå’Œä¼˜åŒ–å®‰å…¨ç­–ç•¥ã€‚</li></ul></li></ol><h2 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h2><p> <strong>1.ç²—ç•¥ç¡®å®šç™½åå•å’Œé»‘åå•</strong><br> <strong>2.å†™å…¥ä¸´æ—¶å®‰å…¨ç­–ç•¥å…è®¸æ‰€æœ‰æµé‡</strong><br> <strong>3.è¿…é€Ÿå†™å…¥é»‘åå•ç­–ç•¥</strong><br> <strong>4.å†™å…¥ç™½åå•ç­–ç•¥</strong><br> <strong>5.ç²¾ç»†åŒ–ä¸šåŠ¡ç›¸å…³çš„å®‰å…¨ç­–ç•¥ä»¥é€æ¸æ›¿ä»£ä¸´æ—¶å®‰å…¨ç­–ç•¥</strong></p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>systemctlç®¡ç†æœåŠ¡</title>
    <link href="/2024/12/11/systemctl%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1/"/>
    <url>/2024/12/11/systemctl%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>eg.netmon ç”¨æˆ·ï¼Œåœ¨åä¸ºâ€˜py12â€™çš„ conda è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œåœ¨&#x2F;home&#x2F;netmon&#x2F;projects&#x2F;iotdev&#x2F;iotdev_flask ç›®å½•ä¸‹ï¼Œè¿è¡Œ flask ç¨‹åº flask_app.py</p><h2 id="åˆ›å»ºæœåŠ¡"><a href="#åˆ›å»ºæœåŠ¡" class="headerlink" title="åˆ›å»ºæœåŠ¡"></a>åˆ›å»ºæœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/iot_flask.service</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Gunicorn instance to serve Flask App</span><br><span class="line">After=network.target </span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=netmon</span><br><span class="line">Group=netmon</span><br><span class="line">WorkingDirectory=/home/netmon/projects/iotdev/iotdev_flask</span><br><span class="line">Environment=&quot;PATH=/home/netmon/.conda/envs/py12/bin&quot;</span><br><span class="line">ExecStart=/home/netmon/.conda/envs/py12/bin/python flask_app.py</span><br><span class="line">Restart=always</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ¯éƒ¨åˆ†çš„æ„ä¹‰ï¼š</p><ul><li><p>â€‹<code>[Unit]</code>â€‹: è¿™ä¸ªéƒ¨åˆ†åŒ…å«äº†æœåŠ¡çš„åŸºæœ¬æè¿°å’Œä¾èµ–å…³ç³»ã€‚</p><ul><li>â€‹<code>Description</code>â€‹: å®šä¹‰äº†æœåŠ¡çš„ç®€çŸ­æè¿°ï¼Œè¿™é‡Œæ˜¯â€œGunicorn instance to serve Flask Appâ€ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç”¨æ¥è¿è¡Œ Flask åº”ç”¨çš„ Gunicorn æœåŠ¡å®ä¾‹ã€‚</li><li>â€‹<code>After</code>â€‹: æŒ‡å®šäº†æœåŠ¡çš„å¯åŠ¨é¡ºåºï¼Œå³åœ¨è¿™ä¸ªæœåŠ¡å¯åŠ¨ä¹‹å‰ï¼Œç½‘ç»œæœåŠ¡å¿…é¡»å·²ç»å¯åŠ¨å’Œå°±ç»ªã€‚åœ¨è¿™é‡Œï¼ŒæœåŠ¡å°†åœ¨ç½‘ç»œç›®æ ‡ä¹‹åå¯åŠ¨ï¼Œè¿™æ„å‘³ç€åªæœ‰å½“åŸºæœ¬çš„ç½‘ç»œè¿æ¥å·²ç»å»ºç«‹åï¼ŒGunicorn æœåŠ¡æ‰ä¼šè¢«å¯åŠ¨ã€‚</li></ul></li><li><p>â€‹<code>[Service]</code>â€‹: è¿™ä¸ªéƒ¨åˆ†åŒ…å«äº†æœåŠ¡çš„å…·ä½“è¿è¡Œç»†èŠ‚ã€‚</p><ul><li>â€‹<code>User</code>â€‹ å’Œ <code>Group</code>â€‹: æŒ‡å®šæœåŠ¡å°†ä»¥å“ªä¸ªç”¨æˆ·å’Œç”¨æˆ·ç»„çš„èº«ä»½è¿è¡Œã€‚åœ¨è¿™é‡Œï¼ŒæœåŠ¡å°†ä»¥ç”¨æˆ·â€netmonâ€å’ŒåŒåçš„ç”¨æˆ·ç»„â€netmonâ€çš„èº«ä»½è¿è¡Œã€‚</li><li>â€‹<code>WorkingDirectory</code>â€‹: è®¾ç½®äº†æœåŠ¡çš„å·¥ä½œç›®å½•ï¼Œä¹Ÿå°±æ˜¯ Gunicorn å°†ä»å“ªé‡Œå¼€å§‹æ‰§è¡Œã€‚è¿™é‡Œæ˜¯â€&#x2F;home&#x2F;netmon&#x2F;projects&#x2F;iotdev&#x2F;iotdev_flaskâ€ã€‚</li><li>â€‹<code>Environment</code>â€‹: è®¾ç½®äº†ç¯å¢ƒå˜é‡ï¼Œè¿™å¯¹äºç¡®ä¿ Gunicorn èƒ½å¤Ÿæ‰¾åˆ°æ­£ç¡®çš„ Python è§£é‡Šå™¨å’Œ conda ç¯å¢ƒè‡³å…³é‡è¦ã€‚è¿™é‡Œçš„è·¯å¾„åº”æŒ‡å‘æ‚¨ Conda ç¯å¢ƒä¸‹çš„ bin ç›®å½•ã€‚</li><li>â€‹<code>ExecStart</code>â€‹: æŒ‡å®šäº†æœåŠ¡å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚è¿™é‡Œå¯åŠ¨ Gunicornï¼Œå¹¶æŒ‡å®šäº†é…ç½®æ–‡ä»¶ä»¥åŠ Flask åº”ç”¨çš„ä½ç½®ã€‚</li><li>â€‹<code>Restart</code>â€‹: è®¾å®šäº†æœåŠ¡çš„é‡å¯ç­–ç•¥ã€‚åœ¨è¿™é‡Œï¼Œå¦‚æœæœåŠ¡æ„å¤–ç»ˆæ­¢ï¼Œsystemd å°†æ€»æ˜¯å°è¯•é‡æ–°å¯åŠ¨å®ƒã€‚</li></ul></li><li><p>â€‹<code>[Install]</code>â€‹: è¿™ä¸ªéƒ¨åˆ†å®šä¹‰äº†æœåŠ¡å®‰è£…çš„ç›¸å…³è®¾ç½®ã€‚</p><ul><li>â€‹<code>WantedBy</code>â€‹: æŒ‡æ˜äº†æœåŠ¡åº”è¯¥è¢«å“ªäº› target æ‰€å¼•ç”¨ï¼Œä»¥æ­¤æ¥å†³å®šæœåŠ¡ä½•æ—¶å¯åŠ¨ã€‚åœ¨è¿™é‡Œï¼ŒæœåŠ¡è¢«æ ‡è®°ä¸ºåœ¨ multi-user.target æ—¶å¯åŠ¨ï¼Œæ„å‘³ç€åœ¨å¤šç”¨æˆ·ç•Œé¢ï¼ˆé€šå¸¸æ˜¯åœ¨ç™»å½•å‰ï¼‰å¯åŠ¨è¯¥æœåŠ¡ã€‚</li></ul></li></ul><h2 id="åŠ è½½æœåŠ¡"><a href="#åŠ è½½æœåŠ¡" class="headerlink" title="åŠ è½½æœåŠ¡"></a>åŠ è½½æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start iot_flask.service</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"><a href="#è®¾ç½®å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"></a>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable iot_flask.service</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹è¿è¡ŒçŠ¶æ€"><a href="#æŸ¥çœ‹è¿è¡ŒçŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è¿è¡ŒçŠ¶æ€"></a>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status iot_flask.service</span><br></pre></td></tr></table></figure><h2 id="å…³é—­æœåŠ¡"><a href="#å…³é—­æœåŠ¡" class="headerlink" title="å…³é—­æœåŠ¡"></a>å…³é—­æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop iot_flask.service</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦ä½¿ç”¨æ™®é€šç”¨æˆ·æ¥ç®¡ç†æœåŠ¡ï¼Œå¯ä»¥åœ¨ <code>~/.config/systemd/user</code> â€‹ä¸‹é¢æ³¨å†ŒæœåŠ¡ï¼Œæ³¨æ„ä¸å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š user å’Œ groupï¼Œç®¡ç†å‘½ä»¤æ˜¯ <code>systemctl --user xxx</code>â€‹</p><p>ç›¸å¯¹äºä½¿ç”¨ rc.local æ¥å®ç°å¼€æœºè‡ªå¯åŠ¨ï¼Œsystemctl æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š</p><ol><li><strong>ä¾èµ–å…³ç³»ç®¡ç†</strong>ï¼šsystemd èƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿æœåŠ¡æŒ‰ç…§æ­£ç¡®çš„é¡ºåºå¯åŠ¨ã€‚è€Œ rc.local åˆ™æ˜¯åœ¨æ‰€æœ‰å…¶ä»–åˆå§‹åŒ–è„šæœ¬ä¹‹åè¿è¡Œï¼Œæ— æ³•ä¿è¯æœåŠ¡é—´çš„ä¾èµ–æ€§ã€‚</li><li><strong>æ›´å¥½çš„èµ„æºæ§åˆ¶</strong>ï¼šsystemd å…è®¸å¯¹æœåŠ¡çš„èµ„æºä½¿ç”¨è¿›è¡Œé™åˆ¶ï¼Œä¾‹å¦‚ CPU æ—¶é—´å’Œå†…å­˜ä½¿ç”¨é‡ï¼Œè¿™å¯¹äºç³»ç»Ÿç®¡ç†å’Œå®‰å…¨æ€§è‡³å…³é‡è¦ã€‚rc.local ä¸­çš„è„šæœ¬åˆ™æ²¡æœ‰è¿™æ ·çš„åŠŸèƒ½ã€‚</li><li><strong>çŠ¶æ€è·Ÿè¸ª</strong>ï¼šsystemd èƒ½å¤Ÿè®°å½•æœåŠ¡çš„çŠ¶æ€ï¼Œè¿™åœ¨æ•…éšœæ’æŸ¥æ—¶éå¸¸æœ‰ç”¨ã€‚rc.local çš„è„šæœ¬æ‰§è¡Œæƒ…å†µå¾ˆéš¾è¿½è¸ªã€‚</li><li><strong>æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦</strong>ï¼šsystemd æ”¯æŒå¹¶è¡Œå¯åŠ¨æœåŠ¡ï¼Œå› æ­¤èƒ½æ˜¾è‘—åŠ å¿«ç³»ç»Ÿçš„å¯åŠ¨é€Ÿåº¦ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œrc.local åªèƒ½ä¸²è¡Œæ‰§è¡Œè„šæœ¬ï¼Œå½±å“å¯åŠ¨é€Ÿåº¦ã€‚</li><li><strong>ç»Ÿä¸€æ€§</strong>ï¼šsystemd æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥å¯åŠ¨ã€åœæ­¢ã€é‡å¯æœåŠ¡ä»¥åŠæŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼Œä½¿ç®¡ç†æ›´åŠ ä¸€è‡´å’Œç®€å•ã€‚rc.local æ˜¯ä¸€ç§è¾ƒæ—§çš„æ–¹æ³•ï¼Œå¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰çš„æœåŠ¡ç±»å‹ã€‚</li><li><strong>å®šæ—¶ä»»åŠ¡</strong>ï¼šsystemd æä¾›äº† timer å•å…ƒæ¥æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œè€Œ rc.local ä»…é€‚ç”¨äºå¼€æœºä¸€æ¬¡æ€§æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li><strong>æ›´ä¸°å¯Œçš„å‘½ä»¤è¡Œé€‰é¡¹</strong>ï¼šsystemctl å‘½ä»¤æä¾›äº†ä¸°å¯Œçš„é€‰é¡¹æ¥ç®¡ç†æœåŠ¡å’Œå•å…ƒæ–‡ä»¶ï¼Œä½¿å¾—æ“ä½œæ›´åŠ çµæ´»ã€‚</li><li><strong>æŒ‰éœ€å¯åŠ¨</strong>ï¼šsystemd åªæœ‰åœ¨éœ€è¦æ—¶æ‰å¯åŠ¨æœåŠ¡ï¼Œæœ‰åŠ©äºèŠ‚çœèµ„æºå’Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚rc.local ä¸­çš„è„šæœ¬åˆ™æ˜¯æ¯æ¬¡å¼€æœºéƒ½æ‰§è¡Œï¼Œä¸è€ƒè™‘æ˜¯å¦éœ€è¦ã€‚</li><li><strong>é›†æˆæ—¥å¿—ç®¡ç†</strong>ï¼šsystemd é›†æˆäº†æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼Œä½¿å¾—æŸ¥çœ‹æœåŠ¡çš„æ—¥å¿—å˜å¾—æ›´åŠ æ–¹ä¾¿ï¼Œè€Œ rc.local æ‰§è¡Œçš„ç»“æœå¯èƒ½éš¾ä»¥è®°å½•å’Œè¿½è¸ªã€‚</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œsystemd æä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„æœåŠ¡ç®¡ç†æ–¹å¼ï¼Œç›¸è¾ƒäº rc.localï¼Œå®ƒåœ¨ç³»ç»Ÿç®¡ç†æ–¹é¢æä¾›äº†æ›´å¤šçš„ä¾¿åˆ©æ€§å’Œå¯é æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuä½¿ç”¨rcloneæŒ‚è½½Aliståˆ°æœ¬åœ°</title>
    <link href="/2024/11/22/ubuntu%E4%BD%BF%E7%94%A8rclone%E6%8C%82%E8%BD%BDAlist%E5%88%B0%E6%9C%AC%E5%9C%B0/"/>
    <url>/2024/11/22/ubuntu%E4%BD%BF%E7%94%A8rclone%E6%8C%82%E8%BD%BDAlist%E5%88%B0%E6%9C%AC%E5%9C%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…rclone"><a href="#å®‰è£…rclone" class="headerlink" title="å®‰è£…rclone"></a>å®‰è£…rclone</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install rclone</span><br></pre></td></tr></table></figure><h2 id="é…ç½®rclone"><a href="#é…ç½®rclone" class="headerlink" title="é…ç½®rclone"></a>é…ç½®rclone</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></table></figure><p>é€‰æ‹©æ–°å­˜å‚¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">No configurations found - make a new one.</span><br><span class="line">n) New remote</span><br><span class="line">e) Edit existing remote</span><br><span class="line">d) Delete existing remote</span><br><span class="line">q) Quit config</span><br><span class="line">n/e/d/q&gt; n</span><br></pre></td></tr></table></figure><p>è¾“å…¥åç§°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name&gt; alist</span><br></pre></td></tr></table></figure><p>é€‰æ‹©ç±»å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Type of storage to configure.</span><br><span class="line">Enter a string value. Press Enter for the default (&quot;&quot;).</span><br><span class="line">Choose a number from below, or type in your own value</span><br><span class="line">[snip]</span><br><span class="line">42 / WebDAV</span><br><span class="line">type&gt; 42</span><br></pre></td></tr></table></figure><p>è¾“å…¥ç½‘å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://0.0.0.0:5244/dav</span><br></pre></td></tr></table></figure><p>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User name&gt;</span><br><span class="line">Password&gt;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone ls alist:</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿æ¥æˆåŠŸï¼Œä¼šæ˜¾ç¤ºç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨</p><h2 id="æŒ‚è½½Aliståˆ°æœ¬åœ°"><a href="#æŒ‚è½½Aliståˆ°æœ¬åœ°" class="headerlink" title="æŒ‚è½½Aliståˆ°æœ¬åœ°"></a>æŒ‚è½½Aliståˆ°æœ¬åœ°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/remote</span><br><span class="line">rclone mount alist:/ /home/remote  --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 --use-mmap --vfs-cache-mode full --daemon</span><br></pre></td></tr></table></figure><h2 id="å¸è½½Alist"><a href="#å¸è½½Alist" class="headerlink" title="å¸è½½Alist"></a>å¸è½½Alist</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fusermount f -qzu /home/remote</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¼€å¯è‡ªåŠ¨æŒ‚è½½"><a href="#è®¾ç½®å¼€å¯è‡ªåŠ¨æŒ‚è½½" class="headerlink" title="è®¾ç½®å¼€å¯è‡ªåŠ¨æŒ‚è½½"></a>è®¾ç½®å¼€å¯è‡ªåŠ¨æŒ‚è½½</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/rclone.service</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸¤å¤„ï¼š<br>1.å»¶æ—¶30sæŒ‚è½½ï¼Œé˜²æ­¢æŸäº›ä¾èµ–æœåŠ¡å°šæœªå¯åŠ¨ï¼šExecStartPre&#x3D;&#x2F;bin&#x2F;sleep 30<br>2.å»é™¤â€“daemonå®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œsystemd æœ¬èº«ä¼šå°†æœåŠ¡ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit] </span><br><span class="line">Description=rcloneæŒ‚è½½åˆ°/home/remote</span><br><span class="line"></span><br><span class="line">[Service] </span><br><span class="line">User=root </span><br><span class="line">ExecStartPre=/bin/sleep 30</span><br><span class="line">ExecStart=/usr/bin/rclone mount alist:/ /home/remote  --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 --use-mmap --vfs-cache-mode full</span><br><span class="line"></span><br><span class="line">[Install] </span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># reloadå®ˆæŠ¤è¿›ç¨‹</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"># è®¾ç½®serviceæ–‡ä»¶è‡ªå¯</span><br><span class="line">systemctl enable rclone.service</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨serviceæ–‡ä»¶</span><br><span class="line">systemctl start rclone.service</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½å®Œæˆåå°±æœ‰å¾ˆå¤šäº‹å¯ä»¥åšäº†ï¼Œæ¯”å¦‚å®šæœŸè‡ªåŠ¨å¤‡ä»½åˆ°äº‘ç›˜"><a href="#æŒ‚è½½å®Œæˆåå°±æœ‰å¾ˆå¤šäº‹å¯ä»¥åšäº†ï¼Œæ¯”å¦‚å®šæœŸè‡ªåŠ¨å¤‡ä»½åˆ°äº‘ç›˜" class="headerlink" title="æŒ‚è½½å®Œæˆåå°±æœ‰å¾ˆå¤šäº‹å¯ä»¥åšäº†ï¼Œæ¯”å¦‚å®šæœŸè‡ªåŠ¨å¤‡ä»½åˆ°äº‘ç›˜"></a>æŒ‚è½½å®Œæˆåå°±æœ‰å¾ˆå¤šäº‹å¯ä»¥åšäº†ï¼Œæ¯”å¦‚å®šæœŸè‡ªåŠ¨å¤‡ä»½åˆ°äº‘ç›˜</h2><p>ä»¥åšå®¢æ–‡ç« å¤‡ä»½ä¸¾ä¾‹ï¼šæ¯å‘¨æ—¥0ç‚¹å¤‡ä»½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * 0 cp -r /home/jxh/blog/source/_posts /home/remote/blog/md_$(date +\%Y\%m\%d)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ACLå†™æ³•(æ€ç§‘+åä¸º)</title>
    <link href="/2024/11/22/ACL%E5%86%99%E6%B3%95(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/"/>
    <url>/2024/11/22/ACL%E5%86%99%E6%B3%95(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th>è¯´æ˜</th><th>æ€ç§‘&#x2F;é”æ·</th><th>åä¸º</th></tr></thead><tbody><tr><td>å…è®¸10.1.1.0&#x2F;24ç½‘æ®µè®¿é—®192.168.1.0&#x2F;24ç½‘æ®µçš„æ‰€æœ‰æœåŠ¡ï¼ˆåŸºäºIPåè®®ï¼‰</td><td><code>ip access-list extended 101</code><br><code>10 permit ip 10.1.1.0 0.0.0.255 192.168.1.0 0.0.0.255</code></td><td><code>acl number 3001</code><br><code>rule 10 permit ip source 10.1.1.0 0.0.0.255 destination 192.168.1.0 0.0.0.255</code></td></tr><tr><td>ç¦æ­¢172.16.2.0&#x2F;24ç½‘æ®µè®¿é—®10.0.0.0&#x2F;8ç½‘æ®µçš„æ‰€æœ‰æœåŠ¡ï¼ˆåŸºäºIPåè®®ï¼‰</td><td><code>ip access-list extended 102</code><br><code>10 deny ip 172.16.2.0 0.0.0.255 10.0.0.0 0.255.255.255</code></td><td><code>acl number 3002</code><br><code>rule 10 deny ip source 172.16.2.0 0.0.0.255 destination 10.0.0.0 0.255.255.255</code></td></tr><tr><td>å…è®¸192.168.5.0&#x2F;24ç½‘æ®µä½¿ç”¨HTTPåè®®ï¼ˆç«¯å£80ï¼‰è®¿é—®20.20.20.0&#x2F;24ç½‘æ®µçš„WebæœåŠ¡å™¨</td><td><code>ip access-list extended 103</code><br><code>10 permit tcp 192.168.5.0 0.0.0.255 20.20.20.0 0.0.0.255 eq 80</code></td><td><code>acl number 3003</code><br><code>rule 10 permit tcp source 192.168.5.0 0.0.0.255 destination 20.20.20.0 0.0.0.255 destination-port eq 80</code></td></tr><tr><td>ç¦æ­¢11.11.11.0&#x2F;24ç½‘æ®µä½¿ç”¨FTPåè®®ï¼ˆç«¯å£21ï¼‰è®¿é—®172.31.1.0&#x2F;24ç½‘æ®µçš„FTPæœåŠ¡å™¨</td><td><code>ip access-list extended 104</code><br><code>10 deny tcp 11.11.11.0 0.0.0.255 172.31.1.0 0.0.0.255 eq 21</code></td><td><code>acl number 3004</code><br><code>rule 10 deny tcp source 11.11.11.0 0.0.0.255 destination 172.31.1.0 0.0.0.255 destination-port eq 21</code></td></tr><tr><td>åº”ç”¨ACL</td><td><code>int g0/1</code><br><code>ip access-group 101 in/out</code></td><td><code>int e0/0/1</code><br><code>traffic-filter inbound/outbound acl 3001</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RIP+OSPF+BGPé…ç½®(æ€ç§‘+åä¸º)</title>
    <link href="/2024/11/22/RIP+OSPF+BGP%E9%85%8D%E7%BD%AE(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/"/>
    <url>/2024/11/22/RIP+OSPF+BGP%E9%85%8D%E7%BD%AE(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th><strong>åè®®</strong></th><th><strong>æ€ç§‘ï¼ˆCiscoï¼‰</strong></th><th><strong>åä¸ºï¼ˆHuaweiï¼‰</strong></th></tr></thead><tbody><tr><td><strong>RIP</strong></td><td><code>router rip</code><br> <code>version 2</code><br> <code>network &lt;network&gt;</code><br> <code>no auto-summary</code></td><td><code>rip 1</code><br> <code>version 2</code><br> <code>network &lt;network&gt;</code><br> <code>undo auto-summary</code></td></tr><tr><td><strong>OSPF</strong></td><td><code>router ospf &lt;process-id&gt;</code><br> <code>network &lt;network&gt; &lt;wildcard-mask&gt; area &lt;area-id&gt;</code><br> <code>router-id &lt;router-id&gt;</code></td><td><code>ospf &lt;process-id&gt;</code><br> <code>network &lt;network&gt; &lt;wildcard-mask&gt;</code><br> <code>router-id &lt;router-id&gt;</code><br> <code>area &lt;area-id&gt;</code></td></tr><tr><td><strong>BGP</strong></td><td><code>router bgp &lt;asn&gt;</code><br> <code>network &lt;network&gt; mask &lt;subnet-mask&gt;</code><br> <code>neighbor &lt;ip-address&gt; remote-as &lt;asn&gt;</code></td><td><code>bgp &lt;asn&gt;</code><br> <code>network &lt;network&gt; &lt;subnet-mask&gt;</code><br> <code>peer &lt;ip-address&gt; as-number &lt;asn&gt;</code></td></tr></tbody></table><h3 id="è¯´æ˜ï¼š"><a href="#è¯´æ˜ï¼š" class="headerlink" title="è¯´æ˜ï¼š"></a><strong>è¯´æ˜ï¼š</strong></h3><ol><li><p><strong>RIPï¼ˆRouting Information Protocolï¼‰</strong></p><ul><li><strong>æ€ç§‘</strong>ï¼šé€šè¿‡ <code>router rip</code> å¯ç”¨ RIPï¼Œå¹¶é…ç½® RIP ç‰ˆæœ¬å’Œç½‘ç»œï¼Œé€šå¸¸éœ€è¦ç¦ç”¨ <code>auto-summary</code>ã€‚</li><li><strong>åä¸º</strong>ï¼šé€šè¿‡ <code>rip &lt;instance-id&gt;</code> å¯ç”¨ RIPï¼Œé…ç½®ç±»ä¼¼äºæ€ç§‘ï¼Œä½†å‘½ä»¤ç¨æœ‰ä¸åŒï¼Œä½¿ç”¨ <code>undo auto-summary</code> æ¥ç¦ç”¨è‡ªåŠ¨æ±‡æ€»åŠŸèƒ½ã€‚</li></ul></li><li><p><strong>OSPFï¼ˆOpen Shortest Path Firstï¼‰</strong></p><ul><li><strong>æ€ç§‘</strong>ï¼šéœ€è¦é€šè¿‡ <code>router ospf &lt;process-id&gt;</code> å¯åŠ¨ OSPF è·¯ç”±è¿›ç¨‹ï¼Œé…ç½®ç½‘ç»œå¹¶æŒ‡å®šæ‰€å±åŒºåŸŸã€‚<code>router-id</code> å¯é€‰ï¼Œé€šå¸¸ç”¨äºé¿å…è‡ªåŠ¨é€‰å–è·¯ç”±å™¨ IDã€‚</li><li><strong>åä¸º</strong>ï¼šé…ç½® <code>ospf &lt;process-id&gt;</code> å¯åŠ¨ OSPFï¼ŒæŒ‡å®šç½‘ç»œå’ŒåŒºåŸŸï¼Œ<code>router-id</code> é…ç½®ä¹Ÿå¯é€‰ã€‚</li></ul></li><li><p><strong>BGPï¼ˆBorder Gateway Protocolï¼‰</strong></p><ul><li><strong>æ€ç§‘</strong>ï¼šä½¿ç”¨ <code>router bgp &lt;asn&gt;</code> å¯ç”¨ BGPï¼Œé…ç½®ç½‘ç»œã€é‚»å±…å…³ç³»ä»¥åŠASå·ç­‰ã€‚</li><li><strong>åä¸º</strong>ï¼šåœ¨ <code>bgp &lt;asn&gt;</code> é…ç½®ä¸‹å¯ç”¨ BGPï¼Œä½¿ç”¨ <code>network</code> é…ç½®ç½‘ç»œï¼Œ<code>peer</code> é…ç½®é‚»å±… IP å’Œ AS å·ã€‚</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NATåœ°å€è½¬æ¢é…ç½®ï¼ˆæ€ç§‘+åä¸ºï¼‰</title>
    <link href="/2024/11/22/NAT%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E9%85%8D%E7%BD%AE%EF%BC%88%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA%EF%BC%89/"/>
    <url>/2024/11/22/NAT%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E9%85%8D%E7%BD%AE%EF%BC%88%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="æ€ç§‘"><a href="#æ€ç§‘" class="headerlink" title="æ€ç§‘"></a>æ€ç§‘</h2><p><img src="https://xinhaojin.github.io/picx-images-hosting/20241122/wechat_2024-11-22_150031_298.1e8mwfyk77.webp"></p><h3 id="è·¯ç”±å™¨é…ç½®"><a href="#è·¯ç”±å™¨é…ç½®" class="headerlink" title="è·¯ç”±å™¨é…ç½®"></a>è·¯ç”±å™¨é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">int g0/0.10</span><br><span class="line">encap dot1q 10</span><br><span class="line">ip add 192.168.10.254 255.255.255.0</span><br><span class="line">ip nat inside</span><br><span class="line">int g0/1.20</span><br><span class="line">encap dot1q 20</span><br><span class="line">ip add 192.168.20.254 255.255.255.0</span><br><span class="line">ip nat inside</span><br><span class="line">int s0/1/0</span><br><span class="line">no shutdown</span><br><span class="line">ip add 11.11.11.1 255.255.255.0</span><br><span class="line">ip nat outside</span><br><span class="line">clock rate 96000</span><br><span class="line">exit</span><br><span class="line">ip nat pool ppp 11.11.11.2 11.11.11.4 netmask 255.255.255.0</span><br><span class="line">access-list 100 permit ip 192.168.10.0 0.0.0.255 any</span><br><span class="line">access-list 100 permit ip 192.168.20.0 0.0.0.255 any</span><br><span class="line">ip nat inside source list 100 pool ppp overload </span><br><span class="line">ip route 22.22.22.0 255.255.255.0 11.11.11.10</span><br></pre></td></tr></table></figure><h2 id="åä¸º"><a href="#åä¸º" class="headerlink" title="åä¸º"></a>åä¸º</h2><p><img src="https://xinhaojin.github.io/picx-images-hosting/20241122/%E5%9B%BE%E7%89%871.6t75evdqq1.webp"></p><h3 id="è·¯ç”±å™¨é…ç½®-1"><a href="#è·¯ç”±å™¨é…ç½®-1" class="headerlink" title="è·¯ç”±å™¨é…ç½®"></a>è·¯ç”±å™¨é…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">int g0/0/0.10</span><br><span class="line">dot1q termination vid 10</span><br><span class="line">arp broadcast enable</span><br><span class="line">ip add 192.168.10.254 24</span><br><span class="line">int g0/0/1.20</span><br><span class="line">dot1q termination vid 20</span><br><span class="line">arp broadcast enable</span><br><span class="line">ip add 192.168.20.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 11.11.11.1 24</span><br><span class="line">quit</span><br><span class="line">nat address-group 1 11.11.11.2 11.11.11.4</span><br><span class="line">acl 2000</span><br><span class="line">rule permit source 192.168.10.0 0.0.0.255</span><br><span class="line">rule permit source 192.168.20.0 0.0.0.255</span><br><span class="line">int g0/0/2</span><br><span class="line">nat outbound 2000 address-group 1</span><br><span class="line">quit</span><br><span class="line">ip route-static 22.22.22.0 24 11.11.11.10</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><table><thead><tr><th><strong>é…ç½®é¡¹</strong></th><th><strong>æ€ç§‘è·¯ç”±å™¨ NAT é…ç½®</strong></th><th><strong>åä¸ºè·¯ç”±å™¨ NAT é…ç½®</strong></th></tr></thead><tbody><tr><td><strong>æ¥å£é…ç½®</strong><br>è·¯ç”±å™¨æœ¬èº«ä¸å¤„ç†VLANï¼ŒVLANæ˜¯åœ¨äº¤æ¢æœºå±‚é¢ä¸Šå®ç°çš„ï¼Œå¿…é¡»ä½¿ç”¨å­æ¥å£å®ç°</td><td>åˆ›å»ºå­æ¥å£ï¼Œé€šè¿‡ <code>encap dot1q</code> è®¾ç½® VLAN IDï¼Œé…ç½® IP åœ°å€ï¼Œå¹¶æ ‡è®°ä¸º <code>ip nat inside</code>ã€‚</td><td>åˆ›å»ºå­æ¥å£ï¼Œé€šè¿‡ <code>dot1q termination vid</code> è®¾ç½® VLANï¼Œé…ç½® IP åœ°å€ï¼Œå¹¶å¯ç”¨ ARP å¹¿æ’­ã€‚</td></tr><tr><td><strong>å¤–ç½‘æ¥å£é…ç½®</strong></td><td>é…ç½®å¤–éƒ¨æ¥å£ IP åœ°å€ï¼Œå¹¶æ ‡è®°ä¸º <code>ip nat outside</code>ã€‚å¯ç”¨è¯¥æ¥å£å¹¶è®¾ç½®æ—¶é’Ÿé¢‘ç‡ï¼ˆå¦‚é€‚ç”¨ï¼‰ã€‚</td><td>é…ç½®å¤–éƒ¨æ¥å£çš„ IP åœ°å€ã€‚</td></tr><tr><td><strong>NAT åœ°å€æ± </strong></td><td>é€šè¿‡ <code>ip nat pool</code> å®šä¹‰å…¬å…± IP åœ°å€æ± ä¾›å†…ç½‘è®¿é—®å¤–ç½‘æ—¶ä½¿ç”¨ã€‚</td><td>é€šè¿‡ <code>nat address-group</code> åˆ›å»ºå…¬å…± IP åœ°å€æ± ã€‚</td></tr><tr><td><strong>è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)</strong></td><td>åˆ›å»º ACLï¼Œå®šä¹‰å“ªäº›å†…éƒ¨ IP åœ°å€å¯ä»¥è¿›è¡Œ NAT åœ°å€è½¬æ¢ã€‚</td><td>ä½¿ç”¨ <code>acl</code> é…ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œå®šä¹‰å…è®¸è¿›è¡Œ NAT è½¬æ¢çš„æºåœ°å€ã€‚</td></tr><tr><td><strong>é…ç½®æº NAT</strong></td><td>ä½¿ç”¨ <code>ip nat inside source list</code> é…ç½® ACL ä¸­å®šä¹‰çš„åœ°å€èŒƒå›´ï¼Œå°†æµé‡æ˜ å°„åˆ°å¤–éƒ¨åœ°å€æ± ã€‚</td><td>é€šè¿‡ <code>nat outbound</code> å‘½ä»¤å°†æµé‡æ˜ å°„åˆ°å¤–éƒ¨åœ°å€æ± ï¼Œå®ç°æºåœ°å€è½¬æ¢ã€‚</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€ç§‘æ ¸å¿ƒäº¤æ¢æœºåŒæœºçƒ­å¤‡ä»½</title>
    <link href="/2024/11/21/%E6%80%9D%E7%A7%91%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E4%BB%BD/"/>
    <url>/2024/11/21/%E6%80%9D%E7%A7%91%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E4%BB%BD/</url>
    
    <content type="html"><![CDATA[<p><img src="https://xinhaojin.github.io/picx-images-hosting/20241119/image.969rucnjap.webp" alt="image"></p><table><thead><tr><th><strong>æè¿°</strong></th><th><strong>äº¤æ¢æœºA</strong></th><th><strong>äº¤æ¢æœºB</strong></th></tr></thead><tbody><tr><td><strong>é…ç½®vlanæ¥å£åœ°å€</strong></td><td><code>int vlan 10</code><br> <code>ip add 192.168.10.254 255.255.255.0</code><br> <code>int vlan 20</code><br> <code>ip add 192.168.20.254 255.255.255.0</code></td><td><code>int vlan 10</code><br> <code>ip add 192.168.10.253 255.255.255.0</code><br> <code>int vlan 20</code><br> <code>ip add 192.168.20.253 255.255.255.0</code></td></tr><tr><td><strong>é…ç½®è™šæ‹Ÿåœ°å€ä¼˜å…ˆçº§<br>æŠ¢å <br>ç›‘æ§ä¸Šè¡Œæ¥å£ï¼ˆä¸­æ–­æ—¶åˆ‡æ¢ï¼‰<br>ï¼ˆstandbyç¼–å·å¯ä»¥æŒ‡å®šå…¶ä»–ï¼Œä½†ä¸ºäº†æ–¹ä¾¿ä¸€èˆ¬ä¸vlanå·ç›¸åŒï¼‰</strong></td><td><code>int vlan 10</code><br> <code>standby 10 ip 192.168.10.252</code><br> <code>standby 10 priority 101</code><br> <code>standby 10 preempt</code><br> <code>standby 10 track f0/1</code><br> <code>standby 10 track f0/2</code> <br><code>int vlan 20</code><br> <code>standby 20 ip 192.168.20.252</code><br> <code>standby 20 priority 100(default)</code><br> <code>standby 20 track f0/1</code><br> <code>standby 20 track f0/2</code></td><td><code>int vlan 10</code><br> <code>standby 10 ip 192.168.10.252</code><br> <code>standby 10 priority 100(default)</code><br> <code>standby 10 track f0/1</code><br> <code>standby 10 track f0/2</code><br><code>int vlan 20</code><br> <code>standby 20 ip 192.168.20.252</code><br> <code>standby 20 priority 101</code><br> <code>standby 10 preempt</code><br> <code>standby 20 track f0/1</code><br> <code>standby 20 track f0/2</code></td></tr><tr><td><strong>é…ç½®ç”Ÿæˆæ ‘ï¼Œåˆ†é…vlanï¼Œè´Ÿè½½å‡è¡¡</strong></td><td><code>spanning-tree mode pvst</code><br> <code>spanning-tree vlan 10 root primary</code><br> <code>spanning-tree vlan 20 root secondary</code></td><td><code>spanning-tree mode pvst</code><br> <code>spanning-tree vlan 20 root primary</code><br> <code>spanning-tree vlan 10 root secondary</code></td></tr><tr><td><strong>é…ç½®ä¸Šè¡Œæ¥å£ä¸ºè·¯ç”±æ¥å£ï¼Œå…³é—­äºŒå±‚äº¤æ¢åŠŸèƒ½</strong></td><td><code>int f0/1</code><br> <code>no switchport</code><br> <code>ip add 192.168.11.13 255.255.255.252</code><br><code>int f0/2</code><br> <code>no switchport</code><br> <code>ip add 192.168.11.9 255.255.255.252</code></td><td><code>int f0/1</code><br> <code>no switchport</code><br> <code>ip add 192.168.11.1 255.255.255.252</code><br><code>int f0/2</code><br> <code>no switchport</code><br> <code>ip add 192.168.11.5 255.255.255.252</code></td></tr><tr><td><strong>æ†ç»‘é“¾è·¯èšåˆæ¥å£</strong></td><td><code>int f0/3</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>channel-group 1 mode on</code> <br><code>int f0/4</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>channel-group 1 mode on</code></td><td><code>int f0/3</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>channel-group 1 mode on</code><br><code>int f0/4</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>channel-group 1 mode on</code></td></tr><tr><td><strong>å…¶ä½™ç«¯å£é…ç½®ä¸ºtrunk</strong></td><td><code>int range f0/5-7</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>switchport trunk allowed vlan all(default)</code></td><td><code>int range f0/5-7</code><br> <code>switchport trunk encapsulation dot1q</code><br> <code>switchport mode trunk</code><br> <code>switchport trunk allowed vlan all(default)</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€ç§‘é”æ·ç½‘ç»œè®¾å¤‡é…ç½®å‘½ä»¤</title>
    <link href="/2024/11/21/%E6%80%9D%E7%A7%91%E9%94%90%E6%8D%B7%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/11/21/%E6%80%9D%E7%A7%91%E9%94%90%E6%8D%B7%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th>ç±»åˆ«</th><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åŸºç¡€å‘½ä»¤</strong></td><td><code>enable</code></td><td>è¿›å…¥ç‰¹æƒæ¨¡å¼</td></tr><tr><td></td><td><code>configure terminal</code></td><td>è¿›å…¥å…¨å±€é…ç½®æ¨¡å¼</td></tr><tr><td></td><td><code>show running-config</code></td><td>æŸ¥çœ‹å½“å‰è¿è¡Œçš„é…ç½®</td></tr><tr><td></td><td><code>show startup-config</code></td><td>æŸ¥çœ‹å¯åŠ¨æ—¶çš„é…ç½®</td></tr><tr><td></td><td><code>copy running-config startup-config</code></td><td>ä¿å­˜å½“å‰é…ç½®åˆ°å¯åŠ¨é…ç½®æ–‡ä»¶</td></tr><tr><td></td><td><code>reload</code></td><td>é‡æ–°å¯åŠ¨äº¤æ¢æœº</td></tr><tr><td><strong>æ¥å£é…ç½®</strong></td><td><code>interface &lt;æ¥å£å·&gt;</code></td><td>è¿›å…¥æŒ‡å®šæ¥å£é…ç½®æ¨¡å¼</td></tr><tr><td></td><td><code>interface range &lt;æ¥å£èŒƒå›´&gt;</code></td><td>é…ç½®å¤šä¸ªæ¥å£ï¼ˆä¾‹å¦‚ <code>interface range fastEthernet 0/1 - 24</code>ï¼‰</td></tr><tr><td></td><td><code>ip address &lt;ipåœ°å€&gt; &lt;å­ç½‘æ©ç &gt;</code></td><td>é…ç½®æ¥å£çš„IPåœ°å€å’Œå­ç½‘æ©ç </td></tr><tr><td></td><td><code>no shutdown</code></td><td>å¯åŠ¨æ¥å£ï¼ˆé»˜è®¤æ¥å£å…³é—­æ—¶éœ€è¦å¯ç”¨ï¼‰</td></tr><tr><td></td><td><code>shutdown</code></td><td>å…³é—­æ¥å£</td></tr><tr><td></td><td><code>description &lt;æ¥å£æè¿°&gt;</code></td><td>è®¾ç½®æ¥å£æè¿°</td></tr><tr><td></td><td><code>speed &lt;é€Ÿåº¦&gt;</code></td><td>è®¾ç½®æ¥å£é€Ÿç‡ï¼ˆä¾‹å¦‚ <code>speed 100</code>ï¼‰</td></tr><tr><td></td><td><code>duplex &lt;åŒå·¥æ¨¡å¼&gt;</code></td><td>è®¾ç½®æ¥å£åŒå·¥æ¨¡å¼ï¼ˆ<code>full</code> æˆ– <code>half</code>ï¼‰</td></tr><tr><td></td><td><code>switchport mode access</code></td><td>è®¾ç½®ç«¯å£ä¸ºè®¿é—®æ¨¡å¼</td></tr><tr><td></td><td><code>switchport mode trunk</code></td><td>è®¾ç½®ç«¯å£ä¸ºå¹²çº¿æ¨¡å¼</td></tr><tr><td></td><td><code>switchport trunk encapsulation dot1q</code></td><td>è®¾ç½®å¹²çº¿ç«¯å£çš„å°è£…æ–¹å¼ä¸ºIEEE 802.1Q</td></tr><tr><td></td><td><code>switchport trunk allowed vlan &lt;vlanåˆ—è¡¨&gt;</code></td><td>é…ç½®å…è®¸é€šè¿‡çš„VLANåˆ—è¡¨</td></tr><tr><td></td><td><code>switchport trunk native vlan &lt;vlanç¼–å·&gt;</code></td><td>è®¾ç½®å¹²çº¿ç«¯å£çš„åŸç”ŸVLANï¼ˆé€šå¸¸æ˜¯VLAN 1ï¼‰</td></tr><tr><td></td><td><code>switchport access vlan &lt;vlanç¼–å·&gt;</code></td><td>å°†ç«¯å£åˆ†é…ç»™æŒ‡å®šVLAN</td></tr><tr><td></td><td><code>switchport nonegotiate</code></td><td>ç¦ç”¨å¹²çº¿ç«¯å£çš„åå•†</td></tr><tr><td></td><td><code>switchport mode dynamic auto</code></td><td>è®¾ç½®æ¥å£ä¸ºåŠ¨æ€è‡ªåŠ¨æ¨¡å¼ï¼Œå…è®¸æ¥å£åå•†æ˜¯å¦ä¸ºè®¿é—®ç«¯å£æˆ–å¹²çº¿ç«¯å£</td></tr><tr><td></td><td><code>switchport mode dynamic desirable</code></td><td>è®¾ç½®æ¥å£ä¸ºåŠ¨æ€åå•†æ¨¡å¼ï¼Œè¦æ±‚ç«¯å£ä»¥å¹²çº¿ç«¯å£èº«ä»½è¿›è¡Œåå•†</td></tr><tr><td></td><td><code>int g0/0/0.1</code></td><td>æ·»åŠ å­æ¥å£ï¼Œé€‚åˆå•è‡‚è·¯ç”±å®ç°vlané—´é€šä¿¡</td></tr><tr><td></td><td><code>encapsulation dot1Q 10</code></td><td>ç»™å­æ¥å£æ‰“ä¸Švlanæ ‡ç­¾</td></tr><tr><td></td><td><code>ip address 192.168.10.254 255.255.255.0</code></td><td>é…ç½®å­æ¥å£IPåœ°å€å’Œå­ç½‘æ©ç </td></tr><tr><td><strong>VLANé…ç½®</strong></td><td><code>vlan &lt;vlanç¼–å·&gt;</code></td><td>åˆ›å»ºVLANæˆ–è¿›å…¥ç°æœ‰VLANé…ç½®æ¨¡å¼</td></tr><tr><td></td><td><code>name &lt;vlanåç§°&gt;</code></td><td>è®¾ç½®VLANåç§°</td></tr><tr><td></td><td><code>show vlan brief</code></td><td>æ˜¾ç¤ºVLANçš„åŸºæœ¬ä¿¡æ¯</td></tr><tr><td></td><td><code>show vlan</code></td><td>æ˜¾ç¤ºæ‰€æœ‰VLANçš„ä¿¡æ¯</td></tr><tr><td></td><td><code>vlan database</code></td><td>è¿›å…¥VLANæ•°æ®åº“æ¨¡å¼</td></tr><tr><td></td><td><code>exit</code></td><td>é€€å‡ºVLANæ•°æ®åº“æ¨¡å¼</td></tr><tr><td><strong>STPé…ç½®</strong></td><td><code>spanning-tree vlan &lt;vlanç¼–å·&gt; root primary</code></td><td>è®¾ç½®VLANæ ¹æ¡¥ä¸ºä¸»è®¾å¤‡</td></tr><tr><td></td><td><code>spanning-tree vlan &lt;vlanç¼–å·&gt; priority &lt;ä¼˜å…ˆçº§å€¼&gt;</code></td><td>è®¾ç½®VLANæ ¹æ¡¥çš„ä¼˜å…ˆçº§</td></tr><tr><td></td><td><code>spanning-tree mode &lt;pvst| rapid-pvst</code></td><td>è®¾ç½®STPæ¨¡å¼</td></tr><tr><td></td><td><code>spanning-tree vlan &lt;vlanç¼–å·&gt; cost &lt;è·¯å¾„æˆæœ¬&gt;</code></td><td>è®¾ç½®VLANçš„STPè·¯å¾„æˆæœ¬</td></tr><tr><td></td><td><code>spanning-tree portfast</code></td><td>å¯ç”¨ç«¯å£å¿«é€Ÿæ”¶æ•›ï¼ˆç”¨äºæ¥å…¥å±‚ç«¯å£ï¼‰</td></tr><tr><td></td><td><code>spanning-tree bpduguard enable</code></td><td>å¯ç”¨BPDU Guardï¼ˆé˜²æ­¢éæ³•æ ¹æ¡¥ï¼‰</td></tr><tr><td></td><td><code>show spanning-tree</code></td><td>æ˜¾ç¤ºSTPçŠ¶æ€</td></tr><tr><td><strong>é™æ€è·¯ç”±</strong></td><td><code>ip route &lt;ç›®æ ‡ç½‘ç»œåœ°å€&gt; &lt;å­ç½‘æ©ç &gt; &lt;ä¸‹ä¸€è·³åœ°å€&gt;</code></td><td>æ·»åŠ ä¸€æ¡é™æ€è·¯ç”±ã€‚æŒ‡å®šç›®æ ‡ç½‘ç»œåœ°å€ã€å­ç½‘æ©ç å’Œä¸‹ä¸€è·³è·¯ç”±å™¨çš„ IP åœ°å€ã€‚</td></tr><tr><td></td><td><code>ip route 0.0.0.0 0.0.0.0 &lt;ä¸‹ä¸€è·³åœ°å€&gt;</code></td><td>æ·»åŠ é»˜è®¤è·¯ç”±ï¼Œé€šå¸¸ç”¨äºæŒ‡å‘å‡ºå£è·¯ç”±å™¨çš„ä¸‹ä¸€è·³åœ°å€ã€‚</td></tr><tr><td></td><td><code>ip route &lt;ç›®æ ‡ç½‘ç»œåœ°å€&gt; &lt;å­ç½‘æ©ç &gt; &lt;å‡ºå£æ¥å£&gt;</code></td><td>æ·»åŠ é™æ€è·¯ç”±å¹¶æŒ‡å®šå‡ºæ¥å£ï¼Œè€Œéä¸‹ä¸€è·³åœ°å€ã€‚é€‚ç”¨äºç›´æ¥è¿æ¥çš„ç½‘ç»œã€‚</td></tr><tr><td></td><td><code>no ip route &lt;ç›®æ ‡ç½‘ç»œåœ°å€&gt; &lt;å­ç½‘æ©ç &gt; &lt;ä¸‹ä¸€è·³åœ°å€&gt;</code></td><td>åˆ é™¤å·²é…ç½®çš„é™æ€è·¯ç”±ã€‚</td></tr><tr><td></td><td><code>show ip route</code></td><td>æŸ¥çœ‹å½“å‰è®¾å¤‡çš„è·¯ç”±è¡¨ï¼Œæ˜¾ç¤ºé™æ€è·¯ç”±ã€åŠ¨æ€è·¯ç”±ç­‰æ‰€æœ‰è·¯ç”±ä¿¡æ¯ã€‚</td></tr><tr><td><strong>è·¯ç”±åè®®</strong></td><td><code>router rip</code></td><td>å¯ç”¨RIPè·¯ç”±åè®®</td></tr><tr><td></td><td><code>network &lt;ç½‘ç»œåœ°å€&gt;</code></td><td>æŒ‡å®šRIPè·¯ç”±åè®®çš„ç½‘ç»œ</td></tr><tr><td></td><td><code>version 2</code></td><td>RIPç‰ˆæœ¬2ï¼Œæ”¯æŒCIDRåœ°å€</td></tr><tr><td></td><td><code>router ospf &lt;è¿›ç¨‹ID&gt;</code></td><td>å¯ç”¨OSPFè·¯ç”±åè®®</td></tr><tr><td></td><td><code>network &lt;ç½‘ç»œåœ°å€&gt; &lt;åå‘æ©ç &gt; area &lt;åŒºåŸŸå·&gt;</code></td><td>é…ç½®OSPFçš„ç½‘ç»œå’ŒåŒºåŸŸ</td></tr><tr><td></td><td><code>router bgp &lt;ASå·&gt;</code></td><td>å¯ç”¨BGPè·¯ç”±åè®®</td></tr><tr><td></td><td><code>neighbor &lt;é‚»å±…IPåœ°å€&gt; remote-as &lt;ASå·&gt;</code></td><td>é…ç½®BGPé‚»å±…åŠå…¶ASå·</td></tr><tr><td></td><td><code>network &lt;ç½‘ç»œåœ°å€&gt; mask &lt;å­ç½‘æ©ç &gt;</code></td><td>é…ç½®BGPçš„ç½‘ç»œå…¬å‘Š</td></tr><tr><td></td><td><code>redistribute ospf</code></td><td>å°†OSPFè·¯ç”±é‡æ–°åˆ†å‘åˆ°å…¶ä»–è·¯ç”±åè®®</td></tr><tr><td><strong>NATé…ç½®</strong></td><td><code>ip nat inside source list &lt;è®¿é—®æ§åˆ¶åˆ—è¡¨ç¼–å·&gt; interface &lt;æ¥å£å·&gt; overload</code></td><td>é…ç½®åŠ¨æ€NATï¼Œä½¿ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰æ¥æ§åˆ¶å“ªäº›åœ°å€å¯ä»¥è¿›è¡ŒNATï¼ŒæŒ‡å®šå¤–éƒ¨æ¥å£å¹¶å¯ç”¨è¶…è½½æ¨¡å¼ï¼ˆoverloadï¼‰</td></tr><tr><td></td><td><code>ip nat inside</code></td><td>é…ç½®æ¥å£ä¸ºå†…éƒ¨ç½‘ç»œæ¥å£ï¼ˆNAT Insideï¼‰ã€‚é€šå¸¸æ˜¯æœ¬åœ°ç§æœ‰åœ°å€çš„æ¥å£ã€‚</td></tr><tr><td></td><td><code>ip nat outside</code></td><td>é…ç½®æ¥å£ä¸ºå¤–éƒ¨ç½‘ç»œæ¥å£ï¼ˆNAT Outsideï¼‰ã€‚é€šå¸¸æ˜¯è¿æ¥åˆ°å…¬å…±Internetçš„æ¥å£ã€‚</td></tr><tr><td></td><td><code>ip nat inside source static &lt;å†…éƒ¨IPåœ°å€&gt; &lt;å¤–éƒ¨IPåœ°å€&gt;</code></td><td>é…ç½®é™æ€NATï¼Œå°†ä¸€ä¸ªå†…éƒ¨IPåœ°å€æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„å¤–éƒ¨IPåœ°å€ï¼ˆ1:1æ˜ å°„ï¼‰ã€‚</td></tr><tr><td></td><td><code>ip nat inside source static &lt;å†…éƒ¨IPåœ°å€&gt; &lt;å¤–éƒ¨IPåœ°å€&gt; extendable</code></td><td>é…ç½®æ‰©å±•çš„é™æ€NATï¼Œå…è®¸åœ¨NATæ˜ å°„çš„IPåœ°å€ç”¨å°½æ—¶åŠ¨æ€æ‰©å±•é™æ€NATæ˜ å°„ã€‚</td></tr><tr><td></td><td><code>ip nat inside source list &lt;ACLç¼–å·&gt; pool &lt;æ± åç§°&gt; overload</code></td><td>é…ç½®åŸºäºACLçš„åŠ¨æ€NATå¹¶ä½¿ç”¨NATæ± ï¼ˆä¾‹å¦‚ï¼Œå½“æœ‰å¤šä¸ªå¤–éƒ¨IPåœ°å€æ—¶ï¼‰ã€‚å¯ç”¨è¶…è½½åŠŸèƒ½å…è®¸å¤šä¸ªå†…éƒ¨IPå…±äº«ä¸€ä¸ªå¤–éƒ¨IPã€‚</td></tr><tr><td></td><td><code>ip nat pool &lt;æ± åç§°&gt; &lt;èµ·å§‹IPåœ°å€&gt; &lt;ç»“æŸIPåœ°å€&gt; netmask &lt;å­ç½‘æ©ç &gt;</code></td><td>åˆ›å»ºä¸€ä¸ªNATæ± ï¼ŒæŒ‡å®šæ± çš„èµ·å§‹å’Œç»“æŸIPåœ°å€åŠå­ç½‘æ©ç ï¼Œç”¨äºåŠ¨æ€åˆ†é…å¤–éƒ¨IPåœ°å€ç»™å†…éƒ¨IPã€‚</td></tr><tr><td></td><td><code>ip nat inside source list &lt;ACLç¼–å·&gt; interface &lt;æ¥å£å·&gt; overload</code></td><td>é…ç½®åŸºäºACLçš„åŠ¨æ€NATï¼ŒæŒ‡å®šå¤–éƒ¨æ¥å£å¹¶å¯ç”¨è¶…è½½æ¨¡å¼ï¼Œå…è®¸å¤šä¸ªå†…éƒ¨åœ°å€å…±äº«ä¸€ä¸ªå¤–éƒ¨IPåœ°å€ã€‚</td></tr><tr><td></td><td><code>ip nat translation tcp-timeout &lt;ç§’æ•°&gt;</code></td><td>è®¾ç½®TCPè¿æ¥çš„NATè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º24å°æ—¶ï¼ˆ86400ç§’ï¼‰ã€‚</td></tr><tr><td></td><td><code>ip nat translation udp-timeout &lt;ç§’æ•°&gt;</code></td><td>è®¾ç½®UDPè¿æ¥çš„NATè¶…æ—¶æ—¶é—´ã€‚é»˜è®¤ä¸º5åˆ†é’Ÿï¼ˆ300ç§’ï¼‰ã€‚</td></tr><tr><td></td><td><code>ip nat translation udp-timeout &lt;ç§’æ•°&gt;</code></td><td>è®¾ç½®UDPè¿æ¥çš„NATè¶…æ—¶æ—¶é—´ã€‚é»˜è®¤ä¸º5åˆ†é’Ÿï¼ˆ300ç§’ï¼‰ã€‚</td></tr><tr><td></td><td><code>ip nat translation no-fragment</code></td><td>ç¦ç”¨NATè½¬æ¢æ—¶çš„IPåˆ†ç‰‡ï¼ˆFragmentationï¼‰ã€‚</td></tr><tr><td></td><td><code>show ip nat translations</code></td><td>æŸ¥çœ‹å½“å‰NATè½¬æ¢è¡¨ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨çš„NATæ¡ç›®ã€‚</td></tr><tr><td></td><td><code>clear ip nat translations *</code></td><td>æ¸…é™¤æ‰€æœ‰NATè½¬æ¢æ¡ç›®ã€‚</td></tr><tr><td></td><td><code>show ip nat statistics</code></td><td>æŸ¥çœ‹NATç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚NATæ± ä½¿ç”¨æƒ…å†µã€å‘½ä¸­æ¬¡æ•°ã€è½¬æ¢æ¬¡æ•°ç­‰ã€‚</td></tr><tr><td></td><td><code>clear ip nat statistics</code></td><td>æ¸…é™¤NATçš„ç»Ÿè®¡æ•°æ®ã€‚</td></tr><tr><td></td><td><code>ip nat enable</code></td><td>åœ¨æ¥å£ä¸Šå¯ç”¨NATåŠŸèƒ½ï¼Œé€šå¸¸åœ¨æ¥å£é…ç½®æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚</td></tr><tr><td></td><td><code>ip route &lt;ç›®æ ‡ç½‘ç»œ&gt; &lt;å­ç½‘æ©ç &gt; &lt;NATæ¥å£&gt;</code></td><td>é…ç½®NATæ¥å£çš„é™æ€è·¯ç”±ã€‚ç¡®ä¿NATæµé‡èƒ½å¤Ÿæ­£ç¡®è·¯ç”±åˆ°å¤–éƒ¨ç½‘ç»œã€‚</td></tr><tr><td><strong>ACLé…ç½®</strong></td><td><code>ip access-lists extended &lt;ç¼–å·&gt;</code></td><td>åˆ›å»º&#x2F;è¿›å…¥æ‰©å±•ACL</td></tr><tr><td></td><td><code>&lt;ç¼–å·&gt; permit ip permit ip &lt;æºåœ°å€&gt; &lt;åæ©ç &gt; &lt;ç›®æ ‡åœ°å€&gt; &lt;åæ©ç &gt;</code></td><td>æ·»åŠ rule</td></tr><tr><td></td><td><code>ip access-group &lt;ACLç¼–å·&gt; in/out</code></td><td>åº”ç”¨ACLåˆ°æ¥å£çš„æµé‡æ–¹å‘ï¼ˆin&#x2F;outï¼‰</td></tr><tr><td></td><td><code>show access-lists &lt;ç¼–å·&gt;</code></td><td>æŸ¥çœ‹ACLé…ç½®åŠè§„åˆ™</td></tr><tr><td><strong>ç«¯å£å®‰å…¨</strong></td><td><code>switchport port-security</code></td><td>å¯ç”¨ç«¯å£å®‰å…¨</td></tr><tr><td></td><td><code>switchport port-security maximum &lt;æœ€å¤§æ•°é‡&gt;</code></td><td>è®¾ç½®ç«¯å£å…è®¸çš„æœ€å¤§MACåœ°å€æ•°é‡</td></tr><tr><td></td><td><code>switchport port-security violation &lt;protect/restrict/shutdown&gt;</code></td><td>é…ç½®ç«¯å£å®‰å…¨è¿è§„å¤„ç†æ–¹å¼</td></tr><tr><td></td><td><code>show port-security</code></td><td>æŸ¥çœ‹ç«¯å£å®‰å…¨çš„é…ç½®ä¿¡æ¯</td></tr><tr><td><strong>SNMPé…ç½®</strong></td><td><code>snmp-server community &lt;community_string&gt; RO</code></td><td>é…ç½®SNMPç¤¾åŒºå­—ç¬¦ä¸²å¹¶è®¾ç½®åªè¯»æƒé™</td></tr><tr><td></td><td><code>snmp-server enable traps</code></td><td>å¯ç”¨SNMPé™·é˜±</td></tr><tr><td><strong>æ—¥å¿—é…ç½®</strong></td><td><code>logging buffered &lt;å¤§å°&gt;</code></td><td>è®¾ç½®æ—¥å¿—ç¼“å†²åŒºå¤§å°</td></tr><tr><td></td><td><code>logging console</code></td><td>å¯ç”¨æ§åˆ¶å°æ—¥å¿—è¾“å‡º</td></tr><tr><td><strong>NTPé…ç½®</strong></td><td><code>ntp server &lt;NTPæœåŠ¡å™¨åœ°å€&gt;</code></td><td>é…ç½®NTPæœåŠ¡å™¨</td></tr><tr><td><strong>SSHé…ç½®</strong></td><td><code>ip domain-name &lt;åŸŸå&gt;</code></td><td>é…ç½®åŸŸåï¼ˆç”¨äºSSHï¼‰</td></tr><tr><td></td><td><code>crypto key generate rsa</code></td><td>ç”ŸæˆRSAå¯†é’¥å¯¹ï¼ˆç”¨äºSSHï¼‰</td></tr><tr><td></td><td><code>ip ssh version 2</code></td><td>å¯ç”¨SSHç‰ˆæœ¬2</td></tr><tr><td></td><td><code>line vty 0 4</code></td><td>è¿›å…¥VTYçº¿è·¯é…ç½®æ¨¡å¼ï¼ˆé…ç½®è¿œç¨‹è®¿é—®ï¼‰</td></tr><tr><td></td><td><code>login local</code></td><td>ä½¿ç”¨æœ¬åœ°ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•</td></tr><tr><td></td><td><code>transport input ssh</code></td><td>ä»…å…è®¸SSHè¿œç¨‹è®¿é—®</td></tr><tr><td><strong>EtherChannel</strong></td><td><code>interface range &lt;æ¥å£èŒƒå›´&gt;</code></td><td>è¿›å…¥å¤šä¸ªæ¥å£é…ç½®æ¨¡å¼ï¼ˆä¾‹å¦‚ <code>interface range gig 0/1 - 2</code>ï¼‰</td></tr><tr><td></td><td><code>channel-group &lt;ç¼–å·&gt; mode on</code></td><td>é…ç½®EtherChannelï¼Œå¼€å¯é€šé“ç»„</td></tr><tr><td></td><td><code>channel-group &lt;ç¼–å·&gt; mode passive</code></td><td>è®¾ç½®EtherChannelä¸ºè¢«åŠ¨æ¨¡å¼ï¼ˆç­‰å¾…å¯¹ç«¯èšåˆï¼‰</td></tr><tr><td></td><td><code>channel-group &lt;ç¼–å·&gt; mode active</code></td><td>è®¾ç½®EtherChannelä¸ºä¸»åŠ¨æ¨¡å¼</td></tr><tr><td></td><td><code>show etherchannel summary</code></td><td>æŸ¥çœ‹EtherChannelçŠ¶æ€</td></tr><tr><td><strong>VTPé…ç½®</strong></td><td><code>vtp mode &lt;æ¨¡å¼&gt;</code></td><td>è®¾ç½®VTPæ¨¡å¼ï¼ˆ<code>server</code>, <code>client</code>, <code>transparent</code>ï¼‰</td></tr><tr><td></td><td><code>vtp domain &lt;åŸŸå&gt;</code></td><td>è®¾ç½®VTPåŸŸå</td></tr><tr><td></td><td><code>vtp password &lt;å¯†ç &gt;</code></td><td>è®¾ç½®VTPå¯†ç </td></tr><tr><td><strong>DHCPé…ç½®</strong></td><td><code>ip dhcp pool &lt;æ± åç§°&gt;</code></td><td>åˆ›å»ºä¸€ä¸ªDHCPåœ°å€æ± </td></tr><tr><td></td><td><code>network &lt;ç½‘ç»œåœ°å€&gt; &lt;å­ç½‘æ©ç &gt;</code></td><td>é…ç½®DHCPæ± çš„ç½‘ç»œåœ°å€å’Œå­ç½‘æ©ç </td></tr><tr><td></td><td><code>default-router &lt;é»˜è®¤ç½‘å…³åœ°å€&gt;</code></td><td>é…ç½®DHCPå®¢æˆ·ç«¯çš„é»˜è®¤ç½‘å…³</td></tr><tr><td></td><td><code>dns-server &lt;DNSæœåŠ¡å™¨åœ°å€&gt;</code></td><td>é…ç½®DHCPå®¢æˆ·ç«¯çš„DNSæœåŠ¡å™¨åœ°å€</td></tr><tr><td></td><td><code>domain-name &lt;åŸŸå&gt;</code></td><td>é…ç½®DHCPå®¢æˆ·ç«¯çš„åŸŸå</td></tr><tr><td></td><td><code>lease &lt;ç§ŸæœŸ&gt;</code></td><td>è®¾ç½®DHCPç§ŸæœŸï¼ˆå•ä½ï¼šå¤©ã€å°æ—¶ã€åˆ†é’Ÿï¼‰</td></tr><tr><td></td><td><code>excluded-address &lt;åœ°å€èŒƒå›´&gt;</code></td><td>é…ç½®DHCPæ± ä¸­æ’é™¤çš„åœ°å€èŒƒå›´ï¼Œä¸ä¼šåˆ†é…ç»™DHCPå®¢æˆ·ç«¯</td></tr><tr><td></td><td><code>address &lt;åœ°å€&gt; &lt;å­ç½‘æ©ç &gt;</code></td><td>é…ç½®DHCPæ± çš„ç‰¹å®šIPåœ°å€å’Œå­ç½‘æ©ç </td></tr><tr><td></td><td><code>ip dhcp excluded-address &lt;èµ·å§‹åœ°å€&gt; &lt;ç»“æŸåœ°å€&gt;</code></td><td>é…ç½®æ’é™¤çš„DHCPåœ°å€èŒƒå›´ï¼Œç¡®ä¿è¿™äº›åœ°å€ä¸ä¼šè¢«åˆ†é…ç»™å®¢æˆ·ç«¯</td></tr><tr><td></td><td><code>show ip dhcp pool</code></td><td>æŸ¥çœ‹DHCPæ± çš„çŠ¶æ€å’Œåˆ†é…çš„åœ°å€ä¿¡æ¯</td></tr><tr><td></td><td><code>show ip dhcp binding</code></td><td>æŸ¥çœ‹DHCPå®¢æˆ·ç«¯çš„IPåœ°å€ç»‘å®šä¿¡æ¯</td></tr><tr><td></td><td><code>clear ip dhcp binding &lt;IPåœ°å€&gt;</code></td><td>æ¸…é™¤æŒ‡å®šDHCPå®¢æˆ·ç«¯çš„IPåœ°å€ç»‘å®š</td></tr><tr><td></td><td><code>ip helper-address &lt;æœåŠ¡å™¨åœ°å€&gt;</code></td><td>é…ç½®DHCPä¸­ç»§ä»£ç†ï¼ŒæŒ‡å‘DHCPæœåŠ¡å™¨çš„IPåœ°å€</td></tr><tr><td><strong>ç³»ç»Ÿç®¡ç†</strong></td><td><code>show version</code></td><td>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td></td><td><code>show ip interface brief</code></td><td>æŸ¥çœ‹æ¥å£çŠ¶æ€æ‘˜è¦</td></tr><tr><td></td><td><code>show interfaces</code></td><td>æŸ¥çœ‹æ¥å£è¯¦ç»†ä¿¡æ¯</td></tr><tr><td></td><td><code>show running-config</code></td><td>æŸ¥çœ‹å½“å‰è¿è¡Œé…ç½®</td></tr><tr><td></td><td><code>show startup-config</code></td><td>æŸ¥çœ‹å¯åŠ¨é…ç½®</td></tr><tr><td></td><td><code>show logging</code></td><td>æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</td></tr><tr><td></td><td><code>clear logging</code></td><td>æ¸…é™¤æ—¥å¿—ä¿¡æ¯</td></tr><tr><td><strong>å·¥ç¨‹é…ç½®3æ‹›</strong></td><td><code>no ip domain lookup</code></td><td>å…³é—­åŸŸåè§£æï¼ˆé˜²æ­¢æ•²é”™å‘½ä»¤æŸ¥è¯¢ï¼‰</td></tr><tr><td></td><td><code>line console 0</code></td><td>è¿›å…¥æ§åˆ¶å°çº¿è·¯0çš„é…ç½®æ¨¡å¼</td></tr><tr><td></td><td><code>logging synchronous</code></td><td>logå½“å‰æ˜¾ç¤ºä¿¡æ¯åŒæ­¥ï¼Œä¸ä¼šæ‰“æ–­æ§åˆ¶å°çš„è¾“å…¥</td></tr><tr><td></td><td><code>no exec - timeout</code></td><td>å…³é—­ä¼šè¯è¶…æ—¶ï¼Œé˜²æ­¢ä¸€æ®µæ—¶é—´ä¸æ“ä½œè‡ªåŠ¨é€€å‡º</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vlané—´é€šä¿¡(å•è‡‚è·¯ç”±ã€å¤šè‡‚è·¯ç”±ã€ä¸‰å±‚äº¤æ¢)é…ç½®å‘½ä»¤(æ€ç§‘+åä¸º)</title>
    <link href="/2024/11/20/vlan%E9%97%B4%E9%80%9A%E4%BF%A1(%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%E3%80%81%E5%A4%9A%E8%87%82%E8%B7%AF%E7%94%B1%E3%80%81%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2)%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/"/>
    <url>/2024/11/20/vlan%E9%97%B4%E9%80%9A%E4%BF%A1(%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1%E3%80%81%E5%A4%9A%E8%87%82%E8%B7%AF%E7%94%B1%E3%80%81%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2)%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4(%E6%80%9D%E7%A7%91+%E5%8D%8E%E4%B8%BA)/</url>
    
    <content type="html"><![CDATA[<h2 id="å•è‡‚è·¯ç”±"><a href="#å•è‡‚è·¯ç”±" class="headerlink" title="å•è‡‚è·¯ç”±"></a>å•è‡‚è·¯ç”±</h2><p>è·¯ç”±å™¨å•ä¸ªæ¥å£é…ç½®å¤šä¸ªå­æ¥å£ï¼Œæ‰“ä¸Švlanæ ‡ç­¾ï¼Œæ¨¡æ‹Ÿä¸‰å±‚äº¤æ¢æœºçš„vlanifæ¥å£åŠŸèƒ½</p><p>æ³¨æ„ï¼šè·¯ç”±å™¨ä¸å…·å¤‡vlanåˆ’åˆ†å’Œå¤„ç†èƒ½åŠ›ï¼Œä¸€ä¸ªç‰©ç†æ¥å£é»˜è®¤åªå¤„ç†ä¸€ä¸ªvlanç½‘ç»œï¼Œå› æ­¤éœ€è¦ä¸ºæ¯ä¸ªvlané…ç½®ä¸€ä¸ªç‰©ç†å­æ¥å£ä½œä¸ºvlanç½‘å…³åœ°å€ï¼Œè€Œä¸æ˜¯ç›´æ¥é…ç½®vlanæ¥å£ï¼ˆæŸäº›è·¯ç”±å™¨æ¥å£ä¸æ”¯æŒé…ç½®å­æ¥å£ï¼‰<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241119/image.361lo71l31.webp" alt="image"></p><table><thead><tr><th><strong>æè¿°</strong></th><th><strong>æ€ç§‘</strong></th><th><strong>åä¸º</strong></th></tr></thead><tbody><tr><td><strong>åˆ›å»º VLAN</strong></td><td>vlan 10 <br> vlan 20</td><td>vlan batch 10 20</td></tr><tr><td><strong>è®¾ç½® Access æ¥å£å¹¶æŒ‡å®š VLAN</strong></td><td>int f0&#x2F;1 <br> no shutdown <br> switchport mode access <br> switchport access vlan 10 <br> int f0&#x2F;2 <br> no shutdown <br> switchport mode access <br> switchport access vlan 20</td><td>int e0&#x2F;1 <br> port link-type access <br> port default vlan 10 <br> int e0&#x2F;2 <br> port link-type access <br> port default vlan 20</td></tr><tr><td><strong>è®¾ç½® Trunk æ¥å£å¹¶å…è®¸ VLAN æ•°æ®é€šè¿‡</strong></td><td>int f0&#x2F;3 <br> no shutdown <br> switchport mode trunk <br> switchport trunk allow vlan all</td><td>int e0&#x2F;3 <br> port link-type trunk <br> port trunk allow-pass vlan all</td></tr><tr><td><strong>è·¯ç”±å™¨è®¾ç½®å­æ¥å£</strong></td><td>int g0&#x2F;0&#x2F;0 <br> no shutdown <br> int g0&#x2F;0&#x2F;0.1 <br> encapsulation dot1Q 10 <br> ip add 192.168.10.254 255.255.255.0 <br> encapsulation dot1Q 20 <br> ip add 192.168.20.254 255.255.255.0 <br> ip routing</td><td>int g0&#x2F;0&#x2F;0.10 <br> dot1q termination vid 10 <br> arp broadcast enable <br> ip address 192.168.10.254 24 <br> int g0&#x2F;0&#x2F;0.20 <br> dot1q termination vid 20 <br> arp broadcast enable <br> ip address 192.168.20.254 24</td></tr></tbody></table><h2 id="å¤šè‡‚è·¯ç”±"><a href="#å¤šè‡‚è·¯ç”±" class="headerlink" title="å¤šè‡‚è·¯ç”±"></a>å¤šè‡‚è·¯ç”±</h2><p>è·¯ç”±å™¨å¤šä¸ªæ¥å£è¿æ¥äº¤æ¢æœºï¼Œé…ç½®ä½œä¸ºvlanç½‘å…³åœ°å€ï¼Œåˆ©ç”¨è·¯ç”±åŠŸèƒ½å®ç°ä¸åŒvlané—´é€šä¿¡<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241119/image.1vyohv7k8o.webp" alt="image"></p><table><thead><tr><th><strong>æè¿°</strong></th><th><strong>æ€ç§‘</strong></th><th><strong>åä¸º</strong></th></tr></thead><tbody><tr><td><strong>åˆ›å»º VLAN</strong></td><td>vlan 10 <br> vlan 20</td><td>vlan batch 10 20</td></tr><tr><td><strong>è®¾ç½® Access æ¥å£å¹¶æŒ‡å®š VLAN</strong></td><td>int f0&#x2F;1 <br> no shutdown <br> switchport mode access <br> switchport access vlan 10 <br> int f0&#x2F;2 <br> no shutdown <br> switchport mode access <br> switchport access vlan 20 <br> int f0&#x2F;3 <br> no shutdown <br> switchport mode access <br> switchport access vlan 10 <br> int f0&#x2F;4 <br> no shutdown <br> switchport mode access <br> switchport access vlan 20</td><td>int e0&#x2F;1 <br> port link-type access <br> port default vlan 10 <br> int e0&#x2F;2 <br> port link-type access <br> port default vlan 20 <br> int e0&#x2F;3 <br> port link-type access <br> port default vlan 10 <br> int e0&#x2F;4 <br> port link-type access <br> port default vlan 20</td></tr><tr><td><strong>è®¾ç½®è·¯ç”±å™¨æ¥å£ IP</strong></td><td>int g0&#x2F;0&#x2F;0 <br> no shutdown <br> ip add 192.168.10.254 255.255.255.0 <br> int g0&#x2F;0&#x2F;1 <br> no shutdown <br> ip add 192.168.20.254 255.255.255.0</td><td>int g0&#x2F;0&#x2F;0 <br> ip add 192.168.10.254 24 <br> int g0&#x2F;0&#x2F;1 <br> ip add 192.168.20.254 24</td></tr></tbody></table><h2 id="ä¸‰å±‚äº¤æ¢æœº"><a href="#ä¸‰å±‚äº¤æ¢æœº" class="headerlink" title="ä¸‰å±‚äº¤æ¢æœº"></a>ä¸‰å±‚äº¤æ¢æœº</h2><p>åˆ›å»ºvlanæ¥å£ï¼Œé…ç½®æ¥å£æ¥¼åœ°å€ä¸ºvlanç½‘å…³åœ°å€ï¼Œå®ç°ä¸åŒvlané—´é€šä¿¡</p><p>æ³¨æ„ï¼šæ€ç§‘ä¸‰å±‚äº¤æ¢æœºè¦å¼€å¯è·¯ç”±åŠŸèƒ½<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241119/image.99tdqmsj9i.webp" alt="image"></p><table><thead><tr><th><strong>æè¿°</strong></th><th><strong>æ€ç§‘</strong></th><th><strong>åä¸º</strong></th></tr></thead><tbody><tr><td><strong>åˆ›å»º VLAN</strong></td><td>vlan 10 <br> vlan 20</td><td>vlan batch 10 20</td></tr><tr><td><strong>è®¾ç½® Access æ¥å£å¹¶æŒ‡å®š VLAN</strong></td><td>int f0&#x2F;1 <br> no shutdown <br> switchport mode access <br> switchport access vlan 10 <br> int f0&#x2F;2 <br> no shutdown <br> switchport mode access <br> switchport access vlan 20 <br> int f0&#x2F;3 <br> no shutdown <br> switchport mode access <br> switchport access vlan 10 <br> int f0&#x2F;4 <br> no shutdown <br> switchport mode access <br> switchport access vlan 20</td><td>int e0&#x2F;1 <br> port link-type access <br> port default vlan 10 <br> int e0&#x2F;2 <br> port link-type access <br> port default vlan 20 <br> int e0&#x2F;3 <br> port link-type access <br> port default vlan 10 <br> int e0&#x2F;4 <br> port link-type access <br> port default vlan 20</td></tr><tr><td><strong>è®¾ç½® Trunk æ¥å£å¹¶å…è®¸ VLAN æ•°æ®é€šè¿‡</strong></td><td>int f0&#x2F;3 <br> no shutdown <br> switchport mode trunk <br> switchport trunk allow vlan all</td><td>int e0&#x2F;3 <br> port link-type trunk <br> port trunk allow-pass vlan all</td></tr><tr><td><strong>è®¾ç½®ä¸‰å±‚äº¤æ¢æœº VLAN æ¥å£</strong></td><td>vlan 10 <br> vlan 20 <br> int vlan 10 <br> ip add 192.168.10.254 255.255.255.0 <br> int vlan 20 <br> ip add 192.168.20.254 255.255.255.0</td><td>vlan batch 10 20 <br> int vlanif 10 <br> ip add 192.168.10.254 24 <br> int vlanif 20 <br> ip add 192.168.20.254 24</td></tr><tr><td><strong>å¯ç”¨ IP è·¯ç”±</strong></td><td>int f0&#x2F;1 <br> no shutdown <br> ip routing</td><td>&#x2F;</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘å·¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DHCPæ•…éšœæ’æŸ¥ï¼Œå¦èµ·ä¸€ä¸ªDHCPæœåŠ¡å™¨ç«Ÿç„¶è¿˜ä¸è¡Œï¼ŒåŸå› ç«Ÿæ˜¯ä¸‹çº§è·¯ç”±å™¨ä»¥ä¸‹çŠ¯ä¸Š</title>
    <link href="/2024/10/16/DHCP%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%EF%BC%8C%E5%8F%A6%E8%B5%B7%E4%B8%80%E4%B8%AADHCP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%9F%E7%84%B6%E8%BF%98%E4%B8%8D%E8%A1%8C%EF%BC%8C%E5%8E%9F%E5%9B%A0%E7%AB%9F%E6%98%AF%E4%B8%8B%E7%BA%A7%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BB%A5%E4%B8%8B%E7%8A%AF%E4%B8%8A/"/>
    <url>/2024/10/16/DHCP%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%EF%BC%8C%E5%8F%A6%E8%B5%B7%E4%B8%80%E4%B8%AADHCP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%9F%E7%84%B6%E8%BF%98%E4%B8%8D%E8%A1%8C%EF%BC%8C%E5%8E%9F%E5%9B%A0%E7%AB%9F%E6%98%AF%E4%B8%8B%E7%BA%A7%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BB%A5%E4%B8%8B%E7%8A%AF%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å®¶é‡Œå°ç±³è·¯ç”±å™¨å±€åŸŸç½‘ç½‘æ®µæ˜¯192.168.31.0&#x2F;24ï¼Œä½†å¾ˆå¤šè®¾å¤‡ç»å¸¸ä¼šè·å–åˆ°192.168.1.0&#x2F;24ç½‘æ®µçš„IPï¼Œå¯¼è‡´ä¸Šä¸äº†ç½‘ï¼Œè®©äººéå¸¸æ¼ç«ã€‚<br>ç»å¸¸ä¹‹å‰æœ‰æ®µæ—¶é—´æˆ‘è¯¯ä»¥ä¸ºæ˜¯å…‰çŒ«DHCPæœåŠ¡æ²¡æœ‰å½»åº•å…³é—­å¯¼è‡´çš„ï¼Œä½†æˆ‘æœ€è¿‘ä»”ç»†ç¢ç£¨äº†ä¸€ä¸‹æ‰æƒ³èµ·æ¥æˆ‘çš„å…‰çŒ«å…¶å®è®¾ç½®çš„ç½‘æ®µæ˜¯192.168.10.0&#x2F;24ç½‘æ®µï¼Œæ‰€ä»¥ä¸æ˜¯å…‰çŒ«çš„é—®é¢˜ï¼Œè€Œæ˜¯DHCPæœåŠ¡æ•…éšœã€‚</p><p>å®¶é‡Œè¿æ¥çš„è®¾å¤‡å¤§æ¦‚åœ¨20ä¸ªå·¦å³ï¼Œä¹‹å‰è£…å®½å¸¦çš„å¸ˆå‚…å°±è·Ÿæˆ‘è¯´ä¸è¦åœ¨å…‰çŒ«lanå£ç›´æ¥æ¥äº¤æ¢æœºï¼Œåº”è¯¥ä¹°ä¸ªæ€§èƒ½å¥½ä¸€ç‚¹çš„è·¯ç”±å™¨æ¥åšDHCPæœåŠ¡å™¨ï¼Œæˆ‘æƒ³æˆ‘çš„çº¢ç±³AX6000ä¸»è·¯ç”±åº”è¯¥è¶³å¤Ÿå¼ºäº†ï¼Œä½†è¿˜æ˜¯è«åå…¶å¦™çš„å‡ºç°è·å–ä¸åˆ°IPçš„æƒ…å†µï¼Œæå¾—äººéå¸¸ç«å¤§ï¼Œäºæ˜¯å†³å®šå¦èµ·ä¸€ä¸ªDHCPæœåŠ¡ã€‚</p><h2 id="å®‰è£…é…ç½®"><a href="#å®‰è£…é…ç½®" class="headerlink" title="å®‰è£…é…ç½®"></a>å®‰è£…é…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install isc-dhcp-server</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>/etc/dhcp/dhcpd.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># å®šä¹‰å…¨å±€é€‰é¡¹</span><br><span class="line">option domain-name-servers 223.5.5.5,223.6.6.6; # ä½¿ç”¨é˜¿é‡ŒDNSæœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line"># å®šä¹‰å­ç½‘</span><br><span class="line">subnet 192.168.31.0 netmask 255.255.255.0 &#123;</span><br><span class="line">    range 192.168.31.2 192.168.31.220; # æŒ‡å®šIPåœ°å€åˆ†é…èŒƒå›´</span><br><span class="line">    option routers 192.168.31.1; # æŒ‡å®šç½‘å…³</span><br><span class="line">    option subnet-mask 255.255.255.0; # æŒ‡å®šå­ç½‘æ©ç </span><br><span class="line">    option domain-name-servers 223.5.5.5,223.6.6.6; # æŒ‡å®šDNSæœåŠ¡å™¨</span><br><span class="line">    authoritative;</span><br><span class="line">&#125;</span><br><span class="line"># æ—¥å¿—</span><br><span class="line"># grep dhcp /var/log/syslog</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>/etc/default/isc-dhcp-server</code>,æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„å’Œç½‘ç»œæ¥å£åç§°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DHCPDv4_CONF=/etc/dhcp/dhcpd.conf</span><br><span class="line">INTERFACESv4=&quot;enp3s0&quot;</span><br><span class="line">INTERFACESv6=&quot;enp3s0&quot;</span><br></pre></td></tr></table></figure><p>è®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start isc-dhcp-server</span><br><span class="line">sudo systemctl enable isc-dhcp-server</span><br></pre></td></tr></table></figure><p>ç„¶åå…³é—­è·¯ç”±å™¨çš„DHCPæœåŠ¡</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>æ‰‹æœºå¿˜è®°æ­¤ç½‘ç»œï¼Œé‡æ–°è¿æ¥ï¼Œç»™æˆ‘æ°”ç¬‘äº†ï¼Œè·å–åˆ°äº†192.168.1.100çš„IPï¼Œæ ¹æœ¬ä¸æ˜¯æˆ‘çš„ç½‘æ®µ</p><p>æŸ¥çœ‹æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep dhcp /var/log/syslog</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2024-10-17T21:26:57.401204+08:00 firebat-server dhcpd[2087508]: DHCPDISCOVER from c2:02:42:75:22:f5 (CET-AL00) via enp3s0</span><br><span class="line">2024-10-17T21:26:57.467998+08:00 firebat-server dhcpd[2087508]: DHCPREQUEST for 192.168.1.100 (192.168.1.1) from c2:02:42:75:22:f5 via enp3s0: wrong network.</span><br><span class="line">2024-10-17T21:26:57.468319+08:00 firebat-server dhcpd[2087508]: DHCPNAK on 192.168.1.100 to c2:02:42:75:22:f5 via enp3s0</span><br><span class="line">2024-10-17T21:26:57.596163+08:00 firebat-server dhcpd[2087508]: DHCPREQUEST for 192.168.1.100 (192.168.1.1) from c2:02:42:75:22:f5 via enp3s0: wrong network.</span><br><span class="line">2024-10-17T21:26:57.596290+08:00 firebat-server dhcpd[2087508]: DHCPNAK on 192.168.1.100 to c2:02:42:75:22:f5 via enp3s0</span><br><span class="line">2024-10-17T21:26:58.402446+08:00 firebat-server dhcpd[2087508]: DHCPOFFER on 192.168.31.5 to c2:02:42:75:22:f5 (CET-AL00) via enp3s0</span><br><span class="line">2024-10-17T21:27:05.243708+08:00 firebat-server dhcpd[2087508]: DHCPREQUEST for 192.168.1.119 from 24:27:30:4d:30:38 via enp3s0: wrong network.</span><br><span class="line">2024-10-17T21:27:05.244090+08:00 firebat-server dhcpd[2087508]: DHCPNAK on 192.168.1.119 to 24:27:30:4d:30:38 via enp3s0</span><br><span class="line">2024-10-17T21:27:05.276043+08:00 firebat-server dhcpd[2087508]: DHCPDISCOVER from 24:27:30:4d:30:38 via enp3s0</span><br><span class="line">2024-10-17T21:27:05.297040+08:00 firebat-server dhcpd[2087508]: DHCPREQUEST for 192.168.1.119 (192.168.1.1) from 24:27:30:4d:30:38 via enp3s0: wrong network.</span><br><span class="line">2024-10-17T21:27:05.297336+08:00 firebat-server dhcpd[2087508]: DHCPNAK on 192.168.1.119 to 24:27:30:4d:30:38 via enp3s0</span><br><span class="line">2024-10-17T21:27:06.278249+08:00 firebat-server dhcpd[2087508]: DHCPOFFER on 192.168.31.195 to 24:27:30:4d:30:38 via enp3s0</span><br></pre></td></tr></table></figure><p>æ—¥å¿—æ˜¾ç¤ºæœ‰ä¸ª192.168.1.1çš„ç‹—ä¸œè¥¿TMDåœ¨ç§¯æåœ°ç»™æˆ‘åˆ†é…é”™è¯¯çš„IPï¼Œå¯¼è‡´æˆ‘çš„æ‰‹æœºä¼˜å…ˆè·å–åˆ°äº†192.168.1.1è¿™ä¸ªDHCPæœåŠ¡å™¨åˆ†é…çš„IPã€‚åœ¨æˆ‘å®¶çš„ç½‘ç»œä¸­ï¼Œè¿™åªæœ‰å¯èƒ½æ˜¯æˆ‘192.168.31.1ä¸»è·¯ç”±çš„ä¸‹çº§è·¯ç”±å™¨ã€‚</p><h2 id="æ’éšœ"><a href="#æ’éšœ" class="headerlink" title="æ’éšœ"></a>æ’éšœ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 192.168.1.1</span><br></pre></td></tr></table></figure><p>å¯ä»¥pingé€š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ­£åœ¨ Ping 192.168.1.1 å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:</span><br><span class="line">æ¥è‡ª 192.168.1.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=3ms TTL=251</span><br><span class="line">æ¥è‡ª 192.168.1.1 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=3ms TTL=251</span><br><span class="line"></span><br><span class="line">192.168.1.1 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:</span><br><span class="line">    æ•°æ®åŒ…: å·²å‘é€ = 2ï¼Œå·²æ¥æ”¶ = 2ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œ</span><br><span class="line">å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):</span><br><span class="line">    æœ€çŸ­ = 3msï¼Œæœ€é•¿ = 3msï¼Œå¹³å‡ = 3ms</span><br></pre></td></tr></table></figure><p>å®‰è£…å±€åŸŸç½‘æ‰«æå·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install arp-scan</span><br><span class="line">arp-scan 192.168.1.0/24</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Interface: enp3s0, type: EN10MB, MAC: 68:1d:ef:40:55:9a, IPv4: 192.168.31.31</span><br><span class="line">Starting arp-scan 1.10.0 with 256 hosts (https://github.com/royhills/arp-scan)</span><br><span class="line">192.168.1.1     00:5c:c2:45:87:4f       SHENZHEN MERCURY COMMUNICATION TECHNOLOGIES CO.,LTD.</span><br><span class="line">192.168.1.108   c8:bf:4c:31:5b:16       Beijing Xiaomi Mobile Software Co., Ltd</span><br><span class="line">192.168.1.113   a4:39:b3:ca:23:42       Beijing Xiaomi Mobile Software Co., Ltd</span><br><span class="line">192.168.1.217   b0:59:47:8e:f7:21       Shenzhen Qihu Intelligent Technology Company Limited</span><br><span class="line">192.168.1.119   24:27:30:4d:30:38       (Unknown)</span><br><span class="line"></span><br><span class="line">5 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.10.0: 256 hosts scanned in 1.929 seconds (132.71 hosts/sec). 5 responded</span><br></pre></td></tr></table></figure><p>æ˜æ˜¾æ˜¯ä¸ªæ°´æ˜Ÿè·¯ç”±å™¨</p><p>å†æ‰«ä¸€ä¸‹æˆ‘çš„31ç½‘æ®µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan 192.168.31.0/24</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Interface: enp3s0, type: EN10MB, MAC: 68:1d:ef:40:55:9a, IPv4: 192.168.31.31</span><br><span class="line">Starting arp-scan 1.10.0 with 256 hosts (https://github.com/royhills/arp-scan)</span><br><span class="line">192.168.31.1    24:cf:24:5d:64:da       Beijing Xiaomi Mobile Software Co., Ltd</span><br><span class="line">192.168.31.2    b0:59:47:8e:f7:21       Shenzhen Qihu Intelligent Technology Company Limited</span><br><span class="line">192.168.31.32   80:fa:5b:4e:ba:96       CLEVO CO.</span><br><span class="line">192.168.31.5    c2:02:42:75:22:f5       (Unknown: locally administered)</span><br><span class="line">192.168.31.6    d4:35:38:14:4f:4f       Beijing Xiaomi Mobile Software Co., Ltd</span><br><span class="line">192.168.31.3    68:ab:bc:ed:68:aa       Beijing Xiaomi Mobile Software Co., Ltd</span><br><span class="line">192.168.31.72   d4:bb:e6:64:60:29       Huawei Device Co., Ltd.</span><br><span class="line">192.168.31.34   b8:ab:62:ae:a5:a3       Hui Zhou Gaoshengda Technology Co.,LTD</span><br><span class="line">192.168.31.100  58:11:22:4a:95:91       ASUSTek COMPUTER INC.</span><br><span class="line">192.168.31.166  50:88:11:d7:66:b9       (Unknown)</span><br><span class="line">192.168.31.194  44:e6:4a:53:48:ac       (Unknown)</span><br><span class="line">192.168.31.80   4c:11:ae:01:22:29       Espressif Inc.</span><br><span class="line">192.168.31.130  50:2c:c6:09:f2:08       GREE ELECTRIC APPLIANCES, INC. OF ZHUHAI</span><br><span class="line"></span><br><span class="line">14 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.10.0: 256 hosts scanned in 1.940 seconds (131.96 hosts/sec). 13 responded</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰192.168.1.1é‚£ä¸ªMACåœ°å€çš„IPï¼Œæˆ‘éƒ½ä¸çŸ¥é“ä»–æ˜¯æ€ä¹ˆä¸Šç½‘çš„ã€‚</p><p>ç¥å¥‡çš„æ˜¯æœ‰ä¸€ä¸ªMACä¸º<code>b0:59:47:8e:f7:21</code>çš„è®¾å¤‡ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªç½‘æ®µçš„IPï¼š192.168.31.2å’Œ192.168.1.217 ï¼Œç”Ÿäº§å‚å•†æ˜¯Shenzhen Qihu Intelligent Technology Company Limitedï¼Œqihuå¥‡è™åº”è¯¥æ˜¯360çš„ä¸œè¥¿ï¼Œåº”è¯¥æ˜¯æˆ‘çš„æ— çº¿æ‘„åƒå¤´ï¼Œç‚¹å¼€æ‘„åƒå¤´appä¸€çœ‹IPæœç„¶æ˜¯,å°å°æ‘„åƒå¤´è·å–äº†ä¸¤ä¸ªIPï¼Œè®¾è®¡çš„è¿˜æ¯”è¾ƒèªæ˜ï¼Œæœ‰ä¸¤ä¸ªDHCPæœåŠ¡å™¨å°±é…ç½®ä¸¤ä¸ªIPï¼Œè¿™æ ·èƒ½ä¸Šç½‘çš„æ¦‚ç‡é«˜å¾—å¤šï¼Œå…¶ä»–è®¾å¤‡è¦æ˜¯æœ‰è¿™ä¹ˆèªæ˜å°±å¥½äº†ï¼Œä¸æ„§æ˜¯360ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘æ‰‹æœºç™»å½•åˆ°å†…ç½‘æœºå™¨å®å¡”é¢æ¿çš„ç»ˆç«¯ï¼Œä¸€æ ¹æ ¹æ‹”ç½‘çº¿æ’æŸ¥ï¼Œæ¯æ‹”ä¸€æ¬¡å°±è¾“å…¥<code>arp-scan 192.168.1.0/24</code>çœ‹ä¸€ä¸‹192.168.1.1é‚£ä¸ªè®¾å¤‡è¿˜åœ¨ä¸åœ¨ã€‚æœç„¶ï¼Œä¸¤ä¸‰ä¸‹å°±è¢«æˆ‘æ‰¾åˆ°äº†ç½ªé­ç¥¸é¦–ã€‚</p><p>ä¸€çœ‹æœç„¶æ˜¯æ°´æ˜Ÿè·¯ç”±å™¨ï¼Œç™»ä¸Šå»ç®¡ç†åœ°å€ä¹‹åå‘ç°ä¸Šç½‘æ–¹å¼æ˜¯å®½å¸¦ä¸Šç½‘â€¦ï¼Œè¿˜æ”¹ä¸äº†è®¾ç½®ï¼Œçœ‹äº†ä¸‹ç½‘å£ï¼Œç½‘çº¿æ’åœ¨äº†LANå£â€¦ï¼Œæˆ‘éƒ½æ— è¯­äº†ï¼Œæ€ªä¸å¾—ä¼šä»¥ä¸‹çŠ¯ä¸Šï¼Œä»–ä»¥ä¸ºæˆ‘æ˜¯ä»–çš„ä¸‹çº§å‘¢ã€‚</p><p>ç½‘çº¿æ’äº†WANå£ä¹‹åå¯ä»¥è®¾ç½®è‡ªåŠ¨è·å–IPï¼Œè¿™æ—¶å€™å°±æ­£å¸¸äº†ã€‚</p><p>è¿™ä¹Ÿæ„å‘³ç€æˆ‘çš„è·¯ç”±å™¨DHCPå¯ä»¥é‡æ–°å¼€å¯ï¼Œå†…ç½‘ubuntuçš„DHCPå¯ä»¥å…³é—­ã€‚ä½†æ˜¯ä¸æ”¹äº†ï¼Œå…ˆç”¨ç€ï¼Œæ€»æ¯”è·¯ç”±å™¨çš„DHCPæœåŠ¡èƒ½åŠ›å¼ºã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DHCP</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœ¬åœ°å¯é“äº‘é€šè¿‡AlistæŒ‚è½½å¤¸å…‹äº‘ç›˜ï¼Œå®ç°ç½‘ç›˜ç»Ÿä¸€å…¥å£ç®¡ç†</title>
    <link href="/2024/10/02/%E6%9C%AC%E5%9C%B0%E5%8F%AF%E9%81%93%E4%BA%91%E9%80%9A%E8%BF%87Alist%E6%8C%82%E8%BD%BD%E5%A4%B8%E5%85%8B%E4%BA%91%E7%9B%98%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%9B%98%E7%BB%9F%E4%B8%80%E5%85%A5%E5%8F%A3%E7%AE%A1%E7%90%86/"/>
    <url>/2024/10/02/%E6%9C%AC%E5%9C%B0%E5%8F%AF%E9%81%93%E4%BA%91%E9%80%9A%E8%BF%87Alist%E6%8C%82%E8%BD%BD%E5%A4%B8%E5%85%8B%E4%BA%91%E7%9B%98%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%9B%98%E7%BB%9F%E4%B8%80%E5%85%A5%E5%8F%A3%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç›®å‰åœ¨miniä¸»æœºä¸Šéƒ¨ç½²äº†å¯é“äº‘æœåŠ¡ï¼Œå¯ä»¥åœ¨å…¬ç½‘é€šè¿‡ç½‘é¡µè®¿é—®ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œçœ‹åˆ°ä»–æœ‰ä¸ªåŠŸèƒ½æ˜¯ç½‘ç»œæŒ‚è½½ï¼Œäºæ˜¯å°±æƒ³ç€èƒ½ä¸èƒ½æŠŠå¤¸å…‹äº‘ç›˜æŒ‚è½½ä¸Šå»å®ç°ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·å°±çœå»äº†å¤¸å…‹ç½‘ç›˜å®¢æˆ·ç«¯ã€‚æœäº†ä¸€ä¸‹æ²¡æœ‰èƒ½ç›´æ¥æŒ‚è½½å¤¸å…‹ç½‘ç›˜åˆ°å¯é“äº‘çš„æ–¹æ³•ï¼Œå€’æ˜¯æœ‰å¾ˆå¤šæŠŠAlistæŒ‚è½½åˆ°å¯é“äº‘çš„æ–¹æ¡ˆï¼Œè€ŒAlistæœ¬èº«å°±æ˜¯ä¸€ç§å¯ä»¥æŒ‚è½½å„ç§äº‘ç›˜çš„ç®¡ç†ç¥å™¨ï¼Œäºæ˜¯å°±æœ‰äº†æ›²çº¿æ•‘å›½æ–¹æ¡ˆï¼šå…ˆæŠŠå¤¸å…‹ç½‘ç›˜æŒ‚è½½åˆ°Alistä¸Šï¼Œå†æŠŠAlistæŒ‚è½½åˆ°å¯é“äº‘ä¸Šã€‚</p><h2 id="å®‰è£…éƒ¨ç½²Alist"><a href="#å®‰è£…éƒ¨ç½²Alist" class="headerlink" title="å®‰è£…éƒ¨ç½²Alist"></a>å®‰è£…éƒ¨ç½²Alist</h2><p>é»˜è®¤å®‰è£…ç›®å½•ä¸º<code>/opt/alist</code>ï¼Œä¸éœ€è¦ç›®å½•å‚æ•°ï¼Œå¦‚æœè¦è‡ªå®šä¹‰ç›®å½•ï¼Œå¢åŠ ä¸€ä¸ªç›®å½•å‚æ•°ï¼Œä»¥ä¸‹ä¸ºå®‰è£…åˆ°<code>/root/alist</code>çš„ç¤ºä¾‹ï¼Œæ³¨æ„ï¼šå¿…é¡»ä¸ºç»å¯¹è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install</span></span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s install /root</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">update</span></span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s update /root</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Uninstall</span></span><br><span class="line">curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; | bash -s uninstall /root</span><br></pre></td></tr></table></figure><p>Alistæ˜¯å¯ä»¥ä½œä¸ºsystemctlæœåŠ¡ç®¡ç†çš„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start alist</span><br><span class="line">systemctl enable alist</span><br><span class="line">systemctl stop alist</span><br><span class="line">systemctl status alist</span><br><span class="line">systemctl restart alist</span><br></pre></td></tr></table></figure><p>å…ˆcdåˆ°alistæ‰€åœ¨ç›®å½•:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /root/alist</span><br></pre></td></tr></table></figure><p>è®¾ç½®æ–°å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./alist admin set NEW_PASSWORD</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹&#x2F;root&#x2F;alist&#x2F;data&#x2F;config.jsoné…ç½®æ–‡ä»¶,ä¿®æ”¹ç½‘é¡µæœåŠ¡ç«¯å£å·ï¼Œé»˜è®¤5244</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;http_port&quot;: 5244,</span><br></pre></td></tr></table></figure><h2 id="æŒ‚è½½å¤¸å…‹ç½‘ç›˜åˆ°Alist"><a href="#æŒ‚è½½å¤¸å…‹ç½‘ç›˜åˆ°Alist" class="headerlink" title="æŒ‚è½½å¤¸å…‹ç½‘ç›˜åˆ°Alist"></a>æŒ‚è½½å¤¸å…‹ç½‘ç›˜åˆ°Alist</h2><h3 id="è·å–å¤¸å…‹ç½‘ç›˜cookie"><a href="#è·å–å¤¸å…‹ç½‘ç›˜cookie" class="headerlink" title="è·å–å¤¸å…‹ç½‘ç›˜cookie"></a>è·å–å¤¸å…‹ç½‘ç›˜cookie</h3><p>pan.quark.cn,æŒ‰F12æˆ–è€…å³é”®æ£€æŸ¥ï¼Œé€‰æ‹©ç½‘ç»œï¼Œç„¶ååˆ·æ–°ç½‘é¡µï¼Œæœç´¢sortï¼ŒåŒå‡»sortæ‰€åœ¨ç½‘ç»œè¯·æ±‚ï¼Œæ‰¾åˆ°cookieï¼Œå®Œæ•´å¤åˆ¶<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.6wqpc6izfx.png" alt="image"></p><h3 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h3><p>è®¿é—®æœåŠ¡å™¨IP:5244,ç”¨adminå’Œä¸Šé¢è®¾ç½®çš„å¯†ç ç™»å½•ï¼Œç‚¹å‡»ç½‘é¡µåº•éƒ¨çš„ç®¡ç†ï¼Œç‚¹å‡»å·¦ä¾§æ å­˜å‚¨ï¼Œç‚¹å‡»æ·»åŠ ï¼Œé©±åŠ¨é€‰å¤¸å…‹ï¼ŒWebDAV ç­–ç•¥é€‰æœ¬åœ°ä»£ç†ï¼ŒæŒ‚è½½è·¯å¾„éšä¾¿å–ä¸ªåå­—ï¼Œç”±äºæˆ‘ä¸æ‰“ç®—æŒ‚è½½å…¶ä»–ç½‘ç›˜ï¼Œæ‰€ä»¥å¡«äº†æ ¹ç›®å½•&#x2F;ï¼Œç„¶åç²˜è´´cookieï¼Œå®Œæˆ</p><p>å›åˆ°Alisté¦–é¡µIP:5244,å¯ä»¥çœ‹åˆ°å¤¸å…‹ç½‘ç›˜å·²ç»è¢«æŒ‚è½½</p><h2 id="æŒ‚è½½Aliståˆ°å¯é“äº‘"><a href="#æŒ‚è½½Aliståˆ°å¯é“äº‘" class="headerlink" title="æŒ‚è½½Aliståˆ°å¯é“äº‘"></a>æŒ‚è½½Aliståˆ°å¯é“äº‘</h2><p>ç‚¹å‡»ç½‘ç»œæŒ‚è½½ï¼Œæ–°å¢ç½‘ç»œæŒ‚è½½ï¼Œwebdav urlæ˜¯http[s]:&#x2F;&#x2F;domain:port&#x2F;dav&#x2F;ï¼Œå³åœ¨AlistæœåŠ¡åœ°å€åé¢åŠ &#x2F;dav,å¡«å…¥Alistçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œä¿å­˜å³å¯<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.9rjdhz92fp.jpg" alt="image"><br>å¯ä»¥æŠŠwebdavçš„æ–‡ä»¶å¤¹å‘é€ä¸€ä¸ªå¿«æ·æ–¹å¼åˆ°æ¡Œé¢ï¼Œç„¶åé‡å‘½åå¿«æ·æ–¹å¼<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.39l5op1q1h.jpg" alt="image"><br>è¿™æ ·å°±å¯ä»¥åœ¨å¯é“äº‘æ¡Œé¢æ‰“å¼€å¤¸å…‹ç½‘ç›˜çš„å†…å®¹<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.1hs6tshze0.jpg" alt="image"><br>å¦‚æœä¸Šé¢çš„ä¸¤æ¬¡æŒ‚è½½è·¯å¾„éƒ½å†™æˆ&#x2F;ï¼Œé‚£ä¹ˆæ‰“å¼€è¿™ä¸ªå¿«æ·æ–¹å¼å°±æ˜¯å¤¸å…‹ç½‘ç›˜çš„æ ¹ç›®å½•</p><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>ä»å¯é“äº‘å…¥å£è¿›å…¥å¤¸å…‹ç½‘ç›˜ï¼Œä¸‹è½½é€Ÿåº¦è¢«é™åˆ¶åœ¨20MB&#x2F;så·¦å³ï¼Œä¸Šä¼ æœ‰40MB&#x2F;s</p><p>å¯é“äº‘æœ¬åœ°æ–‡ä»¶å¤¹ä¸Šä¼ ä¸‹è½½å‡å¯ä»¥è·‘æ…¢å¸¦å®½<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.361jqz93ox.jpg" alt="image"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>äº‘ç›˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†…ç½‘ç©¿é€:è·¯ç”±å™¨æ‹¨å·+ç«¯å£è½¬å‘+DDNSå®ç°è‡ªå®šä¹‰åŸŸåè®¿é—®å†…ç½‘æœåŠ¡å™¨</title>
    <link href="/2024/10/01/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8B%A8%E5%8F%B7+%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91+DDNS%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2024/10/01/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8B%A8%E5%8F%B7+%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91+DDNS%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»å¸¸ç”¨å„ç§äº‘ç›˜ï¼Œä½†æ„Ÿè§‰è¿˜æ˜¯ä¸å¤Ÿå¥½ï¼š</p><ul><li>1.æ–‡ä»¶åœ¨åˆ«äººæœåŠ¡å™¨ä¸Šç»ˆç©¶ä¸å¯é ï¼Œæœ€è¿‘é˜¿é‡Œäº‘ç›˜è¿˜æ›å‡ºéšç§æ–‡ä»¶æ³„éœ²é—®é¢˜</li><li>2.è¿™äº›ä¸ªå…è´¹äº‘ç›˜åˆæ˜¯é™é€Ÿåˆæ˜¯è¦ä¸‹è½½å®¢æˆ·ç«¯æ‰èƒ½ç”¨ï¼Œå¾ˆéº»çƒ¦ï¼Œè¿™äº›ä¸ªåƒåœ¾å®¢æˆ·ç«¯ä¸€ä¸ªéƒ½ä¸æƒ³è£…</li></ul><p>äºæ˜¯å°±æƒ³æä¸€ä¸ªç§æœ‰äº‘ç›˜ï¼Œç”µè„‘ç«¯ç›´æ¥ç”¨ç½‘é¡µè®¿é—®ã€‚</p><p>æ­£å¥½ä¹‹å‰ä¹°çš„å›½å†…çš„äº‘æœåŠ¡å™¨åˆ°æœŸäº†ï¼Œç”²éª¨æ–‡äº‘ä¸Šå…è´¹çš„ä¸¤å°æœåŠ¡å™¨å›½å†…è®¿é—®åˆå¾ˆæ…¢ï¼Œåšä¸äº†ä»€ä¹ˆä¸œè¥¿ï¼Œäºæ˜¯ä¹°äº†ä¸ªä½åŠŸè€—è¿·ä½ ä¸»æœºï¼Œç›´æ¥æŠŠç‰©ç†æœåŠ¡å™¨æ”¾å®¶é‡Œï¼Œç‰¢ç‰¢æŒæ¡æ‰€æœ‰æƒï¼Œè¿˜èƒ½æŠŠä¸€äº›å°æœåŠ¡è¿ç§»è¿‡æ¥ã€‚</p><p>ç ”ç©¶äº†ä¸€ä¸‹å¼€æºçš„ä¸€äº›äº‘ç›˜ç³»ç»Ÿï¼Œè¦ä¹ˆåŠŸèƒ½å¾ˆå¤æ‚ï¼Œè¦ä¹ˆUIå¤ªéš¾çœ‹æˆ–è€…æ²¡æœ‰å®‰å“å®¢æˆ·ç«¯å¯ç”¨ï¼Œè¦ä¹ˆæ˜¯è‹±æ–‡æ–‡æ¡£ä¸æƒ³çœ‹ã€‚</p><p>æœ€åå†³å®šç”¨å›½å†…çš„ä¸€ä¸ªä¸å¼€æºçš„ç½‘ç›˜ç³»ç»Ÿâ€œå¯é“äº‘â€ï¼Œç•Œé¢çœ‹èµ·æ¥æ¯”è¾ƒèˆ’æœï¼Œä¹Ÿæœ‰è®¸å¤šæ’ä»¶å¯ä»¥ç”¨ï¼ˆåœ¨çº¿é¢„è§ˆè§†é¢‘å›¾ç‰‡ã€å›¾ç‰‡ç¼–è¾‘ã€åœ¨çº¿æ–‡æ¡£ã€markdownç¼–è¾‘å™¨ç­‰ç­‰å¾ˆæ–¹ä¾¿ï¼‰ï¼Œå¯ä»¥å¤–é“¾åˆ†äº«ï¼Œä¸éœ€è¦ä¸‹è½½å®¢æˆ·ç«¯ï¼Œç½‘é¡µå¯ä»¥ç›´æ¥è®¿é—®ï¼Œæ”¯æŒç”¨æˆ·ç®¡ç†ï¼Œè€Œä¸”å¯ä»¥ç”¨å®å¡”é¢æ¿ä¸€é”®éƒ¨ç½²</p><p>äº‘ç›˜æ˜¯éƒ¨ç½²å¥½äº†ï¼Œå†…ç½‘è®¿é—®ä¸€ç‚¹æ¯›ç—…æ²¡æœ‰ï¼Œé—®é¢˜æ˜¯å…¬ç½‘åˆ°åº•åº”è¯¥æ€ä¹ˆè®¿é—®ï¼Ÿ</p><p>æ€»çš„æ¥è¯´ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>1.ä¾èµ–ä¸­è½¬æœåŠ¡å™¨çš„ï¼Œç¼ºç‚¹ï¼šæ…¢ï¼Œæ•°æ®ç»è¿‡åˆ«äººæ‰‹ä¸Š<ul><li>ä¸€äº›å†…ç½‘ç©¿é€æœåŠ¡å•†ï¼ŒèŠ±ç”Ÿå£³ä¹‹ç±»çš„ï¼Œä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¿˜æœ‰ä¸€ä¸ªå›½å†…çš„chmlfrp<code>https://appel.chmlfrp.cn/</code>, å¸¦å®½å¯ä»¥ç»™8Mï¼Œç®—æ˜¯å¾ˆå¥½äº†</li><li>æˆ–è€…å„ç§frpæœåŠ¡ï¼Œéƒ½éœ€è¦ä¸€å°äº‘æœåŠ¡å™¨è¿›è¡Œè½¬å‘ï¼Œä¹Ÿæœ‰å…è´¹æä¾›æœåŠ¡çš„ï¼Œä¹Ÿæ˜¯æ…¢</li><li>ä¹Ÿè¯•è¿‡Cloudflareçš„Tunnelï¼Œç›´æ¥å»ºç«‹éš§é“ï¼Œè€Œä¸”é»˜è®¤å¼€å¯SSLï¼Œè¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œä½†æ˜¯åœ¨å›½å†…Cloudflareçš„é€Ÿåº¦å®åœ¨æ˜¯ï¼Œä¸€ä¸ªå­—ï¼Œè¶…çº§æ…¢ï¼</li></ul></li><li>2.P2Pçš„æ¨¡å¼ï¼Œç”¨å…¬ç½‘IPé€šè¿‡ç«¯å£æ˜ å°„è¿æ¥å†…ç½‘è®¾å¤‡ï¼Œå¿«çš„è¦å‘½ï¼Œç¼ºç‚¹æ˜¯éº»çƒ¦ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›é—®é¢˜ï¼š<ul><li>è¿è¥å•†é€šå¸¸ä¸ä¼šåˆ†é…å…¬ç½‘IPï¼Œå¾ˆéš¾ç”³è¯·</li><li>æœ‰å…¬ç½‘IPä¹Ÿæ²¡ç”¨ï¼Œå…‰çŒ«é˜²ç«å¢™é»˜è®¤å¼€å¯æ— æ³•å…³é—­ï¼Œå¹¶ä¸”ç¦ç”¨pingï¼Œå¹¶ä¸”ç«¯å£æ˜ å°„åŠŸèƒ½é˜‰å‰²æ²¡æ³•ç”¨ï¼Œå¿…é¡»æŠŠå…‰çŒ«æ”¹æˆæ¡¥æ¥æ¨¡å¼ï¼Œæ”¹ç”¨è·¯ç”±å™¨æ‹¨å·</li><li>å³ä½¿å…‰çŒ«èƒ½ç«¯å£æ˜ å°„ä¹Ÿæ²¡ç”¨ï¼Œå…‰çŒ«çš„DHCPæœåŠ¡å™¨éå¸¸åƒåœ¾ï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨è·¯ç”±å™¨æ‰¿æ‹…DHCPæœåŠ¡å™¨ï¼Œè¿™æ ·çš„è¯å†…ç½‘è®¾å¤‡é€šå¸¸å’Œå…‰çŒ«ä¸åœ¨åŒä¸€ç½‘æ®µï¼Œå³ä½¿å…‰çŒ«å¯ä»¥åšç«¯å£è½¬å‘ï¼Œä¹Ÿéœ€è¦è·¯ç”±å™¨å’Œå…‰çŒ«è½¬å‘ä¸¤æ¬¡ï¼Œæœ‰ç‚¹å¤æ‚</li><li>ç”¨è·¯ç”±å™¨æ‹¨å·ä¹Ÿæ²¡ç”¨ï¼Œè·¯ç”±å™¨æœ¬èº«ä¹Ÿæœ‰é˜²æŠ¤å¢™ï¼Œå¯èƒ½æ²¡æ³•å…³é—­</li></ul></li></ul><h2 id="å…‰çŒ«æ”¹æ¡¥æ¥ç”¨è·¯ç”±å™¨æ‹¨å·"><a href="#å…‰çŒ«æ”¹æ¡¥æ¥ç”¨è·¯ç”±å™¨æ‹¨å·" class="headerlink" title="å…‰çŒ«æ”¹æ¡¥æ¥ç”¨è·¯ç”±å™¨æ‹¨å·"></a>å…‰çŒ«æ”¹æ¡¥æ¥ç”¨è·¯ç”±å™¨æ‹¨å·</h2><p>è¿™ä¸€æ­¥è”ç³»è¿è¥å•†è§£å†³ï¼Œæ”¹æ¡¥æ¥åè‡³å°‘è§£å†³äº†å…‰çŒ«é˜²ç«å¢™æ— æ³•å…³é—­çš„é—®é¢˜ï¼Œè·¯ç”±å™¨èƒ½å¤Ÿè®¾ç½®ç«¯å£è½¬å‘äº†</p><h2 id="è·¯ç”±å™¨è®¾ç½®ç«¯å£è½¬å‘"><a href="#è·¯ç”±å™¨è®¾ç½®ç«¯å£è½¬å‘" class="headerlink" title="è·¯ç”±å™¨è®¾ç½®ç«¯å£è½¬å‘"></a>è·¯ç”±å™¨è®¾ç½®ç«¯å£è½¬å‘</h2><p>æˆ‘ç”¨çš„æ˜¯å°ç±³è·¯ç”±å™¨ï¼Œè‡ªå¸¦ç«¯å£è½¬å‘åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸€ä¸ªDMZåŠŸèƒ½ï¼Œå¯ä»¥æŠŠå†…ç½‘æŸä¸ªè®¾å¤‡çš„æ‰€æœ‰ç«¯å£æ˜ å°„åˆ°è·¯ç”±å™¨å…¬ç½‘IPçš„ç«¯å£ä¸Šï¼Œæ­¤æ—¶è®¿é—®å…¬ç½‘IP:ç«¯å£ç­‰åŒäºè®¿é—®å†…ç½‘IP:ç«¯å£ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼šå…¬ç½‘IPçš„80å’Œ443ç«¯å£æ˜¯è¢«ç¦ç”¨çš„ï¼Œç”¨è¿™ä¸ªç«¯å£è½¬å‘ä¸ä¼šç”Ÿæ•ˆ</p><p>é«˜çº§è®¾ç½®-ç«¯å£è½¬å‘ï¼Œè¿™æ ·ä¼šæš´éœ²æ‰€æœ‰ç«¯å£ï¼Œå› æ­¤è¦åœ¨å†…ç½‘æœåŠ¡å™¨ä¸Šè®¾ç½®é˜²ç«å¢™<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/image.8l027n0s5w.jpg" alt="image"><br>æ­¤æ—¶åœ¨ å¸¸ç”¨è®¾ç½®-ä¸Šç½‘è®¾ç½® æŸ¥çœ‹è·¯ç”±å™¨å…¬ç½‘IPï¼Œåœ¨åé¢æ·»åŠ å†…ç½‘æœåŠ¡çš„ç«¯å£å·ï¼Œå³å¯è®¿é—®å†…ç½‘æœåŠ¡ï¼Œæˆ‘è¿™é‡Œipv4å’Œipv6ï¼ˆéœ€è¦è·¯ç”±å™¨å¼€å¯ipv6åŠŸèƒ½ï¼‰éƒ½å¯ä»¥<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/image.231uebwkjo.jpg" alt="image"></p><h2 id="è®¾ç½®DDNS"><a href="#è®¾ç½®DDNS" class="headerlink" title="è®¾ç½®DDNS"></a>è®¾ç½®DDNS</h2><p>è¿™æ ·è®¾ç½®å®Œæˆåå°±åªå‰©ä¸‹ä¸€ä¸ªé—®é¢˜äº†ï¼Œè¿è¥å•†ç»™çš„å…¬ç½‘IPæ˜¯ä¼šå˜çš„ï¼Œå³ä½¿ç½‘ç»œä¸€ç›´åœ¨ç”¨ä¸ä¸­æ–­ï¼Œä¹Ÿä¼šéšæœºæ”¹å˜ï¼Œå…¬ç½‘ipv6åœ°å€ä¸ç¡®å®šä¼šä¸ä¼šå˜ï¼Œç›®å‰æ²¡çœ‹åˆ°å˜åŒ–ï¼Œä½†å§‘ä¸”è®¤ä¸ºä»–ä¹Ÿæ˜¯ä¼šå˜çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°DDNSäº†ï¼Œ</p><p>DDNSï¼ˆåŠ¨æ€åŸŸåç³»ç»Ÿï¼‰æ˜¯ä¸€ç§æœåŠ¡ï¼Œå®ƒå…è®¸ä½ å°†åŠ¨æ€IPåœ°å€æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„åŸŸåä¸Šã€‚è¿™æ ·ï¼Œå³ä½¿ä½ çš„IPåœ°å€å˜åŒ–ï¼Œä½ ä¹Ÿèƒ½é€šè¿‡åŸŸåæ¥è®¿é—®ä½ çš„æœåŠ¡å™¨æˆ–æœåŠ¡ã€‚DDNSæœåŠ¡å¯¹äºå®¶åº­ç”¨æˆ·å’Œå°å‹ä¼ä¸šå°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºä»–ä»¬é€šå¸¸æ²¡æœ‰é™æ€IPåœ°å€ï¼Œä½†å¯èƒ½éœ€è¦è¿œç¨‹è®¿é—®å®¶ä¸­æˆ–åŠå…¬å®¤çš„ç½‘ç»œèµ„æºã€‚</p><p>å®ç°DDNSçš„æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šï¼Œæœ‰å¾ˆå¤šDDNSæœåŠ¡å•†å¯ä»¥æä¾›ç›¸å…³æœåŠ¡ï¼Œæˆ‘æ²¡æœ‰ç”¨è¿™äº›æœåŠ¡ï¼Œè€Œæ˜¯åˆ©ç”¨äº†Cloudflareçš„API,å®šæ—¶ä¸»åŠ¨æ›´æ–°DNSè®°å½•ï¼Œéœ€è¦ç”³è¯·APIä»¤ç‰Œ<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240930192049.3godidonsg.jpg" alt="å¾®ä¿¡æˆªå›¾_20240930192049"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240930192159.8l027norme.jpg" alt="å¾®ä¿¡æˆªå›¾_20240930192159"><br>ä»£ç å¦‚ä¸‹ï¼Œå®ç°çš„åŠŸèƒ½æ˜¯æ¯éš”10åˆ†é’Ÿè‡ªåŠ¨è¯»å–ä¸€æ¬¡è®¾å¤‡çš„å…¬ç½‘IPï¼ˆæˆ‘è¿™é‡Œè®¾å¤‡æ˜¯æ²¡æœ‰å…¬ç½‘ipv4åœ°å€çš„ï¼Œç”±äºå¼€å¯äº†ç«¯å£è½¬å‘ï¼Œå› æ­¤åªè¦è·å–è·¯ç”±å™¨çš„å…¬ç½‘IPå³å¯ï¼Œå¦‚æœè·¯ç”±å™¨æ²¡æœ‰å…¬ç½‘IPv4åœ°å€ï¼Œå¯ä»¥ç”¨IPv6åœ°å€ï¼‰å¹¶è°ƒç”¨APIå¯¹DNSè®°å½•è¿›è¡Œæ›´æ–°ï¼Œæˆ‘è¿™é‡ŒåŒæ—¶æ·»åŠ äº†ipv4å’Œipv6åœ°å€åˆ°pan.xinhaojin.topï¼Œå®¢æˆ·ç«¯å¦‚æœæ”¯æŒipv6ä¼šä¼˜å…ˆä½¿ç”¨ipv6è®¿é—®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># é…ç½®æ—¥å¿—</span></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    filename=<span class="string">&quot;/root/DdnsOnCloudFlare/ddns.log&quot;</span>,</span><br><span class="line">    level=logging.INFO,</span><br><span class="line">    <span class="built_in">format</span>=<span class="string">&quot;%(asctime)s [%(levelname)s] %(message)s&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cloudflare é…ç½®</span></span><br><span class="line">ZONE_ID=<span class="string">&#x27;209367eb6xxxx67741f291252&#x27;</span></span><br><span class="line">RECORD_NAME=<span class="string">&#x27;pan.xinhaojin.top&#x27;</span></span><br><span class="line">API_KEY=<span class="string">&#x27;zRImW_Rxxxxxx_ecoRTzeXKR4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å…¬ç½‘ IPv4 åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_ipv4_address</span>():</span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿæµè§ˆå™¨çš„ User-Agent</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://tool.lu/ip/&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># å‘é€è¯·æ±‚</span></span><br><span class="line">        response = requests.get(url, headers=headers, timeout=<span class="number">10</span>)</span><br><span class="line">        <span class="comment"># æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="comment"># æå–åŒ…å« IP åœ°å€çš„è¡Œ</span></span><br><span class="line">            pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;ä½ çš„å¤–ç½‘IPåœ°å€æ˜¯ï¼š([0-9.]+)&lt;/p&gt;&#x27;</span>)</span><br><span class="line">            <span class="keyword">match</span> = pattern.search(response.text)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">                <span class="comment"># æå– IP åœ°å€</span></span><br><span class="line">                ip_address = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> ip_address</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                logging.error(<span class="string">&quot;æœªæ‰¾åˆ°åŒ…å« IP åœ°å€çš„ä¿¡æ¯&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            logging.error(<span class="string">f&quot;è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;å‘ç”Ÿå¼‚å¸¸: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å…¬ç½‘ IPv6 åœ°å€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_ipv6_address</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = subprocess.run(</span><br><span class="line">            [<span class="string">&quot;ip&quot;</span>, <span class="string">&quot;-6&quot;</span>, <span class="string">&quot;addr&quot;</span>, <span class="string">&quot;show&quot;</span>, <span class="string">&quot;enp3s0&quot;</span>],</span><br><span class="line">            capture_output=<span class="literal">True</span>,</span><br><span class="line">            text=<span class="literal">True</span>,</span><br><span class="line">        )</span><br><span class="line">        lines = result.stdout.splitlines()</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;240e&quot;</span> <span class="keyword">in</span> line:</span><br><span class="line">                <span class="keyword">return</span> line.strip().split()[<span class="number">1</span>].split(<span class="string">&quot;/&quot;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;è·å– IPv6 åœ°å€å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡º Cloudflare DNS è®°å½•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">list_records</span>(<span class="params">zone_id, record_name, api_key, record_type</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        url = <span class="string">f&quot;https://api.cloudflare.com/client/v4/zones/<span class="subst">&#123;zone_id&#125;</span>/dns_records&quot;</span></span><br><span class="line">        headers = &#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;api_key&#125;</span>&quot;</span>, <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>&#125;</span><br><span class="line">        params = &#123;<span class="string">&quot;name&quot;</span>: record_name, <span class="string">&quot;type&quot;</span>: record_type&#125;</span><br><span class="line">        response = requests.get(url, headers=headers, params=params, timeout=<span class="number">10</span>)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        data = response.json()</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;success&quot;</span>]:</span><br><span class="line">            <span class="keyword">return</span> [</span><br><span class="line">                (record[<span class="string">&quot;id&quot;</span>], record[<span class="string">&quot;content&quot;</span>])</span><br><span class="line">                <span class="keyword">for</span> record <span class="keyword">in</span> data[<span class="string">&quot;result&quot;</span>]</span><br><span class="line">            ]</span><br><span class="line">    <span class="keyword">except</span> requests.RequestException <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;è·å– <span class="subst">&#123;record_type&#125;</span> è®°å½•å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ Cloudflare DNS è®°å½•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_record</span>(<span class="params">zone_id, api_key, record_id</span>):</span><br><span class="line">    url = <span class="string">f&quot;https://api.cloudflare.com/client/v4/zones/<span class="subst">&#123;zone_id&#125;</span>/dns_records/<span class="subst">&#123;record_id&#125;</span>&quot;</span></span><br><span class="line">    headers = &#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;api_key&#125;</span>&quot;</span>, <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.delete(url, headers=headers)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        data = response.json()</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;success&quot;</span>]:</span><br><span class="line">            logging.info(<span class="string">f&quot;è®°å½•åˆ é™¤æˆåŠŸ (ID: <span class="subst">&#123;record_id&#125;</span>)&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> requests.RequestException <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;åˆ é™¤è®°å½•å¤±è´¥ (ID: <span class="subst">&#123;record_id&#125;</span>): <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º Cloudflare DNS è®°å½•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_record</span>(<span class="params">zone_id, record_name, api_key, record_type, value</span>):</span><br><span class="line">    url = <span class="string">f&quot;https://api.cloudflare.com/client/v4/zones/<span class="subst">&#123;zone_id&#125;</span>/dns_records&quot;</span></span><br><span class="line">    headers = &#123;<span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;api_key&#125;</span>&quot;</span>, <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>&#125;</span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: record_type,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: record_name,</span><br><span class="line">        <span class="string">&quot;content&quot;</span>: value,</span><br><span class="line">        <span class="string">&quot;ttl&quot;</span>: <span class="number">600</span>,</span><br><span class="line">        <span class="string">&quot;proxied&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.post(url, headers=headers, json=payload, timeout=<span class="number">10</span>)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        data = response.json()</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&quot;success&quot;</span>]:</span><br><span class="line">            logging.info(<span class="string">f&quot;<span class="subst">&#123;record_type&#125;</span> è®°å½•åˆ›å»ºæˆåŠŸ (å€¼: <span class="subst">&#123;value&#125;</span>)&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> requests.RequestException <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;åˆ›å»ºè®°å½•å¤±è´¥ (<span class="subst">&#123;record_type&#125;</span>, <span class="subst">&#123;value&#125;</span>): <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°è®°å½•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_record</span>(<span class="params">zone_id, record_name, api_key, record_type, current_ip</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        records = list_records(zone_id, record_name, api_key, record_type)</span><br><span class="line">        found = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(records) &gt;= <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">for</span> record_id, record_value <span class="keyword">in</span> records:</span><br><span class="line">                <span class="keyword">if</span> record_value == current_ip:</span><br><span class="line">                    found = <span class="literal">True</span></span><br><span class="line">                    logging.info(<span class="string">f&quot;<span class="subst">&#123;record_type&#125;</span> è®°å½•å€¼åŒ¹é…ï¼Œæ— éœ€æ›´æ–° (å€¼: <span class="subst">&#123;record_value&#125;</span>)&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    logging.info(<span class="string">f&quot;<span class="subst">&#123;record_type&#125;</span> è®°å½•å€¼ä¸åŒï¼Œåˆ é™¤æ—§è®°å½• (å½“å‰å€¼: <span class="subst">&#123;record_value&#125;</span>)&quot;</span>)</span><br><span class="line">                    delete_record(zone_id, api_key, record_id)</span><br><span class="line">                    time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> found:</span><br><span class="line">            logging.info(<span class="string">f&quot;æœªæ‰¾åˆ°åŒ¹é…çš„ <span class="subst">&#123;record_type&#125;</span> è®°å½•ï¼Œæ­£åœ¨åˆ›å»ºæ–°è®°å½•...&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> create_record(zone_id, record_name, api_key, record_type, current_ip)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        logging.error(<span class="string">f&quot;æ›´æ–°è®°å½•å‡½æ•°å‘ç”Ÿå¼‚å¸¸: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»å¾ªç¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            ipv4 = get_ipv4_address()</span><br><span class="line">            ipv6 = get_ipv6_address()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ipv4:</span><br><span class="line">                logging.info(<span class="string">f&quot;è·å–åˆ°çš„å¤–éƒ¨ IPv4 åœ°å€ä¸º: <span class="subst">&#123;ipv4&#125;</span>&quot;</span>)</span><br><span class="line">                update_record(ZONE_ID, RECORD_NAME, API_KEY, <span class="string">&quot;A&quot;</span>, ipv4)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                logging.error(<span class="string">&quot;æ— æ³•è·å– IPv4 åœ°å€&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ipv6:</span><br><span class="line">                logging.info(<span class="string">f&quot;è·å–åˆ°çš„å¤–éƒ¨ IPv6 åœ°å€ä¸º: <span class="subst">&#123;ipv6&#125;</span>&quot;</span>)</span><br><span class="line">                update_record(ZONE_ID, RECORD_NAME, API_KEY, <span class="string">&quot;AAAA&quot;</span>, ipv6)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                logging.error(<span class="string">&quot;æ— æ³•è·å– IPv6 åœ°å€&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">300</span>)  <span class="comment"># ç­‰å¾… 5 åˆ†é’Ÿ</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            logging.error(<span class="string">f&quot;ä¸»å¾ªç¯ä¸­å‘ç”Ÿå¼‚å¸¸: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line">    <span class="comment"># vi /etc/systemd/system/ddns.service</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¸€ä¸ªæœåŠ¡åˆ°&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;ddns.service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Update DNS Records Service</span><br><span class="line">After=network-online.target</span><br><span class="line">Wants=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Environment=&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">WorkingDirectory=/root/DdnsOnCloudFlare/</span><br><span class="line">ExecStart=/home/jxh/miniconda3/bin/python3 /root/DdnsOnCloudFlare/autoUpdateDNS.py</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=5s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable ddns</span><br><span class="line">systemctl start ddns</span><br></pre></td></tr></table></figure><p>æ­£å¸¸log</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2025-01-03 23:57:19,913 [INFO] è·å–åˆ°çš„å¤–éƒ¨ IPv4 åœ°å€ä¸º: 218.73.126.186</span><br><span class="line">2025-01-03 23:57:23,117 [INFO] A è®°å½•å€¼åŒ¹é…ï¼Œæ— éœ€æ›´æ–° (å€¼: 218.73.126.186)</span><br><span class="line">2025-01-03 23:57:23,117 [INFO] è·å–åˆ°çš„å¤–éƒ¨ IPv6 åœ°å€ä¸º: 240e:390:4831:fdf0::360</span><br><span class="line">2025-01-03 23:57:24,820 [INFO] AAAA è®°å½•å€¼åŒ¹é…ï¼Œæ— éœ€æ›´æ–° (å€¼: 240e:390:4831:fdf0::360)</span><br><span class="line">2025-01-03 23:57:24,820 [INFO] AAAA è®°å½•å€¼ä¸åŒï¼Œåˆ é™¤æ—§è®°å½• (å½“å‰å€¼: 240e:390:4831:fdf0::a62)</span><br><span class="line">2025-01-03 23:57:25,774 [INFO] è®°å½•åˆ é™¤æˆåŠŸ (ID: 68acfa54b5ada2098976dfbf9a974294)</span><br></pre></td></tr></table></figure><h2 id="nginxé…ç½®æ³¨æ„äº‹é¡¹"><a href="#nginxé…ç½®æ³¨æ„äº‹é¡¹" class="headerlink" title="nginxé…ç½®æ³¨æ„äº‹é¡¹"></a>nginxé…ç½®æ³¨æ„äº‹é¡¹</h2><p>ç”±äºå…¬ç½‘è®¿é—®pan.xinhaojin.topéœ€è¦å¢åŠ ç«¯å£å·88ï¼Œä¸æ˜¯å¾ˆä¼˜é›…ï¼Œæ‰€ä»¥ä¼šæƒ³åˆ°é€šè¿‡nginxè½¬å‘ï¼Œå¦‚ä¸‹é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name pan.xinhaojin.top;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        return 301 http://pan.xinhaojin.top:88$request_uri;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†å®é™…é…ç½®ååœ¨å†…ç½‘å¯çœç•¥ç«¯å£å·ï¼Œä½†å…¬ç½‘è®¿é—®ä¸å¯çœç•¥ç«¯å£å·ï¼Œä¸”å¯èƒ½å¯¼è‡´æ·»åŠ ç«¯å£å·ä¹Ÿæ— æ³•è®¿é—®ï¼ŒåŸå› æ˜¯è¿è¥å•†ç¦80å’Œ443ç«¯å£</p><p>ä¸‹å›¾é…ç½®çš„æ—¶å€™æˆ‘åº”ç”¨äº†nginxç«¯å£è½¬å‘ï¼ŒåŒæ—¶å¯ç”¨äº†httpsï¼Œç½‘ç«™è®¿é—®èµ·æ¥å¾ˆä¼˜é›…ï¼Œä½†è¿˜æ˜¯ä¸å»ºè®®æ·»åŠ è¿™ä¸ªnginxé…ç½®ï¼Œè¿˜æ˜¯å¤šä¸€æ­¥æ‰‹åŠ¨æ·»åŠ ç«¯å£å·å§</p><h2 id="æˆæœå±•ç¤º"><a href="#æˆæœå±•ç¤º" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h2><p><img src="https://xinhaojin.github.io/picx-images-hosting/20241002/image.9kg5luvriq.jpg" alt="image"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/WPS%E6%8B%BC%E5%9B%BE0.99tbrpgmfy.jpg" alt="WPSæ‹¼å›¾0"><br>ä¸Šä¼ é€Ÿåº¦å¯ä»¥è¾¾åˆ°40MB&#x2F;sï¼Œå“ªä¸ªç½‘ç›˜æœ‰æˆ‘å¿«ï¼Ÿï¼ˆæŒ‰ç†æˆ‘ä¸Šä¼ æ²¡æœ‰æœ‰è¿™ä¹ˆå¤§å¸¦å®½å•Šï¼‰ï¼Œåæ­£5Gç½‘ç»œæµ‹è¯•ä¸‹è½½é‡Œé¢çš„è§†é¢‘é€Ÿåº¦å¯ä»¥æœ‰10MBä»¥ä¸Š<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/image.2krw2ymfc9.jpg" alt="image"><br>ä¸‹ä¸€æ­¥æƒ³çœ‹çœ‹èƒ½ä¸èƒ½æŠŠå¤¸å…‹ç½‘ç›˜æŒ‚è½½åˆ°è¿™ä¸Šé¢ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨è¿™ä¸€ä¸ªç½‘é¡µæ¥ç®¡ç†æˆ‘çš„ç§æœ‰äº‘å’Œå¸¸ç”¨çš„å¤¸å…‹äº‘ç›˜äº†</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å†…ç½‘ç©¿é€</tag>
      
      <tag>DDNS</tag>
      
      <tag>ç«¯å£è½¬å‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>firebat N100 miniä¸»æœºè®¾ç½®è¿œç¨‹ç½‘ç»œå”¤é†’(wol)</title>
    <link href="/2024/10/01/firebat%20N100%20mini%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E7%BD%91%E7%BB%9C%E5%94%A4%E9%86%92(wol)/"/>
    <url>/2024/10/01/firebat%20N100%20mini%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE%E8%BF%9C%E7%A8%8B%E7%BD%91%E7%BB%9C%E5%94%A4%E9%86%92(wol)/</url>
    
    <content type="html"><![CDATA[<h2 id="WOL"><a href="#WOL" class="headerlink" title="WOL"></a>WOL</h2><p>WoLï¼ˆWake-on-LANï¼‰æ˜¯ä¸€ç§å…è®¸é€šè¿‡ç½‘ç»œè¿œç¨‹æ‰“å¼€è®¡ç®—æœºçš„åè®®ã€‚wolcmd æ˜¯ä¸€ä¸ªå¸¸ç”¨äºå‘é€â€œé­”æ³•åŒ…â€ï¼ˆMagic Packetï¼‰æ¥å”¤é†’è®¡ç®—æœºçš„å‘½ä»¤è¡Œå·¥å…·ã€‚</p><h2 id="BIOSè®¾ç½®"><a href="#BIOSè®¾ç½®" class="headerlink" title="BIOSè®¾ç½®"></a>BIOSè®¾ç½®</h2><p>åœ¨BIOSä¸­æ‰¾åˆ°ä¸ç½‘ç»œå”¤é†’ç›¸å…³çš„è®¾ç½®ï¼Œè¿™å¯èƒ½åœ¨â€œPower Managementâ€ã€â€œAdvancedâ€æˆ–â€œIntegrated Peripheralsâ€ç­‰èœå•ä¸‹ã€‚å¸¸è§çš„é€‰é¡¹æœ‰â€œWake on LANâ€ã€â€œPower on by PCI-E&#x2F;PCIâ€ã€â€œPower on by Onboard LANâ€ç­‰ã€‚æˆ‘è¿™å—ä¸»æ¿çš„è®¾ç½®åœ¨Boot-&gt;network stack</p><p>å¯ç”¨ç½‘ç»œå”¤é†’ï¼šå°†æ‰¾åˆ°çš„ç½‘ç»œå”¤é†’é€‰é¡¹è®¾ç½®ä¸ºâ€œEnabledâ€ã€‚</p><p>å¦‚æœBIOSä¸æ”¯æŒï¼Œé‚£åˆ«ç©å„¿äº†ã€‚</p><h2 id="ç³»ç»Ÿè®¾ç½®"><a href="#ç³»ç»Ÿè®¾ç½®" class="headerlink" title="ç³»ç»Ÿè®¾ç½®"></a>ç³»ç»Ÿè®¾ç½®</h2><h3 id="å®‰è£…ethtool"><a href="#å®‰è£…ethtool" class="headerlink" title="å®‰è£…ethtool"></a>å®‰è£…ethtool</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ethtool</span><br></pre></td></tr></table></figure><p>è·å–å®‰è£…ä½ç½®,æ¯”å¦‚ <code>/usr/sbin/ethtool</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which ethtool</span><br></pre></td></tr></table></figure><h3 id="è·å–ç½‘å¡åç§°"><a href="#è·å–ç½‘å¡åç§°" class="headerlink" title="è·å–ç½‘å¡åç§°"></a>è·å–ç½‘å¡åç§°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure><p>åˆ—å‡ºæ‰€æœ‰ç½‘å¡ï¼Œæ‰¾åˆ°éœ€è¦ç”¨ä½œå”¤é†’ç½‘å£çš„ç½‘å¡åç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œçš„ <code>enp3s0</code><br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/image.5tqzzhajc8.png" alt="image"></p><h3 id="æ³¨å†Œç³»ç»ŸæœåŠ¡"><a href="#æ³¨å†Œç³»ç»ŸæœåŠ¡" class="headerlink" title="æ³¨å†Œç³»ç»ŸæœåŠ¡"></a>æ³¨å†Œç³»ç»ŸæœåŠ¡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/wol.service</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Configure Wake <span class="literal">On</span> LAN</span><br><span class="line"> </span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=<span class="literal">on</span>eshot</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/sbin/ethtool -s enp3s0 wol g</span><br><span class="line"> </span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=basic.target</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start wol.service</span><br><span class="line">sudo systemctl enable wol.service</span><br><span class="line">systemctl status wol</span><br></pre></td></tr></table></figure><h3 id="è·å–MACåœ°å€"><a href="#è·å–MACåœ°å€" class="headerlink" title="è·å–MACåœ°å€"></a>è·å–MACåœ°å€</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip link show enp3s0</span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯ç½‘ç»œå”¤é†’"><a href="#å®¢æˆ·ç«¯ç½‘ç»œå”¤é†’" class="headerlink" title="å®¢æˆ·ç«¯ç½‘ç»œå”¤é†’"></a>å®¢æˆ·ç«¯ç½‘ç»œå”¤é†’</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><p>eg.Windowsä¸‹ï¼Œå®‰è£…wolcmd(<a href="https://www.depicus.com/downloads/wolcmd.zip">https://www.depicus.com/downloads/wolcmd.zip</a>)</p><p>å”¤é†’å‘½ä»¤æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wolcmd MAC IP/Domain subnetmask</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wolcmd 68:1d:xx:xx:55:9a 192.168.31.31 255.255.255.0</span><br></pre></td></tr></table></figure><p>å”¤é†’é€Ÿåº¦ç‰¹åˆ«å¿«ï¼Œæˆ‘é”®ç›˜å›è½¦é”®æŒ‰ä¸‹è¿˜æ²¡å¼¹èµ·æ¥ï¼Œæœºå™¨ç”µæºæŒ‡ç¤ºç¯å°±å·²ç»äº®äº†<br><img src="https://xinhaojin.github.io/picx-images-hosting/20241001/image.70ab83e0zu.jpg" alt="image"></p><h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install wakeonlan</span><br><span class="line">wakeonlan -i 192.168.31.31 68:1d:xx:xx:55:9a</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>æµ‹è¯•å‘ç°å…¬ç½‘é€šè¿‡åŸŸåæ–¹å¼æ²¡æ³•å”¤é†’ï¼Œç†è®ºä¸Šåº”è¯¥æ˜¯å¯è¡Œçš„ï¼Œä½†å®é™…è¿™ä¸ªé­”æ³•åŒ…ä¼ è¾“è¿‡ç¨‹ä¸­å¾ˆæœ‰å¯èƒ½å—åˆ°é˜²ç«å¢™æˆ–å…¶ä»–å®‰å…¨ç­–ç•¥çš„é˜»ç¢</p><p>æ­¤å¤–ï¼Œå…³æœºæ–¹å¼ä¸åŒä¹Ÿä¼šæœ‰åŒºåˆ«ï¼Œæˆ‘å°è¯•ä½¿ç”¨<code>shutdown now</code>,<code>halt</code>,<code>poweroff</code>æ¥å…³æœºï¼Œç„¶ååˆ†åˆ«å°è¯•å”¤é†’ï¼Œå‘ç°é€šè¿‡<code>halt</code>æ–¹å¼å…³æœºåä¸æ”¯æŒå”¤é†’,è™½ç„¶è¿™ä¸ªæ–¹å¼åè€Œæ˜¯ç•™ä¸‹ç”µæºæŒ‡ç¤ºç¯é€šç”µçš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>wol</tag>
      
      <tag>å±€åŸŸç½‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flask+gunicorn+vue+nginx Linuxéƒ¨ç½²æ¡ˆä¾‹</title>
    <link href="/2024/09/30/flask+gunicorn+vue+nginx%20Linux%E9%83%A8%E7%BD%B2%E6%A1%88%E4%BE%8B/"/>
    <url>/2024/09/30/flask+gunicorn+vue+nginx%20Linux%E9%83%A8%E7%BD%B2%E6%A1%88%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‡è®¾ç°åœ¨æ‹¥æœ‰ï¼š</p><ul><li>flaskåç«¯ä»£ç ï¼šç”±flask_app.pyä½œä¸ºå¯åŠ¨ç¨‹åº</li><li>vueå‰ç«¯ä»£ç ,ä¸”å·²ç»æ‰“åŒ…æˆdistæ–‡ä»¶å¤¹</li></ul><h2 id="ä»€ä¹ˆæ˜¯Gunicorn"><a href="#ä»€ä¹ˆæ˜¯Gunicorn" class="headerlink" title="ä»€ä¹ˆæ˜¯Gunicorn"></a>ä»€ä¹ˆæ˜¯Gunicorn</h2><p>Gunicornï¼ˆâ€œGreen Unicornâ€çš„ç¼©å†™ï¼‰æ˜¯ä¸€ä¸ªPython WSGI HTTPæœåŠ¡å™¨ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒã€‚å®ƒæ˜¯ä¸€ä¸ªé¢„åˆ†å‰çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä¸å¤šä¸ªå·¥ä½œè¿›ç¨‹ä¸€èµ·è¿è¡Œï¼Œä»¥å¤„ç†å¹¶å‘è¯·æ±‚ã€‚Gunicornæ—¨åœ¨è§£å†³Python webåº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œæ—¶çš„æ€§èƒ½é—®é¢˜ã€‚</p><h2 id="flaské…ç½®"><a href="#flaské…ç½®" class="headerlink" title="flaské…ç½®"></a>flaské…ç½®</h2><p>flask_app.py<br>å› ä¸ºGunicorn ä¼šæ¥ç®¡ Flask åº”ç”¨çš„ç›‘å¬ç«¯å£ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨ Flask åº”ç”¨ä¸­æŒ‡å®šç«¯å£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .......</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, threaded=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="guncorné…ç½®"><a href="#guncorné…ç½®" class="headerlink" title="guncorné…ç½®"></a>guncorné…ç½®</h2><p>æ–°å»ºguncorn_config.py</p><p>è®¾ç½®ç›‘å¬ç«¯å£ä¸º54322</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line">monkey.patch_all()</span><br><span class="line"><span class="comment"># å¿…é¡»åŠ ä¸Šè¿™ä¸¤è¡Œï¼Œå¦åˆ™ï¼Œç”±äºæŸäº›æ¨¡å—åœ¨Gunicornå°è¯•monkey patch SSLä¹‹å‰å·²ç»è¢«å¯¼å…¥</span></span><br><span class="line"><span class="comment"># ä¼šäº§ç”Ÿè­¦å‘Šï¼Œè¿™å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œéœ€è¦åœ¨å¯¼å…¥å…¶ä»–ä¾èµ–åº“ä¹‹å‰å…ˆè¿›è¡Œmonkey patchingï¼Œå¯ä»¥åœ¨æœ¬æ–‡ä»¶ä¸­å†™ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸»å‡½æ•°å¼€å¤´å†™</span></span><br><span class="line"><span class="comment"># geventçš„çŒ´å­è¡¥ä¸ä¼šæ›¿æ¢æ‰Pythonæ ‡å‡†åº“ä¸­çš„ä¸€äº›å‡½æ•°å’Œæ–¹æ³•ï¼Œä½¿å¾—åŸæœ¬é˜»å¡çš„æ“ä½œå˜å¾—éé˜»å¡</span></span><br><span class="line"><span class="comment"># è¿™æ„å‘³ç€Gunicornä½¿ç”¨äº†åç¨‹æ¥æé«˜å¹¶å‘èƒ½åŠ›ã€‚</span></span><br><span class="line"><span class="comment"># è¿™ç§æ¨¡å¼ä¸‹ï¼Œç†è®ºä¸Šå•ä¸ªå·¥ä½œè¿›ç¨‹å°±èƒ½å¤„ç†å¤§é‡çš„å¹¶å‘è¿æ¥ï¼Œå› ä¸ºæ¯ä¸ªè¿æ¥å¹¶ä¸éœ€è¦æ¶ˆè€—ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœè¯·æ±‚çš„å¤„ç†ä¸»è¦æ˜¯CPUå¯†é›†å‹çš„ï¼Œå¢åŠ æ›´å¤šçš„å·¥ä½œè¿›ç¨‹å’Œçº¿ç¨‹å¯èƒ½å¹¶ä¸ä¼šæ˜¾è‘—æå‡æ€§èƒ½ï¼Œåè€Œå¯èƒ½å› ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢è€Œé€ æˆæ€§èƒ½ä¸‹é™</span></span><br><span class="line"><span class="comment"># Gunicorné…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># bind - ç»‘å®šçš„IPåœ°å€å’Œç«¯å£</span></span><br><span class="line">bind = <span class="string">&#x27;0.0.0.0:54322&#x27;</span></span><br><span class="line"><span class="comment"># workers - å¯åŠ¨çš„å·¥ä½œè¿›ç¨‹æ•°é‡</span></span><br><span class="line">workers = <span class="number">4</span></span><br><span class="line"><span class="comment"># threads = 4</span></span><br><span class="line"><span class="comment"># worker_class - å·¥ä½œè¿›ç¨‹ç±»å‹ï¼Œ&#x27;sync&#x27;ä»£è¡¨åŒæ­¥æ¨¡å¼ï¼Œè¿˜æœ‰å…¶ä»–å¼‚æ­¥æ¨¡å¼å¦‚geventå’Œeventlet</span></span><br><span class="line"><span class="comment"># worker_class = &#x27;sync&#x27;</span></span><br><span class="line">worker_class = <span class="string">&#x27;gevent&#x27;</span></span><br><span class="line"><span class="comment"># timeout - å·¥ä½œè¿›ç¨‹çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span></span><br><span class="line">timeout = <span class="number">30</span></span><br><span class="line"><span class="comment"># preload_app - æ˜¯å¦åœ¨æ¯ä¸ªå·¥ä½œè¿›ç¨‹ä¸­é¢„åŠ è½½åº”ç”¨</span></span><br><span class="line">preload_app = <span class="literal">True</span></span><br><span class="line"><span class="comment"># loglevel - æ—¥å¿—çº§åˆ«ï¼Œå¯é€‰å€¼æœ‰&#x27;debug&#x27;, &#x27;info&#x27;, &#x27;warning&#x27;, &#x27;error&#x27;, &#x27;critical&#x27;</span></span><br><span class="line">loglevel = <span class="string">&#x27;info&#x27;</span></span><br><span class="line"><span class="comment"># accesslog - è®¿é—®æ—¥å¿—çš„è¾“å‡ºä½ç½®ï¼Œ&#x27;-&#x27;è¡¨ç¤ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span></span><br><span class="line">accesslog = <span class="string">&#x27;-&#x27;</span></span><br><span class="line"><span class="comment"># errorlog - é”™è¯¯æ—¥å¿—çš„è¾“å‡ºä½ç½®ï¼Œ&#x27;-&#x27;è¡¨ç¤ºè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span></span><br><span class="line">errorlog = <span class="string">&#x27;-&#x27;</span></span><br><span class="line"><span class="comment"># capture_output - æ˜¯å¦æ•è·æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯æµåˆ°æ—¥å¿—ä¸­</span></span><br><span class="line">capture_output = <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>ç”±gunicornæ‰˜ç®¡flask</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gunicorn -c gunicorn_config.py flask_app:app &amp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…³é—­æœåŠ¡</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">lsof -ti :54322 | xargs <span class="built_in">kill</span> -9</span></span><br></pre></td></tr></table></figure><h2 id="nginxé…ç½®"><a href="#nginxé…ç½®" class="headerlink" title="nginxé…ç½®"></a>nginxé…ç½®</h2><p>&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</p><p>åœ¨HTTPä¸­æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªServer</p><ul><li>ç¬¬ä¸€ä¸ªServerçš„ä½œç”¨æ˜¯ç›‘å¬8080ç«¯å£ï¼ŒæŒ‡å®šå‰ç«¯é™æ€èµ„æºç›®å½•</li><li>ç¬¬äºŒä¸ªServerçš„ä½œç”¨æ˜¯ç›‘å¬54321ç«¯å£ï¼Œåå‘ä»£ç†å‰ç«¯å¯¹54321ç«¯å£çš„è¯·æ±‚ï¼Œè½¬å‘ç»™54322ç«¯å£çš„gunicornç¨‹åº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 8080;</span><br><span class="line">    server_name _; # æ›¿æ¢ä¸ºæ‚¨çš„åŸŸåæˆ–IPåœ°å€</span><br><span class="line">    root /usr/share/nginx/html/dist;</span><br><span class="line">    location /static/ &#123;</span><br><span class="line">        autoindex on;</span><br><span class="line">        alias /usr/share/nginx/html/dist/static/; # æŒ‡å®šé™æ€èµ„æºç›®å½•</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 54321;</span><br><span class="line">    server_name _; # æ›¿æ¢ä¸ºæ‚¨çš„åŸŸåæˆ–IPåœ°å€</span><br><span class="line">    location / &#123;</span><br><span class="line">        # add_header Access-Control-Allow-Origin *;</span><br><span class="line">        try_files $uri $uri/  /index.html =404;</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">        proxy_pass http://127.0.0.1:54322; # Gunicornç›‘å¬çš„åœ°å€å’Œç«¯å£</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>linux</tag>
      
      <tag>nginx</tag>
      
      <tag>flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è½¯è€ƒç½‘ç»œå·¥ç¨‹å¸ˆç¬”è®°</title>
    <link href="/2024/09/20/%E8%BD%AF%E8%80%83%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/09/20/%E8%BD%AF%E8%80%83%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<link /><link /><h2 id="ç¬¬0ç« -è®¡ç®—æœºåŸºç¡€çŸ¥è¯†è¡¥å……"><a href="#ç¬¬0ç« -è®¡ç®—æœºåŸºç¡€çŸ¥è¯†è¡¥å……" class="headerlink" title="ç¬¬0ç«  è®¡ç®—æœºåŸºç¡€çŸ¥è¯†è¡¥å……"></a>ç¬¬0ç«  è®¡ç®—æœºåŸºç¡€çŸ¥è¯†è¡¥å……</h2><h3 id="è®¡é‡å•ä½"><a href="#è®¡é‡å•ä½" class="headerlink" title="è®¡é‡å•ä½"></a>è®¡é‡å•ä½</h3><p>ä½(bit):æœ€å°æ•°æ®å•ä½</p><p>å­—èŠ‚(Byte)8bitç»„æˆï¼Œå­˜å‚¨ç©ºé—´çš„æœ€å°å•ä½</p><p>å­˜å‚¨:è®¾è®¡å®¹é‡:1KB&#x3D;1024Bï¼Œ1MB&#x3D;1024KB</p><p>ç½‘ç»œç‰¹æŒ‡å¸¦å®½ï¼Œå­˜å–é€Ÿåº¦ï¼Œæ¯”ç‰¹ç‡ï¼Œä¼ è¾“é€Ÿç‡ç­‰é€Ÿç‡ç›¸å…³æ¦‚å¿µï¼Œ1KB&#x2F;S&#x3D;1000B&#x2F;Sï¼Œ1MB&#x2F;S&#x3D;1000KB&#x2F;s</p><h3 id="æ•°æ®è¡¨ç¤º"><a href="#æ•°æ®è¡¨ç¤º" class="headerlink" title="æ•°æ®è¡¨ç¤º"></a>æ•°æ®è¡¨ç¤º</h3><table><thead><tr><th>æ•°å­—</th><th>åŸç </th><th>åç </th><th>è¡¥ç </th><th>ç§»ç </th></tr></thead><tbody><tr><td>5</td><td>00000101</td><td>00000101</td><td>00000101</td><td>10000101</td></tr><tr><td>-5</td><td>10000101</td><td>11111010</td><td>11111011</td><td>01111011</td></tr><tr><td>0</td><td>00000000</td><td>00000000</td><td>00000000</td><td>10000000</td></tr><tr><td>-0</td><td>10000000</td><td>11111111</td><td>00000000</td><td>10000000</td></tr></tbody></table><p>æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç ç›¸åŒ</p><p>è´Ÿæ•°çš„åç æ˜¯åŸç é™¤ç¬¦å·ä½å¤–å–åï¼Œè¡¥ç æ˜¯åç åŠ 1</p><p>ç§»ç æ˜¯åç æœ€é«˜ä½å–å</p><p>åŸç å’Œåç è¡¨ç¤ºèŒƒå›´ï¼š-127 ~ +127 è¡¥ç å’Œç§»ç è¡¨ç¤ºèŒƒå›´ï¼š-128 ~ +127</p><h3 id="ä¸­å¤®å¤„ç†å™¨CPU"><a href="#ä¸­å¤®å¤„ç†å™¨CPU" class="headerlink" title="ä¸­å¤®å¤„ç†å™¨CPU"></a>ä¸­å¤®å¤„ç†å™¨CPU</h3><p>è¿ç®—å™¨ï¼šä¸»è¦è´Ÿè´£æ•°æ®çš„åŠ å·¥å’Œå¤„ç†</p><table><thead><tr><th>éƒ¨ä»¶åç§°</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ç®—æœ¯é€»è¾‘å•å…ƒ (ALU)</td><td>æ‰§è¡Œç®—æœ¯è¿ç®—ï¼ˆå¦‚åŠ æ³•ã€å‡æ³•ï¼‰å’Œé€»è¾‘è¿ç®—ï¼ˆå¦‚ANDã€ORã€NOTï¼‰ã€‚</td><td>æ˜¯CPUä¸­æ‰§è¡Œå¤§å¤šæ•°æ•°å­¦å’Œé€»è¾‘æ“ä½œçš„æ ¸å¿ƒéƒ¨ä»¶ã€‚</td></tr><tr><td>é€šç”¨å¯„å­˜å™¨</td><td>æš‚å­˜æ“ä½œæ•°æˆ–åœ°å€ã€‚</td><td>CPUå¯¹å…¶è®¿é—®é€Ÿåº¦æœ€å¿«ï¼Œå¸¸ç”¨äºå­˜å‚¨ä¸´æ—¶æ•°æ®æˆ–ä¸­é—´ç»“æœã€‚</td></tr><tr><td>ç´¯åŠ å™¨ (ACC)</td><td>æš‚å­˜è¿ç®—ç»“æœã€‚</td><td>å¸¸ç”¨äºå­˜å‚¨ALUæ“ä½œçš„ç»“æœï¼Œæ˜¯è¿›è¡Œè®¡ç®—æ—¶æœ€å¸¸ç”¨çš„å¯„å­˜å™¨ä¹‹ä¸€ã€‚</td></tr><tr><td>æ•°æ®ç¼“å†²å¯„å­˜å™¨</td><td>æš‚å­˜ä»å†…å­˜æˆ–è¾“å…¥&#x2F;è¾“å‡ºè®¾å¤‡ä¼ è¾“çš„æ•°æ®ã€‚</td><td>ä½œä¸ºæ•°æ®ä¼ è¾“çš„ç¼“å†²åŒºï¼Œå‡å°‘CPUä¸å†…å­˜æˆ–I&#x2F;Oè®¾å¤‡é—´çš„é€Ÿåº¦å·®å¼‚ã€‚</td></tr><tr><td>çŠ¶æ€æ¡ä»¶å¯„å­˜å™¨</td><td>æŒ‡ç¤ºæœ€è¿‘ä¸€æ¬¡æ“ä½œçš„çŠ¶æ€ï¼Œå¦‚é›¶æ ‡å¿—ã€è¿›ä½æ ‡å¿—ã€æº¢å‡ºæ ‡å¿—ç­‰ã€‚</td><td>ç”¨äºæ§åˆ¶ç¨‹åºæµç¨‹ï¼Œå¦‚æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯ã€‚</td></tr></tbody></table><p>æ§åˆ¶å™¨ï¼šä¸»è¦è´Ÿè´£å‘å‡ºæ§åˆ¶å‘å·æ–½ä»¤</p><table><thead><tr><th>éƒ¨ä»¶åç§°</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰</td><td>å­˜å‚¨ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚</td><td>ç¡®ä¿æŒ‡ä»¤æŒ‰é¡ºåºæ‰§è¡Œï¼Œåˆ†æ”¯æˆ–è·³è½¬æ—¶æ›´æ–°ä¸ºéé¡ºåºåœ°å€ã€‚</td></tr><tr><td>æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆIRï¼‰</td><td>æš‚å­˜å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</td><td>ä»ä¸»å­˜å‚¨å™¨ä¸­è¯»å–æŒ‡ä»¤åï¼ŒæŒ‡ä»¤ä¼šå…ˆå­˜å‚¨åœ¨IRä¸­ã€‚</td></tr><tr><td>æŒ‡ä»¤è¯‘ç å™¨ï¼ˆIDï¼‰</td><td>è§£ææŒ‡ä»¤å¯„å­˜å™¨ä¸­çš„æŒ‡ä»¤ï¼Œå¹¶ç¡®å®šéœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚</td><td>è¯†åˆ«æ“ä½œç å’Œåœ°å€ç ï¼Œç”Ÿæˆæ§åˆ¶ä¿¡å·ä»¥æ¿€æ´»ç¡¬ä»¶éƒ¨ä»¶ã€‚</td></tr><tr><td>æ§åˆ¶å•å…ƒï¼ˆCUï¼‰</td><td>ç”Ÿæˆæ§åˆ¶ä¿¡å·ï¼Œåè°ƒCPUå†…éƒ¨å„éƒ¨ä»¶çš„å·¥ä½œã€‚</td><td>æ ¹æ®æŒ‡ä»¤è¯‘ç å™¨çš„è¾“å‡ºå’Œç¨‹åºçš„çŠ¶æ€ï¼Œç”Ÿæˆæ§åˆ¶ä¿¡å·ã€‚</td></tr><tr><td>åœ°å€å¯„å­˜å™¨ï¼ˆARï¼‰</td><td>å­˜å‚¨å½“å‰è®¿é—®çš„å†…å­˜åœ°å€ã€‚</td><td>åœ¨è®¿é—®å†…å­˜æ—¶ï¼ŒARå­˜å‚¨æ“ä½œæ•°çš„åœ°å€ã€‚</td></tr><tr><td>æ•°æ®å¯„å­˜å™¨ï¼ˆDRï¼‰</td><td>æš‚å­˜ä»å†…å­˜ä¸­è¯»å–çš„æ•°æ®æˆ–è¦å†™å…¥å†…å­˜çš„æ•°æ®ã€‚</td><td>åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼ŒDRä½œä¸ºä¸€ä¸ªç¼“å†²åŒºä¿å­˜æ•°æ®ã€‚</td></tr></tbody></table><h3 id="æŒ‡ä»¤ç³»ç»Ÿ"><a href="#æŒ‡ä»¤ç³»ç»Ÿ" class="headerlink" title="æŒ‡ä»¤ç³»ç»Ÿ"></a>æŒ‡ä»¤ç³»ç»Ÿ</h3><p>ç”±æ“ä½œç ï¼ˆå®Œæˆä»€ä¹ˆæ“ä½œï¼‰å’Œæ“ä½œæ•°ï¼ˆåœ°å€æˆ–æ•°æ®ï¼‰ç»„æˆ</p><h4 id="å¯»å€æ–¹å¼"><a href="#å¯»å€æ–¹å¼" class="headerlink" title="å¯»å€æ–¹å¼"></a>å¯»å€æ–¹å¼</h4><table><thead><tr><th>å¯»å€æ–¹å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>ç«‹å³å¯»å€</td><td>æ“ä½œæ•°ç›´æ¥ç»™å‡ºï¼Œä¸æŒ‡ä»¤ä¸€èµ·ç¼–ç ã€‚</td></tr><tr><td>ç›´æ¥å¯»å€</td><td>æŒ‡ä»¤ä¸­ç›´æ¥ç»™å‡ºæ“ä½œæ•°çš„åœ°å€ã€‚</td></tr><tr><td>å¯„å­˜å™¨å¯»å€</td><td>æ“ä½œæ•°å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ï¼ŒæŒ‡ä»¤ä¸­ç»™å‡ºå¯„å­˜å™¨çš„ç¼–å·ã€‚</td></tr><tr><td>é—´æ¥å¯»å€</td><td>æŒ‡ä»¤ä¸­ç»™å‡ºå¯„å­˜å™¨çš„ç¼–å·ï¼Œå¯„å­˜å™¨ä¸­å­˜å‚¨ç€æ“ä½œæ•°çš„åœ°å€ï¼Œè¯¥åœ°å€åœ¨å†…å­˜ä¸­ã€‚</td></tr></tbody></table><h4 id="æŒ‡ä»¤é›†"><a href="#æŒ‡ä»¤é›†" class="headerlink" title="æŒ‡ä»¤é›†"></a>æŒ‡ä»¤é›†</h4><p>CISCä¸RISCæŒ‡ä»¤</p><table><thead><tr><th>ç‰¹ç‚¹ &#x2F; æ¶æ„ç±»å‹</th><th><strong>CISC(å¤æ‚æŒ‡ä»¤ç³»ç»Ÿ)</strong></th><th><strong>RISC(ç²¾ç®€æŒ‡ä»¤ç³»ç»Ÿ)</strong></th></tr></thead><tbody><tr><td><strong>èŠ¯ç‰‡è®¾è®¡</strong></td><td>é‡‡ç”¨CISCæŠ€æœ¯çš„CPU,å…¶èŠ¯ç‰‡è®¾è®¡<strong>å¤æ‚åº¦æ›´é«˜</strong>ã€‚</td><td>åœ¨RISCä¸­,æ›´é€‚åˆé‡‡ç”¨<strong>ç¡¬å¸ƒçº¿é€»è¾‘æ‰§è¡ŒæŒ‡ä»¤</strong>ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤æ•°ç›®</strong></td><td>ä¸€èˆ¬å¤§äº200æ¡ã€‚</td><td>ä¸€èˆ¬å°äº100æ¡ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤å­—é•¿</strong></td><td>ä¸å›ºå®šã€‚</td><td>å®šé•¿ (<strong>é€‚åˆæµæ°´çº¿</strong>)ã€‚</td></tr><tr><td><strong>å¯è®¿å­˜æŒ‡ä»¤</strong></td><td>ä¸åŠ é™åˆ¶ã€‚</td><td>åªæœ‰Load&#x2F;Store</td></tr><tr><td><strong>æŒ‡ä»¤æ‰§è¡Œæ—¶é—´</strong></td><td>ç›¸å·®è¾ƒå¤§ã€‚</td><td>ç»å¤§å¤šæ•°åœ¨ä¸€ä¸ªå‘¨æœŸå†…å®Œæˆã€‚</td></tr><tr><td><strong>é€šç”¨å¯„å­˜å™¨æ•°é‡</strong></td><td>è¾ƒå°‘ã€‚</td><td>å¤šã€‚</td></tr><tr><td><strong>æ§åˆ¶æ–¹å¼</strong></td><td>å¤§éƒ¨åˆ†<strong>å¾®ç¨‹åºæ§åˆ¶å™¨</strong></td><td>å¤§éƒ¨åˆ†ä¸ºç»„åˆé€»è¾‘æ§åˆ¶ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤æµæ°´çº¿</strong></td><td>å¯ä»¥é€šè¿‡ä¸€å®šæ–¹å¼å®ç°ã€‚</td><td>å¿…é¡»å®ç°</td></tr></tbody></table><h4 id="æŒ‡ä»¤æ‰§è¡Œ"><a href="#æŒ‡ä»¤æ‰§è¡Œ" class="headerlink" title="æŒ‡ä»¤æ‰§è¡Œ"></a>æŒ‡ä»¤æ‰§è¡Œ</h4><p>eg:å–æŒ‡4tï¼Œåˆ†æ2tï¼Œæ‰§è¡Œ3tï¼Œä¸€å…±600æ¡<br><strong>ä¸²è¡Œæ‰§è¡Œ</strong></p><ul><li><strong>æè¿°</strong>ï¼šä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œåï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li><li><strong>ç¤ºä¾‹è®¡ç®—</strong>ï¼šï¼ˆ4+2+3ï¼‰tx600&#x3D;5400t</li></ul><p><strong>æµæ°´çº¿æ‰§è¡Œ</strong></p><ul><li><strong>æè¿°</strong>ï¼šä¸€æ¡æŒ‡ä»¤çš„æ‰§è¡Œå¯ä»¥ä¸ä¸‹ä¸€æ¡æŒ‡ä»¤åŒæ—¶è¿›è¡Œã€‚</li><li><strong>ç¤ºä¾‹è®¡ç®—</strong>ï¼š<ul><li>ï¼ˆ4+2+3ï¼‰t*ï¼ˆ600-1ï¼‰x4&#x3D;2405t</li><li>4tx600t+2t+3t&#x3D;2405t</li></ul></li></ul><h4 id="æŒ‡ä»¤å‘¨æœŸ"><a href="#æŒ‡ä»¤å‘¨æœŸ" class="headerlink" title="æŒ‡ä»¤å‘¨æœŸ"></a>æŒ‡ä»¤å‘¨æœŸ</h4><table><thead><tr><th><strong>æ¦‚å¿µ</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><strong>æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆIRï¼‰</strong></td><td>æ“ä½œç å’Œåœ°å€ç éƒ½åº”å­˜å…¥<strong>æŒ‡ä»¤å¯„å­˜å™¨</strong>ä¸­ä»¥åˆ†ææ‰§è¡Œçš„ä¸€æ¡æŒ‡ä»¤ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤å¯„å­˜å™¨ä½æ•°</strong></td><td>å–å†³äº<strong>æŒ‡ä»¤å­—é•¿</strong>ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤å‘¨æœŸ</strong></td><td>å–å‡ºå¹¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€çš„æ—¶é—´ã€‚</td></tr><tr><td><strong>æ€»çº¿å‘¨æœŸ</strong></td><td>CPUä»å­˜å‚¨å™¨æˆ–I&#x2F;Oæ¥å£å­˜å–ä¸€ä¸ªå­—èŠ‚æ‰€éœ€çš„æ—¶é—´ã€‚</td></tr><tr><td><strong>æ—¶é’Ÿå‘¨æœŸ</strong></td><td>CPUå¤„ç†åŠ¨ä½œçš„<strong>æœ€å°å•ä½</strong>ã€‚</td></tr><tr><td><strong>ç›¸äº’å…³ç³»</strong></td><td>- ä¸€ä¸ª<strong>æŒ‡ä»¤å‘¨æœŸ</strong>å¯ä»¥åˆ’åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ª<strong>æ€»çº¿å‘¨æœŸ</strong>ã€‚</td></tr><tr><td></td><td>- ä¸€ä¸ª<strong>æ€»çº¿å‘¨æœŸ</strong>å¯ä»¥åˆ’åˆ†ä¸ºå‡ ä¸ª<strong>æ—¶é’Ÿå‘¨æœŸ</strong>ã€‚</td></tr></tbody></table><h3 id="å­˜å‚¨å™¨ç³»ç»Ÿ"><a href="#å­˜å‚¨å™¨ç³»ç»Ÿ" class="headerlink" title="å­˜å‚¨å™¨ç³»ç»Ÿ"></a>å­˜å‚¨å™¨ç³»ç»Ÿ</h3><h4 id="ä¸»å­˜å‚¨å™¨"><a href="#ä¸»å­˜å‚¨å™¨" class="headerlink" title="ä¸»å­˜å‚¨å™¨"></a>ä¸»å­˜å‚¨å™¨</h4><p><strong>ç»„æˆ</strong></p><ul><li><strong>å­˜å‚¨ä½“</strong>ï¼šå®é™…å­˜å‚¨æ•°æ®çš„éƒ¨åˆ†ã€‚</li><li><strong>æ§åˆ¶çº¿è·¯</strong>ï¼šç®¡ç†æ•°æ®å’Œåœ°å€çš„ä¼ è¾“ã€‚</li><li><strong>åœ°å€å¯„å­˜å™¨</strong>ï¼šç”¨äºå­˜å‚¨å†…å­˜åœ°å€ã€‚</li><li><strong>æ•°æ®å¯„å­˜å™¨</strong>ï¼šç”¨äºå­˜å‚¨æ•°æ®ã€‚</li><li><strong>åœ°å€è¯‘ç ç”µè·¯</strong>ï¼šå°†åœ°å€è½¬æ¢ä¸ºå­˜å‚¨ä½“ä¸­çš„å…·ä½“ä½ç½®ã€‚<br><strong>ç±»å‹</strong>ï¼š<ul><li><strong>DRAM</strong>ï¼šæ„æˆä¸»å­˜çš„ä¸»è¦æŠ€æœ¯ï¼Œæˆæœ¬æ•ˆç›Šé«˜ã€‚</li><li><strong>SRAM</strong>ï¼šé€Ÿåº¦æ›´å¿«ï¼Œæˆæœ¬æ›´é«˜ï¼Œå¸¸ç”¨äºCacheã€‚</li></ul></li><li><strong>åˆ†çº§å­˜å‚¨ä½“ç³»</strong>ï¼šè§£å†³å®¹é‡ã€æˆæœ¬å’Œé€Ÿåº¦çš„çŸ›ç›¾ã€‚</li></ul><p><strong>ç‰¹æ®Šç±»å‹</strong></p><ul><li><strong>EEPROM</strong>ï¼šç”µå¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼Œé€‚ç”¨äºéœ€è¦é‡å†™å°æ•°æ®é‡çš„åº”ç”¨ã€‚</li><li><strong>SAN</strong>ï¼šä¸“ç”¨ç½‘ç»œè¿æ¥å­˜å‚¨ç®¡ç†å­ç³»ç»Ÿå’Œå­˜å‚¨è®¾å¤‡ï¼Œåˆ†ä¸º<strong>FC SAN</strong>å’Œ<strong>IP SAN</strong>ï¼Œæ”¯æŒé«˜é€Ÿæ•°æ®ä¼ è¾“ã€‚<br><strong>é«˜çº§å­˜å‚¨æŠ€æœ¯</strong></li><li><strong>ç›¸è”å­˜å‚¨å™¨ (CAM, Content Addressable Memory)</strong>ï¼šå¯ä»¥æ ¹æ®å†…å®¹è€Œä¸æ˜¯åœ°å€æ¥æ£€ç´¢æ•°æ®çš„å­˜å‚¨å™¨ï¼Œå¸¸ç”¨äºé«˜é€ŸæŸ¥æ‰¾æ“ä½œã€‚</li><li><strong>ç›´æ¥å­˜å‚¨å™¨è®¿é—® (DMA, Direct Memory Access)</strong>ï¼šå…è®¸æŸäº›ç¡¬ä»¶å­ç³»ç»Ÿåœ¨ä¸ç»è¿‡CPUçš„æƒ…å†µä¸‹ç›´æ¥è®¿é—®ä¸»å­˜ï¼Œç”¨äºé«˜æ•ˆæ•°æ®ä¼ è¾“ï¼Œå®é™…ç”±DMAç¡¬ä»¶å®Œæˆã€‚</li><li><strong>SpoolingæŠ€æœ¯ï¼Œå³â€œå‡è„±æœºæŠ€æœ¯â€ï¼ˆSimultaneous Peripheral Operations On-Lineï¼‰</strong>ï¼Œæ˜¯ä¸€ç§åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ç”¨äºç®¡ç†å’Œä¼˜åŒ–ä½é€Ÿè®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼‰ä¸é«˜é€Ÿè®¾å¤‡ï¼ˆå¦‚CPUï¼‰ä¹‹é—´æ•°æ®æµçš„æŠ€æœ¯ã€‚è¿™ç§æŠ€æœ¯çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸€ç±»ç‰©ç†è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ï¼‰æ¥æ¨¡æ‹Ÿå¦ä¸€ç±»ç‰©ç†è®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼‰ï¼Œä»¥å‡å°‘CPUçš„ç­‰å¾…æ—¶é—´å¹¶æé«˜ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚</li></ul><h4 id="ç¡¬ç›˜"><a href="#ç¡¬ç›˜" class="headerlink" title="ç¡¬ç›˜"></a>ç¡¬ç›˜</h4><ul><li><strong>ç£ç›˜è°ƒåº¦</strong>ï¼šå…ˆè¿›è¡Œ<strong>ç§»è‡‚è°ƒåº¦</strong>ä»¥ç§»åŠ¨è¯»å†™å¤´åˆ°æ­£ç¡®çš„ç£é“ï¼Œå†è¿›è¡Œ<strong>æ—‹è½¬è°ƒåº¦</strong>ä»¥ç­‰å¾…æ•°æ®åˆ°è¾¾è¯»å†™å¤´ã€‚</li><li><strong>SSD å›ºæ€ç¡¬ç›˜</strong></li><li>åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<ul><li>ä¸»æµçš„<strong>é—ªå­˜ï¼ˆFLASH èŠ¯ç‰‡ï¼‰</strong>ï¼Œæä¾›å¿«é€Ÿè¯»å†™èƒ½åŠ›ã€‚</li><li><strong>DRAM</strong>åŸºäº SSDï¼Œé€‚ç”¨äºé«˜ååé‡åº”ç”¨ã€‚</li></ul></li></ul><h4 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h4><ul><li><strong>åŠŸèƒ½</strong>ï¼šåŠ é€ŸCPUä¸å­˜å‚¨ç³»ç»Ÿé—´çš„æ•°æ®ä¼ è¾“ï¼Œç¼“è§£<strong>å†¯è¯ºä¾æ›¼ç“¶é¢ˆ</strong>ã€‚</li><li><strong>æ€§èƒ½ä¾æ®</strong>ï¼šç¨‹åºçš„<strong>å±€éƒ¨æ€§åŸç†</strong>ã€‚</li><li><strong>å‘½ä¸­ç‡ä¸å¤±æ•ˆç‡</strong>ï¼š<ul><li>è®¿é—®å‘½ä¸­ç‡ï¼š<code>h</code></li><li>å¹³å‡å‘¨æœŸæ—¶é—´ï¼š<code>t3 = h * t1 + (1 - h) * t2</code></li></ul></li><li><strong>è®¾è®¡ç›®æ ‡</strong>ï¼šåœ¨æˆæœ¬å’Œæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Œæé«˜å‘½ä¸­ç‡ã€‚</li><li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šæ˜ å°„äº¤æ¢è¿‡ç¨‹ç”±ç¡¬ä»¶è‡ªåŠ¨å®Œæˆã€‚</li></ul><h4 id="RAIDæŠ€æœ¯"><a href="#RAIDæŠ€æœ¯" class="headerlink" title="RAIDæŠ€æœ¯"></a>RAIDæŠ€æœ¯</h4><ul><li>æä¾›ä¸åŒçš„æ•°æ®å†—ä½™å’Œæ€§èƒ½æ°´å¹³ï¼š<ul><li><strong>RAID 0</strong>ï¼šæ— å†—ä½™ï¼Œæœ€é«˜ç£ç›˜åˆ©ç”¨ç‡ã€‚</li><li><strong>RAID 1</strong>ï¼šé•œåƒï¼Œæä¾›æ•°æ®å†—ä½™ã€‚</li><li><strong>RAID 3</strong>ï¼šä½¿ç”¨ä¸€ä¸ªä¸“ç”¨çš„å¥‡å¶æ ¡éªŒç›˜ã€‚</li><li><strong>RAID 5</strong>ï¼šæ•°æ®å’Œæ ¡éªŒä¿¡æ¯åˆ†æ•£åœ¨æ‰€æœ‰ç£ç›˜ä¸Šã€‚</li><li><strong>RAID 6</strong>ï¼šæä¾›æ›´é«˜çº§åˆ«çš„æ•°æ®å†—ä½™ã€‚</li><li><strong>RAID 10</strong>ï¼šç»“åˆäº†é•œåƒå’Œæ¡å¸¦åŒ–ï¼Œæä¾›æ€§èƒ½å’Œå†—ä½™ã€‚</li><li><strong>RAID 01</strong>ï¼šç»“åˆäº†æ¡å¸¦åŒ–å’Œé•œåƒï¼Œæä¾›æ€§èƒ½å’Œå†—ä½™ã€‚</li></ul></li></ul><h3 id="è½¯ä»¶å¼€å‘"><a href="#è½¯ä»¶å¼€å‘" class="headerlink" title="è½¯ä»¶å¼€å‘"></a>è½¯ä»¶å¼€å‘</h3><h4 id="è½¯ä»¶å¼€å‘æ¨¡å‹"><a href="#è½¯ä»¶å¼€å‘æ¨¡å‹" class="headerlink" title="è½¯ä»¶å¼€å‘æ¨¡å‹"></a>è½¯ä»¶å¼€å‘æ¨¡å‹</h4><p><strong>ç€‘å¸ƒæ¨¡å‹ (Waterfall Model)</strong></p><ul><li>å°†è½¯ä»¶å¼€å‘åˆ†ä¸ºå…­ä¸ªé˜¶æ®µï¼šåˆ¶å®šè®¡åˆ’ã€éœ€æ±‚åˆ†æã€è½¯ä»¶è®¾è®¡ã€ç¨‹åºç¼–å†™ã€è½¯ä»¶æµ‹è¯•ã€è¿è¡Œç»´æŠ¤ã€‚</li><li><strong>é€‚ç”¨äºéœ€æ±‚æ˜ç¡®ä¸”å˜åŒ–ä¸å¤§çš„å¤§å‹è½¯ä»¶é¡¹ç›®</strong>ã€‚</li><li></li></ul><p><strong>å¢é‡æ¨¡å‹ (Incremental Model)</strong></p><ul><li>å¼•å…¥äº†å¢é‡åŒ…çš„æ¦‚å¿µï¼Œå…è®¸åœ¨éœ€æ±‚å®Œå…¨æ˜ç¡®ä¹‹å‰å°±å¼€å§‹å¼€å‘ã€‚</li><li><strong>äººå‘˜åˆ†é…çµæ´»</strong>ï¼Œé€‚ç”¨äºå¯ä»¥åˆ†æ‰¹æ¬¡äº¤ä»˜è½¯ä»¶åŠŸèƒ½çš„é¡¹ç›®ã€‚</li></ul><p><strong>å–·æ³‰æ¨¡å‹ (Fountain Model)</strong></p><ul><li>å¼ºè°ƒ<strong>è¿­ä»£</strong>å’Œ<strong>å¹¶è¡Œ</strong>å¼€å‘ï¼Œæ”¯æŒè½¯ä»¶å¤ç”¨ã€‚</li><li><strong>é€‚ç”¨äºéœ€æ±‚ä¸æ–­å˜åŒ–ä¸”éœ€è¦å¿«é€Ÿå“åº”çš„é¡¹ç›®</strong>ã€‚<br><strong>å¿«é€ŸåŸå‹æ¨¡å‹ (Rapid Prototype Model)</strong></li><li>å¿«é€Ÿæ„å»ºä¸€ä¸ªå·¥ä½œæ¨¡å‹ï¼Œç„¶åæ ¹æ®ç”¨æˆ·åé¦ˆå®šä¹‰éœ€æ±‚ï¼Œä¹‹åæŠ›å¼ƒåŸæ¨¡å‹å¹¶å¼€å‘æœ€ç»ˆäº§å“ã€‚</li><li><strong>é€‚ç”¨äºéœ€æ±‚ä¸å¤Ÿæ˜ç¡®çš„é¡¹ç›®</strong>ï¼Œé€šè¿‡è¿­ä»£å¿«é€Ÿå“åº”ç”¨æˆ·éœ€æ±‚ã€‚</li></ul><p><strong>èºæ—‹æ¨¡å‹ (Spiral Model)</strong></p><ul><li>ç»“åˆäº†ç€‘å¸ƒæ¨¡å‹çš„ç‰¹ç‚¹ï¼Œå¹¶å¢åŠ äº†<strong>é£é™©åˆ†æ</strong>ã€‚</li><li>é€‚åˆå¤§å‹ä¸”å¤æ‚çš„è½¯ä»¶ç³»ç»Ÿå¼€å‘ï¼Œå°¤å…¶æ˜¯åœ¨é£é™©åˆ†ææ–¹é¢ã€‚</li></ul><p><strong>æ¼”åŒ–æ¨¡å‹ (Evolutionary Model)</strong></p><ul><li>å…ˆæ„å»ºä¸€ä¸ªåˆæ­¥çš„å·¥ä½œæ¨¡å‹ï¼Œç„¶åæ ¹æ®éœ€æ±‚é€æ­¥å®Œå–„ï¼Œè€Œä¸æ˜¯æŠ›å¼ƒé‡æ¥ã€‚</li><li><strong>é€‚ç”¨äºéœ€æ±‚ä¸æ–­æ¼”è¿›å’Œå˜åŒ–çš„æƒ…å†µ</strong>ã€‚</li></ul><p><strong>Væ¨¡å‹ (V-Model)</strong></p><ul><li>æ˜ç¡®æ ‡æ³¨äº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸åŒæµ‹è¯•é˜¶æ®µä¸å¼€å‘é˜¶æ®µçš„å¯¹åº”å…³ç³»ã€‚</li><li><strong>å¼ºè°ƒæµ‹è¯•æ´»åŠ¨ä¸å¼€å‘æ´»åŠ¨çš„å¹¶è¡Œæ€§</strong>ï¼Œé€‚ç”¨äºéœ€è¦ä¸¥æ ¼æµ‹è¯•è¿‡ç¨‹çš„é¡¹ç›®ã€‚</li></ul><p><strong>æ™ºèƒ½æ¨¡å‹ (Intelligent Model)</strong></p><ul><li>ä¹Ÿç§°ä¸ºâ€œåŸºäºçŸ¥è¯†çš„è½¯ä»¶å¼€å‘æ¨¡å‹â€ï¼Œç»“åˆäº†ç€‘å¸ƒå‹å’Œä¸“å®¶ç³»ç»Ÿã€‚</li><li><strong>åˆ©ç”¨ä¸“å®¶ç³»ç»Ÿè¾…åŠ©è½¯ä»¶å¼€å‘</strong>ï¼Œæé«˜æ•ˆç‡å’Œè´¨é‡ã€‚</li></ul><h4 id="è½¯ä»¶å¼€å‘æ–¹æ³•"><a href="#è½¯ä»¶å¼€å‘æ–¹æ³•" class="headerlink" title="è½¯ä»¶å¼€å‘æ–¹æ³•"></a>è½¯ä»¶å¼€å‘æ–¹æ³•</h4><p><strong>ç»“æ„åŒ–è½¯ä»¶å¼€å‘æ–¹æ³•</strong></p><ul><li><strong>é¢å‘åŠŸèƒ½</strong>ã€<strong>é¢å‘æ•°æ®æµ</strong>ã€‚</li><li><strong>è‡ªé¡¶å‘ä¸‹</strong>ã€<strong>é€å±‚åˆ†è§£</strong>ï¼Œå»ºç«‹å¤„ç†æµç¨‹ã€‚</li><li>ä½¿ç”¨<strong>æµç¨‹å›¾</strong>æ¥è¡¨ç¤ºç¨‹åºçš„ç»“æ„å’Œé€»è¾‘ã€‚</li></ul><p><strong>é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘æ–¹æ³•</strong></p><ul><li>åŸºäº<strong>å¯¹è±¡</strong>æ¦‚å¿µï¼Œä»¥<strong>å¯¹è±¡ä¸ºä¸­å¿ƒ</strong>ã€‚</li><li>ä½¿ç”¨<strong>ç±»</strong>å’Œ<strong>ç»§æ‰¿</strong>ä¸ºæ„é€ æœºåˆ¶ã€‚</li><li>æ„å»ºç›¸åº”çš„<strong>è½¯ä»¶ç³»ç»Ÿ</strong>ã€‚</li></ul><p><strong>åŸºäºæ„ä»¶åŒ–çš„è½¯ä»¶å¼€å‘æ–¹æ³•</strong></p><ul><li>ä½¿ç”¨<strong>é¢„å…ˆå»ºç«‹çš„æ„ä»¶</strong>å’Œ<strong>æ¨¡æ¿</strong>ã€‚</li><li><strong>åƒæ­ç§¯æœ¨ä¸€æ ·</strong>è¿›è¡Œæ„é€ å¼€å‘è½¯ä»¶ã€‚</li></ul><p><strong>é¢å‘æ•°æ®ç»“æ„çš„è½¯ä»¶å¼€å‘æ–¹æ³•</strong></p><ul><li>ä»ç›®æ ‡ç³»ç»Ÿçš„<strong>è¾“å…¥</strong>ã€<strong>è¾“å‡ºæ•°æ®ç»“æ„</strong>å…¥æ‰‹ã€‚</li><li>å¯¼å‡º<strong>ç¨‹åºæ¡†æ¶ç»“æ„</strong>ï¼Œå†è¡¥å……å…¶å®ƒç»†èŠ‚ã€‚</li><li>å¾—åˆ°<strong>å®Œæ•´çš„ç¨‹åºç»“æ„å›¾</strong>ã€‚</li></ul><h4 id="è½¯ä»¶å¼€å‘æµ‹è¯•æ–¹æ³•"><a href="#è½¯ä»¶å¼€å‘æµ‹è¯•æ–¹æ³•" class="headerlink" title="è½¯ä»¶å¼€å‘æµ‹è¯•æ–¹æ³•"></a>è½¯ä»¶å¼€å‘æµ‹è¯•æ–¹æ³•</h4><p><strong>ç™½ç›’æµ‹è¯• (White-box Testing)</strong></p><ul><li>ä¹Ÿç§°ä¸º<strong>ç»“æ„æµ‹è¯•</strong>æˆ–<strong>é€»è¾‘é©±åŠ¨æµ‹è¯•</strong>ã€‚</li><li>åœ¨<strong>äº†è§£ç¨‹åºå†…éƒ¨é€»è¾‘</strong>çš„åŸºç¡€ä¸Šè®¾è®¡æµ‹è¯•ç”¨ä¾‹ã€‚</li><li>æµ‹è¯•æ–¹æ³•åŒ…æ‹¬ï¼š<ul><li><strong>è¯­å¥è¦†ç›–</strong>ï¼šç¡®ä¿æ¯ä¸ªè¯­å¥è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><strong>åˆ†æ”¯è¦†ç›–</strong>ï¼šç¡®ä¿æ¯ä¸ªå†³ç­–ç‚¹çš„æ¯ä¸ªåˆ†æ”¯éƒ½è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><strong>æ¡ä»¶è¦†ç›–</strong>ï¼šç¡®ä¿æ¯ä¸ªæ¡ä»¶çš„æ¯ä¸ªå¯èƒ½å–å€¼è‡³å°‘ç”¨ä¸€æ¬¡ã€‚</li><li><strong>è·¯å¾„è¦†ç›–</strong>ï¼šç¡®ä¿ç¨‹åºä¸­æ¯ä¸€æ¡å¯èƒ½çš„è·¯å¾„éƒ½è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡ã€‚</li></ul></li><li>ç›®çš„æ˜¯æ£€æµ‹ä»£ç å†…éƒ¨é€»è¾‘çš„é”™è¯¯ã€‚</li></ul><p><strong>é»‘ç›’æµ‹è¯• (Black-box Testing)</strong></p><ul><li>ä¹Ÿç§°ä¸º<strong>æ•°æ®é©±åŠ¨æµ‹è¯•</strong>æˆ–<strong>åŠŸèƒ½æµ‹è¯•</strong>ã€‚</li><li>åœ¨<strong>ä¸äº†è§£ç¨‹åºå†…éƒ¨é€»è¾‘</strong>çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æµ‹è¯•è½¯ä»¶çš„åŠŸèƒ½æ¥æ£€éªŒè½¯ä»¶ã€‚</li><li>æµ‹è¯•ç”¨ä¾‹æ˜¯åŸºäº<strong>è½¯ä»¶éœ€æ±‚</strong>å’Œ<strong>åŠŸèƒ½</strong>æ¥è®¾è®¡çš„ã€‚</li><li>æµ‹è¯•æ–¹æ³•åŒ…æ‹¬ï¼š<ul><li><strong>ç­‰ä»·ç±»åˆ’åˆ†</strong>ï¼šå°†è¾“å…¥æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ç­‰ä»·ç±»ï¼Œæ¯ä¸ªç±»ä¸­çš„æ•°æ®ä½œç”¨ç›¸åŒã€‚</li><li><strong>è¾¹ç•Œå€¼åˆ†æ</strong>ï¼šé’ˆå¯¹è¾“å…¥æ•°æ®çš„è¾¹ç•Œå€¼è¿›è¡Œæµ‹è¯•ã€‚</li><li><strong>é”™è¯¯çŒœæµ‹</strong>ï¼šåŸºäºç»éªŒå’Œç›´è§‰é€‰æ‹©æµ‹è¯•ç”¨ä¾‹ã€‚</li></ul></li><li>ç›®çš„æ˜¯æ£€æµ‹ç¨‹åºæ˜¯å¦èƒ½æ­£ç¡®å¤„ç†å„ç§è¾“å…¥å’Œä½¿ç”¨åœºæ™¯ã€‚</li></ul><p><strong>ç°ç›’æµ‹è¯• (Grey-box Testing)</strong></p><ul><li>ç»“åˆäº†ç™½ç›’æµ‹è¯•å’Œé»‘ç›’æµ‹è¯•çš„ç‰¹ç‚¹ã€‚</li><li>åœ¨å¯¹ç¨‹åºå†…éƒ¨æœ‰ä¸€å®šäº†è§£ä½†äº†è§£ä¸å®Œå…¨çš„æƒ…å†µä¸‹è¿›è¡Œæµ‹è¯•ã€‚</li><li>æµ‹è¯•è€…äº†è§£ç¨‹åºçš„ä¸€éƒ¨åˆ†å†…éƒ¨é€»è¾‘å’Œç»“æ„ï¼Œä½†ä¸éœ€è¦åƒç™½ç›’æµ‹è¯•é‚£æ ·äº†è§£å…¨éƒ¨ç»†èŠ‚ã€‚</li></ul><p><strong>å…¶ä»–æµ‹è¯•æ–¹æ³•</strong></p><ul><li><strong>å•å…ƒæµ‹è¯•</strong>ï¼šé’ˆå¯¹è½¯ä»¶ä¸­æœ€å°å¯æµ‹è¯•éƒ¨åˆ†è¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ã€‚</li><li><strong>é›†æˆæµ‹è¯•</strong>ï¼šåœ¨å•å…ƒæµ‹è¯•ä¹‹åï¼Œæµ‹è¯•ä¸åŒæ¨¡å—é—´æ¥å£å’Œé›†æˆåçš„åŠŸèƒ½ã€‚</li><li><strong>ç³»ç»Ÿæµ‹è¯•</strong>ï¼šæµ‹è¯•å®Œæ•´çš„ã€é›†æˆçš„è½¯ä»¶ç³»ç»Ÿä»¥éªŒè¯ç³»ç»Ÿç¬¦åˆè§„å®šçš„éœ€æ±‚ã€‚</li><li><strong>éªŒæ”¶æµ‹è¯•</strong>ï¼šæœ€ç»ˆç”¨æˆ·ç¡®è®¤è½¯ä»¶æ˜¯å¦æ»¡è¶³ä»–ä»¬çš„ä¸šåŠ¡éœ€æ±‚å’Œæ˜¯å¦å¯ä»¥æ¥å—ã€‚</li></ul><h4 id="è®¡ç®—æœºç›¸å…³çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„"><a href="#è®¡ç®—æœºç›¸å…³çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„" class="headerlink" title="è®¡ç®—æœºç›¸å…³çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„"></a>è®¡ç®—æœºç›¸å…³çŸ¥è¯†äº§æƒæ³•å¾‹æ³•è§„</h4><p><strong>çŸ¥è¯†äº§æƒ</strong></p><ul><li>åŒ…æ‹¬<strong>å·¥ä¸šäº§æƒ</strong>å’Œ<strong>è‘—ä½œæƒï¼ˆç‰ˆæƒï¼‰</strong>ã€‚</li></ul><p><strong>è‘—ä½œæƒå½’å±</strong></p><ul><li><strong>ä½œè€…å¼€å‘</strong>ï¼šè‘—ä½œæƒå±äº<strong>å¼€å‘è€…</strong>ã€‚</li><li><strong>èŒåŠ¡å¼€å‘</strong>ï¼šè‘—ä½œæƒç”±<strong>å•ä½äº«æœ‰</strong>ã€‚</li><li><strong>åˆä½œå¼€å‘</strong>ï¼šç”±<strong>åˆä½œæ–¹å…±åŒäº«æœ‰</strong>ï¼Œä¸èƒ½å•ç‹¬è½¬è®©ã€‚</li><li><strong>å§”æ‰˜å¼€å‘</strong>ï¼šæŒ‰ç…§<strong>åˆåŒçº¦å®š</strong>ï¼Œæ— çº¦å®šæ—¶å½’<strong>å—æ‰˜äºº</strong>ã€‚</li><li><strong>ä»»åŠ¡å¼€å‘</strong>ï¼šæŒ‰ç…§<strong>åˆåŒçº¦å®š</strong>ï¼Œæ— çº¦å®šæ—¶å½’<strong>å—æ‰˜äºº</strong>ã€‚</li></ul><p><strong>ä¾µæƒè¡Œä¸º</strong></p><ul><li>ä»¥<strong>ç›ˆåˆ©ä¸ºç›®çš„</strong>çš„ä½¿ç”¨ä»–äººä½œå“éƒ½å«ä¾µæƒï¼Œåä¹‹åˆ™<strong>ä¸æ„æˆä¾µæƒ</strong>ã€‚</li></ul><p><strong>å•†ä¸šç§˜å¯†æƒ</strong></p><ul><li>åŒ…æ‹¬<strong>ç»è¥ç§˜å¯†</strong>å’Œ<strong>æŠ€æœ¯ç§˜å¯†</strong>ï¼Œæ˜¯ä¼ä¸šç«äº‰åŠ›çš„æ ¸å¿ƒã€‚</li></ul><p><strong>ä¸“åˆ©æƒ</strong></p><ul><li>éœ€è¦é€šè¿‡<strong>ç”³è¯·</strong>è·å¾—ã€‚</li><li>éµå¾ª<strong>å…ˆç”³è¯·åŸåˆ™</strong>ï¼Œå³å…ˆç”³è¯·è€…å…ˆè·å¾—ä¸“åˆ©ã€‚</li></ul><p><strong>è®¡ç®—æœºè½¯ä»¶ä¿æŠ¤</strong></p><ul><li>è®¡ç®—æœºè½¯ä»¶å—åˆ°è‘—ä½œæƒæ³•ä¿æŠ¤ã€‚</li><li>æœªç»è®¸å¯å¤åˆ¶æˆ–ä¿®æ”¹è½¯ä»¶æ˜¯ä¾µæƒè¡Œä¸ºã€‚</li></ul><p><strong>åˆç†ä½¿ç”¨</strong></p><ul><li>è‘—ä½œæƒæ³•è§„å®šäº†<strong>åˆç†ä½¿ç”¨</strong>çš„èŒƒå›´ï¼Œå¦‚ä¸ªäººå­¦ä¹ ã€ç ”ç©¶ç­‰ã€‚</li></ul><p><strong>å¼€æºåè®®</strong></p><ul><li>å¼€æºè½¯ä»¶éœ€éµå®ˆç›¸åº”çš„<strong>å¼€æºåè®®</strong>ï¼Œå¦‚MITã€GPLç­‰ã€‚</li></ul><p><strong>çŸ¥è¯†äº§æƒä¿æŠ¤æœŸé™</strong></p><table><thead><tr><th>å®¢ä½“ç±»å‹</th><th>æƒåˆ©ç±»å‹</th><th>ä¿æŠ¤æœŸé™åŠå¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>å…¬æ°‘ä½œå“</strong></td><td>ç½²åæƒã€ä¿®æ”¹æƒã€ä¿æŠ¤ä½œå“å®Œæ•´æƒåˆ©</td><td>æ²¡æœ‰é™åˆ¶</td></tr><tr><td><strong>å…¬æ°‘ä½œå“</strong></td><td>å‘è¡¨æƒã€ä½¿ç”¨æƒå’Œè·å¾—æŠ¥é…¬æƒ</td><td>ä½œè€…ä¸€ç”ŸåŠæ­»å50å¹´</td></tr><tr><td><strong>å•ä½ä½œå“</strong></td><td>å‘è¡¨æƒã€ä½¿ç”¨æƒå’Œè·å¾—æŠ¥é…¬æƒ</td><td>50å¹´</td></tr><tr><td><strong>å…¬æ°‘è½¯ä»¶äº§å“</strong></td><td>ç½²åæƒã€ä¿®æ”¹æƒ</td><td>æ²¡æœ‰é™åˆ¶</td></tr><tr><td><strong>å…¬æ°‘è½¯ä»¶äº§å“</strong></td><td>å‘è¡¨æƒã€å¤åˆ¶æƒã€å‘è¡Œæƒã€å‡ºç§Ÿæƒç­‰</td><td>ä½œè€…ä¸€ç”ŸåŠæ­»å50å¹´ï¼Œåˆä½œä½œå“ä»¥æœ€åæ­»äº¡è€…ä¸ºå‡†</td></tr><tr><td><strong>å•ä½è½¯ä»¶äº§å“</strong></td><td>å‘è¡¨æƒã€å¤åˆ¶æƒã€å‘è¡Œæƒã€å‡ºç§Ÿæƒç­‰</td><td>ä½œè€…ä¸€ç”ŸåŠæ­»å50å¹´ï¼Œåˆä½œä½œå“ä»¥æœ€åæ­»äº¡è€…ä¸ºå‡†</td></tr><tr><td><strong>æ³¨å†Œå•†æ ‡</strong></td><td>æ³¨å†Œå•†æ ‡</td><td>æœ‰é™æœŸ10å¹´ï¼Œæœªè½¬ç§»å¯æ³¨é”€ï¼ŒæœŸæ»¡å6ä¸ªæœˆå†…å¿…é¡»ç»­æ³¨</td></tr><tr><td><strong>å‘æ˜ä¸“åˆ©æƒ</strong></td><td>å‘æ˜ä¸“åˆ©æƒ</td><td>20å¹´ï¼ˆç”³è¯·æ—¥å¼€å§‹è®¡ç®—ï¼‰</td></tr><tr><td><strong>å®ç”¨æ–°å‹å’Œå¤–è§‚è®¾è®¡ä¸“åˆ©æƒ</strong></td><td>å®ç”¨æ–°å‹å’Œå¤–è§‚è®¾è®¡ä¸“åˆ©æƒ</td><td>10å¹´ï¼ˆç”³è¯·æ—¥å¼€å§‹è®¡ç®—ï¼‰</td></tr><tr><td><strong>å•†ä¸šæœºå¯†</strong></td><td>å•†ä¸šæœºå¯†</td><td>ä¸ç¡®å®š</td></tr></tbody></table><h2 id="ç¬¬1ç« -è®¡ç®—æœºç½‘ç»œæ¦‚è®º"><a href="#ç¬¬1ç« -è®¡ç®—æœºç½‘ç»œæ¦‚è®º" class="headerlink" title="ç¬¬1ç«  è®¡ç®—æœºç½‘ç»œæ¦‚è®º"></a>ç¬¬1ç«  è®¡ç®—æœºç½‘ç»œæ¦‚è®º</h2><h3 id="è®¡ç®—æœºç½‘ç»œæ¦‚è®º"><a href="#è®¡ç®—æœºç½‘ç»œæ¦‚è®º" class="headerlink" title="è®¡ç®—æœºç½‘ç»œæ¦‚è®º"></a>è®¡ç®—æœºç½‘ç»œæ¦‚è®º</h3><ol><li><p><strong>è®¡ç®—æœºç½‘ç»œå®šä¹‰</strong>ï¼šè®¡ç®—æœºç½‘ç»œæ˜¯é€šè¿‡é€šä¿¡çº¿è·¯å’Œé€šä¿¡è®¾å¤‡è¿æ¥çš„è®¸å¤šçš„<strong>åˆ†æ•£ç‹¬ç«‹å·¥ä½œçš„è®¡ç®—æœºç³»ç»Ÿ</strong>ï¼Œéµä»ä¸€å®šçš„åè®®ç”¨è½¯ä»¶å®ç°<strong>èµ„æºå…±äº«</strong>çš„ç³»ç»Ÿã€‚</p></li><li><p><strong>ç»„æˆ</strong>ï¼šåˆ†ä¸º <strong>ç¡¬ä»¶</strong>ã€<strong>è½¯ä»¶</strong>ã€<strong>åè®®</strong> ä¸‰éƒ¨åˆ†ã€‚åè®®æ˜¯è®¡ç®—æœºç½‘ç»œä¸­è¿›è¡Œæ•°æ®äº¤æ¢è€Œå»ºç«‹çš„<strong>è§„åˆ™</strong>ã€<strong>æ ‡å‡†</strong>æˆ–<strong>çº¦å®š</strong>çš„é›†åˆã€‚</p></li><li><p><strong>åè®®</strong>ï¼š</p><ul><li>å›½é™…æ ‡å‡† <strong>OSI&#x2F;RM ä¸ƒå±‚åè®®</strong>ã€‚</li><li>å…¬è®¤æ ‡å‡† <strong>TCP&#x2F;IP å››å±‚åè®®</strong>ï¼ˆæˆ–äº”å±‚ï¼‰ã€‚<strong>TCP&#x2F;IP åè®®ç°‡</strong>ï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—å¸¸ç”¨åè®®ã€‚</li></ul></li></ol><h3 id="è®¡ç®—æœºç½‘ç»œåˆ†ç±»"><a href="#è®¡ç®—æœºç½‘ç»œåˆ†ç±»" class="headerlink" title="è®¡ç®—æœºç½‘ç»œåˆ†ç±»"></a>è®¡ç®—æœºç½‘ç»œåˆ†ç±»</h3><p><strong>è®¡ç®—æœºç½‘ç»œæŒ‰åˆ†å¸ƒèŒƒå›´åˆ†ç±»</strong>ï¼š</p><ol><li><strong>å±€åŸŸç½‘ (LAN)</strong>ï¼šé€šå¸¸è¦†ç›–è¾ƒå°çš„åœ°ç†åŒºåŸŸï¼Œå¦‚ä¸€ä¸ªåŠå…¬å®¤æˆ–æ ¡å›­ã€‚</li><li><strong>åŸåŸŸç½‘ (MAN)</strong>ï¼šè¦†ç›–åŸå¸‚æˆ–åœ°åŒºçº§èŒƒå›´ï¼Œæ¯”å±€åŸŸç½‘å¤§ï¼Œä½†æ¯”å¹¿åŸŸç½‘å°ã€‚</li><li><strong>å¹¿åŸŸç½‘ (WAN)</strong>ï¼šè¦†ç›–å¹¿æ³›åœ°åŒºï¼Œç”šè‡³è·¨å›½æˆ–å…¨çƒï¼Œå¦‚äº’è”ç½‘ã€‚</li></ol><table><thead><tr><th>ç‰¹æ€§</th><th><strong>å±€åŸŸç½‘ (LAN)</strong></th><th><strong>åŸåŸŸç½‘ (MAN)</strong></th><th><strong>å¹¿åŸŸç½‘ (WAN)</strong></th></tr></thead><tbody><tr><td><strong>åœ°ç†èŒƒå›´</strong></td><td>å®¤å†…ã€æ ¡å›­å†…éƒ¨</td><td>å»ºç­‘ç‰©ä¹‹é—´ã€åŸåŒºå†…</td><td>å›½å†…ã€å›½é™…</td></tr><tr><td><strong>æ‰€æœ‰è€…&#x2F;è¿è¥è€…</strong></td><td>å•ä½æ‰€æœ‰å’Œè¿è¥</td><td>å‡ ä¸ªå•ä½å…±æœ‰æˆ–æ”¿åºœ</td><td>é€šä¿¡è¿è¥å…¬å¸æ‰€æœ‰</td></tr><tr><td><strong>äº’é€šå’Œé€šä¿¡æ–¹å¼</strong></td><td>å…±äº«ä»‹è´¨ã€åˆ†ç»„å¹¿æ’­</td><td>å…±äº«ä»‹è´¨ã€åˆ†ç»„å¹¿æ’­</td><td>å…±äº«ä»‹è´¨ã€åˆ†ç»„äº¤æ¢</td></tr><tr><td><strong>æ•°æ®é€Ÿç‡</strong></td><td>æ¯ç§’å‡ åå…†ä½è‡³å‡ ç™¾å…†ä½</td><td>æ¯ç§’å‡ å…†ä½è‡³å‡ åå…†ä½</td><td>æ¯ç§’å‡ ååƒä½</td></tr><tr><td><strong>è¯¯ç ç‡</strong></td><td>æœ€å°</td><td>ä¸­</td><td>è¾ƒå¤§</td></tr><tr><td><strong>æ‹“æ‰‘ç»“æ„</strong></td><td>è§„åˆ™ç»“æ„ï¼šæ€»çº¿å‹ã€æ˜Ÿå‹å’Œç¯å½¢</td><td>è§„åˆ™ç»“æ„ï¼šæ€»çº¿å‹ã€æ˜Ÿå‹å’Œç¯å½¢</td><td>ä¸è§„åˆ™çš„ç½‘çŠ¶ç»“æ„</td></tr><tr><td><strong>ä¸»è¦åº”ç”¨</strong></td><td>åˆ†å¸ƒå¼æ•°æ®å¤„ç†ã€åŠå…¬è‡ªåŠ¨åŒ–</td><td>LANäº’è”ã€ç»¼åˆå£°éŸ³ã€è§†é¢‘å’Œæ•°æ®ä¸šåŠ¡</td><td>è¿œç¨‹æ•°æ®ä¼ è¾“</td></tr></tbody></table><p><strong>è®¡ç®—æœºç½‘ç»œæŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»</strong>ï¼š</p><ul><li><strong>æ˜Ÿå‹</strong>ï¼šä¸­å¿ƒèŠ‚ç‚¹è¿æ¥æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ï¼Œæ˜“äºå®‰è£…å’Œç®¡ç†ã€‚</li><li><strong>ç¯å½¢</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹é€šè¿‡ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹çš„è¿æ¥å½¢æˆä¸€ä¸ªé—­åˆçš„ç¯è·¯ã€‚</li><li><strong>æ ‘å‹</strong>ï¼šåˆ†å±‚ç»“æ„ï¼Œç±»ä¼¼äºæ ‘çš„åˆ†æ”¯ã€‚</li></ul><p><strong>å…¶ä»–åˆ†ç±»</strong>ï¼š</p><ul><li>å…¬ç”¨ç½‘ä¸ä¸“ç”¨ç½‘ï¼šå…¬ç”¨ç½‘ä¸ºå…¬ä¼—æä¾›æœåŠ¡ï¼Œä¸“ç”¨ç½‘é™äºç‰¹å®šç»„ç»‡æˆ–å›¢ä½“å†…éƒ¨ä½¿ç”¨ã€‚</li><li>é€šä¿¡ç½‘ISPä¸ä¿¡æ¯ç½‘ICPï¼šISPæä¾›äº’è”ç½‘æ¥å…¥æœåŠ¡ï¼ŒICPæä¾›å†…å®¹æœåŠ¡ã€‚</li><li>æ ¡å›­ç½‘ä¸ä¼ä¸šç½‘ï¼šæ ¡å›­ç½‘æœåŠ¡äºæ•™è‚²æœºæ„ï¼Œä¼ä¸šç½‘æœåŠ¡äºå•†ä¸šç»„ç»‡ã€‚</li><li>éª¨å¹²ç½‘ä¸æ¥å…¥ç½‘ï¼šéª¨å¹²ç½‘æ„æˆç½‘ç»œçš„ä¸»è¦é«˜é€Ÿä¼ è¾“é€šé“ï¼Œæ¥å…¥ç½‘è¿æ¥ç»ˆç«¯ç”¨æˆ·åˆ°éª¨å¹²ç½‘ã€‚</li><li>æœ‰çº¿ç½‘ä¸æ— çº¿ç½‘ï¼šæœ‰çº¿ç½‘é€šè¿‡ç‰©ç†ç”µç¼†ä¼ è¾“æ•°æ®ï¼Œæ— çº¿ç½‘é€šè¿‡æ— çº¿ç”µæ³¢ä¼ è¾“æ•°æ®ã€‚</li></ul><h3 id="ç½‘ç»œåè®®ä½“ç³»ç»“æ„"><a href="#ç½‘ç»œåè®®ä½“ç³»ç»“æ„" class="headerlink" title="ç½‘ç»œåè®®ä½“ç³»ç»“æ„"></a>ç½‘ç»œåè®®ä½“ç³»ç»“æ„</h3><p><strong>OSI&#x2F;RMï¼ˆå¼€æ”¾ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹ï¼‰</strong> ä¸ƒå±‚åŒ…æ‹¬ï¼š</p><ol><li><strong>åº”ç”¨å±‚</strong>ï¼šæä¾›ç½‘ç»œæœåŠ¡ç»™æœ€ç»ˆç”¨æˆ·çš„åº”ç”¨ç¨‹åºã€‚</li><li><strong>è¡¨ç¤ºå±‚</strong>ï¼šç¡®ä¿ä¸€ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚æ‰€å‘é€çš„ä¿¡æ¯å¯ä»¥è¢«å¦ä¸€ä¸ªç³»ç»Ÿçš„åº”ç”¨å±‚è¯»å–ã€‚</li><li><strong>ä¼šè¯å±‚</strong>ï¼šç®¡ç†å’Œæ§åˆ¶ä¸¤ä¸ªé€šä¿¡ç³»ç»Ÿä¹‹é—´çš„ä¼šè¯è¿æ¥ã€‚</li><li><strong>ä¼ è¾“å±‚</strong>ï¼šè´Ÿè´£åœ¨ç½‘ç»œä¸­ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ã€‚</li><li><strong>ç½‘ç»œå±‚</strong>ï¼šè´Ÿè´£æ•°æ®åŒ…ä»æºåˆ°å®¿çš„ä¼ è¾“å’Œè·¯ç”±é€‰æ‹©ã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼šåœ¨ç›¸é‚»çš„ç½‘ç»œè®¾å¤‡ä¹‹é—´æä¾›æ•°æ®ä¼ è¾“ã€‚</li><li><strong>ç‰©ç†å±‚</strong>ï¼šè´Ÿè´£åœ¨ç‰©ç†åª’ä»‹ä¸Šå®ç°åŸå§‹çš„æ¯”ç‰¹æµä¼ è¾“ã€‚</li></ol><table><thead><tr><th>OSIå±‚æ¬¡ç¼–å·</th><th>å±‚æ¬¡åç§°</th><th>å°è£…å•ä½</th><th>åœ°å€æ ‡è¯†</th><th>ä¸»è¦åŠŸèƒ½</th></tr></thead><tbody><tr><td>7</td><td>åº”ç”¨å±‚</td><td>åº”ç”¨è¿›ç¨‹</td><td>è¿›ç¨‹å·</td><td>åº”ç”¨å±‚åŒ…å«ç”¨æˆ·åº”ç”¨ç¨‹åºå’Œåè®®ã€‚</td></tr><tr><td>6</td><td>è¡¨ç¤ºå±‚</td><td>åº”ç”¨è¿›ç¨‹</td><td>è¿›ç¨‹å·</td><td>æ•°æ®åŠ å¯†ä¸å‹ç¼©ã€è¯­æ³•è¡¨ç¤ºä¸è¿æ¥ç®¡ç†ã€‚</td></tr><tr><td>5</td><td>ä¼šè¯å±‚</td><td>åº”ç”¨è¿›ç¨‹</td><td>è¿›ç¨‹å·</td><td>ä¼šè¯é“¾æ¥çš„æ¢å¤ä¸é‡Šæ”¾ã€å¯¹ä¼šè¯åˆ†æ®µã€åŒæ­¥ç­‰ã€‚</td></tr><tr><td>4</td><td>ä¼ è¾“å±‚</td><td>æ•°æ®æŠ¥æ–‡ã€æ•°æ®æ®µ</td><td>ç«¯å£å·</td><td>æä¾›ç«¯åˆ°ç«¯ä¹‹é—´å¯é é€æ˜çš„æ•°æ®ä¼ è¾“ã€‚åˆ†æ®µä¸é‡ç»„ã€åº”ç­”ã€æ’åºã€å·®é”™æ§åˆ¶åŠæµé‡æ§åˆ¶ï¼Œä¿è¯æ•°æ®ä¼ è¾“æ­£ç¡®å®Œæ•´ã€‚</td></tr><tr><td>3</td><td>ç½‘ç»œå±‚</td><td>æ•°æ®åŒ…ã€æ•°æ®åˆ†ç»„</td><td>IPåœ°å€</td><td>è·¯å¾„é€‰æ‹©ï¼Œç½‘ç»œè¿æ¥çš„å¤šè·¯å¤ç”¨ã€å·®é”™çš„æ£€æµ‹ä¸æ¢å¤ã€æµé‡æ§åˆ¶æœåŠ¡é€‰æ‹©ã€‚</td></tr><tr><td>2</td><td>æ•°æ®é“¾è·¯å±‚</td><td>æ•°æ®å¸§</td><td>MACåœ°å€</td><td>ä¸å¯é ä¿¡é“-&gt;å¯é ä¿¡é“ã€‚å°†æ¯”ç‰¹ç»„ç»‡æˆå¸§ï¼Œé“¾è·¯ä¸Šæä¾›å·®é”™æ§åˆ¶å’Œæµé‡æ§åˆ¶ã€‚</td></tr><tr><td>1</td><td>ç‰©ç†å±‚</td><td>æ¯”ç‰¹æµ</td><td>bitæµ</td><td>æä¾›ç‰©ç†é€šè·¯ã€äºŒè¿›åˆ¶æ•°æ®æ¯”ç‰¹æµä¼ è¾“ã€å®šä¹‰æœºæ¢°&#x2F;ç”µæ°”ç‰¹æ€§æ¥å£ã€‚</td></tr></tbody></table><p><strong>TCP&#x2F;IPï¼ˆå› ç‰¹ç½‘ä¼ è¾“æ§åˆ¶åè®®&#x2F;ç½‘é™…åè®®ï¼‰</strong> å››å±‚åŒ…æ‹¬ï¼š</p><ul><li><strong>åº”ç”¨å±‚</strong>ï¼šç½‘ç»œæœåŠ¡çš„æœ€ç»ˆç”¨æˆ·ç•Œé¢ï¼Œå¦‚HTTPã€FTPç­‰ã€‚</li><li><strong>ä¼ è¾“å±‚</strong>ï¼šç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œå¯é æ€§ï¼Œå¦‚TCPå’ŒUDPã€‚</li><li><strong>äº’è”ç½‘å±‚</strong>ï¼šè´Ÿè´£æ•°æ®åŒ…ä»æºåˆ°å®¿çš„ä¼ è¾“ï¼Œä½¿ç”¨IPè¿›è¡Œè·¯ç”±é€‰æ‹©ã€‚</li><li><strong>ç½‘ç»œæ¥å£å±‚</strong>ï¼šè´Ÿè´£åœ¨ç½‘ç»œä»‹è´¨ä¸Šå®ç°æ•°æ®çš„ç‰©ç†ä¼ è¾“ã€‚</li></ul><p><strong>æ³¨</strong>ï¼šTCP&#x2F;IPæ¨¡å‹æœ‰æ—¶ä¹Ÿç»†åˆ†ä¸ºäº”å±‚ï¼Œå°†ç½‘ç»œæ¥å£å±‚è¿›ä¸€æ­¥åˆ†ä¸ºï¼š</p><ul><li><strong>ç‰©ç†å±‚</strong>ï¼šå®šä¹‰äº†ç‰©ç†åª’ä»‹å’Œç”µæ°”ä¿¡å·çš„è§„èŒƒã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼šç¡®ä¿ç‰©ç†å±‚ä¼ è¾“çš„æ•°æ®æ— è¯¯ï¼Œå¦‚ä»¥å¤ªç½‘ã€‚</li></ul><table><thead><tr><th>å±‚æ¬¡</th><th>åç§°</th><th>å°è£…å•ä½</th><th>åœ°å€æ ‡è¯†</th><th>ä¸»è¦åŠŸèƒ½</th><th>ä¸»è¦åè®®</th></tr></thead><tbody><tr><td>5</td><td>åº”ç”¨å±‚</td><td>æ¶ˆæ¯ã€æ•°æ®</td><td>URLã€åŸŸåã€ç«¯å£å·</td><td>ä¸ºåº”ç”¨è½¯ä»¶æä¾›ç½‘ç»œæœåŠ¡å’Œæ¥å£</td><td>HTTP, FTP, SMTP, DNS, SSH, Telnet, IMAP, POP</td></tr><tr><td>4</td><td>ä¼ è¾“å±‚</td><td>æ•°æ®æŠ¥æ–‡ã€æ•°æ®æ®µ</td><td>ç«¯å£å·</td><td>æä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡å’Œæ•°æ®ä¼ è¾“æœåŠ¡</td><td>TCP, UDP</td></tr><tr><td>3</td><td>ç½‘ç»œå±‚</td><td>æ•°æ®åŒ…ã€æ•°æ®åˆ†ç»„</td><td>IPåœ°å€</td><td>è´Ÿè´£æ•°æ®åŒ…çš„è·¯ç”±å’Œè½¬å‘</td><td>IP, ICMP, ARP, IGMP, OSPF, BGP</td></tr><tr><td>2</td><td>æ•°æ®é“¾è·¯å±‚</td><td>å¸§</td><td>MACåœ°å€</td><td>åœ¨ç›¸é‚»ç½‘ç»œè®¾å¤‡é—´ä¼ è¾“å¸§ï¼Œé”™è¯¯æ£€æµ‹ä¸çº æ­£</td><td>Ethernet II, PPP, SLIP, ARP</td></tr><tr><td>1</td><td>ç‰©ç†å±‚</td><td>æ¯”ç‰¹æµ</td><td>ç‰©ç†åœ°å€</td><td>å®šä¹‰ç‰©ç†åª’ä»‹å’Œç”µæ°”ä¿¡å·è§„èŒƒï¼Œå®ç°æ¯”ç‰¹æµä¼ è¾“</td><td>Ethernet, Wi-Fi, DSL, Cable, Token Ring</td></tr></tbody></table><h3 id="è®¡ç®—æœºç½‘ç»œä¼ è¾“è¿‡ç¨‹"><a href="#è®¡ç®—æœºç½‘ç»œä¼ è¾“è¿‡ç¨‹" class="headerlink" title="è®¡ç®—æœºç½‘ç»œä¼ è¾“è¿‡ç¨‹"></a>è®¡ç®—æœºç½‘ç»œä¼ è¾“è¿‡ç¨‹</h3><p>ç½‘ç»œæ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼šæ•°æ®å°è£…ä¸è§£å°è£…<br><img src="https://xinhaojin.github.io/picx-images-hosting/ca0d7164524bb7fd8a3fad2c815e3365.5q7cysnf6s.jpg"></p><h2 id="ç¬¬2ç« -æ•°æ®é€šä¿¡åŸºç¡€"><a href="#ç¬¬2ç« -æ•°æ®é€šä¿¡åŸºç¡€" class="headerlink" title="ç¬¬2ç«  æ•°æ®é€šä¿¡åŸºç¡€"></a>ç¬¬2ç«  æ•°æ®é€šä¿¡åŸºç¡€</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>é€šä¿¡çš„ç›®çš„æ˜¯ä¼ é€’ä¿¡æ¯ï¼Œå‘é€ä¿¡æ¯çš„å«åšä¿¡æºï¼Œæ¥æ”¶ä¿¡æ¯çš„å«åšä¿¡å®¿ï¼Œä¸­é—´çš„é€šä¿¡çº¿è·¯å«åšä¿¡é“ï¼Œä¿¡é“å—åˆ°çš„å¹²æ‰°ç§°ä¸ºå™ªå£°ã€‚</p><p>ä¿¡å·åˆ†ä¸ºæ¨¡æ‹Ÿä¿¡å·å’Œæ•°å­—ä¿¡å·</p><ul><li>æ¨¡æ‹Ÿä¿¡å·æ˜¯è¿ç»­çš„</li><li>æ•°å­—ä¿¡å·æ˜¯ç¦»æ•£çš„</li></ul><h3 id="ä¿¡é“ç‰¹æ€§"><a href="#ä¿¡é“ç‰¹æ€§" class="headerlink" title="ä¿¡é“ç‰¹æ€§"></a>ä¿¡é“ç‰¹æ€§</h3><h4 id="ä¿¡é“å¸¦å®½"><a href="#ä¿¡é“å¸¦å®½" class="headerlink" title="ä¿¡é“å¸¦å®½"></a>ä¿¡é“å¸¦å®½</h4><p><strong>æ¨¡æ‹Ÿä¿¡é“å¸¦å®½</strong><br>ä¿¡é“å¸¦å®½$W &#x3D; f2 - f1$ï¼Œå…¶ä¸­$f1$æ˜¯ä½é¢‘ï¼Œ$f2$æ˜¯é«˜é¢‘ã€‚ç‰©ç†ä»‹è´¨ä¸€æ—¦ç¡®å®šï¼Œå¸¦å®½é€šå¸¸å°±å›ºå®šäº†ã€‚<br><strong>æ•°å­—ä¿¡é“å¸¦å®½</strong></p><ul><li>å°¼å¥æ–¯ç‰¹å®šç†</li></ul><ol><li><strong>å…¬å¼</strong>ï¼š<ul><li>æœ€å¤§ç å…ƒé€Ÿç‡ï¼š$B &#x3D; 2W$ï¼Œå…¶ä¸­$B$ä¸ºç å…ƒé€Ÿç‡ï¼Œå•ä½ä¸ºæ³¢ç‰¹ï¼ˆBaudï¼‰ï¼›$W$ä¸ºä¿¡é“å¸¦å®½ï¼Œå•ä½ä¸ºèµ«å…¹ï¼ˆHzï¼‰ã€‚</li><li>æé™æ•°æ®é€Ÿç‡ï¼š$R &#x3D; B\log_{2}N &#x3D; 2W\log_{2}N$ï¼Œå•ä½ä¸ºæ¯”ç‰¹&#x2F;ç§’ï¼ˆb&#x2F;sï¼‰ã€‚</li></ul></li><li><strong>è§£é‡Š</strong>ï¼š<ul><li>å°¼å¥æ–¯ç‰¹å®šç†æŒ‡å‡ºç†æƒ³ä½é€šä¿¡é“ä¸‹çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡æ˜¯ä¿¡é“å¸¦å®½çš„ 2 å€ã€‚</li><li>ç å…ƒé€Ÿç‡å³æ¯ç§’å‘é€åŒ…è£¹ä¸ªæ•°ï¼Œå®ƒè¡¨ç¤ºå•ä½æ—¶é—´å†…é€šè¿‡ä¿¡é“ä¼ è¾“çš„ç å…ƒä¸ªæ•°ã€‚</li><li>æ•°æ®é€Ÿç‡å³æ¯ç§’å‘é€åŒ…è£¹é‡é‡ï¼Œæé™æ•°æ®é€Ÿç‡ä¸ç å…ƒé€Ÿç‡å’Œç å…ƒçš„ç¦»æ•£å€¼ä¸ªæ•°$N$æœ‰å…³ã€‚è¿™é‡Œ$N$è¡¨ç¤ºä¸åŒçš„ç å…ƒçŠ¶æ€æ•°ï¼Œä¾‹å¦‚åœ¨äºŒè¿›åˆ¶ä¸­ï¼Œ$N &#x3D; 2$ï¼Œè¡¨ç¤ºæœ‰ä¸¤ç§ä¸åŒçš„ç å…ƒçŠ¶æ€ï¼ˆ0 å’Œ 1ï¼‰ã€‚æé™æ•°æ®é€Ÿç‡æ˜¯åœ¨ç»™å®šä¿¡é“å¸¦å®½å’Œç å…ƒç¦»æ•£å€¼ä¸ªæ•°çš„æƒ…å†µä¸‹ï¼Œä¿¡é“èƒ½å¤Ÿä¼ è¾“çš„æœ€å¤§æ•°æ®é€Ÿç‡ã€‚</li></ul></li></ol><ul><li>é¦™å†œå®šç†</li></ul><ol><li><strong>å…¬å¼</strong>ï¼š$C &#x3D; W\log_{2}(1 + S&#x2F;N)$ï¼Œå…¶ä¸­$C$ä¸ºä¿¡é“å®¹é‡ï¼Œå•ä½ä¸ºæ¯”ç‰¹&#x2F;ç§’ï¼ˆb&#x2F;sï¼‰ï¼›$W$ä¸ºä¿¡é“å¸¦å®½ï¼Œå•ä½ä¸ºèµ«å…¹ï¼ˆHzï¼‰ï¼›$S$ä¸ºä¿¡å·åŠŸç‡ï¼Œ$N$ä¸ºå™ªå£°åŠŸç‡ï¼Œ$S&#x2F;N$ä¸ºä¿¡å™ªæ¯”ã€‚</li><li><strong>è§£é‡Š</strong>ï¼š<ul><li>é¦™å†œå®šç†ç»™å‡ºäº†åœ¨æœ‰å™ªå£°çš„ä¿¡é“ä¸­ï¼Œä¿¡é“å®¹é‡ä¸ä¿¡é“å¸¦å®½ã€ä¿¡å™ªæ¯”ä¹‹é—´çš„å…³ç³»ã€‚</li><li>ä¿¡é“å®¹é‡è¡¨ç¤ºåœ¨ç‰¹å®šä¿¡é“æ¡ä»¶ä¸‹èƒ½å¤Ÿå¯é ä¼ è¾“çš„æœ€å¤§æ•°æ®é€Ÿç‡ã€‚</li><li>ä¿¡å™ªæ¯”æ˜¯ä¿¡å·åŠŸç‡ä¸å™ªå£°åŠŸç‡çš„æ¯”å€¼ï¼Œé€šå¸¸ç”¨åˆ†è´ï¼ˆdBï¼‰è¡¨ç¤ºï¼Œå³$dB&#x3D;10\log_{10}(S&#x2F;N)$ã€‚</li></ul></li></ol><h4 id="ä¿¡é“å»¶è¿Ÿ"><a href="#ä¿¡é“å»¶è¿Ÿ" class="headerlink" title="ä¿¡é“å»¶è¿Ÿ"></a>ä¿¡é“å»¶è¿Ÿ</h4><p><strong>æ€»å»¶æ—¶æ„æˆ</strong><br>æ€»å»¶æ—¶ &#x3D; çº¿è·¯å»¶è¿Ÿ + å‘é€å»¶è¿Ÿã€‚</p><p><strong>çº¿è·¯å»¶è¿Ÿ</strong><br>çº¿è·¯å»¶è¿Ÿå–å†³äºä¼ è¾“è·ç¦»å’Œä¼ è¾“é€Ÿåº¦ï¼Œè®¡ç®—å…¬å¼ä¸ºçº¿è·¯å»¶è¿Ÿ &#x3D; ä¼ è¾“è·ç¦»&#x2F;ä¼ è¾“é€Ÿåº¦ï¼Œä¾‹å¦‚ 1000 ç±³ç”µç¼†ï¼Œå»¶æ—¶ä¸º 5usï¼ˆå‡è®¾ç”µç¼†ä¸­ä¼ æ’­é€Ÿåº¦ä¸€èˆ¬ä¸ºå…‰é€Ÿçš„ 67%ï¼Œå³ 200m&#x2F;usï¼‰ã€‚</p><p><strong>å‘é€å»¶è¿Ÿ</strong><br>å‘é€å»¶è¿Ÿä¸æ•°æ®å¸§å¤§å°å’Œé€Ÿç‡æœ‰å…³ï¼Œè®¡ç®—å…¬å¼ä¸ºå‘é€å»¶è¿Ÿ &#x3D; æ•°æ®å¸§å¤§å°&#x2F;é€Ÿç‡ï¼Œä¾‹å¦‚åœ¨ 100M çº¿è·¯ä¸Šå‘é€ 1000 å­—èŠ‚æ•°æ®ï¼Œå»¶æ—¶ä¸º 80usï¼ˆ$1000 * 8 &#x2F;(100 * 10^{6}) &#x3D; 8 * 10^{-5}s &#x3D; 80us$ï¼‰ã€‚</p><p><strong>å«æ˜Ÿä¿¡é“æ—¶å»¶</strong><br>å«æ˜Ÿä¿¡é“çš„æ—¶å»¶å¤§çº¦ 270msï¼ˆæ¥å›åŒå‘çš„å»¶è¿Ÿ 540msï¼‰ã€‚</p><h3 id="é€šä¿¡ä¼ è¾“ä»‹è´¨"><a href="#é€šä¿¡ä¼ è¾“ä»‹è´¨" class="headerlink" title="é€šä¿¡ä¼ è¾“ä»‹è´¨"></a>é€šä¿¡ä¼ è¾“ä»‹è´¨</h3><p><strong>æœ‰çº¿ä»‹è´¨</strong>ï¼š</p><ul><li><strong>åŒè½´ç”µç¼†</strong>ï¼šåˆ†ç²—ã€ç»†ï¼Œä¼ é€è·ç¦»é•¿ä¸”ä¿¡å·ç¨³å®šï¼Œç”¨äºç”µè§†ç›‘è§†ã€éŸ³å“è®¾å¤‡ä¼ éŸ³é¢‘ã€‚</li><li><strong>åŒç»çº¿</strong>ï¼šç¼ ç»•é™å¹²æ‰°ï¼Œ100Mbps ç”¨ 4 æ ¹ï¼Œ1000Mbps ç”¨ 8 æ ¹ã€‚ç½‘å£ RJ45ï¼Œç”µè¯å£ RJ11ã€‚5 ç±»çº¿ 100Mï¼Œè¶… 5&#x2F;6 ç±»çº¿ 1000Mï¼Œ7 ç±»çº¿ 10Gã€‚</li><li><strong>å…‰çº¤</strong>ï¼šåˆ©ç”¨å…‰å…¨åå°„ä¼ å¯¼ï¼ŒæŸè€—ä½ï¼Œé€‚åˆé•¿è·ç¦»ä¿¡æ¯ä¼ é€’ã€‚<ul><li><strong>å•æ¨¡å…‰çº¤</strong>ï¼šå°ºå¯¸ä¸å…‰æ³¢é•¿å¯æ¯”ï¼Œ5 - 10umï¼Œä¸€ç§æ¨¡å¼ä¼ æ’­ï¼Œå¸¦å®½æå®½ï¼Œé€‚ç”¨äºå¤§å®¹é‡é•¿è·ç¦»é€šä¿¡ï¼ˆè´µï¼‰ã€‚</li><li><strong>å¤šæ¨¡å…‰çº¤</strong>ï¼šå°ºå¯¸è¿œå¤§äºå…‰æ³¢æ³¢é•¿ï¼Œ50umã€62.5umï¼Œå¤šç§æ¨¡å¼ä¼ æ’­ï¼Œç”¨äºå°å®¹é‡çŸ­è·ç¦»é€šä¿¡ï¼ˆä¾¿å®œï¼‰ã€‚</li></ul></li></ul><p><strong>æ— çº¿ä»‹è´¨</strong>ï¼š</p><ul><li><strong>æ— çº¿ç”µæ³¢</strong>ï¼š500kHz - 1000MHzï¼Œèƒ½é‡å°ã€æ³¢é•¿é•¿ã€é¢‘ç‡ä½ï¼Œç”¨äºå¹¿ç”µå’Œæ— çº¿é€šä¿¡ã€‚</li><li><strong>å¾®æ³¢</strong>ï¼š300MHz - 300GHzï¼Œæ³¢é•¿ä½ã€é¢‘ç‡é«˜ã€èƒ½é‡å¤§ï¼Œç”¨äºé›·è¾¾ã€é£æœºå¯¼èˆªã€‚</li></ul><h3 id="æ•°æ®ç¼–ç "><a href="#æ•°æ®ç¼–ç " class="headerlink" title="æ•°æ®ç¼–ç "></a>æ•°æ®ç¼–ç </h3><p>çœ‹æ³¢è§£ç </p><h4 id="ææ€§ç¼–ç "><a href="#ææ€§ç¼–ç " class="headerlink" title="ææ€§ç¼–ç "></a>ææ€§ç¼–ç </h4><p>ææ€§ç ï¼š1ä½ç”µå¹³ï¼Œ0é«˜ç”µå¹³<br>å•ææ€§ç¼–ç ï¼š1é«˜ç”µå¹³ï¼Œ0æ— ç”µå¹³<br>åŒææ€§ç¼–ç ï¼š0ç”µå¹³è¡¨ç¤º0ï¼Œ1åˆ™åœ¨æ­£è´Ÿä¹‹é—´äº¤æ›¿ç¿»è½¬ï¼Œ1è·³0ä¸è·³<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.9gwik5f7t0.jpg" alt="image"></p><h4 id="æ›¼å½»æ–¯ç‰¹ç¼–ç "><a href="#æ›¼å½»æ–¯ç‰¹ç¼–ç " class="headerlink" title="æ›¼å½»æ–¯ç‰¹ç¼–ç "></a>æ›¼å½»æ–¯ç‰¹ç¼–ç </h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.syw52i6i7.jpg" alt="image"></p><h4 id="å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç "><a href="#å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç " class="headerlink" title="å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç "></a>å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç </h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.45ml1y9eh.jpg" alt="image"></p><h4 id="æ›¼å½»æ–¯ç‰¹ç¼–ç ç‰¹ç‚¹æ€»ç»“"><a href="#æ›¼å½»æ–¯ç‰¹ç¼–ç ç‰¹ç‚¹æ€»ç»“" class="headerlink" title="æ›¼å½»æ–¯ç‰¹ç¼–ç ç‰¹ç‚¹æ€»ç»“"></a>æ›¼å½»æ–¯ç‰¹ç¼–ç ç‰¹ç‚¹æ€»ç»“</h4><p>æ›¼å½»æ–¯ç‰¹ç¼–ç å’Œå·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç æ˜¯å…¸å‹çš„åŒç›¸ç ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>è¦æ±‚æ¯ä¸€ä½éƒ½æœ‰ä¸€ä¸ªç”µå¹³è½¬æ¢ï¼Œä¸€é«˜ä¸€ä½ï¼Œå¿…é¡»ç¿»è½¬ã€‚</li><li>å…·æœ‰è‡ªå®šæ—¶å’Œæ£€æµ‹é”™è¯¯çš„åŠŸèƒ½ã€‚</li><li>å°†æ—¶é’Ÿå’Œæ•°æ®åŒ…å«åœ¨ä¿¡å·æ•°æ®æµä¸­ï¼Œä¹Ÿç§°è‡ªåŒæ­¥ç ã€‚</li><li>ç¼–ç æ•ˆç‡ä½ï¼Œç¼–ç æ•ˆç‡éƒ½æ˜¯ 50%ã€‚æ•°æ®é€Ÿç‡æ˜¯ç å…ƒé€Ÿç‡çš„ä¸€åŠï¼Œå½“æ•°æ®ä¼ è¾“é€Ÿç‡ä¸º 100Mbps æ—¶ï¼Œç å…ƒé€Ÿç‡ä¸º 200M baudã€‚</li></ul><h4 id="ç¼–ç æ•ˆç‡"><a href="#ç¼–ç æ•ˆç‡" class="headerlink" title="ç¼–ç æ•ˆç‡"></a>ç¼–ç æ•ˆç‡</h4><table><thead><tr><th>ç¼–ç ç±»å‹</th><th>ç¼–ç æ•ˆç‡</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æ›¼å½»æ–¯ç‰¹ç¼–ç </td><td>50%</td><td>ä»¥å¤ªç½‘</td></tr><tr><td>4B&#x2F;5B ç¼–ç </td><td>80%</td><td>ç™¾å…†ä»¥å¤ªç½‘</td></tr><tr><td>8B&#x2F;10B ç¼–ç </td><td>80%</td><td>åƒå…†ä»¥å¤ªç½‘</td></tr><tr><td>64B&#x2F;66B ç¼–ç </td><td>97%</td><td>ä¸‡å…†ä»¥å¤ªç½‘</td></tr></tbody></table><h3 id="æ•°å­—è°ƒåˆ¶æŠ€æœ¯"><a href="#æ•°å­—è°ƒåˆ¶æŠ€æœ¯" class="headerlink" title="æ•°å­—è°ƒåˆ¶æŠ€æœ¯"></a>æ•°å­—è°ƒåˆ¶æŠ€æœ¯</h3><p>æ•°å­—ä¿¡å·è½¬æ¨¡æ‹Ÿä¿¡å·<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.5c0x822w8c.jpg" alt="image"></p><table><thead><tr><th>æ•°å­—è°ƒåˆ¶æ–¹å¼</th><th>æè¿°</th><th>ç‰¹å¾</th></tr></thead><tbody><tr><td>å¹…åº¦é”®æ§ï¼ˆASKï¼‰</td><td>ç”¨è½½æ³¢çš„ä¸¤ä¸ªä¸åŒæŒ¯å¹…è¡¨ç¤º 0 å’Œ 1ã€‚</td><td>0æ²¡æœ‰æŒ¯å¹…</td></tr><tr><td>é¢‘ç§»é”®æ§ï¼ˆFSKï¼‰</td><td>ç”¨è½½æ³¢çš„ä¸¤ä¸ªä¸åŒé¢‘ç‡è¡¨ç¤º 0 å’Œ 1ã€‚</td><td>æœ‰ç–å¯†</td></tr><tr><td>ç›¸ç§»é”®æ§ï¼ˆPSKï¼‰</td><td>ç”¨è½½æ³¢çš„èµ·å§‹ç›¸ä½çš„å˜åŒ–è¡¨ç¤º 0 å’Œ 1ã€‚</td><td>åƒå±è‚¡</td></tr><tr><td>æ­£äº¤å¹…åº¦è°ƒåˆ¶ï¼ˆQAMï¼‰</td><td>æŠŠä¸¤ä¸ªå¹…åº¦ç›¸åŒä½†ç›¸ä½å·® 90Â°çš„æ¨¡æ‹Ÿä¿¡å·åˆæˆä¸€ä¸ªæ¨¡æ‹Ÿä¿¡å·ã€‚</td><td>&#x2F;</td></tr></tbody></table><ul><li>ç å…ƒåªå–ä¸¤ä¸ªç›¸ä½å€¼å«2ç›¸è°ƒåˆ¶ï¼Œ ç å…ƒå¯å–4ä¸ªç›¸ä½å«4ç›¸è°ƒåˆ¶ï¼Œ åˆ™N&#x3D;2,N&#x3D;4ã€‚DPSKæ˜¯2ç›¸è°ƒåˆ¶, N&#x3D;2,QPSKæ˜¯4ç›¸è°ƒåˆ¶, N&#x3D;4ã€‚</li></ul><h3 id="è„‰å†²ç¼–ç è°ƒåˆ¶ï¼ˆPCMï¼‰"><a href="#è„‰å†²ç¼–ç è°ƒåˆ¶ï¼ˆPCMï¼‰" class="headerlink" title="è„‰å†²ç¼–ç è°ƒåˆ¶ï¼ˆPCMï¼‰"></a>è„‰å†²ç¼–ç è°ƒåˆ¶ï¼ˆPCMï¼‰</h3><p>æ¨¡æ‹Ÿä¿¡å·è½¬æ•°å­—ä¿¡å·<br><strong>PCM æ•°å­—åŒ–è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šé‡‡æ ·ã€é‡åŒ–å’Œç¼–ç ã€‚</strong></p><p><strong>ä¸€ã€é‡‡æ ·</strong><br>æŒ‰ç…§ä¸€å®šçš„æ—¶é—´é—´éš”å¯¹æ¨¡æ‹Ÿä¿¡å·è¿›è¡Œå–æ ·ï¼ŒæŠŠæ¨¡æ‹Ÿä¿¡å·çš„å½“å‰å€¼ä½œä¸ºæ ·æœ¬ã€‚ä¾æ®å¥ˆå¥æ–¯ç‰¹é‡‡æ ·å®šç†ï¼Œå¦‚æœæ¨¡æ‹Ÿä¿¡å·çš„æœ€é«˜é¢‘ç‡ä¸º$f_{max}$ï¼Œè‹¥ä»¥å¤§äºç­‰äº$2f_{max}$çš„é‡‡æ ·é¢‘ç‡å¯¹å…¶è¿›è¡Œé‡‡æ ·ï¼Œåˆ™é‡‡æ ·å¾—åˆ°çš„ç¦»æ•£ä¿¡å·åºåˆ—å°±èƒ½å®Œæ•´åœ°æ¢å¤å‡ºåŸå§‹ä¿¡å·ã€‚å…¬å¼ä¸º$f&#x3D;\frac{1}{T}\geq2f_{max}$ï¼Œå…¶ä¸­$f$æ˜¯é‡‡æ ·é¢‘ç‡ï¼Œ$T$æ˜¯é‡‡æ ·å‘¨æœŸã€‚</p><p><strong>äºŒã€é‡åŒ–</strong><br>æŠŠå–æ ·åå¾—åˆ°çš„æ ·æœ¬ç”±è¿ç»­å€¼è½¬æ¢ä¸ºç¦»æ•£å€¼ï¼Œç¦»æ•£å€¼çš„ä¸ªæ•°å†³å®šäº†é‡åŒ–çš„ç²¾åº¦ã€‚</p><p><strong>ä¸‰ã€ç¼–ç </strong><br>æŠŠé‡åŒ–åçš„æ ·æœ¬å€¼å˜æˆç›¸åº”çš„äºŒè¿›åˆ¶ä»£ç ã€‚</p><h3 id="æ•°æ®é€šä¿¡æ–¹å¼"><a href="#æ•°æ®é€šä¿¡æ–¹å¼" class="headerlink" title="æ•°æ®é€šä¿¡æ–¹å¼"></a>æ•°æ®é€šä¿¡æ–¹å¼</h3><h4 id="æŒ‰é€šä¿¡æ–¹å‘åˆ†"><a href="#æŒ‰é€šä¿¡æ–¹å‘åˆ†" class="headerlink" title="æŒ‰é€šä¿¡æ–¹å‘åˆ†"></a>æŒ‰é€šä¿¡æ–¹å‘åˆ†</h4><ol><li><strong>å•å·¥é€šä¿¡</strong>ï¼šä¿¡æ¯åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¼ é€ï¼Œå‘é€æ–¹ä¸èƒ½æ¥æ”¶ï¼Œæ¥æ”¶æ–¹ä¸èƒ½å‘é€ï¼ˆå¦‚ç”µè§†ã€å¹¿æ’­ï¼‰ã€‚</li><li><strong>åŠåŒå·¥é€šä¿¡</strong>ï¼šé€šä¿¡çš„åŒæ–¹å¯ä»¥äº¤æ›¿å‘é€å’Œæ¥æ”¶ä¿¡æ¯ï¼Œä½†ä¸èƒ½åŒæ—¶æ¥æ”¶æˆ–å‘é€ï¼ˆå¦‚å¯¹è®²æœºã€Wi-Fiï¼‰ã€‚</li><li><strong>å…¨åŒå·¥é€šä¿¡</strong>ï¼šé€šä¿¡åŒæ–¹å¯åŒæ—¶è¿›è¡ŒåŒå‘çš„ä¿¡æ¯ä¼ é€ï¼ˆå¦‚ç”µè¯ã€äº¤æ¢æœºï¼‰ã€‚</li></ol><h4 id="æŒ‰åŒæ­¥æ–¹å¼åˆ†"><a href="#æŒ‰åŒæ­¥æ–¹å¼åˆ†" class="headerlink" title="æŒ‰åŒæ­¥æ–¹å¼åˆ†"></a>æŒ‰åŒæ­¥æ–¹å¼åˆ†</h4><ol><li><strong>å¼‚æ­¥ä¼ è¾“</strong>ï¼šæŠŠå„ä¸ªå­—ç¬¦åˆ†å¼€ä¼ è¾“ï¼Œåœ¨å­—ç¬¦ä¹‹é—´æ’å…¥åŒæ­¥ä¿¡æ¯ï¼Œå…¸å‹çš„æ˜¯æ’å…¥èµ·å§‹ä½å’Œåœæ­¢ä½ã€‚HDLC æ˜¯å…¸å‹çš„å¼‚æ­¥ä¼ è¾“ï¼Œèµ·å§‹æ ‡å¿—ä½å’Œç»“æŸæ ‡å¿—ä½éƒ½æ˜¯â€œ01111110â€ã€‚å¼‚æ­¥ä¼ è¾“å®ç°ç®€å•ï¼Œä½†å¼•å…¥èµ·æ­¢ä½å½±å“ä¼ è¾“æ•ˆç‡ï¼Œé€Ÿç‡ä¸ä¼šå¤ªé«˜ã€‚</li><li><strong>åŒæ­¥ä¼ è¾“</strong>ï¼šå‘é€æ–¹åœ¨ä¼ é€æ•°æ®ä¹‹å‰ï¼Œå…ˆå‘é€ä¸€ä¸²åŒæ­¥å­—ç¬¦ SYNCï¼Œæ¥æ”¶æ–¹æ£€æµ‹åˆ° 2 ä¸ªä»¥ä¸Š SYNC å­—ç¬¦å°±ç¡®è®¤å·²ç»è¿›å…¥åŒæ­¥çŠ¶æ€ï¼Œå¼€å§‹å‡†å¤‡æ¥æ”¶æ•°æ®ã€‚åŒæ­¥ä¼ è¾“æ•ˆç‡æ›´é«˜ï¼Œåœ¨çŸ­è·ç¦»é«˜é€Ÿæ•°æ®ä¼ è¾“ä¸­å¤§å¤šé‡‡ç”¨ã€‚</li></ol><h3 id="æ•°æ®äº¤æ¢æ–¹å¼"><a href="#æ•°æ®äº¤æ¢æ–¹å¼" class="headerlink" title="æ•°æ®äº¤æ¢æ–¹å¼"></a>æ•°æ®äº¤æ¢æ–¹å¼</h3><p><strong>ç”µè·¯äº¤æ¢</strong></p><ul><li>æ¦‚å¿µï¼šå°†æ•°æ®ä¼ è¾“åˆ†ä¸ºç”µè·¯å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œç”µè·¯æ‹†é™¤ä¸‰ä¸ªè¿‡ç¨‹ã€‚åœ¨æ•°æ®ä¼ é€ä¹‹å‰éœ€å»ºç«‹ä¸€æ¡ç‰©ç†é€šè·¯ï¼Œåœ¨çº¿è·¯è¢«é‡Šæ”¾ä¹‹å‰ï¼Œè¯¥é€šè·¯å°†ä¸€ç›´è¢«ç”¨æˆ·å®Œå…¨å æœ‰ã€‚</li><li>ä¼˜ç‚¹ï¼šç‹¬å æ€§ã€å®æ—¶æ€§ï¼Œé€‚åˆä¼ è¾“å¤§é‡çš„æ•°æ®ã€‚</li><li>ç¼ºç‚¹ï¼šéœ€å»ºç«‹ä¸€æ¡ç‰©ç†è¿æ¥ï¼Œåˆ©ç”¨ç‡ä½ã€‚ä»£è¡¨ä¸ºæ—©æœŸçš„ç”µè¯ç³»ç»Ÿã€‚</li></ul><p><strong>æŠ¥æ–‡äº¤æ¢</strong></p><ul><li>æ¦‚å¿µï¼šæŠ¥æ–‡ä»å‘é€æ–¹ä¼ é€åˆ°æ¥æ”¶æ–¹é‡‡ç”¨å­˜å‚¨è½¬å‘çš„æ–¹å¼ã€‚æŠ¥æ–‡ä¸­å«æœ‰æ¯ä¸€ä¸ªä¸‹ä¸€è·³èŠ‚ç‚¹ï¼Œå®Œæ•´çš„æŠ¥æ–‡åœ¨ä¸€ä¸ªä¸ªèŠ‚ç‚¹é—´ä¼ é€ï¼ˆæ•°æ®ä¸æ‹†åˆ†ï¼‰ã€‚</li><li>ä¼˜ç‚¹ï¼šä¸éœ€è¦ä¸“ç”¨é€šé“ï¼Œçº¿è·¯åˆ©ç”¨ç‡é«˜ï¼Œå­˜å‚¨è½¬å‘èŠ‚ç‚¹å¯æ ¡éªŒçº é”™ã€‚</li><li>ç¼ºç‚¹ï¼šæœ‰é€šä¿¡æ—¶å»¶ã€‚æ¯”å¦‚ç‰©æµåŒ…è£¹ã€‚</li></ul><p><strong>åˆ†ç»„äº¤æ¢</strong></p><ul><li>æ¦‚å¿µï¼šå°†æ•°æ®æ‹†åˆ†æˆå¾ˆå°çš„åˆ†ç»„è¿›è¡Œä¼ é€ï¼ŒåŒ…æ‹¬æ•°æ®æŠ¥å’Œè™šç”µè·¯ä¸¤ç§æ–¹å¼ã€‚</li><li>ä¼˜ç‚¹ï¼šåˆ©ç”¨ç‡æ›´é«˜ã€å¯é€‰è·¯å¾„ã€æ•°æ®ç‡è½¬æ¢ã€æ”¯æŒä¼˜å…ˆçº§ã€‚</li><li>ç¼ºç‚¹ï¼šæ—¶å»¶ã€å¼€é”€å¤§ã€‚æ¯”å¦‚é‚®å±€å¯„ä¿¡ã€‚<ul><li><strong>æ•°æ®æŠ¥</strong>ï¼šå•å‘ä¼ é€ã€æ— è¿æ¥çš„ã€‚å¦‚æ™®é€šä¿¡ã€‚æ¯ä¸ªåˆ†ç»„è¢«ç‹¬ç«‹åœ°å¤„ç†ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ ¹æ®è·¯ç”±é€‰æ‹©ç®—æ³•ï¼Œè¢«ç‹¬ç«‹é€åˆ°ç›®çš„ï¼Œè·¯å¾„å’Œåˆ°è¾¾ç›®çš„é¡ºåºéƒ½å¯èƒ½ä¸ä¸€æ ·ã€‚</li><li><strong>è™šç”µè·¯</strong>ï¼šäº¤äº’å¼ã€é€»è¾‘é“¾æ¥ã€‚å¦‚æŒ‚å·ä¿¡ã€‚åœ¨æ•°æ®ä¼ é€ä¹‹å‰ï¼Œå…ˆå»ºç«‹èµ·ä¸€æ¡é€»è¾‘ä¸Šçš„è¿æ¥ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½æ²¿ç€ä¸€æ¡è·¯å¾„ä¼ è¾“ï¼Œä¸ä¼šä¹±åºã€‚</li></ul></li></ul><h3 id="å¤šè·¯å¤ç”¨æŠ€æœ¯"><a href="#å¤šè·¯å¤ç”¨æŠ€æœ¯" class="headerlink" title="å¤šè·¯å¤ç”¨æŠ€æœ¯"></a>å¤šè·¯å¤ç”¨æŠ€æœ¯</h3><table><thead><tr><th>å¤ç”¨æŠ€æœ¯</th><th>æ¦‚å¿µ</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>é¢‘åˆ†å¤ç”¨ï¼ˆFDMï¼‰</td><td>åˆ©ç”¨ä¸åŒçš„é¢‘ç‡åŒºåˆ†ä¸åŒçš„ä¿¡å·ï¼Œå­ä¿¡é“é€šè¿‡éš”ç¦»é¢‘å¸¦é˜²ä¸²æ‰°</td><td>CATVã€WIFI</td></tr><tr><td>æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰</td><td>ä¸åŒçš„ä¿¡å·åœ¨ä¸åŒçš„æ—¶é—´è½®æµå ç”¨ä¿¡é“ï¼Œåˆ†ä¸ºåŒæ­¥æ—¶åˆ†ï¼ˆå¦‚ T1ã€E1ï¼‰å’Œç»Ÿè®¡æ—¶åˆ†ï¼ˆå¦‚ ATMï¼‰</td><td>æ‰‹æªã€æ‰‹æœºã€T1ã€E1ã€ATM</td></tr><tr><td>æ³¢åˆ†å¤ç”¨ï¼ˆWDMï¼‰</td><td>åˆ©ç”¨ä¸åŒçš„æ³¢é•¿åŒºåˆ†ä¸åŒçš„ä¿¡å·</td><td>å…‰çº¤</td></tr></tbody></table><h4 id="E1å’ŒT1"><a href="#E1å’ŒT1" class="headerlink" title="E1å’ŒT1"></a>E1å’ŒT1</h4><p><strong>T1 æ ‡å‡†ï¼ˆç¾å›½å’Œæ—¥æœ¬ï¼‰</strong></p><ul><li>æ¯è·¯ç”µè¯ 64kã€‚</li><li>è®¡ç®—å…¬å¼ï¼šT1 &#x3D; 64k * 24 + å¼€é”€ä¸é—´éš” &#x3D; 1.544Mbpsã€‚</li></ul><p><strong>E1 æ ‡å‡†ï¼ˆæ¬§æ´²ï¼‰</strong></p><ul><li>æ¯è·¯ç”µè¯ 64kï¼Œä¼  30 è·¯ç”µè¯ï¼Œ2 è·¯å¼€é”€ã€‚</li><li>è®¡ç®—å…¬å¼ï¼šE1 &#x3D; 64 * 30 + 64k * 2 &#x3D; 2.048Mbpsã€‚</li><li>ITU-T æ ‡å‡† E1 ä¿¡é“æ•°æ®é€Ÿç‡æ˜¯ 2.048Mbpsï¼ŒæŠŠ 32 ä¸ª 8 ä½ä¸€ç»„çš„æ•°æ®æ ·æœ¬ç»„è£…æˆ 125us çš„åŸºæœ¬å¸§ï¼Œå…¶ä¸­ 30 ä¸ªå­ä¿¡é“ç”¨äºè¯­éŸ³ä¼ é€ï¼Œ2 ä¸ªå­ä¿¡é“ï¼ˆCH0 å’Œ CH16ï¼‰ç”¨äºæ§åˆ¶ä¿¡ä»¤ã€‚</li></ul><h4 id="åŒæ­¥æ•°å­—åºåˆ—"><a href="#åŒæ­¥æ•°å­—åºåˆ—" class="headerlink" title="åŒæ­¥æ•°å­—åºåˆ—"></a>åŒæ­¥æ•°å­—åºåˆ—</h4><table><thead><tr><th>å…‰çº¤çº§</th><th>STS çº§</th><th>é“¾è·¯é€Ÿ Mbps</th><th>æœ‰æ•ˆè½½è· Mbps</th><th>è´Ÿè½½ Mbps</th><th>SDH å¯¹åº”</th><th>å¸¸ç”¨è¿‘ä¼¼å€¼</th></tr></thead><tbody><tr><td>OC-1</td><td>STS-1</td><td>51.840</td><td>50.112</td><td>1.728</td><td></td><td></td></tr><tr><td><strong>OC-3</strong></td><td>STS-3</td><td>155.520</td><td>150.336</td><td>5.184</td><td><strong>STM-1</strong></td><td><strong>155Mbps</strong></td></tr><tr><td>OC-9</td><td>STS-9</td><td>466.560</td><td>451.008</td><td>15.552</td><td>STM-3</td><td></td></tr><tr><td><strong>OC-12</strong></td><td>STS-12</td><td>622.080</td><td>601.344</td><td>20.736</td><td><strong>STM-4</strong></td><td><strong>622Mbps</strong></td></tr><tr><td>OC-18</td><td>STS-18</td><td>933.120</td><td>902.016</td><td>31.104</td><td>STM-6</td><td></td></tr><tr><td>OC-24</td><td>STS-24</td><td>1244.160</td><td>1202.688</td><td>41.472</td><td>STM-8</td><td></td></tr><tr><td>OC-36</td><td>STS-36</td><td>1866.240</td><td>1804.032</td><td>62.208</td><td>STM-13</td><td></td></tr><tr><td>OC-48</td><td>STS-48</td><td>2488.320</td><td>2405.376</td><td>82.944</td><td><strong>STM-16</strong></td><td><strong>2.5Gbps</strong></td></tr><tr><td>OC-96</td><td>STS-96</td><td>4976.640</td><td>4810.752</td><td>165.888</td><td>STM-32</td><td></td></tr><tr><td>OC-192</td><td>STS-192</td><td>9953.280</td><td>9621.504</td><td>331.776</td><td><strong>STM-64</strong></td><td><strong>10Gbps</strong></td></tr></tbody></table><h3 id="å·®é”™æ§åˆ¶"><a href="#å·®é”™æ§åˆ¶" class="headerlink" title="å·®é”™æ§åˆ¶"></a>å·®é”™æ§åˆ¶</h3><h4 id="å¥‡å¶æ ¡éªŒ"><a href="#å¥‡å¶æ ¡éªŒ" class="headerlink" title="å¥‡å¶æ ¡éªŒ"></a>å¥‡å¶æ ¡éªŒ</h4><p>å¥‡å¶æ ¡éªŒæ˜¯ä¸€ç§ç®€å•çš„é”™è¯¯æ£€æµ‹æ–¹æ³•ï¼Œå®ƒé€šè¿‡ç¡®ä¿æ•°æ®ä¸­1çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼ˆå¥‡æ ¡éªŒï¼‰æˆ–å¶æ•°ï¼ˆå¶æ ¡éªŒï¼‰æ¥å·¥ä½œã€‚</p><ul><li><p>åŸç†</p><ul><li><strong>å¥‡æ ¡éªŒ</strong>ï¼šæ•°æ®ä½åŠ ä¸Šä¸€ä¸ªæ ¡éªŒä½ï¼Œä½¿å¾—æ€»çš„1çš„ä¸ªæ•°ä¸ºå¥‡æ•°ã€‚</li><li><strong>å¶æ ¡éªŒ</strong>ï¼šæ•°æ®ä½åŠ ä¸Šä¸€ä¸ªæ ¡éªŒä½ï¼Œä½¿å¾—æ€»çš„1çš„ä¸ªæ•°ä¸ºå¶æ•°ã€‚</li></ul></li><li><p>ä¼˜ç‚¹</p><ul><li>å®ç°ç®€å•ï¼Œæˆæœ¬ä½ã€‚</li></ul></li><li><p>ç¼ºç‚¹</p><ul><li>åªèƒ½æ£€æµ‹å¥‡æ•°ä¸ªé”™è¯¯ï¼Œä¸èƒ½çº æ­£é”™è¯¯ã€‚</li><li>å¯¹å¶æ•°ä¸ªé”™è¯¯æ— èƒ½ä¸ºåŠ›ã€‚</li></ul></li></ul><h4 id="CRCå¾ªç¯å†—ä½™æ ¡éªŒ"><a href="#CRCå¾ªç¯å†—ä½™æ ¡éªŒ" class="headerlink" title="CRCå¾ªç¯å†—ä½™æ ¡éªŒ"></a>CRCå¾ªç¯å†—ä½™æ ¡éªŒ</h4><p>æœ«å°¾åŠ å…¥ CRC å¾ªç¯å†—ä½™æ ¡éªŒç èƒ½æ£€é”™ä¸èƒ½çº é”™ï¼Œå¹¿æ³›ç”¨äºç½‘ç»œé€šä¿¡å’Œç£ç›˜å­˜å‚¨ã€‚</p><p><strong>è®¡ç®—æ–¹æ³•</strong>ï¼š<br>ä¾‹å¦‚ï¼Œä¿¡æ¯ç ä¸º 10111ï¼Œç”Ÿæˆå¤šé¡¹å¼ä¸º G(X)&#x3D;Xâ´+X+1ï¼Œè®¡ç®— CRC æ ¡éªŒç ã€‚</p><ol><li><strong>åˆ¤æ–­æ ¡éªŒä½æ•°</strong>ï¼šç”Ÿæˆå¤šé¡¹å¼çš„æœ€é«˜æ¬¡æ–¹æ˜¯å‡ ï¼Œæ ¡éªŒä½å°±æ˜¯å‡ ä½ã€‚è¿™é‡Œç”Ÿæˆå¤šé¡¹å¼æœ€é«˜æ¬¡æ–¹æ˜¯ 4ï¼Œæ‰€ä»¥æœ‰ 4 ä½æ ¡éªŒä½ã€‚</li><li><strong>è¡¥é½æ•°æ®ä½åé¢çš„ 0</strong>ï¼š10111 0000ã€‚</li><li><strong>æå–ç”Ÿæˆå¤šé¡¹å¼çš„ç³»æ•°</strong>ï¼šG(X)&#x3D;Xâ´+X+1 &#x3D; 1<em>Xâ´+0</em>XÂ³+0<em>XÂ²+1</em>XÂ¹+1*Xâ° &#x3D; 10011ã€‚</li><li><strong>ç”¨ç¬¬äºŒæ­¥çš„ç»“æœï¼Œé™¤ä»¥ç¬¬ä¸‰æ­¥çš„ç»“æœï¼ˆä¸å€Ÿä½ï¼Œç›¸å½“äºå¼‚æˆ–è¿ç®—ï¼‰</strong>ï¼šä½™æ•°å°±æ˜¯ CRC æ ¡éªŒç ï¼Œä½™æ•°ä¸å¤Ÿä½ï¼Œå‰é¢è¡¥ 0ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.969or8xe57.jpg" alt="image"></li></ol><h4 id="æµ·æ˜ç æ ¡éªŒ"><a href="#æµ·æ˜ç æ ¡éªŒ" class="headerlink" title="æµ·æ˜ç æ ¡éªŒ"></a>æµ·æ˜ç æ ¡éªŒ</h4><p>é€šè¿‡æ·»åŠ é¢å¤–çš„æ ¡éªŒä½ï¼ˆæµ·æ˜ä½ï¼‰ï¼Œä½¿å¾—æ¯ä¸ªæµ·æ˜ä½èƒ½å¤Ÿè¦†ç›–ç‰¹å®šçš„æ•°æ®ä½ï¼Œèƒ½å¤Ÿçº æ­£ä¸€ä½é”™è¯¯ã€‚<br><strong>æµ·æ˜ç æ•°æ®ä½å’Œæ ¡éªŒä½çš„æ•°é‡å…³ç³»</strong></p><p>$2^r\geq k + r + 1$</p><p>å…¶ä¸­ï¼Œ$r$è¡¨ç¤ºæ ¡éªŒä½çš„æ•°é‡ï¼Œ$k$è¡¨ç¤ºæ•°æ®ä½çš„æ•°é‡ã€‚</p><p><strong>ç¡®å®šæ ¡éªŒä½ä¸ªæ•°çš„æ–¹æ³•(æµ·æ˜ä¸ç­‰å¼)</strong></p><ol><li>é¦–å…ˆç¡®å®šæ•°æ®ä½çš„æ•°é‡$k$ã€‚</li><li>ç„¶åæ ¹æ®ä¸Šè¿°å…¬å¼ï¼Œé€šè¿‡è¯•é”™æ³•æˆ–è€…é€æ­¥å¢åŠ æ ¡éªŒä½çš„æ•°é‡$r$ï¼Œç›´åˆ°æ»¡è¶³å…¬å¼ä¸ºæ­¢ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰$4$ä¸ªæ•°æ®ä½ï¼Œè®¾æ ¡éªŒä½æ•°é‡ä¸º$r$ï¼Œåˆ™æœ‰$2^r\geq 4 + r + 1$ã€‚<ul><li>å½“$r &#x3D; 1$æ—¶ï¼Œ$2^1 &#x3D; 2$ï¼Œ$4 + 1 + 1 &#x3D; 6$ï¼Œä¸æ»¡è¶³å…¬å¼ã€‚</li><li>å½“$r &#x3D; 2$æ—¶ï¼Œ$2^2 &#x3D; 4$ï¼Œ$4 + 2 + 1 &#x3D; 7$ï¼Œä¸æ»¡è¶³å…¬å¼ã€‚</li><li>å½“$r &#x3D; 3$æ—¶ï¼Œ$2^3 &#x3D; 8$ï¼Œ$4 + 3 + 1 &#x3D; 8$ï¼Œæ»¡è¶³å…¬å¼ã€‚</li><li>æ‰€ä»¥ï¼Œå¯¹äº$4$ä¸ªæ•°æ®ä½ï¼Œéœ€è¦$3$ä¸ªæ ¡éªŒä½ã€‚</li></ul></li></ol><p><strong>æµ·æ˜è·ç¦»</strong> ( ç è· ) ï¼šä¸€ä¸ªç å­—è¦å˜æˆå¦ä¸€ä¸ªç å­—æ—¶å¿…é¡»æ”¹å˜çš„æœ€å°ä½æ•°ã€‚ä¸¤ä¸ªç å­—ä¹‹é—´ä¸åŒçš„æ¯”ç‰¹æ•°ã€‚</p><ul><li>ä¾‹å¦‚ï¼š0101-&gt;0000ï¼šæ”¹å˜2ä½ï¼Œ åˆ™æµ·æ˜è·ç¦»ä¸º2<br><strong>ç¼–ç æ–¹æ³•</strong><br>å‡è®¾ä¼ é€ä¿¡æ¯1001011 ,ç¬¬2^{i}(i&#x3D;0,1,2,3 \dotsc )ä½æ˜¯æ ¡éªŒä½ ï¼Œ å…¶ä½™ä½å­˜æ”¾æ•°æ®ã€‚<br>åˆ™æŠŠæ•°æ®æ”¾åœ¨3 , 5 , 6 , 7 , 9 , 10 , 11ä½ç½®,1,2 , 4 , 8ç•™ä½œæ ¡éªŒä½ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.2yyar1qcti.jpg" alt="image"><br><img src="https://xinhaojin.github.io/picx-images-hosting/image.73tw367w30.jpg" alt="image"></li></ul><h2 id="ç¬¬3ç« -å¹¿åŸŸç½‘"><a href="#ç¬¬3ç« -å¹¿åŸŸç½‘" class="headerlink" title="ç¬¬3ç«  å¹¿åŸŸç½‘"></a>ç¬¬3ç«  å¹¿åŸŸç½‘</h2><h4 id="å…¬å…±äº¤æ¢ç”µè¯ç½‘PSTN"><a href="#å…¬å…±äº¤æ¢ç”µè¯ç½‘PSTN" class="headerlink" title="å…¬å…±äº¤æ¢ç”µè¯ç½‘PSTN"></a>å…¬å…±äº¤æ¢ç”µè¯ç½‘PSTN</h4><p>å…¬å…±äº¤æ¢ç”µè¯ç½‘ï¼ˆPSTNï¼‰æ˜¯ä¸“ä¸ºè¯­éŸ³é€šä¿¡è€Œå»ºç«‹çš„ç½‘ç»œï¼Œè‡ª20ä¸–çºª60å¹´ä»£èµ·ä¹Ÿè¢«ç”¨äºæ•°æ®ä¼ è¾“ã€‚</p><ul><li>ç”µè¯ç½‘ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š<ul><li>æœ¬åœ°å›è·¯</li><li>å¹²çº¿</li><li>äº¤æ¢æœº</li></ul></li><li>å¹²çº¿å’Œäº¤æ¢æœºé€šå¸¸ä½¿ç”¨æ•°å­—ä¼ è¾“å’Œäº¤æ¢æŠ€æœ¯ï¼Œè€Œæœ¬åœ°å›è·¯ä¸»è¦é‡‡ç”¨æ¨¡æ‹Ÿçº¿è·¯ã€‚</li><li>ç”µè¯çº¿è”ç½‘æ—¶ï¼Œå‘é€ç«¯é€šè¿‡è°ƒåˆ¶è§£è°ƒå™¨å°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œæ¥æ”¶ç«¯å†å°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢å›æ•°å­—ä¿¡å·ã€‚<ul><li>å‘é€ç«¯ï¼šæ•°å­—ä¿¡å· â†’ æ¨¡æ‹Ÿä¿¡å·</li><li>æ¥æ”¶ç«¯ï¼šæ¨¡æ‹Ÿä¿¡å· â†’ æ•°å­—ä¿¡å·</li></ul></li></ul><p><strong>æœºæ¢°ç‰¹æ€§</strong><br>RS-232-Cæ²¡æœ‰æ­£å¼è§„å®šè¿æœºå™¨çš„æ ‡å‡†ï¼Œåªæœ‰åœ¨å…¶é™„å½•ä¸­å»ºè®®ä½¿ç”¨25é’ˆçš„Då‹è¿æ¥å™¨ï¼Œä¹Ÿæœ‰å¾ˆå¤šä½¿ç”¨å…¶ä»–è¿æ¥å™¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾®å‹æœºRS-232-Cä¸²è¡Œæ¥å£ä¸Šï¼Œå¤§å¤šä½¿ç”¨9é’ˆè¿æ¥å™¨ã€‚</p><p><strong>ç”µæ°”ç‰¹æ€§</strong><br>RS-232-Cé‡‡ç”¨çš„V.28æ ‡å‡†ç”µè·¯ï¼Œé€Ÿç‡20kb&#x2F;sï¼Œæœ€é•¿15ç±³ã€‚<br>ä¿¡å·æºäº§ç”Ÿ3-15Vçš„ä¿¡å·<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.9kg4kk0f3m.jpg" alt="image"></p><h4 id="å…¬å…±æ•°æ®ç½‘X-25"><a href="#å…¬å…±æ•°æ®ç½‘X-25" class="headerlink" title="å…¬å…±æ•°æ®ç½‘X.25"></a>å…¬å…±æ•°æ®ç½‘X.25</h4><ul><li>æµé‡æ§åˆ¶<ul><li>åœæ­¢ç­‰å¾…åè®®ï¼šå‘é€æ–¹å¿…é¡»ç­‰å¾…æ¥æ”¶æ–¹çš„ç¡®è®¤æ‰èƒ½å‘é€ä¸‹ä¸€å¸§ã€‚</li><li>æ»‘åŠ¨çª—å£åè®®ï¼šå…è®¸è¿ç»­å‘é€å¤šä¸ªå¸§è€Œæ— éœ€ç­‰å¾…ç¡®è®¤ã€‚</li></ul></li><li>å·®é”™æ§åˆ¶<ul><li>ARQåè®®ï¼šåœæ­¢ç­‰å¾…+è¶…æ—¶é‡ä¼ </li><li>é€‰æ‹©æ€§é‡å‘ARQï¼šé‡ä¼ ç‰¹å®šçš„æŸä¸€å¸§ $W_{å‘}&#x3D;W_{æ”¶}\leq2^{k - 1}$, ç¡®è®¤æœºåˆ¶ä¸ºSREJï¼ˆSelective Rejectï¼‰</li><li>åé€€Nå¸§ARQï¼šå…è®¸å‘é€æ–¹é‡ä¼ æœ€åNå¸§ $W_{å‘}&#x3D;W_{æ”¶}\leq2^{k}-1$, ç¡®è®¤æœºåˆ¶ä¸ºREJï¼ˆRejectï¼‰</li></ul></li></ul><h4 id="å¸§ä¸­ç»§ç½‘Frame-Relay"><a href="#å¸§ä¸­ç»§ç½‘Frame-Relay" class="headerlink" title="å¸§ä¸­ç»§ç½‘Frame Relay"></a>å¸§ä¸­ç»§ç½‘Frame Relay</h4><p>å¸§ä¸­ç»§ï¼ˆFrame Relay, FRï¼‰æ˜¯ä¸€ç§åœ¨<strong>æ•°æ®é“¾è·¯å±‚</strong>å·¥ä½œçš„é€šä¿¡åè®®ï¼Œå®ƒé€šè¿‡å»ºç«‹è™šæ‹Ÿç”µè·¯æ¥å®ç°æ•°æ®çš„åˆ†ç»„äº¤æ¢ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>è™šç”µè·¯æœåŠ¡</strong>ï¼šåœ¨ç½‘ç»œçš„ç¬¬äºŒå±‚æä¾›è™šæ‹Ÿç”µè·¯æœåŠ¡ã€‚</li><li><strong>æœ¬åœ°æ ‡è¯†</strong>ï¼šä½¿ç”¨æ•°æ®é“¾è·¯è¿æ¥æ ‡è¯†ç¬¦ï¼ˆDLCIï¼‰è¿›è¡Œæœ¬åœ°æ ‡è¯†ã€‚</li><li><strong>é¢å‘è¿æ¥</strong>ï¼šæä¾›é¢å‘è¿æ¥çš„æœåŠ¡ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„è¿ç»­æ€§ã€‚</li><li><strong>é€æ˜ä¼ è¾“</strong>ï¼šæ”¯æŒåŸºäºåˆ†ç»„çš„é€æ˜ä¼ è¾“ã€‚</li><li><strong>é”™è¯¯æ£€æµ‹ä¸æ‹¥å¡æ§åˆ¶</strong>ï¼šä»…è¿›è¡Œé”™è¯¯æ£€æµ‹å’Œ<strong>æ‹¥å¡æ§åˆ¶</strong>ï¼Œä¸åŒ…æ‹¬<strong>æµé‡æ§åˆ¶</strong>å’Œé‡ä¼ æœºåˆ¶ï¼Œå› æ­¤ç½‘ç»œå¼€é”€è¾ƒå°ã€‚</li><li><strong>å¸¦å®½çµæ´»æ€§</strong>ï¼šèƒ½å¤Ÿæ ¹æ®éœ€æ±‚åŠ¨æ€è°ƒæ•´å¸¦å®½ï¼Œé€‚åº”çªå‘æ•°æ®ä¼ è¾“ã€‚</li><li><strong>é€Ÿç‡æ§åˆ¶</strong>ï¼šé€šè¿‡æ‰¿è¯ºä¿¡æ¯é€Ÿç‡ï¼ˆCIRï¼‰å’Œæ‰©å±•ä¿¡æ¯é€Ÿç‡ï¼ˆEIRï¼‰æ¥æ§åˆ¶æ•°æ®ä¼ è¾“é€Ÿç‡ã€‚</li><li><strong>å¯å˜å¸§é•¿</strong>ï¼šæ”¯æŒå¯å˜é•¿åº¦çš„å¸§ï¼Œæœ€å¤§å¯è¾¾1600-4096å­—èŠ‚ï¼Œèƒ½å¤Ÿæ‰¿è½½å¤šç§å±€åŸŸç½‘æ•°æ®å¸§ã€‚</li><li><strong>é«˜ä¼ è¾“é€Ÿç‡</strong>ï¼šæ”¯æŒé«˜è¾¾2-45Mbpsçš„ä¼ è¾“é€Ÿç‡ã€‚</li><li><strong>å»¶è¿Ÿæ•æ„Ÿæ€§</strong>ï¼šç”±äºä¸æä¾›é‡ä¼ æœºåˆ¶ï¼Œä¸é€‚åˆå¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼Œå¦‚å®æ—¶è¯­éŸ³å’Œè§†é¢‘é€šä¿¡ã€‚</li><li><strong>æ•°æ®ä¸¢å¤±</strong>ï¼šæ•°æ®ä¸¢å¤±çš„é£é™©å–å†³äºè¿è¥å•†å¯¹è™šç”µè·¯çš„é…ç½®ã€‚</li><li><strong>å¯é æ€§</strong>ï¼šä¸ä¿è¯æ•°æ®çš„å¯é æäº¤ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œå¸§ä¸­ç»§æ˜¯ä¸€ç§é«˜æ•ˆã€çµæ´»çš„ç½‘ç»œåè®®ï¼Œé€‚ç”¨äºéœ€è¦å¿«é€Ÿæ•°æ®ä¼ è¾“å’Œå¸¦å®½åŠ¨æ€è°ƒæ•´çš„åœºæ™¯ï¼Œä½†ä¸é€‚ç”¨äºå¯¹æ•°æ®ä¼ è¾“å¯é æ€§å’Œå»¶è¿Ÿæœ‰ä¸¥æ ¼è¦æ±‚çš„åº”ç”¨ã€‚</p><h4 id="ISDNå’ŒATM"><a href="#ISDNå’ŒATM" class="headerlink" title="ISDNå’ŒATM"></a>ISDNå’ŒATM</h4><p>ISDNï¼Œ Integrated Services Digital Networkï¼Œç»¼åˆæ•°å­—ä¸šåŠ¡ç½‘ï¼Œç›®çš„æ˜¯ä»¥æ•°å­—ç³»ç»Ÿä»£æ›¿æ¨¡æ‹Ÿç”µè¯ç³»ç»Ÿï¼ŒæŠŠéŸ³é¢‘ã€è§†é¢‘ã€æ•°æ®ä¸šåŠ¡æ”¾åœ¨ä¸€ä¸ªç½‘ä¸Šç»Ÿä¸€ä¼ è¾“ã€‚</p><ul><li>åˆ†ä¸ºçª„å¸¦ISDNå’Œå®½å¸¦ISDN<ul><li>çª„å¸¦ISDNæä¾›ä¸¤ç§ç”¨æˆ·æ¥å£<ul><li>åŸºæœ¬é€Ÿç‡ | BRI &#x3D; 2B+D &#x3D; 144 kbps</li><li>åŸºç¾¤é€Ÿç‡ | PRI &#x3D; 30B+D &#x3D; 2.048 Mbps</li></ul></li></ul></li><li>å®½å¸¦ISDNï¼Œå³ATMï¼Œå¼‚æ­¥ä¼ è¾“æ¨¡å¼ï¼ˆAsynchronous Transfer Modeï¼‰<ul><li>ATMæ˜¯ä¿¡å…ƒäº¤æ¢ï¼Œä¿¡å…ƒä¸º53å­—èŠ‚å›ºå®šé•¿åº¦ã€‚</li><li>ATMä¾ç„¶æ˜¯ä»¥è™šé“¾è·¯æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ã€‚</li><li>ATMå…¸å‹é€Ÿç‡ä¸º150 Mbpsã€‚</li></ul></li></ul><h4 id="HDLC"><a href="#HDLC" class="headerlink" title="HDLC"></a>HDLC</h4><p>HDLC æ˜¯ä¸€ç§é¢å‘ä½ï¼ˆæ¯”ç‰¹ï¼‰çš„åŒæ­¥é“¾è·¯æ§åˆ¶åè®®ã€‚</p><ul><li>é€šå¸¸ä½¿ç”¨ CRC-16ã€CRC-32 æ ¡éªŒï¼Œå¸§è¾¹ç•Œ 01111110</li></ul><table><thead><tr><th>è®°å¿†ç¬¦</th><th>åç§°</th><th>S1å­—æ®µ</th><th>S0å­—æ®µ</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>RR</td><td>æ¥æ”¶å‡†å¤‡å¥½</td><td>0</td><td>0</td><td>ç¡®è®¤ï¼Œä¸”å‡†å¤‡æ¥å—ä¸‹ä¸€å¸§ï¼Œå·²æ”¶å¦¥N(R)ä»¥å‰çš„å„å¸§</td></tr><tr><td>RNR</td><td>æ¥æ”¶æœªå‡†å¤‡å¥½</td><td>1</td><td>0</td><td>ç¡®è®¤ï¼Œæš‚åœæ¥æ”¶ä¸‹ä¸€å¸§ï¼ŒN(R)å«ä¹‰åŒä¸Š</td></tr><tr><td>REJ</td><td>æ‹’ç»æ¥æ”¶</td><td>0</td><td>1</td><td>å¦è®¤ï¼Œå¦è®¤N(R)èµ·çš„å„å¸§ï¼Œä½†N(R)ä»¥å‰çš„å¸§å·²æ”¶å¦¥</td></tr><tr><td>SREJ</td><td>é€‰æ‹©æ‹’ç»æ¥æ”¶</td><td>1</td><td>1</td><td>å¦è®¤ï¼Œåªå¦è®¤åºå·ä¸ºN(R)çš„å¸§</td></tr></tbody></table><h2 id="ç¬¬4ç« -å±€åŸŸç½‘å’ŒåŸåŸŸç½‘"><a href="#ç¬¬4ç« -å±€åŸŸç½‘å’ŒåŸåŸŸç½‘" class="headerlink" title="ç¬¬4ç«  å±€åŸŸç½‘å’ŒåŸåŸŸç½‘"></a>ç¬¬4ç«  å±€åŸŸç½‘å’ŒåŸåŸŸç½‘</h2><h3 id="å±€åŸŸç½‘å’ŒåŸåŸŸç½‘ä½“ç³»æ¶æ„IEEE-802"><a href="#å±€åŸŸç½‘å’ŒåŸåŸŸç½‘ä½“ç³»æ¶æ„IEEE-802" class="headerlink" title="å±€åŸŸç½‘å’ŒåŸåŸŸç½‘ä½“ç³»æ¶æ„IEEE 802"></a>å±€åŸŸç½‘å’ŒåŸåŸŸç½‘ä½“ç³»æ¶æ„IEEE 802</h3><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.2rv2y4xfgn.jpg" alt="image"><br>é‡ç‚¹ï¼š802.3(CSMA&#x2F;CD)ã€802.11(æ— çº¿å±€åŸŸç½‘)ã€802.16(æ— çº¿åŸåŸŸç½‘)</p><ul><li>IEEE802.3çš„æ ¸å¿ƒç®—æ³•ï¼šCSMA&#x2F;CD</li><li>IEEE802.11çš„æ ¸å¿ƒç®—æ³•ï¼šCSMA&#x2F;CA</li></ul><h3 id="CSMA-CDåè®®"><a href="#CSMA-CDåè®®" class="headerlink" title="CSMA&#x2F;CDåè®®"></a>CSMA&#x2F;CDåè®®</h3><p>CSMA&#x2F;CD(Carrier Sense Multiple Access with Collision Detection)<br>åè®®æ˜¯ä¸€ç§ç”¨äºå±€åŸŸç½‘é€šä¿¡çš„åè®®ï¼Œå®ƒæ˜¯ä¸€ç§<strong>è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®&#x2F;å†²çªæ£€æµ‹</strong>çš„åè®®ã€‚<br>CSMAåŸºæœ¬åŸç†ï¼š å‘é€æ•°æ®ä¹‹å‰ï¼Œ å…ˆç›‘å¬ä¿¡é“ä¸Šæ˜¯å¦æœ‰äººåœ¨å‘é€ã€‚è‹¥æœ‰ï¼Œ è¯´æ˜ä¿¡é“æ­£å¿™ï¼Œ å¦åˆ™è¯´æ˜ä¿¡é“æ˜¯ç©ºé—²çš„ï¼Œ ç„¶åæ ¹æ®é¢„å®šçš„ç­–ç•¥å†³å®š ï¼š</p><ul><li>è‹¥ä¿¡é“ç©ºé—² ï¼Œ æ˜¯å¦ç«‹å³å‘é€ã€‚</li><li>è‹¥ä¿¡é“å¿™ ï¼Œ æ˜¯å¦ç»§ç»­ç›‘å¬ã€‚<br>å¦‚æœè¿ç»­å‘ç”Ÿ16æ¬¡ç¢°æ’åï¼Œ è®¤ä¸ºç½‘ç»œç¹å¿™æˆ–æ•…éšœï¼Œ ä¸å†å°è¯•å‘é€ã€‚</li></ul><h4 id="ä¸‰ç§ç›‘å¬ç®—æ³•"><a href="#ä¸‰ç§ç›‘å¬ç®—æ³•" class="headerlink" title="ä¸‰ç§ç›‘å¬ç®—æ³•"></a>ä¸‰ç§ç›‘å¬ç®—æ³•</h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.6pngeurn46.jpg" alt="image"></p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>éåšæŒå‹ç›‘å¬ç®—æ³•</td><td>åé€€éšæœºæ—¶é—´ï¼Œç”±äºéšæœºæ—¶å»¶åé€€ä»è€Œå‡å°‘å†²çªæ¦‚ç‡ï¼Œä½†ä¼šä½¿ä¿¡é“é—²ç½®ä¸€æ®µæ—¶é—´ï¼Œé™ä½ä¿¡é“åˆ©ç”¨ç‡ä¸”å¢åŠ å‘é€æ—¶å»¶ã€‚</td></tr><tr><td>1-åšæŒå‹ç›‘å¬ç®—æ³•</td><td>ç»§ç»­ç›‘å¬ä¸ç­‰å¾…ï¼Œæœ‰åˆ©äºæŠ¢å ä¿¡é“å‡å°‘ä¿¡é“ç©ºé—²æ—¶é—´ï¼Œä½†å¤šä¸ªç«™åŒæ—¶ç›‘å¬ä¿¡é“æ—¶å¿…ç„¶å‘ç”Ÿå†²çªï¼Œå†²çªæ¦‚ç‡å’Œåˆ©ç”¨ç‡éƒ½é«˜ã€‚</td></tr><tr><td>P-åšæŒå‹ç›‘å¬ç®—æ³•</td><td>è‹¥ä¿¡é“ç©ºé—²ï¼Œä»¥æ¦‚ç‡ P å‘é€ï¼Œä»¥æ¦‚ç‡(1 - P)å»¶è¿Ÿä¸€ä¸ªæ—¶é—´å•ä½ï¼ŒP å¤§å°å¯è°ƒæ•´ã€‚</td></tr></tbody></table><h4 id="å†²çªå¤„ç†æœºåˆ¶"><a href="#å†²çªå¤„ç†æœºåˆ¶" class="headerlink" title="å†²çªå¤„ç†æœºåˆ¶"></a>å†²çªå¤„ç†æœºåˆ¶</h4><p>æ£€æµ‹åˆ°å‘ç”Ÿå†²çªåï¼Œç«‹å³åœæ­¢å‘é€ï¼Œå¹¶å‘é€å¹²æ‰°ä¿¡å·ï¼ˆJammingï¼‰ä½¿æ‰€æœ‰ç«™éƒ½åœæ­¢å‘é€ï¼Œç­‰å¾…éšæœºé•¿çš„ä¸€æ®µæ—¶é—´åé‡æ–°ç›‘å¬ï¼Œå†å°è¯•å‘é€</p><h4 id="äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•"><a href="#äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•" class="headerlink" title="äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•"></a>äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•</h4><ul><li>æ£€æµ‹åˆ°å†²çªååœæ­¢å‘é€æ•°æ®ï¼Œç­‰å¾…éšæœºæ—¶é—´å†å‘é€ã€‚</li><li>ç­‰å¾…æ—¶é—´ &#x3D; Ï„ * Random[0,1,â€¦,2^(k)-1]ï¼ŒÏ„æ˜¯åŸºæœ¬é€€é¿æ—¶é—´ï¼Œk &#x3D; min[é‡ä¼ æ¬¡æ•°,10]ï¼Œé‡ä¼  16 æ¬¡åè‹¥è¿˜ä¸èƒ½æ­£å¸¸å‘é€ï¼Œè®¤ä¸ºç½‘ç»œæ‹¥å¡æˆ–æ•…éšœä¸å†å°è¯•é‡ä¼ ã€‚ä¾‹å¦‚é‡ä¼  12 æ¬¡ï¼Œk &#x3D; min[12,10]&#x3D;10ï¼Œç­‰å¾…æ—¶é—´ä¸º Ï„*Random[0,1023]ï¼Œé‡ä¼ æ¬¡æ•°è¶Šå¤šé€€é¿çª—å£è¶Šå¤§ä»¥é™ä½å†²çªæ¦‚ç‡ã€‚è‹¥è¿ç»­å‘ç”Ÿ 16 æ¬¡ç¢°æ’ï¼Œè®¤ä¸ºç½‘ç»œç¹å¿™æˆ–æ•…éšœä¸å†å°è¯•å‘é€ã€‚</li></ul><h3 id="æœ€å°å¸§é•¿è®¡ç®—"><a href="#æœ€å°å¸§é•¿è®¡ç®—" class="headerlink" title="æœ€å°å¸§é•¿è®¡ç®—"></a>æœ€å°å¸§é•¿è®¡ç®—</h3><ul><li>æœ€å°å¸§é•¿å…¬å¼ä¸ºï¼š$L_{min}&#x3D;2RÃ—d&#x2F;v$ï¼Œå…¶ä¸­$R$ä¸ºç½‘ç»œæ•°æ®é€Ÿç‡ï¼Œ$d$ä¸ºæœ€å¤§è·ç¦»ï¼Œ$v$ä¸ºä¼ æ’­é€Ÿåº¦ã€‚</li><li>ä¸å†²çªæ¡ä»¶ä¸ºï¼šå‘é€æ—¶é—´â‰¥ä¼ é€æ—¶é—´+ç¡®è®¤æ—¶é—´ï¼Œå³$L&#x2F;Râ‰¥2Ã—d&#x2F;v$ï¼Œç”±æ­¤å¯æ¨å‡ºæœ€å°å¸§é•¿å…¬å¼ã€‚</li></ul><h3 id="ä»¥å¤ªç½‘å¸§"><a href="#ä»¥å¤ªç½‘å¸§" class="headerlink" title="ä»¥å¤ªç½‘å¸§"></a>ä»¥å¤ªç½‘å¸§</h3><h4 id="å¸§æ ¼å¼"><a href="#å¸§æ ¼å¼" class="headerlink" title="å¸§æ ¼å¼"></a>å¸§æ ¼å¼</h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.1zi7ggpwfw.jpg" alt="image"></p><ul><li>å‰é¢ 7+1 å­—èŠ‚ç”¨äºæ—¶é’ŸåŒæ­¥ï¼Œä¸è®¡å…¥å¸§é•¿ã€‚</li><li>æ•°æ®ä¸º 46 - 1500 å­—èŠ‚ï¼Œè‹¥ä¸å¤Ÿè‡³å°‘å¡«å……åˆ° 46 å­—èŠ‚ã€‚</li><li>æ ¡éªŒä½ 4 å­—èŠ‚ï¼Œé‡‡ç”¨ CRC å¾ªç¯å†—ä½™æ ¡éªŒ 32 ä½ã€‚</li><li>æœ€å°å¸§é•¿ 64 å­—èŠ‚ï¼Œç”± 6+6+2+46+4 å¾—å‡ºã€‚</li><li>æœ€å¤§å¸§é•¿ 1518 å­—èŠ‚ï¼Œç”± 6+6+2+1500+4 å¾—å‡ºã€‚</li></ul><h4 id="ä»¥å¤ªç½‘æŠ¥æ–‡å°è£…"><a href="#ä»¥å¤ªç½‘æŠ¥æ–‡å°è£…" class="headerlink" title="ä»¥å¤ªç½‘æŠ¥æ–‡å°è£…"></a>ä»¥å¤ªç½‘æŠ¥æ–‡å°è£…</h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.1ovdnbb0c1.jpg" alt="image"></p><h4 id="å¿«é€Ÿä»¥å¤ªç½‘802-3u-100M"><a href="#å¿«é€Ÿä»¥å¤ªç½‘802-3u-100M" class="headerlink" title="å¿«é€Ÿä»¥å¤ªç½‘802.3u(100M)"></a>å¿«é€Ÿä»¥å¤ªç½‘802.3u(100M)</h4><table><thead><tr><th>å±æ€§</th><th>ä¼ è¾“ä»‹è´¨</th><th>ç‰¹æ€§é˜»æŠ—</th><th>ä¼ è¾“è·ç¦»</th></tr></thead><tbody><tr><td>100Base-TX (4B5B)</td><td>ä¸¤å¯¹5ç±»UTP</td><td>100Î©</td><td>100m</td></tr><tr><td>100Base-TX (4B5B)</td><td>ä¸¤å¯¹STP</td><td>150Î©</td><td>100m</td></tr><tr><td>100Base-FX</td><td>ä¸€å¯¹å¤šæ¨¡å…‰çº¤MMF</td><td>62.5&#x2F;125Î¼m</td><td>2km</td></tr><tr><td>100Base-FX</td><td>ä¸€å¯¹å•æ¨¡å…‰çº¤SMF</td><td>8&#x2F;125Î¼m</td><td>40km</td></tr><tr><td>100Base-T4</td><td>å››å¯¹3ç±»UTP</td><td>100Î©</td><td>100m</td></tr><tr><td>100Base-T2</td><td>ä¸¤å¯¹3ç±»UTP</td><td>100Î©</td><td>100m</td></tr></tbody></table><ul><li>ä¼ è¾“è·ç¦»L&gt;S&gt;T&gt;C</li></ul><h4 id="åƒå…†ä»¥å¤ªç½‘802-3z-802-3ab-1000M"><a href="#åƒå…†ä»¥å¤ªç½‘802-3z-802-3ab-1000M" class="headerlink" title="åƒå…†ä»¥å¤ªç½‘802.3z,802.3ab(1000M)"></a>åƒå…†ä»¥å¤ªç½‘802.3z,802.3ab(1000M)</h4><p>ä»¥ä¸‹æ˜¯æ‚¨æä¾›çš„ä¿¡æ¯ï¼Œæ•´ç†æˆMarkdownæ ¼å¼çš„è¡¨æ ¼ï¼š</p><table><thead><tr><th>æ ‡å‡†</th><th>åç§°</th><th>ä¼ è¾“ä»‹è´¨</th><th>ä¼ è¾“è·ç¦»</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td></td><td>1000Base-SX</td><td>å…‰çº¤(çŸ­æ³¢770~860nm)</td><td>550m</td><td>å¤šæ¨¡å…‰çº¤(50,62.5um)</td></tr><tr><td>IEEE 802.3z</td><td>1000Base-LX</td><td>å…‰çº¤(é•¿æ³¢1270~1355nm)</td><td>5000m</td><td>å•æ¨¡(10um)æˆ–å¤šæ¨¡å…‰çº¤(50,62.5um)</td></tr><tr><td>IEEE 802.3z</td><td>1000Base-CX</td><td>ä¸¤å¯¹STP</td><td>25m</td><td>å±è”½åŒç»çº¿, åŒä¸€æˆ¿é—´å†…çš„è®¾å¤‡ä¹‹é—´</td></tr><tr><td>IEEE802.3ab</td><td>1000Base-T</td><td>å››å¯¹UTP</td><td>100m</td><td>5ç±»éå±è”½åŒç»çº¿, 8B&#x2F;10Bç¼–ç </td></tr></tbody></table><h4 id="ä¸‡å…†ä»¥å¤ªç½‘802-3ae-10G"><a href="#ä¸‡å…†ä»¥å¤ªç½‘802-3ae-10G" class="headerlink" title="ä¸‡å…†ä»¥å¤ªç½‘802.3ae(10G)"></a>ä¸‡å…†ä»¥å¤ªç½‘802.3ae(10G)</h4><table><thead><tr><th>åç§°</th><th>ä¼ è¾“ä»‹è´¨</th><th>ä¼ è¾“è·ç¦»</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>10GBase-S(Short)</td><td>50umå¤šæ¨¡å…‰çº¤</td><td>300m</td><td>850nmä¸²è¡Œ</td></tr><tr><td>10GBase-S(Short)</td><td><strong>62.5umå¤šæ¨¡å…‰çº¤</strong></td><td><strong>65m</strong></td><td>850nmä¸²è¡Œ</td></tr><tr><td>10GBase-L(Long)</td><td>å•æ¨¡å…‰çº¤</td><td>10km</td><td>1310nmä¸²è¡Œ</td></tr><tr><td>**10GBase-E(Extended) **</td><td><strong>å•æ¨¡å…‰çº¤</strong></td><td><strong>40km</strong></td><td><strong>1550nmä¸²è¡Œ</strong></td></tr><tr><td>10GBase-LX4</td><td>å•æ¨¡å…‰çº¤</td><td>10km</td><td>1310nm 4*2.5Gbps æ³¢åˆ†å¤šè·¯å¤ç”¨(WDM)</td></tr><tr><td>10GBase-LX4</td><td>50umå¤šæ¨¡å…‰çº¤</td><td>300m</td><td>1310nm 4*2.5Gbps æ³¢åˆ†å¤šè·¯å¤ç”¨(WDM)</td></tr><tr><td>10GBase-LX4</td><td>62.5umå¤šæ¨¡å…‰çº¤</td><td>300m</td><td>1310nm 4*2.5Gbps æ³¢åˆ†å¤šè·¯å¤ç”¨(WDM)</td></tr></tbody></table><h3 id="è™šæ‹Ÿå±€åŸŸç½‘VLAN"><a href="#è™šæ‹Ÿå±€åŸŸç½‘VLAN" class="headerlink" title="è™šæ‹Ÿå±€åŸŸç½‘VLAN"></a>è™šæ‹Ÿå±€åŸŸç½‘VLAN</h3><ul><li>å†²çªåŸŸ<ul><li>å†²çªåŸŸæ˜¯æŒ‡è¿æ¥åœ¨åŒä¸€å…±äº«ä»‹è´¨ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹çš„é›†åˆï¼Œå†²çªåŸŸå†…æ‰€æœ‰èŠ‚ç‚¹ç«äº‰åŒä¸€å¸¦å®½ï¼Œä¸€ä¸ªèŠ‚ç‚¹å‘å‡ºçš„æŠ¥æ–‡(æ— è®ºæ˜¯å•æ’­ã€ç»„æ’­ã€å¹¿æ’­)ï¼Œå…¶ä½™èŠ‚ç‚¹éƒ½å¯ä»¥æ”¶åˆ°ã€‚</li></ul></li><li>å¹¿æ’­åŸŸ<ul><li>å¹¿æ’­æŠ¥æ–‡æ‰€èƒ½åˆ°è¾¾çš„æ•´ä¸ªè®¿é—®èŒƒå›´ç§°ä¸ºäºŒå±‚å¹¿æ’­åŸŸï¼Œç®€ç§°å¹¿æ’­åŸŸï¼ŒåŒä¸€å¹¿æ’­åŸŸå†…çš„ä¸»æœºéƒ½èƒ½æ”¶åˆ°å¹¿æ’­æŠ¥æ–‡ã€‚</li></ul></li></ul><ul><li>ä¸­ç»§å™¨ã€ç½‘æ¡¥å’Œé›†çº¿å™¨æ˜¯ä¸€ä¸ªå†²çªåŸŸ</li><li>äº¤æ¢æœºçš„ä¸€ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå†²çªåŸŸ</li><li>ä¸€ä¸ªVLANæ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸ</li><li>è·¯ç”±å™¨å¯ä»¥éš”ç¦»å¹¿æ’­åŸŸ</li></ul><ul><li>è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVirtual Local Area Network, VLAN ï¼‰æ ¹æ®ç®¡ç†åŠŸèƒ½ã€ç»„ç»‡æœºæ„æˆ–åº”ç”¨ç±»å‹å¯¹äº¤æ¢å±€åŸŸç½‘è¿›è¡Œåˆ†æ®µè€Œå½¢æˆçš„é€»è¾‘ç½‘ç»œã€‚<ul><li>ä¸åŒ VLAN é€šä¿¡å¿…é¡»ç»è¿‡ä¸‰å±‚è®¾å¤‡ï¼šè·¯ç”±å™¨ã€ä¸‰å±‚äº¤æ¢æœºã€é˜²ç«å¢™ç­‰ã€‚</li><li>è™šæ‹Ÿå±€åŸŸç½‘å·¥ä½œç«™å¯ä»¥ä¸å±äºåŒä¸€ç‰©ç†ç½‘æ®µï¼Œä»»ä½•äº¤æ¢ç«¯å£éƒ½å¯ä»¥åˆ†é…ç»™æŸä¸ª VLANï¼Œå±äºåŒä¸€ VLAN çš„æ‰€æœ‰ç«¯å£æ„æˆä¸€ä¸ªå¹¿æ’­åŸŸã€‚</li></ul></li></ul><h4 id="äº¤æ¢æœºVLANåˆ’åˆ†"><a href="#äº¤æ¢æœºVLANåˆ’åˆ†" class="headerlink" title="äº¤æ¢æœºVLANåˆ’åˆ†"></a>äº¤æ¢æœºVLANåˆ’åˆ†</h4><ul><li>é™æ€åˆ’åˆ†VLAN:åŸºäºäº¤æ¢æœºç«¯å£</li><li>åŠ¨æ€åˆ’åˆ†VLAN:åŸºäºMACåœ°å€ã€åŸºäºç­–ç•¥ã€åŸºäºç½‘ç»œå±‚åè®®ã€åŸºäºç½‘ç»œå±‚åœ°å€</li><li><strong>VLANåˆ’åˆ†é…ç½®</strong><ul><li><strong>é™æ€åˆ’åˆ†VLAN</strong><ul><li>æ‰‹åŠ¨é…ç½®äº¤æ¢æœºæ¥å£åŠ å…¥ç‰¹å®šVLAN</li><li>é…ç½®ç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Huawei] vlan 10 // åˆ›å»ºVLAN 10</span><br><span class="line">[Huawei-vlan10] quit // é€€å‡º</span><br><span class="line">[Huawei] interface GigabitEthernet0/0/1 // è¿›å…¥æ¥å£</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port link-type access // è®¾ç½®æ¥å£ä¸ºaccessç±»å‹</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port default vlan 10 // å°†æ¥å£åŠ å…¥VLAN 10</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>åŠ¨æ€åˆ’åˆ†VLAN</strong><ul><li>æ ¹æ®MACåœ°å€ã€ç½‘ç»œå±‚åœ°å€ã€ç½‘ç»œå±‚åè®®ã€IPå¹¿æ’­åŸŸæˆ–ç®¡ç†ç­–ç•¥è‡ªåŠ¨åˆ’åˆ†</li><li><strong>åŸºäºMACåœ°å€åˆ’åˆ†</strong><ul><li>é…ç½®ç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Huawei] vlan 20 // åˆ›å»ºVLAN 20</span><br><span class="line">[Huawei-vlan20] mac-vlan mac-address 5489-98FC-5825 // å°†æŒ‡å®šMACåœ°å€ç»ˆç«¯åŠ å…¥VLAN 20</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>åŸºäºç­–ç•¥åˆ’åˆ†</strong><ul><li>é…ç½®ç¤ºä¾‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Huawei] vlan 20 // åˆ›å»ºVLAN 20</span><br><span class="line">[Huawei-vlan20] policy-vlan mac-address 0-1-1 ip 10.1.1.1 priority 7</span><br><span class="line">// åŸºäºç­–ç•¥åˆ’åˆ†VLANï¼Œå°†æŒ‡å®šMACåœ°å€å’ŒIPåœ°å€çš„ä¸»æœºåŠ å…¥VLAN 20ï¼Œå¹¶è®¾ç½®802.1pä¼˜å…ˆçº§ä¸º7</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul><h4 id="VLANä½œç”¨"><a href="#VLANä½œç”¨" class="headerlink" title="VLANä½œç”¨"></a>VLANä½œç”¨</h4><ul><li><strong>æ§åˆ¶ç½‘ç»œæµé‡</strong>ï¼šéš”ç¦»å¹¿æ’­åŸŸï¼Œå‡å°‘å†²çªï¼Œæå‡å¸¦å®½åˆ©ç”¨ç‡ã€‚</li><li><strong>æé«˜å®‰å…¨æ€§</strong>ï¼šé™åˆ¶ä¸åŒVLANé—´é€šä¿¡ï¼Œå¢å¼ºç½‘ç»œä¿æŠ¤ã€‚</li><li><strong>çµæ´»ç®¡ç†</strong>ï¼šæŒ‰åŠŸèƒ½åˆ’åˆ†å·¥ä½œç»„ï¼Œæ”¯æŒç§»åŠ¨åŠå…¬ã€‚</li></ul><h4 id="VLANæ ‡ç­¾"><a href="#VLANæ ‡ç­¾" class="headerlink" title="VLANæ ‡ç­¾"></a>VLANæ ‡ç­¾</h4><ul><li><strong>802.1Qæ ‡ç­¾å­—æ®µ</strong><ul><li><strong>PRI (3ä½)</strong>: ä¼˜å…ˆçº§ (Priority)<ul><li>æä¾›0~7å…±8ä¸ªä¼˜å…ˆçº§</li><li>å¤šä¸ªå¸§ç­‰å¾…å‘é€æ—¶ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºå‘é€æ•°æ®åŒ…</li></ul></li><li><strong>VID (12ä½)</strong>: VLANæ ‡è¯†ç¬¦<ul><li>æœ€å¤šè¡¨ç¤º4096ä¸ªVLAN</li><li>VID 0ç”¨äºè¯†åˆ«ä¼˜å…ˆçº§</li><li>VID 4095ä¿ç•™æœªç”¨</li><li>æœ€å¤šå¯é…ç½®4094ä¸ªVLAN</li><li>é»˜è®¤ç®¡ç†VLANæ˜¯1ï¼Œä¸èƒ½åˆ é™¤</li></ul></li></ul></li><li><strong>äº¤æ¢æœºå¤„ç†</strong><ul><li>æ·»åŠ å’Œåˆ é™¤VLANæ ‡ç­¾ç”±ä¸“ç”¨ç¡¬ä»¶è‡ªåŠ¨å®ç°</li><li>å¤„ç†é€Ÿåº¦å¿«ï¼Œä¸ä¼šå¼•å…¥å¤ªå¤§å»¶è¿Ÿ</li></ul></li><li><strong>ç”¨æˆ·è§†è§’</strong><ul><li>æ•°æ®æºäº§ç”Ÿæ ‡å‡†çš„ä»¥å¤ªå¸§</li><li>ç›®æ ‡æ¥æ”¶çš„ä¹Ÿæ˜¯æ ‡å‡†çš„ä»¥å¤ªå¸§</li><li>VLANæ ‡è®°å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„</li></ul></li></ul><p><img src="https://xinhaojin.github.io/picx-images-hosting/image.7p8lw88de.jpg" alt="image"></p><h4 id="äº¤æ¢æœºç«¯å£ç±»å‹"><a href="#äº¤æ¢æœºç«¯å£ç±»å‹" class="headerlink" title="äº¤æ¢æœºç«¯å£ç±»å‹"></a>äº¤æ¢æœºç«¯å£ç±»å‹</h4><ul><li><strong>Accessæ¥å£</strong><ul><li>åªèƒ½ä¼ é€å•ä¸ªVLANæ•°æ®</li><li>ä¸€èˆ¬ç”¨äºè¿æ¥PC&#x2F;æ‘„åƒå¤´ç­‰ç»ˆç«¯</li></ul></li><li><strong>Trunkæ¥å£</strong><ul><li>èƒ½ä¼ é€å¤šä¸ªVLANæ•°æ®</li><li>ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´äº’è”</li></ul></li><li><strong>Hybridæ¥å£</strong><ul><li>æ··åˆæ¥å£ï¼ŒåŒ…å«Accesså’ŒTrunkå±æ€§</li></ul></li><li><strong>QinQ</strong><ul><li>åŒå±‚æ ‡ç­¾</li><li>ä¸€èˆ¬ç”¨äºè¿è¥å•†åŸåŸŸç½‘</li></ul></li></ul><h3 id="ç”Ÿæˆæ ‘åè®®"><a href="#ç”Ÿæˆæ ‘åè®®" class="headerlink" title="ç”Ÿæˆæ ‘åè®®"></a>ç”Ÿæˆæ ‘åè®®</h3><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><ul><li>å½“ä»¥å¤ªç½‘ä¸­çš„è®¾å¤‡æˆ–é“¾è·¯å‡ºç°æ•…éšœæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç½‘ç»œä¸è‡³äºä¸­æ–­ã€‚è¿™å¾€å¾€éœ€è¦åœ¨æ„å»ºä»¥å¤ªç½‘æ—¶å°±å¢åŠ å¥½å†—ä½™é“¾è·¯ï¼Œä½¿å¾—ç½‘ç»œä¸­ä»»æ„ä¸¤ä¸ªç«™ç‚¹å¯ä»¥é€šè¿‡ä¸¤æ¡ç”šè‡³å¤šæ¡è·¯å¾„è¿é€šã€‚</li><li>åœ¨å†—ä½™é“¾è·¯æé«˜äº†ç½‘ç»œå¯é æ€§çš„åŒæ—¶ï¼Œä¹Ÿä¼šäº§ç”Ÿç½‘ç»œç¯è·¯ã€‚</li><li>ç½‘ç»œç¯è·¯ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜:<ul><li>å¹¿æ’­é£æš´</li><li>ä¸»æœºæ”¶åˆ°é‡å¤çš„å¹¿æ’­å¸§</li><li>äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨éœ‡è¡(æ¼‚ç§»)<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.73tw63bo1s.jpg" alt="image"></li></ul></li></ul><h4 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>ç”Ÿæˆæ ‘åè®® (Spanning Tree Protocol) èƒ½å¤Ÿåœ¨ç½‘ç»œä¸­å­˜åœ¨äºŒå±‚ç¯è·¯æ—¶ï¼Œé€šè¿‡é€»è¾‘é˜»å¡(Block)ç‰¹å®šç«¯å£ï¼Œä»è€Œæ‰“ç ´ç¯è·¯ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œå‡ºç°æ‹“æ‰‘å˜æ›´æ—¶åŠæ—¶æ”¶æ•›ï¼Œä¿éšœç½‘ç»œå†—ä½™æ€§ã€‚</p><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>ä¸è®ºäº¤æ¢æœºä¹‹é—´é‡‡ç”¨æ€æ ·çš„ç‰©ç†è¿æ¥ï¼Œäº¤æ¢æœºéƒ½èƒ½å¤Ÿè‡ªåŠ¨è®¡ç®—å¹¶æ„å»ºä¸€ä¸ªé€»è¾‘ä¸Šæ²¡æœ‰ç¯è·¯çš„ç½‘ç»œï¼Œå…¶é€»è¾‘æ‹“æ‰‘ç»“æ„å¿…é¡»æ˜¯æ ‘å‹çš„ï¼ˆæ— é€»è¾‘ç¯è·¯ï¼‰ã€‚</li><li>æœ€ç»ˆç”Ÿæˆçš„æ ‘å‹é€»è¾‘æ‹“æ‰‘è¦ç¡®ä¿è¿é€šæ•´ä¸ªç½‘ç»œçš„æ¯ä¸€ä¸ªéƒ¨åˆ†ã€‚</li><li>å½“é¦–æ¬¡è¿æ¥äº¤æ¢æœºæˆ–ç½‘ç»œç‰©ç†æ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæœ‰å¯èƒ½æ˜¯äººä¸ºæ”¹å˜æˆ–æ•…éšœï¼‰ï¼Œäº¤æ¢æœºéƒ½å°†è¿›è¡Œç”Ÿæˆæ ‘çš„é‡æ–°è®¡ç®—ã€‚</li></ul><h3 id="ç”Ÿæˆæ ‘ç®—æ³•"><a href="#ç”Ÿæˆæ ‘ç®—æ³•" class="headerlink" title="ç”Ÿæˆæ ‘ç®—æ³•"></a>ç”Ÿæˆæ ‘ç®—æ³•</h3><h4 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h4><ul><li>ç½‘æ¡¥ID(Bridge ID)<ul><li>ç½‘æ¡¥IDä¸€å…±8ä¸ªå­—èŠ‚ï¼Œç”±2ä¸ªå­—èŠ‚ä¼˜å…ˆçº§å’Œ6ä¸ªå­—èŠ‚çš„MACåœ°å€æ„æˆã€‚æ¡¥ä¼˜å…ˆçº§é»˜è®¤ä¸º 32768ï¼Œå¯ä»¥æ‰‹å·¥ä¿®æ”¹ã€‚</li><li>MACåœ°å€ä¸ºäº¤æ¢æœºèƒŒæ¿MACã€‚</li></ul></li><li>è·¯å¾„å¼€é”€(Path Cost)<ul><li>è·¯å¾„å¼€é”€æ˜¯æŒ‡ä»ç½‘æ¡¥åˆ°æŒ‡å®šç«¯å£çš„è·ç¦»ã€‚</li><li>è·¯å¾„å¼€é”€è¶Šå°ï¼Œè¯´æ˜è¯¥è·¯å¾„è¶ŠçŸ­ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</li><li>è·¯å¾„å¼€é”€çš„é»˜è®¤å€¼åŠå–å€¼èŒƒå›´ç”±é€‰å®šçš„å¼€é”€ç®—æ³•å†³å®šï¼Œ<strong>è·¯å¾„å¼€é”€ä¸ç«¯å£å¸¦å®½æˆåæ¯”</strong></li><li>åä¸ºè®¾å¤‡è·¯å¾„å¼€é”€æ ‡å‡†æœ‰:802.1d-1998ã€802.1tåŠç§æœ‰çš„legacyï¼Œé»˜è®¤ä¸º802.1tæ ‡å‡†ã€‚</li></ul></li></ul><table><thead><tr><th>å¸¦å®½</th><th>802.1t</th><th>802.1d</th></tr></thead><tbody><tr><td>10M</td><td>2,000,000</td><td>100</td></tr><tr><td>100M</td><td>200,000</td><td>19</td></tr><tr><td>1000M</td><td>20,000</td><td>4</td></tr><tr><td>10G</td><td>2,000</td><td>2</td></tr></tbody></table><h4 id="ç®—æ³•æ­¥éª¤"><a href="#ç®—æ³•æ­¥éª¤" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h4><ol><li>é€‰ä¸¾æ ¹äº¤æ¢æœºï¼šç½‘æ¡¥IDæœ€å°è€…<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.1sezleumuh.jpg" alt="image"></li><li>é€‰ä¸¾æ ¹ç«¯å£ï¼ˆå¯¹äºéæ ¹äº¤æ¢æœºè€Œè¨€ï¼‰<ul><li>ç«¯å£åˆ°æ ¹äº¤æ¢æœºçš„è·¯å¾„å¼€é”€æœ€å°</li><li>å¯¹ç«¯ç½‘æ¡¥IDæœ€å°</li><li>å¯¹ç«¯ç«¯å£IDæœ€å°<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.839zjasx18.jpg" alt="image"></li></ul></li><li>é€‰ä¸¾æŒ‡å®šç«¯å£å¹¶é˜»å¡å¤‡ç”¨ç«¯å£<ul><li>æ ¹äº¤æ¢æœºçš„æ‰€æœ‰ç«¯å£éƒ½æ˜¯æ ¹ç«¯å£</li><li>æ ¹ç«¯å£çš„å¯¹ç«¯ç«¯å£ä¸€å®šæ˜¯æŒ‡å®šç«¯å£</li><li>è½¬å‘ç«¯å£åˆ°æ ¹äº¤æ¢æœºçš„è·¯å¾„æˆæœ¬æœ€å°</li><li>æœ¬ç«¯çš„ç½‘æ¡¥IDæœ€å°<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.8ojn5mwj7m.jpg" alt="image"></li></ul></li></ol><h3 id="åŸåŸŸç½‘MAN"><a href="#åŸåŸŸç½‘MAN" class="headerlink" title="åŸåŸŸç½‘MAN"></a>åŸåŸŸç½‘MAN</h3><ul><li><p><strong>åŸåŸŸç½‘ (MAN,Metropolitan Area Network)</strong></p><ul><li>è¦†ç›–åŸå¸‚æˆ–åŸé•‡åŒºåŸŸçš„è®¡ç®—æœºç½‘ç»œ</li><li>è¿æ¥å¤šä¸ªå±€åŸŸç½‘ (LAN) å’Œå¹¿åŸŸç½‘ (WAN)</li><li>æä¾›æ¯”å±€åŸŸç½‘æ›´å¹¿çš„è¦†ç›–èŒƒå›´ï¼Œä½†æ¯”å¹¿åŸŸç½‘æ›´å°</li></ul></li><li><p><strong>QinQ æŠ€æœ¯</strong></p><ul><li>802.1ad æˆ– Stacked VLAN</li><li>å…è®¸åœ¨ä¸€ä¸ª VLAN æ ‡ç­¾å†…åµŒå¥—å¦ä¸€ä¸ª VLAN æ ‡ç­¾</li><li>ç”¨äºæœåŠ¡æä¾›å•†ç½‘ç»œä¸­åŒºåˆ†ä¸åŒå®¢æˆ·çš„æµé‡</li><li>åœ¨åŸåŸŸç½‘ä¸­å®ç°ä¸åŒæœåŠ¡ç±»å‹çš„é€»è¾‘éš”ç¦»</li></ul></li><li><p><strong>E-LAN æŠ€æœ¯</strong></p><ul><li>802.1Q çš„ VLAN å¸§æ ‡è®°</li><li>åŒå±‚æ ‡è®°ï¼Œæ‰“äº†ä¸¤å±‚ VLAN æ ‡ç­¾</li><li>å®šä¹‰ä¸º IEEE802.1adï¼Œä¹Ÿç§°ä¸º QinQ æŠ€æœ¯</li></ul></li><li><p><strong>QinQ å®ç°</strong></p><ul><li>ç”¨æˆ· VLAN åµŒå¥—åœ¨è¿è¥å•†åŸåŸŸä»¥å¤ªç½‘ VLAN ä¸­ä¼ é€</li></ul></li><li><p><strong>IEEE802.1ah (PBB)</strong></p><ul><li>ä¹Ÿç§°ä¸º MAC-IN-MAC æŠ€æœ¯ï¼Œå…è®¸åœ¨ä»¥å¤ªç½‘å¸§ä¸­åµŒå¥—å¦ä¸€ä¸ªä»¥å¤ªç½‘å¸§ã€‚è¿™ç§æŠ€æœ¯ä¸»è¦ç”¨äºæœåŠ¡æä¾›å•†çš„ç½‘ç»œä¸­ï¼Œä»¥å®ç°æ›´é«˜æ•ˆçš„ç½‘ç»œç®¡ç†å’ŒæœåŠ¡éš”ç¦»ã€‚MAC-in-MAC æ˜¯ IEEE 802.1ah æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿè¢«ç§°ä¸º Provider Backbone Bridge (PBB)ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/image.86tlh1yqsn.jpg" alt="image"></li></ul></li></ul><p>1ã€ä»€ä¹ˆæ˜¯åŸåŸŸç½‘ï¼ŸåŸåŸŸç½‘æ¯”å±€åŸŸç½‘ä¼ è¾“è·ç¦»è¿œï¼Œèƒ½å¤Ÿè¦†ç›–æ•´ä¸ªåŸå¸‚ã€‚èƒ½å¤Ÿæä¾›åˆ†ç»„ä¼ è¾“çš„æ•°æ®ã€è¯­éŸ³å’Œè§†é¢‘ç­‰å¤šåª’ä½“ä¸šåŠ¡ã€‚æ›´å¤§çš„ä¼ è¾“å®¹é‡ï¼Œæ›´é«˜çš„ä¼ è¾“æ•ˆç‡ã€‚<br>2ã€<code>&lt;mark&gt;</code>åŸåŸŸä»¥å¤ªç½‘ï¼šâ‘ ä»¥å¤ªç½‘ä¸“ç”¨çº¿ã€â‘¡ä»¥å¤ªç½‘è™šæ‹Ÿä¸“çº¿ã€â‘¢ä»¥å¤ªå±€åŸŸç½‘æœåŠ¡ï¼ˆE-LANï¼‰æœ€çœ‹å¥½ <code>&lt;/mark&gt;</code><br>3ã€æ— çº¿åŸåŸŸç½‘æ ‡å‡†ï¼šWiMAX(802.16då›ºå®šã€802.16eç§»åŠ¨)ã€WiMAXII(802.16m4G)<br><code>&lt;mark&gt;</code>Q-in-Q:è¿è¥å•†ç½‘æ¡¥åè®®(PBP)IEEE802.1ad(åŸºäºæŠ€æœ¯æ˜¯åœ¨ä»¥å¤ªå¸§ä¸­æ’å…¥è¿è¥å•†VLANæ ‡è®°å­—æ®µ)ã€‚MAC-in-MAC:è¿è¥å•†ä¸»å¹²ç½‘æ¡¥(PBB)IEEE802.1ah <code>&lt;/mark&gt;</code><br><img src="/./%E8%BD%AF%E8%80%83%E4%B8%AD%E7%BA%A7%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%85%A8%E9%9D%A2%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%AC%AC2%E7%89%88(5%E4%B8%87%E5%AD%97)+%E9%85%8D%E5%A5%97%E8%A7%86%E9%A2%91%E5%8F%8A%E8%AF%BE%E4%BB%B6/4f533cceb4c5ea3cc831d3b90888cdef.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="ç¬¬5ç« -æ— çº¿é€šä¿¡ç½‘"><a href="#ç¬¬5ç« -æ— çº¿é€šä¿¡ç½‘" class="headerlink" title="ç¬¬5ç«  æ— çº¿é€šä¿¡ç½‘"></a>ç¬¬5ç«  æ— çº¿é€šä¿¡ç½‘</h2><h3 id="æ— çº¿ç§»åŠ¨é€šä¿¡åˆ¶å¼æ ‡å‡†"><a href="#æ— çº¿ç§»åŠ¨é€šä¿¡åˆ¶å¼æ ‡å‡†" class="headerlink" title="æ— çº¿ç§»åŠ¨é€šä¿¡åˆ¶å¼æ ‡å‡†"></a>æ— çº¿ç§»åŠ¨é€šä¿¡åˆ¶å¼æ ‡å‡†</h3><h4 id="3Gæ ‡å‡†"><a href="#3Gæ ‡å‡†" class="headerlink" title="3Gæ ‡å‡†"></a>3Gæ ‡å‡†</h4><ul><li><strong>W-CDMA (Wideband Code Division Multiple Access)</strong>ï¼šé¢‘åˆ†åŒå·¥</li><li><strong>CDMA-2000 (Code Division Multiple Access 2000)</strong>ï¼šé¢‘åˆ†åŒå·¥</li><li><strong>TD-SCDMA (Time Division Synchronous Code Division Multiple Access)</strong>ï¼šæ—¶åˆ†åŒå·¥ï¼Œä¸­å›½ç‰¹æœ‰</li><li><strong>WiMAX (Worldwide Interoperability for Microwave Access)</strong>ï¼šIEEE 802.16då›ºå®š</li><li><strong>WiMAX (Worldwide Interoperability for Microwave Access)</strong>ï¼šIEEE 802.16eç§»åŠ¨</li></ul><h4 id="4Gæ ‡å‡†"><a href="#4Gæ ‡å‡†" class="headerlink" title="4Gæ ‡å‡†"></a>4Gæ ‡å‡†</h4><ul><li><strong>UMB (Ultra Mobile Broadband)</strong>ï¼šè¶…ç§»åŠ¨å®½å¸¦ (ä¸ä½¿ç”¨)</li><li><strong>LTE Advanced (Long Term Evolution Advanced)</strong>ï¼šé•¿æœŸæ¼”è¿›æŠ€æœ¯</li><li><strong>WiMAX II (Worldwide Interoperability for Microwave Access II)</strong>ï¼šå…¨çƒå¾®æ³¢äº’è”æ¥å…¥, IEEE 802.16m</li></ul><h4 id="5Gæ ‡å‡†"><a href="#5Gæ ‡å‡†" class="headerlink" title="5Gæ ‡å‡†"></a>5Gæ ‡å‡†</h4><ul><li><strong>5G NR (New Radio)</strong>ï¼š5Gçš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå®šä¹‰äº†5Gçš„æ— çº¿æ¥å£å’Œä¿¡å·å¤„ç†æ–¹å¼</li><li><strong>NSA (Non-Standalone)</strong>ï¼šéç‹¬ç«‹ç»„ç½‘ï¼Œ5G NRä¾èµ–äºç°æœ‰çš„4G LTEç½‘ç»œåŸºç¡€è®¾æ–½</li><li><strong>SA (Standalone)</strong>ï¼šç‹¬ç«‹ç»„ç½‘ï¼Œ5G NRå®Œå…¨ç‹¬ç«‹äº4G LTEç½‘ç»œï¼Œæä¾›å®Œæ•´çš„5GåŠŸèƒ½</li><li><strong>DSS (Dynamic Spectrum Sharing)</strong>ï¼šåŠ¨æ€é¢‘è°±å…±äº«ï¼Œå…è®¸åœ¨åŒä¸€é¢‘æ®µä¸ŠåŒæ—¶æ”¯æŒ4Gå’Œ5GæœåŠ¡</li><li><strong>mmWave (Millimeter Wave)</strong>ï¼šæ¯«ç±³æ³¢ï¼Œä½¿ç”¨é«˜é¢‘æ®µï¼ˆå¦‚30GHzè‡³300GHzï¼‰çš„é¢‘è°±ï¼Œä»¥å®ç°æé«˜çš„æ•°æ®ä¼ è¾“é€Ÿç‡</li></ul><h4 id="ç›¸å…³é‡ç‚¹"><a href="#ç›¸å…³é‡ç‚¹" class="headerlink" title="ç›¸å…³é‡ç‚¹"></a>ç›¸å…³é‡ç‚¹</h4><p><strong>ç§»åŠ¨é€šä¿¡3Gå’Œ4Gçš„åŒºåˆ«</strong></p><ul><li>3GåŸºäºæ—¶åˆ†å¤ç”¨çš„è¯­éŸ³äº¤æ¢ç½‘ï¼Œ4Gæ˜¯åŸºäºIPçš„åˆ†ç»„äº¤æ¢ç½‘<br><strong>ç½‘ç»œåˆ‡ç‰‡</strong></li><li>æ˜¯ä¸€ç§æŒ‰éœ€ç»„ç½‘çš„æ–¹å¼ï¼Œå¯ä»¥è®©è¿è¥å•†åœ¨ç»Ÿä¸€çš„åŸºç¡€è®¾æ–½ä¸Šåˆ†ç¦»å‡ºå¤šä¸ªè™šæ‹Ÿçš„ç«¯åˆ°ç«¯ç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œåˆ‡ç‰‡ä»æ— çº¿æ¥å…¥ç½‘åˆ°æ‰¿è½½ç½‘å†åˆ°æ ¸å¿ƒç½‘ä¸Šè¿›è¡Œé€»è¾‘éš”ç¦»ï¼Œ ä»¥é€‚é…å„ç§å„æ ·ç±»å‹çš„åº”ç”¨ã€‚åœ¨ä¸€ä¸ªç½‘ç»œåˆ‡ç‰‡ä¸­ï¼Œ è‡³å°‘å¯åˆ†ä¸º<strong>æ— çº¿ç½‘å­åˆ‡ç‰‡ã€æ‰¿è½½ç½‘å­åˆ‡ç‰‡å’Œæ ¸å¿ƒç½‘å­åˆ‡ç‰‡</strong>ä¸‰éƒ¨åˆ†ã€‚<br><strong>5Gé€šä¿¡æŠ€æœ¯çš„è½½æ³¢è°ƒåˆ¶æŠ€æœ¯</strong></li><li>F-OFDMï¼ˆFlexible Orthogonal Frequency Division Multiplexingï¼‰çµæ´»æ­£äº¤é¢‘åˆ†å¤ç”¨ã€‚</li></ul><h3 id="WLANæ— çº¿å±€åŸŸç½‘"><a href="#WLANæ— çº¿å±€åŸŸç½‘" class="headerlink" title="WLANæ— çº¿å±€åŸŸç½‘"></a>WLANæ— çº¿å±€åŸŸç½‘</h3><h4 id="æ— çº¿ç½‘çš„ä¸‰ç§é€šä¿¡æŠ€æœ¯"><a href="#æ— çº¿ç½‘çš„ä¸‰ç§é€šä¿¡æŠ€æœ¯" class="headerlink" title="æ— çº¿ç½‘çš„ä¸‰ç§é€šä¿¡æŠ€æœ¯"></a>æ— çº¿ç½‘çš„ä¸‰ç§é€šä¿¡æŠ€æœ¯</h4><ul><li>çº¢å¤–çº¿</li><li>æ‰©å±•é¢‘è°±<ul><li>å°†ä¿¡å·æ•£å¸ƒåˆ°æ›´å®½çš„å¸¦å®½ä¸Šä»¥å‡å°‘å‘é€é˜»å¡å’Œå¹²æ‰°çš„å‡ ç‡ï¼Œ</li><li>ç”¨ä¼ªéšæœºåºåˆ—å¯¹ä»£è¡¨æ•°æ®çš„æ¨¡æ‹Ÿä¿¡å·è¿›è¡Œè°ƒåˆ¶</li><li>æ‰©é¢‘è·³é¢‘æŠ€æœ¯æœ‰åˆ©äºä¿å¯†é€šä¿¡</li></ul></li><li>çª„å¸¦å¾®æ³¢</li></ul><p>WLANä¸»è¦ä½¿ç”¨æ‰©å±•é¢‘è°±æŠ€æœ¯ï¼šé¢‘ç‡è·³åŠ¨æ‰©é¢‘FHSSï¼ˆè“ç‰™ï¼‰å’Œç›´æ¥åºåˆ—æ‰©å±•é¢‘è°±DSSSï¼ˆWiFiï¼‰<br><strong>ä¸‰ç±»WLANç½‘ç»œ</strong></p><ol><li><strong>åŸºç¡€æ— çº¿ç½‘ç»œ</strong>ï¼šç”±å›ºå®šçš„æ— çº¿æ¥å…¥ç‚¹æ„æˆï¼Œè®¾å¤‡é€šè¿‡è¿™äº›æ¥å…¥ç‚¹è¿æ¥åˆ°ç½‘ç»œã€‚</li><li><strong>Ad Hocç½‘ç»œ</strong>ï¼šä¸€ç§ä¸´æ—¶çš„å¯¹ç­‰ç½‘ç»œï¼Œè®¾å¤‡ä¹‹é—´ç›´æ¥é€šä¿¡ï¼Œæ²¡æœ‰å›ºå®šçš„æ¥å…¥ç‚¹ï¼Œé€‚ç”¨äºå†›é˜Ÿè‡ªç»„ç½‘ç»œã€ä¸´æ—¶ä¼šè®®ã€ä¸´æ—¶ä¸šåŠ¡ç­‰ã€‚ã€‚</li><li><strong>åˆ†å¸ƒå¼æ— çº¿ç³»ç»Ÿ</strong>ï¼šå¤šä¸ªæ¥å…¥ç‚¹ç»„æˆçš„ç½‘ç»œï¼Œæä¾›æ›´å¹¿çš„è¦†ç›–èŒƒå›´å’Œæ— ç¼æ¼«æ¸¸ä½“éªŒï¼Œé€šè¿‡å¤šä¸ªACæ§åˆ¶å¤šä¸ªAPã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.4g4fzwe8ze.jpg" alt="image"></li></ol><h4 id="WLANé¢‘è°±ä¸ä¿¡é“"><a href="#WLANé¢‘è°±ä¸ä¿¡é“" class="headerlink" title="WLANé¢‘è°±ä¸ä¿¡é“"></a>WLANé¢‘è°±ä¸ä¿¡é“</h4><p>ISMé¢‘æ®µ,ç¾å›½è”é‚¦é€šè®¯å§”å‘˜ä¼šFCCå®šä¹‰ï¼Œæ— æˆæƒé™åˆ¶</p><ul><li>å·¥ä¸šé¢‘æ®µï¼š902-928MHz</li><li>ç§‘å­¦é¢‘æ®µï¼š2.4-2.4835GHz</li><li>åŒ»ç–—é¢‘æ®µï¼š5.725-5.875GHz<br>2.4Gé¢‘æ®µ<br>-13ä¸ªä¿¡é“ï¼Œç›¸é‚»ä¿¡é“ç›¸å·®5MHz,3ä¸ªä¸é‡å ä¿¡é“ï¼š1ï¼Œ6ï¼Œ11ï¼Œä¸é‡å ä¿¡é“é—´éš”5ä¸ªä¿¡é“<br>5G+5.8Gé¢‘æ®µ<br>-5ä¸ªä¸é‡å ä¿¡é“</li></ul><h3 id="802-11"><a href="#802-11" class="headerlink" title="802.11"></a>802.11</h3><h4 id="802-11æŠ€æœ¯æ ‡å‡†å¯¹æ¯”"><a href="#802-11æŠ€æœ¯æ ‡å‡†å¯¹æ¯”" class="headerlink" title="802.11æŠ€æœ¯æ ‡å‡†å¯¹æ¯”"></a>802.11æŠ€æœ¯æ ‡å‡†å¯¹æ¯”</h4><table><thead><tr><th>ç‰¹æ€§</th><th>802.11</th><th>802.11b</th><th>802.11a</th><th>802.11g</th><th>802.11n</th><th>802.11ac</th><th>802.11ax</th></tr></thead><tbody><tr><td>æ ‡å‡†å‘å¸ƒæ—¶é—´</td><td>1997</td><td>1999</td><td>1999</td><td>2003</td><td>2009</td><td>2012</td><td>2018</td></tr><tr><td>é¢‘ç‡èŒƒå›´</td><td>2.4GHz</td><td>2.4GHz</td><td>5GHz</td><td>2.4GHz</td><td>2.4GHz &amp; 5GHz</td><td>5GHz</td><td>2.4GHz &amp; 5GHz</td></tr><tr><td>éé‡å ä¿¡é“</td><td>3</td><td>3</td><td>5</td><td>3</td><td>3+5</td><td>5</td><td>3+5</td></tr><tr><td>è°ƒåˆ¶æŠ€æœ¯</td><td>FHSS&#x2F;DSSS</td><td>CCK&#x2F;DSSS</td><td>OFDM</td><td>CCK&#x2F;OFDM</td><td>OFDM</td><td>OFDM</td><td>OFDMA</td></tr><tr><td>æœ€é«˜é€Ÿç‡</td><td>2M</td><td>11M</td><td>54M</td><td>54M</td><td>600M</td><td>6900M</td><td>9600M</td></tr><tr><td>å®é™…åå</td><td>200K</td><td>5M</td><td>22M</td><td>22M</td><td>100+M</td><td>900M</td><td>1Gä»¥ä¸Š</td></tr><tr><td>å…¼å®¹æ€§</td><td>N&#x2F;A</td><td>ä¸11gäº§å“å¯äº’é€š</td><td><strong>ä¸11b&#x2F;gä¸èƒ½äº’é€š</strong></td><td>ä¸11bäº§å“å¯äº’é€š</td><td>å‘ä¸‹å…¼å®¹802.11a&#x2F;b&#x2F;g</td><td>å‘ä¸‹å…¼å®¹802.11a&#x2F;n</td><td>å‘ä¸‹å…¼å®¹802.11a&#x2F;n</td></tr></tbody></table><p><strong>Wi-Fiæ ‡å‡†çš„å·¥ä½œé¢‘æ®µ</strong></p><ul><li>2.4GHz: 802.11ã€802.11bå’Œ802.11g</li><li>5GHzï¼š802.11aå’Œ802.11ac</li><li>2.4GHz+5GHzï¼š802.11nå’Œ802.11axã€‚<br><strong>ä¸åŒ802.11æ ‡å‡†çš„æœ€å¤§é€Ÿç‡</strong></li><li>802.11næœ€å¤§æ”¯æŒ600Mbpsï¼Œå•†ç”¨äº§å“å¤§å¤šæ”¯æŒåˆ°300Mbps</li><li>802.11axé€Ÿç‡å¯è¾¾9600Mbps</li></ul><h4 id="802-11MACå±‚è®¿é—®æ§åˆ¶æœºåˆ¶"><a href="#802-11MACå±‚è®¿é—®æ§åˆ¶æœºåˆ¶" class="headerlink" title="802.11MACå±‚è®¿é—®æ§åˆ¶æœºåˆ¶"></a>802.11MACå±‚è®¿é—®æ§åˆ¶æœºåˆ¶</h4><ul><li><strong>CSMA&#x2F;CA (Carrier Sense Multiple Access with Collision Avoidance)</strong><ul><li>åˆ†å¸ƒå¼åè°ƒåŠŸèƒ½</li><li>å¤§å®¶äº‰ç”¨è®¿é—®ï¼ˆæœ‰ç«äº‰ï¼‰</li></ul></li><li><strong>RTS&#x2F;CTS (Request to Send&#x2F;Clear to Send)</strong><ul><li>ä¿¡é“é¢„çº¦æœºåˆ¶</li><li>è¦å‘é€å…ˆæ‰“æŠ¥å‘Šï¼Œå…¶ä»–ç»ˆç«¯è®°å½•ä¿¡é“å ç”¨æ—¶é—´</li></ul></li><li><strong>PCF (Point Coordination Function)</strong><ul><li>ç‚¹åè°ƒåŠŸèƒ½</li><li>ç”± AP é›†ä¸­è½®è¯¢æ‰€æœ‰ç»ˆç«¯</li><li>å°†å‘é€æƒé™è½®æµäº¤ç»™å„ä¸ªç»ˆç«¯ï¼Œç±»ä¼¼ä»¤ç‰Œï¼ˆæ— ç«äº‰ï¼‰<br>ä»¥ä¸‹æ˜¯ä¸ºæ‚¨ä¼˜åŒ–åçš„ Markdown æ ¼å¼å†…å®¹ï¼š</li></ul></li></ul><h4 id="802-11-æ ‡å‡†å®šä¹‰çš„å¸§é—´é—´éš”ï¼ˆIFSï¼‰"><a href="#802-11-æ ‡å‡†å®šä¹‰çš„å¸§é—´é—´éš”ï¼ˆIFSï¼‰" class="headerlink" title="802.11 æ ‡å‡†å®šä¹‰çš„å¸§é—´é—´éš”ï¼ˆIFSï¼‰"></a>802.11 æ ‡å‡†å®šä¹‰çš„å¸§é—´é—´éš”ï¼ˆIFSï¼‰</h4><ul><li><strong>IFS (Interframe Space)</strong><ul><li>æœ€é•¿çš„ IFSã€‚</li><li>ä¼˜å…ˆçº§æœ€ä½ã€‚</li><li>ç”¨äºå¼‚æ­¥å¸§ç«äº‰è®¿é—®æ—¶å»¶ã€‚</li></ul></li><li><strong>PIFS (Point Coordination Interframe Space)</strong><ul><li>ä¸­ç­‰é•¿åº¦çš„ IFSã€‚</li><li>ä¼˜å…ˆçº§å±…ä¸­ã€‚</li><li>åœ¨ PCFï¼ˆç‚¹åè°ƒåŠŸèƒ½ï¼‰æ“ä½œä¸­ä½¿ç”¨ã€‚</li></ul></li><li><strong>SIFS (Short Interframe Space)</strong><ul><li>æœ€çŸ­çš„ IFSã€‚</li><li>ä¼˜å…ˆçº§æœ€é«˜ã€‚</li><li>ç”¨äºéœ€è¦ç«‹å³å“åº”çš„æ“ä½œï¼Œå¦‚ç¡®è®¤ ACKï¼ˆAcknowledgmentï¼‰ã€‚</li></ul></li></ul><h3 id="ç§»åŠ¨AD-Hocç½‘ç»œ"><a href="#ç§»åŠ¨AD-Hocç½‘ç»œ" class="headerlink" title="ç§»åŠ¨AD Hocç½‘ç»œ"></a>ç§»åŠ¨AD Hocç½‘ç»œ</h3><p>802.11å®šä¹‰AD Hocç½‘ç»œæ˜¯ç”±æ— çº¿ç§»åŠ¨èŠ‚ç‚¹ç»„æˆçš„å¯¹ç­‰ç½‘ï¼Œ æ— éœ€ç½‘ç»œåŸºç¡€è®¾æ–½çš„æ”¯æŒï¼Œ æ¯ä¸ªèŠ‚ç‚¹<strong>æ—¢æ˜¯ä¸»æœº , åˆæ˜¯è·¯ç”±å™¨</strong> , æ˜¯ä¸€ç§MANNET(Mobile Ad Hoc Network)ç½‘ç»œã€‚</p><h4 id="MANET-ç½‘ç»œç‰¹ç‚¹"><a href="#MANET-ç½‘ç»œç‰¹ç‚¹" class="headerlink" title="MANET ç½‘ç»œç‰¹ç‚¹"></a>MANET ç½‘ç»œç‰¹ç‚¹</h4><ul><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„åŠ¨æ€å˜åŒ–ï¼Œä¸èƒ½ä½¿ç”¨ä¼ ç»Ÿè·¯ç”±åè®®ï¼Œä½¿ç”¨çš„æ˜¯DSDV ( Destination- sequenced Distance Vector ) è·¯ç”±åè®®</li><li>æ— çº¿ä¿¡é“æä¾›çš„å¸¦å®½è¾ƒå°ï¼Œä¿¡å·è¡°è½å’Œå™ªå£°å¹²æ‰°çš„å½±å“å´å¾ˆå¤§ã€‚</li><li>æ— çº¿ç»ˆç«¯æºå¸¦çš„ç”µæºèƒ½é‡æœ‰é™ã€‚</li><li>å®¹æ˜“æ‹›è‡´ç½‘ç»œçªƒå¬ã€æ¬ºéª—ã€æ‹’ç»æœåŠ¡ç­‰æ¶æ„æ”»å‡»çš„å¨èƒã€‚</li></ul><h3 id="WLANå®‰å…¨æœºåˆ¶"><a href="#WLANå®‰å…¨æœºåˆ¶" class="headerlink" title="WLANå®‰å…¨æœºåˆ¶"></a>WLANå®‰å…¨æœºåˆ¶</h3><ul><li>SSID è®¿é—®æ§åˆ¶<ul><li>éšè— SSIDï¼Œä½¿æœªæˆæƒç”¨æˆ·æ— æ³•æœç´¢åˆ°ç½‘ç»œã€‚</li></ul></li><li>ç‰©ç†åœ°å€è¿‡æ»¤<ul><li>åœ¨æ— çº¿è·¯ç”±å™¨ä¸Šè®¾ç½® MAC åœ°å€çš„é»‘ç™½åå•ï¼Œæ§åˆ¶è®¾å¤‡è®¿é—®æƒé™ã€‚</li></ul></li><li>WEP è®¤è¯å’ŒåŠ å¯†<ul><li>è®¤è¯ï¼šPSK é¢„å…±äº«å¯†é’¥è®¤è¯ã€‚</li><li>åŠ å¯†ï¼šä½¿ç”¨ RC4 åŠ å¯†ç®—æ³•ã€‚</li></ul></li><li>WPA (802.11i è‰æ¡ˆ)<ul><li>è®¤è¯ï¼šé‡‡ç”¨ 802.1x è®¤è¯åè®®ã€‚</li><li>åŠ å¯†ï¼š<ul><li>RC4ï¼ˆå¢å¼ºç‰ˆï¼‰</li><li>TKIPï¼ˆä¸´æ—¶å¯†é’¥å®Œæ•´æ€§åè®®ï¼ŒåŠ¨æ€æ”¹å˜å¯†é’¥ï¼‰</li><li>æ”¯æŒå®Œæ•´æ€§è®¤è¯å’Œé˜²é‡æ”¾æ”»å‡»ã€‚</li></ul></li></ul></li><li>WPA2 (802.11i)<ul><li>é’ˆå¯¹ WPA è¿›è¡Œä¼˜åŒ–ã€‚</li><li>åŠ å¯†åè®®ï¼šç”± RC4 å˜ä¸ºåŸºäº AES çš„ CCMPï¼ˆè®¡æ•°å™¨æ¨¡å¼å¯†ç å—é“¾æ¶ˆæ¯è®¤è¯ç åè®®ï¼‰ã€‚</li></ul></li></ul><h2 id="ç¬¬6ç« -ç½‘ç»œäº’è”ä¸äº’è”ç½‘"><a href="#ç¬¬6ç« -ç½‘ç»œäº’è”ä¸äº’è”ç½‘" class="headerlink" title="ç¬¬6ç«  ç½‘ç»œäº’è”ä¸äº’è”ç½‘"></a>ç¬¬6ç«  ç½‘ç»œäº’è”ä¸äº’è”ç½‘</h2><h3 id="ç½‘è·¯äº’è”è®¾å¤‡"><a href="#ç½‘è·¯äº’è”è®¾å¤‡" class="headerlink" title="ç½‘è·¯äº’è”è®¾å¤‡"></a>ç½‘è·¯äº’è”è®¾å¤‡</h3><table><thead><tr><th>è®¾å¤‡å±‚æ¬¡</th><th>è®¾å¤‡åç§°</th><th>å·¥ä½œåŸç†</th></tr></thead><tbody><tr><td>ç‰©ç†å±‚</td><td>ä¸­ç»§å™¨ã€é›†çº¿å™¨</td><td>ä»ä¸€ä¸ªç«¯å£è¿›å…¥çš„æ•°æ®ï¼Œè¿›è¡Œä¿¡å·æ”¾å¤§åæ³›æ´ªåˆ°æ‰€æœ‰ç«¯å£ï¼Œå»¶é•¿ä¼ è¾“è·ç¦»</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td>ç½‘æ¡¥ã€äº¤æ¢æœº</td><td>åŸºäºç›®çš„MACåœ°å€è½¬å‘æ•°æ®å¸§ï¼Œæ¯ä¸ªç«¯å£é—´éƒ½æœ‰ç‹¬ç«‹é€šé“</td></tr><tr><td>ç½‘ç»œå±‚</td><td>è·¯ç”±å™¨ã€ä¸‰å±‚äº¤æ¢æœº</td><td>åŸºäºç›®çš„IPåœ°å€è½¬å‘æ•°æ®åŒ…ï¼Œå¯ä»¥è·¨VLANé€šä¿¡</td></tr><tr><td>å››å±‚ä»¥ä¸Šè®¾å¤‡</td><td>ç½‘å…³</td><td>åŸºäºä¼ è¾“å±‚ã€åº”ç”¨å±‚è¿›è¡Œæ§åˆ¶</td></tr></tbody></table><p><strong>ç½‘å…³</strong></p><p>ç½‘å…³æ˜¯äº’è¿ç½‘ç»œä¸­æ“ä½œåœ¨<strong>OSIä¼ è¾“å±‚ä¹‹ä¸Š</strong>çš„è®¾æ–½ã€‚</p><p><strong>ç½‘å…³çš„ä¸»è¦åŠŸèƒ½</strong></p><ul><li><strong>è¿æ¥ç½‘ç»œå±‚ä¹‹ä¸Šæ‰§è¡Œä¸åŒåè®®çš„å­ç½‘</strong>ï¼Œç»„æˆå¼‚æ„å‹çš„äº’è”ç½‘ã€‚</li><li><strong>ç½‘å…³èƒ½å¯¹äº’ä¸å…¼å®¹çš„é«˜å±‚åè®®è¿›è¡Œè½¬æ¢</strong>ã€‚</li><li>ä¸ºäº†å®ç°å¼‚æ„å‹è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œ<strong>ç½‘å…³è¦å¯¹ä¸åŒä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚åè®®è¿›è¡Œç¿»è¯‘å’Œè½¬æ¢</strong>ã€‚</li></ul><p><strong>ç½‘å…³ç±»å‹</strong></p><table><thead><tr><th>ç½‘å…³ç±»å‹</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td><strong>åè®®ç½‘å…³</strong></td><td>åè®®ç½‘å…³é€šå¸¸åœ¨ä½¿ç”¨ä¸åŒåè®®çš„ç½‘ç»œåŒºåŸŸé—´åš<strong>åè®®è½¬æ¢</strong>ï¼ˆè·¯ç”±å™¨ï¼‰ã€‚</td></tr><tr><td><strong>åº”ç”¨ç½‘å…³</strong></td><td>åº”ç”¨ç½‘å…³æ˜¯åœ¨ä½¿ç”¨ä¸åŒæ•°æ®æ ¼å¼é—´ç¿»è¯‘æ•°æ®çš„ç³»ç»Ÿï¼ˆæ•°æ®ä¸­å°ï¼‰ã€‚</td></tr><tr><td><strong>å®‰å…¨ç½‘å…³</strong></td><td>å®‰å…¨ç½‘å…³æ˜¯å„ç§æŠ€æœ¯çš„èåˆï¼Œå…·æœ‰é‡è¦ä¸”ç‹¬ç‰¹çš„ä¿æŠ¤ä½œç”¨ï¼Œå…¶èŒƒå›´ä»åè®®çº§è¿‡æ»¤åˆ°ååˆ†å¤æ‚çš„åº”ç”¨çº§è¿‡æ»¤ï¼ˆé˜²ç«å¢™ï¼‰ã€‚</td></tr></tbody></table><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><h4 id="IPv4æŠ¥æ–‡æ ¼å¼"><a href="#IPv4æŠ¥æ–‡æ ¼å¼" class="headerlink" title="IPv4æŠ¥æ–‡æ ¼å¼"></a>IPv4æŠ¥æ–‡æ ¼å¼</h4><table><thead><tr><th>å­—æ®µå</th><th>ä½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬ï¼ˆVersionï¼‰</td><td>4</td><td>IPåè®®ç‰ˆæœ¬ï¼ŒIPv4ä¸º4</td></tr><tr><td>é¦–éƒ¨é•¿åº¦ï¼ˆIHLï¼‰</td><td>4</td><td>é¦–éƒ¨é•¿åº¦ï¼Œæœ€å°å€¼5ï¼Œæœ€å¤§å€¼15ï¼Œå•ä½4å­—èŠ‚ï¼Œå³é¦–éƒ¨é•¿åº¦20-60å­—èŠ‚</td></tr><tr><td>æœåŠ¡ç±»å‹ï¼ˆToSï¼‰</td><td>8</td><td>æŒ‡å®šæœåŠ¡è´¨é‡ï¼Œå¦‚ä¼˜å…ˆçº§ã€å»¶è¿Ÿã€ååé‡å’Œå¯é æ€§</td></tr><tr><td>æ€»é•¿åº¦ï¼ˆTotal Lengthï¼‰</td><td>16</td><td>æ•´ä¸ªIPæŠ¥æ–‡çš„é•¿åº¦ï¼ŒåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼Œæœ€é•¿65535ï¼Œåˆ†ç‰‡å‘é€</td></tr><tr><td>æ ‡è¯†ï¼ˆIdentificationï¼‰</td><td>16</td><td>ç”¨äºè¾¨è¯†ä»åŒä¸€æ•°æ®åŒ…åˆ†ç‰‡çš„æ‰€æœ‰ç‰‡æ®µ</td></tr><tr><td>æ ‡å¿—ï¼ˆFlagsï¼‰</td><td>3</td><td>æ§åˆ¶å’Œæ ‡è¯†åˆ†ç‰‡çš„æ ‡å¿—ä½</td></tr><tr><td>ç‰‡åç§»ï¼ˆFragment Offsetï¼‰</td><td>13</td><td>åˆ†ç‰‡åœ¨åŸå§‹æ•°æ®æŠ¥æ–‡ä¸­çš„ä½ç½®ï¼Œå•ä½å­—èŠ‚</td></tr><tr><td>ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰</td><td>8</td><td>æ•°æ®æŠ¥æ–‡åœ¨ç½‘ç»œä¸­å¯ä»¥é€šè¿‡çš„æœ€å¤§è·¯ç”±å™¨æ•°ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡1</td></tr><tr><td>åè®®ï¼ˆProtocolï¼‰</td><td>8</td><td>æŒ‡ç¤ºæ•°æ®åº”è¯¥ä¸Šäº¤ç»™å“ªä¸ªé«˜å±‚åè®®è¿›è¡Œå¤„ç†ï¼Œæœ€å¸¸ç”¨çš„å€¼ä¸º1 (ICMP ) 17 ( UDP ) å’Œ6 ( TCP )</td></tr><tr><td>é¦–éƒ¨æ£€éªŒå’Œï¼ˆChecksumï¼‰</td><td>16</td><td>ç”¨äºæ£€æµ‹é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œå½“TTLå‡ä¸€æ—¶ ï¼Œ å¤´éƒ¨æ ¡éªŒå’Œå¿…é¡»é‡æ–°è®¡ç®—</td></tr><tr><td>æºIPåœ°å€ï¼ˆSource Addressï¼‰</td><td>32</td><td>å‘é€æ–¹çš„IPåœ°å€</td></tr><tr><td>ç›®çš„IPåœ°å€ï¼ˆDestination Addressï¼‰</td><td>32</td><td>æ¥æ”¶æ–¹çš„IPåœ°å€</td></tr><tr><td>é€‰é¡¹ï¼ˆOptionsï¼‰</td><td>å¯å˜</td><td>ç”¨äºæ”¯æŒç½‘ç»œæµ‹è¯•ã€è°ƒè¯•ç­‰åŠŸèƒ½</td></tr><tr><td>å¡«å……ï¼ˆPaddingï¼‰</td><td>å¯å˜</td><td>ç¡®ä¿é¦–éƒ¨é•¿åº¦æ˜¯32ä½å­—çš„æ•´æ•°å€</td></tr></tbody></table><h4 id="IPæ•°æ®æŠ¥åˆ†ç‰‡"><a href="#IPæ•°æ®æŠ¥åˆ†ç‰‡" class="headerlink" title="IPæ•°æ®æŠ¥åˆ†ç‰‡"></a>IPæ•°æ®æŠ¥åˆ†ç‰‡</h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.6m3ulqwk6a.jpg" alt="image"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.7egq3hgyly.jpg" alt="image"></p><h4 id="IPåœ°å€åˆ†ç±»"><a href="#IPåœ°å€åˆ†ç±»" class="headerlink" title="IPåœ°å€åˆ†ç±»"></a>IPåœ°å€åˆ†ç±»</h4><p>ä»¥ä¸‹æ˜¯IPv4åœ°å€åˆ†ç±»çš„Markdownè¡¨æ ¼è¡¨ç¤ºï¼š</p><table><thead><tr><th>ç±»åˆ«</th><th>åœ°å€èŒƒå›´</th><th>ç½‘ç»œéƒ¨åˆ†ä½æ•°</th><th>ä¸»æœºéƒ¨åˆ†ä½æ•°</th><th>ç§æœ‰åœ°å€èŒƒå›´</th><th>ç”¨é€”æè¿°</th></tr></thead><tbody><tr><td>Aç±»</td><td>0.0.0.0 - 127.255.255.255</td><td>8ä½</td><td>24ä½</td><td>10.0.0.0 - 10.255.255.255</td><td>ç”¨äºè¶…å¤§å‹ç½‘ç»œ</td></tr><tr><td>Bç±»</td><td>128.0.0.0 - 191.255.255.255</td><td>16ä½</td><td>16ä½</td><td>æ— </td><td>ç”¨äºå¤§å‹ç½‘ç»œ</td></tr><tr><td>Cç±»</td><td>192.0.0.0 - 223.255.255.255</td><td>24ä½</td><td>8ä½</td><td>192.168.0.0 - 192.168.255.255</td><td>ç”¨äºä¸­å°å‹ç½‘ç»œ</td></tr><tr><td>Dç±»</td><td>224.0.0.0 - 239.255.255.255</td><td>32ä½</td><td>æ— </td><td>æ— </td><td>ç”¨äºå¤šæ’­</td></tr><tr><td>Eç±»</td><td>240.0.0.0 - 255.255.255.255</td><td>32ä½</td><td>æ— </td><td>æ— </td><td>ç”¨äºå®éªŒå’Œæœªæ¥ä½¿ç”¨</td></tr></tbody></table><h4 id="ç‰¹æ®ŠIPåœ°å€"><a href="#ç‰¹æ®ŠIPåœ°å€" class="headerlink" title="ç‰¹æ®ŠIPåœ°å€"></a>ç‰¹æ®ŠIPåœ°å€</h4><ul><li><p><strong>0.0.0.0</strong></p><ul><li>ä¸»æœºç«¯ï¼šDHCPåˆ†é…è¿‡ç¨‹ä¸­ï¼Œè¡¨ç¤ºæœ¬æœºï¼Œå¦‚DHCP Discoverå¹¿æ’­æŠ¥æ–‡ä½¿ç”¨ <code>0.0.0.0:68 -&gt; 255.255.255.255:67</code>ã€‚</li><li>æœåŠ¡å™¨ç«¯ï¼šè¡¨ç¤ºæœ¬æœºæ‰€æœ‰IPv4åœ°å€ï¼ŒæœåŠ¡ç›‘å¬åœ¨ <code>0.0.0.0</code> æ—¶å¯é€šè¿‡ä»»æ„IPè®¿é—®ã€‚</li><li>è·¯ç”±ï¼šè¡¨ç¤ºé»˜è®¤è·¯ç”±ï¼Œç”¨äºè·¯ç”±è¡¨ä¸­æ— åŒ¹é…é¡¹æ—¶ã€‚</li></ul></li><li><p><strong>255.255.255.255</strong></p><ul><li>å—é™å¹¿æ’­åœ°å€ï¼ŒåŒä¸€å¹¿æ’­åŸŸå†…çš„æ‰€æœ‰ä¸»æœºéƒ½ä¼šæ¥æ”¶ã€‚</li></ul></li><li><p><strong>169.254.0.0&#x2F;16</strong></p><ul><li>DHCPæ•…éšœæˆ–è¶…æ—¶æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†é…çš„é“¾æ¥æœ¬åœ°åœ°å€ï¼Œä¸èƒ½ä¸Šç½‘ã€‚</li></ul></li><li><p><strong>127.0.0.0&#x2F;8 (127.0.0.1 - 127.255.255.255)</strong></p><ul><li>æœ¬åœ°ç¯å›åœ°å€ï¼Œç”¨äºæµ‹è¯•TCP&#x2F;IPåè®®æ ˆæ˜¯å¦æ­£å¸¸ã€‚</li></ul></li><li><p><strong>RFC1918 ç§æœ‰IPåœ°å€</strong></p><ul><li><strong>Aç±»</strong>ï¼š10.0.0.0&#x2F;8 (10.0.0.1 - 10.255.255.255)</li><li><strong>Bç±»</strong>ï¼š172.16.0.0&#x2F;12 (172.16.0.1 - 172.31.255.255)</li><li><strong>Cç±»</strong>ï¼š192.168.0.0&#x2F;16 (192.168.0.1 - 192.168.255.255)</li></ul></li><li><p><strong>å¸¸è§ç»„æ’­åœ°å€</strong></p><ul><li>æ‰€æœ‰ä¸»æœºï¼š224.0.0.1</li><li>æ‰€æœ‰è·¯ç”±å™¨ï¼š224.0.0.2</li><li>æ‰€æœ‰è¿è¡ŒOSPFçš„è·¯ç”±å™¨ï¼š224.0.0.5</li><li>OSPFçš„DRå’ŒBDRçš„ç»„æ’­æ¥æ”¶åœ°å€ï¼š224.0.0.6</li><li>RIPv2ç»„æ’­æ›´æ–°åœ°å€ï¼š224.0.0.9</li><li>VRRPç»„æ’­åœ°å€ï¼š224.0.0.18</li></ul></li></ul><h3 id="ARPåœ°å€è§£æåè®®"><a href="#ARPåœ°å€è§£æåè®®" class="headerlink" title="ARPåœ°å€è§£æåè®®"></a>ARPåœ°å€è§£æåè®®</h3><p>ARPï¼ˆAddress Resolution Protocolï¼‰åœ°å€è§£æåè®®ï¼Œç”¨äºåœ¨åŒä¸€å±€åŸŸç½‘ï¼ˆLANï¼‰ä¸­è§£æIPåœ°å€å¯¹åº”çš„MACåœ°å€ã€‚</p><h4 id="ARPåè®®å·¥ä½œæµç¨‹"><a href="#ARPåè®®å·¥ä½œæµç¨‹" class="headerlink" title="ARPåè®®å·¥ä½œæµç¨‹"></a>ARPåè®®å·¥ä½œæµç¨‹</h4><ol><li><strong>ç¡®å®šç›®æ ‡IPåœ°å€</strong>ï¼šä¸»æœºAè¦å‘é€æ•°æ®ç»™ä¸»æœºBã€‚</li><li><strong>æ£€æŸ¥ARPç¼“å­˜</strong>ï¼šä¸»æœºAæŸ¥æ‰¾æœ¬åœ°ARPç¼“å­˜ã€‚</li><li><strong>ARPè¯·æ±‚</strong>ï¼šç¼“å­˜ä¸­æœªæ‰¾åˆ°ï¼Œå‘é€ARPè¯·æ±‚å¹¿æ’­ã€‚</li><li><strong>ARPå“åº”</strong>ï¼šä¸»æœºBåŒ¹é…IPåœ°å€åï¼Œå›å¤å…¶MACåœ°å€ã€‚</li><li><strong>æ›´æ–°ARPç¼“å­˜</strong>ï¼šä¸»æœºAæ”¶åˆ°å“åº”å¹¶æ›´æ–°ARPç¼“å­˜ã€‚</li><li><strong>æ•°æ®ä¼ è¾“</strong>ï¼šä½¿ç”¨è§£æå‡ºçš„MACåœ°å€å‘é€æ•°æ®ã€‚</li><li><strong>å®šæœŸæ›´æ–°</strong>ï¼šARPç¼“å­˜æ¡ç›®å®šæœŸæ›´æ–°æˆ–è¿‡æœŸã€‚</li></ol><p><strong>å¸¸è§æŠ¥æ–‡å°è£…æ ¼å¼</strong></p><ul><li>ARPå°è£…åœ¨ä»¥å¤ªç½‘ä¸­</li><li>ICMPå°è£…åœ¨IPä¸­</li><li>OSPFå°è£…åœ¨IPä¸­</li><li>RIPå°è£…åœ¨UDPä¸­</li><li>BGPå°è£…åœ¨TCPä¸­ã€‚</li></ul><h3 id="ICMPæ§åˆ¶æŠ¥æ–‡åè®®"><a href="#ICMPæ§åˆ¶æŠ¥æ–‡åè®®" class="headerlink" title="ICMPæ§åˆ¶æŠ¥æ–‡åè®®"></a>ICMPæ§åˆ¶æŠ¥æ–‡åè®®</h3><p>ICMPï¼ˆInternet Control Message Protocolï¼‰æ§åˆ¶æŠ¥æ–‡åè®®ï¼Œåè®®å·ä¸º1 , å°è£…åœ¨IPæŠ¥æ–‡ä¸­, ç”¨æ¥ä¼ é€’å·®é”™ã€æ§åˆ¶ã€æŸ¥è¯¢ç­‰ä¿¡æ¯, å…¸å‹åº”ç”¨ ping&#x2F; tracertä¾èµ–ICMPæŠ¥æ–‡ã€‚</p><h4 id="ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç "><a href="#ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç " class="headerlink" title="ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç "></a>ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç </h4><h3 id="ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç -1"><a href="#ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç -1" class="headerlink" title="ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç "></a>ICMPæŠ¥æ–‡ç±»å‹ä¸ä»£ç </h3><table><thead><tr><th>ç±»å‹</th><th>ä»£ç </th><th>ç”¨é€”</th><th>æŸ¥è¯¢ç±»</th><th>å·®é”™ç±»</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>Echo Reply - å›æ˜¾åº”ç­” (Ping åº”ç­”)</td><td>âˆš</td><td></td></tr><tr><td>3</td><td>0</td><td>Network Unreachable - ç½‘ç»œä¸å¯è¾¾</td><td></td><td>âˆš</td></tr><tr><td>3</td><td>1</td><td>Host Unreachable - ä¸»æœºä¸å¯è¾¾</td><td></td><td>âˆš</td></tr><tr><td>3</td><td>2</td><td>Protocol Unreachable - åè®®ä¸å¯è¾¾</td><td></td><td>âˆš</td></tr><tr><td>3</td><td>3</td><td>Port Unreachable - ç«¯å£ä¸å¯è¾¾</td><td></td><td>âˆš</td></tr><tr><td>3</td><td>4</td><td>Fragmentation needed but no frag bit set - éœ€è¦è¿›è¡Œåˆ†ç‰‡ä½†è®¾ç½®ä¸åˆ†ç‰‡æ¯”ç‰¹</td><td></td><td>âˆš</td></tr><tr><td>3</td><td>13</td><td>Communication administratively prohibited by filtering - ç”±äºè¿‡æ»¤, é€šä¿¡è¢«å¼ºåˆ¶ç¦æ­¢</td><td></td><td>âˆš</td></tr><tr><td>4</td><td>0</td><td>Source Quench - æºæŠ‘åˆ¶æŠ¥æ–‡</td><td></td><td>âˆš</td></tr><tr><td>5</td><td>1</td><td>Redirect for Host - å¯¹ä¸»æœºé‡å®šå‘</td><td></td><td>âˆš</td></tr><tr><td>8</td><td>0</td><td>Echo Request - å›æ˜¾è¯·æ±‚ (Ping è¯·æ±‚)</td><td>âˆš</td><td></td></tr><tr><td>11</td><td>0</td><td>TTL equals 0 during transit - ä¼ è¾“æœŸé—´ç”Ÿå­˜æ—¶é—´ä¸º0</td><td></td><td>âˆš</td></tr><tr><td>11</td><td>1</td><td>TTL equals 0 during reassembly - åœ¨æ•°æ®æŠ¥ç»„è£…æœŸé—´ç”Ÿå­˜æ—¶é—´ä¸º0</td><td></td><td>âˆš</td></tr><tr><td>12</td><td>0</td><td>IP header bad (catchall error) - åçš„IPé¦–éƒ¨ (åŒ…æ‹¬å„ç§å·®é”™)</td><td></td><td>âˆš</td></tr></tbody></table><h3 id="TCPå’ŒUDP"><a href="#TCPå’ŒUDP" class="headerlink" title="TCPå’ŒUDP"></a>TCPå’ŒUDP</h3><h4 id="ä¼ è¾“æ§åˆ¶åè®®-TCP"><a href="#ä¼ è¾“æ§åˆ¶åè®®-TCP" class="headerlink" title="ä¼ è¾“æ§åˆ¶åè®® (TCP)"></a>ä¼ è¾“æ§åˆ¶åè®® (TCP)</h4><ul><li>é¢å‘è¿æ¥ï¼šåœ¨æ•°æ®ä¼ è¾“å‰å»ºç«‹è¿æ¥ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„ç¨³å®šæ€§ã€‚</li><li>å¯é ä¼ è¾“ï¼šé€šè¿‡ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®æ­£ç¡®æ— è¯¯åœ°åˆ°è¾¾ç›®çš„åœ°ã€‚</li><li>æµæ§åŠçª—å£æœºåˆ¶ï¼šé€šè¿‡æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œé¿å…ç½‘ç»œæ‹¥å¡å’Œæ•°æ®ä¸¢å¤±ã€‚</li><li>å…¸å‹åº”ç”¨<ul><li>WEBæµè§ˆå™¨ï¼šç”¨äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç¨³å®šæ•°æ®ä¼ è¾“ã€‚</li><li>ç”µå­é‚®ä»¶æ–‡ä»¶ä¼ è¾“ç¨‹åºï¼šç”¨äºç¡®ä¿é‚®ä»¶å’Œé™„ä»¶çš„å¯é ä¼ è¾“ã€‚</li></ul></li></ul><h4 id="TCPæŠ¥æ–‡æ ¼å¼"><a href="#TCPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="TCPæŠ¥æ–‡æ ¼å¼"></a>TCPæŠ¥æ–‡æ ¼å¼</h4><p><strong>é¦–éƒ¨å›ºå®š20å­—èŠ‚</strong></p><table><thead><tr><th>å­—æ®µå</th><th>ä½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>æºç«¯å£å·</td><td>16ä½</td><td>æ ‡è¯†å‘é€æ–¹çš„ç«¯å£å·</td></tr><tr><td>ç›®çš„ç«¯å£å·</td><td>16ä½</td><td>æ ‡è¯†æ¥æ”¶æ–¹çš„ç«¯å£å·</td></tr><tr><td>åºåˆ—å·</td><td>32ä½</td><td>ç”¨äºç¡®ä¿æ•°æ®çš„æœ‰åºä¼ è¾“ï¼Œæ¥æ”¶æ–¹å¯ä»¥ä¾æ®åºåˆ—å·é‡æ–°ç»„è£…æ•°æ®</td></tr><tr><td>ç¡®è®¤å·</td><td>32ä½</td><td>ç”¨äºç¡®è®¤æ”¶åˆ°çš„æ•°æ®ï¼Œæ˜¯ä¸‹ä¸€ä¸ªæœŸæœ›æ¥æ”¶çš„åºåˆ—å·</td></tr><tr><td>æ•°æ®åç§»</td><td>4ä½</td><td>æŒ‡ç¤ºTCPå¤´éƒ¨çš„é•¿åº¦ï¼Œå³æ•°æ®åŒºå¼€å§‹ä¹‹å‰çš„å­—èŠ‚æ•°</td></tr><tr><td>ä¿ç•™</td><td>6ä½</td><td>ä¿ç•™ç»™å°†æ¥ä½¿ç”¨ï¼Œç›®å‰åº”ç½®ä¸º0</td></tr><tr><td>æ§åˆ¶ä½</td><td>6ä½</td><td>åŒ…å«SYN, ACK, FIN, RST, PSH, URGç­‰æ ‡å¿—ä½</td></tr><tr><td>çª—å£å¤§å°</td><td>16ä½</td><td>ç”¨äºæµé‡æ§åˆ¶ï¼ŒæŒ‡ç¤ºå‘é€æ–¹å¯ä»¥å‘é€çš„æ•°æ®é‡</td></tr><tr><td>æ£€éªŒå’Œ</td><td>16ä½</td><td>ç”¨äºæ£€æµ‹æ•´ä¸ªTCPæ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰é”™</td></tr><tr><td>ç´§æ€¥æŒ‡é’ˆ</td><td>16ä½</td><td>ä»…å½“URGæ§åˆ¶ä½ä¸º1æ—¶æ‰æœ‰æ„ä¹‰ï¼ŒæŒ‡å‡ºç´§æ€¥æ•°æ®çš„ç»“æŸä½ç½®</td></tr><tr><td>é€‰é¡¹</td><td>å¯å˜</td><td>æä¾›é¢å¤–çš„åŠŸèƒ½æ€§ï¼Œå¦‚MSS, çª—å£ç¼©æ”¾å› å­ï¼ŒSACKï¼Œæ—¶é—´æˆ³ç­‰</td></tr><tr><td>å¡«å……</td><td>å¯å˜</td><td>ç¡®ä¿TCPå¤´éƒ¨çš„é•¿åº¦æ˜¯32ä½å­—çš„æ•´æ•°å€</td></tr></tbody></table><p><strong>TCPä¼ªé¦–éƒ¨</strong></p><p>TCP ä¼ªé¦–éƒ¨ï¼ˆpseudo-headerï¼‰æ˜¯ä¸€ä¸ªåœ¨ TCP æŠ¥æ–‡è®¡ç®—æ ¡éªŒå’Œæ—¶ä½¿ç”¨çš„ä¸´æ—¶æ„é€ ï¼Œå®ƒä¸æ˜¯ TCP æŠ¥æ–‡çš„å®é™…ç»„æˆéƒ¨åˆ†ï¼Œä¹Ÿä¸ä¼šåœ¨ç½‘ç»œä¸­ä¼ è¾“ã€‚å®ƒä»…åœ¨å‘é€ç«¯ç”¨äºè®¡ç®—æ ¡éªŒå’Œï¼Œå¹¶åœ¨æ¥æ”¶ç«¯ç”¨äºæ ¡éªŒï¼Œé•¿åº¦12å­—èŠ‚ã€‚</p><table><thead><tr><th>å­—æ®µå</th><th>é•¿åº¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>æºIPåœ°å€</td><td>32ä½</td><td>å‘é€æ–¹çš„IPåœ°å€</td></tr><tr><td>ç›®çš„IPåœ°å€</td><td>32ä½</td><td>æ¥æ”¶æ–¹çš„IPåœ°å€</td></tr><tr><td>ä¿ç•™</td><td>8ä½</td><td>é€šå¸¸ç½®ä¸º0</td></tr><tr><td>åè®®</td><td>8ä½</td><td>æŒ‡ç¤ºä¸Šå±‚åè®®ç±»å‹ï¼ŒTCPä¸º6</td></tr><tr><td>TCPæŠ¥æ–‡é•¿åº¦</td><td>16ä½</td><td>æŒ‡ç¤ºTCPæŠ¥æ–‡çš„æ€»é•¿åº¦ï¼ŒåŒ…æ‹¬TCPå¤´éƒ¨å’Œæ•°æ®</td></tr></tbody></table><h4 id="ç”¨æˆ·æ•°æ®æŠ¥åè®®-UDP"><a href="#ç”¨æˆ·æ•°æ®æŠ¥åè®®-UDP" class="headerlink" title="ç”¨æˆ·æ•°æ®æŠ¥åè®® (UDP)"></a>ç”¨æˆ·æ•°æ®æŠ¥åè®® (UDP)</h4><ul><li>é¢å‘æ— è¿æ¥ï¼šä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œç›´æ¥å‘é€æ•°æ®åŒ…ã€‚</li><li>ä¸å¯é ä¼ è¾“ï¼šä¸ä¿è¯æ•°æ®åŒ…çš„åˆ°è¾¾é¡ºåºæˆ–æ˜¯å¦åˆ°è¾¾ã€‚</li><li>å°½åŠ›è€Œä¸ºçš„ä¼ è¾“ï¼šç½‘ç»œç¹å¿™æˆ–æ‹¥å¡æ—¶ï¼Œæ•°æ®åŒ…å¯èƒ½ä¼šä¸¢å¤±ã€‚</li><li>å…¸å‹åº”ç”¨<ul><li>åŸŸåç³»ç»Ÿ (DNS)ï¼šå¿«é€ŸæŸ¥è¯¢åŸŸåä¸IPåœ°å€çš„æ˜ å°„ï¼Œä¸éœ€è¦å¯é ä¼ è¾“ã€‚</li><li>è§†é¢‘åº”ç”¨ï¼šå®æ—¶è§†é¢‘æµï¼Œå¯¹å»¶è¿Ÿæ•æ„Ÿï¼Œå…è®¸ä¸€å®šç¨‹åº¦çš„æ•°æ®ä¸¢å¤±ã€‚</li><li>IPè¯­éŸ³ (VoIP)ï¼šå®æ—¶è¯­éŸ³é€šä¿¡ï¼Œä¼˜å…ˆä¿è¯é€šè¯çš„å®æ—¶æ€§ã€‚</li></ul></li></ul><h4 id="UDPæŠ¥æ–‡æ ¼å¼"><a href="#UDPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="UDPæŠ¥æ–‡æ ¼å¼"></a>UDPæŠ¥æ–‡æ ¼å¼</h4><p>é¦–éƒ¨å›ºå®š8ä¸ªå­—èŠ‚</p><table><thead><tr><th>å­—æ®µå</th><th>ä½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td>æºç«¯å£å·</td><td>16ä½</td><td>æ ‡è¯†å‘é€æ–¹çš„ç«¯å£å·ï¼Œç”¨äºå›å¤æ¶ˆæ¯</td></tr><tr><td>ç›®çš„ç«¯å£å·</td><td>16ä½</td><td>æ ‡è¯†æ¥æ”¶æ–¹çš„ç«¯å£å·</td></tr><tr><td>é•¿åº¦</td><td>16ä½</td><td>æŒ‡ç¤ºæ•´ä¸ªUDPæŠ¥æ–‡çš„é•¿åº¦ï¼ŒåŒ…æ‹¬UDPå¤´éƒ¨å’ŒUDPæ•°æ®ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚å¦‚æœé•¿åº¦å­—æ®µä¸º0ï¼Œåˆ™è¡¨ç¤ºæŠ¥æ–‡åªåŒ…å«å¤´éƒ¨</td></tr><tr><td>æ£€éªŒå’Œ</td><td>16ä½</td><td>ç”¨äºæ£€æµ‹UDPæŠ¥æ–‡åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰é”™ã€‚è¿™ä¸ªå­—æ®µæ˜¯å¯é€‰çš„ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰è¿›è¡Œæ£€éªŒå’Œè®¡ç®—</td></tr><tr><td>æ•°æ®</td><td>å¯å˜</td><td>å®é™…ä¼ è¾“çš„æ•°æ®å†…å®¹ï¼Œé•¿åº¦ç”±é•¿åº¦å­—æ®µæŒ‡å®š</td></tr></tbody></table><h4 id="TCPæ¡æ‰‹æŒ¥æ‰‹"><a href="#TCPæ¡æ‰‹æŒ¥æ‰‹" class="headerlink" title="TCPæ¡æ‰‹æŒ¥æ‰‹"></a>TCPæ¡æ‰‹æŒ¥æ‰‹</h4><p><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.73twadmpgb.jpg" alt="image"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.54xpk1l50t.jpg" alt="image"></p><h4 id="æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶"></a>æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</h4><ul><li>æµé‡æ§åˆ¶<ul><li>TCPæ»‘åŠ¨çª—å£<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.54xpk1l50t.jpg" alt="image"></li></ul></li><li>æ‹¥å¡æ§åˆ¶<ul><li>æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…<br><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_28.png" alt="image"><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240909/image.3gocmz41ne.jpg" alt="image"></li></ul></li></ul><h3 id="è·¯ç”±åè®®"><a href="#è·¯ç”±åè®®" class="headerlink" title="è·¯ç”±åè®®"></a>è·¯ç”±åè®®</h3><table><thead><tr><th>ç‰¹æ€§</th><th>é™æ€è·¯ç”±</th><th>é»˜è®¤è·¯ç”±</th></tr></thead><tbody><tr><td><strong>å®šä¹‰</strong></td><td>æ‰‹åŠ¨é…ç½®çš„è·¯ç”±ä¿¡æ¯ï¼ŒæŒ‡å®šæ•°æ®åŒ…å¦‚ä½•ä»æºåˆ°ç›®çš„åœ°</td><td>ä¸€ç§ç‰¹æ®Šçš„é™æ€è·¯ç”±ï¼Œç”¨äºå¤„ç†æœªçŸ¥ç›®çš„åœ°çš„æ•°æ®åŒ…</td></tr><tr><td><strong>æŒä¹…æ€§</strong></td><td>ç½‘ç»œæ‹“æ‰‘å˜åŒ–æ—¶ä¸ä¼šè‡ªåŠ¨æ”¹å˜ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°</td><td>ä½œä¸ºè·¯ç”±è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šå› ç½‘ç»œå˜åŒ–è€Œè‡ªåŠ¨æ”¹å˜</td></tr><tr><td><strong>é…ç½®</strong></td><td>åœ¨è·¯ç”±å™¨æˆ–è®¡ç®—æœºçš„è·¯ç”±è¡¨ä¸­æ‰‹åŠ¨è®¾ç½®</td><td>è®¾ç½®ä¸€ä¸ªé»˜è®¤ç½‘å…³ï¼Œç”¨äºè½¬å‘æœªåŒ¹é…ç‰¹å®šè·¯ç”±çš„æ•°æ®åŒ…</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>é€‚ç”¨äºç½‘ç»œè§„æ¨¡è¾ƒå°ã€æ‹“æ‰‘å˜åŒ–ä¸å¤§çš„ç¯å¢ƒ</td><td>å¸¸ç”¨äºè¿æ¥åˆ°æ›´å¤§çš„ç½‘ç»œæˆ–ä½œä¸ºå¤‡ä»½è·¯ç”±</td></tr><tr><td><strong>ä¼˜ç‚¹</strong></td><td>ç®€å•ç›´æ¥   æ— éœ€é¢å¤–è·¯ç”±åè®®å¤„ç†   ç²¾ç¡®æ§åˆ¶æ•°æ®åŒ…è·¯å¾„</td><td>ç®€åŒ–è·¯ç”±è¡¨   å‡å°‘é…ç½®å¤æ‚æ€§   ä¸ºæœªçŸ¥ç›®çš„åœ°æä¾›å‡ºè·¯</td></tr><tr><td><strong>ç¼ºç‚¹</strong></td><td>ç®¡ç†å¤§å‹æˆ–åŠ¨æ€ç½‘ç»œå›°éš¾   æ‰‹åŠ¨ç»´æŠ¤è€—æ—¶</td><td>å¯èƒ½ä¸æ˜¯æœ€ä¼˜è·¯å¾„   ä¾èµ–äºé»˜è®¤ç½‘å…³é…ç½®</td></tr></tbody></table><ul><li><p><strong>å†…éƒ¨ç½‘å…³åè®® (IGP)</strong></p><ul><li>RIP (Routing Information Protocol)ï¼šè·¯ç”±ä¿¡æ¯åè®®</li><li>OSPF (Open Shortest Path First)ï¼šå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ</li><li>IS-IS (Intermediate System-Intermediate System)ï¼šä¸­é—´ç³»ç»Ÿ-ä¸­é—´ç³»ç»Ÿ</li></ul></li><li><p><strong>å¤–éƒ¨ç½‘å…³åè®® (EGP)</strong></p><ul><li>BGP (Border Gateway Protocol)ï¼šè¾¹ç•Œç½‘å…³åè®®</li></ul></li><li><p><strong>è·ç¦»çŸ¢é‡åè®®</strong></p><ul><li>RIP (Routing Information Protocol)ï¼šè·¯ç”±ä¿¡æ¯åè®®</li></ul></li><li><p><strong>é“¾è·¯çŠ¶æ€åè®®</strong></p><ul><li>OSPF (Open Shortest Path First)ï¼šå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ</li><li>IS-IS (Intermediate System-Intermediate System)ï¼šä¸­é—´ç³»ç»Ÿ-ä¸­é—´ç³»ç»Ÿ<br>ä»¥ä¸‹æ˜¯ä¸ºæ‚¨ä¼˜åŒ–åçš„ Markdown æ ¼å¼ï¼š</li></ul></li></ul><h4 id="RIP-åè®®"><a href="#RIP-åè®®" class="headerlink" title="RIP åè®®"></a>RIP åè®®</h4><ul><li><strong>åŸºæœ¬ä¿¡æ¯</strong><ul><li>å…¨ç§°ï¼šRouting Information Protocolï¼ˆè·¯ç”±ä¿¡æ¯åè®®ï¼‰</li><li>ç±»å‹ï¼šå†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ï¼Œè·ç¦»çŸ¢é‡è·¯ç”±åè®®</li></ul></li><li><strong>ç‰¹ç‚¹</strong><ul><li>ä¼˜å…ˆçº§ï¼šåœ¨åä¸ºè®¾å¤‡ä¸Šï¼ŒRIP çš„è·¯ç”±ä¼˜å…ˆçº§ä¸º 100ã€‚</li><li>è·³æ•°é™åˆ¶ï¼šæœ€å¤§æ”¯æŒ 15 è·³ï¼›16 è·³è¡¨ç¤ºä¸å¯è¾¾ã€‚</li><li>é€‚ç”¨åœºæ™¯ï¼šä¸€èˆ¬ç”¨äºå°å‹ç½‘ç»œã€‚</li></ul></li><li><strong>å®šæ—¶å™¨</strong><ul><li>æ›´æ–°é—´éš”ï¼š30 ç§’å‘¨æœŸæ€§æ›´æ–°è·¯ç”±è¡¨ã€‚</li><li>å¤±æ•ˆæ—¶é—´ï¼š180 ç§’æ— æ›´æ–°åˆ™è®¤ä¸ºè·¯ç”±ä¸å¯è¾¾ã€‚</li><li>åˆ é™¤æ—¶é—´ï¼š300 ç§’åä»è·¯ç”±è¡¨ä¸­åˆ é™¤è¯¥è·¯ç”±ã€‚</li></ul></li><li><strong>å…¶ä»–ç‰¹æ€§</strong><ul><li>æ”¯æŒç­‰ä»·è´Ÿè½½å‡è¡¡å’Œé“¾è·¯å†—ä½™ã€‚</li><li>ä½¿ç”¨ UDP 520 ç«¯å£è¿›è¡Œè·¯ç”±ä¿¡æ¯çš„ä¼ è¾“ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240910/image.1lbrvlcc4r.png" alt="image">| ç‰¹æ€§                               | RIPv1                | RIPv2                |<br>| â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- | â€”â€”â€”â€”â€”â€”â€“ | â€”â€”â€”â€”â€”â€”â€“ |<br>| ç±»å‹                               | æœ‰ç±»ï¼Œä¸æºå¸¦å­ç½‘æ©ç  | æ— ç±»ï¼Œæºå¸¦å­ç½‘æ©ç    |<br>| æ›´æ–°æ–¹å¼                           | å¹¿æ’­æ›´æ–°             | ç»„æ’­æ›´æ–° (224.0.0.9) |<br>| æ›´æ–°å‘¨æœŸ                           | å‘¨æœŸæ€§æ›´æ–° (30ç§’)    | è§¦å‘æ›´æ–°             |<br>| æ”¯æŒç‰¹æ€§                           | ä¸æ”¯æŒVLSMã€CIDR     | æ”¯æŒVLSMã€CIDR       |<br>| è®¤è¯                               | ä¸æä¾›è®¤è¯           | æä¾›æ˜æ–‡å’ŒMD5è®¤è¯    |<br>| ä»¥ä¸‹æ˜¯ä¸ºæ‚¨ä¼˜åŒ–åçš„ Markdown æ ¼å¼ï¼š |                      |                      |</li></ul></li></ul><p><strong>RIP é˜²ç¯æœºåˆ¶</strong></p><ul><li>æœ€å¤§è·³æ•°<ul><li>è·¯ç”±æ¡ç›®åœ¨å‘é€æ—¶ä¼šè‡ªå¢ 1 è·³ã€‚</li><li>æœ€å¤§è·³æ•°ä¸º 16 è·³ï¼Œè¶…è¿‡ 16 è·³çš„è·¯ç”±å°†è¢«è§†ä¸ºä¸å¯è¾¾ã€‚</li></ul></li><li>æ°´å¹³åˆ†å‰²<ul><li>è·¯ç”±ä¿¡æ¯ä¸ä¼šå‘é€å›å®ƒåŸå§‹çš„æ¥æºï¼Œé˜²æ­¢è·¯ç”±ä¿¡æ¯åœ¨ä¸¤ä¸ªè·¯ç”±å™¨é—´å¾ªç¯ã€‚</li></ul></li><li>åå‘æ¯’åŒ–çš„æ°´å¹³åˆ†å‰²<ul><li>ä»é‚»å±…å­¦ä¹ åˆ°çš„è·¯ç”±ä¿¡æ¯ä¼šè¢«è®¾ç½®ä¸º 16 è·³ï¼ˆä¸å¯è¾¾ï¼‰ï¼Œç„¶åé‡æ–°å‘é€ç»™è¯¥é‚»å±…ã€‚</li><li>è¿™æ˜¯ä¸€ç§æ›´ä¸ºä¸¥æ ¼çš„æ°´å¹³åˆ†å‰²ï¼Œç¡®ä¿ä¸ä¼šå½¢æˆè·¯ç”±ç¯è·¯ã€‚</li></ul></li><li>æŠ‘åˆ¶å®šæ—¶å™¨å’Œè§¦å‘æ›´æ–°<ul><li><strong>æŠ‘åˆ¶å®šæ—¶å™¨</strong>ï¼šå½“è·¯ç”±ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼ˆé€šå¸¸ä¸º 180 ç§’ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°æ›´å¥½çš„è·¯ç”±ä¿¡æ¯ï¼Œåˆ™æ¥å—è¯¥è·¯ç”±ã€‚</li><li><strong>è§¦å‘æ›´æ–°</strong>ï¼šå½“è·¯ç”±è¡¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç«‹å³å‘é€æ›´æ–°ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸæ€§æ›´æ–°æ—¶é—´ã€‚</li><li>è¿™ä¸¤ç§æœºåˆ¶å…±åŒä½œç”¨ï¼Œå¯ä»¥å‡å°‘è·¯ç”±ç¯è·¯çš„é£é™©ã€‚</li></ul></li></ul><p>RIP é€šè¿‡è¿™äº›æœºåˆ¶æ¥é˜²æ­¢è·¯ç”±ç¯è·¯çš„äº§ç”Ÿï¼Œç¡®ä¿ç½‘ç»œçš„ç¨³å®šæ€§ã€‚</p><h4 id="OSPF-åè®®"><a href="#OSPF-åè®®" class="headerlink" title="OSPF åè®®"></a>OSPF åè®®</h4><ul><li><strong>å…¨ç§°</strong>ï¼šOpen Shortest Path Firstï¼ˆå¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®ï¼‰</li><li><strong>ç±»å‹</strong>ï¼šå†…éƒ¨ç½‘å…³åè®®ï¼Œé“¾è·¯çŠ¶æ€è·¯ç”±åè®®</li><li><strong>å¼€æ”¾æ€§</strong>ï¼šæ„å‘³ç€å…¬æœ‰ï¼Œä»»ä½•å‚å•†éƒ½èƒ½æ”¯æŒ OSPFï¼Œæ˜¯å½“å‰ä¸šç•Œä½¿ç”¨æœ€å¹¿æ³›çš„ IGP</li><li><strong>åä¸ºè®¾å¤‡ä¼˜å…ˆçº§</strong>ï¼šInternal 10, External 150</li></ul><p><strong>å·¥ä½œåŸç†</strong></p><ul><li>è·¯ç”±å™¨ä¹‹é—´äº¤äº’çš„æ˜¯é“¾è·¯çŠ¶æ€ä¿¡æ¯ï¼Œè€Œéç›´æ¥äº¤äº’è·¯ç”±</li><li>è·¯ç”±å™¨äº†è§£æ•´ä¸ªç½‘ç»œçš„æ‹“æ‰‘ç»“æ„</li><li>ä½¿ç”¨ SPF ç®—æ³•ï¼ˆDijkstra ç®—æ³•ï¼‰è®¡ç®—åˆ°è¾¾ç›®çš„åœ°çš„æœ€çŸ­è·¯å¾„</li></ul><p><strong>ç‰¹ç‚¹</strong></p><ul><li>æ”¯æŒ VLSMï¼ˆå¯å˜é•¿åº¦å­ç½‘æ©ç ï¼‰</li><li>æ”¯æŒæ‰‹å·¥è·¯ç”±æ±‡æ€»</li><li>é€‚åº”èŒƒå›´å¹¿ï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡çš„ç½‘ç»œ</li><li>å¿«é€Ÿæ”¶æ•›ï¼šç½‘ç»œæ‹“æ‰‘å˜åŒ–åç«‹å³å‘é€æ›´æ–°æŠ¥æ–‡ï¼Œå®ç°å¿«é€ŸåŒæ­¥</li><li>æ— è‡ªç¯ï¼šä½¿ç”¨ SPF ç®—æ³•ï¼Œä¸ä¼šäº§ç”Ÿç¯è·¯</li><li>åŒºåŸŸåˆ’åˆ†ï¼šç½‘ç»œå¯åˆ’åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œå‡å°è·¯ç”±å™¨èµ„æºæ¶ˆè€—å’Œç½‘ç»œå¸¦å®½å ç”¨</li></ul><h4 id="BGP-åè®®"><a href="#BGP-åè®®" class="headerlink" title="BGP åè®®"></a>BGP åè®®</h4><p>BGPï¼ˆBorder Gateway Protocolï¼Œè¾¹ç•Œç½‘å…³åè®®ï¼‰æ˜¯ä¸€ç§å¤–éƒ¨ç½‘å…³åè®®ï¼Œä¸»è¦ç”¨äºä¸åŒè‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ä¹‹é—´çš„è·¯ç”±å¯»å€ï¼Œä»¥å¯»æ‰¾æœ€ä½³è·¯ç”±ã€‚</p><ul><li><p><strong>æ ¸å¿ƒç‰¹æ€§</strong></p><ul><li>ç”¨é€”ï¼šç”¨äºä¸åŒè‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©ã€‚</li><li>åè®®ç‰ˆæœ¬ï¼šæœ€æ–°ç‰ˆæœ¬æ˜¯ BGP4ï¼ŒBGP4+æ”¯æŒ IPv6ã€‚</li><li>ç«¯å£ï¼šé€šè¿‡ TCP 179 ç«¯å£å»ºç«‹è¿æ¥ã€‚</li><li>ç±»å‹ï¼šè·¯å¾„çŸ¢é‡åè®®ï¼Œä¸è·ç¦»çŸ¢é‡åè®®ä¸åŒï¼ŒBGP è€ƒè™‘æ•´ä½“è·¯å¾„ä¿¡æ¯ã€‚</li><li>æ”¯æŒï¼šæ”¯æŒ VLSMï¼ˆå¯å˜é•¿åº¦å­ç½‘æ©ç ï¼‰å’Œ CIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰ã€‚</li></ul></li><li><p><strong>å·¥ä½œåŸç†</strong></p><ul><li>å»ºç«‹è¿æ¥ï¼šä½¿ç”¨ <code>Open</code> æ¶ˆæ¯å»ºç«‹é‚»å±…å…³ç³»ã€‚</li><li>å‘¨æœŸæ€§æ¢æµ‹ï¼šé€šè¿‡ <code>Keepalive</code> æ¶ˆæ¯å‘¨æœŸæ€§æ¢æµ‹é‚»å±…çš„å­˜æ´»çŠ¶æ€ã€‚</li><li>BGP å‘è¨€äººï¼šæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿè‡³å°‘é€‰æ‹©ä¸€ä¸ªè·¯ç”±å™¨ä½œä¸ºâ€œBGP å‘è¨€äººâ€ï¼Œè´Ÿè´£ä¸å…¶ä»–è‡ªæ²»ç³»ç»Ÿçš„è·¯ç”±å™¨äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚</li><li>å¢é‡æ›´æ–°ï¼šæ”¯æŒå¢é‡æ›´æ–°ï¼Œå³ä»…å‘é€å˜åŒ–çš„è·¯ç”±ä¿¡æ¯ã€‚</li><li>è®¤è¯ï¼šæ”¯æŒå¯¹é‚»å±…è·¯ç”±å™¨çš„è®¤è¯ï¼Œå¢å¼ºå®‰å…¨æ€§ã€‚</li><li>å¯é ä¼ è¾“ï¼šé‡‡ç”¨å¯é ä¼ è¾“æœºåˆ¶ï¼Œç¡®ä¿è·¯ç”±ä¿¡æ¯çš„å‡†ç¡®æ€§ï¼Œé˜²æ­¢è·¯ç”±ç¯è·¯ã€‚</li><li>ç­–ç•¥é€‰è·¯ï¼šæ”¯æŒåŸºäºç­–ç•¥çš„è·¯ç”±é€‰æ‹©ï¼Œå…è®¸ç½‘ç»œç®¡ç†å‘˜æ ¹æ®ç‰¹å®šéœ€æ±‚å®šåˆ¶è·¯ç”±å†³ç­–ã€‚</li></ul></li><li><p><strong>åº”ç”¨åœºæ™¯</strong></p><ul><li>äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼šç”¨äº ISP ç½‘ç»œï¼Œç®¡ç†å¤§é‡è·¨è‡ªæ²»ç³»ç»Ÿçš„è·¯ç”±ã€‚</li><li>å¤§å‹ä¼ä¸šç½‘ç»œï¼šè¿æ¥ä¼ä¸šå†…éƒ¨ç½‘ç»œä¸å…¨çƒäº’è”ç½‘ã€‚<br><strong>BGPæŠ¥æ–‡</strong>| æŠ¥æ–‡ç±»å‹                 | åŠŸèƒ½æè¿°                        | å¤‡æ³¨ï¼ˆç±»æ¯”ï¼‰ |<br>| â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”- | â€”â€”â€”â€” |<br>| æ‰“å¼€ (Open)              | å»ºç«‹é‚»å±…å…³ç³»                    | å»ºç«‹å¤–äº¤     |<br>| æ›´æ–° (Update)            | å‘é€æ–°çš„è·¯ç”±ä¿¡æ¯                | æ›´æ–°å¤–äº¤ä¿¡æ¯ |<br>| ä¿æŒæ´»åŠ¨çŠ¶æ€ (Keepalive) | å¯¹Opençš„åº”ç­”&#x2F;å‘¨æœŸæ€§ç¡®è®¤é‚»å±…å…³ç³» | ä¿æŒå¤–äº¤æ´»åŠ¨ |<br>| é€šå‘Š (Notification)      | æŠ¥å‘Šæ£€æµ‹åˆ°çš„é”™è¯¯                | å‘å¸ƒå¤–äº¤é€šå‘Š |</li></ul></li></ul><p><strong>BGPé€‰è·¯è§„åˆ™</strong></p><ol><li><strong>ä¸‹ä¸€è·³æ£€æŸ¥</strong>ï¼šä¸¢å¼ƒä¸‹ä¸€è·³ä¸å¯è¾¾çš„è·¯ç”±ã€‚</li><li><strong>Preference</strong>ï¼šä¼˜é€‰Preferenceå€¼æœ€é«˜çš„è·¯ç”±ï¼ˆç§æœ‰å±æ€§ï¼Œä»…æœ¬åœ°æœ‰æ•ˆï¼‰ã€‚</li><li><strong>Local Preference</strong>ï¼šä¼˜é€‰Local Preferenceå€¼æœ€é«˜çš„è·¯ç”±ã€‚</li><li><strong>è·¯ç”±æ¥æº</strong>ï¼šä¼˜é€‰æ‰‹åŠ¨èšåˆ &gt; è‡ªåŠ¨èšåˆ &gt; networkå£°æ˜ &gt; importå¼•å…¥ &gt; ä»å¯¹ç­‰ä½“å­¦åˆ°çš„è·¯ç”±ã€‚</li><li><strong>AS Pathé•¿åº¦</strong>ï¼šä¼˜é€‰AS Pathæœ€çŸ­çš„è·¯ç”±ã€‚</li><li><strong>èµ·æºç±»å‹</strong>ï¼šèµ·æºç±»å‹IGP &gt; EGP &gt; Incompleteã€‚</li><li><strong>MEDï¼ˆå¤šå‡ºå£é‰´åˆ«å™¨ï¼‰</strong>ï¼šå¯¹äºæ¥è‡ªåŒä¸€ASçš„è·¯ç”±ï¼Œä¼˜é€‰MEDå€¼æœ€å°çš„ã€‚</li><li><strong>EBGPä¸IBGP</strong>ï¼šä¼˜é€‰ä»EBGPå­¦æ¥çš„è·¯ç”±ï¼ˆEBGP &gt; IBGPï¼‰ã€‚</li><li><strong>IGPæˆæœ¬</strong>ï¼šä¼˜é€‰ASå†…éƒ¨IGPæˆæœ¬æœ€å°çš„è·¯ç”±ã€‚</li><li><strong>Cluster Listé•¿åº¦</strong>ï¼šä¼˜é€‰Cluster Listæœ€çŸ­çš„è·¯ç”±ã€‚</li><li><strong>Originator ID</strong>ï¼šä¼˜é€‰Originator IDæœ€å°çš„è·¯ç”±ã€‚</li><li><strong>Router ID</strong>ï¼šä¼˜é€‰Router IDæœ€å°çš„è·¯ç”±å™¨å‘å¸ƒçš„è·¯ç”±ã€‚</li><li><strong>é‚»å±…IPåœ°å€</strong>ï¼šä¼˜é€‰IPåœ°å€æœ€å°çš„é‚»å±…å­¦æ¥çš„è·¯ç”±ã€‚</li></ol><h4 id="ISIS-åè®®"><a href="#ISIS-åè®®" class="headerlink" title="ISIS åè®®"></a>ISIS åè®®</h4><p>IS-ISï¼ˆIntermediate System to Intermediate Systemï¼Œä¸­é—´ç³»ç»Ÿåˆ°ä¸­é—´ç³»ç»Ÿï¼‰æ˜¯ä¸€ç§å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ï¼Œåœ¨ç”µä¿¡è¿è¥å•†ç½‘ç»œä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚</p><ul><li><p><strong>åŸºæœ¬ç‰¹æ€§</strong></p><ul><li>é“¾è·¯çŠ¶æ€è·¯ç”±åè®®ï¼šå’Œ OSPF ç›¸ä¼¼ï¼Œé€šè¿‡é“¾è·¯çŠ¶æ€æ•°æ®åº“åŠ SPF ç®—æ³•æ¥è®¡ç®—è·¯ç”±ã€‚</li><li>è¿è¡Œå±‚çº§ï¼šç›´æ¥åœ¨é“¾è·¯å±‚ä¹‹ä¸Šè¿è¡Œï¼ŒåŒºåˆ«äºå¤šæ•°åè®®åœ¨ IP å±‚è¿è¡Œã€‚</li><li>åˆ†å±‚ç»“æ„ï¼šå…·å¤‡ä¸¤å±‚ç»“æ„ï¼Œå³ Level-1ï¼ˆL1ï¼‰å’Œ Level-2ï¼ˆL2ï¼‰ã€‚</li></ul></li><li><p><strong>åˆ†å±‚ç»“æ„</strong></p><ul><li><strong>Level-1 (L1)</strong><ul><li>æ™®é€šåŒºåŸŸï¼ˆAreaï¼‰ï¼šè´Ÿè´£å•ä¸ªåŒºåŸŸå†…çš„è·¯ç”±ã€‚</li></ul></li><li><strong>Level-2 (L2)</strong><ul><li>éª¨å¹²åŒºåŸŸï¼ˆBackboneï¼‰ï¼šç”±æ‰€æœ‰ Level-2 è·¯ç”±å™¨ï¼ˆåŒ…æ‹¬åŒæ—¶ä½œä¸º L1 å’Œ L2 çš„è·¯ç”±å™¨ï¼‰æ„æˆï¼Œè´Ÿè´£åŒºåŸŸé—´çš„è·¯ç”±ã€‚</li></ul></li></ul></li><li><p><strong>å·¥ä½œåŸç†</strong></p><ul><li>Hello åè®®ï¼šåˆ©ç”¨ Hello åè®®æ¥å‘ç°åŠç»´æŠ¤ä¸æ¯—é‚»èŠ‚ç‚¹çš„å…³ç³»ã€‚</li><li>SPF ç®—æ³•ï¼šL1 å’Œ L2 è·¯ç”±å™¨å‡è¿è¡Œç›¸åŒçš„ SPF ç®—æ³•ï¼Œä»¥è®¡ç®—åˆ°è¾¾ç›®çš„åœ°çš„æœ€ä¼˜è·¯å¾„ã€‚</li><li>å¤šå®ä¾‹å‚ä¸ï¼šä¸€ä¸ªè·¯ç”±å™¨èƒ½å¤ŸåŒæ—¶å‚ä¸ L1 å’Œ L2ï¼Œå®ç°åŒºåŸŸé—´çš„è·¯ç”±åŠŸèƒ½ã€‚</li></ul></li></ul><h2 id="ç¬¬7ç« -ä¸‹ä¸€ä»£äº’è”ç½‘IPV6"><a href="#ç¬¬7ç« -ä¸‹ä¸€ä»£äº’è”ç½‘IPV6" class="headerlink" title="ç¬¬7ç«  ä¸‹ä¸€ä»£äº’è”ç½‘IPV6"></a>ç¬¬7ç«  ä¸‹ä¸€ä»£äº’è”ç½‘IPV6</h2><h3 id="IPv4å’ŒIPv6å¯¹æ¯”"><a href="#IPv4å’ŒIPv6å¯¹æ¯”" class="headerlink" title="IPv4å’ŒIPv6å¯¹æ¯”"></a>IPv4å’ŒIPv6å¯¹æ¯”</h3><table><thead><tr><th>å¯¹æ¯”æ–¹é¢</th><th>IPv4 å­˜åœ¨çš„é—®é¢˜</th><th>IPv6 çš„ä¸»è¦æ”¹è¿›</th></tr></thead><tbody><tr><td>ç½‘ç»œåœ°å€</td><td>32 ä½ï¼Œæä¾› 43 äº¿ä¸ªåœ°å€ï¼Œæ•°é‡çŸ­ç¼º</td><td>128 ä½ï¼Œå¤§å¹…å¢åŠ åœ°å€æ•°é‡</td></tr><tr><td>åœ°å€åˆ†é…</td><td>åˆ†é…ä¸åˆç†ï¼Œçº¦ 1&#x2F;3 æ›¾è¢«ç¾å›½å ç”¨ï¼Œå¤§å‹ä¼ä¸šæ‹¥æœ‰åœ°å€å¤š</td><td>-</td></tr><tr><td>è·¯ç”±é€Ÿåº¦</td><td>éšç€ç½‘ç»œè§„æ¨¡æ‰©å¤§ï¼Œè·¯ç”±è¡¨åºå¤§ï¼ŒæŸ¥æ‰¾é€Ÿåº¦æ…¢</td><td>-</td></tr><tr><td>å¤´éƒ¨å­—æ®µ</td><td>å¤šè¾¾ 13 ä¸ªå­—æ®µï¼Œå¤æ‚</td><td>åªæœ‰ 8 ä¸ªå­—æ®µï¼Œç®€åŒ–</td></tr><tr><td>å®‰å…¨åŠŸèƒ½</td><td>æ²¡æœ‰åŠ å¯†ã€è®¤è¯ç­‰æœºåˆ¶</td><td>é›†æˆ IPSecï¼Œæä¾›åŠ å¯†å’Œè®¤è¯åŠŸèƒ½</td></tr><tr><td>ä¸šåŠ¡æ¨¡å¼æ”¯æŒ</td><td>æ²¡æœ‰æ‰©å±•å­—æ®µ</td><td>æ”¯æŒå¤šæŠ¥å¤´åµŒå¥—</td></tr><tr><td>åˆ†æ®µå¤„ç†</td><td>-</td><td>åªèƒ½ç”±æºå‘èŠ‚ç‚¹åˆ†æ®µï¼Œä¸­é—´è·¯ç”±å™¨ä¸èƒ½åˆ†æ®µï¼Œç®€åŒ–è·¯ç”±å¤„ç†</td></tr><tr><td>MTU å‘ç°</td><td>-</td><td>æ”¹è¿›æœºåˆ¶ï¼Œå¸®åŠ©ç¡®å®šæœ€å¤§ä¼ è¾“å•å…ƒï¼Œé¿å…åˆ†ç‰‡</td></tr><tr><td>æ‰©å±•æ€§</td><td>-</td><td>æ”¯æŒå¤šæŠ¥å¤´åµŒå¥—ï¼Œå¢å¼ºæ‰©å±•æ€§</td></tr><tr><td>è·¯ç”±æ•ˆç‡</td><td>-</td><td>å‡å°‘å¤´éƒ¨å­—æ®µï¼Œç®€åŒ–å¤„ç†æµç¨‹</td></tr></tbody></table><h3 id="IPV6æŠ¥æ–‡æ ¼å¼"><a href="#IPV6æŠ¥æ–‡æ ¼å¼" class="headerlink" title="IPV6æŠ¥æ–‡æ ¼å¼"></a>IPV6æŠ¥æ–‡æ ¼å¼</h3><p><img src="https://xinhaojin.github.io/picx-images-hosting/20240910/image.8ojnba6u85.jpg" alt="image"></p><ul><li>é»˜è®¤å¤´éƒ¨</li></ul><table><thead><tr><th>å­—æ®µ</th><th>é•¿åº¦ï¼ˆä½ï¼‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬ï¼ˆVersionï¼‰</td><td>4</td><td>å›ºå®šå€¼ 6ï¼Œè¡¨ç¤º IPv6 åè®®</td></tr><tr><td>æµé‡ç±»åˆ«ï¼ˆTraffic Classï¼‰</td><td>8</td><td>ç±»ä¼¼äº IPv4 ä¸­çš„æœåŠ¡ç±»å‹ï¼ˆTOSï¼‰å­—æ®µï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æµé‡ç±»å‹å’Œä¼˜å…ˆçº§</td></tr><tr><td>æµæ ‡ç­¾ï¼ˆFlow Labelï¼‰</td><td>20</td><td>ç”¨äºæ ‡è¯†ç‰¹å®šçš„æ•°æ®æµï¼Œä¸ºå®ç° QoS æä¾›æ”¯æŒ</td></tr><tr><td>æœ‰æ•ˆè½½è·é•¿åº¦ï¼ˆPayload Lengthï¼‰</td><td>16</td><td>è¡¨ç¤º IPv6 æŠ¥æ–‡é™¤å¤´éƒ¨ä»¥å¤–çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦</td></tr><tr><td>ä¸‹ä¸€ä¸ªå¤´éƒ¨ï¼ˆNext Headerï¼‰</td><td>8</td><td>æ ‡è¯†ç´§è·Ÿåœ¨ IPv6 å¤´éƒ¨åé¢çš„æ‰©å±•å¤´éƒ¨æˆ–ä¸Šå±‚åè®®çš„ç±»å‹</td></tr><tr><td>è·³é™åˆ¶ï¼ˆHop Limitï¼‰</td><td>8</td><td>ç±»ä¼¼äº IPv4 ä¸­çš„ TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰å­—æ®µï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡ 1ï¼Œé˜²æ­¢æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯</td></tr><tr><td>æºåœ°å€ï¼ˆSource Addressï¼‰</td><td>128</td><td>å‘é€æ–¹çš„ IPv6 åœ°å€</td></tr><tr><td>ç›®çš„åœ°å€ï¼ˆDestination Addressï¼‰</td><td>128</td><td>æ¥æ”¶æ–¹çš„ IPv6 åœ°å€</td></tr></tbody></table><ul><li>æ‰©å±•å¤´éƒ¨</li></ul><table><thead><tr><th>ä¸‹ä¸€å¤´éƒ¨ç¼–å·</th><th>ä¸‹ä¸€å¤´éƒ¨ç±»å‹</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>0</td><td>Hop-by-Hop Options Header</td><td>é€è·³é€‰é¡¹ï¼šè¿™äº›ä¿¡æ¯ç”±æ²¿é€”å„ä¸ªè·¯ç”±å™¨å¤„ç†</td></tr><tr><td>6</td><td>TCP (Upper Layer)</td><td>è¯¥IPv6æŠ¥æ–‡çš„ä¸Šå±‚å°è£…æ˜¯TCP</td></tr><tr><td>17</td><td>UDP (Upper Layer)</td><td>è¯¥IPv6æŠ¥æ–‡çš„ä¸Šå±‚å°è£…æ˜¯UDP</td></tr><tr><td>43</td><td>Routing Header</td><td>è·¯ç”±é€‰æ‹©å¤´ï¼šç»™å‡ºä¸€ä¸ªè·¯ç”±å™¨åœ°å€åˆ—è¡¨ï¼Œç±»ä¼¼äºIPv4çš„æ¾æ•£æºè·¯ç”±å’Œè·¯ç”±è®°å½•</td></tr><tr><td>44</td><td>Fragment Header</td><td>åˆ†æ®µï¼šå¤„ç†æ•°æ®æŠ¥çš„åˆ†æ®µé—®é¢˜</td></tr><tr><td>50</td><td>Encapsulating Security Payload</td><td>ESPï¼šå°è£…å®‰å…¨è½½è·ï¼Œè·ŸIPSecç±»ä¼¼</td></tr><tr><td>51</td><td>Authentication Header</td><td>AHï¼šè®¤è¯å¤´ï¼Œè·ŸIPSecç±»ä¼¼</td></tr><tr><td>60</td><td>Destination Options</td><td>ç›®æ ‡é€‰é¡¹ï¼šé€‰é¡¹ä¸­çš„ä¿¡æ¯ç”±ç›®æ ‡èŠ‚ç‚¹æ£€æŸ¥å¤„ç†</td></tr></tbody></table><h3 id="IPV6åœ°å€"><a href="#IPV6åœ°å€" class="headerlink" title="IPV6åœ°å€"></a>IPV6åœ°å€</h3><p>IPv6 åœ°å€æ˜¯ 128 ä½é•¿ï¼Œé€šå¸¸é‡‡ç”¨å†’å·åˆ†éš”çš„åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œåˆ†ä¸º 8 ç»„ã€‚</p><ul><li><strong>è¡¨ç¤ºæ–¹æ³•</strong><ul><li>æ ‡å‡†è¡¨ç¤ºï¼šä¾‹å¦‚ï¼Œ<code>8000:0000:0000:0000:0123:4567:89AB:CDEF</code>ã€‚</li></ul></li><li><strong>ç®€åŒ–è§„åˆ™</strong><ul><li>çœç•¥å‰å¯¼é›¶ï¼šæ¯ä¸ªå­—æ®µå‰çš„ 0 å¯ä»¥çœç•¥ï¼Œå¦‚ <code>0123</code>å¯ä»¥ç®€å†™ä¸º <code>123</code>ã€‚</li><li>å‹ç¼©å…¨é›¶å­—æ®µï¼šä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„å…¨é›¶å­—æ®µå¯ä»¥ç”¨ä¸€å¯¹å†’å· <code>::</code>æ¥ä»£æ›¿ã€‚</li><li>é™åˆ¶ï¼šåŒå†’å· <code>::</code>åœ¨ä¸€ä¸ªåœ°å€ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œä»¥é¿å…æ­§ä¹‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹ç®€åŒ–</strong><ul><li>åœ°å€ <code>8000:0000:0000:0000:0123:4567:89AB:CDEF</code>å¯ä»¥ç®€å†™ä¸º <code>8000::123:4567:89AB:CDEF</code>ã€‚</li></ul></li><li><strong>IPv4 å…¼å®¹åœ°å€</strong><ul><li>IPv4 å…¼å®¹åœ°å€çš„ IPv6 è¡¨ç¤ºæ–¹æ³•ï¼Œä¾‹å¦‚ <code>::192.168.10.1</code>ã€‚</li><li>è¿™ç§è¡¨ç¤ºæ–¹æ³•å°† IPv4 åœ°å€ç›´æ¥åµŒå…¥åˆ° IPv6 åœ°å€ä¸­ã€‚</li></ul></li><li><strong>æ³¨æ„äº‹é¡¹</strong><ul><li>æœ‰æ•ˆé›¶ä½ä¸å¯çœç•¥ã€‚</li><li>åŒå†’å· <code>::</code>ä»…ç”¨äºå‹ç¼©è¿ç»­çš„å…¨é›¶å­—æ®µï¼Œä¸”åœ¨ä¸€ä¸ª IPv6 åœ°å€ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</li></ul></li></ul><p>ä»¥ä¸‹æ˜¯ä¸ºæ‚¨ä¼˜åŒ–åçš„ Markdown æ ¼å¼ï¼š</p><h4 id="IPv6-åœ°å€åˆ†ç±»"><a href="#IPv6-åœ°å€åˆ†ç±»" class="headerlink" title="IPv6 åœ°å€åˆ†ç±»"></a>IPv6 åœ°å€åˆ†ç±»</h4><ul><li><p><strong>å•æ’­åœ°å€</strong></p><ul><li><strong>å¯èšåˆå…¨çƒå•æ’­åœ°å€</strong><ul><li>å…¨çƒæœ‰æ•ˆï¼šç›¸å½“äº IPv4 çš„å…¬ç”¨åœ°å€ã€‚</li><li>å‰ç¼€ï¼šä»¥ <code>001</code> å¼€å¤´ã€‚</li></ul></li><li><strong>é“¾è·¯æœ¬åœ°åœ°å€</strong><ul><li>ç”¨é€”ï¼šç”¨äºåŒä¸€é“¾è·¯ä¸Šç›¸é‚»èŠ‚ç‚¹é—´çš„é€šä¿¡ã€‚</li><li>å‰ç¼€ï¼šä»¥ <code>1111 1110 10</code> å¼€å¤´ã€‚</li><li>ç”Ÿæˆï¼šç»“åˆ MAC åœ°å€è‡ªåŠ¨ç”Ÿæˆã€‚</li></ul></li><li><strong>ç«™ç‚¹æœ¬åœ°åœ°å€</strong><ul><li>ç”¨é€”ï¼šç›¸å½“äº IPv4 ä¸­çš„ç§ç½‘åœ°å€ã€‚</li><li>å‰ç¼€ï¼šä»¥ <code>1111 1110 11</code> å¼€å¤´ã€‚</li><li>åŠ©è®°ï¼š1 èšï¼ˆå…¨çƒå•æ’­ï¼‰2 æ‹ï¼ˆé“¾è·¯æœ¬åœ°ï¼‰3 å ï¼ˆç«™ç‚¹æœ¬åœ°ï¼‰ã€‚</li></ul></li></ul></li><li><p><strong>ç»„æ’­åœ°å€</strong></p><ul><li>å¹¿æ’­æ›¿ä»£ï¼šIPv6 ä¸­æ²¡æœ‰å¹¿æ’­åœ°å€ï¼Œå¹¿æ’­åŠŸèƒ½ç”±ç»„æ’­ä»£æ›¿ã€‚</li><li>å‰ç¼€ï¼šä»¥ <code>1111 1111</code> å¼€å¤´ï¼Œå³ FF00 å¼€å¤´ã€‚</li></ul></li><li><p><strong>ä»»æ„æ’­åœ°å€</strong></p><ul><li>æ ‡è¯†ï¼šè¡¨ç¤ºä¸€ç»„æ¥å£çš„æ ‡è¯†ç¬¦ï¼Œé€šå¸¸è·¯ç”±åˆ°æœ€è¿‘çš„æ¥å£ã€‚</li><li>ä½¿ç”¨é™åˆ¶ï¼š<ul><li>ä¸èƒ½ç”¨ä½œæºåœ°å€ï¼Œåªèƒ½ä½œä¸ºç›®æ ‡åœ°å€ã€‚</li><li>ä¸èƒ½æŒ‡å®šç»™ IPv6 ä¸»æœºï¼Œåªèƒ½æŒ‡å®šç»™ IPv6 è·¯ç”±å™¨ã€‚</li></ul></li></ul></li></ul><h4 id="IPv4åœ°å€ä¸IPv6ç‰¹æ®Šåœ°å€å¯¹æ¯”"><a href="#IPv4åœ°å€ä¸IPv6ç‰¹æ®Šåœ°å€å¯¹æ¯”" class="headerlink" title="IPv4åœ°å€ä¸IPv6ç‰¹æ®Šåœ°å€å¯¹æ¯”"></a>IPv4åœ°å€ä¸IPv6ç‰¹æ®Šåœ°å€å¯¹æ¯”</h4><table><thead><tr><th>IPv4åœ°å€</th><th>IPv6åœ°å€</th></tr></thead><tbody><tr><td>ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤º</td><td>å¸¦å†’å·çš„åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œ0å¯ä»¥å‹ç¼©</td></tr><tr><td>åˆ†ä¸ºAã€Bã€Cã€Dã€E 5ç±»</td><td>ä¸åˆ†ç±»</td></tr><tr><td>ç»„æ’­åœ°å€ <code>224.0.0.0/4</code></td><td>ç»„æ’­åœ°å€ <code>FF00::/8</code></td></tr><tr><td>å¹¿æ’­åœ°å€ï¼ˆä¸»æœºéƒ¨åˆ†å…¨ä¸º1ï¼‰</td><td>ä»»æ„æ’­ï¼ˆé™äºå­ç½‘å†…éƒ¨ï¼‰</td></tr><tr><td>é»˜è®¤åœ°å€ <code>0.0.0.0</code></td><td>ä¸ç¡®å®šåœ°å€ <code>::</code></td></tr><tr><td>å›ç¯åœ°å€ <code>127.0.0.1</code></td><td>å›ç¯åœ°å€ <code>::1</code></td></tr><tr><td>å…¬å…±åœ°å€</td><td>å¯èšåˆå…¨çƒå•æ’­åœ°å€ <code>FP=001</code></td></tr><tr><td>ç§æœ‰åœ°å€ <code>10.0.0.0/8</code> <code>127.16.0.0/12</code> <code>192.168.0.0/16</code></td><td>ç«™ç‚¹æœ¬åœ°åœ°å€ <code>FEC0::/48</code></td></tr><tr><td>è‡ªåŠ¨ä¸“ç”¨IPåœ°å€ <code>169.254.0.0/16</code></td><td>é“¾è·¯æœ¬åœ°åœ°å€ <code>FE80::/48</code></td></tr><tr><td></td><td>6to4éš§é“åœ°å€ <code>2002::/16</code></td></tr></tbody></table><h4 id="IPv6è·¯ç”±åè®®"><a href="#IPv6è·¯ç”±åè®®" class="headerlink" title="IPv6è·¯ç”±åè®®"></a>IPv6è·¯ç”±åè®®</h4><ul><li><strong>ä¸»è¦è·¯ç”±åè®®</strong><ul><li><strong>RIPng</strong>ï¼šRIP çš„ IPv6 ç‰ˆæœ¬ï¼Œç”¨äºå°å‹ç½‘ç»œã€‚</li><li><strong>OSPFv3</strong>ï¼šOSPF çš„ IPv6 ç‰ˆæœ¬ï¼Œæ”¯æŒé“¾è·¯çŠ¶æ€è·¯ç”±ã€‚</li><li><strong>BGP4+</strong>ï¼šBGP çš„ IPv6 æ‰©å±•ï¼Œæ”¯æŒ IPv6 è·¯ç”±ã€‚</li></ul></li><li><strong>DHCPv6 é…ç½®</strong><ul><li><strong>æœ‰çŠ¶æ€è‡ªåŠ¨é…ç½®</strong><ul><li>DHCPv6 ç›´æ¥åˆ†é…å‰ç¼€å’Œæ¥å£ IDã€ç½‘å…³å’Œ DNS ç­‰ã€‚</li><li>æä¾›å®Œæ•´çš„ç½‘ç»œé…ç½®ä¿¡æ¯ã€‚</li></ul></li><li><strong>æ— çŠ¶æ€è‡ªåŠ¨é…ç½®</strong><ul><li>è·¯ç”±å™¨æ¥å£å‰ç¼€ + ç»ˆç«¯ EUI-64ã€‚</li><li>ä»…æä¾›éƒ¨åˆ†ç½‘ç»œé…ç½®ä¿¡æ¯ï¼Œå¦‚ IP åœ°å€å‰ç¼€ã€‚</li></ul></li></ul></li><li><strong>ICMPv6</strong><ul><li><strong>é‚»å±…å‘ç°</strong><ul><li>æ–°å¢çš„é‚»å±…å‘ç°åŠŸèƒ½ï¼Œä»£æ›¿äº† IPv4 ä¸­çš„ ARP åè®®ã€‚</li><li>ç”¨äºåœ°å€è§£æã€è·¯ç”±å™¨å‘ç°å’Œå‚æ•°å‘ç°ã€‚</li></ul></li></ul></li><li><strong>åŠŸèƒ½æ¦‚è¿°</strong><ul><li><strong>RIPng</strong> å’Œ <strong>OSPFv3</strong> æä¾›å†…éƒ¨ç½‘å…³åè®®æ”¯æŒï¼Œè€Œ <strong>BGP4+</strong> ç”¨äºè‡ªæ²»ç³»ç»Ÿé—´çš„è·¯ç”±ã€‚</li><li><strong>DHCPv6</strong> çš„ä¸¤ç§é…ç½®æ¨¡å¼å…è®¸çµæ´»çš„ IP åœ°å€å’Œç½‘ç»œå‚æ•°åˆ†é…ã€‚</li><li><strong>ICMPv6</strong> å¢å¼ºäº†ç½‘ç»œè¯Šæ–­å’Œè‡ªåŠ¨é…ç½®èƒ½åŠ›ï¼Œæ˜¯ IPv6 ç½‘ç»œä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚</li></ul></li></ul><h2 id="ç¬¬8ç« -ç½‘ç»œå®‰å…¨"><a href="#ç¬¬8ç« -ç½‘ç»œå®‰å…¨" class="headerlink" title="ç¬¬8ç«  ç½‘ç»œå®‰å…¨"></a>ç¬¬8ç«  ç½‘ç»œå®‰å…¨</h2><h3 id="ç½‘ç»œå®‰å…¨åŸºç¡€"><a href="#ç½‘ç»œå®‰å…¨åŸºç¡€" class="headerlink" title="ç½‘ç»œå®‰å…¨åŸºç¡€"></a>ç½‘ç»œå®‰å…¨åŸºç¡€</h3><h4 id="ç½‘ç»œå®‰å…¨å¨èƒç±»å‹"><a href="#ç½‘ç»œå®‰å…¨å¨èƒç±»å‹" class="headerlink" title="ç½‘ç»œå®‰å…¨å¨èƒç±»å‹"></a>ç½‘ç»œå®‰å…¨å¨èƒç±»å‹</h4><ul><li>çªƒå¬ï¼šä¾‹å¦‚æ­çº¿çªƒå¬ã€å®‰è£…é€šä¿¡ç›‘è§†å™¨å’Œè¯»å–ç½‘ä¸Šçš„ä¿¡æ¯ç­‰ã€‚</li><li>å‡å†’ï¼šå½“ä¸€ä¸ªå®ä½“å‡æ‰®æˆå¦ä¸€ä¸ªå®ä½“è¿›è¡Œç½‘ç»œæ´»åŠ¨æ—¶å°±å‘ç”Ÿäº†å‡å†’ã€‚</li><li>é‡æ”¾ï¼šé‡å¤å‘é€ä¸€ä»½æŠ¥æ–‡æˆ–æŠ¥æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿äº§ç”Ÿä¸€ä¸ªè¢«æˆæƒæ•ˆæœã€‚ï¼ˆéšæœºæ•°ã€æ—¶é—´æˆ³ï¼‰</li><li>æµé‡åˆ†æï¼šå¯¹ç½‘ä¸Šä¿¡æ¯æµè§‚å¯Ÿå’Œåˆ†ææ¨æ–­å‡ºç½‘ä¸Šä¼ è¾“çš„æœ‰ç”¨ä¿¡æ¯ã€‚</li><li>æ•°æ®å®Œæ•´æ€§ç ´åï¼šæœ‰æ„æˆ–æ— æ„åœ°ä¿®æ”¹æˆ–ç ´åä¿¡æ¯ç³»ç»Ÿï¼Œæˆ–è€…åœ¨éæˆæƒå’Œä¸èƒ½ç›‘æµ‹çš„æ–¹å¼ä¸‹å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</li><li>æ‹’ç»æœåŠ¡ DoSï¼šå½“ä¸€ä¸ªæˆæƒå®ä½“ä¸èƒ½è·å¾—åº”æœ‰çš„å¯¹ç½‘ç»œèµ„æºçš„è®¿é—®ã€‚SYN-Flooding</li><li>èµ„æºçš„éæˆæƒä½¿ç”¨ï¼šå³ä¸æ‰€å®šä¹‰çš„å®‰å…¨ç­–ç•¥ä¸ä¸€è‡´çš„ä½¿ç”¨ã€‚</li><li>é™·é—¨å’Œç‰¹æ´›ä¼Šæœ¨é©¬ï¼šé€šè¿‡æ›¿æ¢ç³»ç»Ÿåˆæ³•ç¨‹åºï¼Œæˆ–è€…åœ¨åˆæ³•ç¨‹åºé‡Œæ’å…¥æ¶æ„ä»£ç ã€‚</li><li>ç—…æ¯’ï¼šéšç€äººä»¬å¯¹è®¡ç®—æœºç³»ç»Ÿå’Œç½‘ç»œä¾èµ–ç¨‹åº¦çš„å¢åŠ ï¼Œè®¡ç®—æœºç—…æ¯’å·²ç»æ„æˆäº†å¯¹è®¡ç®—æœºç³»ç»Ÿå’Œç½‘ç»œçš„ä¸¥é‡å¨èƒã€‚</li><li>è¯½è°¤ï¼šåˆ©ç”¨è®¡ç®—æœºä¿¡æ¯ç³»ç»Ÿçš„å¹¿æ³›äº’è¿æ€§å’ŒåŒ¿åæ€§æ•£å¸ƒé”™è¯¯çš„æ¶ˆæ¯ï¼Œä»¥è¾¾åˆ°è¯‹æ¯æŸä¸ªå¯¹è±¡çš„å½¢è±¡å’ŒçŸ¥ååº¦çš„ç›®çš„ã€‚</li></ul><p><strong>ç½‘ç»œæ”»å‡»åˆ†ç±»</strong></p><ul><li>è¢«åŠ¨æ”»å‡»ï¼šå…¸å‹ä»£è¡¨å—…æ¢ã€ç›‘å¬å’Œæµé‡åˆ†æï¼Œæœ€éš¾è¢«æ£€æµ‹ï¼Œé‡ç‚¹æ˜¯é¢„é˜²ï¼Œä¸»è¦æ‰‹æ®µæ˜¯åŠ å¯†ã€‚</li><li>ä¸»åŠ¨æ”»å‡»ï¼šå‡å†’ã€é‡æ”¾ã€æ¬ºéª—ã€æ¶ˆæ¯ç¯¡æ”¹å’Œæ‹’ç»æœåŠ¡ç­‰ï¼Œé‡ç‚¹æ˜¯æ£€æµ‹è€Œä¸æ˜¯é¢„é˜²ï¼Œæ‰‹æ®µæœ‰é˜²ç«å¢™ã€IDS ç­‰æŠ€æœ¯ã€‚</li><li>ç‰©ç†ä¸´è¿‘æ”»å‡»ï¼šé˜²æ­¢å¤–äººä¹±è¿›æœºæˆ¿ã€‚</li><li>å†…éƒ¨äººå‘˜æ”»å‡»ï¼šå†…é¬¼æ¸—é€ï¼Œå¦‚å›½å…±æŠ—æˆ˜ä¸­çš„å†…éƒ¨ç“¦è§£ã€‚</li><li>åˆ†å‘æ”»å‡»ï¼šè½¯ä»¶å¼€å‘å‡ºæ¥æœªå®‰è£…ä¹‹å‰ï¼Œè¢«ç¯¡æ”¹ã€‚ï¼ˆç±»ä¼¼ç–«è‹—è¿è¾“æ’æ¸©ä¸åˆæ ¼ï¼‰</li></ul><h4 id="å®‰å…¨ç›®æ ‡ä¸æŠ€æœ¯"><a href="#å®‰å…¨ç›®æ ‡ä¸æŠ€æœ¯" class="headerlink" title="å®‰å…¨ç›®æ ‡ä¸æŠ€æœ¯"></a>å®‰å…¨ç›®æ ‡ä¸æŠ€æœ¯</h4><p><strong>å®‰å…¨ç›®æ ‡</strong></p><ul><li>è®¿é—®æ§åˆ¶</li><li>è®¤è¯ ï¼š èº«ä»½è®¤è¯ã€æ¶ˆæ¯è®¤è¯</li><li>å®Œæ•´æ€§ ï¼š ç¡®ä¿æ¥æ”¶åˆ°çš„ä¿¡æ¯ä¸å‘é€çš„ä¿¡æ¯ä¸€è‡´</li><li>å®¡è®¡ ï¼šä¸å¯æŠµèµ–</li><li>ä¿å¯† ï¼š ç¡®ä¿æ•æ„Ÿä¿¡æ¯ä¸è¢«æ³„éœ²</li></ul><p><strong>åŸºæœ¬å®‰å…¨æŠ€æœ¯</strong> ï¼š æ•°æ®åŠ å¯†ã€æ•°å­—ç­¾åã€èº«ä»½è®¤è¯ã€é˜²ç«å¢™ã€å…¥ä¾µæ£€æµ‹ã€å†…å®¹æ£€æŸ¥ã€‚</p><h3 id="ç°ä»£åŠ å¯†æŠ€æœ¯"><a href="#ç°ä»£åŠ å¯†æŠ€æœ¯" class="headerlink" title="ç°ä»£åŠ å¯†æŠ€æœ¯"></a>ç°ä»£åŠ å¯†æŠ€æœ¯</h3><h4 id="ç§é’¥å¯†ç -å¯¹ç§°å¯†é’¥"><a href="#ç§é’¥å¯†ç -å¯¹ç§°å¯†é’¥" class="headerlink" title="ç§é’¥å¯†ç &#x2F;å¯¹ç§°å¯†é’¥"></a>ç§é’¥å¯†ç &#x2F;å¯¹ç§°å¯†é’¥</h4><p>å¯†ç åˆ†ä¸ºç§é’¥ã€å…¬é’¥å¯†ç ä¸¤ç§ï¼Œè€Œä»‹äºç§é’¥å’Œå…¬é’¥ä¹‹é—´çš„å¯†ç ç§°ä¸ºæ··åˆå¯†ç ã€‚</p><p><strong>ç§é’¥å¯†ç ï¼ˆå¯¹ç§°å¯†ç ï¼‰</strong></p><p>è¯¥ä½“åˆ¶çš„ç‰¹ç‚¹æ˜¯åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ã€‚æ¶ˆæ¯çš„æ”¶å‘åŒæ–¹å¿…é¡»äº‹å…ˆé€šè¿‡å®‰å…¨æ¸ é“äº¤æ¢å¯†é’¥ã€‚</p><ul><li>ä¼˜ç‚¹ ï¼š åŠ è§£å¯†é€Ÿåº¦å¿«ã€å¯†æ–‡ç´§å‡‘ã€ä½¿ç”¨é•¿å¯†é’¥æ—¶éš¾ç ´è§£ã€‚</li><li>ç¼ºç‚¹ ï¼š å¯†é’¥åˆ†é…é—®é¢˜ã€å¯†é’¥ç®¡ç†é—®é¢˜ã€æ— æ³•è®¤è¯æºã€‚</li></ul><table><thead><tr><th>ç®—æ³•</th><th>è§£é‡Š</th><th>ç‰¹ç‚¹</th><th>åˆ†ç»„é•¿åº¦</th><th>å¯†é’¥é•¿åº¦</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>DES</td><td>æ•°æ®åŠ å¯†æ ‡å‡†</td><td>åˆ†ç»„åŠ å¯†ç®—æ³•ï¼Œé‡‡ç”¨ç§»ä½+æ›¿æ¢</td><td>64ä½</td><td>64ä½ï¼ˆæœ‰æ•ˆ56ä½ï¼‰</td><td>é€Ÿåº¦å¿«ï¼Œå¯†é’¥æ˜“äº§ç”Ÿ</td></tr><tr><td>3DES</td><td>ä¸‰é‡DES</td><td>ä½¿ç”¨DESè¿›è¡Œâ€œåŠ å¯†-è§£å¯†-åŠ å¯†â€æ“ä½œ</td><td>-</td><td>112ä½</td><td>ä¸€èˆ¬K1å’ŒK3ç›¸åŒ</td></tr><tr><td>IDEA</td><td>å›½é™…æ•°æ®åŠ å¯†ç®—æ³•</td><td>åˆ†ç»„åŠ å¯†ï¼Œæ··åˆä½¿ç”¨ä¸åŒä»£æ•°ç¾¤è¿ç®—</td><td>64ä½</td><td>128ä½</td><td>ç”¨äºPGP</td></tr><tr><td>AES</td><td>é«˜çº§åŠ å¯†æ ‡å‡†</td><td>å¯é€šè¿‡ç¡¬ä»¶å®ç°ï¼Œé€Ÿåº¦å¿«</td><td>128ä½</td><td>128, 192, 256ä½</td><td>åƒ3DESä¸€æ ·å®‰å…¨</td></tr><tr><td>RC4&#x2F;5</td><td>æµåŠ å¯†ç®—æ³•</td><td>åŠ å¯†é€Ÿåº¦å¿«ï¼Œç”¨äºWIFI</td><td>å¯å˜</td><td>å¯å˜</td><td>å¯è¾¾åˆ°DESçš„10å€é€Ÿåº¦</td></tr></tbody></table><h4 id="å…¬é’¥å¯†ç -éå¯¹ç§°åŠ å¯†"><a href="#å…¬é’¥å¯†ç -éå¯¹ç§°åŠ å¯†" class="headerlink" title="å…¬é’¥å¯†ç &#x2F;éå¯¹ç§°åŠ å¯†"></a>å…¬é’¥å¯†ç &#x2F;éå¯¹ç§°åŠ å¯†</h4><p>å…¬é’¥å¯†ç åˆç§°ä¸ºéå¯¹ç§°åŠ å¯† ï¼Œ å°±æ˜¯å¯¹æ•°æ®åŠ å¯†å’Œè§£å¯†çš„å¯†é’¥æ˜¯ä¸åŒçš„ã€‚</p><ul><li>ä¼˜ç‚¹ ï¼š å¯†é’¥åˆ†å‘æ–¹ä¾¿ã€å¯†é’¥ä¿ç®¡é‡å°‘ã€æ”¯æŒæ•°å­—ç­¾åã€‚</li><li>ç¼ºç‚¹ ï¼š åŠ å¯†é€Ÿåº¦æ…¢ ( è®¡ç®—é‡å¤§ ï¼Œ ä¸é€‚åˆåŠ å¯†å¤§æ•°æ® ) ã€æ•°æ®è†¨èƒ€ç‡é«˜ã€‚</li></ul><p>æ¯ä¸ªå®ä½“æœ‰ä¸¤ä¸ªå¯†é’¥ï¼š å…¬é’¥å…¬å¼€ï¼Œ ç§é’¥è‡ªå·±ä¿å­˜ã€‚</p><ul><li>å…¬é’¥åŠ å¯† ï¼Œ ç§é’¥è§£å¯† ï¼Œ å¯å®ç°ä¿å¯†é€šä¿¡</li><li>ç§é’¥åŠ å¯† ï¼Œ å…¬é’¥è§£å¯† ï¼Œ å¯å®ç°æ•°å­—ç­¾å</li></ul><p><strong>å¸¸è§çš„éå¯¹ç§°åŠ å¯†ç®—æ³•</strong></p><ul><li>RSA ï¼š512 ä½ï¼ˆæˆ– 1024 ä½ï¼‰å¯†é’¥ï¼Œè®¡ç®—é‡æå¤§ï¼Œéš¾ç ´è§£ã€‚</li><li>Elgamal</li><li>ECC ï¼ˆæ¤­åœ†æ›²çº¿ç®—æ³•ï¼‰</li><li>èƒŒåŒ…ç®—æ³•</li><li>Rabin</li><li>DH ç­‰</li></ul><h4 id="æ··åˆåŠ å¯†"><a href="#æ··åˆåŠ å¯†" class="headerlink" title="æ··åˆåŠ å¯†"></a>æ··åˆåŠ å¯†</h4><ul><li>å‘é€æ–¹ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†éœ€è¦å‘é€çš„æ¶ˆæ¯ï¼Œå†ç”¨æ¥æ”¶æ–¹çš„å…¬é’¥åŠ å¯†å¯¹ç§°å¯†é’¥ï¼Œç„¶åä¸€èµ·å‘é€ç»™æ¥æ”¶æ–¹ ï¼›</li><li>æ¥æ”¶æ–¹å…ˆç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¾—åˆ°å¯¹ç§°å¯†é’¥ ï¼Œç„¶åç”¨å¯¹ç§°å¯†é’¥è§£å¯†å¾—åˆ°æ˜æ–‡ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.4cku4q16xo.jpg" alt="image"></li></ul><h4 id="å›½äº§å¯†ç ç®—æ³•"><a href="#å›½äº§å¯†ç ç®—æ³•" class="headerlink" title="å›½äº§å¯†ç ç®—æ³•"></a>å›½äº§å¯†ç ç®—æ³•</h4><ul><li>ã€Šä¸­åäººæ°‘å…±å’Œå›½å¯†ç æ³•ã€‹<ul><li>å¯†ç åˆ†ç±»<ul><li>æ ¸å¿ƒå¯†ç </li><li>æ™®é€šå¯†ç </li><li>å•†ç”¨å¯†ç </li></ul></li><li>ç®¡ç†<ul><li>æ ¸å¿ƒå¯†ç å’Œæ™®é€šå¯†ç ï¼šç”¨äºä¿æŠ¤å›½å®¶ç§˜å¯†ä¿¡æ¯ï¼Œç”±å¯†ç ç®¡ç†éƒ¨é—¨ä¾æ³•å®è¡Œä¸¥æ ¼ç»Ÿä¸€ç®¡ç†ã€‚</li><li>å•†ç”¨å¯†ç ï¼šç”¨äºä¿æŠ¤ä¸å±äºå›½å®¶ç§˜å¯†çš„ä¿¡æ¯ï¼Œå…¬æ°‘ã€æ³•äººå¯ç”¨ã€‚</li></ul></li><li>å›½äº§å¯†ç ç®—æ³•<ul><li>å®šä¹‰ï¼šç”±å›½å®¶å¯†ç ç ”ç©¶ç›¸å…³æœºæ„è‡ªä¸»ç ”å‘ï¼Œå…·æœ‰ç›¸å…³çŸ¥è¯†äº§æƒçš„å•†ç”¨å¯†ç ç®—æ³•ã€‚</li><li>å·²å…¬å¸ƒçš„ç®—æ³•ï¼š| ç®—æ³•åç§° | ç®—æ³•ç‰¹å¾æè¿°                                                             |<br>| â€”â€”â€“ | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| SM1      | å¯¹ç§°åŠ å¯†ï¼Œåˆ†ç»„é•¿åº¦å’Œå¯†é’¥é•¿åº¦éƒ½ä¸º128æ¯”ç‰¹                                  |<br>| SM2      | éå¯¹ç§°åŠ å¯†ï¼Œç”¨äºå…¬é’¥åŠ å¯†ç®—æ³•ã€å¯†é’¥äº¤æ¢åè®®ã€æ•°å­—ç­¾åç®—æ³•ï¼ˆæ¤­åœ†æ›²çº¿é—®é¢˜ï¼‰ |<br>| SM3      | æ‚å‡‘ç®—æ³•ï¼ˆå“ˆå¸Œï¼‰ï¼Œåˆ†ç»„512ä½ï¼Œè¾“å‡ºæ‚å‡‘å€¼é•¿åº¦ä¸º256ä½                       |<br>| SM4      | å¯¹ç§°åŠ å¯†ï¼Œåˆ†ç»„é•¿åº¦å’Œå¯†é’¥é•¿åº¦éƒ½ä¸º128æ¯”ç‰¹                                  |<br>| SM9      | æ ‡è¯†å¯†ç ç®—æ³•ï¼Œæ”¯æŒå…¬é’¥åŠ å¯†ã€å¯†é’¥äº¤æ¢ã€æ•°å­—ç­¾åç­‰å®‰å…¨åŠŸèƒ½                 |</li></ul></li></ul></li></ul><h4 id="è®¤è¯"><a href="#è®¤è¯" class="headerlink" title="è®¤è¯"></a>è®¤è¯</h4><p>è®¤è¯åˆ†ä¸ºå®ä½“è®¤è¯å’Œæ¶ˆæ¯è®¤è¯</p><ul><li>å®ä½“è®¤è¯ ï¼š è¯†åˆ«é€šä¿¡åŒæ–¹çš„èº«ä»½ ï¼Œ é˜²æ­¢å‡å†’ï¼Œ å¯ä»¥ä½¿ç”¨æ•°å­—ç­¾å RSA</li><li>æ¶ˆæ¯è®¤è¯ ï¼š éªŒè¯æ¶ˆæ¯åœ¨ä¼ é€æˆ–å­˜å‚¨è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œ é€šå¸¸ä½¿ç”¨æŠ¥æ–‡æ‘˜è¦æ–¹æ³• MD5</li></ul><p><strong>åŸºäºå…±äº«å¯†é’¥çš„è®¤è¯</strong> ï¼šé€šä¿¡åŒæ–¹æœ‰ä¸€ä¸ªå…±äº«çš„å¯†é’¥ï¼Œ ä¾èµ–åŒæ–¹éƒ½ä¿¡ä»»çš„å¯†é’¥åˆ†å‘ä¸­å¿ƒ KDC<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.77diaiot71.jpg" alt="image"><br><strong>åŸºäºå…¬é’¥çš„è®¤è¯</strong><br>é€šä¿¡åŒæ–¹éƒ½ç”¨å¯¹æ–¹çš„å…¬é’¥åŠ å¯†ï¼Œ ç”¨å„è‡ªçš„ç§é’¥è§£å¯†ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.3uusg59ksl.jpg" alt="image"></p><h3 id="Hashå“ˆå¸Œç®—æ³•"><a href="#Hashå“ˆå¸Œç®—æ³•" class="headerlink" title="Hashå“ˆå¸Œç®—æ³•"></a>Hashå“ˆå¸Œç®—æ³•</h3><p>HASH å‡½æ•°ï¼Œåˆç§°ä¸ºæ‚å‡‘å‡½æ•°ã€æ•£åˆ—å‡½æ•°ï¼Œå®ƒèƒ½å¤Ÿå°†ä»»æ„é•¿åº¦çš„ä¿¡æ¯è½¬æ¢æˆå›ºå®šé•¿åº¦çš„å“ˆå¸Œå€¼ï¼ˆæ•°å­—æ‘˜è¦ï¼‰ï¼Œå¹¶ä¸”ä»»æ„ä¸åŒæ¶ˆæ¯æˆ–æ–‡ä»¶æ‰€ç”Ÿæˆçš„å“ˆå¸Œå€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>è‹¥ç”¨ h è¡¨ç¤º hash å‡½æ•° ï¼Œåˆ™ h æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š</p><ul><li>h çš„è¾“å…¥å¯ä»¥æ˜¯ä»»æ„é•¿åº¦çš„æ¶ˆæ¯æˆ–æ–‡ä»¶ Mã€‚</li><li>h çš„è¾“å‡ºçš„é•¿åº¦æ˜¯å›ºå®šçš„ã€‚</li><li>ç»™å®š h å’Œ M ï¼Œè®¡ç®— h(M) æ˜¯å®¹æ˜“çš„ã€‚</li><li>ç»™å®š h çš„æè¿°ï¼Œæ‰¾ä¸¤ä¸ªä¸åŒçš„æ¶ˆæ¯ M1 å’Œ M2 ï¼Œä½¿å¾— h(M1)&#x3D;h(M2) æ˜¯è®¡ç®—ä¸Šä¸å¯è¡Œçš„ã€‚</li></ul><p>å“ˆå¸Œå‡½æ•°ç‰¹æ€§ ï¼š ä¸å¯é€†æ€§ï¼ˆå•å‘ï¼‰ã€æ— ç¢°æ’æ€§ ã€é›ªå´©æ•ˆåº”ã€‚</p><p><strong>å¸¸è§çš„ Hash ç®—æ³•æœ‰</strong>ï¼š</p><ul><li>MD5 ç®—æ³• ï¼šä»¥ 512 ä½æ•°æ®å—ä¸ºå•ä½æ¥å¤„ç†è¾“å…¥ï¼Œäº§ç”Ÿ 128 ä½çš„ä¿¡æ¯æ‘˜è¦ã€‚å¸¸ç”¨äºæ–‡ä»¶æ ¡éªŒã€‚</li><li>SHA ç®—æ³• ï¼š ä»¥ 512 ä½æ•°æ®å—ä¸ºå•ä½æ¥å¤„ç†è¾“å…¥ï¼Œäº§ç”Ÿ 160 ä½çš„å“ˆå¸Œå€¼ ï¼Œå…·æœ‰æ¯” MD5 æ›´å¼ºçš„å®‰å…¨æ€§ã€‚</li><li>SM3 å›½äº§ç®—æ³• ï¼š æ¶ˆæ¯åˆ†ç»„é•¿åº¦ä¸º 512 æ¯”ç‰¹ï¼Œè¾“å‡º 256 ä½æ‘˜è¦ã€‚</li></ul><h3 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h3><p>ç­¾åæ–¹ç”¨è‡ªå·±çš„ç§é’¥è¿›è¡Œç­¾åï¼Œå¯¹æ–¹æ”¶åˆ°åï¼Œç”¨ç­¾åæ–¹çš„å…¬é’¥è¿›è¡ŒéªŒè¯ã€‚</p><p><strong>æ•°å­—ç­¾åç®—æ³•ï¼ˆå…¬é’¥åŠ å¯†ç®—æ³•ï¼‰</strong> ï¼š RSAã€Rabinã€ELGamal ç­¾åä½“åˆ¶å’Œ DSS æ ‡å‡†ã€‚</p><p><strong>æ•°æ®ç­¾åæ˜¯</strong>ç”¨äºç¡®è®¤å‘é€è€…èº«ä»½å’Œæ¶ˆæ¯å®Œæ•´æ€§çš„ä¸€ä¸ª<strong>åŠ å¯†æ¶ˆæ¯æ‘˜è¦</strong>ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>æ•°å­—ç­¾åæ˜¯å¯ä¿¡çš„ã€‚</li><li>æ•°å­—ç­¾åä¸å¯ä¼ªé€ ã€‚</li><li>æ•°å­—ç­¾åä¸èƒ½é‡æ–°ä½¿ç”¨ã€‚</li><li>ç­¾åæ–‡ä»¶æ˜¯ä¸èƒ½æ”¹å˜çš„ã€‚</li><li>æ•°å­—ç­¾åä¸èƒ½æŠµèµ–ã€‚</li><li>æ¥æ”¶è€…èƒ½å¤Ÿæ ¸å®å‘é€è€…èº«ä»½ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.969p0v8fka.jpg" alt="image"></li></ul><h3 id="æ•°å­—è¯ä¹¦ä¸CA"><a href="#æ•°å­—è¯ä¹¦ä¸CA" class="headerlink" title="æ•°å­—è¯ä¹¦ä¸CA"></a>æ•°å­—è¯ä¹¦ä¸CA</h3><p><strong>æ•°å­—è¯ä¹¦</strong></p><p>æ•°å­—è¯ä¹¦æ˜¯ä¸€ç§æƒå¨æ€§çš„ç”µå­æ–‡æ¡£ï¼Œå¦‚åŒç½‘ç»œä¸–ç•Œçš„èº«ä»½è¯ï¼Œç”¨äºè¯æ˜æŸä¸€å®ä½“ï¼ˆå¦‚ä¸ªäººã€æœåŠ¡å™¨ã€ç»„ç»‡ç­‰ï¼‰çš„èº«ä»½ä»¥åŠå…¶æ‹¥æœ‰çš„å…¬é’¥çš„åˆæ³•æ€§ã€‚</p><p>æ•°å­—è¯ä¹¦åŒ…å«äº†è¯ä¹¦æŒæœ‰è€…çš„èº«ä»½ä¿¡æ¯ã€å…¬é’¥ã€è¯ä¹¦çš„æœ‰æ•ˆæœŸã€é¢å‘æœºæ„çš„æ•°å­—ç­¾åç­‰é‡è¦ä¿¡æ¯ã€‚</p><p><strong>CAï¼ˆè¯ä¹¦é¢å‘æœºæ„ï¼‰</strong></p><p>CA æ˜¯æ•°å­—è¯ä¹¦çš„é¢å‘å’Œç®¡ç†æœºæ„ï¼Œå…·æœ‰æƒå¨æ€§å’Œå…¬æ­£æ€§ã€‚</p><p>CA è´Ÿè´£å¯¹è¯ä¹¦ç”³è¯·è€…è¿›è¡Œèº«ä»½éªŒè¯å’Œå®¡æ ¸ï¼Œç¡®è®¤å…¶èº«ä»½åˆæ³•åï¼Œé¢å‘æ•°å­—è¯ä¹¦ï¼Œå¹¶å¯¹è¯ä¹¦è¿›è¡Œç®¡ç†å’Œç»´æŠ¤ï¼ŒåŒ…æ‹¬è¯ä¹¦çš„æ›´æ–°ã€åŠé”€ç­‰æ“ä½œã€‚</p><p>CA çš„å­˜åœ¨ç¡®ä¿äº†æ•°å­—è¯ä¹¦çš„å¯ä¿¡åº¦å’Œå®‰å…¨æ€§ï¼Œä½¿å¾—ç½‘ç»œé€šä¿¡ä¸­çš„åŒæ–¹èƒ½å¤Ÿé€šè¿‡éªŒè¯å¯¹æ–¹çš„æ•°å­—è¯ä¹¦æ¥ç¡®è®¤èº«ä»½ï¼Œä»è€Œå»ºç«‹å®‰å…¨çš„é€šä¿¡è¿æ¥ã€‚</p><h4 id="A-å‘é€å†…å®¹ç»™-B"><a href="#A-å‘é€å†…å®¹ç»™-B" class="headerlink" title="A å‘é€å†…å®¹ç»™ B"></a>A å‘é€å†…å®¹ç»™ B</h4><ol><li>A å‘ CA ç”³è¯·æ•°å­—è¯ä¹¦ï¼ŒCA å¯¹ A çš„èº«ä»½è¿›è¡Œå®¡æ ¸å’ŒéªŒè¯ã€‚</li><li>å®¡æ ¸é€šè¿‡åï¼ŒCA ä¸º A é¢å‘åŒ…å« A èº«ä»½ä¿¡æ¯å’Œå…¬é’¥çš„æ•°å­—è¯ä¹¦ã€‚</li><li>A å¯¹è¦å‘é€çš„å†…å®¹è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œç”Ÿæˆæ¶ˆæ¯æ‘˜è¦ã€‚</li><li>A ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹æ¶ˆæ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆæ•°å­—ç­¾åã€‚</li><li>A å°†åŸå§‹å†…å®¹ã€æ•°å­—ç­¾åä»¥åŠè‡ªå·±çš„æ•°å­—è¯ä¹¦ä¸€èµ·å‘é€ç»™ B ã€‚</li><li>B æ¥æ”¶åˆ°æ¥è‡ª A çš„åŸå§‹å†…å®¹ã€æ•°å­—ç­¾åå’Œæ•°å­—è¯ä¹¦ã€‚</li><li>B é¦–å…ˆéªŒè¯ A çš„æ•°å­—è¯ä¹¦çš„åˆæ³•æ€§ï¼Œé€šè¿‡è·å– CA çš„å…¬é’¥æ¥éªŒè¯è¯ä¹¦çš„æ•°å­—ç­¾åï¼Œç¡®è®¤è¯ä¹¦æœªè¢«ç¯¡æ”¹ä¸” A çš„èº«ä»½åˆæ³•ã€‚</li><li>éªŒè¯æˆåŠŸåï¼ŒB æ¥æ”¶åˆ°çš„ä¿¡æ¯åŒ…æ‹¬ A å‘é€çš„åŸå§‹å†…å®¹å’Œæ•°å­—ç­¾åã€‚æ­¤æ—¶ï¼Œè‹¥åŸå§‹å†…å®¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åŠ å¯†äº†ï¼ŒB éœ€è¦ä½¿ç”¨ä» A çš„æ•°å­—è¯ä¹¦ä¸­è·å–çš„ A çš„å…¬é’¥å¯¹å…¶è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ˜æ–‡çš„åŸå§‹å†…å®¹ã€‚</li><li>B å¯¹è§£å¯†åçš„åŸå§‹å†…å®¹ï¼ˆè‹¥æœ‰åŠ å¯†åˆ™å…ˆè§£å¯†ï¼‰è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè¿ç®—ï¼Œç”Ÿæˆæ–°çš„æ¶ˆæ¯æ‘˜è¦ã€‚</li><li>B ä½¿ç”¨ä» A çš„æ•°å­—è¯ä¹¦ä¸­è·å–çš„ A çš„å…¬é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°åŸå§‹çš„æ¶ˆæ¯æ‘˜è¦ã€‚</li><li>B å¯¹æ¯”è‡ªå·±ç”Ÿæˆçš„æ¶ˆæ¯æ‘˜è¦å’Œä»æ•°å­—ç­¾åä¸­è§£å¯†å¾—åˆ°çš„æ¶ˆæ¯æ‘˜è¦ï¼Œå¦‚æœä¸¤è€…ä¸€è‡´ï¼Œåˆ™è¯´æ˜å†…å®¹æœªè¢«ç¯¡æ”¹ï¼Œæ•°å­—ç­¾åéªŒè¯é€šè¿‡ã€‚</li><li>B å¯¹è·å–çš„å†…å®¹è¿›è¡Œåç»­å¤„ç†ï¼Œå¦‚å­˜å‚¨ã€ä½¿ç”¨ç­‰ã€‚</li></ol><p>åœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœåŸå§‹å†…å®¹åœ¨å‘é€æ—¶è¢«åŠ å¯†äº†ï¼ŒB å°±éœ€è¦è§£å¯†ï¼›å¦‚æœæœªåŠ å¯†ï¼ŒB åˆ™å¯ç›´æ¥è¿›è¡Œå“ˆå¸Œè¿ç®—ã€‚</p><h4 id="è¯ä¹¦é“¾"><a href="#è¯ä¹¦é“¾" class="headerlink" title="è¯ä¹¦é“¾"></a>è¯ä¹¦é“¾</h4><p>å¦‚æœæœ‰ä¸¤ä¸ª CA ï¼Œ X1 å’Œ X2 ï¼Œ å‡è®¾ç”¨æˆ· A ä» CA æœºæ„ X1 è·å¾—äº†è¯ä¹¦ï¼Œ ç”¨æˆ· B ä» X2 è·å¾—è¯ä¹¦ï¼Œå¦‚æœä¸¤ä¸ªè¯ä¹¦å‘æ”¾æœºæ„ X1 å’Œ X2 å½¼æ­¤é—´å®‰å…¨äº¤æ¢äº†å…¬é’¥ï¼Œ å½¼æ­¤ä¿¡ä»»ï¼Œ é‚£ä¹ˆä»–ä»¬çš„è¯ä¹¦å¯ä»¥å½¢æˆè¯ä¹¦é“¾ã€‚</p><p>A é€šè¿‡ä¸€ä¸ªè¯ä¹¦é“¾æ¥è·å– B çš„å…¬é’¥ï¼Œ è¯ä¹¦é“¾è¡¨ç¤ºä¸ºï¼šX1ã€ŠX2ã€‹X2ã€ŠBã€‹</p><p>B ä¹Ÿèƒ½é€šè¿‡ç›¸åçš„è¯ä¹¦é“¾æ¥è·å– A çš„å…¬å¼€å¯†é’¥ï¼šX2ã€ŠX1ã€‹X1ã€ŠAã€‹</p><h3 id="IPSecåŸç†"><a href="#IPSecåŸç†" class="headerlink" title="IPSecåŸç†"></a>IPSecåŸç†</h3><ul><li><p>è™šæ‹Ÿä¸“ç”¨ç½‘åŸºç¡€</p><ul><li>å®šä¹‰ï¼šè™šæ‹Ÿä¸“ç”¨ç½‘ï¼ˆVirtual Private Networkï¼‰<ul><li>ä¸€ç§å»ºç«‹åœ¨å…¬ç½‘ä¸Šçš„ï¼Œç”±æŸä¸€ç»„ç»‡æˆ–æŸä¸€ç¾¤ç”¨æˆ·ä¸“ç”¨çš„é€šä¿¡ç½‘ç»œã€‚</li></ul></li><li>å±‚æ¬¡åè®®ï¼š<ul><li>äºŒå±‚ï¼šL2TPå’ŒPPTPï¼ˆåŸºäºPPPï¼‰<ul><li><p>PPTP åªæ”¯æŒ TCP&#x2F;IP ç½‘ç»œä½“ç³» ï¼Œç½‘ç»œå±‚å¿…é¡»æ˜¯ IP åè®®ã€‚</p></li><li><p>L2TP å¯ä»¥è¿è¡Œåœ¨ IP åè®®ä¸Šï¼Œä¹Ÿå¯ä»¥åœ¨ X.25ã€å¸§ä¸­ç»§æˆ– ATM ç½‘ç»œä¸Šä½¿ç”¨ã€‚</p></li><li><p><strong>PPP åè®®</strong></p><ul><li>PPP åè®®åŒ…å«é“¾è·¯æ§åˆ¶åè®® LCP å’Œç½‘ç»œæ§åˆ¶åè®® NCP ã€‚</li><li>PPPåè®®å¯ä»¥åœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¸Šä¼ è¾“å¤šç§ä¸Šå±‚åè®®çš„æ•°æ®åŒ…ï¼Œ æœ‰æ ¡éªŒä½</li><li>PPPè®¤è¯æ–¹å¼<ul><li>PAPï¼šä¸¤æ¬¡æ¡æ‰‹éªŒè¯åè®®ï¼Œå£ä»¤æ˜æ–‡ä¼ é€ï¼Œè¢«éªŒè¯æ”¾é¦–å…ˆå‘èµ·è¯·æ±‚</li><li>CHAPï¼šä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸ä¼ é€è®¤è¯å£ä»¤ï¼Œä¼ é€HMACæ•£åˆ—å€¼<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.7w6runamrq.jpg" alt="image"></li></ul></li></ul></li></ul></li><li>ä¸‰å±‚ï¼šIPSecå’ŒGRE</li><li>å››å±‚ï¼šSSL&#x2F;TLS</li></ul></li><li>å…³é”®æŠ€æœ¯ï¼š<ul><li>éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰</li><li>åŠ è§£å¯†æŠ€æœ¯ï¼ˆEncryption &amp; Decryptionï¼‰</li><li>å¯†é’¥ç®¡ç†æŠ€æœ¯ï¼ˆKey Managementï¼‰</li><li>èº«ä»½è®¤è¯æŠ€æœ¯ï¼ˆAuthenticationï¼‰</li></ul></li></ul></li><li><p>å®ç°æ€»åˆ†æœºæ„äº’è”ï¼Œå¸¸ç”¨IPSec</p></li><li><p>Access&#x2F; Rmote VPN:å®ç°ç”¨æˆ·è¿œç¨‹æ¥å…¥æ¯”å¦‚ï¼Œå‡ºå·®æ‹¨å·è®¿é—®å†…ç½‘ï¼Œå¸¸ç”¨SSL</p></li><li><p><strong>IPSecåŸç†</strong></p><ul><li>IPSecåŠŸèƒ½åˆ†ç±»<ul><li>è®¤è¯å¤´ï¼ˆAHï¼‰<ul><li>æä¾›æ•°æ®å®Œæ•´æ€§å’Œæ•°æ®æºè®¤è¯</li><li>ä¸æä¾›æ•°æ®ä¿å¯†æœåŠ¡</li><li>å®ç°ç®—æ³•ï¼šMD5ã€SHA</li></ul></li><li>å°è£…å®‰å…¨è´Ÿè·ï¼ˆESPï¼‰<ul><li>æä¾›æ•°æ®åŠ å¯†åŠŸèƒ½</li><li>åŠ å¯†ç®—æ³•ï¼šDESã€3DESã€AESç­‰</li></ul></li><li>Internetå¯†é’¥äº¤æ¢åè®®ï¼ˆIKEï¼‰<ul><li>ç”¨äºç”Ÿæˆå’Œåˆ†å‘åœ¨ESPå’ŒAHä¸­ä½¿ç”¨çš„å¯†é’¥</li></ul></li></ul></li><li>IPSecåè®®åŠŸèƒ½è¡¨| IPSecåè®® | åŠŸèƒ½               | ä»£è¡¨åè®®       |<br>| â€”â€”â€” | â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€“ |<br>| AH        | æ•°æ®å®Œæ•´æ€§å’Œæºè®¤è¯ | MD5ã€SHA       |<br>| ESP       | æ•°æ®åŠ å¯†           | DESã€3DESã€AES |<br>| IKE       | å¯†é’¥ç”Ÿæˆå’Œåˆ†å‘     | DH             |</li></ul></li><li><p><strong>IPSecä¸¤ç§å°è£…æ¨¡å¼</strong><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240911/image.839zq31mld.jpg" alt="image"></p></li></ul><h3 id="SSLä¸HTTPS"><a href="#SSLä¸HTTPS" class="headerlink" title="SSLä¸HTTPS"></a>SSLä¸HTTPS</h3><ul><li><p>å®‰å…¨å¥—æ¥å±‚ï¼ˆSSLï¼‰</p><ul><li>å¼€å‘èƒŒæ™¯<ul><li>ç”±Netscapeäº1994å¹´å¼€å‘</li><li>ç”¨äºå®ç°Webå®‰å…¨é€šä¿¡çš„ä¼ è¾“å±‚å®‰å…¨åè®®</li></ul></li><li>æ¼”è¿›<ul><li>1999å¹´ï¼ŒIETFåŸºäºSSL 3.0ç‰ˆæœ¬ï¼Œåˆ¶å®šäº†ä¼ è¾“å±‚å®‰å…¨æ ‡å‡†TLSï¼ˆTransport Layer Securityï¼‰</li></ul></li><li>ä¸TLSçš„å…³ç³»<ul><li>SSLä¸TLSæœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªåè®®</li><li>åŒºåˆ«åœ¨äºåˆ¶å®šæ ‡å‡†çš„æœºæ„ä¸åŒ</li></ul></li><li>åº”ç”¨<ul><li>åœ¨Webå®‰å…¨é€šä¿¡ä¸­ï¼ŒSSL&#x2F;TLSè¢«ç§°ä¸ºHTTPS&#x3D;HTTP+SSL</li></ul></li><li>ç»„æˆéƒ¨åˆ†<ul><li>è®°å½•åè®®</li><li>è­¦å‘Šåè®®</li><li>æ¡æ‰‹åè®®<ul><li>ç”¨äºåå•†å‚æ•°</li></ul></li></ul></li></ul></li><li><p>HTTPSä¸S-HTTPæ¦‚è¿°</p><ul><li>HTTPS<ul><li>å®šä¹‰ï¼šHTTPS &#x3D; HTTP + SSL&#x2F;TLS</li><li>ç«¯å£ï¼šTCP 443</li></ul></li><li>S-HTTP<ul><li>å®šä¹‰ï¼šå®‰å…¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆSecurity HTTPï¼‰</li><li>ç«¯å£ï¼šTCP 80</li><li>ç‰¹ç‚¹ï¼šè¯­æ³•ä¸HTTPç›¸åŒï¼Œä½†æŠ¥æ–‡å¤´è¿›è¡Œäº†åŠ å¯†</li></ul></li></ul></li><li><p>HTTPSåè®®æ ˆ</p><ul><li>åè®®ç»„æˆ| å±‚çº§   | åè®®           |<br>| â€”â€” | â€”â€”â€”â€”â€“ |<br>| åº”ç”¨å±‚ | SSL&#x2F;TLS        |<br>| ä¼ è¾“å±‚ | TCPï¼ˆç«¯å£443ï¼‰ |<br>| ç½‘ç»œå±‚ | IPï¼ˆåè®®å·6ï¼‰  |</li></ul></li><li><p>S-HTTPåè®®æ ˆ</p><ul><li>åè®®ç»„æˆ| å±‚çº§   | åè®®          |<br>| â€”â€” | â€”â€”â€”â€”- |<br>| åº”ç”¨å±‚ | S-HTTP        |<br>| ä¼ è¾“å±‚ | TCPï¼ˆç«¯å£80ï¼‰ |<br>| ç½‘ç»œå±‚ | IPï¼ˆåè®®å·6ï¼‰ |</li></ul></li></ul><h3 id="PGP"><a href="#PGP" class="headerlink" title="PGP"></a>PGP</h3><ul><li><p>PGPï¼ˆPretty Good Privacyï¼‰æ¦‚è¿°</p><ul><li>å®šä¹‰ï¼šä¸€ä¸ªå®Œæ•´çš„ç”µå­é‚®ä»¶å®‰å…¨è½¯ä»¶åŒ…</li><li>æœåŠ¡ï¼š<ul><li>æ•°æ®åŠ å¯†</li><li>æ•°å­—ç­¾å</li></ul></li><li>æŠ€æœ¯ç»†èŠ‚ï¼š<ul><li>èº«ä»½éªŒè¯ï¼šé‡‡ç”¨RSAå…¬é’¥è¯ä¹¦</li><li>æ•°æ®åŠ å¯†ï¼šä½¿ç”¨IDEAç®—æ³•</li><li>æ•°æ®å®Œæ•´æ€§éªŒè¯ï¼šä½¿ç”¨MD5ç®—æ³•</li></ul></li></ul></li><li><p>PGPåº”ç”¨å¹¿æ³›çš„åŸå› </p><ul><li>å¤šå¹³å°æ”¯æŒï¼šåœ¨Windowsã€Linuxã€MacOSä¸Šå…è´¹ä½¿ç”¨</li><li>å‚å•†æ”¯æŒï¼šå¾—åˆ°è®¸å¤šå‚å•†çš„æ”¯æŒ</li><li>å®‰å…¨ç®—æ³•ï¼šåŸºäºæ¯”è¾ƒå®‰å…¨çš„ç®—æ³•ï¼ˆRSA, IDEA, MD5ï¼‰</li><li>åº”ç”¨èŒƒå›´ï¼š<ul><li>å¯ä»¥åŠ å¯†æ–‡ä»¶å’Œç”µå­é‚®ä»¶</li><li>é€‚ç”¨äºä¸ªäººé€šä¿¡</li><li>å¯ä»¥é›†æˆåˆ°åº”ç”¨ä¸­ä½¿ç”¨PGP</li></ul></li></ul></li></ul><h3 id="å…¶ä»–åº”ç”¨å±‚å®‰å…¨åè®®"><a href="#å…¶ä»–åº”ç”¨å±‚å®‰å…¨åè®®" class="headerlink" title="å…¶ä»–åº”ç”¨å±‚å®‰å…¨åè®®"></a>å…¶ä»–åº”ç”¨å±‚å®‰å…¨åè®®</h3><ul><li><strong>S&#x2F;MIME (Security&#x2F; Multipurpose Internet Mail Extensions)</strong><ul><li>æä¾›ç”µå­é‚®ä»¶å®‰å…¨æœåŠ¡ã€‚</li></ul></li><li>æ³¨æ„ï¼šS&#x2F;MIMEä¸ç­‰äºMIMEï¼ŒS&#x2F;MIMEæ˜¯ä¸€ç§ç”µå­é‚®ä»¶å®‰å…¨åè®®ï¼Œè€ŒMIMEæ˜¯ä¸€ç§å¤šç”¨é€”ç½‘é™…é‚®ä»¶æ‰©å±•åè®®ï¼Œä¸å®‰å…¨æ— å…³ã€‚</li><li><strong>SET (Secure Electronic Transation)</strong><ul><li>å®‰å…¨çš„ç”µå­äº¤æ˜“ï¼Œç”¨äºä¿éšœç”µå­å•†åŠ¡å®‰å…¨ã€‚</li></ul></li></ul><h3 id="é˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹"><a href="#é˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹" class="headerlink" title="é˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹"></a>é˜²ç«å¢™ä¸å…¥ä¾µæ£€æµ‹</h3><p><strong>å®šä¹‰</strong></p><p>é˜²ç«å¢™æ˜¯ä½äºè®¡ç®—æœºä¸æ‰€è¿æ¥ç½‘ç»œä¹‹é—´çš„è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œç”¨äºä¿æŠ¤ç½‘ç»œå…å—æœªç»æˆæƒçš„è®¿é—®å’Œæ¶æ„æ”»å‡»ã€‚</p><p><strong>åˆ†ç±»</strong></p><ul><li><strong>æŒ‰å½¢æ€</strong><ul><li>è½¯ä»¶é˜²ç«å¢™ï¼šè¿è¡Œäºé€šç”¨æ“ä½œç³»ç»Ÿã€‚</li><li>ç¡¬ä»¶é˜²ç«å¢™ï¼šæœ‰ä¸“ç”¨ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿã€‚</li></ul></li><li><strong>æŒ‰æŠ€æœ¯</strong><ul><li>åŒ…è¿‡æ»¤é˜²ç«å¢™ï¼šä¾æ•°æ®åŒ…ä¿¡æ¯è¿‡æ»¤ã€‚</li><li>çŠ¶æ€æ£€æµ‹é˜²ç«å¢™ï¼šå¢åŠ è¿æ¥çŠ¶æ€æ£€æµ‹ã€‚</li><li>åº”ç”¨å±‚é˜²ç«å¢™ï¼šæ·±åº¦æ£€æµ‹åº”ç”¨å±‚åè®®ã€‚</li></ul></li></ul><p><strong>å·¥ä½œæ¨¡å¼</strong></p><ul><li>è·¯ç”±æ¨¡å¼ï¼šå……å½“è·¯ç”±å™¨ï¼Œè¿›è¡Œæ•°æ®åŒ…è·¯ç”±è½¬å‘ã€‚</li><li>é€æ˜æ¨¡å¼ï¼šå¯¹ç½‘ç»œè®¾å¤‡â€œé€æ˜â€ï¼Œä¸æ”¹å˜æ‹“æ‰‘å’Œ IP åœ°å€ã€‚</li><li>æ··åˆæ¨¡å¼ï¼šæ”¯æŒè·¯ç”±å’Œé€æ˜æ¨¡å¼ï¼ŒæŒ‰éœ€åˆ‡æ¢ã€‚</li></ul><h4 id="é˜²ç«å¢™åŒºåŸŸåˆ’åˆ†"><a href="#é˜²ç«å¢™åŒºåŸŸåˆ’åˆ†" class="headerlink" title="é˜²ç«å¢™åŒºåŸŸåˆ’åˆ†"></a>é˜²ç«å¢™åŒºåŸŸåˆ’åˆ†</h4><table><thead><tr><th>å®‰å…¨åŒºåŸŸ</th><th>å®‰å…¨çº§åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æœ¬åœ°åŒºåŸŸLocal</td><td>100</td><td>è®¾å¤‡æœ¬èº«ï¼ŒåŒ…æ‹¬è®¾å¤‡çš„å„æ¥å£æœ¬èº«ã€‚</td></tr><tr><td>ä¿¡ä»»åŒºåŸŸTrust</td><td>85</td><td>é€šå¸¸ç”¨äºå®šä¹‰å†…ç½‘ç»ˆç«¯ç”¨æˆ·æ‰€åœ¨åŒºåŸŸã€‚</td></tr><tr><td>å†›äº‹ç¼“å†²åŒºåŸŸDMZ</td><td>50</td><td>é€šå¸¸ç”¨äºå®šä¹‰å†…ç½‘æœåŠ¡å™¨æ‰€åœ¨åŒºåŸŸã€‚</td></tr><tr><td>éä¿¡ä»»åŒºåŸŸUntrust</td><td>5</td><td>é€šå¸¸ç”¨äºå®šä¹‰Internetç­‰ä¸å®‰å…¨çš„ç½‘ç»œã€‚</td></tr></tbody></table><h4 id="å…¥ä¾µæ£€æµ‹IDSå’Œå…¥ä¾µé˜²å¾¡IPS"><a href="#å…¥ä¾µæ£€æµ‹IDSå’Œå…¥ä¾µé˜²å¾¡IPS" class="headerlink" title="å…¥ä¾µæ£€æµ‹IDSå’Œå…¥ä¾µé˜²å¾¡IPS"></a>å…¥ä¾µæ£€æµ‹IDSå’Œå…¥ä¾µé˜²å¾¡IPS</h4><p>å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIntrusion Detection Systemï¼ŒIDSï¼‰æ˜¯ä¸€ç§ç½‘ç»œå®‰å…¨è®¾å¤‡ï¼Œå®ƒèƒ½å¤Ÿç›‘è§†ç½‘ç»œæµé‡ï¼Œæ£€æµ‹å¼‚å¸¸è¡Œä¸ºï¼Œå¹¶å‘ç®¡ç†å‘˜æŠ¥å‘Šã€‚</p><ul><li>å…¥ä¾µæ£€æµ‹åˆ†ç±»<ul><li>æŒ‰ä¿¡æ¯æ¥æºåˆ†<ul><li>HIDSï¼ˆä¸»æœºå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰</li><li>NIDSï¼ˆç½‘ç»œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰</li><li>DIDSï¼ˆåˆ†å¸ƒå¼å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰</li></ul></li><li>æŒ‰å“åº”æ–¹å¼åˆ†<ul><li>å®æ—¶æ£€æµ‹</li><li>éå®æ—¶æ£€æµ‹</li></ul></li><li>æŒ‰æ•°æ®åˆ†ææŠ€æœ¯å’Œå¤„ç†æ–¹å¼åˆ†<ul><li>å¼‚å¸¸æ£€æµ‹<ul><li>å»ºç«‹å¹¶ä¸æ–­æ›´æ–°å’Œç»´æŠ¤ç³»ç»Ÿæ­£å¸¸è¡Œä¸ºçš„è½®å»“</li><li>å®šä¹‰æŠ¥è­¦é˜ˆå€¼ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™æŠ¥è­¦</li><li>èƒ½å¤Ÿæ£€æµ‹ä»æœªå‡ºç°çš„æ”»å‡»ï¼Œä½†è¯¯æŠ¥ç‡é«˜</li></ul></li><li>è¯¯ç”¨æ£€æµ‹<ul><li>å¯¹å·²çŸ¥çš„å…¥ä¾µè¡Œä¸ºç‰¹å¾è¿›è¡Œæå–ï¼Œå½¢æˆå…¥ä¾µæ¨¡å¼åº“</li><li>åŒ¹é…åˆ™è¿›è¡ŒæŠ¥è­¦</li><li>å·²çŸ¥å…¥ä¾µæ£€æµ‹å‡†ç¡®ç‡é«˜ï¼Œå¯¹äºæœªçŸ¥å…¥ä¾µæ£€æµ‹å‡†ç¡®ç‡ä½ï¼Œé«˜åº¦ä¾èµ–ç‰¹å¾åº“</li><li>æ£€æµ‹æŠ€æœ¯ï¼šä¸“å®¶ç³»ç»Ÿå’Œæ¨¡å¼åŒ¹é…</li></ul></li></ul></li></ul></li><li>å…¥ä¾µæ£€æµ‹ä¸‰ç§å¸¸ç”¨åˆ†ææ–¹æ³•<ul><li>æ¨¡å¼åŒ¹é…</li><li>ç»Ÿè®¡åˆ†æ</li><li>æ•°æ®å®Œæ•´æ€§åˆ†æ</li></ul></li><li>å…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼ˆIntrusion Prevention Systemï¼ŒIPSï¼‰<ul><li>å®šä¹‰ï¼šä¸€ç§å…ˆè¿›çš„ç½‘ç»œå®‰å…¨æ£€æµ‹å’Œé˜²å¾¡ç³»ç»Ÿ</li><li>åŠŸèƒ½ï¼š<ul><li>èƒ½å¤Ÿæ£€æµ‹å‡ºæ”»å‡»å¹¶ç§¯æå“åº”</li><li>å…·æœ‰å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIDSï¼‰æ£€æµ‹æ”»å‡»è¡Œä¸ºçš„èƒ½åŠ›</li><li>å…·æœ‰æ‹¦æˆªæ”»å‡»å¹¶é˜»æ–­æ”»å‡»çš„åŠŸèƒ½</li></ul></li><li>ç‰¹ç‚¹ï¼š<ul><li>ä¸ä»…ä»…æ˜¯IDSå’Œé˜²ç«å¢™åŠŸèƒ½çš„ç®€å•ç»„åˆ</li><li>åœ¨æ”»å‡»å“åº”ä¸Šé‡‡å–ä¸»åŠ¨çš„ã€å…¨é¢çš„ã€æ·±å±‚æ¬¡çš„é˜²å¾¡æªæ–½<br><strong>IPSå’ŒIDS</strong>| ç‰¹æ€§         | IPSï¼ˆå…¥ä¾µé˜²å¾¡ç³»ç»Ÿï¼‰      | IDSï¼ˆå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰        |<br>| â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€“ |<br>| éƒ¨ç½²ä½ç½®     | ä¸€èˆ¬ä¸²è¡Œéƒ¨ç½²             | ä¸€èˆ¬æ—è·¯éƒ¨ç½²               |<br>| å…¥ä¾µå“åº”èƒ½åŠ› | èƒ½æ£€æµ‹å…¥ä¾µï¼Œå¹¶èƒ½ä¸»åŠ¨é˜²å¾¡ | åªèƒ½æ£€æµ‹è®°å½•æ—¥å¿—ï¼Œå‘å‡ºè­¦æŠ¥ |</li></ul></li></ul></li></ul><h3 id="è®¡ç®—æœºç—…æ¯’ä¸é˜²æŠ¤"><a href="#è®¡ç®—æœºç—…æ¯’ä¸é˜²æŠ¤" class="headerlink" title="è®¡ç®—æœºç—…æ¯’ä¸é˜²æŠ¤"></a>è®¡ç®—æœºç—…æ¯’ä¸é˜²æŠ¤</h3><ul><li><p>è®¡ç®—æœºç—…æ¯’</p><ul><li>å®šä¹‰ï¼šä¸€æ®µå¯æ‰§è¡Œçš„ç¨‹åºä»£ç ï¼Œé€šè¿‡å…¶ä»–å¯æ‰§è¡Œç¨‹åºå¯åŠ¨å’Œæ„ŸæŸ“ä¼ æ’­ã€‚</li><li>ç‰¹æ€§ï¼š<ul><li>å¯è‡ªæˆ‘å¤åˆ¶ã€‚</li><li>éš¾ä»¥æ¸…é™¤ã€‚</li><li>ç ´åæ€§å¼ºã€‚</li></ul></li></ul></li><li><p>æœ¨é©¬</p><ul><li>å®šä¹‰ï¼šä¸€ç§æ½œä¼åœ¨è®¡ç®—æœºé‡Œå¹¶ä¸”ç§˜å¯†å¼€æ”¾ä¸€ä¸ªç”šè‡³å¤šä¸ªæ•°æ®ä¼ è¾“é€šé“çš„è¿œç¨‹æ§åˆ¶ç¨‹åºã€‚</li><li>ç»“æ„ï¼šC&#x2F;Sç»“æ„ï¼Œå®¢æˆ·ç«¯ä¹Ÿç§°ä¸ºæ§åˆ¶ç«¯ã€‚</li><li>åŠŸèƒ½ï¼šå·å·ç›—å–è´¦å·ã€å¯†ç ç­‰ä¿¡æ¯ï¼ˆé—´è°ï¼‰ã€‚</li></ul></li><li><p>æ¶æ„ä»£ç </p><ul><li>å®šä¹‰ï¼šæ¶æ„è½¯ä»¶ï¼Œæ²¡æœ‰ä½œç”¨å´å¸¦æ¥å±é™©ï¼ˆæ¶æï¼‰ã€‚</li></ul></li><li><p>æ–‡ä»¶å®ç—…æ¯’</p><ul><li>ç±»å‹ï¼šæ„ŸæŸ“Officeæ–‡ä»¶ã€‚</li><li>ç‰¹å¾ï¼šå‰ç¼€Macroæˆ–è€…word&#x2F;excelç­‰ã€‚</li></ul></li><li><p>å¸¸è§ç—…æ¯’ç±»å‹</p><ul><li>è •è™«ç—…æ¯’ï¼šå‰ç¼€Wormï¼Œé€šè¿‡ç³»ç»Ÿæ¼æ´ä¼ æ’­ã€‚</li><li>æœ¨é©¬ç—…æ¯’ï¼šå‰ç¼€Trojanï¼Œé»‘å®¢ç—…æ¯’å‰ç¼€Hackï¼Œå¾€å¾€æˆå¯¹å‡ºç°ã€‚</li><li>ç³»ç»Ÿç—…æ¯’ï¼šå‰ç¼€Win32ã€PEã€Win95ç­‰ã€‚</li><li>è„šæœ¬ç—…æ¯’ï¼šå‰ç¼€Scriptï¼Œè„šæœ¬è¯­è¨€ç¼–å†™çš„ï¼Œé€šè¿‡ç½‘é¡µä¼ æ’­ã€‚</li></ul></li></ul><table><thead><tr><th>ç—…æ¯’ç±»å‹</th><th>å…³é”®å­—</th><th>ç‰¹å¾</th><th>ä»£è¡¨</th></tr></thead><tbody><tr><td>ç³»ç»Ÿç—…æ¯’</td><td>å‰ç¼€ä¸ºwin32, win95, PE, W32, W95ç­‰</td><td>æ„ŸæŸ“Windowsç³»ç»Ÿçš„exeæˆ–dllæ–‡ä»¶ï¼Œå¹¶é€šè¿‡è¿™äº›æ–‡ä»¶è¿›è¡Œä¼ æ’­</td><td>CIHç—…æ¯’</td></tr><tr><td>è •è™«ç—…æ¯’</td><td>å‰ç¼€ä¸ºworm</td><td>é€šè¿‡ç½‘ç»œæˆ–ç³»ç»Ÿæ¼æ´è¿›è¡Œä¼ æ’­ï¼Œå¯ä»¥å‘å¤–å‘é€å¸¦æ¯’é‚®ä»¶æˆ–é˜»å¡ç½‘ç»œ</td><td>å†²å‡»æ³¢ï¼ˆé˜»å¡ç½‘ç»œï¼‰ã€å°é‚®å·®ç—…æ¯’ï¼ˆå‘é€å¸¦æ¯’é‚®ä»¶ï¼‰</td></tr><tr><td>æœ¨é©¬ç—…æ¯’å’Œé»‘å®¢ç—…æ¯’</td><td>æœ¨é©¬å‰ç¼€ä¸ºTrojan, é»‘å®¢ç—…æ¯’å‰ç¼€ä¸ºHack</td><td>é€šè¿‡ç½‘ç»œæˆ–æ¼æ´è¿›å…¥ç³»ç»Ÿå¹¶éšè—èµ·æ¥ï¼Œæœ¨é©¬è´Ÿè´£å…¥ä¾µç”¨æˆ·è®¡ç®—æœºï¼Œé»‘å®¢é€šè¿‡æœ¨é©¬è¿›è¡Œè¿œç¨‹æ§åˆ¶</td><td>æ¸¸æˆæœ¨é©¬Trojan.Lmir.PSW60</td></tr><tr><td>è„šæœ¬ç—…æ¯’</td><td>å‰ç¼€æ˜¯Script</td><td>ä½¿ç”¨è„šæœ¬è¯­è¨€ç¼–å†™ï¼Œé€šè¿‡ç½‘é¡µè¿›è¡Œä¼ æ’­</td><td>æ¬¢ä¹æ—¶å…‰ç—…æ¯’VBS.Happtimeã€çº¢è‰²ä»£ç Script.Redlof</td></tr><tr><td>å®ç—…æ¯’</td><td>å‰ç¼€æ˜¯Macro</td><td>ç‰¹æ®Šè„šæœ¬ç—…æ¯’ï¼Œæ„ŸæŸ“Wordå’ŒExcel</td><td>Macro.Word97</td></tr><tr><td>åé—¨ç—…æ¯’</td><td>å‰ç¼€ä¸ºBackdoor</td><td>é€šè¿‡ç½‘ç»œä¼ æ’­ï¼Œç»™ç³»ç»Ÿå¼€åé—¨ï¼Œç»™ç”¨æˆ·è®¡ç®—æœºå¸¦æ¥å®‰å…¨éšæ‚£</td><td>å…¥ä¾µåæ·»åŠ éšè—è´¦å·</td></tr><tr><td>ç ´åæ€§ç¨‹åºç—…æ¯’</td><td>å‰ç¼€ä¸ºHarm</td><td>æœ¬èº«å…·æœ‰å¥½çœ‹çš„å›¾æ ‡æ¥è¯±æƒ‘ç”¨æˆ·ç‚¹å‡»ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ï¼Œå¯¹è®¡ç®—æœºäº§ç”Ÿç ´å</td><td>ç†ŠçŒ«çƒ§é¦™</td></tr><tr><td>æ†ç»‘æœºç—…æ¯’</td><td>å‰ç¼€ä¸ºBinder</td><td>å°†ç‰¹å®šç¨‹åºæ†ç»‘ä¸‹è½½</td><td>ä¸‹è½½å¤§ç¤¼åŒ…æˆ–æŸäº›è½¯ä»¶æ†ç»‘ç—…æ¯’</td></tr></tbody></table><h2 id="ç¬¬9ç« -ç½‘ç»œæ“ä½œç³»ç»Ÿä¸åº”ç”¨æœåŠ¡å™¨"><a href="#ç¬¬9ç« -ç½‘ç»œæ“ä½œç³»ç»Ÿä¸åº”ç”¨æœåŠ¡å™¨" class="headerlink" title="ç¬¬9ç«  ç½‘ç»œæ“ä½œç³»ç»Ÿä¸åº”ç”¨æœåŠ¡å™¨"></a>ç¬¬9ç«  ç½‘ç»œæ“ä½œç³»ç»Ÿä¸åº”ç”¨æœåŠ¡å™¨</h2><h3 id="indowsäº”ç§èº«ä»½è®¤è¯"><a href="#indowsäº”ç§èº«ä»½è®¤è¯" class="headerlink" title="indowsäº”ç§èº«ä»½è®¤è¯"></a>indowsäº”ç§èº«ä»½è®¤è¯</h3><ul><li>åŒ¿åè®¤è¯ï¼šä¸éœ€è¦æä¾›ç»è¿‡èº«ä»½è®¤è¯çš„ç”¨æˆ·å‡­è¯</li><li>åŸºæœ¬èº«ä»½è®¤è¯ï¼šç”¨æˆ·å¿…é¡»è¾“å…¥ID,è®¿é—®æ˜¯åŸºæœ¬ç”¨æˆ·IDçš„ï¼Œä½†è¯¥æ–¹å¼çš„ç”¨æˆ·IDå’Œå¯†ç ä»¥æ˜æ–‡å½¢å¼åœ¨ç½‘ç»œä¸Šä¼ è¾“</li><li>é›†æˆwindowsèº«ä»½éªŒè¯ï¼šä½¿ç”¨äº†KerberosV5ï¼Œ<strong>èƒ½å¤Ÿæä¾›è¾ƒé«˜çš„å®‰å…¨çº§åˆ«</strong></li><li>æ‘˜è¦èº«ä»½éªŒè¯ï¼šè¯¥æ–¹å¼éœ€è¦ç”¨æˆ·IDå’Œå¯†ç ï¼Œå¯æä¾›ä¸­ç­‰å®‰å…¨çº§åˆ«ï¼Œä¸åŸºæœ¬èº«ä»½éªŒè¯ç›¸åŒï¼Œä½†å…‹æœå¯åŸºæœ¬èº«ä»½éªŒè¯çš„ç¼ºç‚¹</li></ul><h3 id="æœ¬åœ°ç”¨æˆ·ä¸ç»„"><a href="#æœ¬åœ°ç”¨æˆ·ä¸ç»„" class="headerlink" title="æœ¬åœ°ç”¨æˆ·ä¸ç»„"></a>æœ¬åœ°ç”¨æˆ·ä¸ç»„</h3><p><strong>ç”¨æˆ·</strong>ï¼š</p><ul><li>åŒ…å«ç”¨æˆ·åã€å¯†ç ã€æƒé™ä»¥åŠè¯´æ˜ã€‚</li></ul><p><strong>ç”¨æˆ·ç»„</strong>ï¼š</p><ul><li>å…·æœ‰ç›¸åŒæ€§è´¨çš„ç”¨æˆ·å½’ç»“åœ¨ä¸€èµ· ï¼Œç»Ÿä¸€æˆæƒï¼Œç»„æˆç”¨æˆ·ç»„ã€‚</li></ul><p><strong>åˆ›å»ºç”¨æˆ·å’Œç»„</strong>ï¼š</p><ul><li><p>æˆ‘çš„ç”µè„‘ - å³é”® - ç®¡ç† - è®¡ç®—æœºç®¡ç† - æœ¬åœ°ç”¨æˆ·å’Œç»„ ï¼ˆæœ¬åœ°ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ° SAM æ•°æ®åº“ï¼‰</p></li><li><p>å¸¸è§ç”¨æˆ·ç»„ä¸æƒé™</p><ul><li>Administrators<ul><li>å…·æœ‰å®Œå…¨æ§åˆ¶æƒé™ï¼Œå¹¶ä¸”å¯ä»¥å‘å…¶ä»–ç”¨æˆ·åˆ†é…ç”¨æˆ·æƒåˆ©é¢è®¿é—®æ§åˆ¶æƒé™</li></ul></li><li>Backup Operators<ul><li>åŠ å…¥è¯¥ç»„çš„æˆå‘˜å¯ä»¥å¤‡ä»½å’Œè¿˜åŸæœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æ–‡ä»¶</li></ul></li><li>Users<ul><li>æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥æ‰§è¡Œä¸€äº›å¸¸è§ä»»åŠ¡ï¼Œä¾‹å¦‚è¿è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨æ‰“å°æœºç­‰</li><li>ç”¨æˆ·ä¸èƒ½å…±äº«æ–‡ä»¶å¤¹æˆ–åˆ›å»ºæœ¬åœ°æ‰“å°æœº</li><li>å…·æœ‰åˆ›å»ºç”¨æˆ·è´¦æˆ·å’Œç»„è´¦æˆ·çš„æƒåˆ©ï¼Œä½†ä¸èƒ½ç®¡ç†Administratorsç»„æˆå‘˜</li></ul></li><li>Power Users<ul><li>å¯ä»¥åˆ›å»ºå’Œç®¡ç†å…±äº«èµ„æº</li></ul></li><li>Remote Desktop Users<ul><li>æ­¤ç»„ä¸­çš„æˆå‘˜è¢«æˆäºˆè¿œç¨‹ç™»å½•çš„æƒé™</li></ul></li><li>Guests<ul><li>æ‹¥æœ‰ä¸€ä¸ªç™»å½•æ—¶åˆ›å»ºçš„ä¸´æ—¶é…ç½®æ–‡ä»¶ï¼Œåœ¨æ³¨é”€æ—¶è¯¥é…ç½®æ–‡ä»¶å°†è¢«åˆ é™¤</li></ul></li><li>Network Configuration Operators<ul><li>å¯ä»¥æ›´æ”¹TCP&#x2F;IPè®¾ç½®å¹¶æ›´æ–°å’Œå‘å¸ƒTCP&#x2F;IPåœ°å€</li></ul></li><li>Print Operators<ul><li>å¯ä»¥ç®¡ç†æ‰“å°æœº</li></ul></li><li>æƒé™é¡ºåºç”±é«˜åˆ°ä½ï¼šAdministrator &gt; Power users &gt; Users &gt; Everyone</li></ul></li></ul><h3 id="æ´»åŠ¨ç›®å½•"><a href="#æ´»åŠ¨ç›®å½•" class="headerlink" title="æ´»åŠ¨ç›®å½•"></a>æ´»åŠ¨ç›®å½•</h3><ul><li><p>ç½‘ç»œä¸­è®¡ç®—æœºé€»è¾‘ç»„ç»‡çš„ä¸¤ç§æ¨¡å¼</p><ul><li><strong>å·¥ä½œç»„æ¨¡å¼</strong>è‡ªç”±æ°‘ä¸»<ul><li>æ¯å°è®¡ç®—æœºéƒ½æ‹¥æœ‰è‡ªå·±çš„ <strong>æœ¬åœ°å®‰å…¨è´¦æˆ·ç®¡ç†æ•°æ®åº“ï¼ˆSAMï¼‰</strong>ã€‚</li></ul></li><li><strong>åŸŸæ¨¡å¼</strong>é›†æƒä¸“åˆ¶<ul><li><strong>ç”¨æˆ·ä¿¡æ¯</strong> å­˜å‚¨åœ¨ <strong>åŸŸæ§åˆ¶å™¨</strong>ã€‚</li><li>ç”¨æˆ·å¯ä»¥åœ¨ <strong>åŸŸä¸­æ¼«æ¸¸</strong>ï¼Œå³åœ¨åŸŸå†…çš„ä»»ä½•ä¸€å°è®¡ç®—æœºä¸Šä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·å‡­è¯ç™»å½•ã€‚</li><li>ç”¨æˆ·å¯ä»¥ <strong>è®¿é—®åŸŸä¸­ä»»æ„ä¸€å°æœåŠ¡å™¨ä¸Šçš„èµ„æº</strong>ã€‚</li></ul></li></ul></li><li><p><strong>æ´»åŠ¨ç›®å½•</strong>ï¼šå¯¹åŸŸä¸­çš„è´¦æˆ·å’Œèµ„æºå¯¹è±¡è¿›è¡Œå­˜æ”¾å¹¶é›†ä¸­ç®¡ç†ã€‚</p></li><li><p><strong>åŠ¨æ€åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼šåŒ…å«å­˜å‚¨ç½‘ç»œä¿¡æ¯çš„ç›®å½•ç»“æ„å’Œç›¸å…³ç›®å½•æœåŠ¡ã€‚</p></li><li><p><strong>åŸŸæ§åˆ¶å™¨ (Domain Controller, DC)</strong>ï¼šåŸŸä¸­å®‰è£…äº†æ´»åŠ¨ç›®å½•çš„è®¡ç®—æœºã€‚ä½¿ç”¨ <code>dcpromo</code> å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚</p></li><li><p><strong>ADå­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯</strong>ï¼š</p><ul><li>åˆ†æ•£åœ¨å¤šä¸ªDCã€‚</li><li>æ“ä½œç³»ç»Ÿå¯¹ä¿¡æ¯è¿›è¡Œå¤‡ä»½å’Œé€‰æ‹©æ€§å¤åˆ¶ã€‚</li><li>ç»´æŠ¤ä¿¡æ¯ä¸€è‡´æ€§ã€‚</li><li>æä¾›å®¹é”™èƒ½åŠ›ã€‚</li></ul></li><li><p><strong>æ´»åŠ¨ç›®å½•ä¸­å¯¹è±¡çš„åå­—</strong>ï¼š</p><ul><li>é‡‡ç”¨DNSåŸŸåç»“æ„ã€‚</li><li>å®‰è£…ADå¿…é¡»å…ˆå®‰è£…DNSç»„ä»¶ã€‚</li><li>å¿…é¡»å®‰è£…åœ¨NTFSåˆ†åŒºã€‚</li></ul></li><li><p><strong>å…¨å±€ç»„(G)</strong>: æ¥è‡ªæœ¬åœ°åŸŸï¼Œå¯æˆæƒè®¿é—®åŸŸæ—ä¸­çš„ä»»ä½•ä¿¡ä»»åŸŸã€‚</p></li><li><p><strong>åŸŸæœ¬åœ°ç»„(DL)</strong>: æ¥è‡ªä»»ä½•åŸŸï¼Œåªèƒ½è®¿é—®æœ¬åœ°åŸŸä¸­çš„èµ„æºã€‚</p></li><li><p><strong>é€šç”¨ç»„(U)</strong>: å¯æ¥è‡ªåŸŸæ—ä¸­çš„ä»»ä½•åŸŸï¼Œè®¿é—®æƒé™å¯ä»¥è¾¾åˆ°åŸŸæ—ä¸­çš„ä»»ä½•åŸŸã€‚</p></li><li><p><strong>ç»„ç­–ç•¥</strong>: è¦è®°ä½</p><ul><li><strong>A-G-DL-Pç­–ç•¥</strong></li><li><strong>A-G-G-DL-Pç­–ç•¥</strong></li><li><strong>A-G-DL-Pç­–ç•¥</strong>: å°†ç”¨æˆ·è´¦å·æ·»åŠ åˆ°å…¨å±€ç»„ä¸­ï¼Œå°†å…¨å±€ç»„æ·»åŠ åˆ°åŸŸæœ¬åœ°ç»„ä¸­ï¼Œç„¶åä¸ºåŸŸæœ¬åœ°ç»„åˆ†é…èµ„æºæƒé™ã€‚</li><li><strong>A</strong> è¡¨ç¤ºç”¨æˆ·è´¦å·</li><li><strong>G</strong> è¡¨ç¤ºå…¨å±€ç»„</li><li><strong>U</strong> è¡¨ç¤ºé€šç”¨ç»„</li><li><strong>DL</strong> è¡¨ç¤ºåŸŸæœ¬åœ°ç»„</li><li><strong>P</strong> è¡¨ç¤ºèµ„æºæƒé™</li></ul></li></ul><h3 id="è¿œç¨‹æ¡Œé¢ä¸SambaæœåŠ¡"><a href="#è¿œç¨‹æ¡Œé¢ä¸SambaæœåŠ¡" class="headerlink" title="è¿œç¨‹æ¡Œé¢ä¸SambaæœåŠ¡"></a>è¿œç¨‹æ¡Œé¢ä¸SambaæœåŠ¡</h3><p><strong>è¿œç¨‹æ¡Œé¢åè®®RDP</strong>ï¼ˆRemote Desktop Protocolï¼‰ï¼ŒåŸºäºTCPï¼Œç«¯å£3389ï¼Œå‘½ä»¤å¿«æ·é”®mstsc<br><strong>Samba</strong>å‘Windowså’ŒLinuxæä¾›å…±äº«æ–‡ä»¶å’Œæ‰“å°æœºæœåŠ¡ï¼Œå¯ä»¥å®ç°linuxå’Œwindowsä¹‹é—´çš„æ–‡ä»¶å…±äº«ã€‚</p><h3 id="IISæœåŠ¡å™¨-webä¸FTPæœåŠ¡å™¨"><a href="#IISæœåŠ¡å™¨-webä¸FTPæœåŠ¡å™¨" class="headerlink" title="IISæœåŠ¡å™¨(webä¸FTPæœåŠ¡å™¨)"></a>IISæœåŠ¡å™¨(webä¸FTPæœåŠ¡å™¨)</h3><ul><li>IISï¼ˆInternet Information Servicesï¼Œäº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼‰æ˜¯å¾®è½¯å¼€å‘çš„WebæœåŠ¡å™¨è½¯ä»¶ï¼Œå¯ä»¥ä¸ºç½‘ç»œæä¾›HTTPã€FTPã€SMTPç­‰æœåŠ¡ã€‚æ²¡æœ‰<strong>IMAP</strong>ã€<strong>POP3</strong>ã€‚</li><li>Apacheï¼Œé»˜è®¤webç«™ç‚¹æ ¹ç›®å½•æ˜¯&#x2F;var&#x2F;www&#x2F;htmlæˆ–&#x2F;home&#x2F;httpd,webæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶æ˜¯&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf<ul><li>è™šæ‹Ÿä¸»æœºï¼šåŸºäºIPã€åŸºäºç«¯å£ã€åŸºäºåå­—</li></ul></li><li>FTPæœåŠ¡å™¨ï¼šæ§åˆ¶ç«¯å£ï¼š21ï¼Œç«¯å£æ•°æ®20<ul><li>get ä¸‹è½½æ–‡ä»¶</li><li>put ä¸Šä¼ æ–‡ä»¶</li><li>bye é€€å‡º</li></ul></li></ul><h3 id="DNS-åŸŸåç³»ç»Ÿ"><a href="#DNS-åŸŸåç³»ç»Ÿ" class="headerlink" title="DNS (åŸŸåç³»ç»Ÿ)"></a>DNS (åŸŸåç³»ç»Ÿ)</h3><ul><li><p>DNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰æ˜¯å› ç‰¹ç½‘çš„ä¸€é¡¹æœåŠ¡ï¼Œå®ƒç”¨äºå°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ï¼Œå¹¶æä¾›å…¶ä»–ç›¸å…³æœåŠ¡ã€‚</p></li><li><p>DNS&#x2F;DHCPæœåŠ¡å™¨å¿…é¡»ä¸ºé™æ€IPåœ°å€ ï¼Œ è€ŒWeb&#x2F;FTPå‡å¯ä¸ºåŠ¨æ€IP(åŸŸå)ã€‚</p></li><li><p>æŸ¥çœ‹DNSæœåŠ¡å™¨åœ°å€ï¼šNslookup <a href="http://www.baidu.com/">www.baidu.com</a></p></li><li><p>linuxä¸­ï¼Œç”¨Bindæ¥æ­å»ºDNSæœåŠ¡å™¨ï¼Œé…ç½®æ–‡ä»¶åœ¨&#x2F;etc&#x2F;named.conf</p></li><li><p><strong>ä¸»åŸŸåæœåŠ¡å™¨</strong>ï¼š</p><ul><li>å…·æœ‰åŸŸåæ•°æ®åº“</li><li>ä¸€ä¸ªåŸŸæœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»åŸŸåæœåŠ¡å™¨</li><li>ç»´æŠ¤æœ¬åŒºåŸŸæ‰€æœ‰åŸŸåä¿¡æ¯</li></ul></li><li><p><strong>è¾…åŠ©åŸŸåæœåŠ¡å™¨</strong>ï¼š</p><ul><li>å…·æœ‰åŸŸåæ•°æ®åº“</li><li>ä¸»åŸŸåæœåŠ¡å™¨çš„å¤‡ä»½</li></ul></li><li><p><strong>ç¼“å­˜åŸŸåæœåŠ¡å™¨</strong>ï¼š</p><ul><li>è·å–è§£æç»“æœè€—æ—¶æœ€çŸ­</li><li>æ²¡æœ‰åŸŸåæ•°æ®åº“</li></ul></li><li><p><strong>è½¬å‘åŸŸåæœåŠ¡å™¨</strong>ï¼š</p><ul><li>å…·æœ‰åŸŸåæ•°æ®åº“</li><li>è´Ÿè´£éæœ¬åœ°å’Œç¼“å­˜ä¸­æ— æ³•æŸ¥åˆ°çš„åŸŸå</li></ul></li></ul><h4 id="6ç§è®°å½•"><a href="#6ç§è®°å½•" class="headerlink" title="6ç§è®°å½•"></a>6ç§è®°å½•</h4><table><thead><tr><th>è®°å½•ç±»å‹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>SOA</strong></td><td>SOAå«èµ·å§‹æˆæƒæœºæ„è®°å½•ï¼ŒSOAè®°å½•ç”¨äºè¡¨ç¤ºåœ¨ä¼—å¤š NSè®°å½•ä¸­å“ªä¸€å°æ˜¯ä¸»æœåŠ¡å™¨</td><td>SOAè®°å½•è¿˜è®¾ç½®ä¸€äº›æ•°æ®ç‰ˆæœ¬å’Œæ›´æ–°ä»¥åŠè¿‡æœŸæ—¶é—´çš„ä¿¡æ¯</td></tr><tr><td><strong>A</strong></td><td>æŠŠä¸»æœºåè§£æä¸ºIPåœ°å€</td><td><a href="http://www.test.com/">www.test.com</a> â†’ 1.1.1.1</td></tr><tr><td><strong>æŒ‡é’ˆ PTR</strong></td><td>åå‘æŸ¥è¯¢ï¼ŒæŠŠIPåœ°å€è§£æä¸ºä¸»æœºå</td><td>1.1.1.1 â†’ <a href="http://www.test.com/">www.test.com</a></td></tr><tr><td><strong>åå­—æœåŠ¡å™¨ NS</strong></td><td>ä¸ºä¸€ä¸ªåŸŸæŒ‡å®šæˆæƒåŸŸåæœåŠ¡å™¨ï¼Œè¯¥åŸŸçš„æ‰€æœ‰å­åŸŸä¹Ÿè¢«å§”æ´¾ç»™è¿™ä¸ªæœåŠ¡å™¨</td><td>æ¯”å¦‚æŸä¸ªåŒºåŸŸç”± ns1.domain.com è¿›è¡Œè§£æ</td></tr><tr><td><strong>é‚®ä»¶æœåŠ¡å™¨ MX</strong></td><td>æŒ‡æ˜åŒºåŸŸçš„é‚®ä»¶æœåŠ¡å™¨åŠä¼˜å…ˆçº§</td><td>å»ºç«‹ç”µå­é‚®ç®±æœåŠ¡ï¼Œéœ€è¦MXè®°å½•å°†æŒ‡å‘é‚®ä»¶æœåŠ¡å™¨åœ°å€</td></tr><tr><td><strong>åˆ«å CNAME</strong></td><td>æŒ‡å®šä¸»æœºåçš„åˆ«åï¼ŒæŠŠä¸»æœºåè§£æä¸ºå¦ä¸€ä¸ªä¸»æœºå</td><td><a href="http://www.test.com/">www.test.com</a> åˆ«åä¸º webserver12.test.com</td></tr></tbody></table><h4 id="DNSæŸ¥è¯¢æ–¹å¼"><a href="#DNSæŸ¥è¯¢æ–¹å¼" class="headerlink" title="DNSæŸ¥è¯¢æ–¹å¼"></a>DNSæŸ¥è¯¢æ–¹å¼</h4><ul><li>é€’å½’æŸ¥è¯¢ï¼šåŸŸåæœåŠ¡å™¨å¸®åŠ©ç”¨æˆ·è¿›è¡Œè§£æï¼ˆè€å¥½äººï¼‰</li><li>è¿­ä»£æŸ¥è¯¢ï¼šåŸŸåæœåŠ¡å™¨åå¤å¤šæ¬¡æŸ¥è¯¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€åç»“æœï¼ˆè¸¢çš®çƒï¼‰<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240919/image.92q3ew8y3v.png" alt="image"></li></ul><h4 id="DNSé…ç½®æ–‡ä»¶"><a href="#DNSé…ç½®æ–‡ä»¶" class="headerlink" title="DNSé…ç½®æ–‡ä»¶"></a>DNSé…ç½®æ–‡ä»¶</h4><ol><li><p><strong>&#x2F;etc&#x2F;resolv.conf</strong>: DNSæœåŠ¡å™¨é…ç½®æ–‡ä»¶</p><ul><li>åŒ…å«äº†<strong>ä¸»æœºçš„åŸŸåæœç´¢é¡ºåºå’ŒDNSæœåŠ¡å™¨åœ°å€</strong>ã€‚</li><li>å‘½ä»¤æŸ¥çœ‹å†…å®¹ï¼š<code>cat /etc/resolv.conf</code></li><li>ç¤ºä¾‹å†…å®¹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Generated by Network Manager</span><br><span class="line">nameserver 8.8.8.8    # Googleä¸»DNSæœåŠ¡å™¨</span><br><span class="line">nameserver 8.8.4.4    # Googleå¤‡ç”¨DNSæœåŠ¡å™¨</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>&#x2F;etc&#x2F;named.conf</strong>: <strong>DNSä¸»é…ç½®æ–‡ä»¶</strong></p><ul><li>å­˜æ”¾å„ç±»DNSè®°å½•ï¼Œæ¯”å¦‚Aè®°å½•ã€PTRè®°å½•ã€‚</li></ul></li><li><p><strong>&#x2F;etc&#x2F;hosts</strong>: æœ¬åœ°DNSè§£æç¼“å­˜</p><ul><li>åŒ…å«IPåœ°å€ã€ä¸»æœºåã€‚</li><li>Windowsç³»ç»Ÿä¸­ä½äºï¼š<code>C:\Windows\System32\drivers\etc\hosts</code></li><li>ç¤ºä¾‹å†…å®¹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 102.54.94.97 rhino.acme.com</span><br><span class="line"># 38.25.63.10 x.acme.com</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>&#x2F;etc&#x2F;host.conf</strong>: è§£æå™¨æŸ¥è¯¢é¡ºåºé…ç½®æ–‡ä»¶</p><ul><li>å‘½ä»¤æŸ¥çœ‹å†…å®¹ï¼š<code>vi /etc/host.conf</code></li><li>ç¤ºä¾‹é…ç½®ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">order hosts, bind</span><br><span class="line"># è¡¨ç¤ºå…ˆæŸ¥è¯¢æœ¬åœ°hostsæ–‡ä»¶,å¦‚æœæ²¡æœ‰ç»“æœ,å†å°è¯•æŸ¥æ‰¾BIND DNSæœåŠ¡å™¨ã€‚</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="DHCPæœåŠ¡å™¨"><a href="#DHCPæœåŠ¡å™¨" class="headerlink" title="DHCPæœåŠ¡å™¨"></a>DHCPæœåŠ¡å™¨</h3><ul><li>DHCPï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰æ˜¯ä¸€é¡¹å±€åŸŸç½‘æŠ€æœ¯ï¼Œå®ƒå…è®¸ä¸€å°è®¡ç®—æœºæˆ–ç½‘ç»œè®¾å¤‡è‡ªåŠ¨è·å–IPåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³ç­‰ç½‘ç»œé…ç½®å‚æ•°ã€‚</li></ul><h4 id="Linuxç³»ç»ŸDHCPæœåŠ¡é…ç½®æ–‡ä»¶"><a href="#Linuxç³»ç»ŸDHCPæœåŠ¡é…ç½®æ–‡ä»¶" class="headerlink" title="Linuxç³»ç»ŸDHCPæœåŠ¡é…ç½®æ–‡ä»¶"></a>Linuxç³»ç»ŸDHCPæœåŠ¡é…ç½®æ–‡ä»¶</h4><ul><li><strong>é…ç½®æ–‡ä»¶ä½ç½®</strong>ï¼š<code>/etc/dhcpd.conf</code></li></ul><h4 id="DHCPæœåŠ¡æµç¨‹"><a href="#DHCPæœåŠ¡æµç¨‹" class="headerlink" title="DHCPæœåŠ¡æµç¨‹"></a>DHCPæœåŠ¡æµç¨‹</h4><ol><li><strong>DHCP Discover</strong>ï¼šä¸»æœºå‘é€å¹¿æ’­ï¼Œå¯»æ‰¾DHCPæœåŠ¡å™¨ã€‚</li><li><strong>DHCP Offer</strong>ï¼šDHCPæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå›å¤å•æ’­ï¼Œæä¾›IPåœ°å€ç­‰ä¿¡æ¯ã€‚</li><li><strong>DHCP Request</strong>ï¼šä¸»æœºæ”¶åˆ°DHCPæœåŠ¡å™¨çš„å›å¤åï¼Œå‘é€å¹¿æ’­ï¼Œå‘ŠçŸ¥æ˜¯å¦æ¥å—åˆ†é…çš„IPã€‚</li><li><strong>DHCP ACK</strong>ï¼šæœåŠ¡å™¨æ”¶åˆ°ä¸»æœºçš„DHCP Requeståï¼Œå›å¤å•æ’­ï¼Œç¡®è®¤IPåˆ†é…ã€‚</li></ol><h4 id="DHCPç§Ÿçº¦å’Œç»­çº¦"><a href="#DHCPç§Ÿçº¦å’Œç»­çº¦" class="headerlink" title="DHCPç§Ÿçº¦å’Œç»­çº¦"></a>DHCPç§Ÿçº¦å’Œç»­çº¦</h4><ul><li><strong>é»˜è®¤ç§ŸæœŸ</strong>ï¼š8å¤©</li><li><strong>ç»­çº¦æ—¶é—´</strong>ï¼šç§ŸæœŸè¶…è¿‡ä¸€åŠï¼ˆ4å¤©ï¼‰æ—¶è¿›è¡Œç»­çº¦ï¼Œç»­çº¦åç§ŸæœŸä»ä¸º8å¤©ã€‚</li><li><strong>é‡æ–°ç»‘å®š</strong>ï¼šç§ŸæœŸè¶…è¿‡87.5%æ—¶ï¼Œé‡æ–°ç»‘å®šIPã€‚</li></ul><h4 id="å®¢æˆ·ç«¯æ“ä½œå‘½ä»¤"><a href="#å®¢æˆ·ç«¯æ“ä½œå‘½ä»¤" class="headerlink" title="å®¢æˆ·ç«¯æ“ä½œå‘½ä»¤"></a>å®¢æˆ·ç«¯æ“ä½œå‘½ä»¤</h4><ul><li><strong>å‘é€DHCP Discover</strong>ï¼š<code>dhcpdiscover</code></li><li><strong>ç”µè„‘é‡å¯å‘é€DHCP Request</strong>ï¼šç”µè„‘é‡å¯æ—¶è‡ªåŠ¨å‘é€ã€‚</li><li><strong>é‡æ–°è·å–åœ°å€</strong>ï¼š<code>ipconfig /renew</code></li><li><strong>é‡Šæ”¾IPåœ°å€</strong>ï¼š<code>ipconfig /release</code></li></ul><h4 id="DHCPä¸­ç»§"><a href="#DHCPä¸­ç»§" class="headerlink" title="DHCPä¸­ç»§"></a>DHCPä¸­ç»§</h4><p>ä¼ä¸šå†…ä¸åŒçš„ç”¨æˆ·å¯èƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„ç½‘æ®µï¼Œä¸€å°DHCPæœåŠ¡å™¨åœ¨æ­£å¸¸æƒ…å†µä¸‹æ— æ³•æ»¡è¶³å¤šä¸ªç½‘æ®µçš„åœ°å€åˆ†é…éœ€æ±‚ã€‚å¦‚æœè¿˜éœ€è¦é€šè¿‡DHCPæœåŠ¡å™¨åˆ†é…IPåœ°å€ï¼Œåˆ™éœ€è¦è·¨ç½‘æ®µå‘é€DHCPæŠ¥æ–‡ã€‚DHCP Relayå³DHCPä¸­ç»§ï¼Œå®ƒæ˜¯ä¸ºè§£å†³DHCPæœåŠ¡å™¨å’ŒDHCPå®¢æˆ·ç«¯ä¸åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸè€Œæå‡ºçš„ï¼Œæä¾›äº†å¯¹DHCPå¹¿æ’­æŠ¥æ–‡çš„ä¸­ç»§è½¬å‘åŠŸèƒ½ï¼Œèƒ½å¤ŸæŠŠDHCPå®¢æˆ·ç«¯çš„å¹¿æ’­æŠ¥æ–‡â€œé€æ˜åœ°â€ä¼ é€åˆ°å…¶å®ƒå¹¿æ’­åŸŸçš„DHCPæœåŠ¡å™¨ä¸Šï¼ŒåŒæ ·ä¹Ÿèƒ½å¤ŸæŠŠDHCPæœåŠ¡å™¨ç«¯çš„åº”ç­”æŠ¥æ–‡â€œé€æ˜åœ°â€ä¼ é€åˆ°å…¶å®ƒå¹¿æ’­åŸŸçš„DHCPå®¢æˆ·ç«¯ã€‚</p><h4 id="option43"><a href="#option43" class="headerlink" title="option43"></a>option43</h4><p>Option 43æ˜¯ä¸€ä¸ªDHCPé€‰é¡¹ï¼Œç”¨äºåœ¨DHCPæŠ¥æ–‡ä¸­ä¼ é€’é¢å¤–çš„ä¿¡æ¯ã€‚å½“APé€šè¿‡DHCPè·å–IPåœ°å€æ—¶ï¼Œå®ƒå¯ä»¥åœ¨DHCPè¯·æ±‚ä¸­åŒ…å«Option 43ï¼Œè¿™ä¸ªé€‰é¡¹å­—æ®µå¯ä»¥åŒ…å«ACçš„IPåœ°å€æˆ–å…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚è¿™æ ·ï¼ŒDHCPæœåŠ¡å™¨å°±å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯ä¸ºAPåˆ†é…é€‚å½“çš„IPåœ°å€ï¼Œå¹¶ç¡®ä¿APèƒ½å¤Ÿæ­£ç¡®åœ°è¿æ¥åˆ°ACè¿›è¡Œç½‘ç»œç®¡ç†ã€‚</p><h3 id="linuxç½‘ç»œé…ç½®"><a href="#linuxç½‘ç»œé…ç½®" class="headerlink" title="linuxç½‘ç»œé…ç½®"></a>linuxç½‘ç»œé…ç½®</h3><p>ç½‘ç»œç›¸å…³é…ç½®æ–‡ä»¶å¤§å¤šæ•°ä½äº&#x2F; etcç›®å½•ä¸‹ï¼Œ è¿™äº›æ–‡ä»¶å¯ä»¥åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ä¿®æ”¹ ï¼Œ ä¸ç”¨é‡å¯æˆ–åœæ­¢ä»»ä½•å®ˆæŠ¤ç¨‹åºï¼Œ æ›´æ”¹ç«‹åˆ»ç”Ÿæ•ˆã€‚<br>â€œ#â€å¼€å¤´çš„ä¸ºæ³¨é‡Šå†…å®¹ã€‚</p><ul><li>ç½‘ç»œé…ç½®æ–‡ä»¶ï¼š<code>/etc/sysconfig/network-script/ifcfg-enoxxx</code></li><li><code>/etc/hostname</code>ï¼šç³»ç»Ÿä¸»æœºåæ–‡ä»¶ã€‚</li><li><code>/etc/hosts</code>ï¼šåŒ…å« IP åœ°å€å’Œä¸»æœºåä¹‹é—´çš„æ˜ å°„ ï¼Œè¿˜åŒ…å«ä¸»æœºåˆ«åã€‚</li><li><code>/etc/host.conf</code>ï¼šæŒ‡å®šå®¢æˆ·æœºåŸŸåè§£æé¡ºåºï¼Œä¸‹é¢ä¸ºè¯¥æ–‡ä»¶å†…å®¹ï¼š<code>hosts, bind</code></li><li><code>/etc/resolv.conf</code>ï¼šæŒ‡å®šå®¢æˆ·æœºåŸŸåæœç´¢é¡ºåºå’Œ DNS æœåŠ¡å™¨åœ°å€ã€‚</li></ul><h3 id="iptablesé˜²ç«å¢™"><a href="#iptablesé˜²ç«å¢™" class="headerlink" title="iptablesé˜²ç«å¢™"></a>iptablesé˜²ç«å¢™</h3><table><thead><tr><th>è§„åˆ™è¡¨</th><th>å®šä¹‰</th><th>åŒ…å«çš„è§„åˆ™é“¾</th></tr></thead><tbody><tr><td><strong>raw</strong></td><td>ç¡®å®šæ˜¯å¦å¯¹è¯¥æ•°æ®åŒ…è¿›è¡ŒçŠ¶æ€è·Ÿè¸ªã€‚</td><td>OUTPUTã€PREROUTING</td></tr><tr><td><strong>mangle</strong></td><td>ä¿®æ”¹æ•°æ®åŒ…å†…å®¹ï¼Œç”¨æ¥åšæµé‡æ•´å½¢çš„ï¼Œç»™æ•°æ®åŒ…è®¾ç½®æ ‡è®°ã€‚</td><td>INPUTã€OUTPUTã€FORWARDã€PREROUTINGã€POSTROUTING</td></tr><tr><td><strong>nat</strong></td><td>è´Ÿè´£ç½‘ç»œåœ°å€è½¬æ¢ï¼Œç”¨æ¥ä¿®æ”¹æ•°æ®åŒ…ä¸­çš„æºç›®æ ‡IPåœ°å€æˆ–ç«¯å£ã€‚</td><td>OUTPUTã€PREROUTINGã€POSTROUTING</td></tr><tr><td><strong>filter</strong></td><td>è´Ÿè´£è¿‡æ»¤æ•°æ®åŒ…ï¼Œç¡®å®šæ˜¯å¦æ”¾è¡Œè¯¥æ•°æ®åŒ…ï¼ˆè¿‡æ»¤ï¼‰ã€‚</td><td>INPUTã€FORWARDã€OUTPUT</td></tr></tbody></table><h3 id="linuxç”¨æˆ·å’Œç»„ç®¡ç†"><a href="#linuxç”¨æˆ·å’Œç»„ç®¡ç†" class="headerlink" title="linuxç”¨æˆ·å’Œç»„ç®¡ç†"></a>linuxç”¨æˆ·å’Œç»„ç®¡ç†</h3><ul><li>æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼š<code>whoami</code></li><li>æŸ¥çœ‹å½“å‰ç”¨æˆ·ç»„ï¼š<code>groups</code></li><li>æ·»åŠ ç”¨æˆ·ï¼š<code>useradd username</code></li><li>åˆ é™¤ç”¨æˆ·ï¼š<code>userdel username</code></li><li>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š<code>passwd username</code></li><li>&#x2F;etc&#x2F;passwd æ¯ä¸ªç”¨æˆ·åœ¨è¯¥æ–‡ä»¶ä¸­éƒ½æœ‰ä¸€è¡Œå¯¹åº”è®°å½•ï¼Œè¯¥æ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„</li><li>&#x2F;etc&#x2F;shadow åªæœ‰è¶…çº§ç”¨æˆ·root èƒ½è¯»çš„æ–‡ä»¶&#x2F;etc&#x2F;shadow, è¯¥æ–‡ä»¶åŒ…å«äº†ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·åŠå…¶<strong>åŠ å¯†åçš„å£ä»¤</strong>ç­‰</li></ul><h2 id="ç¬¬10ç« -ç»„ç½‘æŠ€æœ¯"><a href="#ç¬¬10ç« -ç»„ç½‘æŠ€æœ¯" class="headerlink" title="ç¬¬10ç«  ç»„ç½‘æŠ€æœ¯"></a>ç¬¬10ç«  ç»„ç½‘æŠ€æœ¯</h2><h3 id="äº¤æ¢æœºåŸºç¡€"><a href="#äº¤æ¢æœºåŸºç¡€" class="headerlink" title="äº¤æ¢æœºåŸºç¡€"></a>äº¤æ¢æœºåŸºç¡€</h3><p>äº¤æ¢æœºèƒ½éš”ç¦»å†²çªåŸŸï¼Œä¸€ä¸ªç«¯å£å°±æ˜¯ä¸€ä¸ªå†²çªåŸŸ</p><h4 id="äº¤æ¢æœºåˆ†ç±»"><a href="#äº¤æ¢æœºåˆ†ç±»" class="headerlink" title="äº¤æ¢æœºåˆ†ç±»"></a>äº¤æ¢æœºåˆ†ç±»</h4><ul><li><p><strong>äº¤æ¢æ–¹å¼</strong>ï¼š</p><ul><li><strong>å­˜å‚¨è½¬å‘</strong>ï¼šå»¶æ—¶è¾ƒå¤§ï¼Œä½†å¯ä»¥æä¾›å·®é”™æ ¡éªŒï¼Œæ”¯æŒä¸åŒé€Ÿåº¦çš„è¾“å…¥ã€è¾“å‡ºç«¯å£é—´äº¤æ¢ï¼ˆéå¯¹ç§°äº¤æ¢ï¼‰ã€‚</li><li><strong>ç›´é€šå¼</strong>ï¼šåœ¨è¾“å…¥ç«¯å£æ‰«æåˆ°ç›®çš„åœ°å€åç«‹å³å¼€å§‹è½¬å‘ï¼Œå»¶è¿Ÿå°ã€äº¤æ¢é€Ÿåº¦å¿«ï¼Œä½†æ²¡æœ‰æ£€é”™èƒ½åŠ›ï¼Œä¸èƒ½å®ç°éå¯¹ç§°äº¤æ¢ã€‚</li><li><strong>ç¢ç‰‡è¿‡æ»¤å¼</strong>ï¼šäº¤æ¢æœºå¼€å§‹è½¬å‘ä¹‹å‰å…ˆæ£€æŸ¥æ•°æ®åŒ…çš„é•¿åº¦æ˜¯å¦å¤Ÿ64ä¸ªå­—èŠ‚ï¼Œå°äº64Bè¯´æ˜æ˜¯å†²çªç¢ç‰‡ï¼Œä¸¢å¼ƒã€‚å¤§äºæˆ–ç­‰äº64Bè½¬å‘ï¼Œè¿™ç§è½¬å‘æ–¹å¼ä»‹äºå‰ä¸¤è€…ä¹‹é—´ã€‚</li></ul></li><li><p><strong>äº¤æ¢åè®®å±‚æ¬¡</strong>ï¼š</p><ul><li><strong>äºŒå±‚äº¤æ¢æœº</strong>ï¼šæ ¹æ®MACåœ°å€è¿›è¡Œäº¤æ¢ã€‚</li><li><strong>ä¸‰å±‚äº¤æ¢æœº</strong>ï¼šæ ¹æ®IPåœ°å€è¿›è¡Œäº¤æ¢ã€‚</li><li><strong>å¤šå±‚äº¤æ¢æœº</strong>ï¼šæ ¹æ®ç«¯å£å·å’Œåº”ç”¨åè®®è¿›è¡Œäº¤æ¢ã€‚</li></ul></li><li><p><strong>äº¤æ¢æœºç»“æ„</strong>ï¼š</p><ul><li><strong>å›ºå®šç«¯å£äº¤æ¢æœº</strong>ï¼šæä¾›æœ‰é™æ•°é‡çš„å›ºå®šç±»å‹ç«¯å£ã€‚</li><li><strong>æ¨¡å—åŒ–äº¤æ¢æœº</strong>ï¼šæœºç®±ä¸­é¢„ç•™æ’æ§½ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å®‰è£…ä¸åŒæ•°é‡åŠç±»å‹çš„æ¨¡å—ã€‚</li></ul></li><li><p><strong>é…ç½®æ–¹å¼</strong>ï¼š</p><ul><li><strong>å †å å‹äº¤æ¢æœº</strong>ï¼šç”¨å †å ç”µç¼†æŠŠä¸€å°äº¤æ¢æœºçš„UPå£è¿æ¥åˆ°å¦ä¸€å°äº¤æ¢æœºçš„DOWNå£ï¼Œä¸€èˆ¬äº¤æ¢æœºèƒ½å †å 4~9å±‚ï¼Œå †å åçš„äº¤æ¢æœºå¯ä»¥å½“ä½œä¸€å°äº¤æ¢æœºæ¥ç»Ÿä¸€ç®¡ç†ã€‚</li><li><strong>éå †å å‹äº¤æ¢æœº</strong>ï¼šé€šè¿‡çº§è”æ–¹å¼æ‰©å……ï¼Œçº§è”ä½¿ç”¨ä»¥å¤ªç½‘ç«¯å£è¿›è¡Œå±‚æ¬¡é—´äº’è”ï¼Œå±‚æ•°ä¸è¶…è¿‡4å±‚ã€‚</li></ul></li><li><p><strong>ç®¡ç†ç±»å‹</strong>ï¼š</p><ul><li><strong>ç½‘ç®¡å‹äº¤æ¢æœº</strong>ï¼šæ”¯æŒç®€å•ç½‘ç»œç®¡ç†åè®®SNMPå’Œç®¡ç†ä¿¡æ¯åº“MIBã€‚</li><li><strong>éç½‘ç®¡å‹äº¤æ¢æœº</strong>ï¼šåªèƒ½æ ¹æ®MACè¿›è¡Œã€‚</li><li><strong>æ™ºèƒ½å‹äº¤æ¢æœº</strong>ï¼šæ”¯æŒåŸºäºWEBçš„å›¾å½¢åŒ–ç®¡ç†ã€‚</li></ul></li><li><p><strong>å±‚æ¬¡ç»“æ„å‹åˆ’åˆ†</strong>ï¼š</p><ul><li><strong>æ¥å…¥å±‚äº¤æ¢æœº</strong>ï¼šæ˜¯å·¥ä½œç«™è¿æ¥ç½‘ç»œçš„å…¥å£ï¼Œæä¾›é«˜å¯†åº¦æ¥å…¥ç«¯å£ã€‚</li><li><strong>æ±‡èšå±‚äº¤æ¢æœº</strong>ï¼šå°†ç½‘ç»œåˆ’åˆ†ä¸ºå¤šä¸ªå¹¿æ’­&#x2F;ç»„æ’­åŸŸï¼Œå®ç°VLANé—´è·¯ç”±ï¼ŒACLï¼Œæä¾›ä¸‰å±‚äº¤æ¢åŠŸèƒ½ã€‚</li><li><strong>æ ¸å¿ƒå±‚äº¤æ¢æœº</strong>ï¼šé‡‡ç”¨é«˜å¯æ‰©å±•çš„é«˜æ€§èƒ½äº¤æ¢æœºï¼Œæä¾›å†—ä½™ã€è´Ÿè½½ã€‚</li></ul></li></ul><h4 id="æ€§èƒ½å‚æ•°"><a href="#æ€§èƒ½å‚æ•°" class="headerlink" title="æ€§èƒ½å‚æ•°"></a>æ€§èƒ½å‚æ•°</h4><ul><li><p><strong>ä¼ è¾“æ¨¡å¼</strong>ï¼š</p><ul><li><strong>åŠåŒå·¥</strong>ï¼šé€šä¿¡åŒæ–¹å¯ä»¥å‘é€å’Œæ¥æ”¶ä¿¡å·ï¼Œä½†ä¸èƒ½åŒæ—¶è¿›è¡Œã€‚</li><li><strong>å…¨åŒå·¥</strong>ï¼šé€šä¿¡åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡å·ã€‚</li><li><strong>å…¨åŒå·¥&#x2F;åŠåŒå·¥è‡ªé€‚åº”</strong>ï¼šè®¾å¤‡å¯ä»¥æ ¹æ®æ¡ä»¶è‡ªåŠ¨é€‰æ‹©ä¼ è¾“æ¨¡å¼ï¼Œä½†ä¸åŒé€Ÿç‡å’Œä¼ è¾“æ¨¡å¼çš„å…‰çº¤ç«¯å£é—´å¯èƒ½æ— æ³•è¿›è¡Œé€šä¿¡ã€‚</li></ul></li><li><p><strong>åŒ…è½¬å‘ç‡</strong>ï¼š</p><ul><li>ä¹Ÿç§°ä¸ºååç‡ï¼Œæ˜¯äº¤æ¢æœºè¿›è¡Œæ•°æ®åŒ…è½¬å‘çš„èƒ½åŠ›ã€‚</li><li>å•ä½ä¸ºppsï¼ˆåŒ…&#x2F;ç§’ï¼‰ã€‚</li><li>è®¡ç®—æ ‡å‡†ï¼šå•ä½æ—¶é—´å†…å‘é€64Bæ•°æ®åŒ…çš„ä¸ªæ•°ã€‚</li><li>è®¡ç®—å…¬å¼ï¼š[ \text{åŒ…è½¬å‘ç‡} &#x3D; \text{åƒå…†ç«¯å£æ•°} \times 1.488 \text{Mpps} + \text{ç™¾å…†ç«¯å£æ•°} \times 0.1488 \text{Mpps} + \text{å…¶ä½™ç«¯å£æ•°} \times \text{ç›¸åº”åŒ…è½¬å‘æ•°} ]</li></ul></li><li><p><strong>èƒŒæ¿å¸¦å®½</strong>ï¼š</p><ul><li>æ ‡å¿—äº¤æ¢æœºæ€»çš„äº¤æ¢èƒ½åŠ›ã€‚</li><li>å•ä½ä¸ºGbpsï¼ˆåƒå…†æ¯”ç‰¹&#x2F;ç§’ï¼‰ã€‚</li><li>è®¡ç®—å…¬å¼ï¼š[ \text{æ€»å¸¦å®½} &#x3D; \text{ç«¯å£æ•°} \times \text{ç«¯å£é€Ÿç‡} \times 2 \text{(å…¨åŒå·¥æ¨¡å¼)} ]</li></ul></li></ul><h4 id="çº§è”å’Œå †å "><a href="#çº§è”å’Œå †å " class="headerlink" title="çº§è”å’Œå †å "></a>çº§è”å’Œå †å </h4><ul><li><strong>çº§è”äº¤æ¢æœº</strong>ï¼šæ‰©å±•ç«¯å£æ•°é‡</li><li><strong>å †å äº¤æ¢æœº</strong>ï¼šç«¯å£èšåˆï¼Œæé«˜å¸¦å®½<ul><li>ä¼˜åŠ¿ï¼šé€»è¾‘ä¸Šå¤šå°è®¾å¤‡è™šæ‹Ÿæˆä¸€å°è®¾å¤‡ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œé¿å…äº†å•ç‚¹æ•…éšœ</li><li>åŠ£åŠ¿ï¼šç§æœ‰åè®®ï¼Œä¸åŒå‚å•†çš„è®¾å¤‡ä¸èƒ½äº’é€šå­˜åœ¨ä¸€å®šèµ„æºæµªè´¹</li></ul></li></ul><h3 id="è·¯ç”±å™¨åŸºç¡€"><a href="#è·¯ç”±å™¨åŸºç¡€" class="headerlink" title="è·¯ç”±å™¨åŸºç¡€"></a>è·¯ç”±å™¨åŸºç¡€</h3><p>ä¸‰å±‚ç½‘ç»œè®¾å¤‡ï¼Œå…·æœ‰å±€åŸŸç½‘å’Œå¹¿åŸŸç½‘æ¥å£</p><p>èƒ½éš”ç¦»å¹¿æ’­åŸŸï¼Œä¸€ä¸ªç«¯å£å°±æ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸ</p><h4 id="è·¯ç”±å™¨åˆ†ç±»"><a href="#è·¯ç”±å™¨åˆ†ç±»" class="headerlink" title="è·¯ç”±å™¨åˆ†ç±»"></a>è·¯ç”±å™¨åˆ†ç±»</h4><ol><li><p><strong>éª¨å¹²è·¯ç”±å™¨</strong>ï¼š</p><ul><li>æè¿°ï¼šå®ç°ä¸»å¹²ç½‘ç»œäº’è¿çš„å…³é”®è®¾å¤‡ã€‚</li><li>ç‰¹ç‚¹ï¼šé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œé€šè¿‡çƒ­å¤‡ä»½ã€åŒç”µæºå’ŒåŒæ•°æ®é€šé“ç­‰å†—ä½™æŠ€æœ¯æé«˜å¯é æ€§ã€‚</li></ul></li><li><p><strong>ä¼ä¸šçº§è·¯ç”±å™¨ï¼ˆä¹Ÿç§°è¾¹ç¼˜è·¯ç”±å™¨ï¼‰</strong>ï¼š</p><ul><li>åº”ç”¨ï¼šç”¨äºä¼ä¸šå‡ºå…¥å£ã€‚</li><li>åŠŸèƒ½ï¼šæä¾›å¤šç§åŠŸèƒ½ï¼Œå®ç°æ•°æ®ã€è¯­éŸ³ã€è§†é¢‘ã€ç½‘ç»œç®¡ç†ç­‰åº”ç”¨ã€‚</li></ul></li><li><p><strong>æ¥å…¥çº§è·¯ç”±å™¨</strong>ï¼š</p><ul><li>åº”ç”¨ï¼šç”¨äºè¿æ¥å°å‹ä¼ä¸šçš„å®¢æˆ·ç¾¤ã€‚</li><li>åŠŸèƒ½ï¼šå®ç°ç®€å•ä¿¡æ¯ä¼ è¾“åŠŸèƒ½ã€‚</li></ul></li></ol><h4 id="è·¯ç”±å™¨æ¥å£ç±»å‹"><a href="#è·¯ç”±å™¨æ¥å£ç±»å‹" class="headerlink" title="è·¯ç”±å™¨æ¥å£ç±»å‹"></a>è·¯ç”±å™¨æ¥å£ç±»å‹</h4><ul><li><strong>å¹¿åŸŸç½‘WANç«¯å£</strong>ï¼šç”¨äºè¿æ¥åˆ°å¹¿åŸŸç½‘ï¼Œå¦‚äº’è”ç½‘æˆ–å…¶ä»–è¿œç¨‹ç½‘ç»œã€‚</li><li><strong>å±€åŸŸç½‘LANç«¯å£</strong>ï¼šç”¨äºè¿æ¥åˆ°å±€åŸŸç½‘å†…çš„è®¾å¤‡ï¼Œå¦‚è®¡ç®—æœºã€æ‰“å°æœºç­‰ã€‚</li><li><strong>RJ45ç«¯å£</strong>ï¼šå¸¸è§„ä»¥å¤ªç½‘ç”µå£ï¼Œä½¿ç”¨RJ45è¿æ¥å™¨ï¼Œå¸¸ç”¨äºè¿æ¥ä»¥å¤ªç½‘è®¾å¤‡ã€‚</li><li><strong>ä»¥å¤ªç½‘å…‰å£</strong>ï¼šä½¿ç”¨å…‰çº¤è¿æ¥ï¼ŒåŒ…æ‹¬å¤šç§æ¥å£ç±»å‹ï¼š<ul><li><strong>SC</strong>ï¼šä¸€ç§æ ‡å‡†çš„å…‰çº¤è¿æ¥å™¨ã€‚</li><li><strong>GBIC</strong>ï¼šGigabit Interface Converterï¼Œåƒå…†ä½æ¥å£è½¬æ¢å™¨ã€‚</li><li><strong>SFP</strong>ï¼šSmall Form-factor Pluggableï¼Œå°å‹å¯æ’æ‹”æ¨¡å—ã€‚</li><li><strong>SFP+</strong>ï¼šå¢å¼ºå‹å°å‹å¯æ’æ‹”æ¨¡å—ï¼Œæä¾›æ›´é«˜çš„æ•°æ®ä¼ è¾“é€Ÿç‡ã€‚</li><li><strong>SFP28</strong>ï¼šæ”¯æŒ28Gbpsæ•°æ®ä¼ è¾“é€Ÿç‡çš„å°å‹å¯æ’æ‹”æ¨¡å—ã€‚</li></ul></li><li><strong>AUIç«¯å£</strong>ï¼šAttachment Unit Interfaceï¼Œç”¨äºä»¤ç‰Œç¯æˆ–æ€»çº¿å‹ä»¥å¤ªç½‘æ¥å£ï¼Œä½¿ç”¨AUIè¿æ¥å™¨ã€‚</li><li><strong>Serialä¸²å£</strong>ï¼šç”¨äºè¿æ¥æ•°å­—æ•°æ®é€šä¿¡ç½‘ç»œï¼Œå¦‚DDNï¼ˆæ•°å­—æ•°æ®ç½‘ï¼‰ã€å¸§ä¸­ç»§ã€X.25ã€PSTNï¼ˆå…¬å…±äº¤æ¢ç”µè¯ç½‘ç»œï¼‰ç­‰ã€‚</li><li><strong>ISDN BRI&#x2F;PRIç«¯å£</strong>ï¼šISDNï¼ˆç»¼åˆä¸šåŠ¡æ•°å­—ç½‘ï¼‰çº¿è·¯äº’è”ï¼ŒBRIï¼ˆBasic Rate Interfaceï¼‰æä¾›ä¸¤ä¸ªBä¿¡é“å’Œä¸€ä¸ªDä¿¡é“ï¼ŒPRIï¼ˆPrimary Rate Interfaceï¼‰æä¾›å¤šä¸ªBä¿¡é“å’Œä¸€ä¸ªDä¿¡é“ã€‚</li><li><strong>SDH POSæ¥å£</strong>ï¼šSynchronous Digital Hierarchy Packet Over SONET&#x2F;SDHï¼Œæä¾›ä¸åŒé€Ÿç‡çš„æ•°æ®ä¼ è¾“ï¼Œå¦‚155Mã€622Mã€2.5Gã€10Gç­‰ã€‚</li></ul><h4 id="è·¯ç”±å™¨ç®¡ç†æ–¹å¼"><a href="#è·¯ç”±å™¨ç®¡ç†æ–¹å¼" class="headerlink" title="è·¯ç”±å™¨ç®¡ç†æ–¹å¼"></a>è·¯ç”±å™¨ç®¡ç†æ–¹å¼</h4><ol><li><p><strong>Consoleæ¥å£</strong>ï¼š</p><ul><li>æœ€åŸºç¡€ä¸”æœ€å¸¸ç”¨çš„ç®¡ç†æ–¹å¼ã€‚</li><li>é€šå¸¸é€šè¿‡ä¸€ä¸ªRJ45æˆ–è€…DB9æ¥å£ç›´æ¥è¿æ¥åˆ°è®¾å¤‡çš„æ§åˆ¶å°ç«¯å£ã€‚</li><li>ç”¨äºåˆå§‹é…ç½®ã€æ•…éšœè¯Šæ–­å’Œæ¢å¤æ“ä½œã€‚</li></ul></li><li><p><strong>AUXç«¯å£</strong>ï¼š</p><ul><li>ç”¨äºè¿æ¥è°ƒåˆ¶è§£è°ƒå™¨ï¼ˆModemï¼‰ã€‚</li><li>å¯ä»¥è¿œç¨‹é€šè¿‡ç”µè¯çº¿è¿æ¥åˆ°è®¾å¤‡è¿›è¡Œé…ç½®å’Œæ•…éšœæ’é™¤ã€‚</li></ul></li><li><p><strong>Telnet&#x2F;SSH</strong>ï¼š</p><ul><li>é€šè¿‡ç½‘ç»œè¿œç¨‹ç™»å½•è®¾å¤‡è¿›è¡Œç®¡ç†ã€‚</li><li>Telnetæ˜¯æ—©æœŸçš„è¿œç¨‹ç®¡ç†åè®®ï¼Œä½†å®‰å…¨æ€§è¾ƒä½ã€‚</li><li>SSHï¼ˆSecure Shellï¼‰æä¾›åŠ å¯†çš„è¿œç¨‹ç™»å½•ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚</li></ul></li><li><p><strong>æµè§ˆå™¨</strong>ï¼š</p><ul><li>é€šè¿‡Webæµè§ˆå™¨è®¿é—®è®¾å¤‡çš„ç®¡ç†ç•Œé¢ã€‚</li><li>é€šå¸¸ç”¨äºå›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰ç®¡ç†ï¼Œç®€åŒ–é…ç½®è¿‡ç¨‹ã€‚</li></ul></li><li><p><strong>ç½‘ç®¡è½¯ä»¶</strong>ï¼š</p><ul><li>ä½¿ç”¨ä¸“é—¨çš„ç½‘ç»œç®¡ç†è½¯ä»¶è¿›è¡Œè®¾å¤‡ç®¡ç†ã€‚</li><li>å¯ä»¥é›†ä¸­ç®¡ç†å¤šä¸ªè®¾å¤‡ï¼Œæä¾›æ›´é«˜çº§çš„ç›‘æ§å’Œé…ç½®åŠŸèƒ½ã€‚</li></ul></li></ol><h2 id="ç¬¬11ç« -ç½‘ç»œç®¡ç†"><a href="#ç¬¬11ç« -ç½‘ç»œç®¡ç†" class="headerlink" title="ç¬¬11ç«  ç½‘ç»œç®¡ç†"></a>ç¬¬11ç«  ç½‘ç»œç®¡ç†</h2><h3 id="ç½‘ç»œç®¡ç†æ¦‚å¿µ"><a href="#ç½‘ç»œç®¡ç†æ¦‚å¿µ" class="headerlink" title="ç½‘ç»œç®¡ç†æ¦‚å¿µ"></a>ç½‘ç»œç®¡ç†æ¦‚å¿µ</h3><p>ç½‘ç»œç®¡ç†äº”å¤§åŠŸèƒ½åŸŸï¼šæ•…éšœç®¡ç†ã€é…ç½®ç®¡ç†ã€è®¡è´¹ç®¡ç†ã€æ€§èƒ½ç®¡ç†å’Œå®‰å…¨ç®¡ç†ã€‚</p><p>æ•…éšœç®¡ç†ï¼šå°½å¿«å‘ç°æ•…éšœï¼Œæ‰¾å‡ºæ•…éšœåŸå› ï¼Œä»¥ä¾¿é‡‡å–è¡¥æ•‘æªæ–½ã€‚</p><h3 id="SNMP"><a href="#SNMP" class="headerlink" title="SNMP"></a>SNMP</h3><p>ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSimple Network Management Protocolï¼‰</p><ul><li><strong>ç½‘ç»œç®¡ç†åè®®äº”å¤§æ ‡å‡†</strong><ul><li><strong>ISOåˆ¶å®š</strong><ul><li><strong>CMIS&#x2F;CMIP</strong>ï¼šå…¬å…±ç®¡ç†ä¿¡æ¯æœåŠ¡è§„èŒƒ</li></ul></li><li><strong>åŸºäºTCP&#x2F;IP</strong><ul><li><strong>SNMPv1</strong></li><li><strong>SNMPv2</strong></li><li><strong>SNMPv3</strong></li></ul></li><li><strong>åŸºäºå±€åŸŸç½‘</strong><ul><li><strong>RMON-1</strong>ï¼šè¿œç¨‹ç›‘æ§ç½‘ç»œç¬¬ä¸€ç‰ˆ</li><li><strong>RMON-2</strong>ï¼šè¿œç¨‹ç›‘æ§ç½‘ç»œç¬¬äºŒç‰ˆ</li></ul></li><li><strong>IEEEåˆ¶å®š</strong><ul><li><strong>CMOL</strong>ï¼šåŸºäºç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚</li></ul></li><li><strong>ITU-T</strong><ul><li><strong>TMN</strong>ï¼šç”µä¿¡ç½‘ç»œç®¡ç†æ ‡å‡†</li></ul></li></ul></li><li>SNMPä¸ºåº”ç”¨å±‚åè®®ï¼ŒåŸºäºUDPåè®®ï¼Œä½¿ç”¨ç«¯å£161å’Œ162</li><li>ä¸å¯é ï¼Œä½†æ•ˆç‡é«˜ï¼Œä¸ä¼šè¿‡å¤šå¢åŠ ç½‘ç»œè´Ÿè½½<br><strong>SNMPæŠ¥æ–‡</strong><br>å®¢æˆ·ç«¯ç”¨161ç«¯å£æ¥æ¥å—get&#x2F;setå‘½ä»¤ï¼ŒæœåŠ¡ç«¯ï¼ˆç½‘ç®¡ï¼‰ç”¨162ç«¯å£æ¥æ¥æ”¶trap<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.lvowapllj.jpg" alt="image"></li></ul><h4 id="SNMPv1"><a href="#SNMPv1" class="headerlink" title="SNMPv1"></a>SNMPv1</h4><ul><li>å¯ä»¥ä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€</li><li>é€šè¿‡å›¢ä½“å(community)éªŒè¯èº«ä»½,æ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨</li></ul><h4 id="SNMPv2"><a href="#SNMPv2" class="headerlink" title="SNMPv2"></a>SNMPv2</h4><ul><li>æ–°å¢GetBulkå’ŒInformä¸¤ä¸ªæ–°åè®®æ“ä½œ<ul><li>GetBulk:è·å–å¤§å—æ•°æ®</li><li>Inform:å…è®¸ç®¡ç†ç«™åƒç®¡ç†ç«™å‘é€Trapä¿¡æ¯&#x2F;æ¥æ”¶å“åº”</li></ul></li></ul><h4 id="SNMPv3"><a href="#SNMPv3" class="headerlink" title="SNMPv3"></a>SNMPv3</h4><ul><li><strong>é‡æ–°å®šä¹‰ç½‘ç»œç®¡ç†æ¡†æ¶</strong><ul><li><strong>SNMPå®ä½“</strong>ï¼šå°†ç®¡ç†ç«™å’Œä»£ç†ç»Ÿä¸€ç§°ä¸º SNMP å®ä½“ï¼ˆ<strong>entity</strong>ï¼‰</li></ul></li><li><strong>å®‰å…¨æœºåˆ¶</strong><ul><li><strong>è®¤è¯å’ŒåŠ å¯†ä¼ è¾“</strong></li><li><strong>æ—¶é—´åºåˆ—æ¨¡å—</strong><ul><li><strong>é‡æ”¾æ”»å‡»é˜²æŠ¤</strong></li></ul></li><li><strong>è®¤è¯æ¨¡å—</strong><ul><li><strong>å®Œæ•´æ€§å’Œæ•°æ®æºè®¤è¯</strong></li><li><strong>ç®—æ³•</strong>ï¼šä½¿ç”¨ SHA æˆ– MD5</li></ul></li><li><strong>åŠ å¯†æ¨¡å—</strong><ul><li><strong>é˜²æ­¢å†…å®¹æ³„éœ²</strong></li><li><strong>ç®—æ³•</strong>ï¼šä½¿ç”¨ DES</li></ul></li></ul></li><li><strong>æœªé˜²æŠ¤çš„å¨èƒ</strong><ul><li><strong>æ‹’ç»æœåŠ¡</strong></li><li><strong>é€šä¿¡åˆ†æ</strong></li></ul></li></ul><h3 id="RMON"><a href="#RMON" class="headerlink" title="RMON"></a>RMON</h3><ul><li>è¿œç¨‹ç›‘æ§ç½‘ç»œï¼ˆRemote Monitoring Networkï¼‰</li><li>ç”¨äºç›‘è§†ç½‘ç»œé€šä¿¡æƒ…å†µçš„è®¾å¤‡å«ç½‘ç»œç›‘è§†å™¨( Monitor) æˆ–ç½‘ç»œåˆ†æå™¨ ( Analyzer )ã€æ¢æµ‹å™¨( Probe ) ç­‰</li><li>RMONå®šä¹‰äº†ç®¡ç†ä¿¡æ¯åº“RMON MIB-II ( æµé‡ä¿¡æ¯ ) ä¸SNMP MIB ( è®¾å¤‡ä¿¡æ¯ ) ã€‚</li><li>RMONç›®æ ‡ï¼šç›‘è§†å­ç½‘èŒƒå›´å†…é€šä¿¡ï¼Œä»è€Œå‡å°‘ç®¡ç†ç«™å’Œè¢«ç®¡ç†ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡è´Ÿè½½ã€‚</li></ul><h3 id="ç½‘ç»œç®¡ç†å‘½ä»¤"><a href="#ç½‘ç»œç®¡ç†å‘½ä»¤" class="headerlink" title="ç½‘ç»œç®¡ç†å‘½ä»¤"></a>ç½‘ç»œç®¡ç†å‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>é€‰é¡¹</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>ipconfig</strong></td><td>æ— </td><td>æ˜¾ç¤ºIPã€æ©ç ã€ç½‘å…³ç­‰åŸºç¡€ä¿¡æ¯</td></tr><tr><td><strong>ipconfig</strong></td><td>&#x2F;all</td><td>æ˜¾ç¤ºIPã€æ©ç ã€ç½‘å…³ã€DHCPå’ŒMACç­‰è¯¦ç»†ä¿¡æ¯</td></tr><tr><td><strong>ipconfig</strong></td><td>&#x2F;renew</td><td>æ›´æ–°DHCPé…ç½®,é‡æ–°è·IP</td></tr><tr><td><strong>ipconfig</strong></td><td>&#x2F;release</td><td>é‡Šæ”¾DHCPè·å¾—çš„IPåœ°å€</td></tr><tr><td><strong>ipconfig</strong></td><td>&#x2F;flushdns</td><td>æ¸…é™¤DNSç¼“å­˜ä¿¡æ¯</td></tr><tr><td><strong>ipconfig</strong></td><td>&#x2F;displaydns</td><td>æ˜¾ç¤ºDNSç¼“å­˜ä¿¡æ¯</td></tr><tr><td><strong>ping</strong></td><td>-t IP</td><td>æŒç»­ping,ç›´åˆ°Ctrl+Cä¸­æ–­</td></tr><tr><td><strong>ping</strong></td><td>-a IP</td><td>å°†IPè§£æä¸ºä¸»æœºå</td></tr><tr><td><strong>ping</strong></td><td>-n Count IP</td><td>è®¾ç½®pingåŒ…çš„ä¸ªæ•°</td></tr><tr><td><strong>tracert</strong></td><td>IP</td><td>è·Ÿè¸ªç½‘ç»œä¼ è¾“è·¯å¾„ åŸç†:é€’å¢TTLå­—æ®µçš„ICMPå›é€é”™è¯¯æŠ¥æ–‡</td></tr><tr><td><strong>pathping</strong></td><td>IP</td><td>ç»“åˆäº†pingå’ŒtracertåŠŸèƒ½,å¯ä»¥æ˜¾ç¤ºé€šä¿¡çº¿è·¯ä¸Šæ¯ä¸ªå­ç½‘çš„å»¶æ—¶å’Œä¸¢åŒ…ç‡</td></tr><tr><td><strong>arp</strong></td><td>-a</td><td>æ˜¾ç¤ºå½“å‰ARPç¼“å­˜è¡¨</td></tr><tr><td><strong>arp</strong></td><td>-s IP MAC</td><td>é™æ€ç»‘å®šARP</td></tr><tr><td><strong>arp</strong></td><td>-d IP</td><td>åˆ é™¤æŸæ¡ARPç¼“å­˜</td></tr><tr><td><strong>netstat</strong></td><td>æ— </td><td>æ˜¾ç¤ºTCPè¿æ¥,ä¾¦å¬çš„ç«¯å£åŠç»Ÿè®¡ä¿¡æ¯</td></tr><tr><td><strong>netstat</strong></td><td>-n</td><td>æ˜¾ç¤ºæ´»åŠ¨çš„TCPè¿æ¥</td></tr><tr><td><strong>netstat</strong></td><td>-r</td><td>æ˜¾ç¤ºIPè·¯ç”±è¡¨,æ•ˆæœä¸route printä¸€æ ·</td></tr><tr><td><strong>route</strong></td><td>print</td><td>æ˜¾ç¤ºè·¯ç”±è¡¨</td></tr><tr><td><strong>route</strong></td><td>add</td><td>æ·»åŠ é™æ€è·¯ç”±,é‡å¯ä¸åœ¨ï¼šroute add [ç›®çš„ç½‘ç»œ] mask [å­ç½‘æ©ç ] [ç½‘å…³åœ°å€] -p</td></tr><tr><td><strong>nslookup</strong></td><td>host&#x2F;IP</td><td>è§£æåŸŸåï¼Œåå‘è§£æIPåœ°å€</td></tr></tbody></table><h2 id="ç¬¬12ç« -ç½‘ç»œè§„åˆ’è®¾è®¡"><a href="#ç¬¬12ç« -ç½‘ç»œè§„åˆ’è®¾è®¡" class="headerlink" title="ç¬¬12ç«  ç½‘ç»œè§„åˆ’è®¾è®¡"></a>ç¬¬12ç«  ç½‘ç»œè§„åˆ’è®¾è®¡</h2><h3 id="ç»¼åˆå¸ƒçº¿"><a href="#ç»¼åˆå¸ƒçº¿" class="headerlink" title="ç»¼åˆå¸ƒçº¿"></a>ç»¼åˆå¸ƒçº¿</h3><p>ç»“æ„åŒ–å¸ƒçº¿ç³»ç»ŸåŒ…å«6ä¸ªå­ç³»ç»Ÿï¼š å·¥ä½œåŒºå­ç³»ç»Ÿã€æ°´å¹³å­ç³»ç»Ÿã€å¹²çº¿å­ç³»ç»Ÿã€è®¾å¤‡é—´å­ç³»ç»Ÿã€ç®¡ç†å­ç³»ç»Ÿå’Œå»ºç­‘ç¾¤å­ç³»ç»Ÿã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.2yybdjwovk.jpg" alt="image"></p><h3 id="ç½‘ç»œåˆ†æä¸è®¾è®¡"><a href="#ç½‘ç»œåˆ†æä¸è®¾è®¡" class="headerlink" title="ç½‘ç»œåˆ†æä¸è®¾è®¡"></a>ç½‘ç»œåˆ†æä¸è®¾è®¡</h3><p><strong>äº”é˜¶æ®µç½‘ç»œè§„åˆ’ï¼ˆç€‘å¸ƒæ¨¡å‹ï¼‰</strong><br>éœ€æ±‚åˆ†æ-é€šä¿¡è§„èŒƒè®¾è®¡-é€»è¾‘ç½‘ç»œè®¾è®¡-ç‰©ç†ç½‘ç»œè®¾è®¡-å®æ–½<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.51e41mhplc.jpg" alt="image"><br><strong>ç½‘ç»œå®‰å…¨æŠ€æœ¯æªæ–½è¡¨</strong><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.7ax4l47q19.jpg" alt="image"><br><strong>æŠ€æœ¯è¯„ä»·</strong></p><ul><li>è€ƒè™‘ ï¼šé€šä¿¡å¸¦å®½ã€æŠ€æœ¯æˆç†Ÿæ€§ã€è¿æ¥æœåŠ¡ç±»å‹ã€å¯æ‰©å±•æ€§ã€é«˜æŠ•èµ„äº§</li><li>è¦ç”¨æˆç†ŸæŠ€æœ¯</li></ul><h3 id="ç½‘ç»œç»“æ„ä¸åŠŸèƒ½"><a href="#ç½‘ç»œç»“æ„ä¸åŠŸèƒ½" class="headerlink" title="ç½‘ç»œç»“æ„ä¸åŠŸèƒ½"></a>ç½‘ç»œç»“æ„ä¸åŠŸèƒ½</h3><p><strong>å•æ ¸å¿ƒå±€åŸŸç½‘</strong><br><strong>åŒæ ¸å¿ƒå±€åŸŸç½‘</strong><br><strong>å±‚çº§å±€åŸŸç½‘ç»“æ„</strong><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.4jo2d1sv5t.jpg" alt="image"></p><h3 id="å¹¿åŸŸç½‘æ¥å…¥æŠ€æœ¯"><a href="#å¹¿åŸŸç½‘æ¥å…¥æŠ€æœ¯" class="headerlink" title="å¹¿åŸŸç½‘æ¥å…¥æŠ€æœ¯"></a>å¹¿åŸŸç½‘æ¥å…¥æŠ€æœ¯</h3><ol><li><p><strong>PSTNå…¬ç”¨ç”µè¯ç½‘ç»œ</strong></p><ul><li>é€Ÿç‡ï¼š56kb&#x2F;s</li></ul></li><li><p><strong>ISDN</strong></p><ul><li><strong>BRI</strong>ï¼š2B+D&#x3D;144K</li><li><strong>PRI</strong>ï¼š30B+D&#x3D;2.048M</li></ul></li><li><p><strong>çº¿ç¼†è°ƒåˆ¶è§£è°ƒå™¨æ¥å…¥</strong></p><ul><li>æ¶æ„ï¼šHFCä¸»å¹²å…‰çº¤, å…‰çº¤åˆ°å°åŒº, åŒè½´ç”µç¼†æ¥å…¥</li><li>HFCç½‘ç»œä¸­ç”¨æˆ·æ˜¯é€šè¿‡åŒè½´ç”µç¼†æ¥å…¥ , éœ€è¦ <strong>Cable Modem</strong> , å±€ç«¯ç»ˆç»“è®¾å¤‡æ˜¯<strong>CMTS</strong> , ADSLç½‘ç»œå±€ç«¯ç»ˆç»“è®¾å¤‡æ˜¯IDSLAM,PONç½‘ç»œå±€ç«¯ç»ˆç»“è®¾å¤‡æ˜¯OLT ï¼Œ è¿è¥å•†ç½‘ç»œç”¨æˆ·è®¤è¯ä¸€èˆ¬éƒ½é‡‡ç”¨PPPOE, è´Ÿè´£çš„è®¾å¤‡æ˜¯BRASã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.6t72wjvqck.jpg" alt="image"></li></ul></li><li><p><strong>æ•°å­—ç”¨æˆ·çº¿è·¯è¿œç¨‹æ¥å…¥xDSL</strong></p><ul><li>è®¡ç®—æœºé€šè¿‡ASDL Modemæ¥å…¥<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240920/image.1vym2ph4qj.jpg" alt="image"></li></ul></li><li><p><strong>PONæ— æºå…‰ç½‘ç»œ</strong></p><ul><li>ä¸Šè¡Œé“¾è·¯ï¼ˆä»ONUåˆ°OLTï¼‰ä½¿ç”¨TDMAæŠ€æœ¯ï¼Œå…è®¸å¤šä¸ªONUsåœ¨ä¸åŒçš„æ—¶é—´é—´éš”å†…å‘é€æ•°æ®åˆ°OLTï¼Œä»è€Œå®ç°é«˜æ•ˆçš„å¸¦å®½åˆ©ç”¨å’Œå†²çªé¿å…ã€‚</li><li>ä¸‹è¡Œé“¾è·¯ï¼ˆä»OLTåˆ°ONUï¼‰åˆ™é€šå¸¸ä½¿ç”¨å¹¿æ’­æŠ€æœ¯</li></ul></li></ol><h3 id="ç½‘ç»œæ•…éšœè¯Šæ–­ä¸-æ’æŸ¥"><a href="#ç½‘ç»œæ•…éšœè¯Šæ–­ä¸-æ’æŸ¥" class="headerlink" title="ç½‘ç»œæ•…éšœè¯Šæ–­ä¸ æ’æŸ¥"></a>ç½‘ç»œæ•…éšœè¯Šæ–­ä¸ æ’æŸ¥</h3><ol><li><p><strong>å…‰æ—¶åŸŸåå°„è®¡ï¼ˆOTDRï¼‰</strong>ï¼š</p><ul><li>ç”¨äºæ£€æµ‹å…‰ç¼†çš„å…‰è¡°å‡æƒ…å†µï¼Œé€šè¿‡æµ‹é‡å…‰ä¿¡å·åœ¨å…‰çº¤ä¸­çš„åå°„å’Œæ•£å°„ï¼Œå¯ä»¥å‘ç°å…‰ç¼†ä¸­çš„æ•…éšœç‚¹ï¼Œå¦‚æ–­è£‚ã€å¼¯æ›²æˆ–è¿æ¥ä¸è‰¯ç­‰é—®é¢˜ã€‚OTDRèƒ½å¤Ÿæä¾›å…‰ç¼†çš„æŸè€—å›¾ï¼Œå¸®åŠ©ç½‘ç»œç®¡ç†å‘˜å¿«é€Ÿå®šä½æ•…éšœä½ç½®ã€‚</li></ul></li><li><p><strong>å…‰åŠŸç‡è®¡</strong>ï¼š</p><ul><li>ç”¨äºæµ‹é‡å…‰ç¼†ä¸­å…‰ä¿¡å·çš„åŠŸç‡ã€‚å…‰åŠŸç‡è®¡å¯ä»¥æ£€æµ‹å…‰ç¼†çš„è¾“å…¥å’Œè¾“å‡ºåŠŸç‡ï¼Œå¸®åŠ©åˆ¤æ–­å…‰ç¼†çš„æŸè€—æ˜¯å¦åœ¨æ­£å¸¸èŒƒå›´å†…ã€‚å½“å…‰ç¼†æŸè€—è¶…å‡ºæ­£å¸¸èŒƒå›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…‰åŠŸç‡è®¡è¿›è¡Œè¿›ä¸€æ­¥çš„æ£€æµ‹ã€‚</li></ul></li><li><p><strong>å…‰çº¤ç†”æ¥æœº</strong>ï¼š</p><ul><li>å½“å‘ç°å…‰ç¼†æ–­è£‚ç­‰ç‰©ç†æŸä¼¤æ—¶ï¼Œå…‰çº¤ç†”æ¥æœºå¯ä»¥ç”¨æ¥ä¿®å¤å…‰ç¼†ã€‚é€šè¿‡å°†æ–­è£‚çš„å…‰çº¤ç«¯é¢ç²¾ç¡®å¯¹å‡†å¹¶ç†”æ¥ï¼Œå¯ä»¥æ¢å¤å…‰ç¼†çš„ä¼ è¾“åŠŸèƒ½ã€‚å…‰çº¤ç†”æ¥æœºæ˜¯å¤„ç†å…‰ç¼†ç‰©ç†æ–­è£‚çš„å¸¸ç”¨è®¾å¤‡ã€‚</li></ul></li><li><p><strong>ç½‘ç»œå¯»çº¿ä»ª</strong>ï¼š</p><ul><li>ç”¨äºåœ¨å¤æ‚çš„ç½‘ç»œå¸ƒçº¿ç¯å¢ƒä¸­æ‰¾åˆ°ç‰¹å®šçš„ç”µç¼†æˆ–å…‰çº¤ã€‚ç½‘ç»œå¯»çº¿ä»ªé€šè¿‡å‘é€ç‰¹å®šçš„ä¿¡å·å¹¶æ£€æµ‹è¿”å›ä¿¡å·ï¼Œå¸®åŠ©å®šä½ç‰¹å®šçš„çº¿è·¯ã€‚</li></ul></li><li><p><strong>å¯è§å…‰æ£€æµ‹ç¬”</strong>ï¼š</p><ul><li>ç”¨äºæ£€æµ‹å…‰çº¤æ˜¯å¦æ­£ç¡®è¿æ¥ä»¥åŠå…‰ä¿¡å·çš„å­˜åœ¨ã€‚å¯è§å…‰æ£€æµ‹ç¬”å¯ä»¥å‘å°„å¯è§å…‰ï¼Œå½“å…‰çº¤æ­£ç¡®è¿æ¥å¹¶ä¸”æœ‰å…‰ä¿¡å·é€šè¿‡æ—¶ï¼Œå¯ä»¥åœ¨å…‰çº¤çš„å¦ä¸€ç«¯çœ‹åˆ°å…‰ã€‚</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DNSä¿®æ”¹å™¨(linux+win)</title>
    <link href="/2024/09/19/DNS%E4%BF%AE%E6%94%B9%E5%99%A8(linux+win)/"/>
    <url>/2024/09/19/DNS%E4%BF%AE%E6%94%B9%E5%99%A8(linux+win)/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ‰éœ€æ±‚ï¼šä¿®æ”¹DNSæœåŠ¡å™¨ï¼Œä¸»å¤‡ä¸¤ä¸ªï¼Œè¦æ±‚æ— è„‘é…ç½®</p><h2 id="linuxä¸‹ä¿®æ”¹DNS-æ— éœ€rootæƒé™"><a href="#linuxä¸‹ä¿®æ”¹DNS-æ— éœ€rootæƒé™" class="headerlink" title="linuxä¸‹ä¿®æ”¹DNS(æ— éœ€rootæƒé™)"></a>linuxä¸‹ä¿®æ”¹DNS(æ— éœ€rootæƒé™)</h2><p>å¸¸è§„shellå‘½ä»¤æ–¹æ³•éƒ½éœ€è¦linuxçš„rootæƒé™æ‰èƒ½æ‰§è¡Œï¼Œä½†æˆ‘å‘ç°æ™®é€šç”¨æˆ·åœ¨å›¾å½¢ç•Œé¢æ”¹DNSä¹Ÿèƒ½ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´é€šå¸¸æ™®é€šç”¨æˆ·ä¹Ÿæ˜¯æ‹¥æœ‰ä¿®æ”¹ç½‘ç»œé…ç½®çš„æƒé™çš„ï¼Œåªæ˜¯ä¸èƒ½é€šè¿‡ä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶æ¥å®ç°ï¼Œä½†æ˜¯æœ‰å…¶ä»–æ–¹æ³•ï¼Œå¦‚nmcliå‘½ä»¤</p><p>æŸ¥çœ‹æ´»åŠ¨çš„ç½‘ç»œè¿æ¥åç§°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli -t -f NAME con show --active</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹DNS</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli con mod &lt;connection_name&gt; ipv4.dns &lt;dns_primary&gt;,&lt;dns_secondary&gt;</span><br></pre></td></tr></table></figure><p>åˆ·æ–°DNSç¼“å­˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-resolve --flush-caches</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import subprocess</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">def set_dns(dns_primary, dns_secondary):</span><br><span class="line">    try:</span><br><span class="line">        connection_name = subprocess.check_output([&#x27;nmcli&#x27;, &#x27;-t&#x27;, &#x27;-f&#x27;, &#x27;NAME&#x27;, &#x27;con&#x27;, &#x27;show&#x27;,&#x27;--active&#x27;]).decode().strip()</span><br><span class="line">        subprocess.run([&#x27;nmcli&#x27;, &#x27;con&#x27;, &#x27;mod&#x27;, connection_name, &#x27;ipv4.dns&#x27;, f&#x27;&#123;dns_primary&#125;,&#123;dns_secondary&#125;&#x27;])</span><br><span class="line">        subprocess.run([&#x27;nmcli&#x27;, &#x27;con&#x27;, &#x27;down&#x27;, connection_name])</span><br><span class="line">        subprocess.run([&#x27;nmcli&#x27;, &#x27;con&#x27;, &#x27;up&#x27;, connection_name])</span><br><span class="line">        subprocess.run([&#x27;systemd-resolve&#x27;, &#x27;--flush&#x27;, &#x27;caches&#x27;])</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        try:</span><br><span class="line">            dns_info = subprocess.check_output([&#x27;nmcli&#x27;], text=True)</span><br><span class="line">            if dns_primary in dns_info and dns_secondary in dns_info:</span><br><span class="line">                print(&quot;è®¾ç½®DNSé…ç½®æˆåŠŸ&quot;)</span><br><span class="line">        except subprocess.CalledProcessError as e:</span><br><span class="line">            print(f&quot;è®¾ç½®DNSé…ç½®å¤±è´¥: &#123;e&#125;&quot;)</span><br><span class="line">            return False</span><br><span class="line">    except subprocess.CalledProcessError as e:</span><br><span class="line">        print(f&quot;è®¾ç½®DNSé…ç½®å¤±è´¥: &#123;e&#125;&quot;)</span><br><span class="line">        return False</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    dns_primary = &quot;114.114.114.114&quot;</span><br><span class="line">    dns_secondary = &quot;8.8.8.8&quot;</span><br><span class="line">    set_dns(dns_primary, dns_secondary)</span><br><span class="line">    input(&quot;æŒ‰ä»»æ„é”®é€€å‡º...&quot;)</span><br><span class="line">    # pyinstaller --onefile -c --uac-admin --noconfirm setDNS.py</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨pyinstallerç›´æ¥æ‰“åŒ…æˆlinuxä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶</p><h2 id="windowsä¸‹ä¿®æ”¹DNS-é»˜è®¤ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€"><a href="#windowsä¸‹ä¿®æ”¹DNS-é»˜è®¤ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€" class="headerlink" title="windowsä¸‹ä¿®æ”¹DNS(é»˜è®¤ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€)"></a>windowsä¸‹ä¿®æ”¹DNS(é»˜è®¤ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€)</h2><p>éå†æ‰€æœ‰ç½‘å¡ï¼Œå¦‚æœIPæ˜¯ä»¥192å¼€å¤´çš„ï¼Œåˆ™ä¿®æ”¹å…¶DNSé…ç½®</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wmi</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_dns_configuration</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        wmiService = wmi.WMI()</span><br><span class="line">        colNicConfigs = wmiService.Win32_NetworkAdapterConfiguration(IPEnabled=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">for</span> colNicConfig <span class="keyword">in</span> colNicConfigs:</span><br><span class="line">            <span class="keyword">for</span> ip <span class="keyword">in</span> colNicConfig.ipaddress:</span><br><span class="line">                <span class="keyword">if</span> re.<span class="keyword">match</span>(<span class="string">r&#x27;192\.&#x27;</span>, ip) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    arrDNSServers = [<span class="string">&#x27;114.114.114.114&#x27;</span>, <span class="string">&#x27;8.8.8.8&#x27;</span>]</span><br><span class="line">                    returnValue = colNicConfig.SetDNSServerSearchOrder(DNSServerSearchOrder=arrDNSServers)</span><br><span class="line">                    <span class="keyword">if</span> returnValue[<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&quot;DNSä¿®æ”¹æˆåŠŸ&quot;</span>)</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&quot;DNSä¿®æ”¹å¤±è´¥&quot;</span>)</span><br><span class="line">        flushDNS = <span class="string">&quot;ipconfig /flushdns&quot;</span></span><br><span class="line">        os.system(flushDNS)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;DNSé…ç½®æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;ç¨‹åºè¿è¡Œé”™è¯¯ï¼ŒåŸå› ï¼š<span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    set_dns_configuration()</span><br><span class="line">    <span class="built_in">input</span>(<span class="string">&#x27;æŒ‰ä¸‹ä»»æ„é”®é€€å‡º&#x27;</span>)</span><br><span class="line">    <span class="comment"># pyinstaller --onefile -c --uac-admin --noconfirm set_DNS_win.py</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller --onefile -c --uac-admin --noconfirm set_DNS_win.py</span><br></pre></td></tr></table></figure><p><code>--uac-admin</code>å‚æ•°è¡¨ç¤ºé»˜è®¤ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>linux</tag>
      
      <tag>DNS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VMwareè™šæ‹Ÿæœºå’Œä¸»æœºå…±äº«æ–‡ä»¶å¤¹</title>
    <link href="/2024/09/19/VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E4%B8%BB%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
    <url>/2024/09/19/VMware%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E4%B8%BB%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>VMwareè£…äº†ä¸ªé“¶æ²³éº’éºŸç³»ç»Ÿçš„è™šæ‹Ÿæœºï¼Œéœ€è¦å’Œä¸»æœºäº’ä¼ æ–‡ä»¶</p><h2 id="è™šæ‹Ÿæœºè®¾ç½®"><a href="#è™šæ‹Ÿæœºè®¾ç½®" class="headerlink" title="è™šæ‹Ÿæœºè®¾ç½®"></a>è™šæ‹Ÿæœºè®¾ç½®</h2><p>åœ¨è™šæ‹Ÿæœºå…³æœºçŠ¶æ€ä¸‹ï¼Œè™šæ‹Ÿæœºè®¾ç½®-é€‰é¡¹-å…±äº«æ–‡ä»¶å¤¹-æ·»åŠ <br><img src="https://xinhaojin.github.io/picx-images-hosting/20240919/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240919103106.3k7yyi4n1m.jpg" alt="å¾®ä¿¡æˆªå›¾_20240919103106"></p><h2 id="æŒ‚è½½ç›®å½•"><a href="#æŒ‚è½½ç›®å½•" class="headerlink" title="æŒ‚è½½ç›®å½•"></a>æŒ‚è½½ç›®å½•</h2><p>è™šæ‹Ÿæœºå¼€æœºåï¼ŒæŒ‚è½½ç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t fuse.vmhgfs-fuse .host:/ /mnt/hgfs -o allow_other</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ <code>/mnt/hgfs</code>è¿™ä¸ªæ–‡ä»¶å¤¹å°±æ‰‹åŠ¨æ–°å»ºä¸€ä¸ª</p><p>å¦‚æœå‘½ä»¤è¡Œçœ‹ä¸åˆ°å°±åœ¨å›¾åƒç•Œé¢æ‰“å¼€çœ‹çœ‹<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240919/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240919103319.969pcd61vc.jpg" alt="å¾®ä¿¡æˆªå›¾_20240919103319"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>è™šæ‹Ÿæœº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pyinstalleræ‰“åŒ…32ä½exeæ–‡ä»¶</title>
    <link href="/2024/09/19/pyinstaller%E6%89%93%E5%8C%8532%E4%BD%8Dexe%E6%96%87%E4%BB%B6/"/>
    <url>/2024/09/19/pyinstaller%E6%89%93%E5%8C%8532%E4%BD%8Dexe%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ‰äº›ç¨‹åºéœ€è¦åœ¨win7 32ä½ç³»ç»Ÿä¸Šè¿è¡Œï¼Œpyinstalleré»˜è®¤æ‰“åŒ…çš„æ˜¯64ä½exeæ–‡ä»¶ï¼Œæ— æ³•è¿è¡Œåœ¨32ä½ç³»ç»Ÿä¸Šã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å‰ç½®ç¯å¢ƒï¼šconda</p><h3 id="åˆ‡æ¢condaè‡³32ä½å¼€å‘ç¯å¢ƒ"><a href="#åˆ‡æ¢condaè‡³32ä½å¼€å‘ç¯å¢ƒ" class="headerlink" title="åˆ‡æ¢condaè‡³32ä½å¼€å‘ç¯å¢ƒ"></a>åˆ‡æ¢condaè‡³32ä½å¼€å‘ç¯å¢ƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda config --env --set subdir win-32</span><br><span class="line">conda info</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€åœ¨è¿›è¡ŒåŒ…çš„å®‰è£…ã€æ›´æ–°ç­‰æ“ä½œæ—¶ï¼Œconda ä¼šä¼˜å…ˆè€ƒè™‘ä¸º win-32 å¹³å°è®¾è®¡çš„åŒ…ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œæ˜¯å…¨å±€condaé…ç½®ï¼Œåœ¨æ–°å»ºå®Œæ–°çš„condaç¯å¢ƒï¼Œè£…å¥½ä¾èµ–åï¼Œéœ€è¦æ”¹ä¸ºwin-64ï¼‰</p><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºä¿¡æ¯ä¸­æ˜¾ç¤º platform : win-32</p><h3 id="æ–°å»º-conda-ç¯å¢ƒ"><a href="#æ–°å»º-conda-ç¯å¢ƒ" class="headerlink" title="æ–°å»º conda ç¯å¢ƒ"></a>æ–°å»º conda ç¯å¢ƒ</h3><p>win7 32ä½ç³»ç»Ÿæœ€å¤šæ”¯æŒåˆ°python 3.8.10,å› æ­¤è£…ä½ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py32 python=3.7.13</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ï¼Œ32ä½å¼€å‘ç¯å¢ƒå·²ç»å‡†å¤‡å¥½äº†ï¼Œä»¥åå†è¦ç”¨åˆ°32ä½pythonç¯å¢ƒï¼Œåªéœ€è¦æ¿€æ´»è¿™ä¸ªç¯å¢ƒå³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate py32</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-pyinstaller"><a href="#å®‰è£…-pyinstaller" class="headerlink" title="å®‰è£… pyinstaller"></a>å®‰è£… pyinstaller</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyinstaller</span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…32ä½exeæ–‡ä»¶"><a href="#æ‰“åŒ…32ä½exeæ–‡ä»¶" class="headerlink" title="æ‰“åŒ…32ä½exeæ–‡ä»¶"></a>æ‰“åŒ…32ä½exeæ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller --onefile -c --uac-admin --noconfirm main.py</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>pyinstaller</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pipå¯¼å‡ºä¾èµ–ç¦»çº¿å®‰è£…</title>
    <link href="/2024/09/10/pip%E5%AF%BC%E5%87%BA%E4%BE%9D%E8%B5%96%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/"/>
    <url>/2024/09/10/pip%E5%AF%BC%E5%87%BA%E4%BE%9D%E8%B5%96%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸ºäº†æ–¹ä¾¿ç¦»çº¿æœºå™¨ç¯å¢ƒéƒ¨ç½²ï¼Œå¯ä»¥åœ¨æœ‰ç½‘çš„æœºå™¨ä¸Šå¯¼å‡ºrequirements.txtæ–‡ä»¶ï¼Œç„¶åä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šå®‰è£…ä¾èµ–</p><h3 id="å®‰è£…pipreqs"><a href="#å®‰è£…pipreqs" class="headerlink" title="å®‰è£…pipreqs"></a>å®‰è£…pipreqs</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipreqs</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆrequirements-txtæ–‡ä»¶"><a href="#ç”Ÿæˆrequirements-txtæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆrequirements.txtæ–‡ä»¶"></a>ç”Ÿæˆrequirements.txtæ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</span><br><span class="line">```shell</span><br><span class="line">pipreqs . </span><br></pre></td></tr></table></figure><p>ä¼šå¯¼å‡ºrequirements.txtæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†é¡¹ç›®æ‰€éœ€è¦çš„ä¾èµ–ï¼Œå¯èƒ½æŸäº›ä¾èµ–æ²¡æœ‰æ¶µç›–ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ </p><h3 id="ä¸‹è½½ä¾èµ–æ–‡ä»¶"><a href="#ä¸‹è½½ä¾èµ–æ–‡ä»¶" class="headerlink" title="ä¸‹è½½ä¾èµ–æ–‡ä»¶"></a>ä¸‹è½½ä¾èµ–æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir packages</span><br><span class="line">pip download -r requirements.txt -d packages</span><br></pre></td></tr></table></figure><p>ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆpackagesæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ°æ²¡æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šï¼Œç„¶ååœ¨æ²¡æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šæ‰§è¡Œ</p><h3 id="ç¦»çº¿å®‰è£…ä¾èµ–"><a href="#ç¦»çº¿å®‰è£…ä¾èµ–" class="headerlink" title="ç¦»çº¿å®‰è£…ä¾èµ–"></a>ç¦»çº¿å®‰è£…ä¾èµ–</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt -f /path/to/packages</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–è€…</span></span><br><span class="line">pip install -r requirements.txt --no-index --find-links=file:///path/to/packages</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IPsecæ¦‚å¿µåŠå·¥ä½œåŸç†</title>
    <link href="/2024/09/03/IPsec%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/"/>
    <url>/2024/09/03/IPsec%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯IPsecï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯IPsecï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯IPsecï¼Ÿ"></a>ä»€ä¹ˆæ˜¯IPsecï¼Ÿ</h2><p>IPsecï¼ˆInternet Protocol Securityï¼‰æ˜¯ä¸€ç§ç½‘ç»œå±‚å®‰å…¨åè®®ï¼Œç”¨äºä¿æŠ¤ç½‘ç»œé€šä¿¡çš„å®Œæ•´æ€§ã€æœºå¯†æ€§å’ŒçœŸå®æ€§ã€‚å®ƒæ˜¯ä¸€å¥—ç”±å¤šä¸ªåè®®å’Œç®—æ³•ç»„æˆçš„æ¡†æ¶ï¼Œå¯ä»¥åœ¨IPå±‚ä¸Šå¯¹æ•°æ®åŒ…è¿›è¡ŒåŠ å¯†å’Œè®¤è¯ï¼Œæ˜¯æ„å»ºVPNçš„ä¸€ç§æ ¸å¿ƒæŠ€æœ¯ã€‚</p><p><img src="https://xinhaojin.github.io/picx-images-hosting/1725329131814.2yyapdsvbc.jpg" alt="1725329131814"></p><h2 id="IPsecå·¥ä½œæ¨¡å¼"><a href="#IPsecå·¥ä½œæ¨¡å¼" class="headerlink" title="IPsecå·¥ä½œæ¨¡å¼"></a>IPsecå·¥ä½œæ¨¡å¼</h2><h3 id="ä¼ è¾“æ¨¡å¼ï¼ˆTransport-Modeï¼‰"><a href="#ä¼ è¾“æ¨¡å¼ï¼ˆTransport-Modeï¼‰" class="headerlink" title="ä¼ è¾“æ¨¡å¼ï¼ˆTransport Modeï¼‰"></a>ä¼ è¾“æ¨¡å¼ï¼ˆTransport Modeï¼‰</h3><ul><li><strong>åŠ å¯†èŒƒå›´</strong>ï¼šåªåŠ å¯†æ•°æ®åŒ…çš„æœ‰æ•ˆè½½è·éƒ¨åˆ†ã€‚</li><li><strong>IPå¤´</strong>ï¼šä¿ç•™åŸå§‹çš„IPå¤´ï¼Œä¸åŠ å¯†ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç«¯åˆ°ç«¯é€šä¿¡ï¼Œå¦‚ä¸¤å°ä¸»æœºä¹‹é—´çš„ç›´æ¥é€šä¿¡ã€‚</li><li><strong>é…ç½®</strong>ï¼šç›¸å¯¹ç®€å•ï¼Œæ€§èƒ½å¼€é”€è¾ƒå°ã€‚</li><li><strong>IPåœ°å€</strong>ï¼šä¸éšè—é€šä¿¡åŒæ–¹çš„IPåœ°å€ã€‚</li></ul><h3 id="éš§é“æ¨¡å¼ï¼ˆTunnel-Modeï¼‰"><a href="#éš§é“æ¨¡å¼ï¼ˆTunnel-Modeï¼‰" class="headerlink" title="éš§é“æ¨¡å¼ï¼ˆTunnel Modeï¼‰"></a>éš§é“æ¨¡å¼ï¼ˆTunnel Modeï¼‰</h3><ul><li><strong>åŠ å¯†èŒƒå›´</strong>ï¼šåŠ å¯†æ•´ä¸ªæ•°æ®åŒ…ï¼ŒåŒ…æ‹¬æœ‰æ•ˆè½½è·å’ŒIPå¤´ã€‚</li><li><strong>IPå¤´</strong>ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„IPå¤´ï¼Œéšè—åŸå§‹çš„IPå¤´ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç½‘ç»œåˆ°ç½‘ç»œçš„é€šä¿¡ï¼Œå¦‚VPNã€‚</li><li><strong>é…ç½®</strong>ï¼šç›¸å¯¹å¤æ‚ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚</li><li><strong>IPåœ°å€</strong>ï¼šå¯ä»¥éšè—é€šä¿¡åŒæ–¹çš„IPåœ°å€ï¼Œæä¾›æ›´é«˜çº§åˆ«çš„éšç§ã€‚</li></ul><h2 id="é€šä¿¡ä¿æŠ¤åè®®"><a href="#é€šä¿¡ä¿æŠ¤åè®®" class="headerlink" title="é€šä¿¡ä¿æŠ¤åè®®"></a>é€šä¿¡ä¿æŠ¤åè®®</h2><h3 id="AHï¼ˆAuthentication-Headerï¼‰"><a href="#AHï¼ˆAuthentication-Headerï¼‰" class="headerlink" title="AHï¼ˆAuthentication Headerï¼‰"></a>AHï¼ˆAuthentication Headerï¼‰</h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæä¾›æ•°æ®å®Œæ•´æ€§å’Œè®¤è¯ã€‚</li><li><strong>åŠ å¯†</strong>ï¼šä¸æä¾›æ•°æ®åŠ å¯†ã€‚</li><li><strong>NATæ”¯æŒ</strong>ï¼šä¸æ”¯æŒç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼Œå› ä¸º AH ä¿æŠ¤æ•´ä¸ª IP æ•°æ®åŒ…ï¼ŒåŒ…æ‹¬ IP å¤´ï¼Œè€Œ NAT éœ€è¦ä¿®æ”¹ IP å¤´ä¸­çš„åœ°å€ä¿¡æ¯ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/1725329435149.6t728cbzmm.jpg" alt="1725329435149"></li></ul><h3 id="ESPï¼ˆEncapsulating-Security-Payloadï¼‰"><a href="#ESPï¼ˆEncapsulating-Security-Payloadï¼‰" class="headerlink" title="ESPï¼ˆEncapsulating Security Payloadï¼‰"></a>ESPï¼ˆEncapsulating Security Payloadï¼‰</h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæä¾›æ•°æ®å®Œæ•´æ€§ã€è®¤è¯å’ŒåŠ å¯†ã€‚</li><li><strong>åŠ å¯†</strong>ï¼šä¿æŠ¤æ•°æ®ä¸è¢«æœªæˆæƒè®¿é—®å’Œç¯¡æ”¹ã€‚</li><li><strong>NATæ”¯æŒ</strong>ï¼šæ”¯æŒç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼Œå› ä¸º ESP åªåŠ å¯†æ•°æ®éƒ¨åˆ†ï¼Œä¸åŒ…æ‹¬ IP å¤´ï¼Œå…è®¸ NAT è®¾å¤‡ä¿®æ”¹åœ°å€ä¿¡æ¯ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/1725329442282.1lbrlcjn7k.jpg" alt="1725329442282"></li></ul><h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><h3 id="SA-Security-Association"><a href="#SA-Security-Association" class="headerlink" title="SA(Security Association)"></a>SA(Security Association)</h3><p><strong>å®šä¹‰</strong><br>SA æ˜¯ IPsec ä¸­ç”¨äºå®šä¹‰ä¸¤ä¸ªé€šä¿¡å®ä½“é—´å®‰å…¨é€šä¿¡è§„åˆ™çš„å‚æ•°é›†åˆã€‚</p><p><strong>ç»„æˆ</strong></p><ul><li><strong>åŠ å¯†å’Œè®¤è¯ç®—æ³•</strong>ï¼šç¡®å®šç”¨äºä¿æŠ¤æ•°æ®çš„åŠ å¯†å’Œè®¤è¯æ–¹æ³•ã€‚</li><li><strong>å¯†é’¥</strong>ï¼šç”¨äºæ•°æ®åŠ å¯†å’ŒéªŒè¯çš„å¯†é’¥ã€‚</li><li><strong>ç”Ÿå­˜å‘¨æœŸ</strong>ï¼šå®šä¹‰ SA çš„æœ‰æ•ˆæœŸé™å’Œæ•°æ®åŒ…æ•°é‡é™åˆ¶ã€‚</li></ul><p><strong>ä½œç”¨</strong><br>SAs ç¡®ä¿ IPsec éš§é“å†…çš„æ•°æ®ä¼ è¾“æ˜¯å®‰å…¨å’Œå—ä¿æŠ¤çš„ã€‚</p><h3 id="IKEï¼ˆInternet-Key-Exchangeï¼‰"><a href="#IKEï¼ˆInternet-Key-Exchangeï¼‰" class="headerlink" title="IKEï¼ˆInternet Key Exchangeï¼‰"></a>IKEï¼ˆInternet Key Exchangeï¼‰</h3><p><strong>å®šä¹‰</strong><br>IKE æ˜¯ä¸€ç§åè®®ï¼Œç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡å®ä½“é—´è‡ªåŠ¨åå•†ã€å»ºç«‹å’Œç»´æŠ¤ SAsã€‚</p><p><strong>åŠŸèƒ½</strong></p><ul><li><strong>å¯†é’¥äº¤æ¢</strong>ï¼šIKE è´Ÿè´£ç”Ÿæˆå’Œäº¤æ¢åŠ å¯†å¯†é’¥ã€‚</li><li><strong>å‚æ•°åå•†</strong>ï¼šIKE åå•†åŠ å¯†ã€è®¤è¯å’Œå…¶å®ƒå®‰å…¨å‚æ•°ã€‚</li><li><strong>å®‰å…¨é€šé“</strong>ï¼šIKE ç¡®ä¿å¯†é’¥äº¤æ¢è¿‡ç¨‹çš„å®‰å…¨æ€§ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/1725332232301.54xpb5mrdk.jpg" alt="1725332232301"></li></ul><h3 id="ä¸¤ç§SA"><a href="#ä¸¤ç§SA" class="headerlink" title="ä¸¤ç§SA"></a>ä¸¤ç§SA</h3><ul><li>IKE SA ä¸»è¦ç”¨äºå»ºç«‹å®‰å…¨çš„é€šä¿¡ä¿¡é“ï¼Œè¿›è¡Œå¯†é’¥äº¤æ¢ä»¥åŠåå•† IPsec SA çš„å„ç§å‚æ•°ç­‰ã€‚</li><li>IPsec SA åˆ™åŸºäº IKE SA åå•†çš„ç»“æœï¼Œå…·ä½“å®šä¹‰å¯¹å®é™… IP æ•°æ®åŒ…è¿›è¡ŒåŠ å¯†ã€è®¤è¯å’Œå°è£…ç­‰æ“ä½œçš„å®‰å…¨è§„åˆ™å’Œå‚æ•°ï¼Œä»¥å®ç°æ•°æ®çš„å®‰å…¨ä¼ è¾“ã€‚</li></ul><h2 id="IPsec-VPN-çš„å»ºç«‹"><a href="#IPsec-VPN-çš„å»ºç«‹" class="headerlink" title="IPsec VPN çš„å»ºç«‹"></a>IPsec VPN çš„å»ºç«‹</h2><p>IPsec VPN é€šè¿‡åœ¨ç½‘ç»œé—´å»ºç«‹åŠ å¯†çš„é€šä¿¡éš§é“æ¥ç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><h3 id="ç¬¬ä¸€é˜¶æ®µ"><a href="#ç¬¬ä¸€é˜¶æ®µ" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µ"></a>ç¬¬ä¸€é˜¶æ®µ</h3><p>IPsec VPNå»ºç«‹çš„ç¬¬ä¸€é˜¶æ®µä¸»è¦æ˜¯ä¸ºäº†å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ï¼Œç”¨äºåç»­çš„åå•†å’Œæ•°æ®ä¼ è¾“ã€‚</p><h4 id="ä¸»åŠ¨æ¨¡å¼"><a href="#ä¸»åŠ¨æ¨¡å¼" class="headerlink" title="ä¸»åŠ¨æ¨¡å¼"></a>ä¸»åŠ¨æ¨¡å¼</h4><ul><li>ç‰¹ç‚¹ï¼šåœ¨ä¸»åŠ¨æ¨¡å¼ä¸‹ï¼Œé€šä¿¡åŒæ–¹ä¼šè¿›è¡Œå¤šæ¬¡æ¶ˆæ¯äº¤æ¢ï¼Œä»¥åå•†å®‰å…¨å‚æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ç›¸å¯¹è¾ƒæ…¢ï¼Œä½†æ›´åŠ å®‰å…¨ã€‚</li><li>æ­¥éª¤ï¼š<ul><li>å‘èµ·æ–¹å‘é€ä¸€ä¸ªåŒ…å«å®‰å…¨ç­–ç•¥æè®®çš„æ¶ˆæ¯ç»™å“åº”æ–¹ã€‚</li><li>å“åº”æ–¹æ”¶åˆ°æ¶ˆæ¯åï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®‰å…¨ç­–ç•¥ï¼Œå¹¶å‘é€å›åº”æ¶ˆæ¯ã€‚</li><li>åŒæ–¹è¿›è¡Œå¯†é’¥äº¤æ¢ï¼Œä»¥ç”Ÿæˆç”¨äºåŠ å¯†å’Œè®¤è¯çš„å…±äº«å¯†é’¥ã€‚</li><li>æœ€åï¼ŒåŒæ–¹è¿›è¡Œèº«ä»½éªŒè¯ï¼Œç¡®ä¿é€šä¿¡çš„åŒæ–¹æ˜¯åˆæ³•çš„ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/1725332902352.7w6rj89cup.jpg" alt="1725332902352"></li></ul></li></ul><h4 id="é‡è›®æ¨¡å¼"><a href="#é‡è›®æ¨¡å¼" class="headerlink" title="é‡è›®æ¨¡å¼"></a>é‡è›®æ¨¡å¼</h4><ul><li>ç‰¹ç‚¹ï¼šé‡è›®æ¨¡å¼çš„åå•†è¿‡ç¨‹ç›¸å¯¹ç®€å•å¿«é€Ÿï¼Œä½†å®‰å…¨æ€§ç›¸å¯¹è¾ƒä½ã€‚</li><li>æ­¥éª¤ï¼š<ul><li>å‘èµ·æ–¹ç›´æ¥å‘é€ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®‰å…¨ç­–ç•¥æè®®å’Œèº«ä»½ä¿¡æ¯çš„æ¶ˆæ¯ç»™å“åº”æ–¹ã€‚</li><li>å“åº”æ–¹æ”¶åˆ°æ¶ˆæ¯åï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å®‰å…¨ç­–ç•¥ï¼Œå¹¶å‘é€å›åº”æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«èº«ä»½éªŒè¯ä¿¡æ¯ã€‚</li><li>å‘èµ·æ–¹æ”¶åˆ°å›åº”æ¶ˆæ¯åï¼Œè¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™å»ºç«‹å®‰å…¨é€šé“ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/1725332909549.99tan9ku0w.jpg" alt="1725332909549"></li></ul></li></ul><h4 id="å¯†é’¥çš„äº§ç”Ÿ"><a href="#å¯†é’¥çš„äº§ç”Ÿ" class="headerlink" title="å¯†é’¥çš„äº§ç”Ÿ"></a>å¯†é’¥çš„äº§ç”Ÿ</h4><p>Diffie-Hellmanï¼ˆDHï¼‰ç®—æ³•æ˜¯ä¸€ç§å¯†é’¥äº¤æ¢ç®—æ³•ï¼Œç”¨äºåœ¨ä¸å®‰å…¨çš„é€šä¿¡ä¿¡é“ä¸Šå®‰å…¨åœ°ç”Ÿæˆå…±äº«å¯†é’¥ã€‚ä»¥ä¸‹æ˜¯ DH ç®—æ³•çš„å…·ä½“æµç¨‹ï¼š</p><ol><li><p>åˆå§‹åŒ–å‚æ•°</p><ul><li>é¦–å…ˆç¡®å®šä¸¤ä¸ªå¤§ç´ æ•° <code>p</code>å’Œ <code>g</code>ï¼Œå…¶ä¸­ <code>p</code>æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„ç´ æ•°ï¼Œ<code>g</code>æ˜¯ä¸€ä¸ªå°äº <code>p</code>çš„æ•´æ•°ï¼Œä¸” <code>g</code>æ˜¯ <code>p</code>çš„ä¸€ä¸ªåŸæ ¹ã€‚è¿™äº›å‚æ•°å¯ä»¥å…¬å¼€ã€‚</li></ul></li><li><p>åŒæ–¹ç”Ÿæˆç§é’¥</p><ul><li>é€šä¿¡åŒæ–¹ï¼ˆé€šå¸¸ç§°ä¸º Alice å’Œ Bobï¼‰å„è‡ªç‹¬ç«‹åœ°ç”Ÿæˆä¸€ä¸ªéšæœºæ•´æ•°ä½œä¸ºç§é’¥ã€‚</li><li>Alice ç”Ÿæˆç§é’¥ <code>a</code>ï¼Œ<code>a</code>æ˜¯ä¸€ä¸ªéšæœºæ•´æ•°ä¸”æ»¡è¶³ <code>1 &lt; a &lt; p - 1</code>ã€‚</li><li>Bob ç”Ÿæˆç§é’¥ <code>b</code>ï¼ŒåŒæ · <code>1 &lt; b &lt; p - 1</code>ã€‚</li></ul></li><li><p>è®¡ç®—å…¬é’¥</p><ul><li>Alice å’Œ Bob åˆ†åˆ«ä½¿ç”¨è‡ªå·±çš„ç§é’¥å’Œå…¬å¼€çš„å‚æ•°è®¡ç®—å…¬é’¥ã€‚</li><li>Alice è®¡ç®—å…¬é’¥ <code>A = g^a mod p</code>ã€‚</li><li>Bob è®¡ç®—å…¬é’¥ <code>B = g^b mod p</code>ã€‚</li></ul></li><li><p>äº¤æ¢å…¬é’¥</p><ul><li>Alice å°†è‡ªå·±çš„å…¬é’¥ <code>A</code>å‘é€ç»™ Bobã€‚</li><li>Bob å°†è‡ªå·±çš„å…¬é’¥ <code>B</code>å‘é€ç»™ Aliceã€‚</li></ul></li><li><p>è®¡ç®—å…±äº«å¯†é’¥</p><ul><li>Alice æ”¶åˆ° Bob çš„å…¬é’¥ <code>B</code>åï¼Œè®¡ç®—å…±äº«å¯†é’¥ <code>K = B^a mod p</code>ã€‚</li><li>Bob æ”¶åˆ° Alice çš„å…¬é’¥ <code>A</code>åï¼Œè®¡ç®—å…±äº«å¯†é’¥ <code>K = A^b mod p</code>ã€‚</li></ul></li></ol><p>ç”±äºæŒ‡æ•°è¿ç®—çš„æ€§è´¨ï¼ŒåŒæ–¹è®¡ç®—å¾—åˆ°çš„å…±äº«å¯†é’¥æ˜¯ç›¸åŒçš„ï¼Œå³ <code>K = (g^b mod p)^a mod p = (g^a mod p)^b mod p</code>ã€‚</p><p>è¿™ä¸ªå…±äº«å¯†é’¥å¯ä»¥ç”¨äºåç»­çš„åŠ å¯†é€šä¿¡ï¼Œåªæœ‰é€šä¿¡åŒæ–¹çŸ¥é“è¿™ä¸ªå¯†é’¥ï¼Œæ”»å‡»è€…å³ä½¿æˆªè·äº†å…¬å¼€å‚æ•°å’Œå…¬é’¥ï¼Œä¹Ÿå¾ˆéš¾è®¡ç®—å‡ºå…±äº«å¯†é’¥ï¼Œå› ä¸ºè®¡ç®—ç¦»æ•£å¯¹æ•°æ˜¯ä¸€ä¸ªéå¸¸å›°éš¾çš„é—®é¢˜ã€‚</p><h3 id="ç¬¬äºŒé˜¶æ®µ"><a href="#ç¬¬äºŒé˜¶æ®µ" class="headerlink" title="ç¬¬äºŒé˜¶æ®µ"></a>ç¬¬äºŒé˜¶æ®µ</h3><p>IPsec VPNå»ºç«‹çš„ç¬¬äºŒé˜¶æ®µæ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µå»ºç«‹çš„å®‰å…¨é€šé“åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åå•†å…·ä½“çš„æ•°æ®åŠ å¯†å’Œè®¤è¯å‚æ•°ï¼Œä»¥ç¡®ä¿å®é™…æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><ul><li>åŠ å¯†ç®—æ³•é€‰æ‹©ï¼šåŒæ–¹åå•†é€‰æ‹©ä¸€ç§åˆé€‚çš„åŠ å¯†ç®—æ³•ï¼Œå¦‚ AESã€DES ç­‰ã€‚</li><li>è®¤è¯ç®—æ³•é€‰æ‹©ï¼šç¡®å®šä¸€ç§è®¤è¯ç®—æ³•ï¼Œå¦‚ HMAC-SHA1ã€HMAC-SHA256 ç­‰ã€‚</li><li>å°è£…åè®®ï¼šé€‰æ‹© IPsec çš„å°è£…åè®®ï¼Œå¦‚ ESPï¼ˆEncapsulating Security Payloadï¼‰æˆ– AHï¼ˆAuthentication Headerï¼‰ã€‚</li><li>å®‰å…¨å…³è”ï¼ˆSAï¼‰å»ºç«‹ï¼šæ ¹æ®åå•†çš„å‚æ•°ï¼Œå»ºç«‹å®‰å…¨å…³è”ï¼Œç”¨äºå®é™…çš„æ•°æ®åŠ å¯†å’Œè®¤è¯ã€‚</li></ul><p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªé˜¶æ®µçš„åå•†å’Œå»ºç«‹ï¼ŒIPsec VPN å¯ä»¥åœ¨ç½‘ç»œé—´å»ºç«‹èµ·å®‰å…¨çš„é€šä¿¡éš§é“ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚</p><h2 id="IPsec-çš„-NATï¼ˆNetwork-Address-Translationï¼‰-ç©¿é€æ–¹æ³•"><a href="#IPsec-çš„-NATï¼ˆNetwork-Address-Translationï¼‰-ç©¿é€æ–¹æ³•" class="headerlink" title="IPsec çš„ NATï¼ˆNetwork Address Translationï¼‰ ç©¿é€æ–¹æ³•"></a>IPsec çš„ NATï¼ˆNetwork Address Translationï¼‰ ç©¿é€æ–¹æ³•</h2><h3 id="ï¼ˆAHã€ESPï¼‰ä¸NATçš„å…¼å®¹æ€§åˆ†æ"><a href="#ï¼ˆAHã€ESPï¼‰ä¸NATçš„å…¼å®¹æ€§åˆ†æ" class="headerlink" title="ï¼ˆAHã€ESPï¼‰ä¸NATçš„å…¼å®¹æ€§åˆ†æ"></a>ï¼ˆAHã€ESPï¼‰ä¸NATçš„å…¼å®¹æ€§åˆ†æ</h3><p>AHï¼ˆAuthentication Headerï¼Œè®¤è¯å¤´ï¼‰åè®®ä¸å…¼å®¹ NATã€‚</p><p>AH åè®®å¯¹æ•´ä¸ª IP æ•°æ®åŒ…ï¼ˆåŒ…æ‹¬ IP æŠ¥å¤´ï¼‰è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒå’Œèº«ä»½è®¤è¯ã€‚å½“æ•°æ®åŒ…ç»è¿‡ NAT è®¾å¤‡æ—¶ï¼ŒNAT ä¼šä¿®æ”¹ IP æŠ¥å¤´ä¸­çš„æºåœ°å€å’Œç«¯å£å·ç­‰ä¿¡æ¯ï¼Œè¿™å°†å¯¼è‡´ AH è®¡ç®—çš„å®Œæ•´æ€§æ ¡éªŒå¤±è´¥ï¼Œå› ä¸º AH éªŒè¯çš„æ•°æ®åŒ…æ‹¬äº†åŸå§‹çš„ã€æœªè¢« NAT ä¿®æ”¹è¿‡çš„ IP æŠ¥å¤´ã€‚</p><p>ESPï¼ˆEncapsulating Security Payloadï¼Œå°è£…å®‰å…¨è½½è·ï¼‰åè®®åœ¨ä¸€å®šç¨‹åº¦ä¸Šå…¼å®¹ NATï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</p><p>ESP åè®®ä¸»è¦å¯¹ IP æ•°æ®åŒ…çš„è½½è·éƒ¨åˆ†è¿›è¡ŒåŠ å¯†å’Œå¯é€‰çš„å®Œæ•´æ€§æ ¡éªŒã€‚å½“ NAT åªä¿®æ”¹ IP æŠ¥å¤´ä¸­çš„åœ°å€å’Œç«¯å£ä¿¡æ¯è€Œä¸è§¦åŠ ESP å°è£…çš„è½½è·éƒ¨åˆ†æ—¶ï¼ŒESP å¯ä»¥åœ¨ç»è¿‡ NAT åç»§ç»­å·¥ä½œã€‚ç„¶è€Œï¼Œå¦‚æœ NAT è®¾å¤‡å¯¹ ESP æ•°æ®åŒ…è¿›è¡Œæ·±åº¦åŒ…æ£€æµ‹æˆ–ä¿®æ”¹äº† ESP è½½è·éƒ¨åˆ†ï¼Œé‚£ä¹ˆ ESP çš„å®‰å…¨æ€§å°†å—åˆ°ç ´åã€‚</p><h3 id="NAT-Tï¼ˆNAT-Traversalï¼‰"><a href="#NAT-Tï¼ˆNAT-Traversalï¼‰" class="headerlink" title="NAT-Tï¼ˆNAT Traversalï¼‰"></a>NAT-Tï¼ˆNAT Traversalï¼‰</h3><p>ç”±äº AH åè®®ä¸å…¼å®¹ NATï¼Œè€Œ ESP åè®®ä¸ NAT çš„å…¼å®¹æ€§æœ‰é™ï¼Œä¸ºäº†è§£å†³ IPsec åœ¨ NAT ç¯å¢ƒä¸‹çš„é€šä¿¡é—®é¢˜ï¼Œå¼•å…¥äº† NAT-Tï¼ˆNAT Traversalï¼‰æŠ€æœ¯ã€‚</p><p>NAT-T ä¸»è¦é€šè¿‡åœ¨ IPsec æ•°æ®åŒ…å¤–å†å°è£…ä¸€ä¸ª UDP åŒ…å¤´çš„æ–¹å¼æ¥å®ç° NAT ç©¿é€ã€‚è¿™æ ·ï¼Œå½“ IPsec æ•°æ®åŒ…ç»è¿‡ NAT è®¾å¤‡æ—¶ï¼ŒNAT è®¾å¤‡å°†æŠŠè¿™ä¸ª UDP æ•°æ®åŒ…å½“ä½œæ™®é€šçš„ UDP æµé‡è¿›è¡Œå¤„ç†ï¼Œåªä¿®æ”¹ UDP æŠ¥å¤´å’Œ IP æŠ¥å¤´ä¸­çš„åœ°å€ä¿¡æ¯ï¼Œè€Œä¸ä¼šå½±å“åˆ°å†…éƒ¨çš„ IPsec æ•°æ®åŒ…ã€‚ä»è€Œä½¿å¾— IPsec å¯ä»¥åœ¨ NAT ç¯å¢ƒä¸‹æ­£å¸¸é€šä¿¡ã€‚</p><h2 id="IPsec-ä¸-NAT-T-çš„å·¥ä½œæµç¨‹"><a href="#IPsec-ä¸-NAT-T-çš„å·¥ä½œæµç¨‹" class="headerlink" title="IPsec ä¸ NAT-T çš„å·¥ä½œæµç¨‹"></a>IPsec ä¸ NAT-T çš„å·¥ä½œæµç¨‹</h2><p>ä»é€šä¿¡ä¸¤ç«¯æ”¯æŒ NAT-T çš„è®¾å¤‡è§’åº¦æ¥çœ‹ï¼ŒIPsec å’Œ NAT-T çš„å…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><h3 id="ä¸€ã€åˆå§‹åŒ–é˜¶æ®µ"><a href="#ä¸€ã€åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="ä¸€ã€åˆå§‹åŒ–é˜¶æ®µ"></a>ä¸€ã€åˆå§‹åŒ–é˜¶æ®µ</h3><ol><li>é€šä¿¡åŒæ–¹çš„è®¾å¤‡ç¡®å®šéœ€è¦å»ºç«‹ IPsec è¿æ¥ï¼Œå¹¶æ£€æµ‹åˆ°å®ƒä»¬å¤„äº NAT ç¯å¢ƒä¸­ã€‚æ­¤æ—¶ï¼Œè®¾å¤‡ä¼šå¯ç”¨ NAT-T åŠŸèƒ½ã€‚</li></ol><h3 id="äºŒã€IKE-åå•†é˜¶æ®µ"><a href="#äºŒã€IKE-åå•†é˜¶æ®µ" class="headerlink" title="äºŒã€IKE åå•†é˜¶æ®µ"></a>äºŒã€IKE åå•†é˜¶æ®µ</h3><ol><li>å‘èµ·æ–¹è®¾å¤‡å‘å“åº”æ–¹è®¾å¤‡å‘é€ IKEï¼ˆInternet Key Exchangeï¼‰è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­åŒ…å«äº†æ”¯æŒ NAT-T çš„æ ‡è¯†ã€‚</li><li>å“åº”æ–¹è®¾å¤‡æ”¶åˆ°è¯·æ±‚åï¼Œå¦‚æœä¹Ÿæ”¯æŒ NAT-Tï¼Œåˆ™å›åº”ä¸€ä¸ªåŒ…å«æ”¯æŒ NAT-T æ ‡è¯†çš„ IKE å“åº”ã€‚</li><li>åŒæ–¹è®¾å¤‡å¼€å§‹è¿›è¡Œ IKE åå•†ï¼Œç¡®å®šåŠ å¯†ç®—æ³•ã€è®¤è¯æ–¹æ³•ã€Diffie-Hellman ç»„ç­‰å®‰å…¨å‚æ•°ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”±äºåŒæ–¹éƒ½çŸ¥é“è¦ä½¿ç”¨ NAT-Tï¼Œæ‰€ä»¥ä¼šå¯¹åå•†çš„æ¶ˆæ¯è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä»¥é€‚åº” NAT-T çš„å°è£…æ ¼å¼ã€‚</li></ol><h3 id="ä¸‰ã€NAT-T-å°è£…é˜¶æ®µ"><a href="#ä¸‰ã€NAT-T-å°è£…é˜¶æ®µ" class="headerlink" title="ä¸‰ã€NAT-T å°è£…é˜¶æ®µ"></a>ä¸‰ã€NAT-T å°è£…é˜¶æ®µ</h3><ol><li>ä¸€æ—¦ IKE åå•†æˆåŠŸï¼ŒåŒæ–¹è®¾å¤‡å¼€å§‹å»ºç«‹ IPsec SAï¼ˆSecurity Associationï¼‰ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒIPsec æ•°æ®åŒ…ä¼šè¢«å°è£…åœ¨ä¸€ä¸ª UDP æ•°æ®åŒ…ä¸­ï¼Œè¿™ä¸ª UDP æ•°æ®åŒ…çš„ç›®çš„ç«¯å£é€šå¸¸æ˜¯ 4500ã€‚</li><li>å°è£…åçš„æ•°æ®åŒ…å¯ä»¥åœ¨ç»è¿‡ NAT è®¾å¤‡æ—¶è¢«æ­£ç¡®å¤„ç†ï¼Œå› ä¸º NAT è®¾å¤‡ä¼šæŠŠè¿™ä¸ª UDP æ•°æ®åŒ…å½“ä½œæ™®é€šçš„ UDP æµé‡ï¼Œåªä¿®æ”¹ IP æŠ¥å¤´å’Œ UDP æŠ¥å¤´ä¸­çš„åœ°å€å’Œç«¯å£ä¿¡æ¯ï¼Œè€Œä¸ä¼šå½±å“åˆ°å†…éƒ¨çš„ IPsec æ•°æ®åŒ…ã€‚</li></ol><h3 id="å››ã€æ•°æ®ä¼ è¾“é˜¶æ®µ"><a href="#å››ã€æ•°æ®ä¼ è¾“é˜¶æ®µ" class="headerlink" title="å››ã€æ•°æ®ä¼ è¾“é˜¶æ®µ"></a>å››ã€æ•°æ®ä¼ è¾“é˜¶æ®µ</h3><ol><li>é€šä¿¡åŒæ–¹å¯ä»¥å¼€å§‹é€šè¿‡ IPsec éš§é“ä¼ è¾“æ•°æ®ã€‚å‘é€æ–¹è®¾å¤‡å°†æ•°æ®è¿›è¡Œ IPsec åŠ å¯†å’Œå°è£…åï¼Œå†ç”¨ UDP è¿›è¡Œå°è£…ï¼Œç„¶åå‘é€å‡ºå»ã€‚</li><li>æ•°æ®åŒ…ç»è¿‡ NAT è®¾å¤‡æ—¶ï¼ŒNAT è®¾å¤‡è¿›è¡Œåœ°å€å’Œç«¯å£è½¬æ¢ã€‚</li><li>æ¥æ”¶æ–¹è®¾å¤‡æ”¶åˆ°æ•°æ®åŒ…åï¼Œå…ˆå»é™¤ UDP å°è£…ï¼Œç„¶åè¿›è¡Œ IPsec è§£å¯†å’ŒéªŒè¯ï¼Œå¾—åˆ°åŸå§‹æ•°æ®ã€‚</li></ol><h3 id="äº”ã€è¿æ¥ç»´æŠ¤é˜¶æ®µ"><a href="#äº”ã€è¿æ¥ç»´æŠ¤é˜¶æ®µ" class="headerlink" title="äº”ã€è¿æ¥ç»´æŠ¤é˜¶æ®µ"></a>äº”ã€è¿æ¥ç»´æŠ¤é˜¶æ®µ</h3><ol><li>é€šä¿¡åŒæ–¹çš„è®¾å¤‡ä¼šå®šæœŸå‘é€ IKE ä¿æ´»æ¶ˆæ¯ï¼Œä»¥ç¡®ä¿ IPsec è¿æ¥çš„æœ‰æ•ˆæ€§ã€‚å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„å›åº”ï¼Œè®¾å¤‡ä¼šå°è¯•é‡æ–°å»ºç«‹è¿æ¥ã€‚</li><li>å¦‚æœ NAT è®¾å¤‡çš„åœ°å€æˆ–ç«¯å£å‘ç”Ÿå˜åŒ–ï¼ŒåŒæ–¹è®¾å¤‡ä¼šé€šè¿‡ IKE åå•†æ¥æ›´æ–° IPsec è¿æ¥çš„å‚æ•°ï¼Œä»¥é€‚åº” NAT çš„å˜åŒ–ã€‚</li></ol><p>æ€»ä¹‹ï¼Œå½“é€šä¿¡ä¸¤ç«¯çš„è®¾å¤‡æ”¯æŒ NAT-T æ—¶ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ç‰¹æ®Šçš„å°è£…å’Œåå•†è¿‡ç¨‹ï¼Œåœ¨ NAT ç¯å¢ƒä¸‹å»ºç«‹å®‰å…¨çš„ IPsec è¿æ¥ï¼Œå®ç°æ•°æ®çš„åŠ å¯†ä¼ è¾“ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç½‘å·¥</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IPsec</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·»åŠ ç½‘å¡ç¬¬äºŒIP</title>
    <link href="/2024/08/28/%E6%B7%BB%E5%8A%A0%E7%BD%91%E5%8D%A1%E7%AC%AC%E4%BA%8CIP/"/>
    <url>/2024/08/28/%E6%B7%BB%E5%8A%A0%E7%BD%91%E5%8D%A1%E7%AC%AC%E4%BA%8CIP/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å½“éœ€è¦åŒæ—¶pingé€šä¸¤ä¸ªç½‘æ®µçš„IPæ—¶ï¼Œå¦‚æœæ²¡æœ‰ç¬¬äºŒå¼ å¯ç”¨ç½‘å¡ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥æ·»åŠ ç½‘å¡çš„ç¬¬äºŒä¸ªIPåœ°å€ã€‚</p><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>æ·»åŠ ç¬¬äºŒä¸ªIPçš„å‘½ä»¤æ˜¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ip add address &quot;&#123;interface_name&#125;&quot; &#123;ip_address&#125;</span><br><span class="line"> &#123;subnet_mask&#125;</span><br></pre></td></tr></table></figure><p>å¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh interface ip add address &quot;ä»¥å¤ªç½‘&quot; 192.168.1.100 255.255.255.0</span><br></pre></td></tr></table></figure><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> ipaddress</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EthernetManager</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.interface_name = <span class="variable language_">self</span>.get_adapter_names()[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_adapter_names</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–ä¸»è¦çš„ä»¥å¤ªç½‘é€‚é…å™¨åç§°&quot;&quot;&quot;</span></span><br><span class="line">        result = os.popen(<span class="string">&#x27;ipconfig&#x27;</span>)</span><br><span class="line">        res = result.read().strip()</span><br><span class="line">        adapter_list = re.findall(</span><br><span class="line">            <span class="string">&#x27;&#x27;&#x27;(?&lt;=ä»¥å¤ªç½‘é€‚é…å™¨ ).*?(?=:)|(?&lt;=æ— çº¿å±€åŸŸç½‘é€‚é…å™¨ ).*?(?=:)&#x27;&#x27;&#x27;</span>, res)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">sort_key</span>(<span class="params">adapter_name</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;ä»¥å¤ªç½‘&#x27;</span> <span class="keyword">in</span> adapter_name:</span><br><span class="line">                <span class="keyword">return</span> (<span class="number">0</span>, adapter_name)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;Ethernet&#x27;</span> <span class="keyword">in</span> adapter_name:</span><br><span class="line">                <span class="keyword">return</span> (<span class="number">1</span>, adapter_name)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;eht&#x27;</span> <span class="keyword">in</span> adapter_name:</span><br><span class="line">                <span class="keyword">return</span> (<span class="number">2</span>, adapter_name)</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">&#x27;æœ¬åœ°è¿æ¥&#x27;</span> <span class="keyword">in</span> adapter_name:</span><br><span class="line">                <span class="keyword">return</span> (<span class="number">3</span>, adapter_name)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> (<span class="number">4</span>, adapter_name)</span><br><span class="line"></span><br><span class="line">        sorted_adapters = <span class="built_in">sorted</span>(adapter_list, key=sort_key)</span><br><span class="line">        <span class="keyword">return</span> sorted_adapters</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_ips</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–å½“å‰é€‚é…å™¨çš„æ‰€æœ‰IPåœ°å€&quot;&quot;&quot;</span></span><br><span class="line">        command = <span class="string">&#x27;ipconfig&#x27;</span></span><br><span class="line">        result = subprocess.run(command, capture_output=<span class="literal">True</span>, text=<span class="literal">True</span>, shell=<span class="literal">True</span>)</span><br><span class="line">        output = result.stdout.strip()</span><br><span class="line">        start = output.find(<span class="string">f&quot;<span class="subst">&#123;self.interface_name&#125;</span>:&quot;</span>)</span><br><span class="line">        end = output.find(<span class="string">&quot;é»˜è®¤ç½‘å…³&quot;</span>, start)</span><br><span class="line">        end = output.find(<span class="string">&quot;\n&quot;</span>, end)</span><br><span class="line">        start = output.find(<span class="string">&quot;IPv4 åœ°å€&quot;</span>)</span><br><span class="line">        result = output[start:end].strip()</span><br><span class="line">        pattern = <span class="string">r&#x27;IPv4.*?((?:\d+\.\d+\.\d+\.\d+))&#x27;</span></span><br><span class="line">        ips = re.findall(pattern, result, re.DOTALL)</span><br><span class="line"></span><br><span class="line">        gateway = result.split(<span class="string">&#x27;:&#x27;</span>)[-<span class="number">1</span>].strip()</span><br><span class="line">        subnet_mask = result.split(<span class="string">&#x27;é»˜è®¤ç½‘å…³&#x27;</span>)[<span class="number">0</span>].split(<span class="string">&#x27;:&#x27;</span>)[-<span class="number">1</span>].strip()</span><br><span class="line">        <span class="comment"># åˆ¤æ–­ipåœ°å€æ˜¯å¦å’Œç½‘å…³åœ¨åŒä¸€ç½‘æ®µ</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨å­ç½‘æ©ç åˆ›å»ºIPv4Networkå¯¹è±¡</span></span><br><span class="line">        network = ipaddress.ip_network(<span class="string">f&#x27;0.0.0.0/<span class="subst">&#123;subnet_mask&#125;</span>&#x27;</span>, strict=<span class="literal">False</span>)</span><br><span class="line">        <span class="comment"># è·å–å‰ç¼€é•¿åº¦</span></span><br><span class="line">        prefix_length = network.prefixlen</span><br><span class="line">        network = ipaddress.ip_network(<span class="string">f&#x27;<span class="subst">&#123;gateway&#125;</span>/<span class="subst">&#123;prefix_length&#125;</span>&#x27;</span>, strict=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ¤æ–­æ˜¯å¦åœ¨åŒä¸€ç½‘æ®µ,æ’åº,åœ¨ç½‘å…³ç½‘æ®µçš„IPåœ°å€,æŒªåˆ°æœ€å</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">ip_sort</span>(<span class="params">ip</span>):</span><br><span class="line">            <span class="keyword">if</span> ipaddress.ip_address(ip) <span class="keyword">in</span> network:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        ips.sort(key=ip_sort)</span><br><span class="line">        <span class="keyword">return</span> ips</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove_ip</span>(<span class="params">self, ip_address</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç§»é™¤æŒ‡å®šçš„IPåœ°å€&quot;&quot;&quot;</span></span><br><span class="line">        command = <span class="string">f&#x27;netsh interface ip delete address &quot;<span class="subst">&#123;self.interface_name&#125;</span>&quot; <span class="subst">&#123;ip_address&#125;</span>&#x27;</span></span><br><span class="line">        subprocess.run(command, shell=<span class="literal">True</span>, stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_ip</span>(<span class="params">self, ip_address, subnet_mask</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ·»åŠ æ–°çš„IPåœ°å€&quot;&quot;&quot;</span></span><br><span class="line">        command = <span class="string">f&#x27;netsh interface ip add address &quot;<span class="subst">&#123;self.interface_name&#125;</span>&quot; <span class="subst">&#123;ip_address&#125;</span> <span class="subst">&#123;subnet_mask&#125;</span>&#x27;</span></span><br><span class="line">        subprocess.run(command, shell=<span class="literal">True</span>, stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">remove_extra_ips</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç§»é™¤å¤šä½™çš„IPåœ°å€,åªä¿ç•™æœ€åä¸€ä¸ª&quot;&quot;&quot;</span></span><br><span class="line">        ips = <span class="variable language_">self</span>.get_ips()</span><br><span class="line">        <span class="keyword">for</span> ip <span class="keyword">in</span> ips[:-<span class="number">1</span>]:  <span class="comment"># ä¿ç•™æœ€åä¸€ä¸ªIP</span></span><br><span class="line">            <span class="variable language_">self</span>.remove_ip(ip)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_second_ip</span>(<span class="params">self, new_ip, subnet_mask</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ·»åŠ ç¬¬äºŒä¸ªIPåœ°å€:åˆ é™¤å¤šä½™IP,ç„¶åæ·»åŠ æ–°IP&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.remove_extra_ips()</span><br><span class="line">        <span class="variable language_">self</span>.add_ip(new_ip, subnet_mask)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">select_adapter</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;é€‰æ‹©ä»¥å¤ªç½‘é€‚é…å™¨&quot;&quot;&quot;</span></span><br><span class="line">        adapter_list = <span class="variable language_">self</span>.get_adapter_names()</span><br><span class="line">        <span class="comment"># æ‰“å°é€‚é…å™¨åˆ—è¡¨ä¾›ç”¨æˆ·é€‰æ‹©</span></span><br><span class="line">        <span class="keyword">for</span> i, adapter <span class="keyword">in</span> <span class="built_in">enumerate</span>(adapter_list, <span class="number">1</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;adapter&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯·æ±‚ç”¨æˆ·è¾“å…¥å¹¶éªŒè¯è¾“å…¥</span></span><br><span class="line">        choice = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">while</span> choice <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(adapter_list) + <span class="number">1</span>):</span><br><span class="line">            choice = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é€‰æ‹©çš„ç½‘å¡ç¼–å· (ç›´æ¥æŒ‰å›è½¦é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ª): &quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> choice == <span class="string">&#x27;&#x27;</span>:  <span class="comment"># ç”¨æˆ·ç›´æ¥æŒ‰å›è½¦</span></span><br><span class="line">                choice = <span class="number">1</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> choice.isdigit() <span class="keyword">and</span> <span class="number">1</span> &lt;= <span class="built_in">int</span>(choice) &lt;= <span class="built_in">len</span>(adapter_list):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥é”™è¯¯,è¯·ç¡®ä¿è¾“å…¥çš„æ˜¯1åˆ°&quot;</span>, <span class="built_in">len</span>(adapter_list), <span class="string">&quot;ä¹‹é—´çš„æ•°å­—&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¾ç½®emçš„interface_nameå±æ€§</span></span><br><span class="line">        <span class="variable language_">self</span>.interface_name = adapter_list[<span class="built_in">int</span>(choice) - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ‚¨é€‰æ‹©çš„ç½‘å¡ä¸º: <span class="subst">&#123;self.interface_name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    em = EthernetManager()</span><br><span class="line">    em.select_adapter()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        ip=<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥è¦æ·»åŠ çš„IPåœ°å€: &quot;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            ipaddress.ip_address(ip)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„IPåœ°å€ä¸åˆæ³•,è¯·é‡æ–°è¾“å…¥&quot;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        subnet_mask=<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å­ç½‘æ©ç ,å›è½¦é»˜è®¤255.255.255.0:&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> subnet_mask==<span class="string">&quot;&quot;</span>:</span><br><span class="line">            subnet_mask=<span class="string">&quot;255.255.255.0&quot;</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            ipaddress.IPv4Network(<span class="string">f&quot;0.0.0.0/<span class="subst">&#123;subnet_mask&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„å­ç½‘æ©ç ä¸åˆæ³•,è¯·é‡æ–°è¾“å…¥&quot;</span>)</span><br><span class="line">    em.add_second_ip(ip, subnet_mask)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">if</span> ip <span class="keyword">in</span> em.get_ips():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ·»åŠ å¤±è´¥,è¯·ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h4><p>å½“éœ€è¦é¢‘ç¹æ›´æ¢ç¬¬äºŒIPåœ°å€æ—¶ï¼Œå¯ä»¥ç”¨æ­¤è„šæœ¬æ¥å®ç°ã€‚</p><ul><li>é¦–å…ˆåˆ—å‡ºæ‰€æœ‰çš„ç½‘å¡ï¼Œä¾›ç”¨æˆ·é€‰æ‹©</li><li>é€‰æ‹©ç½‘å¡åï¼Œå¦‚æœè¯¥ç½‘å¡å·²ç»æœ‰å¤šä¸ªIPï¼Œé‚£ä¹ˆåªä¿ç•™ä¸€ä¸ªä¸é»˜è®¤ç½‘å…³åŒç½‘æ®µçš„IPï¼Œå…¶ä½™IPåœ°å€å…¨éƒ¨åˆ é™¤</li><li>ç„¶åè¾“å…¥å¹¶æ·»åŠ ç¬¬äºŒä¸ªIPåœ°å€</li><li>éªŒè¯æ˜¯å¦æˆåŠŸï¼Œä¸æˆåŠŸçš„åŸå› åŸºæœ¬ä¸Šæ˜¯å› ä¸ºæ²¡æœ‰ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ</li></ul>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>IP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IPåœ°å€ä¿®æ”¹å™¨</title>
    <link href="/2024/08/27/IP%E5%9C%B0%E5%9D%80%E4%BF%AE%E6%94%B9%E5%99%A8/"/>
    <url>/2024/08/27/IP%E5%9C%B0%E5%9D%80%E4%BF%AE%E6%94%B9%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>åœ¨éœ€è¦é¢‘ç¹æ¢IPåœ°å€çš„æƒ…å†µä¸‹ï¼Œæ‰“å¼€ç½‘ç»œè®¾ç½®å»ä¿®æ”¹æ¯”è¾ƒæ…¢ï¼Œå› æ­¤è®¾è®¡ä¸€ä¸ªIPåœ°å€ä¿®æ”¹å™¨ï¼Œå¯ä»¥å¿«é€Ÿä¿®æ”¹IP</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IpManage</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.ip_list = <span class="variable language_">self</span>.get_ip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_ip</span>(<span class="params">self, name, ip, mask, gateway</span>):</span><br><span class="line">        <span class="comment"># è®¾ç½®é™æ€IPåœ°å€</span></span><br><span class="line">        os.system(<span class="string">f&quot;netsh interface ip set address name=\&quot;<span class="subst">&#123;name&#125;</span>\&quot; static <span class="subst">&#123;ip&#125;</span> <span class="subst">&#123;mask&#125;</span> <span class="subst">&#123;gateway&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_dns</span>(<span class="params">self, name, dns_primary, dns_secondary</span>):</span><br><span class="line">        <span class="comment"># è®¾ç½®DNSæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">        os.system(<span class="string">f&quot;netsh interface ip set dnsservers name=\&quot;<span class="subst">&#123;name&#125;</span>\&quot; static addr=<span class="subst">&#123;dns_primary&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> dns_secondary:</span><br><span class="line">            os.system(<span class="string">f&quot;netsh interface ip add dnsservers name=\&quot;<span class="subst">&#123;name&#125;</span>\&quot; addr=<span class="subst">&#123;dns_secondary&#125;</span> index=2&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_ip</span>(<span class="params">self</span>):</span><br><span class="line">        result = os.popen(<span class="string">&#x27;ipconfig&#x27;</span>)</span><br><span class="line">        res = result.read().strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾é€‚é…å™¨åç§°</span></span><br><span class="line">        resultlist = re.findall(<span class="string">&#x27;&#x27;&#x27;(?&lt;=ä»¥å¤ªç½‘é€‚é…å™¨ ).*?(?=:)|(?&lt;=æ— çº¿å±€åŸŸç½‘é€‚é…å™¨ ).*?(?=:)&#x27;&#x27;&#x27;</span>, res)  </span><br><span class="line">        <span class="comment"># print(&quot;å¯ç”¨çš„ç½‘ç»œé€‚é…å™¨ï¼š&quot;, resultlist)</span></span><br><span class="line">        <span class="keyword">return</span> resultlist</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_adapter_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è®©ç”¨æˆ·é€‰æ‹©é€‚é…å™¨</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¯·é€‰æ‹©è¦é…ç½®çš„ç½‘ç»œé€‚é…å™¨ï¼ˆä¾‹å¦‚: ä»¥å¤ªç½‘ï¼‰:&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> i, adapter <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="variable language_">self</span>.ip_list, <span class="number">1</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;adapter&#125;</span>&quot;</span>)</span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é€‰æ‹©çš„é€‚é…å™¨ç¼–å·: &quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.ip_list[<span class="built_in">int</span>(choice) - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    im = IpManage()</span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è·å–ç”¨æˆ·é€‰æ‹©çš„é€‚é…å™¨åç§°</span></span><br><span class="line">    adapter_name = im.get_adapter_name()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”¨æˆ·è¾“å…¥IPé…ç½®ä¿¡æ¯</span></span><br><span class="line">    ip_addr = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥IPåœ°å€ (é»˜è®¤: 192.168.31.108): &quot;</span>) <span class="keyword">or</span> <span class="string">&quot;192.168.31.108&quot;</span></span><br><span class="line">    subnet_mask = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å­ç½‘æ©ç  (é»˜è®¤: 255.255.255.0): &quot;</span>) <span class="keyword">or</span> <span class="string">&quot;255.255.255.0&quot;</span></span><br><span class="line">    gateway = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç½‘å…³åœ°å€ (é»˜è®¤: 192.168.31.1): &quot;</span>) <span class="keyword">or</span> <span class="string">&quot;192.168.31.1&quot;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ç”¨æˆ·è¾“å…¥DNSé…ç½®ä¿¡æ¯</span></span><br><span class="line">    dns_primary = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥é¦–é€‰DNSæœåŠ¡å™¨åœ°å€ (é»˜è®¤: 192.168.31.1): &quot;</span>) <span class="keyword">or</span> <span class="string">&quot;192.168.31.1&quot;</span></span><br><span class="line">    dns_secondary = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¤‡ç”¨DNSæœåŠ¡å™¨åœ°å€ (é»˜è®¤: ç•™ç©ºå¯ä¸è®¾ç½®): &quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é…ç½®IPå’ŒDNS</span></span><br><span class="line">    im.set_ip(adapter_name, ip_addr, subnet_mask, gateway)</span><br><span class="line">    im.set_dns(adapter_name, dns_primary, dns_secondary)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;IPå’ŒDNSè®¾ç½®æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="built_in">input</span>(<span class="string">&quot;æŒ‰ä»»æ„é”®é€€å‡º...&quot;</span>)</span><br><span class="line">    <span class="comment"># pyinstaller --onefile ip.py</span></span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://xinhaojin.github.io/imgs-host/20240827/1724732053037.jpg"><br>ä¹Ÿå¯ä»¥ä½¿ç”¨pyinstallerå°†ä»£ç æ‰“åŒ…æˆexeæ–‡ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller --onefile ip.py</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„exeæ–‡ä»¶åœ¨distç›®å½•ä¸‹ã€‚</p><p>å¦‚æœæœ‰å‡ ä¸ªå›ºå®šçš„IPéœ€è¦ä¿®æ”¹ï¼Œå¯ä»¥åˆ†åˆ«å†™æˆå‡ ä¸ªexeæ–‡ä»¶ï¼Œè¿™æ ·åªè¦ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œexeæ–‡ä»¶å³å¯å¿«é€Ÿä¿®æ”¹ï¼</p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>å¿…é¡»ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œæ‰èƒ½ä¿®æ”¹IPåœ°å€ï¼Œå¦åˆ™å³ä½¿æ²¡æœ‰æç¤ºæƒé™ä¸è¶³ä¹Ÿæ— æ³•çœŸæ­£ä¿®æ”¹IPåœ°å€ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>IP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤„ç†éæ ‡å‡†httpå“åº”</title>
    <link href="/2024/08/01/%E5%A4%84%E7%90%86%E9%9D%9E%E6%A0%87%E5%87%86http%E5%93%8D%E5%BA%94/"/>
    <url>/2024/08/01/%E5%A4%84%E7%90%86%E9%9D%9E%E6%A0%87%E5%87%86http%E5%93%8D%E5%BA%94/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æ‰‹ä¸Šæœ‰ä¸€å°æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼Œç½‘çº¿è¿æ¥ï¼Œå†…éƒ¨æœ‰httpæœåŠ¡ï¼Œæµè§ˆå™¨ç›´æ¥è®¿é—®å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨pythonçš„httpï¼Œrequeståº“éƒ½æŠ¥é”™ï¼Œä½¿ç”¨apipostå‘ç°ä¹Ÿæ˜¯é”™è¯¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># å‘é€GETè¯·æ±‚</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;http://192.168.31.188&#x27;</span>)</span><br><span class="line"><span class="comment"># æ‰“å°åŸå§‹å“åº”å†…å®¹</span></span><br><span class="line"><span class="built_in">print</span>(response.content)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ConnectionError: (<span class="string">&#x27;Connection aborted.&#x27;</span>, BadStatusLine(<span class="string">&#x27;HTTP/1.1 0 -\r\n&#x27;</span>,))</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>åˆšå¼€å§‹ä»¥ä¸ºæ˜¯è¯·æ±‚å¤´ä¹‹ç±»çš„é—®é¢˜ï¼Œä½†ä¸€ä¸ªå°ä¼ æ„Ÿå™¨æå¤æ‚çš„å®‰å…¨ç­–ç•¥å®Œå…¨æ²¡å¿…è¦å•Šï¼Œåæ¥é€šè¿‡wiresharkæŠ“åŒ…å‘ç°ä»–çš„httpå“åº”æ˜¯è¿™æ ·çš„ï¼Œé‡Œé¢å·²ç»åŒ…å«äº†æˆ‘éœ€è¦çš„æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•è¢«æ­£ç¡®å¤„ç†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>TH<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;width: 960px;&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;250&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Verdana; font-weight: bold; font-style: italic; background-color: rgb(51, 255, 255); text-align: center;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">big</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-style: italic;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span>Air Conditioning Controller<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">big</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">small</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Verdana;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">big</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: rgb(51, 51, 255);&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span>Ethernet IP Type<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">big</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;menu.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sysconfig&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">&quot;width: 960px; &quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;250&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Verdana; font-weight: bold; font-style: italic; background-color: rgb(51, 255, 255); text-align: center;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">big</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Temprature: 26.7 â„ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Humidity: 42.9 %<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lastcmd: 0<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Device ID: 1482184792<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Bus Addr: 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;checkinSubmit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Click to enter the configuration menu list&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">small</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span>Â <span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">big</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">class</span>=<span class="string">&quot;footmsg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: silver;&quot;</span>&gt;</span>All Rights Reserved@2023<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å…¶ä»–ç½‘ç«™çš„httpå“åº”ï¼Œç»è¿‡å¯¹æ¯”ä¹‹åå‘ç°è§„èŒƒçš„httpå“åº”åº”è¯¥ä»¥HTTP&#x2F;1.1 200 OKå¼€å¤´ï¼Œè¿™æ—¶å€™å†çœ‹é”™è¯¯ä¼¼ä¹å°±çŸ¥é“ä»€ä¹ˆæ„æ€äº†ï¼Œbadstatuslineä¸å°±æ˜¯çŠ¶æ€è¡Œé”™è¯¯å˜›</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Thu, 01 Aug <span class="number">2024</span> 08:<span class="number">58</span>:<span class="number">32</span> GMT</span><br><span class="line">Content-<span class="type">Type</span>: text/plain; charset=utf-<span class="number">8</span></span><br><span class="line">Content-Length: <span class="number">2417</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line"><span class="type">Set</span>-Cookie: tgw_l7_route=a699e39024d0403234b82455ae41cef1; Expires=Thu, 01-Aug-<span class="number">2024</span> 09:<span class="number">28</span>:<span class="number">32</span> GMT; Path=/</span><br><span class="line"></span><br><span class="line">&lt;sg <span class="built_in">type</span>=<span class="string">&quot;0&quot;</span> au=<span class="string">&quot;https://www.sogou.com/web?bddn=9027558936136805&amp;brnd=6014570413749830&amp;&quot;</span> eu=<span class="string">&quot;&amp;lxoq=baidu&quot;</span>&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;m.baidu.com&quot;</span> r=<span class="string">&quot;0-11&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[m.baidu.com]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;baidu.com&quot;</span> r=<span class="string">&quot;0-9&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[baidu.com]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;%B0%D9%B6%C8&quot;</span> r=<span class="string">&quot;0-2&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[....]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;%B0%D9%B6%C8%D2%BB%CF%C2&quot;</span> r=<span class="string">&quot;0-4&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[........]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;baidu%B0%D9%B6%C8%CA%D7%D2%B3&quot;</span> r=<span class="string">&quot;0-9&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[baidu........]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;%B0%D9%B6%C8%B7%AD%D2%EB&quot;</span> r=<span class="string">&quot;0-4&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[........]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;188baidu&quot;</span> r=<span class="string">&quot;0-8&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[188baidu]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;%B0%D9%B6%C8%B5%D8%CD%BC&quot;</span> r=<span class="string">&quot;0-4&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[........]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;baidu%B0%D9%B6%C8%D2%BB%CF%C2%B9%D9%CD%F8&quot;</span> r=<span class="string">&quot;0-11&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[baidu............]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">    &lt;e&gt;</span><br><span class="line">        &lt;l h=<span class="string">&quot;1&quot;</span> d=<span class="string">&quot;0&quot;</span> vr=<span class="string">&quot;0&quot;</span> r=<span class="string">&quot;0&quot;</span> s=<span class="string">&quot;1&quot;</span> t=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">            &lt;t t=<span class="string">&quot;0&quot;</span> u=<span class="string">&quot;query=&quot;</span> sw=<span class="string">&quot;%B0%D9%B6%C8%CE%C4%BF%E2&quot;</span> r=<span class="string">&quot;0-4&quot;</span> tp=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">                &lt;w s=<span class="string">&quot;;1;;;;;;&quot;</span>&gt;&lt;![CDATA[........]]&gt;&lt;/w&gt;</span><br><span class="line">            &lt;/t&gt;</span><br><span class="line">        &lt;/l&gt;</span><br><span class="line">    &lt;/e&gt;</span><br><span class="line">&lt;/sg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>httpå“åº”ä¸è§„èŒƒï¼Œè¿™å°±å¯¼è‡´ç»è¿‡é«˜çº§å°è£…çš„ä¸€äº›æ“ä½œhttpçš„åº“æ²¡æœ‰åŠæ³•æ­£ç¡®è§£æå“åº”çš„å†…å®¹ï¼Œè¿™æ—¶å€™å°±éœ€è¦é‡‡ç”¨æ›´åŸå§‹çš„æ–¹æ³•äº†ï¼Œä¹Ÿå°±æ˜¯ä¸è€ƒè™‘httpæ˜¯å¦è§„èŒƒï¼Œç›´æ¥åœ¨tcpå±‚é¢è·å–åŸå§‹tcpæŠ¥æ–‡ï¼Œå†è¿›è¡Œè§£æ:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®æ ‡æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£</span></span><br><span class="line">host = <span class="string">&#x27;192.168.31.188&#x27;</span></span><br><span class="line">port = <span class="number">80</span>  <span class="comment"># HTTPé»˜è®¤ç«¯å£æ˜¯80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªsocketå¯¹è±¡</span></span><br><span class="line">client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥åˆ°æœåŠ¡å™¨</span></span><br><span class="line">client_socket.connect((host, port))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºHTTP GETè¯·æ±‚</span></span><br><span class="line">request = <span class="string">f&quot;GET / HTTP/1.1\r\nHost: <span class="subst">&#123;host&#125;</span>\r\nConnection: close\r\n\r\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€è¯·æ±‚</span></span><br><span class="line">client_socket.sendall(request.encode())</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥æ”¶å“åº”æ•°æ®</span></span><br><span class="line">response = <span class="string">b&quot;&quot;</span></span><br><span class="line">buffer_size = <span class="number">1024</span>  <span class="comment"># ç¼“å†²åŒºå¤§å°</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    buffer = client_socket.recv(buffer_size)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> buffer:</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># å¦‚æœæ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">    response += buffer</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line">client_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°æ¥æ”¶åˆ°çš„åŸå§‹å“åº”æ•°æ®</span></span><br><span class="line"><span class="built_in">print</span>(response.decode(<span class="string">&#x27;utf-8&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>))  <span class="comment"># å‡è®¾å“åº”å†…å®¹æ˜¯UTF-8ç¼–ç çš„ï¼Œå¿½ç•¥è§£ç é”™è¯¯</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½æ­£ç¡®è·å–åˆ°æƒ³è¦çš„httpå“åº”å†…å®¹äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>HTTP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Bç«™è§†é¢‘åˆé›†ä¸‹è½½</title>
    <link href="/2024/06/14/B%E7%AB%99%E8%A7%86%E9%A2%91%E5%90%88%E9%9B%86%E4%B8%8B%E8%BD%BD/"/>
    <url>/2024/06/14/B%E7%AB%99%E8%A7%86%E9%A2%91%E5%90%88%E9%9B%86%E4%B8%8B%E8%BD%BD/</url>
    
    <content type="html"><![CDATA[<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>åœ¨æ‹¥æœ‰è§†é¢‘é“¾æ¥çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨you-getç›´æ¥ä¸‹è½½è§†é¢‘ï¼Œå¦‚ <code>you-get https://www.bilibili.com/xxxxxxxx</code>éå¸¸æ–¹ä¾¿ã€‚å› æ­¤åªè¦è·å–åˆ°è§†é¢‘åˆé›†ä¸­çš„æ‰€æœ‰è§†é¢‘é“¾æ¥å³å¯</p><h2 id="åˆ†æç½‘é¡µæºä»£ç "><a href="#åˆ†æç½‘é¡µæºä»£ç " class="headerlink" title="åˆ†æç½‘é¡µæºä»£ç "></a>åˆ†æç½‘é¡µæºä»£ç </h2><p>è§‚å¯Ÿå‘ç°Bç«™çš„è§†é¢‘å”¯ä¸€IDæ˜¯è¿™ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œåé¢çš„å¯ä»¥åˆ å»ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ï¼Œåˆ†äº«è§†é¢‘æ—¶ç”¨äºæ ‡è®°åˆ†äº«ç”¨æˆ·ä¹‹ç±»çš„ï¼ˆæ‰€ä»¥åˆ†äº«Bç«™è§†é¢‘æ—¶å»ºè®®åˆ å»åé¢ä¸€é•¿ä¸²ï¼Œä¸ç„¶åº”è¯¥å¯ä»¥è·Ÿè¸ªåˆ°åˆ†äº«è€…çš„è´¦å·ä¿¡æ¯ï¼‰ï¼Œåˆé›†è§†é¢‘IDä¹‹é—´æ²¡æœ‰æ˜æ˜¾è§„å¾‹<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240613/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240613234826.ibz20r8fm.jpg"><br>æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œæœç´¢è¿™ä¸€æ®µIDï¼Œå¯ä»¥è·çŸ¥è§†é¢‘IDè¿™ä¸ªå±æ€§è¢«å‘½åä¸º <code>bvid</code><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240613/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240613234816.2yy7gxxy57.jpg"><br>æœç´¢ <code>bvid</code>ï¼Œå‘ç°æœ‰180ä¸ªï¼Œæˆ‘çš„è¿™ä¸ªåˆé›†è§†é¢‘æœ‰46ä¸ªï¼Œåˆç†çŒœæµ‹46ä¸ªé“¾æ¥åº”è¯¥åœ¨è¿™180é‡Œé¢ï¼Œæœç´¢å¾€ä¸‹è·³è½¬ç¿»åˆ°åˆé›†ç¬¬ä¸€ä¸ªè§†é¢‘çš„ <code>bvid</code>ï¼Œå†å¾€ä¸‹ç¿»å‘ç°ç¡®å®åˆé›†æ‰€æœ‰é“¾æ¥éƒ½æœ‰<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240613/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240613235054.esd4b1ky3.jpg"><br>è§‚å¯Ÿå‰åä»£ç å‘ç°è¿™äº›ä¿¡æ¯å­˜åœ¨ä¸€ä¸ªåä¸º <code>window.__INITIAL_STATE__</code>çš„JSONä¸­ï¼Œåªè¦æŠŠè¿™ä¸ªJSONä»HTMLæºä»£ç ä¸­æå–å‡ºæ¥ï¼Œå†åˆ†æç»“æ„å³å¯</p><h2 id="è·å–bvidæ‰€åœ¨JSON"><a href="#è·å–bvidæ‰€åœ¨JSON" class="headerlink" title="è·å–bvidæ‰€åœ¨JSON"></a>è·å–bvidæ‰€åœ¨JSON</h2><p>é—®ä¸€ä¸‹GPTæ€ä¹ˆå†™è¿™ä¸ªå¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒæŠŠJSONä»HTMLä¸­æå–å‡ºæ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;referer&#x27;</span>: <span class="string">&#x27;https://www.bilibili.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;user-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">url=<span class="string">&#x27;https://www.bilibili.com/video/BV1QG411z7gZ&#x27;</span><span class="comment">#åˆé›†ä¸­ä»»æ„ä¸€é›†çš„åœ°å€</span></span><br><span class="line">response=requests.get(url,headers=headers)</span><br><span class="line">response.encoding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">html=response.text</span><br><span class="line"><span class="comment"># with open(B.html&#x27;,&#x27;r&#x27;,encoding=&#x27;utf-8&#x27;) as f:# æœ‰æ—¶å€™ä¼šè§¦å‘é£æ§ç­–ç•¥HTMLè·å–å¤±è´¥ï¼Œæ‰‹åŠ¨ä¿å­˜ç½‘é¡µæºä»£ç å†è¯»å–å³å¯</span></span><br><span class="line"><span class="comment">#     html=f.read()</span></span><br><span class="line"><span class="comment"># æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… window.__INITIAL_STATE__=åˆ°;(functionçš„å†…å®¹</span></span><br><span class="line">json_str =re.findall(<span class="string">r&quot;window\.__INITIAL_STATE__=(.*?);\(function\(&quot;</span>,html)[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># json.loadså°†jsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">json_data=json.loads(json_str)</span><br></pre></td></tr></table></figure><h2 id="è§£æJSONè·å–è§†é¢‘é“¾æ¥"><a href="#è§£æJSONè·å–è§†é¢‘é“¾æ¥" class="headerlink" title="è§£æJSONè·å–è§†é¢‘é“¾æ¥"></a>è§£æJSONè·å–è§†é¢‘é“¾æ¥</h2><p><code>bvid</code>åœ¨JSONä¸­çš„ç»“æ„å¦‚ä¸‹<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240613/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240613223912.lxdfga0l.jpg"><br>ä»£ç å¦‚ä¸‹,å…¶ä¸­ <code>big_title</code>æ˜¯åˆé›†æ ‡é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">big_title=videos=json_data[<span class="string">&quot;videoData&quot;</span>][<span class="string">&quot;ugc_season&quot;</span>][<span class="string">&quot;title&quot;</span>].replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">videos=json_data[<span class="string">&quot;videoData&quot;</span>][<span class="string">&quot;ugc_season&quot;</span>][<span class="string">&quot;sections&quot;</span>][<span class="number">0</span>][<span class="string">&quot;episodes&quot;</span>]</span><br><span class="line">titles=[video[<span class="string">&#x27;title&#x27;</span>].replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>) <span class="keyword">for</span> video <span class="keyword">in</span> videos]</span><br><span class="line">urls=[<span class="string">&#x27;https://www.bilibili.com/video/&#x27;</span>+video[<span class="string">&#x27;bvid&#x27;</span>] <span class="keyword">for</span> video <span class="keyword">in</span> videos]</span><br><span class="line"><span class="built_in">print</span>(big_title)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(titles)):</span><br><span class="line">    <span class="built_in">print</span>(titles[i]+<span class="string">&#x27; &#x27;</span>+urls[i])</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨you-getè‡ªåŠ¨æ‰¹é‡ä¸‹è½½"><a href="#åˆ©ç”¨you-getè‡ªåŠ¨æ‰¹é‡ä¸‹è½½" class="headerlink" title="åˆ©ç”¨you-getè‡ªåŠ¨æ‰¹é‡ä¸‹è½½"></a>åˆ©ç”¨you-getè‡ªåŠ¨æ‰¹é‡ä¸‹è½½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install you-get</span><br></pre></td></tr></table></figure><p>you-getæ”¯æŒä¸‹è½½Bç«™è§†é¢‘ï¼ˆéä¼šå‘˜è§†é¢‘ï¼‰ï¼Œ(ä¹‹å‰å°è¯•è¿‡è¥¿ç“œè§†é¢‘ä¸æ”¯æŒâ€¦)ï¼Œé»˜è®¤ä¼¼ä¹ä¼šä¸‹è½½480pè§†é¢‘ï¼Œå¦‚æœéœ€è¦æ›´é«˜æ¸…çš„è§†é¢‘ï¼Œéœ€è¦æŒ‡å®šcookieï¼Œé»˜è®¤ä¼šä¸‹è½½èƒ½å¤Ÿæ”¯æŒçš„æœ€é«˜æ¸…æ™°åº¦ã€‚</p><p>ä¸»è¦å‚æ•°ï¼š</p><ul><li>-o ä¿å­˜æ–‡ä»¶å¤¹</li><li>-O æ–‡ä»¶å(ä¸åŠ åç¼€)</li><li>-c cookies.txtçš„åœ°å€(Netscapeæ ¼å¼(ä¸æ˜¯JSONæ ¼å¼)ï¼Œå¯ä»¥ä»æµè§ˆå™¨æ’ä»¶EditCookiesä¸­å¯¼å‡ºå¤åˆ¶åˆ°txtä¸­)</li></ul><p>ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„ï¼šä¸æŒ‡å®šæ–‡ä»¶åï¼Œé»˜è®¤æ–‡ä»¶åæ˜¯è§†é¢‘åœ¨ç½‘é¡µä¸­çš„å¤§æ ‡é¢˜ï¼Œä¸åˆé›†ä¸­çš„æ ‡é¢˜åç§°å¯èƒ½ä¸åŒï¼Œè¿™é‡Œä»£ç ä¸­çš„titleæ˜¯åˆé›†åˆ—è¡¨ä¸­çš„æ ‡é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">basedir=<span class="string">&#x27;G:/&#x27;</span><span class="comment">#ä¿å­˜ç›®å½•</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨you-getä¸‹è½½è§†é¢‘</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(os.path.join(basedir,big_title)):</span><br><span class="line">    os.makedirs(os.path.join(basedir,big_title))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ–‡ä»¶å¤¹&#x27;</span>+big_title+<span class="string">&#x27;åˆ›å»ºæˆåŠŸ&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(titles)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å‡†å¤‡ä¸‹è½½ &quot;</span>+os.path.join(basedir,big_title,titles[i]+<span class="string">&#x27;.mp4&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span>(os.path.exists(os.path.join(basedir,big_title,titles[i]+<span class="string">&#x27;.mp4&#x27;</span>))):</span><br><span class="line">        <span class="built_in">print</span>(titles[i]+<span class="string">&#x27;å·²å­˜åœ¨&#x27;</span>)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    os.system(<span class="string">&#x27;you-get -c cookies.txt -o &#x27;</span>+os.path.join(basedir,big_title)+<span class="string">&#x27; -O &#x27;</span>+titles[i]+<span class="string">&#x27; &#x27;</span>+urls[i])</span><br><span class="line">    <span class="built_in">print</span>(titles[i]+<span class="string">&#x27; ä¸‹è½½å®Œæˆ&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œæœ€æ–°ç‰ˆçš„you-getä¼šé»˜è®¤ä¸‹è½½å¼¹å¹•æ–‡ä»¶xmlï¼Œæ²¡ä»”ç»†çœ‹è¿™æ˜¯ä»€ä¹ˆå‚æ•°æ€ä¹ˆå–æ¶ˆä¸‹è½½ï¼Œä¹Ÿæ— æ‰€è°“å§ï¼Œæˆ‘æ‰‹åŠ¨åˆ äº†ä¸€ä¸‹</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è§†é¢‘ä¸‹è½½</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç§æœ‰åŒ–éƒ¨ç½²å±€åŸŸç½‘æ–‡ä»¶ä¼ è¾“å·¥å…·Snapdrop</title>
    <link href="/2024/06/04/%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%E5%B1%80%E5%9F%9F%E7%BD%91%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%B7%A5%E5%85%B7Snapdrop/"/>
    <url>/2024/06/04/%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%E5%B1%80%E5%9F%9F%E7%BD%91%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%B7%A5%E5%85%B7Snapdrop/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰æƒ³è¿‡å¾ˆå¤šæ¬¡åšä¸€ä¸ªå±€åŸŸç½‘æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œä½†æ˜¯å§‹ç»ˆåœç•™åœ¨éœ€æ±‚é˜¶æ®µå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œæ¯•ç«Ÿå•¥ä¹Ÿä¸ä¼šã€‚</p><p>ç½‘ä¸Šæœ‰å¾ˆå¤šè½¯ä»¶å¯ä»¥ç”¨ï¼Œä½†åŸºæœ¬éƒ½æ˜¯è¦å®‰è£…å„å¹³å°çš„è½¯ä»¶æ‰è¡Œï¼Œä½œä¸ºå¶å°”ç”¨ä¸€ä¸‹çš„å·¥å…·ï¼Œå¿…ä¸å¯èƒ½æœ‰è¢«å®‰è£…åœ¨è®¾å¤‡ä¸Šçš„èµ„æ ¼ã€‚</p><p>ä¹‹å‰ç”¨è¿‡ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å·¥å…·Snapdropï¼Œä»¥ç½‘é¡µå½¢å¼å­˜åœ¨ï¼Œ<a href="https://snapdrop.net/">https://Snapdrop.net/</a> ï¼Œå®Œå…¨æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ï¼Œä½†åé¢æœ‰æ®µæ—¶é—´æ— æ³•è®¿é—®ï¼Œæˆ‘ä»¥ä¸ºä»–å‡‰äº†ã€‚</p><p>å› æ­¤æˆ‘åˆé‡æ–°æƒ³åšä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿ï¼Œç»“æœå‘ç°è¿™ä¸ªç½‘é¡µç°åœ¨åˆå¯ä»¥ç”¨äº†ï¼Œå…³äºé¡µæŒ‡å‘GitHub <a href="https://github.com/RobinLinus/snapdrop">https://github.com/RobinLinus/snapdrop</a> ï¼Œç«Ÿç„¶æ˜¯å¼€æºçš„ï¼Œå¤§å–œè¿‡æœ›ï¼Œäºæ˜¯æœ‰äº†æœ¬ç¯‡ã€‚</p><h2 id="å‰ç½®ç¯å¢ƒ"><a href="#å‰ç½®ç¯å¢ƒ" class="headerlink" title="å‰ç½®ç¯å¢ƒ"></a>å‰ç½®ç¯å¢ƒ</h2><p>dockerï¼Œnginxï¼ŒåŸŸå</p><h2 id="dockeré…ç½®"><a href="#dockeré…ç½®" class="headerlink" title="dockeré…ç½®"></a>dockeré…ç½®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull linuxserver/snapdrop</span><br><span class="line">docker run -d --restart=always --name snapdrop -p 8088:80 linuxserver/snapdrop #8088æ˜¯è‡ªå®šä¹‰ç«¯å£</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥åœ¨å®¢æˆ·ç«¯åŒæ–¹è®¿é—®<a href="http://ip:8088/">http://ip:8088</a> æ¥ä½¿ç”¨ï¼Œè‹¥è¦ç»‘å®šåŸŸåï¼Œè¿›è¡Œnginxè®¾ç½®</p><h2 id="ç”³è¯·SSLè¯ä¹¦"><a href="#ç”³è¯·SSLè¯ä¹¦" class="headerlink" title="ç”³è¯·SSLè¯ä¹¦"></a>ç”³è¯·SSLè¯ä¹¦</h2><p>å…ˆè§£æä¸€ä¸ªäºŒçº§åŸŸåå¦‚file.xinhaojin.topåˆ°ä¸»æœºä¸Š,ç„¶åç”³è¯·è¯ä¹¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install certbot python3-certbot-nginx</span><br><span class="line">sudo certbot --nginx -d file.xinhaojin.top</span><br></pre></td></tr></table></figure><h2 id="nginxé…ç½®"><a href="#nginxé…ç½®" class="headerlink" title="nginxé…ç½®"></a>nginxé…ç½®</h2><p>åœ¨httpæ ‡ç­¾ä¸­æ·»åŠ ä¸¤ä¸ªserver</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> server <span class="punctuation">&#123;</span></span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name file.xinhaojin.top;</span><br><span class="line">    return <span class="number">301</span> https<span class="punctuation">:</span><span class="comment">//$host$request_uri;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">server <span class="punctuation">&#123;</span></span><br><span class="line">    listen <span class="number">443</span> ssl;</span><br><span class="line">    server_name file.xinhaojin.top;</span><br><span class="line"></span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/file.xinhaojin.top/fullchain.pem;</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/file.xinhaojin.top/privkey.pem;</span><br><span class="line">    ssl_protocols TLSv1<span class="number">.2</span> TLSv1<span class="number">.3</span>;</span><br><span class="line">    ssl_prefer_server_ciphers off;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256<span class="punctuation">:</span>ECDHE-RSA-AES256-GCM-SHA384;</span><br><span class="line"></span><br><span class="line">    location / <span class="punctuation">&#123;</span></span><br><span class="line">        proxy_pass http<span class="punctuation">:</span><span class="comment">//127.0.0.1:8088;  # Change to your Spring Boot app&#x27;s IP and port</span></span><br><span class="line">        proxy_connect_timeout <span class="number">300</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header X-Forwarded-for $remote_addr;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">location ~ /.well-known <span class="punctuation">&#123;</span></span><br><span class="line">    allow all;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é‡å¯nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br><span class="line">sudo systemctl restart nginx</span><br></pre></td></tr></table></figure><h2 id="Done"><a href="#Done" class="headerlink" title="Done"></a>Done</h2><p>ç°åœ¨å°±æ‹¥æœ‰äº†ä¸€ä¸ªç§æœ‰åŒ–çš„å±€åŸŸç½‘æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œ<a href="https://file.xinhaojin.top/">https://file.xinhaojin.top</a></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å±€åŸŸç½‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éåä¸ºç”µè„‘åˆ¶ä½œNFCè´´ç‰‡å®ç°ä¸€ç¢°ä¼ å¤šå±ååŒ</title>
    <link href="/2024/05/25/%E9%9D%9E%E5%8D%8E%E4%B8%BA%E7%94%B5%E8%84%91%E5%88%B6%E4%BD%9CNFC%E8%B4%B4%E7%89%87%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A2%B0%E4%BC%A0%E5%A4%9A%E5%B1%8F%E5%8D%8F%E5%90%8C/"/>
    <url>/2024/05/25/%E9%9D%9E%E5%8D%8E%E4%B8%BA%E7%94%B5%E8%84%91%E5%88%B6%E4%BD%9CNFC%E8%B4%B4%E7%89%87%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A2%B0%E4%BC%A0%E5%A4%9A%E5%B1%8F%E5%8D%8F%E5%90%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…åä¸ºç”µè„‘ç®¡å®¶"><a href="#å®‰è£…åä¸ºç”µè„‘ç®¡å®¶" class="headerlink" title="å®‰è£…åä¸ºç”µè„‘ç®¡å®¶"></a>å®‰è£…åä¸ºç”µè„‘ç®¡å®¶</h2><p>ç½‘å¡è¦æ±‚ï¼šè‹±ç‰¹å°”AX200ç³»åˆ—ç¡®è®¤æ²¡é—®é¢˜ï¼Œå…¶ä½™ç½‘å¡å¯èƒ½æ— æ³•å®‰è£…åä¸ºç”µè„‘ç®¡å®¶ã€‚</p><p>æ‰‹æœºå¿…é¡»æ˜¯åä¸ºæ‰‹æœºï¼Œé¸¿è’™2.0ä»¥ä¸Šï¼Œå¤„ç†å™¨åœ¨éº’éºŸ990ä»¥ä¸Šã€‚</p><p>å…·ä½“å¯å‚è€ƒBç«™åšä¸»ç©ºé™çŒ«å’ªçš„æ•™ç¨‹å®‰è£…ï¼š<a href="https://www.bilibili.com/video/BV19H4y1G7Dg">https://www.bilibili.com/video/BV19H4y1G7Dg</a></p><p>ç›¸å…³æ–‡ä»¶åœ¨ä½œè€…è§†é¢‘ç®€ä»‹ä¸­æœ‰ç½‘ç›˜é“¾æ¥</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯SNç è®¾ç½®(åç»­ä¼šç”¨åˆ°)ï¼ŒSNç é€‰æ‹©è‡ªå®šä¹‰ï¼Œè®¾ç½®ä¸º16ä½é•¿çš„å­—æ¯æ•°å­—ç»„åˆï¼Œç„¶åå†é€‰æ‹©å®‰è£…åŒ…å®‰è£…ã€‚</p><p><img src="https://xinhaojin.github.io/picx-images-hosting/20240525/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240525220224.5c0t6wg2x3.jpg"></p><h2 id="ç»™NFCè´´çº¸å†™å…¥æ•°æ®ï¼Œå¹¶æ¿€æ´»"><a href="#ç»™NFCè´´çº¸å†™å…¥æ•°æ®ï¼Œå¹¶æ¿€æ´»" class="headerlink" title="ç»™NFCè´´çº¸å†™å…¥æ•°æ®ï¼Œå¹¶æ¿€æ´»"></a>ç»™NFCè´´çº¸å†™å…¥æ•°æ®ï¼Œå¹¶æ¿€æ´»</h2><h3 id="ç”ŸæˆäºŒç»´ç "><a href="#ç”ŸæˆäºŒç»´ç " class="headerlink" title="ç”ŸæˆäºŒç»´ç "></a>ç”ŸæˆäºŒç»´ç </h3><p>ä½¿ç”¨PCManagerInstallerç”ŸæˆäºŒç»´ç ã€‚(å°±æ˜¯ä¸Šä¸€æ­¥éª¤ä¸­çš„å®‰è£…å™¨):<a href="https://xinhaojin.lanzouj.com/iYXPD1zqz68h">https://xinhaojin.lanzouj.com/iYXPD1zqz68h</a><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240525/image.7ljtqefn2j.jpg"><br>ç„¶åä½¿ç”¨å¾®ä¿¡æˆ–è€…æµè§ˆå™¨å…ˆæ‰«æäºŒç»´ç å†…å®¹ï¼ŒæŸ¥çœ‹æ•°æ®æ ¼å¼æ˜¯å¦å½¢å¦‚â€œSN&#x3D;HUAWEILAPTOP2020|MAC&#x3D;BC8385DC117F|MODELID&#x3D;00000506â€å…¶ä¸­SNæ˜¯ä¸Šä¸€æ­¥è‡ªå·±è®¾ç½®çš„ã€‚</p><h3 id="ä½¿ç”¨ä¸€ç¢°ä¼ åŠ©æ‰‹æ‰«ç æ¿€æ´»"><a href="#ä½¿ç”¨ä¸€ç¢°ä¼ åŠ©æ‰‹æ‰«ç æ¿€æ´»" class="headerlink" title="ä½¿ç”¨ä¸€ç¢°ä¼ åŠ©æ‰‹æ‰«ç æ¿€æ´»"></a>ä½¿ç”¨ä¸€ç¢°ä¼ åŠ©æ‰‹æ‰«ç æ¿€æ´»</h3><p>å®‰è£…åä¸ºä¸€ç¢°ä¼ åŠ©æ‰‹ï¼š<a href="https://xinhaojin.lanzouj.com/iHSYu1zqz6dc%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%89%93%E5%BC%80%E5%90%8E%E4%B8%8D%E8%83%BD%E7%94%A8%E8%AF%B7%E5%9C%A8%E8%AE%BE%E7%BD%AE%E9%87%8C%E6%8E%88%E4%BA%88%E7%9B%B8%E6%9C%BA%E6%9D%83%E9%99%90%EF%BC%8C%E6%89%AB%E8%BF%99%E4%B8%AA%E7%94%9F%E6%88%90%E7%9A%84%E4%BA%8C%E7%BB%B4%E7%A0%81">https://xinhaojin.lanzouj.com/iHSYu1zqz6dcï¼Œå¦‚æœæ‰“å¼€åä¸èƒ½ç”¨è¯·åœ¨è®¾ç½®é‡Œæˆäºˆç›¸æœºæƒé™ï¼Œæ‰«è¿™ä¸ªç”Ÿæˆçš„äºŒç»´ç </a><br><img src="https://xinhaojin.github.io/picx-images-hosting/20240525/9bd0d3780c47789217054243dbd5bc9.9gwej12key.jpg"><br>ç„¶åæŠŠNFCè´´çº¸æ”¾åœ¨æ„Ÿåº”åŒºä¸¤ç§’ï¼Œæç¤ºæ¿€æ´»æˆåŠŸå³å¯ã€‚<br><img src="https://xinhaojin.github.io/picx-images-hosting/20240525/dc35512f61d64ca61f7c60932cee80e.7p4hn63a1.jpg"><br>NFC tools(ç”¨äºNFCå†™å¡é”™è¯¯æ—¶åˆ é™¤æ ‡ç­¾æ•°æ®ï¼Œåä¸ºæ‰‹æœºä¼¼ä¹æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œå…¶ä»–å®‰å“æœºå¯ç”¨):<a href="https://xinhaojin.lanzouj.com/itbaa1zqz6ih">https://xinhaojin.lanzouj.com/itbaa1zqz6ih</a></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NFC</tag>
      
      <tag>å¤šå±ååŒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨PandoraNexté¡¹ç›®Dockeréƒ¨ç½²ChatGPTå®˜ç½‘é•œåƒç«™(æ”¯æŒTokenç™»å½•)ï¼ŒåŒæ—¶ä¸ºChatgpt-webé¡¹ç›®æä¾›ç¨³å®šä»£ç†æœåŠ¡</title>
    <link href="/2024/01/17/%E4%BD%BF%E7%94%A8PandoraNext%E9%A1%B9%E7%9B%AEDocker%E9%83%A8%E7%BD%B2ChatGPT%E5%AE%98%E7%BD%91%E9%95%9C%E5%83%8F%E7%AB%99(%E6%94%AF%E6%8C%81Token%E7%99%BB%E5%BD%95)%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%BAChatgpt-web%E9%A1%B9%E7%9B%AE%E6%8F%90%E4%BE%9B%E7%A8%B3%E5%AE%9A%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1/"/>
    <url>/2024/01/17/%E4%BD%BF%E7%94%A8PandoraNext%E9%A1%B9%E7%9B%AEDocker%E9%83%A8%E7%BD%B2ChatGPT%E5%AE%98%E7%BD%91%E9%95%9C%E5%83%8F%E7%AB%99(%E6%94%AF%E6%8C%81Token%E7%99%BB%E5%BD%95)%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B8%BAChatgpt-web%E9%A1%B9%E7%9B%AE%E6%8F%90%E4%BE%9B%E7%A8%B3%E5%AE%9A%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>chatgpt-webé¡¹ç›®<a href="https://github.com/Chanzhaoyu/chatgpt-web">https://github.com/Chanzhaoyu/chatgpt-web</a>ç¨³å®šæ€§å¤ªå·®ï¼Œç»å¸¸å‡ºç°ä»£ç†å¤±æ•ˆçš„é—®é¢˜ï¼Œåœ¨issuesä¸­çœ‹åˆ°pandoranexté¡¹ç›®<a href="https://github.com/pandora-next/deploy">https://github.com/pandora-next/deploy</a>å¯ä»¥è‡ªå»ºä»£ç†ä¸ºchatgpt-webæä¾›æœåŠ¡ï¼ŒåŒæ—¶æœ¬èº«å¯ä½œä¸ºchatgptå®˜ç½‘é•œåƒç«™ï¼Œæ”¯æŒaccesstokenç™»å½•ï¼Œæ— éœ€ä»˜è´¹apikeyï¼Œç›¸å½“äºå®˜ç½‘ç½‘é¡µå¯¹è¯ä½¿ç”¨ã€‚</p><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><p>ä¸€å°å¢ƒå¤–æœåŠ¡å™¨(å¯ç›´è¿OpenAIå®˜ç½‘ï¼Œæœ‰Dockerã€Nginx)ï¼Œä¸€ä¸ªåŠå¹´ä»¥ä¸Šçš„githubè´¦å·ï¼Œä¸€ä¸ªåŸŸå</p><h2 id="éƒ¨ç½²é•œåƒç«™"><a href="#éƒ¨ç½²é•œåƒç«™" class="headerlink" title="éƒ¨ç½²é•œåƒç«™"></a>éƒ¨ç½²é•œåƒç«™</h2><h3 id="åˆ›å»ºæ ¹ç›®å½•"><a href="#åˆ›å»ºæ ¹ç›®å½•" class="headerlink" title="åˆ›å»ºæ ¹ç›®å½•"></a>åˆ›å»ºæ ¹ç›®å½•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir pandora-next</span><br><span class="line">cd pandora-next</span><br></pre></td></tr></table></figure><h3 id="è·å–License"><a href="#è·å–License" class="headerlink" title="è·å–License"></a>è·å–License</h3><p>è®¿é—®<a href="https://dash.pandoranext.com/">https://dash.pandoranext.com</a>ç™»å½•githubè´¦å·è·å–æˆæƒ<img src="https://xinhaojin.github.io/imgs-host/20240117/1705471881491.jpg" alt="1705471881491"></p><h3 id="å¤åˆ¶ç½‘é¡µä¸Šçš„curlå‘½ä»¤å¹¶æ‰§è¡Œ"><a href="#å¤åˆ¶ç½‘é¡µä¸Šçš„curlå‘½ä»¤å¹¶æ‰§è¡Œ" class="headerlink" title="å¤åˆ¶ç½‘é¡µä¸Šçš„curlå‘½ä»¤å¹¶æ‰§è¡Œ"></a>å¤åˆ¶ç½‘é¡µä¸Šçš„curlå‘½ä»¤å¹¶æ‰§è¡Œ</h3><p>é¡¹ç›®æ ¹ç›®å½•ä¸‹å‡ºç°ä¸€ä¸ªjwtæ–‡ä»¶</p><h3 id="åˆ›å»ºdocker-compose-yml"><a href="#åˆ›å»ºdocker-compose-yml" class="headerlink" title="åˆ›å»ºdocker-compose.yml"></a>åˆ›å»ºdocker-compose.yml</h3><p>æŠŠPANDORA_NEXT_LICENSEåçš„xxxæ”¹æˆåˆšåˆšè·å–çš„jwtæ–‡ä»¶ä¸­çš„å€¼</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">pandora-next:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">pengzhile/pandora-next</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">PandoraNext</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">bridge</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8181:8181&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PANDORA_NEXT_LICENSE=xxx</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/data</span></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå…¶ä»–æ–‡ä»¶ï¼ˆå¤¹ï¼‰"><a href="#åˆ›å»ºå…¶ä»–æ–‡ä»¶ï¼ˆå¤¹ï¼‰" class="headerlink" title="åˆ›å»ºå…¶ä»–æ–‡ä»¶ï¼ˆå¤¹ï¼‰"></a>åˆ›å»ºå…¶ä»–æ–‡ä»¶ï¼ˆå¤¹ï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir data</span><br><span class="line">cd data</span><br><span class="line">vi config.json</span><br><span class="line">vi tokens.json</span><br></pre></td></tr></table></figure><p>config.json<br>ä¿®æ”¹license_idï¼Œæˆæƒç½‘é¡µä¸Šæœ‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;bind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0:8181&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cert_file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;key_file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">600</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-L1xxxxxxxi9w&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;proxy_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;public_share&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;site_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;setup_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;server_tokens&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;proxy_api_prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;isolated_conv_title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;captcha&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;site_key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;site_secret&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;site_login&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;setup_login&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;oai_username&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;oai_password&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;whitelist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>tokens.json<br>å¯ä»¥ä¿®æ”¹é¢„è®¾ç™»å½•æ–¹å¼ï¼Œé»˜è®¤å³å¯</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test-1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;access token / session token / refresh token&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;shared&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;show_user_info&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;test-2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;access token / session token / refresh token&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;shared&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;show_user_info&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;test2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;access token / session token / refresh token / share token&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;12345&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆdocker-compose-ymlæ‰€åœ¨æ–‡ä»¶å¤¹ï¼‰æ‰§è¡Œdockerå‘½ä»¤"><a href="#åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆdocker-compose-ymlæ‰€åœ¨æ–‡ä»¶å¤¹ï¼‰æ‰§è¡Œdockerå‘½ä»¤" class="headerlink" title="åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆdocker-compose.ymlæ‰€åœ¨æ–‡ä»¶å¤¹ï¼‰æ‰§è¡Œdockerå‘½ä»¤"></a>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼ˆdocker-compose.ymlæ‰€åœ¨æ–‡ä»¶å¤¹ï¼‰æ‰§è¡Œdockerå‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line">docker-compose ps #æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span><br></pre></td></tr></table></figure><h3 id="æ”¾å¼€8181ç«¯å£ï¼Œè®¿é—®http-IP-8181"><a href="#æ”¾å¼€8181ç«¯å£ï¼Œè®¿é—®http-IP-8181" class="headerlink" title="æ”¾å¼€8181ç«¯å£ï¼Œè®¿é—®http://IP:8181"></a>æ”¾å¼€8181ç«¯å£ï¼Œè®¿é—®<a href="http://ip:8181/">http://IP:8181</a></h3><p>å¦‚æœé¡ºåˆ©çš„è¯ï¼Œå¯ä»¥çœ‹åˆ°chatgpté•œåƒç«™ç™»å½•é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨æ³¨å†Œé‚®ç®±ç™»å½•ï¼Œæˆ–è€…ä½¿ç”¨accesstokenç™»å½•ï¼ˆaccesstokenå¯ä»¥åœ¨<a href="https://chat.openai.com/api/auth/session%E8%8E%B7%E5%8F%96%EF%BC%89%E3%80%82">https://chat.openai.com/api/auth/sessionè·å–ï¼‰ã€‚</a><br><img src="https://xinhaojin.github.io/imgs-host/20240117/1705473448886.jpg" alt="1705473448886"><br>å¦‚æœç¡®è®¤ç«¯å£æ”¾å¼€ä½†ä»æ—§ä¸èƒ½è®¿é—®ï¼Œä½¿ç”¨docker logså‘½ä»¤æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ï¼Œä¼šæœ‰é”™è¯¯æç¤º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs PandoraNext</span><br></pre></td></tr></table></figure><h2 id="ç»‘å®šåŸŸå"><a href="#ç»‘å®šåŸŸå" class="headerlink" title="ç»‘å®šåŸŸå"></a>ç»‘å®šåŸŸå</h2><h3 id="è§£æä¸€ä¸ªäºŒçº§åŸŸååˆ°æœåŠ¡å™¨IP"><a href="#è§£æä¸€ä¸ªäºŒçº§åŸŸååˆ°æœåŠ¡å™¨IP" class="headerlink" title="è§£æä¸€ä¸ªäºŒçº§åŸŸååˆ°æœåŠ¡å™¨IP"></a>è§£æä¸€ä¸ªäºŒçº§åŸŸååˆ°æœåŠ¡å™¨IP</h3><p>å¦‚pass.xinhaojin.top</p><h3 id="ç”³è¯·SSLè¯ä¹¦"><a href="#ç”³è¯·SSLè¯ä¹¦" class="headerlink" title="ç”³è¯·SSLè¯ä¹¦"></a>ç”³è¯·SSLè¯ä¹¦</h3><p>sudo apt install certbot python3-certbot-nginx<br>sudo certbot â€“nginx -d pass.xinhaojin.top</p><h3 id="æ·»åŠ nginxé…ç½®"><a href="#æ·»åŠ nginxé…ç½®" class="headerlink" title="æ·»åŠ nginxé…ç½®"></a>æ·»åŠ nginxé…ç½®</h3><p>&#x2F;etc&#x2F;nginx&#x2F;nginx.conf<br>æ·»åŠ ä¸¤ä¸ªserverï¼Œå¯¹åº”ä¿®æ”¹sslè¯ä¹¦ä½ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server <span class="punctuation">&#123;</span></span><br><span class="line">        listen       <span class="number">80</span>;</span><br><span class="line">        server_name  pass.xinhaojin.top; </span><br><span class="line">        return <span class="number">301</span> https<span class="punctuation">:</span><span class="comment">//$host$request_uri;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  </span><br><span class="line">server <span class="punctuation">&#123;</span></span><br><span class="line">        listen       <span class="number">443</span> ssl; </span><br><span class="line">        server_name   pass.xinhaojin.top;  </span><br><span class="line">      </span><br><span class="line">        ssl_certificate /etc/letsencrypt/live/pass.xinhaojin.top/fullchain.pem;</span><br><span class="line">        ssl_certificate_key /etc/letsencrypt/live/pass.xinhaojin.top/privkey.pem;</span><br><span class="line">  </span><br><span class="line">        ssl_protocols TLSv1<span class="number">.2</span>;  </span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256;  </span><br><span class="line"></span><br><span class="line">        location / <span class="punctuation">&#123;</span></span><br><span class="line">           proxy_pass http<span class="punctuation">:</span><span class="comment">//0.0.0.0:8181;</span></span><br><span class="line">           proxy_http_version <span class="number">1.1</span>;</span><br><span class="line">           proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">           proxy_set_header Connection &#x27;upgrade&#x27;;</span><br><span class="line">        <span class="punctuation">&#125;</span>   </span><br><span class="line">    <span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸ºæ­¢å·²ç»å¯ä»¥ä½¿ç”¨åŸŸåè®¿é—®chatgpté•œåƒç«™äº†ã€‚</p><h2 id="ä¸ºchatgpt-webé¡¹ç›®æä¾›ä»£ç†æœåŠ¡"><a href="#ä¸ºchatgpt-webé¡¹ç›®æä¾›ä»£ç†æœåŠ¡" class="headerlink" title="ä¸ºchatgpt-webé¡¹ç›®æä¾›ä»£ç†æœåŠ¡"></a>ä¸ºchatgpt-webé¡¹ç›®æä¾›ä»£ç†æœåŠ¡</h2><h3 id="ä¿®æ”¹pandora-next-data-config-json"><a href="#ä¿®æ”¹pandora-next-data-config-json" class="headerlink" title="ä¿®æ”¹pandora-next&#x2F;data&#x2F;config.json"></a>ä¿®æ”¹pandora-next&#x2F;data&#x2F;config.json</h3><p>æ·»åŠ ä»£ç†å‰ç¼€ï¼Œæ³¨æ„è‹±æ–‡æ•°å­—éƒ½è¦æœ‰ï¼Œé•¿åº¦&gt;&#x3D;8,è¿™ä¹Ÿæ˜¯çœ‹äº†logsæ‰å‘ç°çš„è§„åˆ™</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;proxy_api_prefix&quot;:</span> <span class="string">&quot;proxy2openai&quot;</span><span class="string">,</span></span><br></pre></td></tr></table></figure><h3 id="é‡å¯dockerå®¹å™¨"><a href="#é‡å¯dockerå®¹å™¨" class="headerlink" title="é‡å¯dockerå®¹å™¨"></a>é‡å¯dockerå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart PandoraNext</span><br></pre></td></tr></table></figure><p>ä»£ç†æ¥å£ä¸ºhttps:&#x2F;&#x2F;åŸŸå&#x2F;å‰ç¼€&#x2F;backend-api&#x2F;conversation,å¦‚<a href="https://pass.xinhaojin.top/proxy2openai/backend-api/conversation">https://pass.xinhaojin.top/proxy2openai/backend-api/conversation</a>ï¼Œè®¿é—®æ­£å¸¸ä¼šè¿”å›</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Method Not Allowed&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>chatgpt-webéƒ¨ç½²å‚è€ƒä¹‹å‰çš„æ–‡ç« <br><a href="https://xinhaojin.github.io/2023/04/03/centos7%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2chatgpt/">https://xinhaojin.github.io/2023/04/03/centos7%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2chatgpt/</a>ï¼Œåªéœ€åœ¨docker-compose.ymlä¸­ä¿®æ”¹API_REVERSE_PROXYå³å¯</p><h2 id="æ³¨æ„å®šæœŸæ›´æ–°accesstoken"><a href="#æ³¨æ„å®šæœŸæ›´æ–°accesstoken" class="headerlink" title="æ³¨æ„å®šæœŸæ›´æ–°accesstoken"></a>æ³¨æ„å®šæœŸæ›´æ–°accesstoken</h2>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>chatgpt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sshå…å¯†ç™»å½•</title>
    <link href="/2023/12/14/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/"/>
    <url>/2023/12/14/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="æœ¬åœ°ç”Ÿæˆå…¬é’¥ç§é’¥"><a href="#æœ¬åœ°ç”Ÿæˆå…¬é’¥ç§é’¥" class="headerlink" title="æœ¬åœ°ç”Ÿæˆå…¬é’¥ç§é’¥"></a>æœ¬åœ°ç”Ÿæˆå…¬é’¥ç§é’¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><h3 id="æŠŠæœ¬åœ°çš„-ssh-id-rsa-pubå†…æ–‡æœ¬å†…å®¹ç²˜è´´åˆ°è¿œç¨‹ä¸»æœºçš„-ssh-authorized-keysä¸­æ–°å»ºä¸€è¡Œ"><a href="#æŠŠæœ¬åœ°çš„-ssh-id-rsa-pubå†…æ–‡æœ¬å†…å®¹ç²˜è´´åˆ°è¿œç¨‹ä¸»æœºçš„-ssh-authorized-keysä¸­æ–°å»ºä¸€è¡Œ" class="headerlink" title="æŠŠæœ¬åœ°çš„.ssh&#x2F;id_rsa.pubå†…æ–‡æœ¬å†…å®¹ç²˜è´´åˆ°è¿œç¨‹ä¸»æœºçš„.ssh&#x2F;authorized_keysä¸­æ–°å»ºä¸€è¡Œ"></a>æŠŠæœ¬åœ°çš„.ssh&#x2F;id_rsa.pubå†…æ–‡æœ¬å†…å®¹ç²˜è´´åˆ°è¿œç¨‹ä¸»æœºçš„.ssh&#x2F;authorized_keysä¸­æ–°å»ºä¸€è¡Œ</h3>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBoot+Redisé•¿é“¾æ¥è½¬çŸ­é“¾æ¥+Dockeréƒ¨ç½²</title>
    <link href="/2023/08/21/SpringBoot+Redis%E9%95%BF%E9%93%BE%E6%8E%A5%E8%BD%AC%E7%9F%AD%E9%93%BE%E6%8E%A5+Docker%E9%83%A8%E7%BD%B2%20/"/>
    <url>/2023/08/21/SpringBoot+Redis%E9%95%BF%E9%93%BE%E6%8E%A5%E8%BD%AC%E7%9F%AD%E9%93%BE%E6%8E%A5+Docker%E9%83%A8%E7%BD%B2%20/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>è¿™æ˜¯ä¸€ä¸ªé•¿é“¾æ¥è½¬çŸ­é“¾æ¥çš„SpringBooté¡¹ç›®ï¼Œåˆ©ç”¨Rediså­˜å‚¨é•¿çŸ­é“¾æ¥çš„é”®å€¼å…³ç³»</p><p><strong>githubåœ°å€ï¼š<a href="https://github.com/xinhaojin/short-url">https://github.com/xinhaojin/short-url</a></strong></p><p><strong>æ¼”ç¤ºç«™ç‚¹ï¼š<a href="https://s.xinhaojin.top/">https://s.xinhaojin.top</a></strong></p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>ç”¨Spring Initializråˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼Œä½¿ç”¨Java8ã€SpringBoot2ç‰ˆæœ¬ï¼Œå‹¾é€‰spring web</p><h3 id="å‰ç«¯é¡µé¢"><a href="#å‰ç«¯é¡µé¢" class="headerlink" title="å‰ç«¯é¡µé¢"></a>å‰ç«¯é¡µé¢</h3><p>åœ¨resource&#x2F;staticä¸‹åˆ›å»ºindex.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>çŸ­é“¾æ¥ç”Ÿæˆå™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://xinhaojin.github.io/imgs-host/20230821/tutu.7cfpopzisy40.webp&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;16*16&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">10%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;text&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#007bff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#0056b3</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#shortUrl</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#007bff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.copy-message</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#28a745</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: opacity <span class="number">0.5s</span> ease-in-out;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>çŸ­é“¾æ¥ç”Ÿæˆå™¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;longUrl&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥åŸå§‹é•¿é“¾æ¥&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;shortenURL()&quot;</span>&gt;</span>ç”ŸæˆçŸ­é“¾æ¥<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>çŸ­é“¾æ¥: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;shortUrl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;copyToClipboard()&quot;</span>&gt;</span>å¤åˆ¶åˆ°å‰ªè´´æ¿<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;copy-message&quot;</span> <span class="attr">id</span>=<span class="string">&quot;copyMessage&quot;</span>&gt;</span>å¤åˆ¶æˆåŠŸï¼<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">shortenURL</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> longUrl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;longUrl&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fetch</span>(<span class="string">`/api/shorten?url=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(longUrl)&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">text</span>())</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function"><span class="params">shortUrl</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> fullShortUrl = <span class="string">`https://s.xinhaojin.top/s/<span class="subst">$&#123;shortUrl&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> shortUrlElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;shortUrl&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                shortUrlElement.<span class="property">innerHTML</span> = <span class="string">`&lt;a href=&quot;<span class="subst">$&#123;fullShortUrl&#125;</span>&quot; target=&quot;_blank&quot;&gt;<span class="subst">$&#123;fullShortUrl&#125;</span>&lt;/a&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">copyToClipboard</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> shortUrl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;shortUrl&#x27;</span>).<span class="property">textContent</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> tempInput = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;input&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        tempInput.<span class="property">value</span> = shortUrl;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(tempInput);</span></span><br><span class="line"><span class="language-javascript">        tempInput.<span class="title function_">select</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(tempInput);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> copyMessage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;copyMessage&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        copyMessage.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            copyMessage.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;1&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            copyMessage.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">1500</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><p>MyController.javaï¼Œç»™å‰ç«¯æä¾›ç”ŸæˆçŸ­é“¾æ¥å’Œæ¢å¤é•¿é“¾æ¥çš„æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.xinhaojin.shorturl.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> top.xinhaojin.shorturl.service.MyService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MyService myService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ MyService</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyController</span><span class="params">(MyService myService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myService = myService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†ç”ŸæˆçŸ­é“¾æ¥çš„è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/shorten&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">shortenURL</span><span class="params">(<span class="meta">@RequestParam</span> String url)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ MyService ä¸­çš„æ–¹æ³•ï¼Œç”ŸæˆçŸ­é“¾æ¥å¹¶è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> myService.shortenURL(url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†è¿˜åŸé•¿é“¾æ¥çš„è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/restore&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">restoreURL</span><span class="params">(<span class="meta">@RequestParam</span> String key)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ MyService ä¸­çš„æ–¹æ³•ï¼Œè¿˜åŸçŸ­é“¾æ¥ä¸ºé•¿é“¾æ¥å¹¶è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> myService.restoreURL(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>RedirectController.java,å¤„ç†ç”¨æˆ·è®¿é—®çŸ­é“¾æ¥æ—¶çš„é‡å®šå‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.xinhaojin.shorturl.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> top.xinhaojin.shorturl.service.MyService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/s&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedirectController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MyService myService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RedirectController</span><span class="params">(MyService myService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.myService = myService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;shortKey&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">redirect</span><span class="params">(<span class="meta">@PathVariable</span> String shortKey, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">originalUrl</span> <span class="operator">=</span> myService.restoreURL(shortKey);</span><br><span class="line">        <span class="keyword">if</span> (originalUrl != <span class="literal">null</span>) &#123;</span><br><span class="line">            response.sendRedirect(originalUrl);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Handle not found case</span></span><br><span class="line">            response.sendError(HttpServletResponse.SC_NOT_FOUND);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><p>MyService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.xinhaojin.shorturl.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.dao.DataAccessException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StringRedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">(StringRedisTemplate redisTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">shortenURL</span><span class="params">(String longURL)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è‡ªåŠ¨æ·»åŠ  http:// å‰ç¼€</span></span><br><span class="line">            <span class="keyword">if</span> (!longURL.startsWith(<span class="string">&quot;http://&quot;</span>) &amp;&amp; !longURL.startsWith(<span class="string">&quot;https://&quot;</span>)) &#123;</span><br><span class="line">                longURL = <span class="string">&quot;http://&quot;</span> + longURL;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!isValidURL(longURL)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;invalid&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">shortKey</span> <span class="operator">=</span> generateShortKey(longURL);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„çŸ­é“¾æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">existingLongURL</span> <span class="operator">=</span> redisTemplate.opsForValue().get(shortKey);</span><br><span class="line">            <span class="keyword">if</span> (existingLongURL != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> shortKey;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å°†çŸ­é“¾æ¥ä¸é•¿é“¾æ¥æ˜ å°„å…³ç³»å­˜å‚¨åˆ° Redis ä¸­</span></span><br><span class="line">            redisTemplate.opsForValue().set(shortKey, longURL);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> shortKey;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">restoreURL</span><span class="params">(String shortKey)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ä» Redis ä¸­è·å–çŸ­é“¾æ¥å¯¹åº”çš„é•¿é“¾æ¥</span></span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForValue().get(shortKey);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DataAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">generateShortKey</span><span class="params">(String longURL)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»º MD5 å“ˆå¸Œå‡½æ•°å®ä¾‹</span></span><br><span class="line">            <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md.update(longURL.getBytes());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–ç”Ÿæˆçš„å“ˆå¸Œå­—èŠ‚æ•°ç»„</span></span><br><span class="line">            <span class="type">byte</span>[] hashBytes = md.digest();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">byte</span> b : hashBytes) &#123;</span><br><span class="line">                sb.append(String.format(<span class="string">&quot;%02x&quot;</span>, b &amp; <span class="number">0xff</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æˆªå–å‰ 8 ä¸ªå­—ç¬¦ä½œä¸ºçŸ­é“¾æ¥</span></span><br><span class="line">            <span class="keyword">return</span> sb.substring(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥è¿”å›é»˜è®¤çš„çŸ­é“¾æ¥æˆ–å…¶ä»–å¤„ç†æ–¹å¼</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;default123&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isValidURL</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼éªŒè¯æ˜¯å¦ä¸ºåˆæ³•ç½‘å€</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;^(http|https)://[a-zA-Z0-9.-]+\\.[a-zA-Z]&#123;2,6&#125;(/.*)?$&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> Pattern.matches(regex, url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.host=1.15.xx.xxx</span><br><span class="line">spring.redis.port=6379</span><br><span class="line"></span><br><span class="line">server.port=7777</span><br></pre></td></tr></table></figure><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.xinhaojin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>short-url<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>short-url<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>short-url<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="dockeréƒ¨ç½²"><a href="#dockeréƒ¨ç½²" class="headerlink" title="dockeréƒ¨ç½²"></a>dockeréƒ¨ç½²</h2><h3 id="åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹mavenå‘½ä»¤ï¼Œä¼šåœ¨targetä¸‹ç”Ÿæˆjaræ–‡ä»¶"><a href="#åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹mavenå‘½ä»¤ï¼Œä¼šåœ¨targetä¸‹ç”Ÿæˆjaræ–‡ä»¶" class="headerlink" title="åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹mavenå‘½ä»¤ï¼Œä¼šåœ¨targetä¸‹ç”Ÿæˆjaræ–‡ä»¶"></a>åœ¨é¡¹ç›®æ ¹ç›®å½•ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹mavenå‘½ä»¤ï¼Œä¼šåœ¨targetä¸‹ç”Ÿæˆjaræ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºä¸€ä¸ªåä¸ºDockerfileçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹"><a href="#æ–°å»ºä¸€ä¸ªåä¸ºDockerfileçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹" class="headerlink" title="æ–°å»ºä¸€ä¸ªåä¸ºDockerfileçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹"></a>æ–°å»ºä¸€ä¸ªåä¸ºDockerfileçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ä¸€ä¸ªåŸºç¡€çš„ Java é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jdk-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹·è´ JAR æ–‡ä»¶åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> your-application-name-version.jar /app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš´éœ²åº”ç”¨ç¨‹åºè¿è¡Œçš„ç«¯å£</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">7777</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åº</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨æœ‰dockerç¯å¢ƒçš„åœ°æ–¹å¦‚å®‰è£…äº†dockerçš„UbuntuæœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºdockeré•œåƒ"><a href="#åœ¨æœ‰dockerç¯å¢ƒçš„åœ°æ–¹å¦‚å®‰è£…äº†dockerçš„UbuntuæœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºdockeré•œåƒ" class="headerlink" title="åœ¨æœ‰dockerç¯å¢ƒçš„åœ°æ–¹å¦‚å®‰è£…äº†dockerçš„UbuntuæœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºdockeré•œåƒ"></a>åœ¨æœ‰dockerç¯å¢ƒçš„åœ°æ–¹å¦‚å®‰è£…äº†dockerçš„UbuntuæœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºdockeré•œåƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker build -t your-image-name:your-tag .</span></span><br><span class="line">docker build -t short-url:v1.0 .</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œdockeré•œåƒ"><a href="#è¿è¡Œdockeré•œåƒ" class="headerlink" title="è¿è¡Œdockeré•œåƒ"></a>è¿è¡Œdockeré•œåƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -d -p 7777:7777 your-image-name:tag</span></span><br><span class="line">docker run --restart=always --name shorturl -d -p 7777:7777 short-url:v1.0</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥è¿è¡Œæƒ…å†µ"><a href="#æ£€æŸ¥è¿è¡Œæƒ…å†µ" class="headerlink" title="æ£€æŸ¥è¿è¡Œæƒ…å†µ"></a>æ£€æŸ¥è¿è¡Œæƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><h2 id="ç»‘å®šåŸŸå-ç”¨nginxåšå¥½åå‘ä»£ç†"><a href="#ç»‘å®šåŸŸå-ç”¨nginxåšå¥½åå‘ä»£ç†" class="headerlink" title="ç»‘å®šåŸŸå,ç”¨nginxåšå¥½åå‘ä»£ç†"></a>ç»‘å®šåŸŸå,ç”¨nginxåšå¥½åå‘ä»£ç†</h2><p>è§£æä¸€ä¸ªäºŒçº§åŸŸååˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå¦‚s.xinhaojin.top</p><h3 id="æŸ¥çœ‹nginxç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å®‰è£…"><a href="#æŸ¥çœ‹nginxç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å®‰è£…" class="headerlink" title="æŸ¥çœ‹nginxç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å®‰è£…"></a>æŸ¥çœ‹nginxç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install nginx</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-etc-nginx-nginx-conf"><a href="#ä¿®æ”¹-etc-nginx-nginx-conf" class="headerlink" title="ä¿®æ”¹&#x2F;etc&#x2F;nginx&#x2F;nginx.conf"></a>ä¿®æ”¹&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</h3><p>åœ¨httpæ ‡ç­¾é‡Œæ·»åŠ ä¸€ä¸ªserver</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line"><span class="attribute">server_name</span> s.xinhaojin.top;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line"><span class="attribute">proxy_pass</span> http://1.15.xx.xxx:7777;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥-Nginx-æœåŠ¡æ˜¯å¦å·²ç»å­˜åœ¨äº-systemd-ä¸­ï¼š"><a href="#æ£€æŸ¥-Nginx-æœåŠ¡æ˜¯å¦å·²ç»å­˜åœ¨äº-systemd-ä¸­ï¼š" class="headerlink" title="æ£€æŸ¥ Nginx æœåŠ¡æ˜¯å¦å·²ç»å­˜åœ¨äº systemd ä¸­ï¼š"></a>æ£€æŸ¥ Nginx æœåŠ¡æ˜¯å¦å·²ç»å­˜åœ¨äº systemd ä¸­ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl is-enabled nginx</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿”å› disabledï¼Œåˆ™è¡¨ç¤º Nginx ç›®å‰ä¸ä¼šå¼€æœºè‡ªå¯ã€‚<br>å¦‚æœ Nginx å°šæœªå¼€æœºè‡ªå¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><h3 id="ç”³è¯·SSLè¯ä¹¦"><a href="#ç”³è¯·SSLè¯ä¹¦" class="headerlink" title="ç”³è¯·SSLè¯ä¹¦"></a>ç”³è¯·SSLè¯ä¹¦</h3><p>å®‰è£…certbot</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install certbot</span><br></pre></td></tr></table></figure><p>ä¸´æ—¶å…³é—­nginxä»¥é‡Šæ”¾80ç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop nginx</span><br><span class="line"><span class="built_in">sudo</span> certbot certonly --standalone -d s.xinhaojin.top</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹nginxé…ç½®-etc-nginx-nginx-conf"><a href="#ä¿®æ”¹nginxé…ç½®-etc-nginx-nginx-conf" class="headerlink" title="ä¿®æ”¹nginxé…ç½®&#x2F;etc&#x2F;nginx&#x2F;nginx.conf"></a>ä¿®æ”¹nginxé…ç½®&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</h3><p>æŠŠä¸Šä¸€ä¸ªserveråˆ å»ï¼Œæ›¿æ¢ä»¥ä¸‹ä»£ç </p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> s.xinhaojin.top;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> s.xinhaojin.top;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/s.xinhaojin.top/fullchain.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/s.xinhaojin.top/privkey.pem;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:7777;  <span class="comment"># Change to your Spring Boot app&#x27;s IP and port</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> <span class="regexp">~ /.well-known</span> &#123;</span><br><span class="line">        <span class="attribute">allow</span> all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡å¯nginx"><a href="#é‡å¯nginx" class="headerlink" title="é‡å¯nginx"></a>é‡å¯nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start nginx</span><br><span class="line"><span class="built_in">sudo</span> systemctl reload nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>springboot</tag>
      
      <tag>redis</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoåšå®¢è¿ç§»</title>
    <link href="/2023/07/04/hexo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/"/>
    <url>/2023/07/04/hexo%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="hexoåšå®¢è¿ç§»"><a href="#hexoåšå®¢è¿ç§»" class="headerlink" title="hexoåšå®¢è¿ç§»"></a>hexoåšå®¢è¿ç§»</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€å¼€å§‹ä½¿ç”¨wordpresså†™åšå®¢ï¼Œæ–¹ä¾¿æ˜¯æ–¹ä¾¿ï¼Œä½†æ„Ÿè§‰ä¸å¤Ÿå¹²å‡€ã€ä¸å¤Ÿä¼˜é›…ï¼Œæ‰€ä»¥åæ¥å¼€å§‹å†™markdownæ ¼å¼çš„åšå®¢ï¼Œä½¿ç”¨hexoéƒ¨ç½²åœ¨githubä¸Šï¼Œä½†æ˜¯å¹³æ—¶ä½¿ç”¨çš„ç”µè„‘æœ‰å¾ˆå¤šå°ï¼ŒGitHubä¸Šå…¬å¼€çš„åˆåªæœ‰publicæ–‡ä»¶å¤¹çš„é™æ€é¡µé¢ï¼Œæ²¡æœ‰æŠŠmarkwodnæ–‡ä»¶ä¸€å¹¶æäº¤ï¼Œå› æ­¤ä¹Ÿä¸èƒ½é€šè¿‡githubæ¥åŒæ­¥ï¼Œæ‰€ä»¥å°±æƒ³å¹²è„†æŠŠhexoé¡¹ç›®æ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œè¦å†™æ–°æ–‡ç« å°±å†™å¥½markdownä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨å»æäº¤ï¼Œä¹Ÿçœçš„åœ¨å„ä¸ªç”µè„‘ä¸Šé…ç½®ã€‚æœ¬æ–‡ç®€è¦ä»‹ç»æŠŠhexoé¡¹ç›®è¿ç§»åˆ°äº‘æœåŠ¡å™¨ä¸Šçš„æ­¥éª¤ã€‚</p><ul><li>2024.10.2ç¬¬äºŒæ¬¡ä¿®æ”¹ï¼Œä¸å†éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œä»¥ä¸‹æ˜¯åœ¨æœ¬åœ°æ–°æœºå™¨ä¸Šçš„éƒ¨ç½²æ­¥éª¤</li></ul><h3 id="å®‰è£…nodejsã€Hexoå’Œå…¶ä»–ä¾èµ–"><a href="#å®‰è£…nodejsã€Hexoå’Œå…¶ä»–ä¾èµ–" class="headerlink" title="å®‰è£…nodejsã€Hexoå’Œå…¶ä»–ä¾èµ–"></a>å®‰è£…nodejsã€Hexoå’Œå…¶ä»–ä¾èµ–</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line">mkdir blog</span><br><span class="line">cd blog</span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸»é¢˜</span></span><br><span class="line">npm install --save hexo-theme-fluid</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯„è®ºæ’ä»¶</span></span><br><span class="line">npm i --save gitalk</span><br></pre></td></tr></table></figure><h3 id="å»ºç«‹gitè¿æ¥"><a href="#å»ºç«‹gitè¿æ¥" class="headerlink" title="å»ºç«‹gitè¿æ¥"></a>å»ºç«‹gitè¿æ¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;xinhaojin&quot;</span><br><span class="line">git config --global user.email &quot;xinhaojin@qq.com&quot;</span><br><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;xinhaojin@qq.com&quot;</span><br></pre></td></tr></table></figure><p>æŠŠå…¬é’¥&#x2F;root&#x2F;.ssh&#x2F;id_rsa.pubä¸­çš„å†…å®¹æ·»åŠ åˆ°github-setting-ssh key</p><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>ä¿®æ”¹_config.yml</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">title: xinhaojin&#x27;s blog</span><br><span class="line">keywords:</span><br><span class="line">author: xinhaojin</span><br><span class="line">language: zh-CN</span><br><span class="line"></span><br><span class="line">theme: fulid</span><br><span class="line">deploy:</span><br><span class="line">  type: &#x27;git&#x27;</span><br><span class="line">  repository:  git@github.com:xinhaojin/xinhaojin.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°åšå®¢"><a href="#æ›´æ–°åšå®¢" class="headerlink" title="æ›´æ–°åšå®¢"></a>æ›´æ–°åšå®¢</h3><p>ä¸Šä¼ markdownåˆ°blog&#x2F;source&#x2F;_postsæ–‡ä»¶å¤¹<br>ç„¶åå°±å¯ä»¥å‘å¸ƒæ–°æ–‡ç« äº†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>markdownæ¨¡æ¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">tags: []</span><br><span class="line">categories:</span><br><span class="line">  - - è½¯ä»¶å®‰è£…é…ç½®</span><br><span class="line">date: 2023-05-20 13:30:00</span><br><span class="line">---</span><br><span class="line">## xxx</span><br><span class="line">### xxx</span><br><span class="line">![](url)</span><br><span class="line">&lt;url&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‡èƒ½åå‘ä»£ç†æ¥å£(vercel+cloudflare)</title>
    <link href="/2023/07/04/%E4%B8%87%E8%83%BD%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86(vercel+cloudflare)/"/>
    <url>/2023/07/04/%E4%B8%87%E8%83%BD%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86(vercel+cloudflare)/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸‡èƒ½åå‘ä»£ç†æ¥å£-vercel-cloudflare"><a href="#ä¸‡èƒ½åå‘ä»£ç†æ¥å£-vercel-cloudflare" class="headerlink" title="ä¸‡èƒ½åå‘ä»£ç†æ¥å£(vercel+cloudflare)"></a>ä¸‡èƒ½åå‘ä»£ç†æ¥å£(vercel+cloudflare)</h2><h3 id="vercel"><a href="#vercel" class="headerlink" title="vercel"></a>vercel</h3><p><a href="https://github.com/gaboolic/vercel-reverse-proxy">gaboolic&#x2F;vercel-reverse-proxy: vercelåå‘ä»£ç†|OpenAI&#x2F;ChatGPT å…ç¿»å¢™ä»£ç†|githubå…ç¿»å¢™ä»£ç†|githubä¸‹è½½åŠ é€Ÿ|googleä»£ç†|vercelä¸‡èƒ½ä»£ç†</a></p><p>ç‚¹å‡»ä¸€é”®éƒ¨ç½²</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.6a2gkpr6v3g0.webp"></p><p>ç„¶ååœ¨é¡¹ç›®è®¾ç½®ä¸­è®¾ç½®è‡ªå®šä¹‰åŸŸå</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.3td9tigs2o80.webp"></p><p>æŒ‰æç¤ºç»™åŸŸåæ·»åŠ CNAMEè®°å½•å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.61thfdz2zjo.webp"></p><h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><p>eg1. <a href="https://proxy.xinhaojin.top/proxy/www.google.com/search?q=xinhaojin.top">https://proxy.xinhaojin.top/proxy/www.google.com/search?q=xinhaojin.top</a></p><p>ç­‰åŒäº<a href="https://www.google.com/search?q=xinhaojin.top">https://www.google.com/search?q=xinhaojin.top</a></p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.oh65m4nasu8.png"></p><h3 id="cloudflare"><a href="#cloudflare" class="headerlink" title="cloudflare"></a>cloudflare</h3><p><a href="https://github.com/gaboolic/cloudflare-reverse-proxy">gaboolic&#x2F;cloudflare-reverse-proxy: cloudflareåå‘ä»£ç†|OpenAI&#x2F;ChatGPT å…ç¿»å¢™ä»£ç†|githubå…ç¿»å¢™ä»£ç†|githubä¸‹è½½åŠ é€Ÿ|googleä»£ç†|cloudflareä¸‡èƒ½ä»£ç†</a></p><p>åœ¨cloudflareåˆ›å»ºä¸€ä¸ªæ–°çš„worker</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.2urpb8qa4xe0.webp">ç¼–è¾‘ä»£ç ï¼ŒæŠŠ<a href="https://github.com/gaboolic/cloudflare-reverse-proxy/blob/main/_worker.js">https://github.com/gaboolic/cloudflare-reverse-proxy/blob/main/_worker.js</a>ä¸­çš„å†…å®¹å†™è¿›worker.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">    <span class="keyword">const</span> actualUrlStr = url.<span class="property">pathname</span>.<span class="title function_">replace</span>(<span class="string">&quot;/proxy/&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(actualUrlStr)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> actualUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(actualUrlStr)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> modifiedRequest = <span class="keyword">new</span> <span class="title class_">Request</span>(actualUrl, &#123;</span><br><span class="line">      <span class="attr">headers</span>: request.<span class="property">headers</span>,</span><br><span class="line">      <span class="attr">method</span>: request.<span class="property">method</span>,</span><br><span class="line">      <span class="attr">body</span>: request.<span class="property">body</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;follow&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(modifiedRequest);</span><br><span class="line">    <span class="keyword">const</span> modifiedResponse = <span class="keyword">new</span> <span class="title class_">Response</span>(response.<span class="property">body</span>, response);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ·»åŠ å…è®¸è·¨åŸŸè®¿é—®çš„å“åº”å¤´</span></span><br><span class="line">    modifiedResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> modifiedResponse;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶éƒ¨ç½²</p><p>æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼ˆAè®°å½•ï¼Œåœ°å€223.5.5.5 or 8.8.8.8   â€¦ï¼‰æˆ–è€…ä½¿ç”¨åŸå§‹åŸŸåï¼Œä¸vercelçš„åŸŸååŒç­‰çœ‹å¾…å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä»£ç†</tag>
      
      <tag>cloudflare</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»™æŒ‡å®šç«¯å£çš„ç½‘é¡µåº”ç”¨ç»‘å®šåŸŸåå¹¶å¼ºåˆ¶SSLï¼ˆç”³è¯·è¯ä¹¦+nginxé…ç½®ï¼‰</title>
    <link href="/2023/07/04/%E7%BB%99%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E7%9A%84%E7%BD%91%E9%A1%B5%E5%BA%94%E7%94%A8%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D%E5%B9%B6%E5%BC%BA%E5%88%B6SSL%EF%BC%88%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6+nginx%E9%85%8D%E7%BD%AE%EF%BC%89/"/>
    <url>/2023/07/04/%E7%BB%99%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E7%9A%84%E7%BD%91%E9%A1%B5%E5%BA%94%E7%94%A8%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D%E5%B9%B6%E5%BC%BA%E5%88%B6SSL%EF%BC%88%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6+nginx%E9%85%8D%E7%BD%AE%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="ç»™æŒ‡å®šç«¯å£çš„ç½‘é¡µåº”ç”¨ç»‘å®šåŸŸåå¹¶å¼ºåˆ¶SSLï¼ˆç”³è¯·è¯ä¹¦-nginxé…ç½®ï¼‰"><a href="#ç»™æŒ‡å®šç«¯å£çš„ç½‘é¡µåº”ç”¨ç»‘å®šåŸŸåå¹¶å¼ºåˆ¶SSLï¼ˆç”³è¯·è¯ä¹¦-nginxé…ç½®ï¼‰" class="headerlink" title="ç»™æŒ‡å®šç«¯å£çš„ç½‘é¡µåº”ç”¨ç»‘å®šåŸŸåå¹¶å¼ºåˆ¶SSLï¼ˆç”³è¯·è¯ä¹¦+nginxé…ç½®ï¼‰"></a>ç»™æŒ‡å®šç«¯å£çš„ç½‘é¡µåº”ç”¨ç»‘å®šåŸŸåå¹¶å¼ºåˆ¶SSLï¼ˆç”³è¯·è¯ä¹¦+nginxé…ç½®ï¼‰</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åˆšåˆšæ³¨å†Œäº†ä¸€ä¸ªæ–°çš„chatgptè´¦å·ï¼Œæœ‰5ç¾é‡‘ä½™é¢ï¼Œåˆå¯ä»¥ç”¨APIäº†ï¼Œåœ¨ç”²éª¨æ–‡äº‘çš„Ubuntu22æœåŠ¡å™¨ä¸Šä½¿ç”¨dockeréƒ¨ç½²äº†ä¸€ä¸‹ï¼Œä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡ç›¸å…³çš„æ–‡ç« <a href="https://xinhaojin.github.io/2023/04/03/centos7%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2chatgpt/">centos7ä½¿ç”¨dockeréƒ¨ç½²chatgpt - xinhaojin&#39;s blog</a>ï¼Œé»˜è®¤éƒ¨ç½²åœ¨3002ç«¯å£ï¼Œåªèƒ½ä½¿ç”¨httpè®¿é—®ã€‚</p><p>ä½¿ç”¨çš„æ˜¯<a href="https://github.com/Chanzhaoyu/chatgpt-web">Chanzhaoyu&#x2F;chatgpt-web: ç”¨ Express å’Œ Vue3 æ­å»ºçš„ ChatGPT æ¼”ç¤ºç½‘é¡µ (github.com)</a>è¿™ä¸ªé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨railwayä¸€é”®éƒ¨ç½²ï¼Œç»‘å®šåŸŸåã€ä½¿ç”¨HTTPSéƒ½å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¸æ¸…æ¥šrailwayä½¿ç”¨ä¼šä¸ä¼šè¶…è¿‡å…è´¹é¢åº¦ï¼Œè¿˜æ˜¯å†³å®šç”¨è‡ªå·±çš„æœåŠ¡å™¨å°å°æŠ˜è…¾ä¸€ä¸‹ï¼Œå› ä¸ºç»å¸¸æè¿™å¥—æµç¨‹ï¼Œæ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹ã€‚</p><h3 id="è§£æåŸŸååˆ°æœåŠ¡å™¨"><a href="#è§£æåŸŸååˆ°æœåŠ¡å™¨" class="headerlink" title="è§£æåŸŸååˆ°æœåŠ¡å™¨"></a>è§£æåŸŸååˆ°æœåŠ¡å™¨</h3><p>ç»™åŸŸåæ·»åŠ Aè®°å½•ç»‘å®šæœåŠ¡å™¨å…¬ç½‘IP</p><h3 id="ç”³è¯·SSLè¯ä¹¦"><a href="#ç”³è¯·SSLè¯ä¹¦" class="headerlink" title="ç”³è¯·SSLè¯ä¹¦"></a>ç”³è¯·SSLè¯ä¹¦</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install certbot python3-certbot-nginx</span><br><span class="line">sudo certbot --nginx -d chat.xinhaojin.top</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼šè¯ä¹¦ç”³è¯·æˆåŠŸï¼Œä½†æ²¡æ³•è‡ªåŠ¨å®‰è£…ï¼Œå› ä¸ºæ²¡æœ‰åœ¨nginxé…ç½®ä¸­æ‰¾åˆ°åŸŸåç›¸å…³é…ç½®</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Successfully received certificate.</span><br><span class="line">Certificate is saved at: /etc/letsencrypt/live/chat.xinhaojin.top/fullchain.pem</span><br><span class="line">Key is saved at:         /etc/letsencrypt/live/chat.xinhaojin.top/privkey.pem</span><br><span class="line">This certificate expires on 2023-10-02.</span><br><span class="line">These files will be updated when the certificate renews.</span><br><span class="line">Certbot has set up a scheduled task to automatically renew this certificate in the background.</span><br><span class="line"></span><br><span class="line">Deploying certificate</span><br><span class="line">Could not install certificate</span><br><span class="line"></span><br><span class="line">NEXT STEPS:</span><br><span class="line">- The certificate was saved, but could not be installed (installer: nginx). After fixing the error shown below, try installing it again by running:</span><br><span class="line">  certbot install --cert-name chat.xinhaojin.top</span><br><span class="line"></span><br><span class="line">Could not automatically find a matching server block for chat.xinhaojin.top. Set the `server_name` directive to use the Nginx installer.</span><br><span class="line">Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹nginxé…ç½®"><a href="#ä¿®æ”¹nginxé…ç½®" class="headerlink" title="ä¿®æ”¹nginxé…ç½®"></a>ä¿®æ”¹nginxé…ç½®</h3><p>&#x2F;etc&#x2F;nginx&#x2F;nginx.confåŸé…ç½®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attribute">user</span>  nginx;</span><br><span class="line"><span class="attribute">worker_processes</span>  auto;</span><br><span class="line"></span><br><span class="line"><span class="attribute">error_log</span>  /var/log/nginx/<span class="literal">error</span>.log <span class="literal">notice</span>;</span><br><span class="line"><span class="attribute">pid</span>        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;<span class="variable">$http_user_agent</span>&quot; &quot;<span class="variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-é‡å®šå‘80ç«¯å£çš„HTTPè¯·æ±‚åˆ°443ç«¯å£HTTPS"><a href="#1-é‡å®šå‘80ç«¯å£çš„HTTPè¯·æ±‚åˆ°443ç«¯å£HTTPS" class="headerlink" title="1.é‡å®šå‘80ç«¯å£çš„HTTPè¯·æ±‚åˆ°443ç«¯å£HTTPS"></a>1.é‡å®šå‘80ç«¯å£çš„HTTPè¯·æ±‚åˆ°443ç«¯å£HTTPS</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  chat.xinhaojin.top; </span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®443ç«¯å£ä½¿ç”¨SSLè¯ä¹¦ï¼Œé…ç½®SSLå‚æ•°"><a href="#2-é…ç½®443ç«¯å£ä½¿ç”¨SSLè¯ä¹¦ï¼Œé…ç½®SSLå‚æ•°" class="headerlink" title="2.é…ç½®443ç«¯å£ä½¿ç”¨SSLè¯ä¹¦ï¼Œé…ç½®SSLå‚æ•°"></a>2.é…ç½®443ç«¯å£ä½¿ç”¨SSLè¯ä¹¦ï¼Œé…ç½®SSLå‚æ•°</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl; </span><br><span class="line">    <span class="attribute">server_name</span> chat.xinhaojin.top;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/chat.xinhaojin.top/fullchain.pem;   </span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/chat.xinhaojin.top/privkey.pem; </span><br><span class="line">  </span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span>;  </span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨locationä¸­é…ç½®ä»£ç†è‡³åº”ç”¨"><a href="#3-åœ¨locationä¸­é…ç½®ä»£ç†è‡³åº”ç”¨" class="headerlink" title="3.åœ¨locationä¸­é…ç½®ä»£ç†è‡³åº”ç”¨"></a>3.åœ¨locationä¸­é…ç½®ä»£ç†è‡³åº”ç”¨</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">           <span class="attribute">proxy_pass</span> http://0.0.0.0:3002;</span><br><span class="line">           <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">           <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">           <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹åé…ç½®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attribute">user</span>  nginx;</span><br><span class="line"><span class="attribute">worker_processes</span>  auto;</span><br><span class="line"></span><br><span class="line"><span class="attribute">error_log</span>  /var/log/nginx/<span class="literal">error</span>.log <span class="literal">notice</span>;</span><br><span class="line"><span class="attribute">pid</span>        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;<span class="variable">$remote_addr</span> - <span class="variable">$remote_user</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;<span class="variable">$http_user_agent</span>&quot; &quot;<span class="variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  chat.xinhaojin.top; </span><br><span class="line">        <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">443</span> ssl; </span><br><span class="line">        <span class="attribute">server_name</span>   chat.xinhaojin.top;  </span><br><span class="line">      </span><br><span class="line">        <span class="attribute">ssl_certificate</span> /etc/letsencrypt/live/chat.xinhaojin.top/fullchain.pem;</span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /etc/letsencrypt/live/chat.xinhaojin.top/privkey.pem;</span><br><span class="line">  </span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1.<span class="number">2</span>;  </span><br><span class="line">        <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256;  </span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">           <span class="attribute">proxy_pass</span> http://0.0.0.0:3002;</span><br><span class="line">           <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">           <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">           <span class="attribute">proxy_set_header</span> Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        &#125;   </span><br><span class="line">     &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡è½½nginxé…ç½®"><a href="#é‡è½½nginxé…ç½®" class="headerlink" title="é‡è½½nginxé…ç½®"></a>é‡è½½nginxé…ç½®</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
      <tag>ssl</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu22å®å¡”é¢æ¿å®‰è£…docker</title>
    <link href="/2023/07/04/Ubuntu22%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%AE%89%E8%A3%85docker/"/>
    <url>/2023/07/04/Ubuntu22%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E5%AE%89%E8%A3%85docker/</url>
    
    <content type="html"><![CDATA[<h2 id="Ubuntu22å®å¡”é¢æ¿å®‰è£…docker"><a href="#Ubuntu22å®å¡”é¢æ¿å®‰è£…docker" class="headerlink" title="Ubuntu22å®å¡”é¢æ¿å®‰è£…docker"></a>Ubuntu22å®å¡”é¢æ¿å®‰è£…docker</h2><p>å®˜ç½‘<a href="https://www.bt.cn/new/download.html">å®å¡”é¢æ¿ä¸‹è½½ï¼Œå…è´¹å…¨èƒ½çš„æœåŠ¡å™¨è¿ç»´è½¯ä»¶ (bt.cn)</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä¿å­˜åˆå§‹åŒ–ç”¨æˆ·å¯†ç </p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.5xjeaa9urio0.webp"></p><p>æ”¾è¡Œç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 23252/tcp</span><br><span class="line">sudo ufw allow 23252/udp</span><br><span class="line">sudo ufw enable</span><br></pre></td></tr></table></figure><p>æœ‰å¯èƒ½è¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œéœ€è¦é‡å¯å®å¡”é¢æ¿ï¼Œæˆ–é‡å¯æœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status bt</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart bt</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.7jei1ok5yo40.webp"></p><p>ä½¿ç”¨åˆå§‹åŒ–ç”¨æˆ·å¯†ç ç™»å½•è¿›å»ä¹‹åï¼Œåœ¨é¢æ¿è®¾ç½®ä¸­ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç </p><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h3><p>åœ¨é¢æ¿è½¯ä»¶å•†åº—ä¸­æœç´¢dockerå®‰è£…</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaå¸¸ç”¨æ–¹æ³•æ•´ç†</title>
    <link href="/2023/05/20/Java%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2023/05/20/Java%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaå¸¸ç”¨æ–¹æ³•æ•´ç†"><a href="#Javaå¸¸ç”¨æ–¹æ³•æ•´ç†" class="headerlink" title="Javaå¸¸ç”¨æ–¹æ³•æ•´ç†"></a>Javaå¸¸ç”¨æ–¹æ³•æ•´ç†</h1><h2 id="Object-ç±»"><a href="#Object-ç±»" class="headerlink" title="Object ç±»"></a>Object ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>equals(Object obj)</td><td>åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚</td></tr><tr><td>hashCode()</td><td>è·å–å¯¹è±¡çš„å“ˆå¸Œç ã€‚</td></tr><tr><td>toString()</td><td>è·å–å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</td></tr><tr><td>getClass()</td><td>è·å–å¯¹è±¡çš„ç±»ã€‚</td></tr><tr><td>wait()</td><td>ç­‰å¾…å…¶ä»–çº¿ç¨‹é€šçŸ¥ã€‚</td></tr><tr><td>notify()</td><td>å”¤é†’ç­‰å¾…ä¸­çš„çº¿ç¨‹ã€‚</td></tr><tr><td>notifyAll()</td><td>å”¤é†’æ‰€æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹ã€‚</td></tr></tbody></table><h2 id="Math-ç±»"><a href="#Math-ç±»" class="headerlink" title="Math ç±»"></a>Math ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>max(a, b)</td><td>è¿”å›aå’Œbä¸­è¾ƒå¤§çš„å€¼ã€‚</td></tr><tr><td>min(a, b)</td><td>è¿”å›aå’Œbä¸­è¾ƒå°çš„å€¼ã€‚</td></tr><tr><td>abs(x)</td><td>è¿”å›xçš„ç»å¯¹å€¼ã€‚</td></tr><tr><td>pow(x, y)</td><td>è¿”å›xçš„yæ¬¡å¹‚ã€‚</td></tr><tr><td>sqrt(x)</td><td>è¿”å›xçš„å¹³æ–¹æ ¹ã€‚</td></tr><tr><td>random()</td><td>è¿”å›ä¸€ä¸ª0åˆ°1ä¹‹é—´çš„éšæœºæµ®ç‚¹æ•°ã€‚</td></tr><tr><td>round(x)</td><td>å¯¹æµ®ç‚¹æ•°è¿›è¡Œå››èˆäº”å…¥ã€‚</td></tr><tr><td>floor(x)</td><td>è¿”å›ä¸å¤§äºxçš„æœ€å¤§æ•´æ•°ã€‚</td></tr><tr><td>ceil(x)</td><td>è¿”å›ä¸å°äºxçš„æœ€å°æ•´æ•°ã€‚</td></tr></tbody></table><h2 id="Random-ç±»"><a href="#Random-ç±»" class="headerlink" title="Random ç±»"></a>Random ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>nextInt(bound)</td><td>è¿”å›ä¸€ä¸ª0åˆ°boundä¹‹é—´çš„éšæœºæ•´æ•°ã€‚</td></tr><tr><td>nextDouble()</td><td>è¿”å›ä¸€ä¸ª0åˆ°1ä¹‹é—´çš„éšæœºæµ®ç‚¹æ•°ã€‚</td></tr><tr><td>nextBoolean()</td><td>è¿”å›ä¸€ä¸ªéšæœºçš„å¸ƒå°”å€¼ã€‚</td></tr><tr><td>nextBytes(byte[])</td><td>å°†éšæœºå­—èŠ‚å¡«å……åˆ°å­—èŠ‚æ•°ç»„ã€‚</td></tr></tbody></table><h2 id="String-ç±»"><a href="#String-ç±»" class="headerlink" title="String ç±»"></a>String ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>length()</td><td>è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</td></tr><tr><td>charAt(index)</td><td>è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦ã€‚</td></tr><tr><td>substring(begin, end)</td><td>æˆªå–å­å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>indexOf(str)</td><td>æŸ¥æ‰¾å­å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</td></tr><tr><td>equals(str)</td><td>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ã€‚</td></tr><tr><td>compareTo(str)</td><td>æ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤§å°å…³ç³»ã€‚</td></tr><tr><td>startsWith(prefix)</td><td>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´ã€‚</td></tr><tr><td>endsWith(suffix)</td><td>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šåç¼€ç»“å°¾ã€‚</td></tr><tr><td>toUpperCase()</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚</td></tr><tr><td>toLowerCase()</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</td></tr><tr><td>trim()</td><td>å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ã€‚</td></tr></tbody></table><h2 id="StringBuilder-StringBuffer-ç±»"><a href="#StringBuilder-StringBuffer-ç±»" class="headerlink" title="StringBuilder&#x2F;StringBuffer ç±»"></a>StringBuilder&#x2F;StringBuffer ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>append(str)</td><td>è¿½åŠ å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>insert(offset, str)</td><td>æ’å…¥å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>delete(start, end)</td><td>åˆ é™¤æŒ‡å®šèŒƒå›´çš„å­—ç¬¦ã€‚</td></tr><tr><td>reverse()</td><td>åè½¬å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>toString()</td><td>å°† StringBuilder&#x2F;StringBuffer è½¬æ¢ä¸º Stringã€‚</td></tr><tr><td>capacity()</td><td>è·å–å®¹é‡ã€‚</td></tr><tr><td>ensureCapacity(min)</td><td>ç¡®ä¿å®¹é‡è‡³å°‘ä¸ºæŒ‡å®šå€¼ã€‚</td></tr><tr><td>length()</td><td>è¿”å›é•¿åº¦ã€‚</td></tr><tr><td>setLength(length)</td><td>è®¾ç½®é•¿åº¦ã€‚</td></tr></tbody></table><h2 id="Arrays-ç±»"><a href="#Arrays-ç±»" class="headerlink" title="Arrays ç±»"></a>Arrays ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>sort(arr)</td><td>å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚</td></tr><tr><td>binarySearch(arr, key)</td><td>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„ç´¢å¼•ã€‚</td></tr><tr><td>copyOf(arr, length)</td><td>å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†ã€‚</td></tr><tr><td>fill(arr, value)</td><td>å°†æ•°ç»„ä¸­çš„å…ƒç´ éƒ½è®¾ç½®ä¸ºæŒ‡å®šå€¼ã€‚</td></tr><tr><td>equals(arr1, arr2)</td><td>æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚</td></tr></tbody></table><h2 id="Collections-ç±»"><a href="#Collections-ç±»" class="headerlink" title="Collections ç±»"></a>Collections ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>sort(list)</td><td>å¯¹åˆ—è¡¨è¿›è¡Œæ’åºã€‚</td></tr><tr><td>binarySearch(list, key)</td><td>åœ¨æ’åºåˆ—è¡¨ä¸­æŸ¥æ‰¾æŒ‡å®šå…ƒç´ çš„ç´¢å¼•ã€‚</td></tr><tr><td>reverse(list)</td><td>åè½¬åˆ—è¡¨ã€‚</td></tr><tr><td>shuffle(list)</td><td>éšæœºæ‰“ä¹±åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚</td></tr><tr><td>max(collection)</td><td>è¿”å›é›†åˆä¸­çš„æœ€å¤§å…ƒç´ ã€‚</td></tr><tr><td>min(collection)</td><td>è¿”å›é›†åˆä¸­çš„æœ€å°å…ƒç´ ã€‚</td></tr><tr><td>frequency(collection, obj)</td><td>è¿”å›é›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚</td></tr><tr><td>indexOfSubList(list, subList)</td><td>è¿”å›å­åˆ—è¡¨ç¬¬ä¸€æ¬¡å‡ºç°åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚</td></tr></tbody></table><h2 id="List-æ¥å£"><a href="#List-æ¥å£" class="headerlink" title="List æ¥å£"></a>List æ¥å£</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>add(element)</td><td>å‘åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ ã€‚</td></tr><tr><td>add(index, element)</td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ ã€‚</td></tr><tr><td>remove(index)</td><td>ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td>get(index)</td><td>è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td>set(index, element)</td><td>è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</td></tr><tr><td>size()</td><td>è¿”å›åˆ—è¡¨çš„å¤§å°ã€‚</td></tr><tr><td>indexOf(element)</td><td>è¿”å›å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚</td></tr><tr><td>subList(from, to)</td><td>è¿”å›å­åˆ—è¡¨ã€‚</td></tr></tbody></table><h2 id="Set-æ¥å£"><a href="#Set-æ¥å£" class="headerlink" title="Set æ¥å£"></a>Set æ¥å£</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>add(element)</td><td>å‘é›†åˆä¸­æ·»åŠ å…ƒç´ ã€‚</td></tr><tr><td>remove(element)</td><td>ä»é›†åˆä¸­ç§»é™¤å…ƒç´ ã€‚</td></tr><tr><td>contains(element)</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ã€‚</td></tr><tr><td>size()</td><td>è¿”å›é›†åˆçš„å¤§å°ã€‚</td></tr><tr><td>isEmpty()</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©ºã€‚</td></tr><tr><td>iterator()</td><td>è¿”å›è¿­ä»£å™¨ï¼Œç”¨äºéå†é›†åˆä¸­çš„å…ƒç´ ã€‚</td></tr></tbody></table><h2 id="Map-æ¥å£"><a href="#Map-æ¥å£" class="headerlink" title="Map æ¥å£"></a>Map æ¥å£</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>put(key, value)</td><td>å°†é”®å€¼å¯¹æ·»åŠ åˆ°æ˜ å°„ä¸­ã€‚</td></tr><tr><td>get(key)</td><td>æ ¹æ®é”®è·å–å€¼ã€‚</td></tr><tr><td>remove(key)</td><td>ç§»é™¤æŒ‡å®šé”®çš„é”®å€¼å¯¹ã€‚</td></tr><tr><td>containsKey(key)</td><td>åˆ¤æ–­æ˜ å°„ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šé”®ã€‚</td></tr><tr><td>keySet()</td><td>è¿”å›æ‰€æœ‰é”®ç»„æˆçš„é›†åˆã€‚</td></tr><tr><td>values()</td><td>è¿”å›æ‰€æœ‰å€¼ç»„æˆçš„é›†åˆã€‚</td></tr><tr><td>entrySet()</td><td>è¿”å›æ‰€æœ‰é”®å€¼å¯¹ç»„æˆçš„é›†åˆã€‚</td></tr></tbody></table><h2 id="Queue-LinkedList-ç±»"><a href="#Queue-LinkedList-ç±»" class="headerlink" title="Queue&#x2F;LinkedList ç±»"></a>Queue&#x2F;LinkedList ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>offer(element)</td><td>å°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚</td></tr><tr><td>poll()</td><td>ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚</td></tr><tr><td>peek()</td><td>è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œä½†ä¸ç§»é™¤ã€‚</td></tr><tr><td>size()</td><td>è¿”å›é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</td></tr><tr><td>isEmpty()</td><td>åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚</td></tr></tbody></table><h2 id="Scanner-ç±»"><a href="#Scanner-ç±»" class="headerlink" title="Scanner ç±»"></a>Scanner ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>next()</td><td>è¯»å–ä¸‹ä¸€ä¸ªè¾“å…¥é¡¹ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚</td></tr><tr><td>nextInt()</td><td>è¯»å–ä¸‹ä¸€ä¸ªè¾“å…¥é¡¹ä½œä¸ºæ•´æ•°ã€‚</td></tr><tr><td>nextDouble()</td><td>è¯»å–ä¸‹ä¸€ä¸ªè¾“å…¥é¡¹ä½œä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</td></tr><tr><td>nextLine()</td><td>è¯»å–å½“å‰è¡Œå‰©ä½™éƒ¨åˆ†å¹¶è¿”å›ã€‚</td></tr><tr><td>hasNext()</td><td>åˆ¤æ–­æ˜¯å¦è¿˜æœ‰è¾“å…¥é¡¹ã€‚</td></tr><tr><td>close()</td><td>å…³é—­ Scanner å¯¹è±¡ã€‚</td></tr></tbody></table><h2 id="File-ç±»"><a href="#File-ç±»" class="headerlink" title="File ç±»"></a>File ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>exists()</td><td>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td>isDirectory()</td><td>åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•ã€‚</td></tr><tr><td>isFile()</td><td>åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ã€‚</td></tr><tr><td>getName()</td><td>è¿”å›æ–‡ä»¶åã€‚</td></tr><tr><td>getPath()</td><td>è¿”å›æ–‡ä»¶è·¯å¾„ã€‚</td></tr><tr><td>createNewFile()</td><td>åˆ›å»ºæ–°æ–‡ä»¶ã€‚</td></tr><tr><td>delete()</td><td>åˆ é™¤æ–‡ä»¶ã€‚</td></tr><tr><td>list()</td><td>è¿”å›ç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚</td></tr></tbody></table><h2 id="Thread-ç±»"><a href="#Thread-ç±»" class="headerlink" title="Thread ç±»"></a>Thread ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>start()</td><td>å¯åŠ¨çº¿ç¨‹ã€‚</td></tr><tr><td>run()</td><td>çº¿ç¨‹æ‰§è¡Œçš„ä¸»ä½“ã€‚</td></tr><tr><td>join()</td><td>ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆã€‚</td></tr><tr><td>sleep()</td><td>ä½¿å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ã€‚</td></tr><tr><td>isAlive()</td><td>åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å­˜æ´»ã€‚</td></tr><tr><td>interrupt()</td><td>ä¸­æ–­çº¿ç¨‹ã€‚</td></tr></tbody></table><h2 id="Runnable-æ¥å£"><a href="#Runnable-æ¥å£" class="headerlink" title="Runnable æ¥å£"></a>Runnable æ¥å£</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>run()</td><td>çº¿ç¨‹æ‰§è¡Œçš„ä¸»ä½“ã€‚</td></tr></tbody></table><h2 id="InputStream-OutputStream-ç±»"><a href="#InputStream-OutputStream-ç±»" class="headerlink" title="InputStream&#x2F;OutputStream ç±»"></a>InputStream&#x2F;OutputStream ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>read()</td><td>è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚</td></tr><tr><td>read(byte[] buffer)</td><td>è¯»å–å¤šä¸ªå­—èŠ‚çš„æ•°æ®ã€‚</td></tr><tr><td>close()</td><td>å…³é—­æµã€‚</td></tr><tr><td>write()</td><td>å†™å…¥ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚</td></tr><tr><td>write(byte[] buffer)</td><td>å†™å…¥å¤šä¸ªå­—èŠ‚çš„æ•°æ®ã€‚</td></tr></tbody></table><h2 id="Reader-Writer-ç±»"><a href="#Reader-Writer-ç±»" class="headerlink" title="Reader&#x2F;Writer ç±»"></a>Reader&#x2F;Writer ç±»</h2><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>read()</td><td>è¯»å–ä¸€ä¸ªå­—ç¬¦çš„æ•°æ®ã€‚</td></tr><tr><td>read(char[] buffer)</td><td>è¯»å–å¤šä¸ªå­—ç¬¦çš„æ•°æ®ã€‚</td></tr><tr><td>close()</td><td>å…³é—­æµã€‚</td></tr><tr><td>write()</td><td>å†™å…¥ä¸€ä¸ªå­—ç¬¦çš„æ•°æ®ã€‚</td></tr><tr><td>write(char[] buffer)</td><td>å†™å…¥å¤šä¸ªå­—ç¬¦çš„æ•°æ®ã€‚</td></tr></tbody></table><h2 id="æ ¼å¼è½¬æ¢çš„å¸¸ç”¨æ–¹æ³•"><a href="#æ ¼å¼è½¬æ¢çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="æ ¼å¼è½¬æ¢çš„å¸¸ç”¨æ–¹æ³•"></a>æ ¼å¼è½¬æ¢çš„å¸¸ç”¨æ–¹æ³•</h2><table><thead><tr><th>ç±»å‹è½¬æ¢</th><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²åˆ°æ•´æ•°</td><td>Integer.parseInt(String str)</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€‚</td></tr><tr><td>å­—ç¬¦ä¸²åˆ°æµ®ç‚¹æ•°</td><td>Double.parseDouble(String str)</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚</td></tr><tr><td>æ•´æ•°åˆ°å­—ç¬¦ä¸²</td><td>String.valueOf(int value)</td><td>å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>æµ®ç‚¹æ•°åˆ°å­—ç¬¦ä¸²</td><td>String.valueOf(double value)</td><td>å°†åŒç²¾åº¦æµ®ç‚¹æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>å­—ç¬¦ä¸²åˆ°å¸ƒå°”å€¼</td><td>Boolean.parseBoolean(String str)</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚</td></tr><tr><td>å¸ƒå°”å€¼åˆ°å­—ç¬¦ä¸²</td><td>String.valueOf(boolean value)</td><td>å°†å¸ƒå°”å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>å­—ç¬¦ä¸²åˆ°æ—¥æœŸ</td><td>SimpleDateFormat.parse(String str)</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸã€‚</td></tr><tr><td>æ—¥æœŸåˆ°å­—ç¬¦ä¸²</td><td>SimpleDateFormat.format(Date date)</td><td>å°†æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>å­—ç¬¦ä¸²åˆ°å­—èŠ‚æ•°ç»„</td><td>str.getBytes()</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ã€‚</td></tr><tr><td>å­—èŠ‚æ•°ç»„åˆ°å­—ç¬¦ä¸²</td><td>new String(byte[] bytes)</td><td>å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>å­—ç¬¦ä¸²åˆ°æšä¸¾</td><td>Enum.valueOf(Class enumType, String name)</td><td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæšä¸¾ç±»å‹ã€‚</td></tr><tr><td>æšä¸¾åˆ°å­—ç¬¦ä¸²</td><td>enumValue.name()</td><td>å°†æšä¸¾ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr></tbody></table><h2 id="æ•°ç»„å’Œé›†åˆç±»å‹çš„è½¬æ¢"><a href="#æ•°ç»„å’Œé›†åˆç±»å‹çš„è½¬æ¢" class="headerlink" title="æ•°ç»„å’Œé›†åˆç±»å‹çš„è½¬æ¢"></a>æ•°ç»„å’Œé›†åˆç±»å‹çš„è½¬æ¢</h2><table><thead><tr><th>ç±»å‹è½¬æ¢</th><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>Array è½¬ List</td><td>Arrays.asList(Tâ€¦ array)</td><td>å°†æ•°ç»„è½¬æ¢ä¸º Listã€‚</td></tr><tr><td>List è½¬ Array</td><td>list.toArray(new T[list.size()])</td><td>å°† List è½¬æ¢ä¸ºæ•°ç»„ã€‚</td></tr><tr><td>Set è½¬ List</td><td>new ArrayList&lt;&gt;(set)</td><td>å°† Set è½¬æ¢ä¸º Listã€‚</td></tr><tr><td>List è½¬ Set</td><td>new HashSet&lt;&gt;(list)</td><td>å°† List è½¬æ¢ä¸º Setã€‚</td></tr><tr><td>Map è½¬ List</td><td>new ArrayList&lt;&gt;(map.entrySet())</td><td>å°† Map è½¬æ¢ä¸º Listï¼Œæ¯ä¸ªå…ƒç´ ä¸º Map çš„ Entryã€‚</td></tr><tr><td>List è½¬ Map</td><td>list.stream().collect(Collectors.toMap(keyMapper, valueMapper))</td><td>å°† List è½¬æ¢ä¸º Mapï¼ŒæŒ‡å®š key å’Œ value è½¬æ¢æ–¹æ³•ã€‚</td></tr><tr><td>Array è½¬ String</td><td>Arrays.toString(array)</td><td>å°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>String è½¬ Array</td><td>str.split(regex)</td><td>å°†å­—ç¬¦ä¸²åˆ†å‰²ä¸ºæ•°ç»„ã€‚</td></tr><tr><td>List è½¬ String</td><td>String.join(delimiter, list)</td><td>å°† List ä¸­çš„å…ƒç´ ç”¨æŒ‡å®šåˆ†éš”ç¬¦è¿æ¥ä¸ºå­—ç¬¦ä¸²ã€‚</td></tr><tr><td>String è½¬ List</td><td>Arrays.asList(str.split(delimiter))</td><td>å°†å­—ç¬¦ä¸²åˆ†å‰²åè½¬æ¢ä¸º Listã€‚</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCodeåˆ·é¢˜ï¼šæ ˆå’Œé˜Ÿåˆ—</title>
    <link href="/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
    <url>/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a>ç”¨æ ˆå®ç°é˜Ÿåˆ—</h2><p>è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆpushã€popã€peekã€emptyï¼‰ï¼š</p><p>å®ç° MyQueue ç±»ï¼š</p><p>void push(int x) å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾<br>int pop() ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´ <br>int peek() è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´ <br>boolean empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false<br>è¯´æ˜ï¼š</p><p>ä½  åªèƒ½ ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åªæœ‰Â push to top,Â peek&#x2F;pop from top,Â size, å’ŒÂ is emptyÂ æ“ä½œæ˜¯åˆæ³•çš„ã€‚<br>ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚</p><p><a href="https://leetcode.cn/problems/implement-queue-using-stacks">https://leetcode.cn/problems/implement-queue-using-stacks</a></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨äº†ä¸¤ä¸ªæ ˆ stk1 å’Œ stk2ï¼Œå…¶ä¸­ stk1 ç”¨äºå­˜å‚¨é˜Ÿåˆ—ä¸­çš„å…ƒç´ ï¼Œstk2 ç”¨äºè¾…åŠ©å®ç°é˜Ÿåˆ—çš„ pop() å’Œ peek() æ“ä½œ</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">    Stack&lt;Integer&gt; stk1, stk2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–ä¸¤ä¸ªæ ˆ</span></span><br><span class="line">        stk1 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        stk2 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Push element x to the back of queue. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// å°†å…ƒç´ å‹å…¥ stk1 æ ˆä¸­</span></span><br><span class="line">        stk1.push(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes the element from in front of queue and returns that element. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ stk2 æ ˆä¸ºç©ºï¼Œåˆ™å°† stk1 ä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥ stk2 æ ˆä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (stk2.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(!stk1.isEmpty())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> stk1.pop();</span><br><span class="line">                stk2.push(top);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä» stk2 æ ˆä¸­å¼¹å‡ºé˜Ÿé¦–å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> stk2.pop();</span><br><span class="line">        <span class="comment">// å°† stk2 ä¸­çš„å…ƒç´ å†æ¬¡ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥ stk1 æ ˆä¸­ï¼Œä»¥ä¿æŒæ ˆçš„çŠ¶æ€ä¸å˜</span></span><br><span class="line">        <span class="keyword">while</span>(!stk2.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> stk2.pop();</span><br><span class="line">            stk1.push(top);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›é˜Ÿé¦–å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Get the front element. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ stk2 æ ˆä¸ºç©ºï¼Œåˆ™å°† stk1 ä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥ stk2 æ ˆä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (stk2.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span>(!stk1.isEmpty())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> stk1.pop();</span><br><span class="line">                stk2.push(top);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è·å– stk2 æ ˆçš„æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> stk2.peek();</span><br><span class="line">        <span class="comment">// å°† stk2 ä¸­çš„å…ƒç´ å†æ¬¡ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥ stk1 æ ˆä¸­ï¼Œä»¥ä¿æŒæ ˆçš„çŠ¶æ€ä¸å˜</span></span><br><span class="line">        <span class="keyword">while</span>(!stk2.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> stk2.pop();</span><br><span class="line">            stk1.push(top);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›é˜Ÿé¦–å…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns whether the queue is empty. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ stk1 æ˜¯å¦ä¸ºç©ºå³å¯</span></span><br><span class="line">        <span class="keyword">return</span> stk1.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”¨é˜Ÿåˆ—å®ç°æ ˆ"><a href="#ç”¨é˜Ÿåˆ—å®ç°æ ˆ" class="headerlink" title="ç”¨é˜Ÿåˆ—å®ç°æ ˆ"></a>ç”¨é˜Ÿåˆ—å®ç°æ ˆ</h2><p>è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å®ç°ä¸€ä¸ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆï¼Œå¹¶æ”¯æŒæ™®é€šæ ˆçš„å…¨éƒ¨å››ç§æ“ä½œï¼ˆpushã€topã€pop å’Œ emptyï¼‰ã€‚</p><p>å®ç° MyStack ç±»ï¼š</p><p>void push(int x) å°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚<br>int pop() ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚<br>int top() è¿”å›æ ˆé¡¶å…ƒç´ ã€‚<br>boolean empty() å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚Â </p><p>æ³¨æ„ï¼š</p><p>ä½ åªèƒ½ä½¿ç”¨é˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯Â push to backã€peek&#x2F;pop from frontã€size å’ŒÂ is emptyÂ è¿™äº›æ“ä½œã€‚<br>ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒé˜Ÿåˆ—ã€‚Â ä½ å¯ä»¥ä½¿ç”¨ list ï¼ˆåˆ—è¡¨ï¼‰æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªé˜Ÿåˆ—Â , åªè¦æ˜¯æ ‡å‡†çš„é˜Ÿåˆ—æ“ä½œå³å¯ã€‚</p><p><a href="https://leetcode.cn/problems/implement-stack-using-queues">https://leetcode.cn/problems/implement-stack-using-queues</a></p><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨äº†ä¸¤ä¸ªé˜Ÿåˆ— que1 å’Œ que2 æ¥å®ç°æ ˆã€‚åœ¨æ¯ä¸€æ¬¡æ‰§è¡Œ push() æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å…ˆå°†æ–°å…ƒç´  x æ·»åŠ åˆ° que2 é˜Ÿåˆ—ä¸­ï¼Œç„¶åå°† que1 ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡æ·»åŠ åˆ° que2 é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ que2 é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯æŒ‰ç…§åè¿›å…ˆå‡ºçš„é¡ºåºæ’åˆ—çš„ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å†å°† que2 ä¸­çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡æ·»åŠ å›åˆ° que1 é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·å°±å®ç°äº†æ ˆçš„çŠ¶æ€</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyStack</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸¤ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">    Queue&lt;Integer&gt; que1, que2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyStack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span></span><br><span class="line">        que1 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que2 = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">// å°†å…ƒç´ æ·»åŠ åˆ° que2 é˜Ÿåˆ—ä¸­</span></span><br><span class="line">        que2.add(x);</span><br><span class="line">        <span class="comment">// å°† que1 ä¸­çš„å…ƒç´ ä¾æ¬¡æ·»åŠ åˆ° que2 é˜Ÿåˆ—ä¸­</span></span><br><span class="line">        <span class="keyword">while</span> (!que1.isEmpty()) &#123;</span><br><span class="line">            que2.add(que1.remove());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°† que2 ä¸­çš„å…ƒç´ ä¾æ¬¡æ·»åŠ åˆ° que1 é˜Ÿåˆ—ä¸­ï¼Œä»è€Œç»´æŒæ ˆçš„çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">while</span> (!que2.isEmpty()) &#123;</span><br><span class="line">            que1.add(que2.remove());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥ä» que1 é˜Ÿåˆ—ä¸­åˆ é™¤å¹¶è¿”å›é˜Ÿé¦–å…ƒç´ å³å¯</span></span><br><span class="line">        <span class="keyword">return</span> que1.remove();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å› que1 é˜Ÿåˆ—çš„é˜Ÿé¦–å…ƒç´ å³å¯</span></span><br><span class="line">        <span class="keyword">return</span> que1.peek();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ que1 æ˜¯å¦ä¸ºç©ºå³å¯</span></span><br><span class="line">        <span class="keyword">return</span> que1.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ‰æ•ˆçš„æ‹¬å·"><a href="#æœ‰æ•ˆçš„æ‹¬å·" class="headerlink" title="æœ‰æ•ˆçš„æ‹¬å·"></a>æœ‰æ•ˆçš„æ‹¬å·</h2><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™Â çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br>å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚<br>æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚</p><p><a href="https://leetcode.cn/problems/valid-parentheses">https://leetcode.cn/problems/valid-parentheses</a></p><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.éå†å­—ç¬¦ä¸²ï¼Œé‡åˆ°å·¦æ‹¬å·å…¥æ ˆï¼Œé‡åˆ°å³æ‹¬å·æŸ¥çœ‹ä¸æ ˆé¡¶å…ƒç´ æ˜¯å¦åŒ¹é…</span><br><span class="line">2.å­—ç¬¦ä¸²é•¿åº¦ä¸ºå¥‡æ•°è‚¯å®šfalse,å¤„ç†å³æ‹¬å·æ—¶æ ˆç©ºè‚¯å®šfalse,æœ€åæ ˆä¸ç©ºè‚¯å®šfalse</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå­—ç¬¦ä¸²é•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¸€å®šä¸æ˜¯æœ‰æ•ˆçš„æ‹¬å·åºåˆ—</span></span><br><span class="line">    <span class="keyword">if</span>(s.length()%<span class="number">2</span>==<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ ˆæ¥ä¿å­˜å·¦æ‹¬å·</span></span><br><span class="line">    Stack&lt;Character&gt; stk=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">char</span>[] arr=s.toCharArray();</span><br><span class="line">    <span class="comment">// éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">char</span> c : arr)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœé‡åˆ°å·¦æ‹¬å·ï¼Œå°†å…¶å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;(&#x27;</span> || c==<span class="string">&#x27;&#123;&#x27;</span> || c==<span class="string">&#x27;[&#x27;</span>)&#123;</span><br><span class="line">            stk.push(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœé‡åˆ°å³æ‹¬å·</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰ä¸ä¹‹åŒ¹é…çš„å·¦æ‹¬å·ï¼Œè¿”å› false</span></span><br><span class="line">            <span class="keyword">if</span>(stk.isEmpty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="comment">// å–å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">            <span class="type">char</span> top=stk.peek();</span><br><span class="line">            <span class="comment">// å¦‚æœå³æ‹¬å·ä¸æ ˆé¡¶å…ƒç´ åŒ¹é…ï¼Œå°†æ ˆé¡¶å…ƒç´ å¼¹å‡º</span></span><br><span class="line">            <span class="keyword">if</span>(top==<span class="string">&#x27;(&#x27;</span> &amp;&amp; c==<span class="string">&#x27;)&#x27;</span> || top==<span class="string">&#x27;&#123;&#x27;</span> &amp;&amp; c==<span class="string">&#x27;&#125;&#x27;</span> || top==<span class="string">&#x27;[&#x27;</span> &amp;&amp; c==<span class="string">&#x27;]&#x27;</span>)&#123;</span><br><span class="line">                stk.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœå³æ‹¬å·ä¸æ ˆé¡¶å…ƒç´ ä¸åŒ¹é…ï¼Œè¿”å› false</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜æ‰€æœ‰çš„å·¦æ‹¬å·éƒ½æœ‰ä¸ä¹‹åŒ¹é…çš„å³æ‹¬å·ï¼Œæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ‹¬å·åºåˆ—ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line">    <span class="keyword">if</span>(stk.isEmpty()) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹"><a href="#åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹" class="headerlink" title="åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹"></a>åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹</h2><p>ç»™å‡ºç”±å°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²Â Sï¼Œé‡å¤é¡¹åˆ é™¤æ“ä½œä¼šé€‰æ‹©ä¸¤ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„å­—æ¯ï¼Œå¹¶åˆ é™¤å®ƒä»¬ã€‚</p><p>åœ¨ S ä¸Šåå¤æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œç›´åˆ°æ— æ³•ç»§ç»­åˆ é™¤ã€‚</p><p>åœ¨å®Œæˆæ‰€æœ‰é‡å¤é¡¹åˆ é™¤æ“ä½œåè¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ç­”æ¡ˆä¿è¯å”¯ä¸€ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š&quot;abbaca&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;ca&quot;</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä¾‹å¦‚ï¼Œåœ¨ &quot;abbaca&quot; ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤ &quot;bb&quot; ç”±äºä¸¤å­—æ¯ç›¸é‚»ä¸”ç›¸åŒï¼Œè¿™æ˜¯æ­¤æ—¶å”¯ä¸€å¯ä»¥æ‰§è¡Œåˆ é™¤æ“ä½œçš„é‡å¤é¡¹ã€‚ä¹‹åæˆ‘ä»¬å¾—åˆ°å­—ç¬¦ä¸² &quot;aaca&quot;ï¼Œå…¶ä¸­åˆåªæœ‰ &quot;aa&quot; å¯ä»¥æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œæ‰€ä»¥æœ€åçš„å­—ç¬¦ä¸²ä¸º &quot;ca&quot;ã€‚</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/remove-all-adjacent-duplicates-in-string">https://leetcode.cn/problems/remove-all-adjacent-duplicates-in-string</a></p><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰å­—ç¬¦ä¸ç«™å®šå…ƒç´ ç›¸åŒï¼Œpop</span><br><span class="line">2.newä¸€ä¸ªæ ˆsizeå¤§å°çš„char[]ï¼Œå¾ªç¯popæ ˆé¡¶å…ƒç´ ï¼Œä»æ•°ç»„æœ«å°¾å¼€å§‹æ”¾</span><br><span class="line">3.æŠŠå­—ç¬¦æ•°ç»„è½¬ä¸ºStringï¼Œä½¿ç”¨æ„é€ å‡½æ•°new String(arr)</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">removeDuplicates</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ ˆæ¥ä¿å­˜å­—ç¬¦</span></span><br><span class="line">    Stack&lt;Character&gt; stk=<span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">char</span>[] arr=s.toCharArray();</span><br><span class="line">    <span class="comment">// éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">char</span> c : arr)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œä¸”å½“å‰å­—ç¬¦ä¸æ ˆé¡¶å…ƒç´ ç›¸åŒï¼Œå°†æ ˆé¡¶å…ƒç´ å¼¹å‡º</span></span><br><span class="line">        <span class="keyword">if</span>(!stk.isEmpty() &amp;&amp; stk.peek()==c)&#123;</span><br><span class="line">            stk.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦åˆ™ï¼Œå°†å½“å‰å­—ç¬¦å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            stk.push(c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†æ ˆä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºï¼Œæ”¾å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¸­</span></span><br><span class="line">    <span class="type">char</span>[] result=<span class="keyword">new</span> <span class="title class_">char</span>[stk.size()];</span><br><span class="line">    <span class="type">int</span> index=stk.size()-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!stk.isEmpty())&#123;</span><br><span class="line">        result[index--]=stk.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼-åç¼€è½¬ä¸­ç¼€"><a href="#é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼-åç¼€è½¬ä¸­ç¼€" class="headerlink" title="é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼(åç¼€è½¬ä¸­ç¼€)"></a>é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼(åç¼€è½¬ä¸­ç¼€)</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ tokens ï¼Œè¡¨ç¤ºä¸€ä¸ªæ ¹æ®Â é€†æ³¢å…°è¡¨ç¤ºæ³• è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚</p><p>è¯·ä½ è®¡ç®—è¯¥è¡¨è¾¾å¼ã€‚è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¡¨è¾¾å¼å€¼çš„æ•´æ•°ã€‚</p><p>æ³¨æ„ï¼š</p><p>æœ‰æ•ˆçš„ç®—ç¬¦ä¸º â€˜+â€™ã€â€™-â€˜ã€â€™*â€™ å’Œ â€˜&#x2F;â€˜ ã€‚<br>æ¯ä¸ªæ“ä½œæ•°ï¼ˆè¿ç®—å¯¹è±¡ï¼‰éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–è€…å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚<br>ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„é™¤æ³•æ€»æ˜¯ å‘é›¶æˆªæ–­ ã€‚<br>è¡¨è¾¾å¼ä¸­ä¸å«é™¤é›¶è¿ç®—ã€‚<br>è¾“å…¥æ˜¯ä¸€ä¸ªæ ¹æ®é€†æ³¢å…°è¡¨ç¤ºæ³•è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚<br>ç­”æ¡ˆåŠæ‰€æœ‰ä¸­é—´è®¡ç®—ç»“æœå¯ä»¥ç”¨ 32 ä½ æ•´æ•°è¡¨ç¤ºã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼štokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]</span><br><span class="line">è¾“å‡ºï¼š9</span><br><span class="line">è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/evaluate-reverse-polish-notation">https://leetcode.cn/problems/evaluate-reverse-polish-notation</a></p><h3 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.éå†å­—ç¬¦ä¸²æ•°ç»„ï¼Œé‡åˆ°æ•°å­—å…¥æ ˆï¼Œé‡åˆ°æ“ä½œç¬¦å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°å¤„ç†åå…¥æ ˆã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ ˆæ¥ä¿å­˜æ“ä½œæ•°å’Œä¸­é—´è®¡ç®—ç»“æœ</span></span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// éå†å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">for</span> (String token : tokens) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰å…ƒç´ æ˜¯æ“ä½œç¬¦ï¼Œåˆ™ä»æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;+-*/&quot;</span>.contains(token)) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">switch</span> (token) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                    stack.push(a + b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                    stack.push(a - b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                    stack.push(a * b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                    stack.push(a / b);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰å…ƒç´ ä¸æ˜¯æ“ä½œç¬¦ï¼Œåˆ™å°†å…¶ä½œä¸ºæ“ä½œæ•°å‹å…¥æ ˆä¸­</span></span><br><span class="line">            stack.push(Integer.parseInt(token));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ˆä¸­æœ€åå‰©ä¸‹çš„å…ƒç´ å°±æ˜¯è®¡ç®—ç»“æœï¼Œå°†å…¶è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> stack.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"><a href="#æ»‘åŠ¨çª—å£æœ€å¤§å€¼" class="headerlink" title="æ»‘åŠ¨çª—å£æœ€å¤§å€¼"></a>æ»‘åŠ¨çª—å£æœ€å¤§å€¼</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸ºÂ kÂ çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ kÂ ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚</p><p>è¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3</span><br><span class="line">è¾“å‡ºï¼š[3,3,5,5,6,7]</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼</span><br><span class="line">---------------               -----</span><br><span class="line">[1  3  -1] -3  5  3  6  7       3</span><br><span class="line"> 1 [3  -1  -3] 5  3  6  7       3</span><br><span class="line"> 1  3 [-1  -3  5] 3  6  7       5</span><br><span class="line"> 1  3  -1 [-3  5  3] 6  7       5</span><br><span class="line"> 1  3  -1  -3 [5  3  6] 7       6</span><br><span class="line"> 1  3  -1  -3  5 [3  6  7]      7</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/sliding-window-maximum">https://leetcode.cn/problems/sliding-window-maximum</a></p><h3 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ›å»ºäº†ä¸€ä¸ªåŒç«¯é˜Ÿåˆ— dequeï¼Œç”¨äºç»´æŠ¤æ»‘åŠ¨çª—å£ä¸­çš„å…ƒç´ ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º n - k + 1 çš„æ•°ç»„ resultï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªæ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼</span><br><span class="line">2.å°†é˜Ÿåˆ—ä¸­æ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ éƒ½åˆ é™¤ï¼Œå¹¶å°†å½“å‰å…ƒç´ åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚</span><br><span class="line">3.åˆ¤æ–­é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ æ˜¯å¦å·²ç»ä¸åœ¨æ»‘åŠ¨çª—å£ä¸­ï¼Œå¦‚æœæ˜¯ï¼Œå°±å°†å…¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚è¿™æ ·ï¼Œé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ å°±å§‹ç»ˆæ˜¯å½“å‰æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ã€‚</span><br><span class="line">4.åˆ¤æ–­å½“å‰æ»‘åŠ¨çª—å£çš„å¤§å°æ˜¯å¦ä¸º kã€‚å¦‚æœæ˜¯ï¼Œå°±å°†é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ åŠ å…¥ç»“æœæ•°ç»„ä¸­ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] maxSlidingWindow(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    Deque&lt;Integer&gt; deque = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[n - k + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// å°†é˜Ÿåˆ—ä¸­æ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ éƒ½åˆ é™¤</span></span><br><span class="line">        <span class="keyword">while</span> (!deque.isEmpty() &amp;&amp; deque.peekLast() &lt; nums[i]) &#123;</span><br><span class="line">            deque.removeLast();</span><br><span class="line">        &#125;</span><br><span class="line">        deque.addLast(nums[i]);</span><br><span class="line">        <span class="comment">// å¦‚æœé˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ å·²ç»ä¸åœ¨æ»‘åŠ¨çª—å£ä¸­ï¼Œå°†å…¶åˆ é™¤</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt;= k &amp;&amp; deque.peekFirst() == nums[i - k]) &#123;</span><br><span class="line">            deque.removeFirst();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœå½“å‰æ»‘åŠ¨çª—å£çš„å¤§å°ä¸º kï¼Œå°†é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ åŠ å…¥ç»“æœæ•°ç»„ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt;= k - <span class="number">1</span>) &#123;</span><br><span class="line">            result[idx++] = deque.peekFirst();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰-K-ä¸ªé«˜é¢‘å…ƒç´ "><a href="#å‰-K-ä¸ªé«˜é¢‘å…ƒç´ " class="headerlink" title="å‰ K ä¸ªé«˜é¢‘å…ƒç´ "></a>å‰ K ä¸ªé«˜é¢‘å…ƒç´ </h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚</p><p><a href="https://leetcode.cn/problems/top-k-frequent-elements/">https://leetcode.cn/problems/top-k-frequent-elements/</a></p><h3 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨ HashMap ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå…ƒç´ ä¸ºé”®ï¼Œå‡ºç°æ¬¡æ•°ä¸ºå€¼ã€‚</span><br><span class="line">2.åˆ›å»ºä¸€ä¸ª PriorityQueueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼Œç”¨äºå­˜å‚¨å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ ã€‚åœ¨ PriorityQueue ä¸­ï¼Œå…ƒç´ æŒ‰ç…§å‡ºç°æ¬¡æ•°ä»å¤§åˆ°å°æ’åºï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªå¤§é¡¶å †ã€‚éå† HashMapï¼Œå°†æ¯ä¸ªé”®å€¼å¯¹è½¬åŒ–ä¸º Map.Entryï¼Œå¹¶å°†å…¶åŠ å…¥ PriorityQueue ä¸­ã€‚å¦‚æœ PriorityQueue çš„å¤§å°è¶…è¿‡äº† kï¼Œå°±å°†å…¶ä¸­å‡ºç°æ¬¡æ•°æœ€å°çš„å…ƒç´ ç§»é™¤ã€‚</span><br><span class="line">3.å°† PriorityQueue ä¸­å‰ k ä¸ªå…ƒç´ å–å‡ºå¹¶å­˜å…¥ç»“æœæ•°ç»„ä¸­ã€‚ç”±äº PriorityQueue æ˜¯ä¸€ä¸ªå¤§é¡¶å †ï¼Œå–å‡ºçš„å…ƒç´ æ˜¯æŒ‰ç…§å‡ºç°æ¬¡æ•°ä»å¤§åˆ°å°æ’åºçš„ï¼Œå› æ­¤ç»“æœæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æŒ‰ç…§å‡ºç°é¢‘ç‡ä»é«˜åˆ°ä½æ’åºçš„ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] topKFrequent(<span class="type">int</span>[] nums, <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º k çš„æ•°ç»„ï¼Œç”¨äºå­˜å‚¨å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ </span></span><br><span class="line">    <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª HashMapï¼Œç”¨äºç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        <span class="comment">// ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">        map.put(num, map.getOrDefault(num, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† map ä¸­çš„å…ƒç´ è½¬åŒ–ä¸º setï¼Œä¾¿äºéå†</span></span><br><span class="line">    Set&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet();</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ª PriorityQueueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼Œç”¨äºå­˜å‚¨å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ </span></span><br><span class="line">    <span class="comment">// PriorityQueue æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…ƒç´ æŒ‰ç…§ä¸€å®šè§„åˆ™è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† PriorityQueue ä¸­çš„å…ƒç´ æŒ‰ç…§å‡ºç°æ¬¡æ•°ä»å¤§åˆ°å°æ’åºï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªå¤§é¡¶å †</span></span><br><span class="line">    PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; queue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((o1, o2) -&gt; o2.getValue() - o1.getValue());</span><br><span class="line">    <span class="comment">// éå† entriesï¼Œå°†æ¯ä¸ªå…ƒç´ åŠ å…¥ PriorityQueue ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : entries) &#123;</span><br><span class="line">        queue.offer(entry);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°† PriorityQueue ä¸­å‰ k ä¸ªå…ƒç´ å–å‡ºå¹¶å­˜å…¥ result æ•°ç»„ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> k - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        result[i] = queue.poll().getKey();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿”å›å‡ºç°é¢‘ç‡å‰ k é«˜çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCodeåˆ·é¢˜ï¼šäºŒå‰æ ‘</title>
    <link href="/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <url>/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h2 id="äºŒå‰æ ‘å®šä¹‰"><a href="#äºŒå‰æ ‘å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘å®šä¹‰"></a>äºŒå‰æ ‘å®šä¹‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> val;</span><br><span class="line">        TreeNode left;</span><br><span class="line">        TreeNode right;</span><br><span class="line">        TreeNode() &#123;&#125;</span><br><span class="line">        TreeNode(<span class="type">int</span> val) &#123; <span class="built_in">this</span>.val = val; &#125;</span><br><span class="line">        TreeNode(<span class="type">int</span> val, TreeNode left, TreeNode right) &#123;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.left = left;</span><br><span class="line">            <span class="built_in">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ç§é€’å½’éå†æ–¹æ³•"><a href="#ä¸‰ç§é€’å½’éå†æ–¹æ³•" class="headerlink" title="ä¸‰ç§é€’å½’éå†æ–¹æ³•"></a>ä¸‰ç§é€’å½’éå†æ–¹æ³•</h2><p>é€’å½’ä¸‰éƒ¨æ›²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼</span><br><span class="line">2.ç¡®å®šç»ˆæ­¢æ¡ä»¶</span><br><span class="line">3.ç¡®å®šå•å±‚é€’å½’çš„é€»è¾‘</span><br></pre></td></tr></table></figure><p>ä¸‰ç§éå†æ–¹æ³•çš„å·¦ä¸­å³é¡ºåºï¼šå·¦å³ä¿æŒä¸å˜</p><p>â€œå‰&#x2F;ä¸­&#x2F;åâ€åºéå†è¡¨ç¤ºçš„æ˜¯<strong>æ ¹(ä¸­)èŠ‚ç‚¹åœ¨ä¸‰è€…ä¸­çš„ä½ç½®</strong></p><p>å‰åºéå†ï¼š<strong>ä¸­</strong>-&gt;å·¦-&gt;å³</p><p>ä¸­åºéå†ï¼šå·¦-&gt;<strong>ä¸­</strong>-&gt;å³</p><p>ååºéå†ï¼šå·¦-&gt;å³-&gt;<strong>ä¸­</strong></p><h3 id="äºŒå‰æ ‘çš„å‰åºéå†"><a href="#äºŒå‰æ ‘çš„å‰åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„å‰åºéå†"></a>äºŒå‰æ ‘çš„å‰åºéå†</h3><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å®ƒèŠ‚ç‚¹å€¼çš„ å‰åº éå†ã€‚</p><p><a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">https://leetcode.cn/problems/binary-tree-preorder-traversal/</a></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">preorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        order(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(TreeNode root,List&lt;Integer&gt; list)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        list.add(root.val);</span><br><span class="line">        order(root.left,list);</span><br><span class="line">        order(root.right,list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒå‰æ ‘çš„ä¸­åºéå†"><a href="#äºŒå‰æ ‘çš„ä¸­åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„ä¸­åºéå†"></a>äºŒå‰æ ‘çš„ä¸­åºéå†</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å› å®ƒçš„ ä¸­åº éå† ã€‚</p><p><a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">https://leetcode.cn/problems/binary-tree-inorder-traversal/</a></p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        order(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(TreeNode root,List&lt;Integer&gt; list)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        order(root.left,list);</span><br><span class="line">        list.add(root.val);</span><br><span class="line">        order(root.right,list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒå‰æ ‘çš„ååºéå†"><a href="#äºŒå‰æ ‘çš„ååºéå†" class="headerlink" title="äºŒå‰æ ‘çš„ååºéå†"></a>äºŒå‰æ ‘çš„ååºéå†</h3><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ ååºéå† ã€‚</p><p><a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/">https://leetcode.cn/problems/binary-tree-postorder-traversal/</a></p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">postorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        order(root,list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(TreeNode root,List&lt;Integer&gt; list)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        order(root.left,list);</span><br><span class="line">        order(root.right,list);</span><br><span class="line">        list.add(root.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿­ä»£éå†æ–¹æ³•"><a href="#è¿­ä»£éå†æ–¹æ³•" class="headerlink" title="è¿­ä»£éå†æ–¹æ³•"></a>è¿­ä»£éå†æ–¹æ³•</h2><h3 id="å‰åºéå†ä»£ç "><a href="#å‰åºéå†ä»£ç " class="headerlink" title="å‰åºéå†ä»£ç "></a>å‰åºéå†ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å‰åºéå†é¡ºåºï¼šä¸­-å·¦-å³ï¼Œå…¥æ ˆé¡ºåºï¼šä¸­-å³-å·¦ å‡ºæ ˆé¡ºåºï¼šä¸­-å·¦-å³</span><br><span class="line">å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span><br><span class="line">    1.æ‰“å°å€¼</span><br><span class="line">    2.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span><br><span class="line">    3.å¼¹å‡ºæ ˆé¡¶</span><br><span class="line">    4.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span><br><span class="line">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">preorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Listï¼Œç”¨äºå­˜å‚¨éå†ç»“æœ</span></span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºçš„ List</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Stackï¼Œç”¨äºå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å°†æ ¹èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">        stack.push(root);</span><br><span class="line">        <span class="comment">// å½“æ ˆä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty())&#123;</span><br><span class="line">            <span class="comment">// å–å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="comment">// å°†æ ˆé¡¶å…ƒç´ çš„å€¼åŠ å…¥ç»“æœåˆ—è¡¨ä¸­</span></span><br><span class="line">            result.add(node.val);</span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆé¡¶å…ƒç´ çš„å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>)&#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆé¡¶å…ƒç´ çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>)&#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›éå†ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åºéå†ä»£ç "><a href="#ä¸­åºéå†ä»£ç " class="headerlink" title="ä¸­åºéå†ä»£ç "></a>ä¸­åºéå†ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¸­åºéå†é¡ºåº: å·¦-ä¸­-å³ å…¥æ ˆé¡ºåºï¼š å·¦-å³</span><br><span class="line"> å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span><br><span class="line">    1.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span><br><span class="line">    2.å¼¹å‡ºæ ˆé¡¶å¹¶æ‰“å°</span><br><span class="line">    3.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span><br><span class="line">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Listï¼Œç”¨äºå­˜å‚¨éå†ç»“æœ</span></span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºçš„ List</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Stackï¼Œç”¨äºå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ curï¼Œåˆå§‹å€¼ä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">cur</span> <span class="operator">=</span> root;</span><br><span class="line">        <span class="comment">// å½“ cur ä¸ä¸ºç©ºæˆ–è€…æ ˆä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="literal">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ cur ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥æ ˆï¼Œå¹¶å°† cur æŒ‡å‘å…¶å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (cur != <span class="literal">null</span>)&#123;</span><br><span class="line">            stack.push(cur);</span><br><span class="line">            cur = cur.left;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ cur ä¸ºç©ºï¼Œå–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå°†å…¶å€¼åŠ å…¥ç»“æœåˆ—è¡¨ä¸­ï¼Œå¹¶å°† cur æŒ‡å‘å…¶å³å­èŠ‚ç‚¹</span></span><br><span class="line">            cur = stack.pop();</span><br><span class="line">            result.add(cur.val);</span><br><span class="line">            cur = cur.right;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›éå†ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ååºéå†ä»£ç "><a href="#ååºéå†ä»£ç " class="headerlink" title="ååºéå†ä»£ç "></a>ååºéå†ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ååºéå†é¡ºåº å·¦-å³-ä¸­ å…¥æ ˆé¡ºåºï¼šä¸­-å·¦-å³ å‡ºæ ˆé¡ºåºï¼šä¸­-å³-å·¦ï¼Œ æœ€åç¿»è½¬ç»“æœ</span><br><span class="line">å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span><br><span class="line">    1.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span><br><span class="line">    2.å¦‚æœæ— å³å­æ ‘æˆ–è€…å³å­æ ‘åˆšè¢«è®¿é—®ï¼Œç›´æ¥æ‰“å°æ ¹èŠ‚ç‚¹</span><br><span class="line">      å¦åˆ™æ ¹èŠ‚ç‚¹å†æ¬¡å…¥æ ˆï¼Œå…ˆå¤„ç†å³å­æ ‘</span><br><span class="line">    3.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span><br><span class="line">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">postorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Listï¼Œç”¨äºå­˜å‚¨éå†ç»“æœ</span></span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºçš„ List</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Stackï¼Œç”¨äºå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å°†æ ¹èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">        stack.push(root);</span><br><span class="line">        <span class="comment">// å½“æ ˆä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty())&#123;</span><br><span class="line">            <span class="comment">// å–å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="comment">// å°†æ ˆé¡¶å…ƒç´ çš„å€¼åŠ å…¥ç»“æœåˆ—è¡¨ä¸­</span></span><br><span class="line">            result.add(node.val);</span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆé¡¶å…ƒç´ çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>)&#123;</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ ˆé¡¶å…ƒç´ çš„å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>)&#123;</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†ç»“æœåˆ—è¡¨ç¿»è½¬ï¼Œå¾—åˆ°ååºéå†ç»“æœ</span></span><br><span class="line">        Collections.reverse(result);</span><br><span class="line">        <span class="comment">// è¿”å›éå†ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿä¸€é£æ ¼è¿­ä»£æ–¹æ³•"><a href="#ç»Ÿä¸€é£æ ¼è¿­ä»£æ–¹æ³•" class="headerlink" title="ç»Ÿä¸€é£æ ¼è¿­ä»£æ–¹æ³•"></a>ç»Ÿä¸€é£æ ¼è¿­ä»£æ–¹æ³•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªéœ€è¦ä¿®æ”¹rightã€leftã€nodeçš„é¡ºåº</span><br></pre></td></tr></table></figure><p><strong>å‰åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">preorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        Stack&lt;TreeNode&gt; st = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) st.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!st.empty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> st.peek();</span><br><span class="line">            <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">                st.pop(); <span class="comment">// å°†è¯¥èŠ‚ç‚¹å¼¹å‡ºï¼Œé¿å…é‡å¤æ“ä½œï¼Œä¸‹é¢å†å°†å³ä¸­å·¦èŠ‚ç‚¹æ·»åŠ åˆ°æ ˆä¸­</span></span><br><span class="line">                <span class="keyword">if</span> (node.right!=<span class="literal">null</span>) st.push(node.right);  <span class="comment">// æ·»åŠ å³èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰</span></span><br><span class="line">                <span class="keyword">if</span> (node.left!=<span class="literal">null</span>) st.push(node.left);    <span class="comment">// æ·»åŠ å·¦èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰</span></span><br><span class="line">                st.push(node);                          <span class="comment">// æ·»åŠ ä¸­èŠ‚ç‚¹</span></span><br><span class="line">                st.push(<span class="literal">null</span>); <span class="comment">// ä¸­èŠ‚ç‚¹è®¿é—®è¿‡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¤„ç†ï¼ŒåŠ å…¥ç©ºèŠ‚ç‚¹åšä¸ºæ ‡è®°ã€‚</span></span><br><span class="line">              </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// åªæœ‰é‡åˆ°ç©ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ”¾è¿›ç»“æœé›†</span></span><br><span class="line">                st.pop();           <span class="comment">// å°†ç©ºèŠ‚ç‚¹å¼¹å‡º</span></span><br><span class="line">                node = st.peek();    <span class="comment">// é‡æ–°å–å‡ºæ ˆä¸­å…ƒç´ </span></span><br><span class="line">                st.pop();</span><br><span class="line">                result.add(node.val); <span class="comment">// åŠ å…¥åˆ°ç»“æœé›†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸­åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">inorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">            List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        Stack&lt;TreeNode&gt; st = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) st.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!st.empty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> st.peek();</span><br><span class="line">            <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">                st.pop(); <span class="comment">// å°†è¯¥èŠ‚ç‚¹å¼¹å‡ºï¼Œé¿å…é‡å¤æ“ä½œï¼Œä¸‹é¢å†å°†å³ä¸­å·¦èŠ‚ç‚¹æ·»åŠ åˆ°æ ˆä¸­</span></span><br><span class="line">                <span class="keyword">if</span> (node.right!=<span class="literal">null</span>) st.push(node.right);  <span class="comment">// æ·»åŠ å³èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰</span></span><br><span class="line">                st.push(node);                          <span class="comment">// æ·»åŠ ä¸­èŠ‚ç‚¹</span></span><br><span class="line">                st.push(<span class="literal">null</span>); <span class="comment">// ä¸­èŠ‚ç‚¹è®¿é—®è¿‡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¤„ç†ï¼ŒåŠ å…¥ç©ºèŠ‚ç‚¹åšä¸ºæ ‡è®°ã€‚</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (node.left!=<span class="literal">null</span>) st.push(node.left);    <span class="comment">// æ·»åŠ å·¦èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// åªæœ‰é‡åˆ°ç©ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ”¾è¿›ç»“æœé›†</span></span><br><span class="line">                st.pop();           <span class="comment">// å°†ç©ºèŠ‚ç‚¹å¼¹å‡º</span></span><br><span class="line">                node = st.peek();    <span class="comment">// é‡æ–°å–å‡ºæ ˆä¸­å…ƒç´ </span></span><br><span class="line">                st.pop();</span><br><span class="line">                result.add(node.val); <span class="comment">// åŠ å…¥åˆ°ç»“æœé›†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ååºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">postorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        Stack&lt;TreeNode&gt; st = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="literal">null</span>) st.push(root);</span><br><span class="line">        <span class="keyword">while</span> (!st.empty()) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> st.peek();</span><br><span class="line">            <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">                st.pop(); <span class="comment">// å°†è¯¥èŠ‚ç‚¹å¼¹å‡ºï¼Œé¿å…é‡å¤æ“ä½œï¼Œä¸‹é¢å†å°†å³ä¸­å·¦èŠ‚ç‚¹æ·»åŠ åˆ°æ ˆä¸­</span></span><br><span class="line">                st.push(node);                          <span class="comment">// æ·»åŠ ä¸­èŠ‚ç‚¹</span></span><br><span class="line">                st.push(<span class="literal">null</span>); <span class="comment">// ä¸­èŠ‚ç‚¹è®¿é—®è¿‡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å¤„ç†ï¼ŒåŠ å…¥ç©ºèŠ‚ç‚¹åšä¸ºæ ‡è®°ã€‚</span></span><br><span class="line">                <span class="keyword">if</span> (node.right!=<span class="literal">null</span>) st.push(node.right);  <span class="comment">// æ·»åŠ å³èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰</span></span><br><span class="line">                <span class="keyword">if</span> (node.left!=<span class="literal">null</span>) st.push(node.left);    <span class="comment">// æ·»åŠ å·¦èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹ä¸å…¥æ ˆï¼‰       </span></span><br><span class="line">                              </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// åªæœ‰é‡åˆ°ç©ºèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ”¾è¿›ç»“æœé›†</span></span><br><span class="line">                st.pop();           <span class="comment">// å°†ç©ºèŠ‚ç‚¹å¼¹å‡º</span></span><br><span class="line">                node = st.peek();    <span class="comment">// é‡æ–°å–å‡ºæ ˆä¸­å…ƒç´ </span></span><br><span class="line">                st.pop();</span><br><span class="line">                result.add(node.val); <span class="comment">// åŠ å…¥åˆ°ç»“æœé›†</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„å±‚åºéå†"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå†"></a>äºŒå‰æ ‘çš„å±‚åºéå†</h2><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ å±‚åºéå† ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚</p><p><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">https://leetcode.cn/problems/binary-tree-level-order-traversal/</a></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ›å»ºä¸€ä¸ªç©ºçš„ Listï¼Œç”¨äºå­˜å‚¨å±‚åºéå†çš„ç»“æœã€‚</span><br><span class="line">2.å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºçš„ Listï¼ˆå› ä¸ºæ ‘ä¸ºç©ºï¼Œä¸å­˜åœ¨éå†ç»“æœï¼‰ã€‚</span><br><span class="line">3.åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹ã€‚é¦–å…ˆå°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿã€‚</span><br><span class="line">4.å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œè®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•° sizeï¼Œåˆå§‹å€¼ä¸ºé˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚</span><br><span class="line">5.åœ¨å¤„ç†é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹æ—¶ï¼Œæ¯å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å°† size å˜é‡å‡ 1ã€‚</span><br><span class="line">6.å°†å–å‡ºçš„èŠ‚ç‚¹çš„å€¼åŠ å…¥å½“å‰å±‚çš„éå†ç»“æœåˆ—è¡¨ä¸­ã€‚</span><br><span class="line">7.å¦‚æœå–å‡ºçš„èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å·¦å­èŠ‚ç‚¹å…¥é˜Ÿã€‚</span><br><span class="line">8.å¦‚æœå–å‡ºçš„èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å³å­èŠ‚ç‚¹å…¥é˜Ÿã€‚</span><br><span class="line">9.å½“ size å˜é‡çš„å€¼ä¸º 0 æ—¶ï¼Œè¯´æ˜å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²ç»å¤„ç†å®Œæ¯•ï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€å±‚çš„éå†äº†ã€‚</span><br><span class="line">10.å°†å½“å‰å±‚çš„éå†ç»“æœåˆ—è¡¨åŠ å…¥åˆ°æ€»çš„éå†ç»“æœåˆ—è¡¨ä¸­ã€‚</span><br><span class="line">11.è¿›å…¥ä¸‹ä¸€å±‚çš„éå†ï¼Œé‡å¤æ­¥éª¤ 4-10ï¼Œç›´åˆ°éå†å®Œæ•´æ£µæ ‘ã€‚</span><br><span class="line">12.è¿”å›éå†ç»“æœåˆ—è¡¨ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Listï¼Œç”¨äºå­˜å‚¨éå†ç»“æœ</span></span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºçš„ List</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ª Queueï¼Œç”¨äºå­˜å‚¨éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line">        Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// å°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿ</span></span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="comment">// å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// è·å–å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> queue.size();</span><br><span class="line">            <span class="comment">// åˆ›å»ºä¸€ä¸ª Listï¼Œç”¨äºå­˜å‚¨å½“å‰å±‚çš„éå†ç»“æœ</span></span><br><span class="line">            List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">            <span class="comment">// å¯¹å½“å‰å±‚çš„æ¯ä¸ªèŠ‚ç‚¹ä¾æ¬¡è¿›è¡Œå¤„ç†</span></span><br><span class="line">            <span class="keyword">while</span> (size-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å–å‡ºé˜Ÿé¦–èŠ‚ç‚¹</span></span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                <span class="comment">// å°†é˜Ÿé¦–èŠ‚ç‚¹çš„å€¼åŠ å…¥å½“å‰å±‚çš„éå†ç»“æœåˆ—è¡¨ä¸­</span></span><br><span class="line">                list.add(node.val);</span><br><span class="line">                <span class="comment">// å¦‚æœé˜Ÿé¦–èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.add(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦‚æœé˜Ÿé¦–èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå°†å…¶å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.add(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°†å½“å‰å±‚çš„éå†ç»“æœåˆ—è¡¨åŠ å…¥åˆ°æ€»çš„éå†ç»“æœåˆ—è¡¨ä¸­</span></span><br><span class="line">            result.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›éå†ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„å±‚åºéå†-II"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†-II" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå† II"></a>äºŒå‰æ ‘çš„å±‚åºéå† II</h2><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼ è‡ªåº•å‘ä¸Šçš„å±‚åºéå† ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰</p><p><a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">https://leetcode.cn/problems/binary-tree-level-order-traversal/</a></p><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸Šä¸€é¢˜çš„liståè½¬</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrderBottom</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node=que.poll();</span><br><span class="line">                list.add(node.val);</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        Collections.reverse(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„å³è§†å›¾"><a href="#äºŒå‰æ ‘çš„å³è§†å›¾" class="headerlink" title="äºŒå‰æ ‘çš„å³è§†å›¾"></a>äºŒå‰æ ‘çš„å³è§†å›¾</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ æ ¹èŠ‚ç‚¹ rootï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚</p><p><a href="https://leetcode.cn/problems/binary-tree-right-side-view/">https://leetcode.cn/problems/binary-tree-right-side-view/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [1,2,3,null,5,null,4]</span><br><span class="line">è¾“å‡º: [1,3,4]</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">rightSideView</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node=que.poll();</span><br><span class="line">                <span class="comment">// å¦‚æœ size å˜é‡çš„å€¼ä¸º 0ï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹æ˜¯å½“å‰å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶å€¼åŠ å…¥åˆ° result ä¸­</span></span><br><span class="line">                <span class="keyword">if</span>(size==<span class="number">0</span>) result.add(node.val);</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼"><a href="#äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼" class="headerlink" title="äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼"></a>äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼</h2><p>ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root , ä»¥æ•°ç»„çš„å½¢å¼è¿”å›æ¯ä¸€å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·® 10-5 ä»¥å†…çš„ç­”æ¡ˆå¯ä»¥è¢«æ¥å—ã€‚</p><p><a href="https://leetcode.cn/problems/average-of-levels-in-binary-tree/">https://leetcode.cn/problems/average-of-levels-in-binary-tree/</a></p><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Double&gt; <span class="title function_">averageOfLevels</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Double&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();<span class="comment">//è¿”å›å€¼ç±»å‹ä¿®æ”¹ä¸ºdouble</span></span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            <span class="type">int</span> tmp=size;</span><br><span class="line">            <span class="type">double</span> sum=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(tmp--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node=que.poll();</span><br><span class="line">                sum+=node.val;</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(sum/size);<span class="comment">//è®¡ç®—å¹³å‡å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="N-å‰æ ‘çš„å±‚åºéå†"><a href="#N-å‰æ ‘çš„å±‚åºéå†" class="headerlink" title="N å‰æ ‘çš„å±‚åºéå†"></a>N å‰æ ‘çš„å±‚åºéå†</h2><p>ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ã€‚ï¼ˆå³ä»å·¦åˆ°å³ï¼Œé€å±‚éå†ï¼‰ã€‚</p><p>æ ‘çš„åºåˆ—åŒ–è¾“å…¥æ˜¯ç”¨å±‚åºéå†ï¼Œæ¯ç»„å­èŠ‚ç‚¹éƒ½ç”± null å€¼åˆ†éš”ï¼ˆå‚è§ç¤ºä¾‹ï¼‰ã€‚</p><p><a href="https://leetcode.cn/problems/n-ary-tree-level-order-traversal/">https://leetcode.cn/problems/n-ary-tree-level-order-traversal/</a><br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [1,null,3,2,4,null,5,6]</span><br><span class="line">è¾“å‡ºï¼š[[1],[3,2,4],[5,6]]</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -7"><a href="#ä»£ç -7" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        Queue&lt;Node&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                Node node=que.poll();</span><br><span class="line">                list.add(node.val);</span><br><span class="line">                <span class="keyword">for</span>(Node child : node.children)&#123;</span><br><span class="line">                    que.add(child);<span class="comment">//</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼"><a href="#åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼" class="headerlink" title="åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼"></a>åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼</h2><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘ä¸­æ¯ä¸€å±‚çš„æœ€å¤§å€¼ã€‚</p><p><a href="https://leetcode.cn/problems/find-largest-value-in-each-tree-row/">https://leetcode.cn/problems/find-largest-value-in-each-tree-row/</a></p><h3 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -8"><a href="#ä»£ç -8" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">largestValues</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            <span class="type">int</span> max=Integer.MIN_VALUE;<span class="comment">//åˆå§‹åŒ–ä¸ºæœ€å°å€¼</span></span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node=que.poll();</span><br><span class="line">                max=node.val&gt;max?node.val:max;</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ"><a href="#å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ" class="headerlink" title="å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ"></a>å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ</h2><p>ç»™å®šä¸€ä¸ª å®Œç¾äºŒå‰æ ‘ ï¼Œå…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚äºŒå‰æ ‘å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct Node &#123;</span><br><span class="line">  int val;</span><br><span class="line">  Node *left;</span><br><span class="line">  Node *right;</span><br><span class="line">  Node *next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º NULLã€‚</p><p>åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰Â next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º NULLã€‚</p><p><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node">https://leetcode.cn/problems/populating-next-right-pointers-in-each-node</a></p><h3 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -9"><a href="#ä»£ç -9" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">connect</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        Queue&lt;Node&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            Node prev=<span class="literal">null</span>;<span class="comment">//æ ‡è®°prevèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                Node node=que.poll();</span><br><span class="line">                <span class="keyword">if</span>(prev!=<span class="literal">null</span>) prev.next=node;</span><br><span class="line">                prev=node;<span class="comment">//æŒ‡å‘å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ-II"><a href="#å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ-II" class="headerlink" title="å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II"></a>å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">struct Node &#123;</span><br><span class="line">  int val;</span><br><span class="line">  Node *left;</span><br><span class="line">  Node *right;</span><br><span class="line">  Node *next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º NULL ã€‚</p><p>åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰Â next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º NULL ã€‚</p><p><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii">https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii</a></p><h3 id="æ€è·¯-7"><a href="#æ€è·¯-7" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -10"><a href="#ä»£ç -10" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>åŒä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">connect</span><span class="params">(Node root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        Queue&lt;Node&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            Node prev=<span class="literal">null</span>;<span class="comment">//æ ‡è®°prevèŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                Node node=que.poll();</span><br><span class="line">                <span class="keyword">if</span>(prev!=<span class="literal">null</span>) prev.next=node;</span><br><span class="line">                prev=node;<span class="comment">//æŒ‡å‘å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚</p><p>äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚</p><p>è¯´æ˜:Â å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]</span><br><span class="line">è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 </span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree">https://leetcode.cn/problems/maximum-depth-of-binary-tree</a></p><h3 id="æ€è·¯-8"><a href="#æ€è·¯-8" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -11"><a href="#ä»£ç -11" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> depth=<span class="number">0</span>;<span class="comment">//åˆå§‹åŒ–æ·±åº¦ä¸º0</span></span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node= que.poll();</span><br><span class="line">                <span class="keyword">if</span>(size==<span class="number">0</span>) depth++;<span class="comment">//æ¯éå†å®Œä¸€å±‚ï¼Œæ·±åº¦+1</span></span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> depth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"><a href="#äºŒå‰æ ‘çš„æœ€å°æ·±åº¦" class="headerlink" title="äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"></a>äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚</p><p>æœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚</p><p>è¯´æ˜ï¼šå¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p><a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/">https://leetcode.cn/problems/minimum-depth-of-binary-tree/</a></p><h3 id="æ€è·¯-9"><a href="#æ€è·¯-9" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒä¸Š</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -12"><a href="#ä»£ç -12" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> depth=<span class="number">0</span>;<span class="comment">//åˆå§‹åŒ–æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ä¸º0</span></span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node= que.poll();</span><br><span class="line">                <span class="keyword">if</span>(node.left==<span class="literal">null</span> &amp;&amp; node.right==<span class="literal">null</span>) <span class="keyword">return</span> depth+<span class="number">1</span>;<span class="comment">//æ˜¯å¶å­ç»“ç‚¹ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">                <span class="keyword">if</span>(size==<span class="number">0</span>) depth++;<span class="comment">//éå†å®Œä¸€å±‚ï¼Œæ²¡æœ‰å¶å­ç»“ç‚¹ï¼Œæ·±åº¦+1</span></span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> depth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¿»è½¬äºŒå‰æ ‘"><a href="#ç¿»è½¬äºŒå‰æ ‘" class="headerlink" title="ç¿»è½¬äºŒå‰æ ‘"></a>ç¿»è½¬äºŒå‰æ ‘</h2><p>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</p><p><a href="https://leetcode.cn/problems/invert-binary-tree/">https://leetcode.cn/problems/invert-binary-tree/</a></p><h3 id="æ€è·¯-10"><a href="#æ€è·¯-10" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.é€’å½’éå†ï¼Œäº¤æ¢å·¦å³èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -13"><a href="#ä»£ç -13" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        invertNode(root);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invertNode</span><span class="params">(TreeNode node)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        TreeNode tmp=node.left;</span><br><span class="line">        node.left=node.right;</span><br><span class="line">        node.right=tmp;</span><br><span class="line">        invertNode(node.left);</span><br><span class="line">        invertNode(node.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹ç§°äºŒå‰æ ‘"><a href="#å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘"></a>å¯¹ç§°äºŒå‰æ ‘</h2><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚</p><p><a href="https://leetcode.cn/problems/symmetric-tree/">https://leetcode.cn/problems/symmetric-tree/</a></p><h3 id="æ€è·¯-11"><a href="#æ€è·¯-11" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å†™ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å¯¹ç§°</span><br><span class="line">2.é€’å½’éå†</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -14"><a href="#ä»£ç -14" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> check(root.left, root.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">null</span> &amp;&amp; q == <span class="literal">null</span>) &#123;<span class="comment">//ç©ºèŠ‚ç‚¹å¯¹ç§°</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">null</span> || q == <span class="literal">null</span> || p.val != q.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//æœ‰ä¸€è¾¹ç©ºæˆ–è€…å€¼ä¸ç›¸åŒ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> check(p.left, q.right) &amp;&amp; check(p.right, q.left);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç›¸åŒçš„æ ‘"><a href="#ç›¸åŒçš„æ ‘" class="headerlink" title="ç›¸åŒçš„æ ‘"></a>ç›¸åŒçš„æ ‘</h2><p>ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ p å’Œ q ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒã€‚</p><p>å¦‚æœä¸¤ä¸ªæ ‘åœ¨ç»“æ„ä¸Šç›¸åŒï¼Œå¹¶ä¸”èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚</p><p><a href="https://leetcode.cn/problems/same-tree/">https://leetcode.cn/problems/same-tree/</a></p><h3 id="æ€è·¯-12"><a href="#æ€è·¯-12" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å†™ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å¯¹ç§°</span><br><span class="line">2.é€’å½’éå†</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -15"><a href="#ä»£ç -15" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSameTree</span><span class="params">(TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(p==<span class="literal">null</span> &amp;&amp; q==<span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//éƒ½ç©ºï¼Œtrue</span></span><br><span class="line">        <span class="keyword">if</span>(p==<span class="literal">null</span> || q==<span class="literal">null</span> || p.val!=q.val) <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//ä¸€ä¸ªç©ºæˆ–å€¼ä¸åŒï¼Œfalse</span></span><br><span class="line">        <span class="keyword">return</span> isSameTree(p.left,q.left) &amp;&amp; isSameTree(p.right,q.right);<span class="comment">//ä¸ç©ºä¸”å€¼ç›¸åŒï¼Œè¿›ä¸€æ­¥æ¯”è¾ƒå­èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¦ä¸€æ£µæ ‘çš„å­æ ‘"><a href="#å¦ä¸€æ£µæ ‘çš„å­æ ‘" class="headerlink" title="å¦ä¸€æ£µæ ‘çš„å­æ ‘"></a>å¦ä¸€æ£µæ ‘çš„å­æ ‘</h2><p>ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ root å’Œ subRoot ã€‚æ£€éªŒ root ä¸­æ˜¯å¦åŒ…å«å’Œ subRoot å…·æœ‰ç›¸åŒç»“æ„å’ŒèŠ‚ç‚¹å€¼çš„å­æ ‘ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>äºŒå‰æ ‘ tree çš„ä¸€æ£µå­æ ‘åŒ…æ‹¬ tree çš„æŸä¸ªèŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ã€‚tree ä¹Ÿå¯ä»¥çœ‹åšå®ƒè‡ªèº«çš„ä¸€æ£µå­æ ‘ã€‚</p><p><a href="https://leetcode.cn/problems/subtree-of-another-tree">https://leetcode.cn/problems/subtree-of-another-tree</a></p><h3 id="æ€è·¯-13"><a href="#æ€è·¯-13" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.dfså‡½æ•°ç”¨äºé€’å½’éå†sçš„å­æ ‘</span><br><span class="line">2.checkå‡½æ•°ç”¨äºæ£€æŸ¥så’Œtåœ¨å½“å‰èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -16"><a href="#ä»£ç -16" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSubtree</span><span class="params">(TreeNode s, TreeNode t)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dfs(s, t); <span class="comment">// è°ƒç”¨dfså‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(TreeNode s, TreeNode t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span>) &#123; <span class="comment">// å¦‚æœsä¸ºnullï¼Œè¡¨ç¤ºå·²ç»éå†å®Œäº†sçš„å­æ ‘ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> check(s, t) || dfs(s.left, t) || dfs(s.right, t); <span class="comment">// å¦‚æœså’Œtç›¸ç­‰ï¼Œæˆ–è€…sçš„å·¦å­æ ‘åŒ…å«tï¼Œæˆ–è€…sçš„å³å­æ ‘åŒ…å«tï¼Œè¿”å›true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(TreeNode s, TreeNode t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span> &amp;&amp; t == <span class="literal">null</span>) &#123; <span class="comment">// å¦‚æœså’Œtéƒ½ä¸ºnullï¼Œè¡¨ç¤ºå·²ç»éå†å®Œäº†ä¸¤ä¸ªæ ‘ï¼Œè¿”å›true</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">null</span> || t == <span class="literal">null</span> || s.val != t.val) &#123; <span class="comment">// å¦‚æœså’Œtæœ‰ä¸€ä¸ªä¸ºnullï¼Œæˆ–è€…sçš„èŠ‚ç‚¹å€¼ä¸ç­‰äºtçš„èŠ‚ç‚¹å€¼ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> check(s.left, t.left) &amp;&amp; check(s.right, t.right); <span class="comment">// å¦‚æœsçš„å·¦å­æ ‘å’Œtçš„å·¦å­æ ‘ç›¸ç­‰ï¼Œä¸”sçš„å³å­æ ‘å’Œtçš„å³å­æ ‘ç›¸ç­‰ï¼Œè¿”å›true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°"><a href="#å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°"></a>å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°</h2><p>ç»™ä½ ä¸€æ£µ å®Œå…¨äºŒå‰æ ‘ çš„æ ¹èŠ‚ç‚¹ root ï¼Œæ±‚å‡ºè¯¥æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚</p><p>å®Œå…¨äºŒå‰æ ‘ çš„å®šä¹‰å¦‚ä¸‹ï¼šåœ¨å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œé™¤äº†æœ€åº•å±‚èŠ‚ç‚¹å¯èƒ½æ²¡å¡«æ»¡å¤–ï¼Œå…¶ä½™æ¯å±‚èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œå¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„è‹¥å¹²ä½ç½®ã€‚è‹¥æœ€åº•å±‚ä¸ºç¬¬ h å±‚ï¼Œåˆ™è¯¥å±‚åŒ…å« 1~Â 2hÂ ä¸ªèŠ‚ç‚¹ã€‚</p><p><a href="https://leetcode.cn/problems/count-complete-tree-nodes">https://leetcode.cn/problems/count-complete-tree-nodes</a></p><h3 id="æ€è·¯-14"><a href="#æ€è·¯-14" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ç»´æŠ¤ä¸€ä¸ªsize</span><br><span class="line">2.é€’å½’éå†</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -17"><a href="#ä»£ç -17" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countNodes</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="type">int</span> size=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> count(root,size);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">(TreeNode node,<span class="type">int</span> size)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">null</span>) <span class="keyword">return</span> size;</span><br><span class="line">        <span class="keyword">else</span> size++;</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) size=count(node.left,size);</span><br><span class="line">        <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) size=count(node.right,size);</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚</p><p>æœ¬é¢˜ä¸­ï¼Œä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼š</p><p>ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€‚</p><p><a href="https://leetcode.cn/problems/balanced-binary-tree/">https://leetcode.cn/problems/balanced-binary-tree/</a></p><h3 id="æ€è·¯-15"><a href="#æ€è·¯-15" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.isBalanced() æ–¹æ³•é€šè¿‡é€’å½’åˆ¤æ–­å·¦å³å­æ ‘çš„é«˜åº¦å·®æ˜¯å¦ä¸è¶…è¿‡ 1ï¼Œå¹¶ä¸”å·¦å³å­æ ‘ä¹Ÿéƒ½æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œæ¥åˆ¤æ–­å½“å‰äºŒå‰æ ‘æ˜¯å¦ä¸ºé«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘</span><br><span class="line">2.height() æ–¹æ³•ç”¨äºè®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦ã€‚è¯¥æ–¹æ³•é€šè¿‡é€’å½’è®¡ç®—å·¦å³å­æ ‘çš„é«˜åº¦ï¼Œå¹¶å–å…¶ä¸­çš„æœ€å¤§å€¼åŠ  1ï¼Œæ¥è®¡ç®—å½“å‰èŠ‚ç‚¹çš„é«˜åº¦ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -18"><a href="#ä»£ç -18" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isBalanced</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™è®¤ä¸ºæ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å½“å‰äºŒå‰æ ‘çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®æ˜¯å¦ä¸è¶…è¿‡ 1ï¼Œå¹¶ä¸”å·¦å³å­æ ‘ä¹Ÿéƒ½æ˜¯é«˜åº¦å¹³è¡¡çš„</span></span><br><span class="line">        <span class="keyword">return</span> Math.abs(height(root.left) - height(root.right)) &lt;= <span class="number">1</span> &amp;&amp; isBalanced(root.left) &amp;&amp; isBalanced(root.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™é«˜åº¦ä¸º 0</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’è®¡ç®—å·¦å³å­æ ‘çš„é«˜åº¦ï¼Œå¹¶å–å…¶ä¸­çš„æœ€å¤§å€¼åŠ  1ï¼Œæ¥è®¡ç®—å½“å‰èŠ‚ç‚¹çš„é«˜åº¦</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(height(root.left), height(root.right)) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„"><a href="#äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„" class="headerlink" title="äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„"></a>äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„</h2><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼ŒæŒ‰ ä»»æ„é¡ºåº ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚</p><p>å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [1,2,3,null,5]</span><br><span class="line">è¾“å‡ºï¼š[&quot;1-&gt;2-&gt;5&quot;,&quot;1-&gt;3&quot;]</span><br><span class="line">è¾“å…¥ï¼šroot = [1]</span><br><span class="line">è¾“å‡ºï¼š[&quot;1&quot;]</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/binary-tree-paths/">https://leetcode.cn/problems/binary-tree-paths/</a></p><h3 id="æ€è·¯-16"><a href="#æ€è·¯-16" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.dfs() æ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è®¿é—®è¿‡çš„è·¯å¾„æ·»åŠ åˆ° res åˆ—è¡¨ä¸­ï¼Œå¹¶è¿”å›ã€‚</span><br><span class="line"></span><br><span class="line">å¦åˆ™ï¼Œå¯¹å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹è¿›è¡Œé€’å½’æœç´¢ï¼Œå¹¶åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œå°†è®¿é—®è¿‡çš„è·¯å¾„æ‹¼æ¥èµ·æ¥</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -19"><a href="#ä»£ç -19" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">binaryTreePaths</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(root, <span class="string">&quot;&quot;</span>, res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(TreeNode node, String path, List&lt;String&gt; res)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node.left == <span class="literal">null</span> &amp;&amp; node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹</span></span><br><span class="line">            res.add(path + node.val);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// é€’å½’éå†å·¦å­æ ‘</span></span><br><span class="line">            dfs(node.left, path + node.val + <span class="string">&quot;-&gt;&quot;</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// é€’å½’éå†å³å­æ ‘</span></span><br><span class="line">            dfs(node.right, path + node.val + <span class="string">&quot;-&gt;&quot;</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å·¦å¶å­ä¹‹å’Œ"><a href="#å·¦å¶å­ä¹‹å’Œ" class="headerlink" title="å·¦å¶å­ä¹‹å’Œ"></a>å·¦å¶å­ä¹‹å’Œ</h2><p>ç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚</p><p><a href="https://leetcode.cn/problems/sum-of-left-leaves/">https://leetcode.cn/problems/sum-of-left-leaves/</a></p><h3 id="æ€è·¯-17"><a href="#æ€è·¯-17" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.é¦–å…ˆåˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æ˜¯å¦ä¸ºå·¦å¶å­èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹çš„å€¼ç´¯åŠ åˆ° sum ä¸­ã€‚å¦åˆ™ï¼Œå¯¹å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹è¿›è¡Œé€’å½’æœç´¢ï¼Œå¹¶åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œç´¯åŠ æ‰€æœ‰å·¦å¶å­èŠ‚ç‚¹çš„å€¼ã€‚æœ€ç»ˆè¿”å›å·¦å³å­æ ‘çš„ç´¯åŠ å’Œã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -20"><a href="#ä»£ç -20" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumOfLeftLeaves</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> dfs(root,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(TreeNode node,<span class="type">int</span> sum)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="literal">null</span> &amp;&amp; node.left.left==<span class="literal">null</span> &amp;&amp; node.left.right==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™å°†è¯¥èŠ‚ç‚¹çš„å€¼ç´¯åŠ åˆ° sum ä¸­</span></span><br><span class="line">            sum+=node.left.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) sum=dfs(node.left,sum); <span class="comment">// é€’å½’éå†å·¦å­æ ‘</span></span><br><span class="line">        <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) sum=dfs(node.right,sum); <span class="comment">// é€’å½’éå†å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼"><a href="#æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼" class="headerlink" title="æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼"></a>æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ æ ¹èŠ‚ç‚¹ rootï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„ æœ€åº•å±‚ æœ€å·¦è¾¹ èŠ‚ç‚¹çš„å€¼ã€‚</p><p>å‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p><a href="https://leetcode.cn/problems/find-bottom-left-tree-value/">https://leetcode.cn/problems/find-bottom-left-tree-value/</a></p><h3 id="æ€è·¯-18"><a href="#æ€è·¯-18" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.å±‚åºéå†ï¼Œæ‰¾æœ€åä¸€å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -21"><a href="#ä»£ç -21" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findBottomLeftValue</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Queue&lt;TreeNode&gt; que=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        que.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!que.isEmpty())&#123;</span><br><span class="line">            <span class="type">int</span> size=que.size();</span><br><span class="line">            List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(size--&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                TreeNode node=que.poll();</span><br><span class="line">                list.add(node.val);</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="literal">null</span>) que.add(node.left);</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="literal">null</span>) que.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            result.add(list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result.get(result.size()-<span class="number">1</span>).get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è·¯å¾„æ€»å’Œ"><a href="#è·¯å¾„æ€»å’Œ" class="headerlink" title="è·¯å¾„æ€»å’Œ"></a>è·¯å¾„æ€»å’Œ</h2><p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Â root å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•°Â targetSum ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’ŒÂ targetSum ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</p><p>å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">è§£é‡Šï¼šç­‰äºç›®æ ‡å’Œçš„æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/path-sum">https://leetcode.cn/problems/path-sum</a></p><h3 id="æ€è·¯-19"><a href="#æ€è·¯-19" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.å‡å®šä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å€¼ä¹‹å’Œä¸º valï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå¤§é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªå°é—®é¢˜ï¼šæ˜¯å¦å­˜åœ¨ä»å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ°å¶å­çš„è·¯å¾„ï¼Œæ»¡è¶³å…¶è·¯å¾„å’Œä¸º sum - valã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -22"><a href="#ä»£ç -22" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasPathSum</span><span class="params">(TreeNode root, <span class="type">int</span> sum)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å› false</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”èŠ‚ç‚¹å€¼ç­‰äºç›®æ ‡å’Œï¼Œè¿”å› true</span></span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="literal">null</span> &amp;&amp; root.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> sum == root.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œé€’å½’åˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è·¯å¾„</span></span><br><span class="line">        <span class="keyword">return</span> hasPathSum(root.left, sum - root.val) || hasPathSum(root.right, sum - root.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘"><a href="#ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘" class="headerlink" title="ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘"></a>ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</h2><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ inorder å’Œ postorder ï¼Œå…¶ä¸­ inorder æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œ postorder æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œè¯·ä½ æ„é€ å¹¶è¿”å›è¿™é¢—Â äºŒå‰æ ‘Â ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šinorder = [9,3,15,20,7], postorder = [9,15,7,20,3]</span><br><span class="line">è¾“å‡ºï¼š[3,9,20,null,null,15,7]</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal">https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal</a></p><h3 id="æ€è·¯-20"><a href="#æ€è·¯-20" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„ä¸­åºéå†æ•°ç»„å’Œååºéå†æ•°ç»„ï¼Œæ„é€ å‡ºè¿™æ£µäºŒå‰æ ‘ã€‚</span><br><span class="line"></span><br><span class="line">1.ç¡®å®šæ ¹èŠ‚ç‚¹</span><br><span class="line">ç”±äºååºéå†çš„é¡ºåºæ˜¯å·¦å­æ ‘ -&gt; å³å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹ï¼Œå› æ­¤ååºéå†æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯æ ¹èŠ‚ç‚¹ã€‚åœ¨ä¸­åºéå†æ•°ç»„ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œå¯ä»¥å°†æ•´ä¸ªæ•°ç»„åˆ†æˆå·¦å­æ ‘å’Œå³å­æ ‘ä¸¤éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line">2.é€’å½’æ„é€ å·¦å­æ ‘å’Œå³å­æ ‘</span><br><span class="line">é€šè¿‡æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¯ä»¥ç¡®å®šå·¦å­æ ‘å’Œå³å­æ ‘çš„ä¸­åºéå†æ•°ç»„ã€‚åœ¨ååºéå†æ•°ç»„ä¸­ï¼Œå·¦å­æ ‘å’Œå³å­æ ‘çš„ä½ç½®ä¹Ÿå¯ä»¥æ ¹æ®å·¦å­æ ‘çš„é•¿åº¦ç¡®å®šã€‚ç„¶åå¯ä»¥é€’å½’æ„é€ å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹ä¸ºæ­¢ã€‚</span><br><span class="line"></span><br><span class="line">3.è¿”å›æ ¹èŠ‚ç‚¹</span><br><span class="line">å°†å·¦å­æ ‘å’Œå³å­æ ‘é€’å½’æ„é€ å‡ºæ¥åï¼Œå°±å¯ä»¥å°†æ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘è¿æ¥èµ·æ¥ï¼Œæ„é€ å‡ºæ•´æ£µäºŒå‰æ ‘ã€‚æœ€åè¿”å›æ ¹èŠ‚ç‚¹å³å¯ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -23"><a href="#ä»£ç -23" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨ä¸­åºéå†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼å’Œä¸‹æ ‡</span></span><br><span class="line">    HashMap&lt;Integer,Integer&gt; inorderArrayMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// å®šä¹‰ååºéå†æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span>[] post;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inorder, <span class="type">int</span>[] postorder)</span> &#123;</span><br><span class="line">        <span class="comment">// å°†ä¸­åºéå†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼å’Œä¸‹æ ‡å­˜å‚¨åˆ°å“ˆå¸Œè¡¨ä¸­</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; inorder.length; i++) &#123;</span><br><span class="line">            inorderArrayMap.put(inorder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†ååºéå†æ•°ç»„å­˜å‚¨åˆ°æˆå‘˜å˜é‡ post ä¸­</span></span><br><span class="line">        post = postorder;</span><br><span class="line">        <span class="comment">// è°ƒç”¨é€’å½’æ–¹æ³•æ„é€ äºŒå‰æ ‘</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> buildTree(<span class="number">0</span>, inorder.length - <span class="number">1</span>, <span class="number">0</span>, post.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€’å½’æ„é€ äºŒå‰æ ‘çš„æ–¹æ³•ï¼Œæ¥å—å››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºä¸­åºéå†æ•°ç»„çš„å·¦å³è¾¹ç•Œå’Œååºéå†æ•°ç»„çš„å·¦å³è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span> inorderStart, <span class="type">int</span> inorderEnd, <span class="type">int</span> postorderStart, <span class="type">int</span> postorderEnd)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸­åºéå†æ•°ç»„æˆ–ååºéå†æ•°ç»„ä¸ºç©ºï¼Œè¿”å›ç©ºèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span>(inorderEnd &lt; inorderStart || postorderEnd &lt; postorderStart) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–å¾—ååºéå†æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">root</span> <span class="operator">=</span> post[postorderEnd];</span><br><span class="line">        <span class="comment">// åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾æ ¹èŠ‚ç‚¹å¯¹åº”çš„ç´¢å¼•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIndexInInorderArray</span> <span class="operator">=</span> inorderArrayMap.get(root);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–°çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(root);</span><br><span class="line">        <span class="comment">// é€’å½’æ„é€ å·¦å­æ ‘ï¼Œä¸­åºéå†æ•°ç»„çš„å·¦è¾¹ç•Œä¸º inorderStartï¼Œå³è¾¹ç•Œä¸º rootIndexInInorderArray - 1ï¼Œååºéå†æ•°ç»„çš„å·¦è¾¹ç•Œä¸º postorderStartï¼Œå³è¾¹ç•Œä¸º postorderStart + rootIndexInInorderArray - inorderStart - 1</span></span><br><span class="line">        node.left = buildTree(inorderStart, rootIndexInInorderArray - <span class="number">1</span>, postorderStart, postorderStart + rootIndexInInorderArray - inorderStart - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// é€’å½’æ„é€ å³å­æ ‘ï¼Œä¸­åºéå†æ•°ç»„çš„å·¦è¾¹ç•Œä¸º rootIndexInInorderArray + 1ï¼Œå³è¾¹ç•Œä¸º inorderEndï¼Œååºéå†æ•°ç»„çš„å·¦è¾¹ç•Œä¸º postorderStart + rootIndexInInorderArray - inorderStartï¼Œå³è¾¹ç•Œä¸º postorderEnd - 1</span></span><br><span class="line">        node.right = buildTree(rootIndexInInorderArray + <span class="number">1</span>, inorderEnd, postorderStart + rootIndexInInorderArray - inorderStart, postorderEnd - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> node; <span class="comment">// è¿”å›æ–°å»ºçš„èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€å¤§äºŒå‰æ ‘"><a href="#æœ€å¤§äºŒå‰æ ‘" class="headerlink" title="æœ€å¤§äºŒå‰æ ‘"></a>æœ€å¤§äºŒå‰æ ‘</h2><p>ç»™å®šä¸€ä¸ªä¸é‡å¤çš„æ•´æ•°æ•°ç»„Â nums ã€‚Â æœ€å¤§äºŒå‰æ ‘Â å¯ä»¥ç”¨ä¸‹é¢çš„ç®—æ³•ä»Â nums é€’å½’åœ°æ„å»º:</p><p>åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸ºÂ nums ä¸­çš„æœ€å¤§å€¼ã€‚<br>é€’å½’åœ°åœ¨æœ€å¤§å€¼Â å·¦è¾¹Â çš„Â å­æ•°ç»„å‰ç¼€ä¸ŠÂ æ„å»ºå·¦å­æ ‘ã€‚<br>é€’å½’åœ°åœ¨æœ€å¤§å€¼ å³è¾¹ çš„Â å­æ•°ç»„åç¼€ä¸ŠÂ æ„å»ºå³å­æ ‘ã€‚<br>è¿”å›Â nums æ„å»ºçš„ æœ€å¤§äºŒå‰æ ‘ ã€‚<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [3,2,1,6,0,5]</span><br><span class="line">è¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1]</span><br><span class="line">è§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line">- [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚</span><br><span class="line">    - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚</span><br><span class="line">        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚</span><br><span class="line">        - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚</span><br><span class="line">            - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚</span><br><span class="line">            - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚</span><br><span class="line">    - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚</span><br><span class="line">        - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚</span><br><span class="line">        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/maximum-binary-tree">https://leetcode.cn/problems/maximum-binary-tree</a></p><h3 id="æ€è·¯-21"><a href="#æ€è·¯-21" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.å®šä¹‰é€’å½’å‡½æ•°</span><br><span class="line">å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° constructMaximumBinaryTree(int[] nums, int start, int end)ï¼Œå…¶ä¸­ nums è¡¨ç¤ºç»™å®šçš„æ•°ç»„ï¼Œstart å’Œ end è¡¨ç¤ºå½“å‰é€’å½’çš„æ•°ç»„çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ã€‚</span><br><span class="line"></span><br><span class="line">2.æ‰¾åˆ°æœ€å¤§å€¼åŠå…¶ç´¢å¼•</span><br><span class="line">åœ¨æ•°ç»„ nums çš„èŒƒå›´ [start, end] ä¸­æ‰¾åˆ°æœ€å¤§å€¼åŠå…¶ç´¢å¼•ã€‚</span><br><span class="line"></span><br><span class="line">3.æ„é€ æ ¹èŠ‚ç‚¹</span><br><span class="line">ç”¨æœ€å¤§å€¼åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ rootã€‚</span><br><span class="line"></span><br><span class="line">4.é€’å½’æ„é€ å·¦å­æ ‘</span><br><span class="line">å°†æ•°ç»„ nums ä¸­èŒƒå›´ [start, maxIndex-1] çš„éƒ¨åˆ†ä½œä¸ºä¸€ä¸ªæ–°çš„å­æ•°ç»„ï¼Œé€’å½’è°ƒç”¨ constructMaximumBinaryTree(nums, start, maxIndex-1) æ–¹æ³•ï¼Œè¿”å›å€¼ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">5.é€’å½’æ„é€ å³å­æ ‘</span><br><span class="line">å°†æ•°ç»„ nums ä¸­èŒƒå›´ [maxIndex+1, end] çš„éƒ¨åˆ†ä½œä¸ºä¸€ä¸ªæ–°çš„å­æ•°ç»„ï¼Œé€’å½’è°ƒç”¨ constructMaximumBinaryTree(nums, maxIndex+1, end) æ–¹æ³•ï¼Œè¿”å›å€¼ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">6.è¿”å›æ ¹èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -24"><a href="#ä»£ç -24" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">constructMaximumBinaryTree</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨é‡è½½çš„æ–¹æ³•ï¼Œä¼ å…¥æ•°ç»„ã€å·¦è¾¹ç•Œ 0 å’Œå³è¾¹ç•Œ nums.length - 1</span></span><br><span class="line">        <span class="keyword">return</span> constructMaximumBinaryTree(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šä¹‰é‡è½½çš„æ–¹æ³•ï¼Œä¼ å…¥æ•°ç»„ã€å·¦å³è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">constructMaximumBinaryTree</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå·¦è¾¹ç•Œå¤§äºå³è¾¹ç•Œï¼Œè¿”å› null</span></span><br><span class="line">        <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼åŠå…¶ç´¢å¼•</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> start;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start + <span class="number">1</span>; i &lt;= end; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; nums[maxIndex]) &#123;</span><br><span class="line">                maxIndex = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ ¹èŠ‚ç‚¹ï¼Œä»¥æœ€å¤§å€¼ä¸ºèŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(nums[maxIndex]);</span><br><span class="line">        <span class="comment">// é€’å½’æ„é€ å·¦å­æ ‘ï¼Œå·¦å­æ ‘çš„èŒƒå›´æ˜¯[start, maxIndex - 1]</span></span><br><span class="line">        root.left = constructMaximumBinaryTree(nums, start, maxIndex - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// é€’å½’æ„é€ å³å­æ ‘ï¼Œå³å­æ ‘çš„èŒƒå›´æ˜¯[maxIndex + 1, end]</span></span><br><span class="line">        root.right = constructMaximumBinaryTree(nums, maxIndex + <span class="number">1</span>, end);</span><br><span class="line">        <span class="comment">// è¿”å›æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆå¹¶äºŒå‰æ ‘"><a href="#åˆå¹¶äºŒå‰æ ‘" class="headerlink" title="åˆå¹¶äºŒå‰æ ‘"></a>åˆå¹¶äºŒå‰æ ‘</h2><p>ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š root1 å’Œ root2 ã€‚</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œä¸ä¸º null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚</p><p>è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚</p><p>æ³¨æ„: åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚</p><p><a href="https://leetcode.cn/problems/merge-two-binary-trees">https://leetcode.cn/problems/merge-two-binary-trees</a></p><h3 id="æ€è·¯-22"><a href="#æ€è·¯-22" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.å®šä¹‰é€’å½’å‡½æ•°</span><br><span class="line">å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•° mergeTrees(TreeNode root1, TreeNode root2)ï¼Œå…¶ä¸­ root1 å’Œ root2 åˆ†åˆ«è¡¨ç¤ºä¸¤æ£µç»™å®šçš„äºŒå‰æ ‘ã€‚</span><br><span class="line"></span><br><span class="line">2.å¤„ç†ç‰¹æ®Šæƒ…å†µ</span><br><span class="line">å¦‚æœå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸º nullï¼Œåˆ™è¿”å›å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚</span><br><span class="line"></span><br><span class="line">3.åˆå¹¶èŠ‚ç‚¹å€¼</span><br><span class="line">å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ä¸º nullï¼Œåˆ™å°†å®ƒä»¬çš„å€¼ç›¸åŠ ï¼Œç„¶åç»§ç»­é€’å½’åˆå¹¶å®ƒä»¬çš„å·¦å³å­æ ‘ã€‚</span><br><span class="line"></span><br><span class="line">4.è¿”å›åˆå¹¶åçš„æ ¹èŠ‚ç‚¹</span><br><span class="line">é€’å½’ç»“æŸåï¼Œè¿”å›åˆå¹¶åçš„æ ¹èŠ‚ç‚¹å³å¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªè§£é¢˜æ€è·¯ä¸»è¦é‡‡ç”¨äº†é€’å½’çš„æ–¹å¼æ¥åˆå¹¶ä¸¤æ£µäºŒå‰æ ‘ã€‚æ¯æ¬¡é€’å½’éƒ½å°†åŸå§‹çš„ä¸¤ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆå¹¶ï¼Œå¹¶ä¸”é€’å½’åˆå¹¶å®ƒä»¬çš„å·¦å³å­æ ‘ã€‚ç”±äºæ¯æ¬¡é€’å½’éƒ½ä¼šæ¯”è¾ƒå·¦å³èŠ‚ç‚¹çš„æƒ…å†µï¼Œå› æ­¤é€’å½’æ·±åº¦æœ€å¤§ä¸ºä¸¤æ£µæ ‘ä¸­èŠ‚ç‚¹æ•°è¾ƒå¤§çš„ä¸€æ£µï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -25"><a href="#ä»£ç -25" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">mergeTrees</span><span class="params">(TreeNode root1, TreeNode root2)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸º null æ—¶ï¼Œè¿”å›å¦ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (root1 == <span class="literal">null</span> || root2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> root1 == <span class="literal">null</span> ? root2 : root1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’åˆå¹¶ä¸¤ä¸ªæ ‘</span></span><br><span class="line">        <span class="keyword">return</span> dfs(root1, root2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰é€’å½’å‡½æ•°ï¼Œåˆå¹¶ä¸¤ä¸ªæ ‘</span></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">dfs</span><span class="params">(TreeNode node1, TreeNode node2)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸º null æ—¶ï¼Œè¿”å›å¦ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (node1 == <span class="literal">null</span> || node2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> node1 == <span class="literal">null</span> ? node2 : node1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å€¼ç›¸åŠ </span></span><br><span class="line">        node1.val += node2.val;</span><br><span class="line">        <span class="comment">// é€’å½’åˆå¹¶å·¦å­æ ‘</span></span><br><span class="line">        node1.left = dfs(node1.left, node2.left);</span><br><span class="line">        <span class="comment">// é€’å½’åˆå¹¶å³å­æ ‘</span></span><br><span class="line">        node1.right = dfs(node1.right, node2.right);</span><br><span class="line">        <span class="comment">// è¿”å›åˆå¹¶åçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> node1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"><a href="#äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢" class="headerlink" title="äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢"></a>äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢</h2><p>ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹Â rootÂ å’Œä¸€ä¸ªæ•´æ•°å€¼Â valã€‚</p><p>ä½ éœ€è¦åœ¨ BST ä¸­æ‰¾åˆ°èŠ‚ç‚¹å€¼ç­‰äºÂ valÂ çš„èŠ‚ç‚¹ã€‚ è¿”å›ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ã€‚ å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â nullÂ ã€‚</p><p><a href="https://leetcode.cn/problems/search-in-a-binary-search-tree">https://leetcode.cn/problems/search-in-a-binary-search-tree</a></p><h3 id="æ€è·¯-23"><a href="#æ€è·¯-23" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.é€’å½’éå†æœç´¢</span><br><span class="line">2.å¦‚æœtargetæ›´å¤§ï¼Œåœ¨å³å­æ ‘ä¸­æ‰¾ï¼Œå¦åˆ™åœ¨å·¦å­æ ‘ä¸­æ‰¾</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -26"><a href="#ä»£ç -26" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">searchBST</span><span class="params">(TreeNode root, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (root.val == val) &#123;</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.val &gt; val) &#123;</span><br><span class="line">            <span class="keyword">return</span> searchBST(root.left, val);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> searchBST(root.right, val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="éªŒè¯äºŒå‰æœç´¢æ ‘"></a>éªŒè¯äºŒå‰æœç´¢æ ‘</h2><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p>æœ‰æ•ˆ äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š</p><p>èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« å°äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br>èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« å¤§äº å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br>æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p><p><a href="https://leetcode.cn/problems/validate-binary-search-tree">https://leetcode.cn/problems/validate-binary-search-tree</a></p><h3 id="æ€è·¯-24"><a href="#æ€è·¯-24" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸­åºéå†ç»“æœæ˜¯å¢åºï¼Œé€’å½’éå†ç”Ÿæˆlistï¼Œåˆ¤æ–­listæ˜¯å¦å¢åºå³å¯</span><br><span class="line">2.å¯ä»¥ç”¨å…¨å±€å˜é‡ä¿å­˜prevèŠ‚ç‚¹å€¼ï¼Œä¸­åºéå†æ—¶ä¸€æ—¦å°äºç­‰äºprevï¼Œåˆ¤åˆ«ä¸ºfalse</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -27"><a href="#ä»£ç -27" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        order(root);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;<span class="built_in">this</span>.result.size();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>((<span class="type">long</span>)<span class="built_in">this</span>.result.get(i)-<span class="built_in">this</span>.result.get(i-<span class="number">1</span>)&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(TreeNode root)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root.left!=<span class="literal">null</span>) order(root.left);</span><br><span class="line">        result.add(root.val);</span><br><span class="line">        <span class="keyword">if</span>(root.right!=<span class="literal">null</span>) order(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isValidBST(root.left)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (prev != <span class="literal">null</span> &amp;&amp; prev &gt;= root.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        prev = root.val;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isValidBST(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®"><a href="#äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®"></a>äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®</h2><p>ç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å› æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼ ã€‚</p><p>å·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚</p><p><a href="https://leetcode.cn/problems/minimum-absolute-difference-in-bst/">https://leetcode.cn/problems/minimum-absolute-difference-in-bst/</a></p><h3 id="æ€è·¯-25"><a href="#æ€è·¯-25" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.ç»´æŠ¤ä¸€ä¸ªprevå’Œminå€¼ï¼Œä¸­åºéå†å³å¯</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -28"><a href="#ä»£ç -28" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer prev=<span class="literal">null</span>;<span class="comment">//è¦åˆå§‹åŒ–ä¸ºnullï¼Œè¦ç”¨Integer</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> min=Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMinimumDifference</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        order(root);</span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(TreeNode root)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root.left!=<span class="literal">null</span>) order(root.left);</span><br><span class="line">        <span class="keyword">if</span>(prev!=<span class="literal">null</span> &amp;&amp; root.val-prev&lt;min) min=root.val-prev;</span><br><span class="line">        prev=root.val;</span><br><span class="line">        <span class="keyword">if</span>(root.right!=<span class="literal">null</span>) order(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"><a href="#äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°" class="headerlink" title="äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°"></a>äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°</h2><p>ç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ root ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰ ä¼—æ•°ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚</p><p>å¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚</p><p>å‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š</p><p>ç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å°äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼<br>ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å¤§äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼<br>å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘</p><p><a href="https://leetcode.cn/problems/find-mode-in-binary-search-tree">https://leetcode.cn/problems/find-mode-in-binary-search-tree</a></p><h3 id="æ€è·¯-26"><a href="#æ€è·¯-26" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨ä¸­åºéå†çš„æ–¹å¼éå†äºŒå‰æœç´¢æ ‘ï¼›</span><br><span class="line">2.ç»´æŠ¤å››ä¸ªå˜é‡ï¼šprevValï¼Œcountï¼ŒmaxCount å’Œ modesã€‚</span><br><span class="line">* prevVal è¡¨ç¤ºä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹çš„å€¼ï¼›</span><br><span class="line">* count è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å€¼å‡ºç°çš„æ¬¡æ•°ï¼›</span><br><span class="line">* maxCount è¡¨ç¤ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼çš„å‡ºç°æ¬¡æ•°ï¼›</span><br><span class="line">* modes è¡¨ç¤ºå‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼ç»„æˆçš„ Listã€‚</span><br><span class="line">3.åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™å°† count åŠ  1ï¼›å¦åˆ™ï¼Œå°† count è®¾ä¸º 1ï¼ŒprevVal è®¾ä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼ã€‚</span><br><span class="line">4.å¦‚æœ count å¤§äº maxCountï¼Œåˆ™å°† maxCount æ›´æ–°ä¸º countï¼Œå°† modes æ¸…ç©ºï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹çš„å€¼æ·»åŠ åˆ° modes ä¸­ï¼›å¦‚æœ count ç­‰äº maxCountï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹çš„å€¼æ·»åŠ åˆ° modes ä¸­ã€‚</span><br><span class="line">5.ç»´æŠ¤äº†æ‰€æœ‰å‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼ï¼Œæœ€åå°†è¿™äº›èŠ‚ç‚¹å€¼è½¬æ¢ä¸ºæ•°ç»„è¿”å›å³å¯ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -29"><a href="#ä»£ç -29" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">prevVal</span> <span class="operator">=</span> -<span class="number">1</span>;    <span class="comment">// ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;       <span class="comment">// å½“å‰èŠ‚ç‚¹å€¼å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">maxCount</span> <span class="operator">=</span> <span class="number">0</span>;    <span class="comment">// å‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Integer&gt; modes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();    <span class="comment">// å‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼ç»„æˆçš„ List</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] findMode(TreeNode root) &#123;</span><br><span class="line">        inorder(root);    <span class="comment">// ä¸­åºéå†äºŒå‰æœç´¢æ ‘</span></span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[modes.size()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; modes.size(); i++) &#123;</span><br><span class="line">            result[i] = modes.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;    <span class="comment">// å°†å‡ºç°æ¬¡æ•°æœ€å¤šçš„èŠ‚ç‚¹å€¼è½¬æ¢ä¸ºæ•°ç»„è¿”å›</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        inorder(node.left);    <span class="comment">// ä¸­åºéå†å·¦å­æ ‘</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (node.val == prevVal) &#123;    <span class="comment">// å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">            count++;    <span class="comment">// å°† count åŠ  1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            count = <span class="number">1</span>;    <span class="comment">// å°† count è®¾ä¸º 1</span></span><br><span class="line">            prevVal = node.val;    <span class="comment">// å°† prevVal è®¾ä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (count &gt; maxCount) &#123;    <span class="comment">// å¦‚æœ count å¤§äº maxCount</span></span><br><span class="line">            maxCount = count;    <span class="comment">// å°† maxCount æ›´æ–°ä¸º count</span></span><br><span class="line">            modes.clear();    <span class="comment">// å°† modes æ¸…ç©º</span></span><br><span class="line">            modes.add(node.val);    <span class="comment">// å°†å½“å‰èŠ‚ç‚¹çš„å€¼æ·»åŠ åˆ° modes ä¸­</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (count == maxCount) &#123;    <span class="comment">// å¦‚æœ count ç­‰äº maxCount</span></span><br><span class="line">            modes.add(node.val);    <span class="comment">// å°†å½“å‰èŠ‚ç‚¹çš„å€¼æ·»åŠ åˆ° modes ä¸­</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        inorder(node.right);    <span class="comment">// ä¸­åºéå†å³å­æ ‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree">https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree</a></p><h3 id="æ€è·¯-27"><a href="#æ€è·¯-27" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.å¦‚æœp,qä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span><br><span class="line">2.å¦‚æœp,qåœ¨å·¦å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘æŸ¥æ‰¾</span><br><span class="line">3.å¦‚æœp,qåœ¨å³å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘æŸ¥æ‰¾</span><br><span class="line">4.å¦‚æœp,qåˆ†å±ä¸¤ä¾§ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -30"><a href="#ä»£ç -30" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (root.val == p.val || root.val == q.val) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåœ¨å·¦å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (find(root.left, p) &amp;&amp; find(root.left, q)) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåœ¨å³å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (find(root.right, p) &amp;&amp; find(root.right, q)) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.right, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåˆ†å±ä¸¤ä¾§ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">(TreeNode root, TreeNode c)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (root.val == c.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">return</span> find(root.left, c) || find(root.right, c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p><p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€</p><p>ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘:Â  root &#x3D;Â [6,2,8,0,4,7,9,null,null,3,5]</p><p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree">https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree</a></p><h3 id="æ€è·¯-28"><a href="#æ€è·¯-28" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸ä¸Šä¸€é¢˜ç›¸æ¯”ï¼Œæ ‘æ˜¯æœ‰åºçš„</span><br><span class="line">2.æ›¿æ¢findæ–¹æ³•ä¸ºvalçš„æ¯”è¾ƒ</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -31"><a href="#ä»£ç -31" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (root.val == p.val || root.val == q.val) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåœ¨å·¦å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å·¦å­æ ‘æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (p.val&lt;root.val &amp;&amp; q.val&lt;root.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåœ¨å³å­æ ‘ï¼Œåˆ™å…¬å…±ç¥–å…ˆåœ¨å³å­æ ‘æŸ¥æ‰¾</span></span><br><span class="line">        <span class="keyword">if</span> (p.val&gt;root.val &amp;&amp; q.val&gt;root.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.right, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœp,qåˆ†å±ä¸¤ä¾§ï¼Œåˆ™å…¬å…±ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ"><a href="#äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ" class="headerlink" title="äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ"></a>äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ</h2><p>ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹Â rootÂ å’Œè¦æ’å…¥æ ‘ä¸­çš„å€¼Â valueÂ ï¼Œå°†å€¼æ’å…¥äºŒå‰æœç´¢æ ‘ã€‚ è¿”å›æ’å…¥åäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ è¾“å…¥æ•°æ® ä¿è¯ ï¼Œæ–°å€¼å’ŒåŸå§‹äºŒå‰æœç´¢æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å€¼éƒ½ä¸åŒã€‚</p><p>æ³¨æ„ï¼Œå¯èƒ½å­˜åœ¨å¤šç§æœ‰æ•ˆçš„æ’å…¥æ–¹å¼ï¼Œåªè¦æ ‘åœ¨æ’å…¥åä»ä¿æŒä¸ºäºŒå‰æœç´¢æ ‘å³å¯ã€‚ ä½ å¯ä»¥è¿”å› ä»»æ„æœ‰æ•ˆçš„ç»“æœ ã€‚</p><p><a href="https://leetcode.cn/problems/insert-into-a-binary-search-tree">https://leetcode.cn/problems/insert-into-a-binary-search-tree</a></p><h3 id="æ€è·¯-29"><a href="#æ€è·¯-29" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ ‘ã€‚</span><br><span class="line">2.å¦‚æœæ’å…¥å€¼å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™å¾€å³å­æ ‘éå†ï¼›å¦åˆ™ï¼Œå¾€å·¦å­æ ‘éå†ã€‚</span><br><span class="line">3.å¦‚æœéå†åˆ°ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œåˆ™æ’å…¥æ–°èŠ‚ç‚¹å¹¶è·³å‡ºå¾ªç¯ã€‚</span><br><span class="line">4.è¿”å›æ ¹èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -32"><a href="#ä»£ç -32" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">insertIntoBST</span><span class="params">(TreeNode root, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹å¹¶è¿”å›</span></span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">// å¦åˆ™ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ ‘</span></span><br><span class="line">        TreeNode p=root;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ’å…¥å€¼å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™å¾€å³å­æ ‘éå†</span></span><br><span class="line">            <span class="keyword">if</span>(val&gt;p.val)&#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå³å­æ ‘ä¸ºç©ºï¼Œåˆ™æ’å…¥æ–°èŠ‚ç‚¹å¹¶è·³å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">if</span>(p.right==<span class="literal">null</span>) &#123;</span><br><span class="line">                    p.right=<span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦åˆ™ï¼Œç»§ç»­å¾€å³å­æ ‘éå†</span></span><br><span class="line">                <span class="keyword">else</span> p=p.right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ’å…¥å€¼å°äºç­‰äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™å¾€å·¦å­æ ‘éå†</span></span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// å¦‚æœå·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™æ’å…¥æ–°èŠ‚ç‚¹å¹¶è·³å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">if</span>(p.left==<span class="literal">null</span>)&#123;</span><br><span class="line">                    p.left=<span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦åˆ™ï¼Œç»§ç»­å¾€å·¦å­æ ‘éå†</span></span><br><span class="line">                <span class="keyword">else</span> p=p.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹"><a href="#åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹"></a>åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹</h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªå€¼ keyï¼Œåˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„Â keyÂ å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶ä¿è¯äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸å˜ã€‚è¿”å›äºŒå‰æœç´¢æ ‘ï¼ˆæœ‰å¯èƒ½è¢«æ›´æ–°ï¼‰çš„æ ¹èŠ‚ç‚¹çš„å¼•ç”¨ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œåˆ é™¤èŠ‚ç‚¹å¯åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š</p><p>é¦–å…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼›<br>å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ é™¤å®ƒã€‚</p><p><a href="https://leetcode.cn/problems/delete-node-in-a-bst">https://leetcode.cn/problems/delete-node-in-a-bst</a></p><h3 id="æ€è·¯-30"><a href="#æ€è·¯-30" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</span><br><span class="line">2.å¦‚æœå¾…åˆ é™¤èŠ‚ç‚¹çš„å€¼å°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™ä»å·¦å­æ ‘ä¸­åˆ é™¤ï¼›å¦‚æœå¾…åˆ é™¤èŠ‚ç‚¹çš„å€¼å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™ä»å³å­æ ‘ä¸­åˆ é™¤ã€‚</span><br><span class="line">if(key &lt; root.val) root.left = deleteNode(root.left, key);</span><br><span class="line">3.å¦‚æœæ‰¾åˆ°äº†å¾…åˆ é™¤èŠ‚ç‚¹ï¼Œåˆ™ï¼š</span><br><span class="line">    å¦‚æœè¯¥èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™è¿”å›å³å­æ ‘ã€‚</span><br><span class="line">    å¦‚æœè¯¥èŠ‚ç‚¹çš„å³å­æ ‘ä¸ºç©ºï¼Œåˆ™è¿”å›å·¦å­æ ‘ã€‚</span><br><span class="line">    å¦‚æœè¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘å‡ä¸ä¸ºç©ºï¼Œåˆ™ï¼š</span><br><span class="line">        æ‰¾åˆ°å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ã€‚</span><br><span class="line">        å°†å·¦å­æ ‘æ¥åˆ°å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Šã€‚</span><br><span class="line">        è¿”å›å³å­æ ‘ã€‚</span><br><span class="line">4.è¿”å›æ ¹èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -33"><a href="#ä»£ç -33" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">deleteNode</span><span class="params">(TreeNode root, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; root.val) root.left = deleteNode(root.left, key);<span class="comment">//ä»å·¦å­æ ‘ä¸­åˆ é™¤</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; root.val) root.right = deleteNode(root.right, key);<span class="comment">//ä»å³å­æ ‘ä¸­åˆ é™¤</span></span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">//æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(root.left == <span class="literal">null</span>) <span class="keyword">return</span> root.right;<span class="comment">//å·¦å­æ ‘ä¸ºç©ºï¼Œè¿”å›å³å­æ ‘</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(root.right == <span class="literal">null</span>) <span class="keyword">return</span> root.left;<span class="comment">//å³å­æ ‘ä¸ºç©ºï¼Œè¿”å›å·¦å­æ ‘</span></span><br><span class="line">            <span class="comment">//å·¦å³å­æ ‘å‡ä¸ä¸ºç©º</span></span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">p</span> <span class="operator">=</span> root.right;</span><br><span class="line">            <span class="keyword">while</span>(p.left != <span class="literal">null</span>) p = p.left;<span class="comment">//æ‰¾åˆ°å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹</span></span><br><span class="line">            p.left = root.left;<span class="comment">//å°†å·¦å­æ ‘æ¥åˆ°å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Š</span></span><br><span class="line">            <span class="keyword">return</span> root.right;<span class="comment">//è¿”å›å³å­æ ‘</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®å‰ªäºŒå‰æœç´¢æ ‘"><a href="#ä¿®å‰ªäºŒå‰æœç´¢æ ‘" class="headerlink" title="ä¿®å‰ªäºŒå‰æœç´¢æ ‘"></a>ä¿®å‰ªäºŒå‰æœç´¢æ ‘</h2><p>ç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼ŒåŒæ—¶ç»™å®šæœ€å°è¾¹ç•Œlow å’Œæœ€å¤§è¾¹ç•Œ highã€‚é€šè¿‡ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å€¼åœ¨[low, high]ä¸­ã€‚ä¿®å‰ªæ ‘ ä¸åº”è¯¥Â æ”¹å˜ä¿ç•™åœ¨æ ‘ä¸­çš„å…ƒç´ çš„ç›¸å¯¹ç»“æ„ (å³ï¼Œå¦‚æœæ²¡æœ‰è¢«ç§»é™¤ï¼ŒåŸæœ‰çš„çˆ¶ä»£å­ä»£å…³ç³»éƒ½åº”å½“ä¿ç•™)ã€‚ å¯ä»¥è¯æ˜ï¼Œå­˜åœ¨Â å”¯ä¸€çš„ç­”æ¡ˆÂ ã€‚</p><p>æ‰€ä»¥ç»“æœåº”å½“è¿”å›ä¿®å‰ªå¥½çš„äºŒå‰æœç´¢æ ‘çš„æ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹å¯èƒ½ä¼šæ ¹æ®ç»™å®šçš„è¾¹ç•Œå‘ç”Ÿæ”¹å˜ã€‚</p><p><a href="https://leetcode.cn/problems/trim-a-binary-search-tree">https://leetcode.cn/problems/trim-a-binary-search-tree</a></p><h3 id="æ€è·¯-31"><a href="#æ€è·¯-31" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</span><br><span class="line">2.å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å¤§äº highï¼Œåˆ™ä¿®å‰ªå·¦å­æ ‘ã€‚</span><br><span class="line">3.å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å°äº lowï¼Œåˆ™ä¿®å‰ªå³å­æ ‘ã€‚</span><br><span class="line">4.å¦åˆ™ï¼Œä¿®å‰ªå·¦å³å­æ ‘ã€‚</span><br><span class="line">5.å›æ ¹èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -34"><a href="#ä»£ç -34" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">trimBST</span><span class="params">(TreeNode root, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å¤§äº highï¼Œåˆ™ä¿®å‰ªå·¦å­æ ‘ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(root.val&gt;high) <span class="keyword">return</span> trimBST(root.left,low,high);<span class="comment">//è¿™ä¸€æ­¥å³æ˜¯ä¿®å‰ªè¿‡ç¨‹</span></span><br><span class="line">        <span class="comment">// å¦‚æœæ ¹èŠ‚ç‚¹çš„å€¼å°äº lowï¼Œåˆ™ä¿®å‰ªå³å­æ ‘ã€‚</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(root.val&lt;low) <span class="keyword">return</span> trimBST(root.right,low,high);</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ï¼Œä¿®å‰ªå·¦å³å­æ ‘ã€‚</span></span><br><span class="line">            root.left=trimBST(root.left,low,high);</span><br><span class="line">            root.right=trimBST(root.right,low,high);</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘"><a href="#å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘" class="headerlink" title="å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘"></a>å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ å‡åº æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ é«˜åº¦å¹³è¡¡ äºŒå‰æœç´¢æ ‘ã€‚</p><p>é«˜åº¦å¹³è¡¡ äºŒå‰æ ‘æ˜¯ä¸€æ£µæ»¡è¶³ã€Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€çš„äºŒå‰æ ‘ã€‚</p><p><a href="https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree">https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree</a></p><h3 id="æ€è·¯-32"><a href="#æ€è·¯-32" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ int[] numsï¼Œç”¨äºå­˜å‚¨è¾“å…¥çš„æœ‰åºæ•°ç»„ã€‚</span><br><span class="line">2.åœ¨ sortedArrayToBST æ–¹æ³•ä¸­ï¼Œå°† nums èµ‹å€¼ä¸ºè¾“å…¥çš„æœ‰åºæ•°ç»„ï¼Œè°ƒç”¨ build æ–¹æ³•æ„å»ºå¹³è¡¡äºŒå‰æœç´¢æ ‘å¹¶è¿”å›æ ¹èŠ‚ç‚¹ã€‚</span><br><span class="line">3.åœ¨ build æ–¹æ³•ä¸­ï¼Œå¦‚æœèµ·å§‹ä¸‹æ ‡å¤§äºç»“æŸä¸‹æ ‡ï¼Œåˆ™è¿”å› nullã€‚</span><br><span class="line">4.æ‰¾åˆ°ä¸­é—´ä½ç½®çš„ä¸‹æ ‡ï¼Œå°†è¯¥ä½ç½®çš„å€¼ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼ã€‚</span><br><span class="line">5.é€’å½’æ„å»ºå·¦å­æ ‘ï¼Œèµ·å§‹ä¸‹æ ‡ä¸º startï¼Œç»“æŸä¸‹æ ‡ä¸º (start+end)/2-1ã€‚</span><br><span class="line">6.é€’å½’æ„å»ºå³å­æ ‘ï¼Œèµ·å§‹ä¸‹æ ‡ä¸º (start+end)/2+1ï¼Œç»“æŸä¸‹æ ‡ä¸º endã€‚</span><br><span class="line">7.è¿”å›å½“å‰èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -35"><a href="#ä»£ç -35" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] nums;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">sortedArrayToBST</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums=nums;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ build æ–¹æ³•æ„å»ºå¹³è¡¡äºŒå‰æœç´¢æ ‘å¹¶è¿”å›æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> build(<span class="number">0</span>,nums.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">build</span><span class="params">(<span class="type">int</span> start,<span class="type">int</span> end)</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœèµ·å§‹ä¸‹æ ‡å¤§äºç»“æŸä¸‹æ ‡ï¼Œåˆ™è¿”å› null</span></span><br><span class="line">        <span class="keyword">if</span>(start&gt;end) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°ä¸­é—´ä½ç½®çš„ä¸‹æ ‡ï¼Œå°†è¯¥ä½ç½®çš„å€¼ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        TreeNode node= <span class="keyword">new</span> <span class="title class_">TreeNode</span>(nums[(start+end)/<span class="number">2</span>]);</span><br><span class="line">        <span class="comment">// é€’å½’æ„å»ºå·¦å­æ ‘ï¼Œèµ·å§‹ä¸‹æ ‡ä¸º startï¼Œç»“æŸä¸‹æ ‡ä¸º (start+end)/2-1</span></span><br><span class="line">        node.left=build(start,(start+end)/<span class="number">2</span>-<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// é€’å½’æ„å»ºå³å­æ ‘ï¼Œèµ·å§‹ä¸‹æ ‡ä¸º (start+end)/2+1ï¼Œç»“æŸä¸‹æ ‡ä¸º end</span></span><br><span class="line">        node.right=build((start+end)/<span class="number">2</span>+<span class="number">1</span>,end);</span><br><span class="line">        <span class="comment">// è¿”å›å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘"><a href="#æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘" class="headerlink" title="æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘"></a>æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘</h2><p>ç»™å‡ºäºŒå‰ æœç´¢ æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ nodeÂ çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äºÂ node.valÂ çš„å€¼ä¹‹å’Œã€‚</p><p>æé†’ä¸€ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘æ»¡è¶³ä¸‹åˆ—çº¦æŸæ¡ä»¶ï¼š</p><p>èŠ‚ç‚¹çš„å·¦å­æ ‘ä»…åŒ…å«é”® å°äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚<br>èŠ‚ç‚¹çš„å³å­æ ‘ä»…åŒ…å«é”® å¤§äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚<br>å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p><p><a href="https://leetcode.cn/problems/convert-bst-to-greater-tree/">https://leetcode.cn/problems/convert-bst-to-greater-tree/</a></p><h3 id="æ€è·¯-33"><a href="#æ€è·¯-33" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.ä»å¤§åˆ°å°éå†ï¼Œå¤§çš„èŠ‚ç‚¹ç´¯åŠ å³å¯ï¼Œä½¿ç”¨é€’å½’ï¼Œå³ä¸­å·¦</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -36"><a href="#ä»£ç -36" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">convertBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        convertBST(root.right);</span><br><span class="line">        sum+=root.val;</span><br><span class="line">        root.val=sum;</span><br><span class="line">        convertBST(root.left);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCodeåˆ·é¢˜ï¼šæ•°ç»„ã€é“¾è¡¨ã€å“ˆå¸Œè¡¨ã€å­—ç¬¦ä¸²ã€åŒæŒ‡é’ˆ</title>
    <link href="/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E6%95%B0%E7%BB%84%E3%80%81%E9%93%BE%E8%A1%A8%E3%80%81%E5%93%88%E5%B8%8C%E8%A1%A8%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    <url>/2023/05/20/LeetCode%E5%88%B7%E9%A2%98%EF%BC%9A%E6%95%B0%E7%BB%84%E3%80%81%E9%93%BE%E8%A1%A8%E3%80%81%E5%93%88%E5%B8%8C%E8%A1%A8%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E5%8F%8C%E6%8C%87%E9%92%88/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h2><p>ç»™å®šä¸€ä¸ªÂ nÂ ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„Â nums å’Œä¸€ä¸ªç›®æ ‡å€¼Â target Â ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢Â numsÂ ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚</p><p><a href="https://leetcode.cn/problems/binary-search">https://leetcode.cn/problems/binary-search</a></p><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.åŒºé—´å®šä¹‰</span><br><span class="line">å®šä¹‰targetåœ¨[left, right]åŒºé—´:</span><br><span class="line">    right=nums.length-1</span><br><span class="line">    while(left&lt;=right)</span><br><span class="line"></span><br><span class="line">å®šä¹‰targetåœ¨[left, right)åŒºé—´:</span><br><span class="line">    right=nums.length</span><br><span class="line">    while(left&lt;right)</span><br><span class="line"></span><br><span class="line">2.ç”¨middleå’Œtargetæ¯”è¾ƒ</span><br><span class="line">3.è°ƒæ•´left or right,</span><br><span class="line">4.é‡æ–°è®¡ç®—middle</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> middle=right/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[middle]==target)&#123;</span><br><span class="line">                <span class="keyword">return</span> middle;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[middle]&gt;target)&#123;</span><br><span class="line">                right=middle-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æœç´¢æ’å…¥ä½ç½®"><a href="#æœç´¢æ’å…¥ä½ç½®" class="headerlink" title="æœç´¢æ’å…¥ä½ç½®"></a>æœç´¢æ’å…¥ä½ç½®</h2><p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚</p><p>è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚</p><p><a href="https://leetcode.cn/problems/search-insert-position">https://leetcode.cn/problems/search-insert-position</a></p><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.åŒºé—´å®šä¹‰</span><br><span class="line">å®šä¹‰targetåœ¨[left, right]åŒºé—´:</span><br><span class="line">    right=nums.length-1</span><br><span class="line">    while(left&lt;=right)</span><br><span class="line">2.ç»“æŸæ¡ä»¶</span><br><span class="line">left&gt;rightï¼Œå³left=right+1</span><br><span class="line">æ­¤æ—¶leftå·¦è¾¹çš„å€¼å…¨éƒ¨å°äºtarget,å› æ­¤targetåº”è¯¥åœ¨leftæ‰€åœ¨ä½ç½®</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> middle=right/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[middle]&lt;target)&#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;<span class="comment">//nums[middle]&gt;=target</span></span><br><span class="line">                right=middle-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æœ€åä¸€æ¬¡å¾ªç¯å¼€å§‹å‰left=right=middle</span></span><br><span class="line">        <span class="comment">//leftæœ€ç»ˆéƒ½ç­‰äºright+1</span></span><br><span class="line">        <span class="comment">//leftå·¦è¾¹çš„å€¼å…¨éƒ¨å°äºtarget,å› æ­¤targetåº”è¯¥åœ¨leftæ‰€åœ¨ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</h2><p>ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å›Â [-1, -1]ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸ºÂ O(log n)Â çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><p><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array">https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array</a></p><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">äºŒåˆ†æŸ¥æ‰¾å…ƒç´ ï¼Œç„¶åå‘å‰å‘åæŸ¥æ‰¾ç›¸åŒå€¼çš„å…ƒç´ </span><br></pre></td></tr></table></figure><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] searchRange(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> result=-<span class="number">1</span>;<span class="comment">//è®°å½•äºŒåˆ†æŸ¥æ‰¾ç»“æœ</span></span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[middle]==target)&#123;</span><br><span class="line">                result=middle;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(nums[middle]&lt;target)&#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right=middle-<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(result==-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å¾€å³æ‰¾</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=result;i&lt;nums.length;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]==nums[result])&#123;</span><br><span class="line">                    right=i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¾€å·¦æ‰¾</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=result;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]==nums[result])&#123;</span><br><span class="line">                    left=i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;left,right&#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="x-çš„å¹³æ–¹æ ¹"><a href="#x-çš„å¹³æ–¹æ ¹" class="headerlink" title="x çš„å¹³æ–¹æ ¹"></a>x çš„å¹³æ–¹æ ¹</h2><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•° x ï¼Œè®¡ç®—å¹¶è¿”å›Â xÂ çš„ ç®—æœ¯å¹³æ–¹æ ¹ ã€‚</p><p>ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™ æ•´æ•°éƒ¨åˆ† ï¼Œå°æ•°éƒ¨åˆ†å°†è¢« èˆå» ã€‚</p><p>æ³¨æ„ï¼šä¸å…è®¸ä½¿ç”¨ä»»ä½•å†…ç½®æŒ‡æ•°å‡½æ•°å’Œç®—ç¬¦ï¼Œä¾‹å¦‚ pow(x, 0.5) æˆ–è€… x ** 0.5 ã€‚</p><p><a href="https://leetcode.cn/problems/sqrtx">https://leetcode.cn/problems/sqrtx</a></p><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨0-x/2ä¹‹é—´äºŒåˆ†æŸ¥æ‰¾</span><br><span class="line">2.x=1æ—¶,right=0æ˜¯é”™è¯¯çš„ä¸€ç§æƒ…å†µ</span><br><span class="line">3.(long)middle*middle&lt;xæ¯”è¾ƒæ—¶éœ€è¦åšç±»å‹è½¬æ¢ï¼Œintæ˜¯ä¸å¤Ÿçš„</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -3"><a href="#ä»£ç -3" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mySqrt</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=x/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(right==<span class="number">0</span>)&#123;</span><br><span class="line">            right=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> middle=right/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>((<span class="type">long</span>)middle*middle==x)&#123;</span><br><span class="line">                <span class="keyword">return</span> middle;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((<span class="type">long</span>)middle*middle&lt;x)&#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right=middle-<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ­¤æ—¶left=right+1</span></span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°"><a href="#æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°" class="headerlink" title="æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°"></a>æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•°</h2><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° num ã€‚å¦‚æœ num æ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false ã€‚</p><p>å®Œå…¨å¹³æ–¹æ•° æ˜¯ä¸€ä¸ªå¯ä»¥å†™æˆæŸä¸ªæ•´æ•°çš„å¹³æ–¹çš„æ•´æ•°ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå¯ä»¥å†™æˆæŸä¸ªæ•´æ•°å’Œè‡ªèº«çš„ä¹˜ç§¯ã€‚</p><p>ä¸èƒ½ä½¿ç”¨ä»»ä½•å†…ç½®çš„åº“å‡½æ•°ï¼Œå¦‚Â  sqrt ã€‚</p><p><a href="https://leetcode.cn/problems/valid-perfect-square">https://leetcode.cn/problems/valid-perfect-square</a></p><h3 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.äºŒåˆ†æŸ¥æ‰¾1-num/2</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -4"><a href="#ä»£ç -4" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPerfectSquare</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=num/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(right==<span class="number">0</span>)&#123;</span><br><span class="line">            right=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>((<span class="type">long</span>)middle*middle==num)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((<span class="type">long</span>)middle*middle&lt;num)&#123;</span><br><span class="line">                left=middle+<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right=middle-<span class="number">1</span>;</span><br><span class="line">                middle=(left+right)/<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ç§»é™¤å…ƒç´ "><a href="#ç§»é™¤å…ƒç´ " class="headerlink" title="ç§»é™¤å…ƒç´ "></a>ç§»é™¤å…ƒç´ </h2><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ numsÂ å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äºÂ valÂ çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚</p><p>å…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p><p><a href="https://leetcode.cn/problems/remove-element">https://leetcode.cn/problems/remove-element</a></p><h3 id="æ€è·¯-5"><a href="#æ€è·¯-5" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.éå†ä¸€éæ•°ç»„ï¼ŒæŠŠéœ€è¦ä¿ç•™çš„å€¼é‡æ–°å†™å…¥æ•°ç»„</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -5"><a href="#ä»£ç -5" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeElement</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=val)&#123;</span><br><span class="line">                nums[left++]=nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a>åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</h2><p>ç»™ä½ ä¸€ä¸ª å‡åºæ’åˆ— çš„æ•°ç»„ nums ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  åªå‡ºç°ä¸€æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚å…ƒç´ çš„ ç›¸å¯¹é¡ºåº åº”è¯¥ä¿æŒ ä¸€è‡´ ã€‚ç„¶åè¿”å› nums ä¸­å”¯ä¸€å…ƒç´ çš„ä¸ªæ•°ã€‚</p><p>è€ƒè™‘ nums çš„å”¯ä¸€å…ƒç´ çš„æ•°é‡ä¸º k ï¼Œä½ éœ€è¦åšä»¥ä¸‹äº‹æƒ…ç¡®ä¿ä½ çš„é¢˜è§£å¯ä»¥è¢«é€šè¿‡ï¼š</p><p>æ›´æ”¹æ•°ç»„ nums ï¼Œä½¿ nums çš„å‰ k ä¸ªå…ƒç´ åŒ…å«å”¯ä¸€å…ƒç´ ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æœ€åˆåœ¨ nums ä¸­å‡ºç°çš„é¡ºåºæ’åˆ—ã€‚numsÂ çš„å…¶ä½™å…ƒç´ ä¸ nums çš„å¤§å°ä¸é‡è¦ã€‚<br>è¿”å› kÂ ã€‚</p><p><a href="https://leetcode.cn/problems/remove-duplicates-from-sorted-array">https://leetcode.cn/problems/remove-duplicates-from-sorted-array</a></p><h3 id="æ€è·¯-6"><a href="#æ€è·¯-6" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.éå†ä¸€éæ•°ç»„ï¼ŒæŠŠéœ€è¦ä¿ç•™çš„å€¼é‡æ–°å†™å…¥æ•°ç»„</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -6"><a href="#ä»£ç -6" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=nums[left])&#123;</span><br><span class="line">                nums[++left]=nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="ç§»åŠ¨é›¶"><a href="#ç§»åŠ¨é›¶" class="headerlink" title="ç§»åŠ¨é›¶"></a>ç§»åŠ¨é›¶</h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ numsï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ 0 ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚</p><p>è¯·æ³¨æ„ ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚<br><a href="https://leetcode.cn/problems/move-zeroes/">https://leetcode.cn/problems/move-zeroes/</a></p><h3 id="æ€è·¯-7"><a href="#æ€è·¯-7" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.éå†ä¸€éæ•°ç»„ï¼ŒæŠŠéœ€è¦ä¿ç•™çš„å€¼é‡æ–°å†™å…¥æ•°ç»„</span><br><span class="line">2.å‰©ä½™éƒ¨åˆ†å¡«0</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -7"><a href="#ä»£ç -7" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=<span class="number">0</span>)&#123;</span><br><span class="line">                nums[left++]=nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=left;i&lt;nums.length;i++)&#123;</span><br><span class="line">            nums[i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²"><a href="#æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²" class="headerlink" title="æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²"></a>æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²</h2><p>ç»™å®š s å’Œ t ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå½“å®ƒä»¬åˆ†åˆ«è¢«è¾“å…¥åˆ°ç©ºç™½çš„æ–‡æœ¬ç¼–è¾‘å™¨åï¼Œå¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› true ã€‚# ä»£è¡¨é€€æ ¼å­—ç¬¦ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœå¯¹ç©ºæ–‡æœ¬è¾“å…¥é€€æ ¼å­—ç¬¦ï¼Œæ–‡æœ¬ç»§ç»­ä¸ºç©ºã€‚<br><a href="https://leetcode.cn/problems/backspace-string-compare">https://leetcode.cn/problems/backspace-string-compare</a></p><h3 id="æ€è·¯-8"><a href="#æ€è·¯-8" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.å†™ä¸€ä¸ªconvertè½¬æ¢å‡½æ•°ï¼Œä»åå¾€å‰éå†</span><br><span class="line">2.ä½¿ç”¨toCharArray()æŠŠå­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦æ•°ç»„</span><br><span class="line">3.ä½¿ç”¨StringBuilderå¯å˜å­—ç¬¦ä¸²æ¥æ”¶æœ€ç»ˆè½¬æ¢çš„å­—ç¬¦ä¸²ç»“æœ</span><br><span class="line">4.æŠŠéœ€è¦ä¿ç•™çš„å­—ç¬¦é‡æ–°å†™è¿›StringBuilder</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -8"><a href="#ä»£ç -8" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">backspaceCompare</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">        <span class="comment">// å°† s å’Œ t è½¬æ¢ä¸ºæœ€ç»ˆå½¢å¼ï¼Œæ¯”è¾ƒå®ƒä»¬æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">return</span> convert(s).equals(convert(t));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæœ€ç»ˆå½¢å¼</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">convert</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();<span class="comment">//å¯å˜å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="type">char</span>[] cs = s.toCharArray();<span class="comment">//å­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// è®°å½•å½“å‰éœ€è¦åˆ é™¤çš„å­—ç¬¦æ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cs.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cs[i] == <span class="string">&#x27;#&#x27;</span>) &#123; <span class="comment">// å¦‚æœæ˜¯é€€æ ¼ç¬¦ï¼Œåˆ™éœ€è¦åˆ é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">                size++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size == <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœä¸æ˜¯é€€æ ¼ç¬¦ï¼Œå¹¶ä¸”æ²¡æœ‰éœ€è¦åˆ é™¤çš„å­—ç¬¦ï¼Œåˆ™å°†è¯¥å­—ç¬¦åŠ å…¥æœ€ç»ˆå­—ç¬¦ä¸²ä¸­</span></span><br><span class="line">                sb.append(cs[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦‚æœä¸æ˜¯é€€æ ¼ç¬¦ï¼Œä½†æœ‰éœ€è¦åˆ é™¤çš„å­—ç¬¦ï¼Œåˆ™è·³è¿‡è¯¥å­—ç¬¦</span></span><br><span class="line">                size--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString(); <span class="comment">// è¿”å›æœ€ç»ˆå­—ç¬¦ä¸²</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ‰åºæ•°ç»„çš„å¹³æ–¹"><a href="#æœ‰åºæ•°ç»„çš„å¹³æ–¹" class="headerlink" title="æœ‰åºæ•°ç»„çš„å¹³æ–¹"></a>æœ‰åºæ•°ç»„çš„å¹³æ–¹</h2><p>ç»™ä½ ä¸€ä¸ªæŒ‰ éé€’å‡é¡ºåº æ’åºçš„æ•´æ•°æ•°ç»„ numsï¼Œè¿”å› æ¯ä¸ªæ•°å­—çš„å¹³æ–¹ ç»„æˆçš„æ–°æ•°ç»„ï¼Œè¦æ±‚ä¹ŸæŒ‰ éé€’å‡é¡ºåº æ’åºã€‚<br><a href="https://leetcode.cn/problems/squares-of-a-sorted-array/">https://leetcode.cn/problems/squares-of-a-sorted-array/</a></p><h3 id="æ€è·¯-9"><a href="#æ€è·¯-9" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.æœ€å¤§çš„åœ¨ä¸¤è¾¹ï¼Œä¸¤ä¸ªæŒ‡é’ˆæŒ‡ä¸¤è¾¹</span><br><span class="line">2.å¾ªç¯æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆï¼Œå“ªè¾¹ç»å¯¹å€¼å¤§å°±é€‰å“ªè¾¹</span><br><span class="line">3.åˆ›å»ºç­‰é•¿æ–°æ•°ç»„ï¼Œä»æœ«å°¾å¼€å§‹æ·»åŠ </span><br></pre></td></tr></table></figure><h3 id="ä»£ç -9"><a href="#ä»£ç -9" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] sortedSquares(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//å¼€ä¸€ä¸ªç­‰é•¿æ–°æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] result=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        <span class="type">int</span> k=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(Math.abs(nums[left])&lt;=Math.abs(nums[right]))&#123;</span><br><span class="line">                result[k--]=nums[right]*nums[right];</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                result[k--]=nums[left]*nums[left];</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>é•¿åº¦æœ€å°çš„å­æ•°ç»„</h2><p>ç»™å®šä¸€ä¸ªå«æœ‰Â nÂ ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p><p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„Â [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚<br><a href="https://leetcode.cn/problems/minimum-size-subarray-sum">https://leetcode.cn/problems/minimum-size-subarray-sum</a><br>ç¤ºä¾‹1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-10"><a href="#æ€è·¯-10" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.æ»‘åŠ¨çª—å£,åŒæŒ‡é’ˆ</span><br><span class="line">2.ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å¼€å¤´,rightå‘å³ç§»åŠ¨ç›´åˆ°å­æ•°ç»„å’Œ&gt;=target,ç„¶åleftå‘å³ç§»åŠ¨ï¼Œç›´åˆ°å­æ•°ç»„å’Œ&lt;target,æœŸé—´ä¸æ–­æ›´æ–°æœ€å°å­æ•°ç»„å’Œ</span><br><span class="line">3.ä¸¤å±‚whileï¼Œç¬¬ä¸€å±‚æ§åˆ¶çª—å£å³æ‰©ï¼Œç¬¬äºŒå±‚æ§åˆ¶å·¦ç¼©</span><br><span class="line">4.intæœ€å¤§å€¼Integer.MAX_VALUE</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -10"><a href="#ä»£ç -10" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> result=Integer.MAX_VALUE;<span class="comment">//æœ€å°å­æ•°ç»„é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;<span class="comment">//å­æ•°ç»„å…ƒç´ å’Œ</span></span><br><span class="line">        <span class="keyword">while</span>(right&lt;nums.length)&#123;</span><br><span class="line">            sum+=nums[right++];<span class="comment">//çª—å£å³æ‰©</span></span><br><span class="line">            <span class="keyword">while</span>(sum&gt;=target)&#123;<span class="comment">//çª—å£å·¦ç¼©</span></span><br><span class="line">                <span class="comment">//è¾¾åˆ°targetæ¡ä»¶ï¼Œæ¯”è¾ƒå­æ•°ç»„é•¿åº¦</span></span><br><span class="line">                <span class="keyword">if</span>(right-left&lt;result)&#123;</span><br><span class="line">                    result=right-left;<span class="comment">//rightè‡ªå¢äº†ï¼Œç›¸å‡æ­£å¥½æ˜¯é•¿åº¦</span></span><br><span class="line">                &#125;</span><br><span class="line">                sum-=nums[left++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(result==Integer.MAX_VALUE)&#123;<span class="comment">//targetå¤ªå¤§ï¼Œæ•´ä¸ªæ•°ç»„éƒ½æ²¡æ³•æ»¡è¶³</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="èºæ—‹çŸ©é˜µ-II"><a href="#èºæ—‹çŸ©é˜µ-II" class="headerlink" title="èºæ—‹çŸ©é˜µ II"></a>èºæ—‹çŸ©é˜µ II</h2><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« 1 åˆ° n2 æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ n x n æ­£æ–¹å½¢çŸ©é˜µ matrix ã€‚<br><a href="https://leetcode.cn/problems/spiral-matrix-ii/">https://leetcode.cn/problems/spiral-matrix-ii/</a></p><h3 id="æ€è·¯-11"><a href="#æ€è·¯-11" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.æ¨¡æ‹Ÿè¿‡ç¨‹</span><br><span class="line">2.å»ºç«‹ä¸Šä¸‹å·¦å³è¾¹ç•Œ</span><br><span class="line">3.whileå¡«å……æ¬¡æ•°ï¼Œå§‹ç»ˆæŒ‰ç…§å³ä¸‹å·¦ä¸Šçš„é¡ºåºå¡«å†™ï¼Œå¡«å®Œä¸€è¾¹å°±æ›´æ–°è¾¹ç•Œ</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -11"><a href="#ä»£ç -11" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = n - <span class="number">1</span>, t = <span class="number">0</span>, b = n - <span class="number">1</span>; <span class="comment">// lã€rã€tã€båˆ†åˆ«è¡¨ç¤ºå½“å‰èºæ—‹çŸ©é˜µçš„å·¦è¾¹ç•Œã€å³è¾¹ç•Œã€ä¸Šè¾¹ç•Œå’Œä¸‹è¾¹ç•Œ</span></span><br><span class="line">    <span class="type">int</span>[][] mat = <span class="keyword">new</span> <span class="title class_">int</span>[n][n]; <span class="comment">// åˆ›å»ºä¸€ä¸ªn * nçš„äºŒç»´æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>, tar = n * n; <span class="comment">// numè¡¨ç¤ºå½“å‰è¦å¡«å……çš„æ•°å­—ï¼Œtarè¡¨ç¤ºè¦å¡«å……çš„æ•°å­—çš„æ€»ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">while</span>(num &lt;= tar)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l; i &lt;= r; i++) mat[t][i] = num++; <span class="comment">// ä»å·¦å‘å³å¡«å……æ•°å­—</span></span><br><span class="line">        t++;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> t; i &lt;= b; i++) mat[i][r] = num++; <span class="comment">// ä»ä¸Šå‘ä¸‹å¡«å……æ•°å­—</span></span><br><span class="line">        r--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> r; i &gt;= l; i--) mat[b][i] = num++; <span class="comment">// ä»å³å‘å·¦å¡«å……æ•°å­—</span></span><br><span class="line">        b--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> b; i &gt;= t; i--) mat[i][l] = num++; <span class="comment">// ä»ä¸‹å‘ä¸Šå¡«å……æ•°å­—</span></span><br><span class="line">        l++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> mat; <span class="comment">// è¿”å›å¡«å……å®Œæ•°å­—çš„äºŒç»´æ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èºæ—‹çŸ©é˜µ"><a href="#èºæ—‹çŸ©é˜µ" class="headerlink" title="èºæ—‹çŸ©é˜µ"></a>èºæ—‹çŸ©é˜µ</h2><p>ç»™ä½ ä¸€ä¸ª m è¡Œ n åˆ—çš„çŸ©é˜µ matrix ï¼Œè¯·æŒ‰ç…§ é¡ºæ—¶é’ˆèºæ—‹é¡ºåº ï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚<br><a href="https://leetcode.cn/problems/spiral-matrix/">https://leetcode.cn/problems/spiral-matrix/</a></p><h3 id="æ€è·¯-12"><a href="#æ€è·¯-12" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨resultæ¥å­˜å‚¨èºæ—‹è®¿é—®çš„å…ƒç´ </span><br><span class="line">2.æŒ‰ç…§ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ã€ä»å³åˆ°å·¦ã€ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºï¼Œä¾æ¬¡è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´ ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°resultåˆ—è¡¨ä¸­</span><br><span class="line">3.æ¯æ¬¡è®¿é—®å®Œä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œå°±éœ€è¦æ›´æ–°å¯¹åº”çš„è¾¹ç•Œå€¼</span><br><span class="line">4.æ¯è®¿é—®å®Œä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œå°±éœ€è¦åˆ¤æ–­å½“å‰æ˜¯å¦è¶Šç•Œã€‚å¦‚æœè¶Šç•Œäº†ï¼Œå°±ç›´æ¥é€€å‡ºå¾ªç¯</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -12"><a href="#ä»£ç -12" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">spiralOrder</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// ç”¨äºå­˜å‚¨èºæ—‹è®¿é—®çš„å…ƒç´ </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (matrix == <span class="literal">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> result; <span class="comment">// å¤„ç†ç‰¹æ®Šæƒ…å†µï¼ŒçŸ©é˜µä¸ºç©ºæˆ–è€…è¡Œæ•°æˆ–åˆ—æ•°ä¸º0æ—¶ï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> matrix.length, n = matrix[<span class="number">0</span>].length; <span class="comment">// è·å–çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = n - <span class="number">1</span>, t = <span class="number">0</span>, b = m - <span class="number">1</span>; <span class="comment">// åˆå§‹åŒ–ä¸Šä¸‹å·¦å³å››ä¸ªè¾¹ç•Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="comment">// ä»å·¦åˆ°å³è®¿é—®ä¸Šè¾¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l; i &lt;= r; i++) &#123;</span><br><span class="line">            result.add(matrix[t][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (++t &gt; b) <span class="keyword">break</span>; <span class="comment">// å¦‚æœä¸Šè¾¹ç•Œè¶Šè¿‡ä¸‹è¾¹ç•Œï¼Œç›´æ¥é€€å‡ºå¾ªç¯</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»ä¸Šåˆ°ä¸‹è®¿é—®å³è¾¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> t; i &lt;= b; i++) &#123;</span><br><span class="line">            result.add(matrix[i][r]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (--r &lt; l) <span class="keyword">break</span>; <span class="comment">// å¦‚æœå³è¾¹ç•Œè¶Šè¿‡å·¦è¾¹ç•Œï¼Œç›´æ¥é€€å‡ºå¾ªç¯</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»å³åˆ°å·¦è®¿é—®ä¸‹è¾¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> r; i &gt;= l; i--) &#123;</span><br><span class="line">            result.add(matrix[b][i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (--b &lt; t) <span class="keyword">break</span>; <span class="comment">// å¦‚æœä¸‹è¾¹ç•Œè¶Šè¿‡ä¸Šè¾¹ç•Œï¼Œç›´æ¥é€€å‡ºå¾ªç¯</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»ä¸‹åˆ°ä¸Šè®¿é—®å·¦è¾¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> b; i &gt;= t; i--) &#123;</span><br><span class="line">            result.add(matrix[i][l]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (++l &gt; r) <span class="keyword">break</span>; <span class="comment">// å¦‚æœå·¦è¾¹ç•Œè¶Šè¿‡å³è¾¹ç•Œï¼Œç›´æ¥é€€å‡ºå¾ªç¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result; <span class="comment">// è¿”å›èºæ—‹è®¿é—®çš„å…ƒç´ åˆ—è¡¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"><a href="#é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ" class="headerlink" title="é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ"></a>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</h2><h3 id="æ€è·¯-13"><a href="#æ€è·¯-13" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨resultæ¥å­˜å‚¨èºæ—‹è®¿é—®çš„å…ƒç´ </span><br><span class="line">2.æŒ‰ç…§ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ã€ä»å³åˆ°å·¦ã€ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºï¼Œä¾æ¬¡è®¿é—®çŸ©é˜µä¸­çš„å…ƒç´ ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°resultåˆ—è¡¨ä¸­</span><br><span class="line">3.æ¯æ¬¡è®¿é—®å®Œä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œå°±éœ€è¦æ›´æ–°å¯¹åº”çš„è¾¹ç•Œå€¼</span><br><span class="line">4.æ¯è®¿é—®å®Œä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œå°±éœ€è¦åˆ¤æ–­å½“å‰æ˜¯å¦è¶Šç•Œã€‚å¦‚æœè¶Šç•Œäº†ï¼Œå°±ç›´æ¥é€€å‡ºå¾ªç¯</span><br><span class="line">5.è€ƒè™‘ç©ºæ•°ç»„æƒ…å†µ</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -13"><a href="#ä»£ç -13" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] spiralOrder(<span class="type">int</span>[][] matrix) &#123;</span><br><span class="line">        <span class="keyword">if</span>(matrix.length==<span class="number">0</span>)<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> m=matrix.length;</span><br><span class="line">        <span class="type">int</span> n=matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span>[] result=<span class="keyword">new</span> <span class="title class_">int</span>[m*n];</span><br><span class="line">        <span class="type">int</span> num=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> t=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> b=m-<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> l=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> r=n-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(num&lt;m*n)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=l;i&lt;=r;i++)result[num++]=matrix[t][i];</span><br><span class="line">            <span class="keyword">if</span>(++t&gt;b)<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=t;i&lt;=b;i++)result[num++]=matrix[i][r];</span><br><span class="line">            <span class="keyword">if</span>(--r&lt;l)<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=r;i&gt;=l;i--)result[num++]=matrix[b][i];</span><br><span class="line">            <span class="keyword">if</span>(--b&lt;t)<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=b;i&gt;=t;i--)result[num++]=matrix[i][l];</span><br><span class="line">            <span class="keyword">if</span>(++l&gt;r)<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h1><h2 id="ç§»é™¤é“¾è¡¨å…ƒç´ "><a href="#ç§»é™¤é“¾è¡¨å…ƒç´ " class="headerlink" title="ç§»é™¤é“¾è¡¨å…ƒç´ "></a>ç§»é™¤é“¾è¡¨å…ƒç´ </h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head å’Œä¸€ä¸ªæ•´æ•° val ï¼Œè¯·ä½ åˆ é™¤é“¾è¡¨ä¸­æ‰€æœ‰æ»¡è¶³ Node.val &#x3D;&#x3D; val çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å› æ–°çš„å¤´èŠ‚ç‚¹ ã€‚<br>ç¤ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,6,3,4,5,6], val = 6</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,4,5]</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-14"><a href="#æ€è·¯-14" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.èŠ‚ç‚¹å®šä¹‰:valã€nextã€ä¸‰ä¸ªæ„é€ å‡½æ•°(ç©ºã€valã€val&amp;next) </span><br><span class="line">public class ListNode &#123;</span><br><span class="line">    int val;   </span><br><span class="line">    ListNode next;   </span><br><span class="line">    ListNode() &#123;&#125;   </span><br><span class="line">    ListNode(int val) &#123; this.val = val; &#125;   </span><br><span class="line">    ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span><br><span class="line">&#125;</span><br><span class="line">2.å¤´èŠ‚ç‚¹å•ç‹¬å¤„ç†</span><br><span class="line">3.ä¿®æ”¹next</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -14"><a href="#ä»£ç -14" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å¤´èŠ‚ç‚¹ä¸­å€¼ä¸ºvalçš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span> &amp;&amp; head.val == val) &#123;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æŒ‡é’ˆpéå†é“¾è¡¨</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> &amp;&amp; p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ä¸ºvalï¼Œå°†pçš„nextæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„nextï¼Œå³åˆ é™¤ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (p.next.val == val) &#123;</span><br><span class="line">            p.next = p.next.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™å°†pæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿”å›å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¾è®¡é“¾è¡¨"><a href="#è®¾è®¡é“¾è¡¨" class="headerlink" title="è®¾è®¡é“¾è¡¨"></a>è®¾è®¡é“¾è¡¨</h2><p>ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨å•é“¾è¡¨æˆ–è€…åŒé“¾è¡¨ï¼Œè®¾è®¡å¹¶å®ç°è‡ªå·±çš„é“¾è¡¨ã€‚</p><p>å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹åº”è¯¥å…·å¤‡ä¸¤ä¸ªå±æ€§ï¼šval å’Œ next ã€‚val æ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œnext æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ã€‚</p><p>å¦‚æœæ˜¯åŒå‘é“¾è¡¨ï¼Œåˆ™è¿˜éœ€è¦å±æ€§Â prevÂ ä»¥æŒ‡ç¤ºé“¾è¡¨ä¸­çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¸‹æ ‡ä» 0 å¼€å§‹ã€‚</p><p>å®ç° MyLinkedList ç±»ï¼š</p><p>MyLinkedList() åˆå§‹åŒ– MyLinkedList å¯¹è±¡ã€‚<br>int get(int index) è·å–é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœä¸‹æ ‡æ— æ•ˆï¼Œåˆ™è¿”å› -1 ã€‚<br>void addAtHead(int val) å°†ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰ã€‚åœ¨æ’å…¥å®Œæˆåï¼Œæ–°èŠ‚ç‚¹ä¼šæˆä¸ºé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br>void addAtTail(int val) å°†ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹è¿½åŠ åˆ°é“¾è¡¨ä¸­ä½œä¸ºé“¾è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚<br>void addAtIndex(int index, int val) å°†ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹ä¹‹å‰ã€‚å¦‚æœ index ç­‰äºé“¾è¡¨çš„é•¿åº¦ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹ä¼šè¢«è¿½åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚å¦‚æœ index æ¯”é•¿åº¦æ›´å¤§ï¼Œè¯¥èŠ‚ç‚¹å°† ä¸ä¼šæ’å…¥ åˆ°é“¾è¡¨ä¸­ã€‚<br>void deleteAtIndex(int index) å¦‚æœä¸‹æ ‡æœ‰æ•ˆï¼Œåˆ™åˆ é™¤é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹ã€‚<br><a href="https://leetcode.cn/problems/design-linked-list">https://leetcode.cn/problems/design-linked-list</a></p><h3 id="æ€è·¯-15"><a href="#æ€è·¯-15" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.å¢åŠ ä¸€ä¸ªå¤šä½™çš„å¤´èŠ‚ç‚¹</span><br><span class="line">2.æ³¨æ„ç©ºé“¾è¡¨</span><br><span class="line">3.ä½¿ç”¨sizeè®°å½•é“¾è¡¨é•¿åº¦</span><br><span class="line">4.ç€é‡å†™å¥½addAtIndex(int index, int val)ï¼Œå…¶ä»–æ–¹æ³•å¯å¤ç”¨</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -15"><a href="#ä»£ç -15" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyLinkedList</span> &#123;</span><br><span class="line">    <span class="type">int</span> size; <span class="comment">// é“¾è¡¨çš„é•¿åº¦</span></span><br><span class="line">    ListNode head; <span class="comment">// é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyLinkedList</span><span class="params">()</span> &#123; <span class="comment">// æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–é“¾è¡¨</span></span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123; <span class="comment">// è·å–é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123; <span class="comment">// ä¸‹æ ‡æ— æ•ˆï¼Œè¿”å› -1</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= index; i++) &#123; <span class="comment">// éå†æ‰¾åˆ°ç¬¬ index ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur.val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtHead</span><span class="params">(<span class="type">int</span> val)</span> &#123; <span class="comment">// åœ¨é“¾è¡¨å¤´æ’å…¥ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹</span></span><br><span class="line">        addAtIndex(<span class="number">0</span>, val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtTail</span><span class="params">(<span class="type">int</span> val)</span> &#123; <span class="comment">// åœ¨é“¾è¡¨å°¾è¿½åŠ ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹</span></span><br><span class="line">        addAtIndex(size, val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addAtIndex</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123; <span class="comment">// åœ¨é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (index &gt; size) &#123; <span class="comment">// å¦‚æœ index æ¯”é•¿åº¦æ›´å¤§ï¼Œè¯¥èŠ‚ç‚¹å°†ä¸ä¼šæ’å…¥åˆ°é“¾è¡¨ä¸­</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = Math.max(<span class="number">0</span>, index); <span class="comment">// å¦‚æœ index å°äº 0ï¼Œå°±æ’å…¥åˆ°å¤´èŠ‚ç‚¹ä¹‹å‰</span></span><br><span class="line">        size++; <span class="comment">// æ’å…¥èŠ‚ç‚¹åï¼Œé“¾è¡¨é•¿åº¦åŠ  1</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pred</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123; <span class="comment">// éå†æ‰¾åˆ°ç¬¬ index ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">            pred = pred.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">toAdd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(val); <span class="comment">// åˆ›å»ºè¦æ’å…¥çš„èŠ‚ç‚¹</span></span><br><span class="line">        toAdd.next = pred.next; <span class="comment">// å°†è¦æ’å…¥çš„èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ç¬¬ index ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        pred.next = toAdd; <span class="comment">// å°†ç¬¬ index-1 ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘è¦æ’å…¥çš„èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAtIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123; <span class="comment">// åˆ é™¤é“¾è¡¨ä¸­ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123; <span class="comment">// å¦‚æœä¸‹æ ‡æ— æ•ˆï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        size--; <span class="comment">// åˆ é™¤èŠ‚ç‚¹åï¼Œé“¾è¡¨é•¿åº¦å‡ 1</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pred</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++) &#123; <span class="comment">// éå†æ‰¾åˆ°ç¬¬ index ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">            pred = pred.next;</span><br><span class="line">        &#125;</span><br><span class="line">        pred.next = pred.next.next; <span class="comment">// å°†ç¬¬ index-1 ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ç¬¬ index+1 ä¸ªèŠ‚ç‚¹ï¼Œå³è·³è¿‡è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123; <span class="comment">// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> val; <span class="comment">// èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">    ListNode next; <span class="comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ListNode</span><span class="params">(<span class="type">int</span> val)</span> &#123; <span class="comment">// æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–èŠ‚ç‚¹</span></span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h2><p>ç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚<br><a href="https://leetcode.cn/problems/reverse-linked-list/">https://leetcode.cn/problems/reverse-linked-list/</a></p><h3 id="æ€è·¯-16"><a href="#æ€è·¯-16" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆï¼Œprevã€curå’Œtmp,tmpç”¨äºæŒ‡å‘curçš„nextèŠ‚ç‚¹ï¼Œé˜²æ­¢æ–­è¿</span><br><span class="line">2.å¾ªç¯æ¡ä»¶æ˜¯cur!=null</span><br><span class="line">3.å…ˆç§»åŠ¨tmpï¼Œç„¶åè°ƒæ•´cur.nextï¼Œå†ç§»åŠ¨prevå’Œcur</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -16"><a href="#ä»£ç -16" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line"><span class="comment">//ç”³è¯·èŠ‚ç‚¹ï¼Œpreå’Œ curï¼ŒpreæŒ‡å‘null</span></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">while</span>(cur!=<span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">//è®°å½•å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">tmp = cur.next;</span><br><span class="line"><span class="comment">//ç„¶åå°†å½“å‰èŠ‚ç‚¹æŒ‡å‘pre</span></span><br><span class="line">cur.next = pre;</span><br><span class="line"><span class="comment">//preå’ŒcurèŠ‚ç‚¹éƒ½å‰è¿›ä¸€ä½</span></span><br><span class="line">pre = cur;</span><br><span class="line">cur = tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€’å½’æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">newHead</span> <span class="operator">=</span> reverseList(head.next);<span class="comment">//å…ˆåè½¬æœ€åä¸¤ä¸ªèŠ‚ç‚¹æ‰èƒ½å¾—åˆ°çœŸæ­£çš„newHaed</span></span><br><span class="line">    head.next.next = head;<span class="comment">//åä¸€èŠ‚ç‚¹çš„nextæŒ‡å‘å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    head.next = <span class="literal">null</span>;<span class="comment">//æ–­å¼€åŸæ¥çš„è¿æ¥</span></span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚<br><a href="https://leetcode.cn/problems/swap-nodes-in-pairs/">https://leetcode.cn/problems/swap-nodes-in-pairs/</a></p><h3 id="æ€è·¯-17"><a href="#æ€è·¯-17" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.if node1==null or node.next==null return head</span><br><span class="line">2.èŠ‚ç‚¹node1-&gt;node2-&gt;node3</span><br><span class="line">node2.next=node1</span><br><span class="line">node1.next=fun(node3)</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -17"><a href="#ä»£ç -17" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">swapPairs</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>)  </span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    <span class="comment">// ä¿å­˜å‰©ä½™çš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">rest</span> <span class="operator">=</span> head.next.next;</span><br><span class="line">    <span class="comment">// äº¤æ¢ç›¸é‚»çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†æ–°çš„å¤´èŠ‚ç‚¹ä¿å­˜åœ¨ newHead ä¸­</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">newHead</span> <span class="operator">=</span> head.next;</span><br><span class="line">    newHead.next = head;</span><br><span class="line">    <span class="comment">// é€’å½’è°ƒç”¨ swapPairs() å¤„ç†å‰©ä½™çš„èŠ‚ç‚¹</span></span><br><span class="line">    head.next = swapPairs(rest);</span><br><span class="line">    <span class="comment">// è¿”å›æ–°çš„å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤é“¾è¡¨çš„å¯¼æ•°ç¬¬Nä¸ªèŠ‚ç‚¹"><a href="#åˆ é™¤é“¾è¡¨çš„å¯¼æ•°ç¬¬Nä¸ªèŠ‚ç‚¹" class="headerlink" title="åˆ é™¤é“¾è¡¨çš„å¯¼æ•°ç¬¬Nä¸ªèŠ‚ç‚¹"></a>åˆ é™¤é“¾è¡¨çš„å¯¼æ•°ç¬¬Nä¸ªèŠ‚ç‚¹</h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚<br><a href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/">https://leetcode.cn/problems/remove-nth-node-from-end-of-list/</a></p><h3 id="æ€è·¯-18"><a href="#æ€è·¯-18" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.æœ€é‡è¦çš„æ˜¯æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">2.å¦‚æœè¦åˆ é™¤çš„æ˜¯å¤´ç»“ç‚¹ï¼Œä»–æ²¡æœ‰å‰ä¸€èŠ‚ç‚¹ï¼Œç‰¹æ®Šå¤„ç†</span><br><span class="line">3.å…ˆéå†ä¸€éè®¡ç®—é“¾è¡¨é•¿åº¦sizeï¼Œå¦‚æœNç­‰äºsizeï¼Œè¿”å›ç¬¬äºŒä¸ªèŠ‚ç‚¹</span><br><span class="line">4.æ‰¾åˆ°prevï¼Œä¿®æ”¹next</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -18"><a href="#ä»£ç -18" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœé“¾è¡¨åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤å¹¶è¿”å› null</span></span><br><span class="line">    <span class="keyword">if</span> (head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="comment">// è®¡ç®—é“¾è¡¨çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœè¦åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (n == size) &#123;</span><br><span class="line">        <span class="keyword">return</span> head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    p = head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ prev</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size - n; i++) &#123;</span><br><span class="line">        prev = p;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤èŠ‚ç‚¹ p</span></span><br><span class="line">    prev.next = p.next;</span><br><span class="line">    <span class="comment">// è¿”å›å¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é“¾è¡¨ç›¸äº¤"><a href="#é“¾è¡¨ç›¸äº¤" class="headerlink" title="é“¾è¡¨ç›¸äº¤"></a>é“¾è¡¨ç›¸äº¤</h2><p>ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› null ã€‚<br><a href="https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/">https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/</a></p><h3 id="æ€è·¯-19"><a href="#æ€è·¯-19" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ›å»ºå“ˆå¸Œè¡¨Set&lt;ListNode&gt; visited = new HashSet&lt;ListNode&gt;();</span><br><span class="line">2.åŠ å…¥é“¾è¡¨Açš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">3.éå†é“¾è¡¨Bï¼ŒæŸ¥çœ‹å…ƒç´ æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -19"><a href="#ä»£ç -19" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªå“ˆå¸Œé›†åˆ visited ç”¨äºå­˜æ”¾é“¾è¡¨ A ä¸­çš„èŠ‚ç‚¹ï¼Œåˆå§‹ä¸ºç©º</span></span><br><span class="line">    Set&lt;ListNode&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;ListNode&gt;();</span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨ Aï¼Œå°†å…¶ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½åŠ å…¥å“ˆå¸Œé›†åˆ visited ä¸­</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">temp</span> <span class="operator">=</span> headA;</span><br><span class="line">    <span class="keyword">while</span> (temp != <span class="literal">null</span>) &#123;</span><br><span class="line">        visited.add(temp);</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éå†é“¾è¡¨ Bï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå‡ºç°åœ¨å“ˆå¸Œé›†åˆ visited ä¸­çš„èŠ‚ç‚¹ï¼Œå³ä¸ºç›¸äº¤èŠ‚ç‚¹</span></span><br><span class="line">    temp = headB;</span><br><span class="line">    <span class="keyword">while</span> (temp != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited.contains(temp)) &#123;</span><br><span class="line">            <span class="keyword">return</span> temp;</span><br><span class="line">        &#125;</span><br><span class="line">        temp = temp.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¯å½¢é“¾è¡¨II"><a href="#ç¯å½¢é“¾è¡¨II" class="headerlink" title="ç¯å½¢é“¾è¡¨II"></a>ç¯å½¢é“¾è¡¨II</h2><p>ç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ Â headÂ ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚Â å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å›Â nullã€‚</p><p>å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚</p><p>ä¸å…è®¸ä¿®æ”¹ é“¾è¡¨ã€‚<br><a href="https://leetcode.cn/problems/linked-list-cycle-ii/submissions/">https://leetcode.cn/problems/linked-list-cycle-ii/submissions/</a></p><h3 id="æ€è·¯-20"><a href="#æ€è·¯-20" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.éå†èŠ‚ç‚¹å†™å…¥HashSetï¼Œå¦‚æœå·²ç»åŒ…å«è¯¥èŠ‚ç‚¹ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -20"><a href="#ä»£ç -20" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">detectCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    Set&lt;ListNode&gt; visited=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;ListNode&gt;();</span><br><span class="line">    ListNode p=head;</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">null</span> &amp;&amp; !visited.contains(p))&#123;</span><br><span class="line">        visited.add(p);</span><br><span class="line">        p=p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h1><h2 id="æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"><a href="#æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯" class="headerlink" title="æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯"></a>æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯</h2><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ t æ˜¯å¦æ˜¯ s çš„å­—æ¯å¼‚ä½è¯ã€‚</p><p>æ³¨æ„ï¼šè‹¥Â s å’Œ tÂ ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°éƒ½ç›¸åŒï¼Œåˆ™ç§°Â s å’Œ tÂ äº’ä¸ºå­—æ¯å¼‚ä½è¯ã€‚<br><a href="https://leetcode.cn/problems/valid-anagram">https://leetcode.cn/problems/valid-anagram</a></p><h3 id="æ€è·¯-21"><a href="#æ€è·¯-21" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.æ’åºåæ¯”è¾ƒ</span><br><span class="line">2.ç»´æŠ¤ä¸€ä¸ªé•¿åº¦26çš„æ•°ç»„ï¼Œå†™å…¥sä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œå‡å»tä¸­å­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼Œæœ‰æ•°å­—å°äº0çš„è¯è¿”å›false</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -21"><a href="#ä»£ç -21" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAnagram</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length() != t.length()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">char</span>[] str1 = s.toCharArray();</span><br><span class="line">    <span class="type">char</span>[] str2 = t.toCharArray();</span><br><span class="line">    Arrays.sort(str1);</span><br><span class="line">    Arrays.sort(str2);</span><br><span class="line">    <span class="keyword">return</span> Arrays.equals(str1, str2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAnagram</span><span class="params">(String s, String t)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length() != t.length()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] table = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">        table[s.charAt(i) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; t.length(); i++) &#123;</span><br><span class="line">        table[t.charAt(i) - <span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">        <span class="keyword">if</span> (table[t.charAt(i) - <span class="string">&#x27;a&#x27;</span>] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"><a href="#ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†" class="headerlink" title="ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†"></a>ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</h2><p>ç»™å®šä¸¤ä¸ªæ•°ç»„ nums1 å’Œ nums2 ï¼Œè¿”å› å®ƒä»¬çš„äº¤é›† ã€‚è¾“å‡ºç»“æœä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€å®šæ˜¯ å”¯ä¸€ çš„ã€‚æˆ‘ä»¬å¯ä»¥ ä¸è€ƒè™‘è¾“å‡ºç»“æœçš„é¡ºåº ã€‚<br><a href="https://leetcode.cn/problems/intersection-of-two-arrays/">https://leetcode.cn/problems/intersection-of-two-arrays/</a></p><h3 id="æ€è·¯-22"><a href="#æ€è·¯-22" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</span><br><span class="line">2.ä¸¤å±‚å¾ªç¯éå†çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(mn),ä½¿ç”¨å“ˆå¸Œé›†åˆå­˜å‚¨çš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦é™åˆ°O(m+n)</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -22"><a href="#ä»£ç -22" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] intersection(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸¤ä¸ªå“ˆå¸Œé›†åˆ set1 å’Œ set2 åˆ†åˆ«ç”¨äºå­˜æ”¾æ•°ç»„ nums1 å’Œ nums2 ä¸­çš„å…ƒç´ </span></span><br><span class="line">    Set&lt;Integer&gt; set1 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Integer&gt;();</span><br><span class="line">    Set&lt;Integer&gt; set2 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Integer&gt;();</span><br><span class="line">    <span class="comment">// éå†æ•°ç»„ nums1ï¼Œå°†å…¶ä¸­æ‰€æœ‰å…ƒç´ éƒ½åŠ å…¥å“ˆå¸Œé›†åˆ set1 ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums1) &#123;</span><br><span class="line">        set1.add(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éå†æ•°ç»„ nums2ï¼Œå°†å…¶ä¸­æ‰€æœ‰å…ƒç´ éƒ½åŠ å…¥å“ˆå¸Œé›†åˆ set2 ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums2) &#123;</span><br><span class="line">        set2.add(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ªæ–°çš„å“ˆå¸Œé›†åˆ result_set ç”¨äºå­˜æ”¾ set1 å’Œ set2 çš„äº¤é›†</span></span><br><span class="line">    Set&lt;Integer&gt; result_set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Integer&gt;();</span><br><span class="line">    <span class="comment">// æ‰¾å‡º set1 å’Œ set2 ä¸­å¤§å°è¾ƒå°çš„é‚£ä¸ªé›†åˆ min å’Œè¾ƒå¤§çš„é‚£ä¸ªé›†åˆ max</span></span><br><span class="line">    Set&lt;Integer&gt; min = (set1.size() &gt; set2.size()) ? set2 : set1;</span><br><span class="line">    Set&lt;Integer&gt; max = (set1.size() &gt; set2.size()) ? set1 : set2;</span><br><span class="line">    <span class="comment">// éå†é›†åˆ minï¼Œå¦‚æœé›†åˆ max ä¸­ä¹ŸåŒ…å«å½“å‰å…ƒç´ ï¼Œåˆ™å°†å…¶åŠ å…¥äº¤é›†é›†åˆ result_set ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : min) &#123;</span><br><span class="line">        <span class="keyword">if</span> (max.contains(num)) &#123;</span><br><span class="line">            result_set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†äº¤é›†é›†åˆè½¬åŒ–ä¸ºæ•°ç»„ result è¿”å›</span></span><br><span class="line">    <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[result_set.size()];</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : result_set) &#123;</span><br><span class="line">        result[index++] = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¿«ä¹æ•°"><a href="#å¿«ä¹æ•°" class="headerlink" title="å¿«ä¹æ•°"></a>å¿«ä¹æ•°</h2><p>ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚</p><p>ã€Œå¿«ä¹æ•°ã€Â å®šä¹‰ä¸ºï¼š</p><p>å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚<br>ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚<br>å¦‚æœè¿™ä¸ªè¿‡ç¨‹ ç»“æœä¸ºÂ 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚<br>å¦‚æœ n æ˜¯ å¿«ä¹æ•° å°±è¿”å› true ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› false ã€‚<br><a href="https://leetcode.cn/problems/happy-number">https://leetcode.cn/problems/happy-number</a></p><h3 id="æ€è·¯-23"><a href="#æ€è·¯-23" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.æœ‰æ— çº¿å¾ªç¯ï¼Œè¯´æ˜sumä¼šé‡å¤å‡ºç°</span><br><span class="line">2.å¾ªç¯è®¡ç®—sumï¼Œå†™å…¥HashSetä¸­ï¼Œå¦‚æœæœ‰é‡å¤ï¼Œè¿”å›false,å¦‚æœç»“æœä¸º1ï¼Œè¿”å›true</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -23"><a href="#ä»£ç -23" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHappy</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Set&lt;Integer&gt; set=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Integer&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!set.contains(getSum(n)))&#123;</span><br><span class="line">        n=getSum(n);</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        set.add(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">9</span>)&#123;</span><br><span class="line">        sum+=(n%<span class="number">10</span>)*(n%<span class="number">10</span>);</span><br><span class="line">        n=n/<span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sum+=n*n;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸¤æ•°ä¹‹å’Œ"><a href="#ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œ"></a>ä¸¤æ•°ä¹‹å’Œ</h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsÂ å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ targetÂ  çš„é‚£Â ä¸¤ä¸ªÂ æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚<br><a href="https://leetcode.cn/problems/two-sum/">https://leetcode.cn/problems/two-sum/</a></p><h3 id="æ€è·¯-24"><a href="#æ€è·¯-24" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸¤å±‚å¾ªç¯æšä¸¾</span><br><span class="line">2.ç¬¬äºŒå±‚å¾ªç¯ç›®çš„æ˜¯å¯»æ‰¾target-xï¼Œå¯ç”¨HashMapæ›¿ä»£</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -24"><a href="#ä»£ç -24" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p><strong>æš´åŠ›æšä¸¾</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] + nums[j] == target) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å“ˆå¸ŒMap</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; hashtable = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hashtable.containsKey(target - nums[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;hashtable.get(target - nums[i]), i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            hashtable.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››æ•°ç›¸åŠ -II"><a href="#å››æ•°ç›¸åŠ -II" class="headerlink" title="å››æ•°ç›¸åŠ  II"></a>å››æ•°ç›¸åŠ  II</h2><p>ç»™ä½ å››ä¸ªæ•´æ•°æ•°ç»„ nums1ã€nums2ã€nums3 å’Œ nums4 ï¼Œæ•°ç»„é•¿åº¦éƒ½æ˜¯ n ï¼Œè¯·ä½ è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç»„ (i, j, k, l) èƒ½æ»¡è¶³ï¼š</p><p>0 &lt;&#x3D; i, j, k, l &lt; n<br>nums1[i] + nums2[j] + nums3[k] + nums4[l] &#x3D;&#x3D; 0</p><p><a href="https://leetcode.cn/problems/4sum-ii">https://leetcode.cn/problems/4sum-ii</a></p><p><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [1,2], nums2 = [-2,-1], nums3 = [-1,2], nums4 = [0,2]</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">ä¸¤ä¸ªå…ƒç»„å¦‚ä¸‹ï¼š</span><br><span class="line">1. (0, 0, 0, 1) -&gt; nums1[0] + nums2[0] + nums3[0] + nums4[1] = 1 + (-2) + (-1) + 2 = 0</span><br><span class="line">2. (1, 1, 0, 0) -&gt; nums1[1] + nums2[1] + nums3[0] + nums4[0] = 2 + (-1) + (-1) + 0 = 0</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-25"><a href="#æ€è·¯-25" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å’Œæ‹†åˆ†ä¸ºä¸¤ç»„ï¼Œä¸€ç»„ä½¿ç”¨HashMapå­˜æ”¾ï¼Œå¦ä¸€ç»„å’ŒHashMapæ¯”è¾ƒ</span><br><span class="line">2.ä¸¤ä¸¤ç›¸åŠ åˆ†ä¸ºä¸¤ç»„çš„æ—¶é—´å¤æ‚åº¦æœ€å°:O(n^2),æš´åŠ›æ³•O(n^4),ä¸‰ä¸€åˆ†O(n^3)</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -25"><a href="#ä»£ç -25" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fourSumCount</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2, <span class="type">int</span>[] nums3, <span class="type">int</span>[] nums4)</span> &#123;</span><br><span class="line">    Map&lt;Integer,Integer&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> result=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> num1 : nums1)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num2 : nums2)&#123;</span><br><span class="line">            <span class="type">int</span> sum12=num1+num2;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(sum12))&#123;<span class="comment">//ä¸¤æ•°å’Œä¸ºkey,ç»„åˆæ•°ä¸ºvalue</span></span><br><span class="line">                map.put(sum12,map.get(sum12)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                map.put(sum12,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> num3 : nums3)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num4 : nums4)&#123;</span><br><span class="line">            <span class="type">int</span> sum34=-(num3+num4);</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(sum34))&#123;</span><br><span class="line">                result+=map.get(sum34);<span class="comment">//34ä¸­çš„æ¯ä¸€ç§ç»„åˆï¼Œå¯å¯¹åº”ABä¸­çš„å¤šç§ç»„åˆ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èµé‡‘ä¿¡"><a href="#èµé‡‘ä¿¡" class="headerlink" title="èµé‡‘ä¿¡"></a>èµé‡‘ä¿¡</h2><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼šransomNote å’Œ magazine ï¼Œåˆ¤æ–­ ransomNote èƒ½ä¸èƒ½ç”± magazine é‡Œé¢çš„å­—ç¬¦æ„æˆã€‚</p><p>å¦‚æœå¯ä»¥ï¼Œè¿”å› true ï¼›å¦åˆ™è¿”å› false ã€‚</p><p>magazine ä¸­çš„æ¯ä¸ªå­—ç¬¦åªèƒ½åœ¨ ransomNote ä¸­ä½¿ç”¨ä¸€æ¬¡ã€‚<br>å…¨æ˜¯å°å†™è‹±æ–‡å­—æ¯<br><a href="https://leetcode.cn/problems/ransom-note">https://leetcode.cn/problems/ransom-note</a></p><h3 id="æ€è·¯-26"><a href="#æ€è·¯-26" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ä½¿ç”¨é•¿åº¦ä¸º26çš„æ•°ç»„å­˜æ”¾magazineæ¯ä¸ªå­—æ¯çš„å‡ºç°æ¬¡æ•°</span><br><span class="line">2.éå†ransomNoteï¼Œå‡å»å¯¹åº”å­—æ¯çš„å‡ºç°æ¬¡æ•°ï¼Œæ¨¡æ‹Ÿä½¿ç”¨å­—æ¯ï¼Œå¦‚æœå‡åˆ°&lt;0ï¼›åˆ™false</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -26"><a href="#ä»£ç -26" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canConstruct</span><span class="params">(String ransomNote, String magazine)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] table=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;magazine.length();i++)&#123;</span><br><span class="line">        table[magazine.charAt(i)-<span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;ransomNote.length();i++)&#123;</span><br><span class="line">        table[ransomNote.charAt(i)-<span class="string">&#x27;a&#x27;</span>]--;</span><br><span class="line">        <span class="keyword">if</span>(table[ransomNote.charAt(i)-<span class="string">&#x27;a&#x27;</span>]&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰æ•°ä¹‹å’Œ"><a href="#ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œ"></a>ä¸‰æ•°ä¹‹å’Œ</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ [nums[i], nums[j], nums[k]] æ»¡è¶³ i !&#x3D; jã€i !&#x3D; k ä¸” j !&#x3D; k ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ nums[i] + nums[j] + nums[k] &#x3D;&#x3D; 0 ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p><a href="https://leetcode.cn/problems/3sum">https://leetcode.cn/problems/3sum</a></p><h3 id="æ€è·¯-27"><a href="#æ€è·¯-27" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.æ’åºï¼šé¦–å…ˆï¼Œå°†ç»™å®šçš„æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åé¢çš„æ“ä½œã€‚</span><br><span class="line">2.éå†ï¼šç„¶åï¼Œéå†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°ï¼Œå°†å…¶ä½œä¸ºä¸‰å…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œç„¶ååœ¨å…¶å³ä¾§çš„æ•°å­—ä¸­å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—ä¸‰ä¸ªæ•°çš„å’Œä¸º 0ã€‚</span><br><span class="line">3.åŒæŒ‡é’ˆï¼šå¯¹äºæ¯ä¸ªä¸‰å…ƒç»„ï¼Œä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯æ¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å¦å¤–ä¸¤ä¸ªæ•°ã€‚å·¦æŒ‡é’ˆæŒ‡å‘å½“å‰æ•°çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå³æŒ‡é’ˆæŒ‡å‘æ•°ç»„æœ«å°¾ã€‚å¦‚æœå½“å‰ä¸‰ä¸ªæ•°çš„å’Œå¤§äº 0ï¼Œåˆ™å°†å³æŒ‡é’ˆå·¦ç§»ï¼›å¦‚æœå½“å‰ä¸‰ä¸ªæ•°çš„å’Œå°äº 0ï¼Œåˆ™å°†å·¦æŒ‡é’ˆå³ç§»ï¼›å¦‚æœå½“å‰ä¸‰ä¸ªæ•°çš„å’Œç­‰äº 0ï¼Œåˆ™å°†è¯¥ä¸‰å…ƒç»„æ·»åŠ åˆ°ç­”æ¡ˆé›†åˆä¸­ã€‚</span><br><span class="line">4.å»é‡ï¼šä¸ºé¿å…é‡å¤ï¼Œéœ€è¦åœ¨æ·»åŠ ä¸‰å…ƒç»„ä¹‹å‰ï¼Œåˆ¤æ–­è¯¥ä¸‰å…ƒç»„çš„å­—ç¬¦ä¸²å½¢å¼æ˜¯å¦å·²ç»å‡ºç°è¿‡ã€‚å¦‚æœå·²ç»å‡ºç°è¿‡ï¼Œåˆ™ä¸æ·»åŠ ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -27"><a href="#ä»£ç -27" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    Arrays.sort(nums); <span class="comment">// å…ˆå°†æ•°ç»„æ’åº</span></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// å­˜æ”¾ç­”æ¡ˆä¸‰å…ƒç»„çš„åˆ—è¡¨</span></span><br><span class="line">    Set&lt;String&gt; strs = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(); <span class="comment">// å­˜æ”¾å·²ç»å‡ºç°è¿‡çš„ä¸‰å…ƒç»„çš„å­—ç¬¦ä¸²å½¢å¼çš„é›†åˆ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len - <span class="number">2</span>; i++) &#123; <span class="comment">// i éå†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°ï¼Œæœ€åä¸¤ä¸ªæ•°ä½œä¸º left å’Œ right</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) &#123; <span class="comment">// å¦‚æœå½“å‰æ•°ä¸å‰ä¸€ä¸ªæ•°ç›¸ç­‰ï¼Œå°±è·³è¿‡å½“å‰å¾ªç¯</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> i + <span class="number">1</span>; <span class="comment">// left åˆå§‹å€¼ä¸º i+1</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> len - <span class="number">1</span>; <span class="comment">// right åˆå§‹å€¼ä¸ºæ•°ç»„æœ€åä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123; <span class="comment">// åœ¨ left å°äº right çš„æƒ…å†µä¸‹å¾ªç¯</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> nums[i] + nums[left] + nums[right]; <span class="comment">// è®¡ç®—å½“å‰ä¸‰ä¸ªæ•°çš„å’Œ</span></span><br><span class="line">            <span class="keyword">if</span> (sum &gt; <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœå’Œå¤§äº 0ï¼Œå°±å°† right å·¦ç§»</span></span><br><span class="line">                right--;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœå’Œå°äº 0ï¼Œå°±å°† left å³ç§»</span></span><br><span class="line">                left++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦‚æœå’Œç­‰äº 0ï¼Œå°±æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ä¸‰å…ƒç»„</span></span><br><span class="line">                List&lt;Integer&gt; tmp = Arrays.asList(nums[i], nums[left], nums[right]); <span class="comment">// å°†ä¸‰ä¸ªæ•°æ”¾å…¥åˆ—è¡¨ä¸­</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> Integer.toString(nums[i]) + Integer.toString(nums[left]) + Integer.toString(nums[right]); <span class="comment">// å°†ä¸‰ä¸ªæ•°çš„å­—ç¬¦ä¸²å½¢å¼æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">                <span class="keyword">if</span> (!strs.contains(str)) &#123; <span class="comment">// å¦‚æœè¯¥ä¸‰å…ƒç»„å­—ç¬¦ä¸²å½¢å¼æ²¡æœ‰å‡ºç°è¿‡</span></span><br><span class="line">                    ans.add(tmp); <span class="comment">// å°†è¯¥ä¸‰å…ƒç»„æ·»åŠ åˆ°ç­”æ¡ˆåˆ—è¡¨ä¸­</span></span><br><span class="line">                    strs.add(str); <span class="comment">// å°†è¯¥ä¸‰å…ƒç»„çš„å­—ç¬¦ä¸²å½¢å¼æ·»åŠ åˆ°å·²å‡ºç°è¿‡çš„é›†åˆä¸­</span></span><br><span class="line">                &#125;</span><br><span class="line">                left++; <span class="comment">// å°† left å³ç§»</span></span><br><span class="line">                right--; <span class="comment">// å°† right å·¦ç§»</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans; <span class="comment">// è¿”å›ç­”æ¡ˆåˆ—è¡¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››æ•°ä¹‹å’Œ"><a href="#å››æ•°ä¹‹å’Œ" class="headerlink" title="å››æ•°ä¹‹å’Œ"></a>å››æ•°ä¹‹å’Œ</h2><p>ç»™ä½ ä¸€ä¸ªç”± n ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„Â nums ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ target ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”ä¸é‡å¤çš„å››å…ƒç»„Â [nums[a], nums[b], nums[c], nums[d]]Â ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š</p><p>0 &lt;&#x3D; a, b, c, dÂ &lt; n<br>aã€bã€c å’Œ d äº’ä¸ç›¸åŒ<br>nums[a] + nums[b] + nums[c] + nums[d] &#x3D;&#x3D; target<br>ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆ ã€‚</p><p><a href="https://leetcode.cn/problems/4sum">https://leetcode.cn/problems/4sum</a></p><h3 id="æ€è·¯-28"><a href="#æ€è·¯-28" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨ä¸Šä¸€é¢˜ä¸‰æ•°ä¹‹å’Œçš„åŸºç¡€ä¸Šåˆå¢åŠ äº†ä¸€å±‚å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^3)</span><br><span class="line">2.ä¸åŒä¹‹å¤„åœ¨äºtargetä¸å†ä¸º0ï¼Œä¸èƒ½ç”¨nums[i]&gt;0å°±è·³è¿‡éå†</span><br><span class="line">3.è®¡ç®—å››æ•°ä¹‹å’Œæ—¶ä¸€å®šè¦ç”¨longç±»å‹</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -28"><a href="#ä»£ç -28" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">fourSum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    Arrays.sort(nums); <span class="comment">// å¯¹æ•°ç»„è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    Set&lt;String&gt; strs = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(); <span class="comment">// ç”¨äºå­˜å‚¨å·²ç»å‡ºç°è¿‡çš„å››å…ƒç»„</span></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// ç”¨äºå­˜å‚¨ç¬¦åˆæ¡ä»¶çš„å››å…ƒç»„</span></span><br><span class="line">    <span class="type">int</span> left, right;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">3</span>; i++) &#123; <span class="comment">// æšä¸¾ç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i - <span class="number">1</span>] == nums[i]) &#123; <span class="comment">// å¦‚æœç¬¬ä¸€ä¸ªæ•°ä¸å‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œåˆ™è·³è¿‡</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; n - <span class="number">2</span>; j++) &#123; <span class="comment">// æšä¸¾ç¬¬äºŒä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">if</span> (j &gt; i + <span class="number">1</span> &amp;&amp; nums[j - <span class="number">1</span>] == nums[j]) &#123; <span class="comment">// å¦‚æœç¬¬äºŒä¸ªæ•°ä¸å‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œåˆ™è·³è¿‡</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            left = j + <span class="number">1</span>; <span class="comment">// å·¦æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸‰ä¸ªæ•°</span></span><br><span class="line">            right = n - <span class="number">1</span>; <span class="comment">// å³æŒ‡é’ˆæŒ‡å‘æœ€åä¸€ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">while</span> (left &lt; right) &#123; <span class="comment">// åŒæŒ‡é’ˆéå†</span></span><br><span class="line">                <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> (<span class="type">long</span>) nums[i] + nums[j] + nums[left] + nums[right]; <span class="comment">// è®¡ç®—å››ä¸ªæ•°çš„å’Œ</span></span><br><span class="line">                <span class="keyword">if</span> (sum &gt; target) &#123; <span class="comment">// å¦‚æœå’Œå¤§äºç›®æ ‡å€¼ï¼Œåˆ™å°†å³æŒ‡é’ˆå·¦ç§»</span></span><br><span class="line">                    right--;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; target) &#123; <span class="comment">// å¦‚æœå’Œå°äºç›®æ ‡å€¼ï¼Œåˆ™å°†å·¦æŒ‡é’ˆå³ç§»</span></span><br><span class="line">                    left++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦‚æœå’Œç­‰äºç›®æ ‡å€¼ï¼Œåˆ™å°†å››å…ƒç»„åŠ å…¥ç­”æ¡ˆé›†åˆä¸­</span></span><br><span class="line">                    List&lt;Integer&gt; tmp = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    tmp.add(nums[i]);</span><br><span class="line">                    tmp.add(nums[j]);</span><br><span class="line">                    tmp.add(nums[left]);</span><br><span class="line">                    tmp.add(nums[right]);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> Integer.toString(nums[i]) + Integer.toString(nums[j])</span><br><span class="line">                            + Integer.toString(nums[left]) + Integer.toString(nums[right]); <span class="comment">// å°†å››å…ƒç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line">                    <span class="keyword">if</span> (!strs.contains(str)) &#123; <span class="comment">// å¦‚æœè¯¥å››å…ƒç»„æ²¡æœ‰å‡ºç°è¿‡ï¼Œåˆ™å°†å…¶åŠ å…¥ç­”æ¡ˆé›†åˆä¸­</span></span><br><span class="line">                        ans.add(tmp);</span><br><span class="line">                        strs.add(str);</span><br><span class="line">                    &#125;</span><br><span class="line">                    right--; <span class="comment">// å°†å³æŒ‡é’ˆå·¦ç§»</span></span><br><span class="line">                    left++; <span class="comment">// å°†å·¦æŒ‡é’ˆå³ç§»</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><h2 id="åè½¬å­—ç¬¦ä¸²"><a href="#åè½¬å­—ç¬¦ä¸²" class="headerlink" title="åè½¬å­—ç¬¦ä¸²"></a>åè½¬å­—ç¬¦ä¸²</h2><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ s çš„å½¢å¼ç»™å‡ºã€‚</p><p>ä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p><p><a href="https://leetcode.cn/problems/reverse-string">https://leetcode.cn/problems/reverse-string</a></p><h3 id="æ€è·¯-29"><a href="#æ€è·¯-29" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.åŒæŒ‡é’ˆåè½¬</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -29"><a href="#ä»£ç -29" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseString</span><span class="params">(<span class="type">char</span>[] s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> right=s.length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">        <span class="type">char</span> temp=s[left];</span><br><span class="line">        s[left]=s[right];</span><br><span class="line">        s[right]=temp;</span><br><span class="line">        left++;</span><br><span class="line">        right--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åè½¬å­—ç¬¦ä¸²II"><a href="#åè½¬å­—ç¬¦ä¸²II" class="headerlink" title="åè½¬å­—ç¬¦ä¸²II"></a>åè½¬å­—ç¬¦ä¸²II</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° kï¼Œä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼Œæ¯è®¡æ•°è‡³ 2k ä¸ªå­—ç¬¦ï¼Œå°±åè½¬è¿™ 2k å­—ç¬¦ä¸­çš„å‰ k ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœå‰©ä½™å­—ç¬¦å°‘äº k ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬ã€‚<br>å¦‚æœå‰©ä½™å­—ç¬¦å°äº 2k ä½†å¤§äºæˆ–ç­‰äº k ä¸ªï¼Œåˆ™åè½¬å‰ k ä¸ªå­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒåŸæ ·ã€‚</p><p><a href="https://leetcode.cn/problems/reverse-string-ii">https://leetcode.cn/problems/reverse-string-ii</a></p><h3 id="æ€è·¯-30"><a href="#æ€è·¯-30" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.Stringè½¬charæ•°ç»„ï¼šchar[] arr = s.toCharArray()</span><br><span class="line">2.å¾ªç¯éå†ï¼Œè°ƒç”¨reverseæ–¹æ³•</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -30"><a href="#ä»£ç -30" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">reverseStr</span><span class="params">(String s, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length(); <span class="comment">// å­—ç¬¦ä¸² s çš„é•¿åº¦</span></span><br><span class="line">    <span class="type">char</span>[] arr = s.toCharArray(); <span class="comment">// å°†å­—ç¬¦ä¸² s è½¬æ¢æˆå­—ç¬¦æ•°ç»„ arr</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i += <span class="number">2</span> * k) &#123; <span class="comment">// æ¯æ¬¡å¤„ç† 2k ä¸ªå­—ç¬¦</span></span><br><span class="line">        reverse(arr, i, Math.min(i + k, n) - <span class="number">1</span>); <span class="comment">// åè½¬æ¯ä¸ª 2k ä¸ªå­—ç¬¦ä¸­çš„å‰ k ä¸ªå­—ç¬¦</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(arr); <span class="comment">// å°†åè½¬åçš„å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²å¹¶è¿”å›</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(<span class="type">char</span>[] arr, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123; <span class="comment">// åŒæŒ‡é’ˆéå†</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">temp</span> <span class="operator">=</span> arr[left]; <span class="comment">// äº¤æ¢å·¦å³æŒ‡é’ˆæ‰€æŒ‡å‘çš„å­—ç¬¦</span></span><br><span class="line">        arr[left] = arr[right];</span><br><span class="line">        arr[right] = temp;</span><br><span class="line">        left++; <span class="comment">// å·¦æŒ‡é’ˆå³ç§»</span></span><br><span class="line">        right--; <span class="comment">// å³æŒ‡é’ˆå·¦ç§»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ›¿æ¢ç©ºæ ¼"><a href="#æ›¿æ¢ç©ºæ ¼" class="headerlink" title="æ›¿æ¢ç©ºæ ¼"></a>æ›¿æ¢ç©ºæ ¼</h2><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€%20â€ã€‚</p><h3 id="æ€è·¯-31"><a href="#æ€è·¯-31" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.StringBuilder res = new StringBuilder();</span><br><span class="line">2.</span><br><span class="line">if(c == &#x27; &#x27;) res.append(&quot;%20&quot;);</span><br><span class="line">else res.append(c);</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -31"><a href="#ä»£ç -31" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">replaceSpace</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span>(Character c : s.toCharArray())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">&#x27; &#x27;</span>) res.append(<span class="string">&quot;%20&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> res.append(c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯"><a href="#åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯" class="headerlink" title="åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯"></a>åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯</h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ å•è¯ çš„é¡ºåºã€‚</p><p>å•è¯ æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚s ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ å•è¯ åˆ†éš”å¼€ã€‚</p><p>è¿”å› å•è¯ é¡ºåºé¢ å€’ä¸” å•è¯ ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚</p><p>æ³¨æ„ï¼šè¾“å…¥å­—ç¬¦ä¸² sä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚</p><p><a href="https://leetcode.cn/problems/reverse-words-in-a-string">https://leetcode.cn/problems/reverse-words-in-a-string</a></p><h3 id="æ€è·¯-32"><a href="#æ€è·¯-32" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.å†…ç½®split,reverse,joinç­‰æ–¹æ³•</span><br><span class="line">String.trim()</span><br><span class="line">String.split(&quot;\\s+&quot;)//\\s+è¡¨ç¤ºåŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ï¼ˆåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰å¹¶ä¸”å‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚å› æ­¤ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨åˆ†å‰²å­—ç¬¦ä¸²æ—¶å¿½ç•¥è¿ç»­çš„ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦æˆ–æ¢è¡Œç¬¦ç­‰ç©ºç™½å­—ç¬¦ã€‚</span><br><span class="line">Array.asList(arr)</span><br><span class="line">Collections.reverse(list)</span><br><span class="line">String.join(str1,list)//ç»™listæ·»åŠ åˆ†éš”ç¬¦</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -32"><a href="#ä»£ç -32" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">reverseWords</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// é™¤å»å¼€å¤´å’Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦</span></span><br><span class="line">    s = s.trim();</span><br><span class="line">    <span class="comment">// æ­£åˆ™åŒ¹é…è¿ç»­çš„ç©ºç™½å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦åˆ†å‰²</span></span><br><span class="line">    List&lt;String&gt; wordList = Arrays.asList(s.split(<span class="string">&quot;\\s+&quot;</span>));</span><br><span class="line">    Collections.reverse(wordList);</span><br><span class="line">    <span class="keyword">return</span> String.join(<span class="string">&quot; &quot;</span>, wordList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å·¦æ—‹è½¬å­—ç¬¦ä¸²"><a href="#å·¦æ—‹è½¬å­—ç¬¦ä¸²" class="headerlink" title="å·¦æ—‹è½¬å­—ç¬¦ä¸²"></a>å·¦æ—‹è½¬å­—ç¬¦ä¸²</h2><p>å­—ç¬¦ä¸²çš„å·¦æ—‹è½¬æ“ä½œæ˜¯æŠŠå­—ç¬¦ä¸²å‰é¢çš„è‹¥å¹²ä¸ªå­—ç¬¦è½¬ç§»åˆ°å­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚è¯·å®šä¹‰ä¸€ä¸ªå‡½æ•°å®ç°å­—ç¬¦ä¸²å·¦æ—‹è½¬æ“ä½œçš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè¾“å…¥å­—ç¬¦ä¸²â€abcdefgâ€å’Œæ•°å­—2ï¼Œè¯¥å‡½æ•°å°†è¿”å›å·¦æ—‹è½¬ä¸¤ä½å¾—åˆ°çš„ç»“æœâ€cdefgabâ€ã€‚</p><p><a href="https://leetcode.cn/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof">https://leetcode.cn/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof</a></p><h3 id="æ€è·¯-33"><a href="#æ€è·¯-33" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.åˆ‡ç‰‡</span><br><span class="line">2.ç›¸åŠ </span><br></pre></td></tr></table></figure><h3 id="ä»£ç -33"><a href="#ä»£ç -33" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">reverseLeftWords</span><span class="params">(String s, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.substring(n, s.length()) + s.substring(<span class="number">0</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡"><a href="#æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡" class="headerlink" title="æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡"></a>æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡</h2><p>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²Â haystack å’Œ needle ï¼Œè¯·ä½ åœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœÂ needle ä¸æ˜¯ haystack çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å›Â  -1 ã€‚</p><p><a href="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string">https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string</a><br><strong>ç¤ºä¾‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhaystack = &quot;sadbutsad&quot;, needle = &quot;sad&quot;</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">è§£é‡Šï¼š&quot;sad&quot; åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚</span><br><span class="line">ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯-34"><a href="#æ€è·¯-34" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.haystack.indexOf(needle);</span><br><span class="line">2.åŸºäºçª—å£æ»‘åŠ¨</span><br><span class="line">é¦–å…ˆåˆ¤æ–­å­ä¸²æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™ç›´æ¥è¿”å› 0ã€‚</span><br><span class="line">é€šè¿‡éå†ç›®æ ‡å­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸å­ä¸²çš„é¦–å­—ç¬¦ç›¸ç­‰çš„ä½ç½®ã€‚</span><br><span class="line">å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™ä»è¯¥ä½ç½®å¼€å§‹å‘åéå†ç›®æ ‡å­—ç¬¦ä¸²å’Œå­ä¸²ï¼Œé€ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå­—ç¬¦ä¸åŒ¹é…ï¼Œåˆ™ä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹é‡æ–°åŒ¹é…ï¼Œç›´åˆ°æ‰¾åˆ°å­ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®æˆ–è€…æ‰¾å®Œäº†æ•´ä¸ªç›®æ ‡å­—ç¬¦ä¸²éƒ½æ²¡æœ‰æ‰¾åˆ°å­ä¸²ï¼Œåˆ™è¿”å› -1ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -34"><a href="#ä»£ç -34" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">strStr</span><span class="params">(String haystack, String needle)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> needle.length(); <span class="comment">// å­ä¸²çš„é•¿åº¦</span></span><br><span class="line">    <span class="comment">// å½“ needle æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æˆ‘ä»¬åº”å½“è¿”å› 0</span></span><br><span class="line">    <span class="keyword">if</span> (m == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> haystack.length(); <span class="comment">// ç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (n &lt; m) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// ç›®æ ‡å­—ç¬¦ä¸²ä¸­å½“å‰è¦åŒ¹é…çš„å­—ç¬¦çš„ä½ç½®</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å­ä¸²ä¸­å½“å‰è¦åŒ¹é…çš„å­—ç¬¦çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt; n - m + <span class="number">1</span>) &#123; <span class="comment">// çª—å£çš„å³ç«¯ç‚¹ä¸èƒ½è¶…è¿‡ç›®æ ‡å­—ç¬¦ä¸²çš„æœ«å°¾</span></span><br><span class="line">        <span class="comment">// æ‰¾åˆ°ç›®æ ‡å­—ç¬¦ä¸²ä¸­ä¸å­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸ç­‰çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt; n &amp;&amp; haystack.charAt(i) != needle.charAt(j)) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i == n) &#123; <span class="comment">// å¦‚æœç›®æ ‡å­—ç¬¦ä¸²ä¸­æ²¡æœ‰ä¸å­ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸ç­‰çš„ä½ç½®ï¼Œåˆ™åŒ¹é…å¤±è´¥</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä»ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸€èµ·å‘åç§»åŠ¨</span></span><br><span class="line">        i++;</span><br><span class="line">        j++;</span><br><span class="line">        <span class="keyword">while</span> (j &lt; m &amp;&amp; i &lt; n &amp;&amp; haystack.charAt(i) == needle.charAt(j)) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j == m) &#123; <span class="comment">// å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å›å­ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®</span></span><br><span class="line">            <span class="keyword">return</span> i - m;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦åˆ™å›æº¯åˆ°ä¸‹ä¸€ä¸ªä½ç½®é‡æ–°å¼€å§‹åŒ¹é…</span></span><br><span class="line">            i -= j - <span class="number">1</span>;</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å›-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡å¤çš„å­å­—ç¬¦ä¸²"><a href="#é‡å¤çš„å­å­—ç¬¦ä¸²" class="headerlink" title="é‡å¤çš„å­å­—ç¬¦ä¸²"></a>é‡å¤çš„å­å­—ç¬¦ä¸²</h2><p>ç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸² s ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚</p><p><a href="https://leetcode.cn/problems/repeated-substring-pattern/">https://leetcode.cn/problems/repeated-substring-pattern/</a></p><h3 id="æ€è·¯-35"><a href="#æ€è·¯-35" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.å¦‚æœå­—ç¬¦ä¸² S åŒ…å«ä¸€ä¸ªé‡å¤çš„å­å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€å¯ä»¥å¤šæ¬¡ â€œç§»ä½å’Œæ¢è¡Œâ€`å­—ç¬¦ä¸²ï¼Œå¹¶ä½¿å…¶ä¸åŸå§‹å­—ç¬¦ä¸²åŒ¹é…ã€‚åŸºäºè¿™ä¸ªæ€æƒ³ï¼Œå¯ä»¥æ¯æ¬¡ç§»åŠ¨kä¸ªå­—ç¬¦ï¼Œç›´åˆ°åŒ¹é…ç§»åŠ¨ length - 1 æ¬¡ã€‚ä½†æ˜¯è¿™æ ·å¯¹äºé‡å¤å­—ç¬¦ä¸²å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œæ•ˆç‡ä¼šéå¸¸ä½ã€‚åœ¨ LeetCode ä¸­æ‰§è¡Œæ—¶é—´è¶…æ—¶äº†ã€‚</span><br><span class="line">2.ä¸ºäº†é¿å…è¿™ç§æ— ç”¨çš„ç¯ç»•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² strï¼Œå®ƒç­‰äºåŸæ¥çš„å­—ç¬¦ä¸² S å†åŠ ä¸Š S è‡ªèº«ï¼Œè¿™æ ·å…¶å®å°±åŒ…å«äº†æ‰€æœ‰ç§»åŠ¨çš„å­—ç¬¦ä¸²ã€‚</span><br><span class="line">æ¯”å¦‚å­—ç¬¦ä¸²ï¼šS = acdï¼Œé‚£ä¹ˆ str = S + S = acdacd</span><br><span class="line">acd ç§»åŠ¨çš„å¯èƒ½ï¼šdacã€cdaã€‚å…¶å®éƒ½åŒ…å«åœ¨äº† str ä¸­äº†ã€‚å°±åƒä¸€ä¸ªæ»‘åŠ¨çª—å£</span><br><span class="line">ä¸€å¼€å§‹ acd (acd) ï¼Œç§»åŠ¨ä¸€æ¬¡ ac(dac)dï¼Œç§»åŠ¨ä¸¤æ¬¡ a(cda)cdã€‚å¾ªç¯ç»“æŸ</span><br><span class="line">æ‰€ä»¥å¯ä»¥ç›´æ¥åˆ¤æ–­ str ä¸­å»é™¤é¦–å°¾å…ƒç´ ä¹‹åï¼Œæ˜¯å¦åŒ…å«è‡ªèº«å…ƒç´ ã€‚å¦‚æœåŒ…å«ã€‚åˆ™è¡¨æ˜å­˜åœ¨é‡å¤å­ä¸²ã€‚</span><br></pre></td></tr></table></figure><h3 id="ä»£ç -35"><a href="#ä»£ç -35" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">repeatedSubstringPattern</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> s + s;</span><br><span class="line">    <span class="keyword">return</span> str.substring(<span class="number">1</span>, str.length() - <span class="number">1</span>).contains(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>æ•°ç»„</tag>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>å“ˆå¸Œè¡¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”²éª¨æ–‡äº‘æ°¸ä¹…å…è´¹æœåŠ¡å™¨å…è®¸rootè¿œç¨‹sshç™»å½•</title>
    <link href="/2023/05/20/%E7%94%B2%E9%AA%A8%E6%96%87%E4%BA%91%E6%B0%B8%E4%B9%85%E5%85%8D%E8%B4%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%81%E8%AE%B8root%E8%BF%9C%E7%A8%8Bssh%E7%99%BB%E5%BD%95/"/>
    <url>/2023/05/20/%E7%94%B2%E9%AA%A8%E6%96%87%E4%BA%91%E6%B0%B8%E4%B9%85%E5%85%8D%E8%B4%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%81%E8%AE%B8root%E8%BF%9C%E7%A8%8Bssh%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="ç”²éª¨æ–‡äº‘æ°¸ä¹…å…è´¹æœåŠ¡å™¨å…è®¸rootè¿œç¨‹sshç™»å½•"><a href="#ç”²éª¨æ–‡äº‘æ°¸ä¹…å…è´¹æœåŠ¡å™¨å…è®¸rootè¿œç¨‹sshç™»å½•" class="headerlink" title="ç”²éª¨æ–‡äº‘æ°¸ä¹…å…è´¹æœåŠ¡å™¨å…è®¸rootè¿œç¨‹sshç™»å½•"></a>ç”²éª¨æ–‡äº‘æ°¸ä¹…å…è´¹æœåŠ¡å™¨å…è®¸rootè¿œç¨‹sshç™»å½•</h2><p>è™½ç„¶æ“ä½œè¿‡å¥½å¤šæ¬¡ï¼Œä½†è¿˜æ˜¯ä¼šå¿˜è®°ï¼Œæ¯æ¬¡éƒ½è¦å»æŸ¥ï¼Œè¿˜æ˜¯è‡ªå·±è®°å½•ä¸€éå§</p><h3 id="åˆ›å»ºæ–°çš„æœåŠ¡å™¨"><a href="#åˆ›å»ºæ–°çš„æœåŠ¡å™¨" class="headerlink" title="åˆ›å»ºæ–°çš„æœåŠ¡å™¨"></a>åˆ›å»ºæ–°çš„æœåŠ¡å™¨</h3><p>ç”²éª¨æ–‡äº‘åœ¨ä¸åŒåœ°åŒºçš„ç™»å½•åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘çš„ç™»å½•åœ°å€æ˜¯<a href="https://www.oracle.com/cloud/sign-in.html?redirect_uri=https://cloud.oracle.com/compute/instances?region=ap-seoul-1">Cloud Sign In (oracle.com)</a></p><p>è¿˜éœ€è¦å…ˆå¡«åå­—ï¼Œè¿™æ˜¯å¤–å›½äººå¾ˆå¥‡æ€ªçš„ä¸€ç‚¹ï¼Œè®°ä¸ä½è®¾ç½®çš„ä»€ä¹ˆåå­—å°±ç™»ä¸ä¸Šäº†</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20230704142856.1tmnrvwfijwg.webp"></p><p>åœ¨è®¡ç®—-å®ä¾‹é¡µé¢é€‰æ‹©åˆ›å»ºå®ä¾‹</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.7is8xyw41fw0.webp"></p><p>æ˜ åƒå’Œé…ç½®é€‰æ‹©å…è´¹çš„å°±å¥½</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.3dlmlm2nlqm0.webp"></p><p>ä¿å­˜å¯†é’¥å¯¹åˆ°æœ¬åœ°</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.2s5dhhh68g60.webp"></p><p>åˆ›å»ºæˆåŠŸååœ¨ <a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a>  pingä¸€ä¸‹æœåŠ¡å™¨å…¬ç½‘IP æœ¬æœºä¹Ÿpingä¸€ä¸‹æ£€æŸ¥æ˜¯å¦ç•…é€š æœ¬åœ°ç½‘ç»œpingç•…é€šçš„æœåŠ¡å™¨æ‰æœ‰æ„ä¹‰</p><p><img src="https://xinhaojin.github.io/imgs-host/20230704/image.3jbm4dedc500.webp"></p><h3 id="SSHè¿æ¥"><a href="#SSHè¿æ¥" class="headerlink" title="SSHè¿æ¥"></a>SSHè¿æ¥</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh -i &lt;private_key&gt; user@remote_host<br></code></pre></td></tr></table></figure><p>é»˜è®¤ç”¨æˆ·åä¼šåœ¨å®ä¾‹åˆ›å»ºæ—¶æ˜¾ç¤ºï¼ŒUbuntuç³»ç»Ÿæ˜¯ubuntuï¼ŒCentosæ˜¯opc</p><p>æœ‰æ—¶å€™æœ¬åœ°å³ä½¿pingé€šä¹Ÿå¾ˆéš¾å»ºç«‹sshè¿æ¥ï¼Œå› ä¸ºsshä½¿ç”¨TCPåè®®ï¼Œè€Œpingä½¿ç”¨çš„æ˜¯ICMPï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç½‘ç»œç¯å¢ƒæ›´å¥½çš„å…¶ä»–äº‘æœåŠ¡å™¨æ¥å»ºç«‹è¿æ¥ï¼Œç§é’¥æƒé™ä¸èƒ½æ”¾å¼€ï¼Œè¦è®¾ç½®æˆ400</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod 400 &lt;private_key&gt;<br></code></pre></td></tr></table></figure><p>ç™»å½•æˆåŠŸåä¿®æ”¹rootå¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo -i<br>passwd<br></code></pre></td></tr></table></figure><p>è®¾ç½®å…è®¸rootè¿œç¨‹sshç™»å½•,ä¿®æ”¹&#x2F;etc&#x2F;ssh&#x2F;sshd_config</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">Port 22222<br>PermitRootLogin yes<br>PasswordAuthentication yes<br></code></pre></td></tr></table></figure><p>å¤„ç† systemd çš„ ssh.socketï¼ˆè§£å†³ç«¯å£ä¸ç”Ÿæ•ˆé—®é¢˜ï¼‰,Ubuntu ä¸­ SSH å¯èƒ½ç”± ssh.socket ç®¡ç†ï¼Œéœ€ç¦ç”¨è¯¥ socket è®© SSH æœåŠ¡è‡ªå·±ç›‘å¬ç«¯å£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo systemctl stop ssh.socket<br>sudo systemctl disable ssh.socket<br>sudo systemctl daemon-reload<br>sudo systemctl restart ssh<br>sudo systemctl status ssh<br></code></pre></td></tr></table></figure><p>å…³é—­iptablesæœåŠ¡ä»¥å…è®¸sshç«¯å£ï¼Œåç»­å¯ä»¥é‡æ–°å¯ç”¨å…¶ä»–é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo systemctl stop iptables<br>sudo systemctl disable iptables<br></code></pre></td></tr></table></figure><p>å¦‚æœè¿˜ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥è¯•è¯•ä¸‹é¢å‘½ä»¤ï¼Œæœ‰å¯èƒ½è¢«åœ°æ–¹é…ç½®è¦†ç›–äº†ï¼Œåƒè¿™é‡Œå°±è¿˜éœ€è¦ä¿®æ”¹&#x2F;etc&#x2F;ssh&#x2F;sshd_config.d&#x2F;60-cloudimg-settings.conf,ç„¶åå†é‡å¯sshæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@cloud2:/etc/ssh# grep -R &quot;PasswordAuthentication&quot; /etc/ssh/sshd_config /etc/ssh/sshd_config.d/<br>/etc/ssh/sshd_config:PasswordAuthentication yes<br>/etc/ssh/sshd_config:# PasswordAuthentication.  Depending on your PAM configuration,<br>/etc/ssh/sshd_config:# PAM authentication, then enable this but set PasswordAuthentication<br>/etc/ssh/sshd_config.d/60-cloudimg-settings.conf:PasswordAuthentication no<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vscode SSHæ— æ³•å»ºç«‹è¿æ¥é—®é¢˜</title>
    <link href="/2023/04/14/vscode%20SSH%E6%97%A0%E6%B3%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98/"/>
    <url>/2023/04/14/vscode%20SSH%E6%97%A0%E6%B3%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å…¶ä»–SSHå·¥å…·èƒ½è¿ä¸Šï¼Œvscodeçš„RemoteSSHæ’ä»¶æ˜¾ç¤ºæ— æ³•å»ºç«‹è¿æ¥</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>åœ¨ <code>C:\Users\yourname\.ssh</code>ä¸‹æœ‰ä¸€ä¸ªknown_hostsæ–‡ä»¶ï¼Œä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œåˆ é™¤ä½ è¦è¿æ¥çš„IPç›¸å…³çš„æ‰€æœ‰å†…å®¹å³å¯<br><code>&lt;br&gt;</code><br><img src="https://xinhaojin.github.io/imgs-host/20230414/192903.6tmyxirogzs0.webp" alt="192903"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VOCæ ¼å¼æ•°æ®é›†è½¬YOLOæ ¼å¼</title>
    <link href="/2023/04/14/VOC%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E9%9B%86%E8%BD%ACYOLO%E6%A0%BC%E5%BC%8F/"/>
    <url>/2023/04/14/VOC%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E9%9B%86%E8%BD%ACYOLO%E6%A0%BC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="VOCæ ¼å¼"><a href="#VOCæ ¼å¼" class="headerlink" title="VOCæ ¼å¼"></a>VOCæ ¼å¼</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">VOC</span><br><span class="line">--Annotations</span><br><span class="line">    00001.xml</span><br><span class="line">        &lt;annotation&gt;</span><br><span class="line">            &lt;size&gt;</span><br><span class="line">                &lt;width&gt;320&lt;/width&gt;</span><br><span class="line">                &lt;height&gt;160&lt;/height&gt;</span><br><span class="line">                &lt;depth&gt;3&lt;/depth&gt;</span><br><span class="line">            &lt;/size&gt;</span><br><span class="line">            &lt;segmented&gt;0&lt;/segmented&gt;</span><br><span class="line">            &lt;object&gt;</span><br><span class="line">                &lt;name&gt;word&lt;/name&gt;</span><br><span class="line">                &lt;pose&gt;Unspecified&lt;/pose&gt;</span><br><span class="line">                &lt;truncated&gt;0&lt;/truncated&gt;</span><br><span class="line">                &lt;difficult&gt;0&lt;/difficult&gt;</span><br><span class="line">                &lt;bndbox&gt;</span><br><span class="line">                    &lt;xmin&gt;234&lt;/xmin&gt;</span><br><span class="line">                    &lt;ymin&gt;27&lt;/ymin&gt;</span><br><span class="line">                    &lt;xmax&gt;267&lt;/xmax&gt;</span><br><span class="line">                    &lt;ymax&gt;63&lt;/ymax&gt;</span><br><span class="line">                &lt;/bndbox&gt;</span><br><span class="line">            &lt;/object&gt;</span><br><span class="line">        &lt;/annotation&gt;</span><br><span class="line">    00002.xml</span><br><span class="line">    00003.xml</span><br><span class="line">    00004.xml</span><br><span class="line">--JPEGImages</span><br><span class="line">    00001.png</span><br><span class="line">    00002.png</span><br><span class="line">    00003.png</span><br><span class="line">    00004.png</span><br><span class="line">--ImageSets</span><br><span class="line">    --Main</span><br><span class="line">        train.txt</span><br><span class="line">            00001</span><br><span class="line">            00004</span><br><span class="line">        val.txt</span><br><span class="line">            00002</span><br><span class="line">        test.txt</span><br><span class="line">            00003</span><br></pre></td></tr></table></figure><h2 id="YOLOæ ¼å¼"><a href="#YOLOæ ¼å¼" class="headerlink" title="YOLOæ ¼å¼"></a>YOLOæ ¼å¼</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">YOLO</span><br><span class="line">--images</span><br><span class="line">    --train</span><br><span class="line">        00001.jpg</span><br><span class="line">        00004.jpg</span><br><span class="line">    --val</span><br><span class="line">        00002.jpg</span><br><span class="line">    --test</span><br><span class="line">        00003.jpg</span><br><span class="line">--labels</span><br><span class="line">    --train</span><br><span class="line">        00001.txt</span><br><span class="line">            0 0.7828125 0.28125 0.10312500000000001 0.225</span><br><span class="line">            0 0.2328125 0.603125 0.109375 0.20625000000000002</span><br><span class="line">            0 0.5703125 0.596875 0.115625 0.21875</span><br><span class="line">            0 0.74375 0.7406250000000001 0.09375 0.19375</span><br><span class="line">        00004.txt</span><br><span class="line">    --val</span><br><span class="line">        00002.txt</span><br><span class="line">    --test</span><br><span class="line">        00003.txt</span><br></pre></td></tr></table></figure><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class_names = [<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>]</span><br><span class="line">voc_dir = <span class="string">&#x27;.&#x27;</span></span><br><span class="line">yolo_dir = <span class="string">&#x27;.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºyoloæ ¼å¼çš„ç›®å½•ç»“æ„</span></span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;images&#x27;</span>, <span class="string">&#x27;train&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;images&#x27;</span>, <span class="string">&#x27;val&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;images&#x27;</span>, <span class="string">&#x27;test&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;labels&#x27;</span>, <span class="string">&#x27;train&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;labels&#x27;</span>, <span class="string">&#x27;val&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line">os.makedirs(os.path.join(yolo_dir, <span class="string">&#x27;labels&#x27;</span>, <span class="string">&#x27;test&#x27;</span>), exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†çš„æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(voc_dir, <span class="string">&#x27;ImageSets&#x27;</span>, <span class="string">&#x27;Main&#x27;</span>, <span class="string">&#x27;train.txt&#x27;</span>)) <span class="keyword">as</span> f:</span><br><span class="line">    train_list = f.read().splitlines()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(voc_dir, <span class="string">&#x27;ImageSets&#x27;</span>, <span class="string">&#x27;Main&#x27;</span>, <span class="string">&#x27;val.txt&#x27;</span>)) <span class="keyword">as</span> f:</span><br><span class="line">    val_list = f.read().splitlines()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(voc_dir, <span class="string">&#x27;ImageSets&#x27;</span>, <span class="string">&#x27;Main&#x27;</span>, <span class="string">&#x27;test.txt&#x27;</span>)) <span class="keyword">as</span> f:</span><br><span class="line">    test_list = f.read().splitlines()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢æ ‡æ³¨æ–‡ä»¶æ ¼å¼</span></span><br><span class="line"><span class="keyword">for</span> split_name, split_list <span class="keyword">in</span> [(<span class="string">&#x27;train&#x27;</span>, train_list), (<span class="string">&#x27;val&#x27;</span>, val_list), (<span class="string">&#x27;test&#x27;</span>, test_list)]:</span><br><span class="line">    <span class="keyword">for</span> image_name <span class="keyword">in</span> split_list:</span><br><span class="line">        <span class="comment"># å¤åˆ¶å›¾ç‰‡</span></span><br><span class="line">        src_image_path = os.path.join(voc_dir, <span class="string">&#x27;JPEGImages&#x27;</span>, <span class="string">f&#x27;<span class="subst">&#123;image_name&#125;</span>.png&#x27;</span>)</span><br><span class="line">        dst_image_path = os.path.join(yolo_dir, <span class="string">&#x27;images&#x27;</span>, split_name, <span class="string">f&#x27;<span class="subst">&#123;image_name&#125;</span>.jpg&#x27;</span>)</span><br><span class="line">        shutil.copy(src_image_path, dst_image_path)</span><br><span class="line">      </span><br><span class="line">        <span class="comment"># è§£æXMLæ ‡æ³¨æ–‡ä»¶</span></span><br><span class="line">        xml_path = os.path.join(voc_dir, <span class="string">&#x27;Annotations&#x27;</span>, <span class="string">f&#x27;<span class="subst">&#123;image_name&#125;</span>.xml&#x27;</span>)</span><br><span class="line">        tree = ET.parse(xml_path)</span><br><span class="line">        root = tree.getroot()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è·å–å›¾ç‰‡å¤§å°</span></span><br><span class="line">        size_elem = root.find(<span class="string">&#x27;size&#x27;</span>)</span><br><span class="line">        width = <span class="built_in">int</span>(size_elem.find(<span class="string">&#x27;width&#x27;</span>).text)</span><br><span class="line">        height = <span class="built_in">int</span>(size_elem.find(<span class="string">&#x27;height&#x27;</span>).text)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è½¬æ¢æ ‡æ³¨</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(yolo_dir, <span class="string">&#x27;labels&#x27;</span>, split_name, <span class="string">f&#x27;<span class="subst">&#123;image_name&#125;</span>.txt&#x27;</span>), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> obj_elem <span class="keyword">in</span> root.findall(<span class="string">&#x27;object&#x27;</span>):</span><br><span class="line">                class_name = obj_elem.find(<span class="string">&#x27;name&#x27;</span>).text</span><br><span class="line">                <span class="keyword">if</span> class_name <span class="keyword">not</span> <span class="keyword">in</span> class_names:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">                bbox_elem = obj_elem.find(<span class="string">&#x27;bndbox&#x27;</span>)</span><br><span class="line">                xmin = <span class="built_in">int</span>(<span class="built_in">float</span>(bbox_elem.find(<span class="string">&#x27;xmin&#x27;</span>).text))</span><br><span class="line">                ymin = <span class="built_in">int</span>(<span class="built_in">float</span>(bbox_elem.find(<span class="string">&#x27;ymin&#x27;</span>).text))</span><br><span class="line">                xmax = <span class="built_in">int</span>(<span class="built_in">float</span>(bbox_elem.find(<span class="string">&#x27;xmax&#x27;</span>).text))</span><br><span class="line">                ymax = <span class="built_in">int</span>(<span class="built_in">float</span>(bbox_elem.find(<span class="string">&#x27;ymax&#x27;</span>).text))</span><br><span class="line"></span><br><span class="line">                x_center = (xmin + xmax) / <span class="number">2</span> / width</span><br><span class="line">                y_center = (ymin + ymax) / <span class="number">2</span> / height</span><br><span class="line">                w = (xmax - xmin) / width</span><br><span class="line">                h = (ymax - ymin) / height</span><br><span class="line"></span><br><span class="line">                <span class="comment"># å†™å…¥æ ‡æ³¨</span></span><br><span class="line">                f.write(<span class="string">f&quot;<span class="subst">&#123;class_names.index(class_name)&#125;</span> <span class="subst">&#123;x_center:<span class="number">.6</span>f&#125;</span> <span class="subst">&#123;y_center:<span class="number">.6</span>f&#125;</span> <span class="subst">&#123;w:<span class="number">.6</span>f&#125;</span> <span class="subst">&#123;h:<span class="number">.6</span>f&#125;</span>\n&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>centos7ä½¿ç”¨dockeréƒ¨ç½²chatgpt</title>
    <link href="/2023/04/03/centos7%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2chatgpt/"/>
    <url>/2023/04/03/centos7%E4%BD%BF%E7%94%A8docker%E9%83%A8%E7%BD%B2chatgpt/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬"><a href="#æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬"></a>æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><h3 id="å¸è½½docker"><a href="#å¸è½½docker" class="headerlink" title="å¸è½½docker"></a>å¸è½½docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">sudo yum remove docker #åˆ é™¤æ—©æœŸç‰ˆæœ¬</span><br><span class="line">sudo rm -rf /var/lib/docker #åˆ é™¤Dockeræ•°æ®ç›®å½•</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨docker"><a href="#ä½¿ç”¨docker" class="headerlink" title="ä½¿ç”¨docker"></a>ä½¿ç”¨docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker #å¯åŠ¨dockeræœåŠ¡</span><br><span class="line">systemctl stop docker #å…³é—­dockeræœåŠ¡</span><br><span class="line">sudo systemctl enable docker #å¼€æœºå¯åŠ¨</span><br><span class="line">docker ps -a #æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span><br><span class="line">docker stop myname #åœæ­¢å®¹å™¨åä¸º&#x27;myname&#x27;çš„å®¹å™¨</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…docker-compose"><a href="#å®‰è£…docker-compose" class="headerlink" title="å®‰è£…docker-compose"></a>å®‰è£…docker-compose</h2><p>å‘å¸ƒåœ°å€ <a href="https://github.com/docker/compose/releases">https://github.com/docker/compose/releases</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="æˆäºˆæ‰§è¡Œæƒé™"><a href="#æˆäºˆæ‰§è¡Œæƒé™" class="headerlink" title="æˆäºˆæ‰§è¡Œæƒé™"></a>æˆäºˆæ‰§è¡Œæƒé™</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºè½¯è¿æ¥"><a href="#åˆ›å»ºè½¯è¿æ¥" class="headerlink" title="åˆ›å»ºè½¯è¿æ¥"></a>åˆ›å»ºè½¯è¿æ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬-1"><a href="#æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬-1" class="headerlink" title="æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬"></a>æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version</span><br></pre></td></tr></table></figure><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²chatgpté¡¹ç›®"><a href="#éƒ¨ç½²chatgpté¡¹ç›®" class="headerlink" title="éƒ¨ç½²chatgpté¡¹ç›®"></a>éƒ¨ç½²chatgpté¡¹ç›®</h2><p><a href="https://github.com/Chanzhaoyu/chatgpt-web">https://github.com/Chanzhaoyu/chatgpt-web</a></p><h3 id="æ–°å»ºæ–‡ä»¶å¤¹"><a href="#æ–°å»ºæ–‡ä»¶å¤¹" class="headerlink" title="æ–°å»ºæ–‡ä»¶å¤¹"></a>æ–°å»ºæ–‡ä»¶å¤¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir chatgpt</span><br><span class="line">cd chatgpt</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºdocker-compose-yml"><a href="#æ–°å»ºdocker-compose-yml" class="headerlink" title="æ–°å»ºdocker-compose.yml"></a>æ–°å»ºdocker-compose.yml</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">chenzhaoyu94/chatgpt-web</span> <span class="comment"># æ€»æ˜¯ä½¿ç”¨ latest ,æ›´æ–°æ—¶é‡æ–° pull è¯¥ tag é•œåƒå³å¯</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3002</span><span class="string">:3002</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment"># äºŒé€‰ä¸€</span></span><br><span class="line">      <span class="comment">#OPENAI_API_KEY: XXXXXX</span></span><br><span class="line">      <span class="attr">OPENAI_ACCESS_TOKEN:</span> <span class="string">XXXXXXX</span></span><br><span class="line">      <span class="attr">API_REVERSE_PROXY:</span> <span class="string">https://bypass.churchless.tech/api/conversation</span></span><br><span class="line">      <span class="comment"># è¶…æ—¶ï¼Œå•ä½æ¯«ç§’ï¼Œå¯é€‰</span></span><br><span class="line">      <span class="attr">TIMEOUT_MS:</span> <span class="number">60000</span></span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">API</span> <span class="string">å¯ç”¨ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="string">OPENAI_API_KEY</span> <span class="string">å’Œ</span> <span class="string">OPENAI_ACCESS_TOKEN</span> <span class="string">äºŒé€‰ä¸€</span></span><br><span class="line"><span class="string">OPENAI_API_MODEL</span> <span class="string">è®¾ç½®æ¨¡å‹ï¼Œå¯é€‰ï¼Œé»˜è®¤ï¼šgpt-3.5-turbo</span></span><br><span class="line"><span class="string">OPENAI_API_BASE_URL</span> <span class="string">è®¾ç½®æ¥å£åœ°å€ï¼Œå¯é€‰ï¼Œé»˜è®¤ï¼šhttps://api.openai.com</span></span><br><span class="line"><span class="string">OPENAI_API_DISABLE_DEBUG</span> <span class="string">è®¾ç½®æ¥å£å…³é—­</span> <span class="string">debug</span> <span class="string">æ—¥å¿—ï¼Œå¯é€‰ï¼Œé»˜è®¤ï¼šempty</span> <span class="string">ä¸å…³é—­</span></span><br><span class="line"></span><br><span class="line"><span class="string">ACCESS_TOKEN</span> <span class="string">å¯ç”¨ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="string">OPENAI_ACCESS_TOKEN</span> <span class="string">å’Œ</span> <span class="string">OPENAI_API_KEY</span> <span class="string">äºŒé€‰ä¸€ï¼ŒåŒæ—¶å­˜åœ¨æ—¶ï¼ŒOPENAI_API_KEY</span> <span class="string">ä¼˜å…ˆ</span></span><br><span class="line"><span class="string">API_REVERSE_PROXY</span> <span class="string">è®¾ç½®åå‘ä»£ç†ï¼Œå¯é€‰</span> <span class="string">https://bypass.churchless.tech/api/conversation</span> <span class="string">æˆ–</span> <span class="string">https://api.pawan.krd/backend-api/conversation</span></span><br><span class="line"><span class="string">é€šç”¨ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="string">AUTH_SECRET_KEY</span> <span class="string">è®¿é—®æƒé™å¯†é’¥ï¼Œå¯é€‰</span></span><br><span class="line"><span class="string">MAX_REQUEST_PER_HOUR</span> <span class="string">æ¯å°æ—¶æœ€å¤§è¯·æ±‚æ¬¡æ•°ï¼Œå¯é€‰ï¼Œé»˜è®¤æ— é™</span></span><br><span class="line"><span class="string">TIMEOUT_MS</span> <span class="string">è¶…æ—¶ï¼Œå•ä½æ¯«ç§’ï¼Œå¯é€‰</span></span><br><span class="line"><span class="string">SOCKS_PROXY_HOST</span> <span class="string">å’Œ</span> <span class="string">SOCKS_PROXY_PORT</span> <span class="string">ä¸€èµ·æ—¶ç”Ÿæ•ˆï¼Œå¯é€‰</span></span><br><span class="line"><span class="string">SOCKS_PROXY_PORT</span> <span class="string">å’Œ</span> <span class="string">SOCKS_PROXY_HOST</span> <span class="string">ä¸€èµ·æ—¶ç”Ÿæ•ˆï¼Œå¯é€‰</span></span><br><span class="line"><span class="string">HTTPS_PROXY</span> <span class="string">æ”¯æŒ</span> <span class="string">httpï¼Œhttps,</span> <span class="string">socks5ï¼Œå¯é€‰</span></span><br><span class="line"><span class="string">ALL_PROXY</span> <span class="string">æ”¯æŒ</span> <span class="string">httpï¼Œhttps,</span> <span class="string">socks5ï¼Œå¯é€‰</span></span><br></pre></td></tr></table></figure><p>OPENAI_API_KEYè·å–åœ°å€ <a href="https://platform.openai.com/overview">https://platform.openai.com/overview</a><br><code>&lt;br&gt;</code>ACCESS_TOKENè·å–åœ°å€ <a href="https://chat.openai.com/api/auth/session">https://chat.openai.com/api/auth/session</a><br><code>&lt;br&gt;</code>å…è´¹è´¦æˆ·é€‰æ‹©ACCESS_TOKENè®¾ç½®åå‘ä»£ç†å³å¯</p><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>åœ¨æ–°å»ºçš„ç›®å½•ä¸‹æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>é»˜è®¤å®¹å™¨åä¸ºchatgpt-web-app-1</p><h3 id="æ”¾è¡Œç«¯å£"><a href="#æ”¾è¡Œç«¯å£" class="headerlink" title="æ”¾è¡Œç«¯å£"></a>æ”¾è¡Œç«¯å£</h3><p>æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®‰è£…äº†firewalld</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status firewalld</span><br></pre></td></tr></table></figure><p>å¦‚æœè¯¥å‘½ä»¤è¿”å›firewalldæœåŠ¡çš„çŠ¶æ€ï¼Œåˆ™è¯´æ˜firewalldå·²ç»å®‰è£…ã€‚å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…firewalld</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y firewalld</span><br></pre></td></tr></table></figure><p>æ‰“å¼€éœ€è¦æ”¾è¡Œçš„ç«¯å£ï¼ˆä¾‹å¦‚3002ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port=3002/tcp --permanent</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½é˜²ç«å¢™è§„åˆ™ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨ç³»ç»Ÿé‡å¯åä»ç„¶ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>äº‘æœåŠ¡å™¨é¢å¤–åœ¨æ§åˆ¶å°æ”¾è¡Œç«¯å£</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>docker</tag>
      
      <tag>chatgpt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³å½•åˆ¶éŸ³è§†é¢‘ä¸åŒæ­¥é—®é¢˜</title>
    <link href="/2023/03/23/%E8%A7%A3%E5%86%B3%E5%BD%95%E5%88%B6%E9%9F%B3%E8%A7%86%E9%A2%91%E4%B8%8D%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98/"/>
    <url>/2023/03/23/%E8%A7%A3%E5%86%B3%E5%BD%95%E5%88%B6%E9%9F%B3%E8%A7%86%E9%A2%91%E4%B8%8D%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ä½¿ç”¨opencvå½•åˆ¶è§†é¢‘ï¼ŒåŒæ—¶ä½¿ç”¨pyaudioå½•åˆ¶éŸ³é¢‘ï¼Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜<code>&lt;br&gt;</code><br>1.è§†é¢‘å½•åˆ¶å’ŒéŸ³é¢‘å½•åˆ¶æ²¡æœ‰åŒæ—¶å¯åŠ¨ï¼Œå¼€å§‹æ—¶é—´å¯¹ä¸ä¸Š<code>&lt;br&gt;</code><br>2.è§†é¢‘å½•åˆ¶æ—¶é•¿å’Œè§†é¢‘ä¿å­˜åçš„æ—¶é•¿ä¸ä¸€è‡´ï¼Œä¼šå‡ºç°è§†é¢‘å˜æ…¢çš„ç°è±¡</p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>1.ä½¿ç”¨eventäº‹ä»¶ï¼Œä½¿ä¸¤ä¸ªå½•åˆ¶åŒæ­¥å¼€å§‹<code>&lt;br&gt;</code><br>2.è¯»å–éŸ³é¢‘è§†é¢‘æ—¶é•¿ï¼Œè°ƒæ•´è§†é¢‘å¸§ç‡ï¼ŒæŠŠè§†é¢‘æ—¶é•¿è°ƒæ•´æˆå’ŒéŸ³é¢‘ä¸€æ ·é•¿ï¼Œå†æŠŠéŸ³é¢‘åˆå¹¶åˆ°è§†é¢‘ä¸­ã€‚</p><h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> pyaudio</span><br><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> *</span><br><span class="line">  </span><br><span class="line"><span class="comment">#å…¨å±€å˜é‡ï¼Œæ§åˆ¶å½•åˆ¶åœæ­¢</span></span><br><span class="line">allowRecord=<span class="literal">False</span></span><br><span class="line">cap=<span class="literal">None</span></span><br><span class="line"><span class="comment">#å½•åƒ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">record_video</span>(<span class="params">event</span>):</span><br><span class="line">    <span class="keyword">global</span> cap</span><br><span class="line">    cap=cv2.VideoCapture(<span class="number">0</span>+ cv2.CAP_DSHOW)</span><br><span class="line">    writer=cv2.VideoWriter(<span class="string">&#x27;output.mp4&#x27;</span>,cv2.VideoWriter_fourcc(*<span class="string">&#x27;MJPG&#x27;</span>),<span class="number">25</span>,(<span class="number">640</span>,<span class="number">480</span>))</span><br><span class="line">    event.<span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">global</span> allowRecord</span><br><span class="line">    allowRecord=<span class="literal">True</span><span class="comment">#å½•åˆ¶å¯åŠ¨</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å½•åƒå¼€å§‹æ—¶é—´ï¼š&#x27;</span>+datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S.%f&#x27;</span>))</span><br><span class="line">    <span class="keyword">while</span> allowRecord==<span class="literal">True</span>:</span><br><span class="line">        ret,frame=cap.read()</span><br><span class="line">        <span class="keyword">if</span> ret:</span><br><span class="line">            writer.write(frame)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å½•åƒç»“æŸæ—¶é—´ï¼š&#x27;</span>+datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S.%f&#x27;</span>))</span><br><span class="line">    allowRecord=<span class="literal">False</span></span><br><span class="line">    cap.release()</span><br><span class="line">  </span><br><span class="line"><span class="comment">#å½•éŸ³</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">record_audio</span>(<span class="params">event</span>):</span><br><span class="line">    <span class="keyword">global</span> allowRecord</span><br><span class="line">    <span class="comment">#ç­‰å¾…eventå¯åŠ¨å½•åˆ¶éŸ³é¢‘</span></span><br><span class="line">    p=pyaudio.PyAudio()</span><br><span class="line">    <span class="keyword">global</span> stream</span><br><span class="line">    stream=p.<span class="built_in">open</span>(<span class="built_in">format</span>=pyaudio.paInt16,channels=<span class="number">1</span>,rate=<span class="number">16000</span>,<span class="built_in">input</span>=<span class="literal">True</span>,frames_per_buffer=<span class="number">1024</span>)</span><br><span class="line">    wf = wave.<span class="built_in">open</span>(<span class="string">&#x27;output.wav&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    wf.setnchannels(<span class="number">1</span>)</span><br><span class="line">    wf.setsampwidth(p.get_sample_size(pyaudio.paInt16))</span><br><span class="line">    wf.setframerate(<span class="number">16000</span>)</span><br><span class="line">    event.wait()</span><br><span class="line">    <span class="comment">#è¾“å‡ºæ—¶é—´æˆ³,ç²¾ç¡®åˆ°æ¯«ç§’</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å½•éŸ³å¼€å§‹æ—¶é—´ï¼š&#x27;</span>+datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S.%f&#x27;</span>))</span><br><span class="line">    <span class="keyword">while</span> allowRecord==<span class="literal">True</span>:</span><br><span class="line">        data=stream.read(<span class="number">1024</span>)</span><br><span class="line">        wf.writeframes(data)</span><br><span class="line">    wf.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å½•éŸ³ç»“æŸæ—¶é—´ï¼š&#x27;</span>+datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S.%f&#x27;</span>))</span><br><span class="line">    stream.stop_stream()  <span class="comment"># å…³é—­æµ</span></span><br><span class="line">    stream.close()</span><br><span class="line">    p.terminate()</span><br><span class="line">  </span><br><span class="line"><span class="comment">#åˆå¹¶è§†é¢‘éŸ³é¢‘</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge_video_audio</span>(<span class="params">video_path,audio_path</span>):</span><br><span class="line">    audioclip = AudioFileClip(audio_path)</span><br><span class="line">    videoclip = VideoFileClip(video_path)</span><br><span class="line">    videoclip2 = videoclip.set_audio(audioclip)</span><br><span class="line">    video = CompositeVideoClip([videoclip2])</span><br><span class="line">    filename=datetime.now().strftime(<span class="string">&#x27;%Y%m%d%H%M%S&#x27;</span>)</span><br><span class="line">    video.write_videofile(filename+<span class="string">&#x27;.mp4&#x27;</span>, codec=<span class="string">&#x27;mpeg4&#x27;</span>, bitrate=<span class="string">&#x27;1000K&#x27;</span>) <span class="comment"># bitrate è®¾ç½®æ¯”ç‰¹ç‡ï¼Œæ¯”ç‰¹ç‡è¶Šé«˜ï¼Œ åˆå¹¶çš„è§†é¢‘è¶Šæ¸…æ™°ï¼Œè§†é¢‘æ–‡ä»¶ä¹Ÿè¶Šå¤§</span></span><br><span class="line">    audioclip.close()</span><br><span class="line">    videoclip.close()</span><br><span class="line">    videoclip2.close()</span><br><span class="line">    video.close()</span><br><span class="line">    <span class="comment">#åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹å,å…³é—­æ‰€æœ‰åŒ…å«&#x27;ffmpeg&#x27;çš„è¿›ç¨‹</span></span><br><span class="line">    process_names=os.popen(<span class="string">&#x27;tasklist&#x27;</span>).readlines()</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> process_names:</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;ffmpeg&#x27;</span> <span class="keyword">in</span> name:</span><br><span class="line">            os.system(<span class="string">&#x27;taskkill /f /im &#x27;</span>+name.split()[<span class="number">0</span>])</span><br><span class="line">    os.remove(video_path)</span><br><span class="line">    os.remove(<span class="string">&#x27;output.mp4&#x27;</span>)</span><br><span class="line">    os.rename(audio_path, filename+<span class="string">&#x27;.wav&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;éŸ³è§†é¢‘åˆå¹¶æˆåŠŸï¼š&#x27;</span>+filename+<span class="string">&#x27;.mp4&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢å½•åˆ¶</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stop_record</span>():</span><br><span class="line">    <span class="keyword">global</span> allowRecord</span><br><span class="line">    allowRecord=<span class="literal">False</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">record_video_with_audio</span>():</span><br><span class="line">    event=threading.Event()</span><br><span class="line">    event.clear()</span><br><span class="line">    t1=threading.Thread(target=record_video,args=(event,))</span><br><span class="line">    t2=threading.Thread(target=record_audio,args=(event,))</span><br><span class="line">    <span class="comment">#åŒæ­¥å¼€å¯å½•åˆ¶</span></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="keyword">while</span> allowRecord==<span class="literal">False</span>:<span class="comment">#ç­‰å¾…å½•åˆ¶å¯åŠ¨</span></span><br><span class="line">        time.sleep(<span class="number">0.05</span>)</span><br><span class="line">    <span class="keyword">while</span> allowRecord:<span class="comment">#ç­‰å¾…å½•åˆ¶åœæ­¢</span></span><br><span class="line">        time.sleep(<span class="number">0.05</span>)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">#ç»“æŸçº¿ç¨‹</span></span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    video_path=<span class="string">&#x27;output.mp4&#x27;</span></span><br><span class="line">    audio_path=<span class="string">&#x27;output.wav&#x27;</span></span><br><span class="line">    <span class="comment">#æŸ¥çœ‹æ—¶é•¿</span></span><br><span class="line">    video_time=VideoFileClip(video_path).duration</span><br><span class="line">    audio_time=AudioFileClip(audio_path).duration</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è§†é¢‘æ—¶é•¿ï¼š&#x27;</span>+<span class="built_in">str</span>(video_time)+<span class="string">&#x27; s&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;éŸ³é¢‘æ—¶é•¿ï¼š&#x27;</span>+<span class="built_in">str</span>(audio_time)+<span class="string">&#x27; s&#x27;</span>)</span><br><span class="line">    <span class="comment">#æŠŠè§†é¢‘å‹ç¼©çš„å’ŒéŸ³é¢‘ä¸€æ ·é•¿</span></span><br><span class="line">    <span class="comment"># Load the video</span></span><br><span class="line">    video = cv2.VideoCapture(video_path)</span><br><span class="line">    <span class="comment"># Get the frame rate</span></span><br><span class="line">    fps = video.get(cv2.CAP_PROP_FPS)</span><br><span class="line">    new_fps=video_time/audio_time*fps</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è°ƒæ•´è§†é¢‘å¸§ç‡ä¸ºï¼š&#x27;</span>+<span class="built_in">str</span>(new_fps))</span><br><span class="line">    <span class="comment"># Set the frame rate</span></span><br><span class="line">    video.<span class="built_in">set</span>(cv2.CAP_PROP_FPS, new_fps)</span><br><span class="line">    video_writer = cv2.VideoWriter(<span class="string">&#x27;output_new.mp4&#x27;</span>, cv2.VideoWriter_fourcc(*<span class="string">&#x27;MJPG&#x27;</span>), new_fps, (<span class="number">640</span>, <span class="number">480</span>))</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># Read the next frame</span></span><br><span class="line">        success, frame = video.read()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> success:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># Write the frame to the output video</span></span><br><span class="line">        video_writer.write(frame)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Release the video</span></span><br><span class="line">    video.release()</span><br><span class="line">    video_writer.release()</span><br><span class="line">    t=threading.Thread(target=merge_video_audio,args=(<span class="string">&#x27;output_new.mp4&#x27;</span>,<span class="string">&#x27;output.wav&#x27;</span>))</span><br><span class="line">    t.start()</span><br><span class="line">  </span><br><span class="line">t=threading.Thread(target=record_video_with_audio)</span><br><span class="line">t.start()</span><br><span class="line">time.sleep(<span class="number">10</span>)<span class="comment">#å½•åˆ¶10s</span></span><br><span class="line">stop_record()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>éŸ³ç”»åŒæ­¥</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äººè„¸å…³é”®ç‚¹æ£€æµ‹åŠäººè„¸åˆ†å‰²</title>
    <link href="/2023/03/23/%E4%BA%BA%E8%84%B8%E5%85%B3%E9%94%AE%E7%82%B9%E6%A3%80%E6%B5%8B%E5%8F%8A%E4%BA%BA%E8%84%B8%E5%88%86%E5%89%B2/"/>
    <url>/2023/03/23/%E4%BA%BA%E8%84%B8%E5%85%B3%E9%94%AE%E7%82%B9%E6%A3%80%E6%B5%8B%E5%8F%8A%E4%BA%BA%E8%84%B8%E5%88%86%E5%89%B2/</url>
    
    <content type="html"><![CDATA[<p>äººè„¸å…³é”®ç‚¹æ£€æµ‹ï¼Œè¾“å…¥opencvæ ¼å¼çš„bgré€šé“å›¾ï¼Œé»˜è®¤åœ¨è¾“å…¥å›¾ä¸Šç”»å…³é”®ç‚¹ï¼Œä¹Ÿå¯ä»¥åœ¨ç©ºç™½å›¾ä¸Šç”»ï¼Œå¦‚æœè¦åˆ†å‰²å‡ºäººè„¸ï¼Œå¯ä»¥ä½¿ç”¨çŸ©å½¢æ¡†æ¡†ä½å…³é”®ç‚¹ï¼Œç„¶ååœ¨åŸå›¾ä¸Šè£å‰ªï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæˆåŠŸæ¡ˆä¾‹ã€‚</p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mediapipe <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># è¾“å…¥bgré€šé“å›¾ï¼Œè¾“å‡ºäººè„¸ç½‘ç‚¹å›¾</span></span><br><span class="line"><span class="comment"># mode=1åœ¨åŸå›¾ä¸Šç”»ï¼Œmode=2åœ¨ç©ºç™½å›¾ä¸Šç”»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_face</span>(<span class="params">image,mode=<span class="number">1</span></span>):</span><br><span class="line">    mp_drawing = mp.solutions.drawing_utils</span><br><span class="line">    mp_face_mesh = mp.solutions.face_mesh</span><br><span class="line">    drawing_spec = mp_drawing.DrawingSpec(thickness=<span class="number">1</span>, circle_radius=<span class="number">1</span>, color=(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))<span class="comment">#bgr</span></span><br><span class="line">    <span class="keyword">with</span> mp_face_mesh.FaceMesh(</span><br><span class="line">        max_num_faces=<span class="number">2</span>,</span><br><span class="line">        min_detection_confidence=<span class="number">0.5</span>,</span><br><span class="line">        min_tracking_confidence=<span class="number">0.5</span>) <span class="keyword">as</span> face_mesh:</span><br><span class="line">        image = cv2.cvtColor(cv2.flip(image, <span class="number">1</span>), cv2.COLOR_BGR2RGB)</span><br><span class="line">        <span class="comment"># To improve performance, optionally mark the image as not writeable to</span></span><br><span class="line">        <span class="comment"># pass by reference.</span></span><br><span class="line">        image.flags.writeable = <span class="literal">False</span></span><br><span class="line">        results = face_mesh.process(image)</span><br><span class="line"> </span><br><span class="line">        <span class="comment"># Draw the face mesh annotations on the image.</span></span><br><span class="line">        <span class="comment"># and print landmarks&#x27; id, x, y, z </span></span><br><span class="line">        image.flags.writeable = <span class="literal">True</span></span><br><span class="line">        image = cv2.cvtColor(image, cv2.COLOR_RGB2BGR)</span><br><span class="line">        <span class="keyword">if</span> mode==<span class="number">1</span>:</span><br><span class="line">            mask=image</span><br><span class="line">          </span><br><span class="line">        <span class="keyword">elif</span> mode==<span class="number">2</span>:</span><br><span class="line">            <span class="comment">#æ–°å»ºç©ºç™½å›¾</span></span><br><span class="line">            mask=np.zeros(image.shape,dtype=np.uint8)</span><br><span class="line">        <span class="keyword">if</span> results.multi_face_landmarks:</span><br><span class="line">            <span class="keyword">for</span> face_landmarks <span class="keyword">in</span> results.multi_face_landmarks:</span><br><span class="line">                <span class="comment"># Draw landmarks on the image.</span></span><br><span class="line">                mp_drawing.draw_landmarks(</span><br><span class="line">                    image=mask,<span class="comment">#åœ¨ç©ºç™½å›¾ä¸Šç”»</span></span><br><span class="line">                    landmark_list=face_landmarks,</span><br><span class="line">                    connections=mp_face_mesh.FACEMESH_CONTOURS,</span><br><span class="line">                    landmark_drawing_spec=drawing_spec,</span><br><span class="line">                    connection_drawing_spec=drawing_spec)</span><br><span class="line">                <span class="comment"># print id, x, y, z</span></span><br><span class="line">                <span class="comment"># time cost </span></span><br><span class="line">                <span class="keyword">if</span> mode==<span class="number">2</span>:</span><br><span class="line">                    xs=[]</span><br><span class="line">                    ys=[]</span><br><span class="line">                    zs=[]</span><br><span class="line">                    <span class="keyword">for</span> <span class="built_in">id</span>,lm <span class="keyword">in</span> <span class="built_in">enumerate</span>(face_landmarks.landmark):</span><br><span class="line">                        ih, iw, ic = image.shape</span><br><span class="line">                        x,y = <span class="built_in">int</span>(lm.x*iw), <span class="built_in">int</span>(lm.y*ih)</span><br><span class="line">                        xs.append(x)</span><br><span class="line">                        ys.append(y)</span><br><span class="line">                        zs.append(lm.z)</span><br><span class="line">                        <span class="comment"># print(id, x,y,lm.z)</span></span><br><span class="line">                    <span class="comment">#ç”¨çŸ©å½¢æ¡†ä½è¿™äº›ç‚¹</span></span><br><span class="line">                    box=cv2.boundingRect(np.array([xs,ys]).T)</span><br><span class="line">                    <span class="comment">#è£å‰ªåŸå›¾</span></span><br><span class="line">                    face=mask[box[<span class="number">1</span>]:box[<span class="number">1</span>]+box[<span class="number">3</span>],box[<span class="number">0</span>]:box[<span class="number">0</span>]+box[<span class="number">2</span>]]</span><br><span class="line">                    <span class="comment">#ä¿æŒæ¯”ä¾‹ç¼©æ”¾åˆ°128*128</span></span><br><span class="line">                    <span class="keyword">return</span> face</span><br><span class="line">                <span class="keyword">elif</span> mode==<span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">return</span> mask</span><br><span class="line">    <span class="comment">#æ²¡æœ‰äººè„¸              </span></span><br><span class="line">    <span class="keyword">if</span> mode==<span class="number">1</span>:  </span><br><span class="line">        <span class="keyword">return</span> image</span><br><span class="line">    <span class="keyword">elif</span> mode==<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> np.zeros(image.shape,dtype=np.uint8)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
      <tag>äººè„¸æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç™¾åº¦çŸ­è¯­éŸ³è½¬æ–‡å­—APIè°ƒç”¨</title>
    <link href="/2023/03/23/%E7%99%BE%E5%BA%A6%E7%9F%AD%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%96%87%E5%AD%97API%E8%B0%83%E7%94%A8/"/>
    <url>/2023/03/23/%E7%99%BE%E5%BA%A6%E7%9F%AD%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%96%87%E5%AD%97API%E8%B0%83%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>ç™¾åº¦çš„è¯­éŸ³è½¬æ–‡å­—APIåªæ”¯æŒæœ€é•¿60sçš„è¯­éŸ³ï¼Œå¦‚æœè¦è¯†åˆ«é•¿è¯­éŸ³ï¼Œéœ€è¦å…ˆåˆ‡åˆ†ï¼Œè¯†åˆ«åå†æŠŠç»“æœåˆå¹¶ã€‚éŸ³é¢‘é‡‡æ ·ç‡å’Œå£°é“æ•°å¥½åƒä¹Ÿæœ‰å½±å“ï¼Œéœ€è¦åšä¿®æ”¹ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªæˆåŠŸæ¡ˆä¾‹ã€‚</p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech  <span class="comment"># baidu_aip</span></span><br><span class="line"><span class="keyword">from</span> pydub <span class="keyword">import</span> AudioSegment</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment">#è¾“å…¥éŸ³é¢‘ï¼Œè¾“å‡ºæ–‡æœ¬</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">audio_to_text</span>(<span class="params">audio_path</span>):</span><br><span class="line">    APP_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    API_KEY = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    client = AipSpeech(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line">    audio = AudioSegment.from_wav(audio_path)</span><br><span class="line">    <span class="comment">#è·å–æ—¶é•¿</span></span><br><span class="line">    audio_length = audio.duration_seconds</span><br><span class="line">    <span class="comment">#é‡‡æ ·ç‡æ”¹æˆ16000</span></span><br><span class="line">    audio=audio.set_frame_rate(<span class="number">16000</span>)</span><br><span class="line">    <span class="comment">#å£°é“æ”¹æˆå•å£°é“</span></span><br><span class="line">    audio=audio.set_channels(<span class="number">1</span>)</span><br><span class="line">    max_len=<span class="number">60</span></span><br><span class="line">    audios=[]</span><br><span class="line">    <span class="keyword">if</span> audio_length&gt;max_len:</span><br><span class="line">    <span class="comment">#åˆ†ç‰‡ï¼Œæ¯ç‰‡60s</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(audio_length//max_len)):</span><br><span class="line">            audios.append(audio[i*max_len*<span class="number">1000</span>:(i+<span class="number">1</span>)*max_len*<span class="number">1000</span>])</span><br><span class="line">        audios.append(audio[<span class="built_in">int</span>(audio_length//max_len)*max_len*<span class="number">1000</span>:])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        audios.append(audio)</span><br><span class="line">    <span class="comment">#è°ƒç”¨api</span></span><br><span class="line">    results=<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(audios)):</span><br><span class="line">        audios[i].export(<span class="string">&#x27;temp.wav&#x27;</span>,<span class="built_in">format</span>=<span class="string">&#x27;wav&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;temp.wav&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">            result = client.asr(fp.read(), <span class="string">&#x27;wav&#x27;</span>, <span class="number">16000</span>, &#123;<span class="string">&#x27;dev_pid&#x27;</span>: <span class="number">1537</span>,&#125;)</span><br><span class="line">        <span class="keyword">if</span> result[<span class="string">&#x27;err_no&#x27;</span>] == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(result[<span class="string">&#x27;result&#x27;</span>][<span class="number">0</span>])</span><br><span class="line">            results=results+result[<span class="string">&#x27;result&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(result[<span class="string">&#x27;err_msg&#x27;</span>])  </span><br><span class="line">    os.remove(<span class="string">&#x27;temp.wav&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>è¯­éŸ³è½¬æ–‡å­—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>npmæ¢æº</title>
    <link href="/2023/03/21/npm%E6%8D%A2%E6%BA%90/"/>
    <url>/2023/03/21/npm%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<h1 id="npmæ¢æº"><a href="#npmæ¢æº" class="headerlink" title="npmæ¢æº"></a>npmæ¢æº</h1><h2 id="æŸ¥çœ‹å½“å‰æº"><a href="#æŸ¥çœ‹å½“å‰æº" class="headerlink" title="æŸ¥çœ‹å½“å‰æº"></a>æŸ¥çœ‹å½“å‰æº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ˜¯æŒ‡å‘ <a href="https://registry.npmjs.org/%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%AE%98%E6%96%B9%E6%BA%90%E3%80%82">https://registry.npmjs.org/ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹æºã€‚</a></p><h2 id="æ›´æ¢æº"><a href="#æ›´æ¢æº" class="headerlink" title="æ›´æ¢æº"></a>æ›´æ¢æº</h2><p>æ–°æ·˜å®æºï¼Œä¸€äº›æ–‡ç« è¿˜æ˜¯å†™ç€æ—§çš„æ·˜å® NPM é•œåƒ registry.npm.taobao.orgï¼Œä½†å®ƒå·²äº 2022 å¹´ 05 æœˆ 31 æ—¥ åºŸå¼ƒï¼Œè¯»è€…éœ€è¦æ›´æ¢ä¸ºæ–°çš„ registry.npmmirror.com æºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®ä¼šæŒä¹…åŒ–ä¿å­˜åˆ° ~&#x2F;.npmrc æ–‡ä»¶ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨æ”¹è¯¥æ–‡ä»¶æ¥ä¿®æ”¹é…ç½®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>yolov5å•ç›®æ ‡æ£€æµ‹ç®€åŒ–æ”¹è¿›</title>
    <link href="/2022/12/07/yolov5%E5%8D%95%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E7%AE%80%E5%8C%96%E6%94%B9%E8%BF%9B/"/>
    <url>/2022/12/07/yolov5%E5%8D%95%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E7%AE%80%E5%8C%96%E6%94%B9%E8%BF%9B/</url>
    
    <content type="html"><![CDATA[<p>backboneéƒ¨åˆ†,å»æ‰äº†7.8ä¸¤å±‚çš„convå’Œc3,åªåšåˆ°16å€ä¸‹é‡‡æ ·</p><p>headéƒ¨åˆ†,å»æ‰æ‰€æœ‰concat,3ä¸ªæ£€æµ‹å±‚æ”¹ä¸º1ä¸ª</p><p>Model size:3.63M-&gt;1.01M</p><p>Params:1.7M-&gt;0.45M</p><p>FLOPs:4.1G-&gt;2.8G</p><p>mAP:81.46-&gt;81.96</p><p>ä¸»è¦åŸå› åº”è¯¥æ˜¯å¯¹äºæˆ‘çš„æ£€æµ‹ä»»åŠ¡ï¼Œå¾…æ£€æµ‹ç›®æ ‡çš„å¤§å°å‡ ä¹ä¸ä¼šæœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œä¸”å’Œ16å€ä¸‹é‡‡æ ·åæ¯ä¸ªcellçš„æ„Ÿå—é‡å¤§å°ä¸€è‡´ã€‚</p><h3 id="åŸyolov5n-yaml"><a href="#åŸyolov5n-yaml" class="headerlink" title="åŸyolov5n.yaml"></a>åŸyolov5n.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Parameters</span></span><br><span class="line"><span class="attr">nc:</span> <span class="number">1</span>  <span class="comment"># number of classes</span></span><br><span class="line"><span class="attr">depth_multiple:</span> <span class="number">0.33</span>  <span class="comment"># model depth multiple</span></span><br><span class="line"><span class="attr">width_multiple:</span> <span class="number">0.25</span>  <span class="comment"># layer channel multiple</span></span><br><span class="line"><span class="attr">anchors:</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="number">10</span>,<span class="number">13</span>, <span class="number">16</span>,<span class="number">30</span>, <span class="number">33</span>,<span class="number">23</span>]  <span class="comment"># P3/8</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="number">30</span>,<span class="number">61</span>, <span class="number">62</span>,<span class="number">45</span>, <span class="number">59</span>,<span class="number">119</span>]  <span class="comment"># P4/16</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="number">116</span>,<span class="number">90</span>, <span class="number">156</span>,<span class="number">198</span>, <span class="number">373</span>,<span class="number">326</span>]  <span class="comment"># P5/32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YOLOv5 v6.0 backbone</span></span><br><span class="line"><span class="attr">backbone:</span></span><br><span class="line">  <span class="comment"># [from, number, module, args]</span></span><br><span class="line">  [[<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">64</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">2</span>]],  <span class="comment"># 0-P1/2</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">128</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 1-P2/4</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">128</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">256</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 3-P3/8</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">6</span>, <span class="string">C3</span>, [<span class="number">256</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">512</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 5-P4/16</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">9</span>, <span class="string">C3</span>, [<span class="number">512</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">1024</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 7-P5/32</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">1024</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">SPPF</span>, [<span class="number">1024</span>, <span class="number">5</span>]],  <span class="comment"># 9</span></span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># YOLOv5 v6.0 head</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line">  [[<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">512</span>, <span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">nn.Upsample</span>, [<span class="string">None</span>, <span class="number">2</span>, <span class="string">&#x27;nearest&#x27;</span>]],</span><br><span class="line">   [[<span class="number">-1</span>, <span class="number">6</span>], <span class="number">1</span>, <span class="string">Concat</span>, [<span class="number">1</span>]],  <span class="comment"># cat backbone P4</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">512</span>, <span class="literal">False</span>]],  <span class="comment"># 13</span></span><br><span class="line"></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">256</span>, <span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">nn.Upsample</span>, [<span class="string">None</span>, <span class="number">2</span>, <span class="string">&#x27;nearest&#x27;</span>]],</span><br><span class="line">   [[<span class="number">-1</span>, <span class="number">4</span>], <span class="number">1</span>, <span class="string">Concat</span>, [<span class="number">1</span>]],  <span class="comment"># cat backbone P3</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">256</span>, <span class="literal">False</span>]],  <span class="comment"># 17 (P3/8-small)</span></span><br><span class="line"></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">256</span>, <span class="number">3</span>, <span class="number">2</span>]],</span><br><span class="line">   [[<span class="number">-1</span>, <span class="number">14</span>], <span class="number">1</span>, <span class="string">Concat</span>, [<span class="number">1</span>]],  <span class="comment"># cat head P4</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">512</span>, <span class="literal">False</span>]],  <span class="comment"># 20 (P4/16-medium)</span></span><br><span class="line"></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">512</span>, <span class="number">3</span>, <span class="number">2</span>]],</span><br><span class="line">   [[<span class="number">-1</span>, <span class="number">10</span>], <span class="number">1</span>, <span class="string">Concat</span>, [<span class="number">1</span>]],  <span class="comment"># cat head P5</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">1024</span>, <span class="literal">False</span>]],  <span class="comment"># 23 (P5/32-large)</span></span><br><span class="line"></span><br><span class="line">   [[<span class="number">17</span>, <span class="number">20</span>, <span class="number">23</span>], <span class="number">1</span>, <span class="string">Detect</span>, [<span class="string">nc</span>, <span class="string">anchors</span>]],  <span class="comment"># Detect(P3, P4, P5)</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><h3 id="yolov5-new-yaml"><a href="#yolov5-new-yaml" class="headerlink" title="yolov5_new.yaml"></a>yolov5_new.yaml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Parameters</span></span><br><span class="line"><span class="attr">nc:</span> <span class="number">1</span>  <span class="comment"># number of classes</span></span><br><span class="line"><span class="attr">depth_multiple:</span> <span class="number">1</span>  <span class="comment"># model depth multiple</span></span><br><span class="line"><span class="attr">width_multiple:</span> <span class="number">1</span>  <span class="comment"># layer channel multiple</span></span><br><span class="line"><span class="attr">anchors:</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="number">71.741</span>,<span class="number">66.536</span>,<span class="number">69.588</span>,<span class="number">70.286</span>,<span class="number">73.263</span>,<span class="number">72.851</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># YOLOv5 v6.0 backbone</span></span><br><span class="line"><span class="attr">backbone:</span></span><br><span class="line">  <span class="comment"># [from, number, module, args]</span></span><br><span class="line">  [[<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">16</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">2</span>]],  <span class="comment"># 0-P1/2</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">32</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 1-P2/4</span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">C3</span>, [<span class="number">32</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">64</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 3-P3/8 </span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">2</span>, <span class="string">C3</span>, [<span class="number">64</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">128</span>, <span class="number">3</span>, <span class="number">2</span>]],  <span class="comment"># 5-P4/16 </span></span><br><span class="line">   [<span class="number">-1</span>, <span class="number">3</span>, <span class="string">C3</span>, [<span class="number">128</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">SPPF</span>, [<span class="number">256</span>, <span class="number">5</span>]],  <span class="comment"># 7</span></span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># YOLOv5 v6.0 head</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line">  [</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">Conv</span>, [<span class="number">128</span>, <span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line">   [<span class="number">-1</span>, <span class="number">1</span>, <span class="string">C3</span>, [<span class="number">128</span>, <span class="literal">False</span>]],  <span class="comment"># 9 (P4/16-medium)</span></span><br><span class="line"></span><br><span class="line">   [[<span class="number">9</span>], <span class="number">1</span>, <span class="string">Detect</span>, [<span class="string">nc</span>, <span class="string">anchors</span>]],  <span class="comment"># Detect(P4)</span></span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yoloxå°ç›®æ ‡æ£€æµ‹æ”¹è¿›ï¼ˆåˆ é™¤æ„Ÿå—é‡å¤§çš„ç‰¹å¾å›¾ï¼‰</title>
    <link href="/2022/10/24/yolox%E5%B0%8F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%94%B9%E8%BF%9B%EF%BC%88%E5%88%A0%E9%99%A4%E6%84%9F%E5%8F%97%E9%87%8E%E5%A4%A7%E7%9A%84%E7%89%B9%E5%BE%81%E5%9B%BE%EF%BC%89/"/>
    <url>/2022/10/24/yolox%E5%B0%8F%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%94%B9%E8%BF%9B%EF%BC%88%E5%88%A0%E9%99%A4%E6%84%9F%E5%8F%97%E9%87%8E%E5%A4%A7%E7%9A%84%E7%89%B9%E5%BE%81%E5%9B%BE%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>yoloxä¸­æœ‰3ä¸ªæ£€æµ‹åˆ†æ”¯ï¼Œåˆ†åˆ«é¢„æµ‹å°ã€ä¸­ã€å¤§çš„ç›®æ ‡<br><img src="https://xinhaojin.github.io/imgs-host/20221010/41.png"><br>ä½†åœ¨æˆ‘çš„æ•°æ®é›†ä¸Šï¼Œå¹¶ä¸éœ€è¦é¢„æµ‹å¤§ç›®æ ‡ï¼Œç”šè‡³è¿˜è¦æ‰‹åŠ¨å»æ‰é”™è¯¯çš„å¤§é¢„æµ‹æ¡†ï¼Œå› æ­¤æœ‰ä¸€ä¸ªæƒ³æ³•æ˜¯å»æ‰ä¸€ä¸ªæœ€æ·±çš„æ£€æµ‹åˆ†æ”¯ï¼Œä½¿ç½‘ç»œé¢„æµ‹å¤§ç›®æ ‡çš„èƒ½åŠ›ä¸‹é™ï¼Œæ•´ä½“æ„Ÿå—é‡å˜å°ï¼Œå¯¹å°ç›®æ ‡æ›´åŠ æ•æ„Ÿã€‚</p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p><strong>ä¿®æ”¹yolox&#x2F;models&#x2F;yolo_head.py</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">YOLOXHead</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        num_classes,</span></span><br><span class="line"><span class="params">        width=<span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        <span class="comment"># strides=[8, 16, 32],</span></span></span><br><span class="line"><span class="params">        <span class="comment"># in_channels=[256, 512, 1024],</span></span></span><br><span class="line"><span class="params">        strides=[<span class="number">8</span>, <span class="number">16</span>],</span></span><br><span class="line"><span class="params">        in_channels=[<span class="number">256</span>, <span class="number">512</span>],</span></span><br><span class="line"><span class="params">        act=<span class="string">&quot;silu&quot;</span>,</span></span><br><span class="line"><span class="params">        depthwise=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            act (str): activation type of conv. Defalut value: &quot;silu&quot;.</span></span><br><span class="line"><span class="string">            depthwise (bool): whether apply depthwise conv in conv branch. Defalut value: False.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹yolox&#x2F;models&#x2F;darknet.py</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CSPDarknet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        dep_mul,</span></span><br><span class="line"><span class="params">        wid_mul,</span></span><br><span class="line"><span class="params">        out_features=(<span class="params"><span class="string">&quot;dark3&quot;</span>, <span class="string">&quot;dark4&quot;</span></span>),</span></span><br><span class="line"><span class="params">        <span class="comment"># out_features=(&quot;dark3&quot;, &quot;dark4&quot;, &quot;dark5&quot;),</span></span></span><br><span class="line"><span class="params">        depthwise=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        act=<span class="string">&quot;silu&quot;</span>,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">    <span class="comment">#......</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        outputs = &#123;&#125;</span><br><span class="line">        x = <span class="variable language_">self</span>.stem(x)</span><br><span class="line">        outputs[<span class="string">&quot;stem&quot;</span>] = x</span><br><span class="line">        x = <span class="variable language_">self</span>.dark2(x)</span><br><span class="line">        outputs[<span class="string">&quot;dark2&quot;</span>] = x</span><br><span class="line">        x = <span class="variable language_">self</span>.dark3(x)</span><br><span class="line">        outputs[<span class="string">&quot;dark3&quot;</span>] = x</span><br><span class="line">        x = <span class="variable language_">self</span>.dark4(x)</span><br><span class="line">        outputs[<span class="string">&quot;dark4&quot;</span>] = x</span><br><span class="line">        <span class="comment"># x = self.dark5(x)</span></span><br><span class="line">        <span class="comment"># outputs[&quot;dark5&quot;] = x</span></span><br><span class="line">        <span class="keyword">return</span> &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> outputs.items() <span class="keyword">if</span> k <span class="keyword">in</span> <span class="variable language_">self</span>.out_features&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹yolox&#x2F;models&#x2F;yolo_pafpn.py</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">YOLOPAFPN</span>(nn.Module):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    YOLOv3 model. Darknet 53 is the default backbone of this model.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        depth=<span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        width=<span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        <span class="comment"># in_features=(&quot;dark3&quot;, &quot;dark4&quot;, &quot;dark5&quot;),</span></span></span><br><span class="line"><span class="params">        <span class="comment"># in_channels=[256, 512, 1024],</span></span></span><br><span class="line"><span class="params">        in_features=(<span class="params"><span class="string">&quot;dark3&quot;</span>, <span class="string">&quot;dark4&quot;</span></span>),</span></span><br><span class="line"><span class="params">        in_channels=[<span class="number">256</span>, <span class="number">512</span>],</span></span><br><span class="line"><span class="params">        depthwise=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        act=<span class="string">&quot;silu&quot;</span>,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.backbone = CSPDarknet(depth, width, depthwise=depthwise, act=act)</span><br><span class="line">        <span class="variable language_">self</span>.in_features = in_features</span><br><span class="line">        <span class="variable language_">self</span>.in_channels = in_channels</span><br><span class="line">        Conv = DWConv <span class="keyword">if</span> depthwise <span class="keyword">else</span> BaseConv</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.upsample = nn.Upsample(scale_factor=<span class="number">2</span>, mode=<span class="string">&quot;nearest&quot;</span>)</span><br><span class="line">        <span class="comment"># self.lateral_conv0 = BaseConv(</span></span><br><span class="line">        <span class="comment">#     int(in_channels[2] * width), int(in_channels[1] * width), 1, 1, act=act</span></span><br><span class="line">        <span class="comment"># )</span></span><br><span class="line">        <span class="comment"># self.C3_p4 = CSPLayer(</span></span><br><span class="line">        <span class="comment">#     int(2 * in_channels[1] * width),</span></span><br><span class="line">        <span class="comment">#     int(in_channels[1] * width),</span></span><br><span class="line">        <span class="comment">#     round(3 * depth),</span></span><br><span class="line">        <span class="comment">#     False,</span></span><br><span class="line">        <span class="comment">#     depthwise=depthwise,</span></span><br><span class="line">        <span class="comment">#     act=act,</span></span><br><span class="line">        <span class="comment"># )  # cat</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.reduce_conv1 = BaseConv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="number">1</span>, <span class="number">1</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_p3 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># bottom-up conv</span></span><br><span class="line">        <span class="variable language_">self</span>.bu_conv2 = Conv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="number">3</span>, <span class="number">2</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_n3 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># bottom-up conv</span></span><br><span class="line">        <span class="comment"># self.bu_conv1 = Conv(</span></span><br><span class="line">        <span class="comment">#     int(in_channels[1] * width), int(in_channels[1] * width), 3, 2, act=act</span></span><br><span class="line">        <span class="comment"># )</span></span><br><span class="line">        <span class="comment"># self.C3_n4 = CSPLayer(</span></span><br><span class="line">        <span class="comment">#     int(2 * in_channels[1] * width),</span></span><br><span class="line">        <span class="comment">#     int(in_channels[2] * width),</span></span><br><span class="line">        <span class="comment">#     round(3 * depth),</span></span><br><span class="line">        <span class="comment">#     False,</span></span><br><span class="line">        <span class="comment">#     depthwise=depthwise,</span></span><br><span class="line">        <span class="comment">#     act=act,</span></span><br><span class="line">        <span class="comment"># )</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, <span class="built_in">input</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            inputs: input images.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            Tuple[Tensor]: FPN feature.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#  backbone</span></span><br><span class="line">        out_features = <span class="variable language_">self</span>.backbone(<span class="built_in">input</span>)</span><br><span class="line">        features = [out_features[f] <span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable language_">self</span>.in_features]</span><br><span class="line">        <span class="comment">#[x2, x1, x0] = features</span></span><br><span class="line">        [x2,x1] = features<span class="comment">#256,512</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># fpn_out0 = self.lateral_conv0(x0)  # 1024-&gt;512/32</span></span><br><span class="line">        <span class="comment"># f_out0 = self.upsample(fpn_out0)  # 512/16</span></span><br><span class="line">        <span class="comment"># f_out0 = torch.cat([f_out0, x1], 1)  # 512-&gt;1024/16</span></span><br><span class="line">        <span class="comment"># f_out0 = self.C3_p4(f_out0)  # 1024-&gt;512/16</span></span><br><span class="line"></span><br><span class="line">        fpn_out1 = <span class="variable language_">self</span>.reduce_conv1(x1)  <span class="comment"># 512-&gt;256/16</span></span><br><span class="line">        <span class="comment"># fpn_out1 = self.reduce_conv1(f_out0)  # 512-&gt;256/16</span></span><br><span class="line">        f_out1 = <span class="variable language_">self</span>.upsample(fpn_out1)  <span class="comment"># 256/8</span></span><br><span class="line">        f_out1 = torch.cat([f_out1, x2], <span class="number">1</span>)  <span class="comment"># 256-&gt;512/8</span></span><br><span class="line">        pan_out2 = <span class="variable language_">self</span>.C3_p3(f_out1)  <span class="comment"># 512-&gt;256/8</span></span><br><span class="line"></span><br><span class="line">        p_out1 = <span class="variable language_">self</span>.bu_conv2(pan_out2)  <span class="comment"># 256-&gt;256/16</span></span><br><span class="line">        p_out1 = torch.cat([p_out1, fpn_out1], <span class="number">1</span>)  <span class="comment"># 256-&gt;512/16</span></span><br><span class="line">        pan_out1 = <span class="variable language_">self</span>.C3_n3(p_out1)  <span class="comment"># 512-&gt;512/16</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># p_out0 = self.bu_conv1(pan_out1)  # 512-&gt;512/32</span></span><br><span class="line">        <span class="comment"># p_out0 = torch.cat([p_out0, fpn_out0], 1)  # 512-&gt;1024/32</span></span><br><span class="line">        <span class="comment"># pan_out0 = self.C3_n4(p_out0)  # 1024-&gt;1024/32</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># outputs = (pan_out2, pan_out1, pan_out0)</span></span><br><span class="line">        outputs = (pan_out2, pan_out1)</span><br><span class="line">        <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹yolox&#x2F;exp&#x2F;yolox_base.py</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Exp</span>(<span class="title class_ inherited__">BaseExp</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ---------------- model config ---------------- #</span></span><br><span class="line">        <span class="comment">#......</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_model</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">from</span> yolox.models <span class="keyword">import</span> YOLOX, YOLOPAFPN, YOLOXHead</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">init_yolo</span>(<span class="params">M</span>):</span><br><span class="line">            <span class="keyword">for</span> m <span class="keyword">in</span> M.modules():</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">isinstance</span>(m, nn.BatchNorm2d):</span><br><span class="line">                    m.eps = <span class="number">1e-3</span></span><br><span class="line">                    m.momentum = <span class="number">0.03</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">getattr</span>(<span class="variable language_">self</span>, <span class="string">&quot;model&quot;</span>, <span class="literal">None</span>) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            in_channels = [<span class="number">256</span>, <span class="number">512</span>]</span><br><span class="line">            <span class="comment"># in_channels = [256, 512, 1024]</span></span><br><span class="line">            backbone = YOLOPAFPN(<span class="variable language_">self</span>.depth, <span class="variable language_">self</span>.width, in_channels=in_channels, act=<span class="variable language_">self</span>.act)</span><br><span class="line">            head = YOLOXHead(<span class="variable language_">self</span>.num_classes, <span class="variable language_">self</span>.width, in_channels=in_channels, act=<span class="variable language_">self</span>.act)</span><br><span class="line">            <span class="variable language_">self</span>.model = YOLOX(backbone, head)</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>ä½¿ç”¨tinyæ¨¡å‹ï¼Œæ²¡æœ‰APæå‡ï¼Œä¹Ÿæ²¡æœ‰æ˜æ˜¾ä¸‹é™ï¼Œä½†æ¨¡å‹å‡å°äº†è¿‘ä¸€åŠï¼Œæ˜¯æœ‰æ•ˆçš„æ”¹è¿›ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p> <a href="https://blog.csdn.net/qq_45207837/article/details/124840732">https://blog.csdn.net/qq_45207837&#x2F;article&#x2F;details&#x2F;124840732</a></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yoloxæ·»åŠ æ³¨æ„åŠ›æœºåˆ¶</title>
    <link href="/2022/10/24/yolox%E6%B7%BB%E5%8A%A0%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/"/>
    <url>/2022/10/24/yolox%E6%B7%BB%E5%8A%A0%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_43114108/article/details/126533757">åŸæ–‡é“¾æ¥</a></p><h2 id="Coordinate-Attention"><a href="#Coordinate-Attention" class="headerlink" title="Coordinate Attention"></a>Coordinate Attention</h2><p><a href="http://arxiv.org/abs/2103.02907">è®ºæ–‡æ¥æº</a></p><p><a href="https://github.com/Andrew-Qibin/CoordAttention">å®˜æ–¹ä»£ç </a></p><p>æ³¨æ„åŠ›æœºåˆ¶å¹¿æ³›ç”¨äºæ·±åº¦ç¥ç»ç½‘ç»œä¸­æ¥æé«˜æ¨¡å‹çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œå› ä¸ºå…¶æ˜‚è´µçš„è®¡ç®—ä»£ä»·ï¼Œå¾ˆéš¾åº”ç”¨åœ¨ä¸€äº›è½»é‡çº§ç½‘ç»œï¼Œä½†ä¸ä¹æœ‰ä¸€äº›æ³¨æ„åŠ›æ¨¡å—è„±é¢–è€Œå‡ºï¼Œå…·æœ‰ä»£è¡¨æ€§çš„æœ‰SEã€CBAMç­‰ã€‚SEæ¨¡å—é€šè¿‡2Då…¨å±€æ± åŒ–æ¥è®¡ç®—é€šé“æ³¨æ„åŠ›ï¼Œåœ¨éå¸¸ä½çš„è®¡ç®—æˆæœ¬ä¸‹è¾¾åˆ°äº†æå‡ç½‘ç»œæ€§èƒ½çš„ç›®çš„ï¼Œé—æ†¾çš„æ˜¯ï¼ŒSEæ¨¡å—å¿½è§†äº†æ•è·ä½ç½®ä¿¡æ¯çš„æ³¨æ„åŠ›ï¼›CBAMæ¨¡å—é€šè¿‡ä½¿ç”¨å¤§å°ºå¯¸å·ç§¯æ¥è·å¾—ä½ç½®ä¿¡æ¯çš„æ³¨æ„åŠ›ï¼Œä½†åªåå‘äºæ•è·å±€éƒ¨çš„ä½ç½®ä¿¡æ¯ã€‚<br>CAMæ¨¡å—æ¥æºäº2021CVPRï¼Œè¯¥æ¨¡å—é€šè¿‡å°†ä½ç½®ä¿¡æ¯åµŒå…¥åˆ°é€šé“æ³¨æ„åŠ›ä¸­ï¼Œå› ä¸ºå…¶è¾ƒå°‘çš„è®¡ç®—ä»£ä»·ï¼Œä½¿è½»é‡çº§ç½‘å¯ä»¥è¾ƒå¤§çš„åŒºåŸŸä¸­è·å¾—æ³¨æ„åŠ›ã€‚ä¸ºäº†ç¼“è§£ä½ç½®ä¿¡æ¯ä¸¢å¤±çš„é—®é¢˜ï¼Œè®ºæ–‡ä½œè€…å°†2Då…¨å±€æ± åŒ–æ›¿æ¢æˆåˆ†åˆ«åœ¨ç‰¹å¾çš„wå’Œhå¹¶è¡Œæå–ç‰¹å¾çš„ä¸¤ä¸ª1Dæ± åŒ–ï¼Œå¯ä»¥æœ‰æ•ˆæ•è·ç©ºé—´åæ ‡ä¿¡æ¯ï¼›è€Œåè¿™ä¸¤ä¸ªå¹¶è¡Œçš„ç‰¹å¾å›¾é€šè¿‡ä¸¤ä¸ªå·ç§¯æ¥ç”Ÿæˆä¸¤ä¸ªç‹¬ç«‹æ–¹å‘çš„æ³¨æ„åŠ›å›¾ï¼›é€šè¿‡å°†ä¸¤ä¸ªæ³¨æ„åŠ›å›¾ä¹˜å…¥åˆ°åŸå§‹ç‰¹å¾å›¾ä¸­ï¼Œä»¥è¾¾åˆ°å¢å¼ºç‰¹å¾å›¾çš„è¡¨å¾èƒ½åŠ›ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221019/xxx.44vbajj18g40.png"></p><h2 id="åœ¨yolox-models-ä¸‹æ·»åŠ attention-py"><a href="#åœ¨yolox-models-ä¸‹æ·»åŠ attention-py" class="headerlink" title="åœ¨yolox&#x2F;models&#x2F;ä¸‹æ·»åŠ attention.py"></a>åœ¨yolox&#x2F;models&#x2F;ä¸‹æ·»åŠ attention.py</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- encoding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CAM</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channels, reduction=<span class="number">32</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(CAM, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv_1x1 = nn.Conv2d(in_channels=channels, out_channels=channels // reduction, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>,</span><br><span class="line">                                  bias=<span class="literal">False</span>)                      </span><br><span class="line">        <span class="variable language_">self</span>.mish = nn.Mish() <span class="comment"># å¯ç”¨è‡ªè¡Œé€‰æ‹©æ¿€æ´»å‡½æ•°</span></span><br><span class="line">        <span class="variable language_">self</span>.bn = nn.BatchNorm2d(channels // reduction)  </span><br><span class="line">        <span class="variable language_">self</span>.F_h = nn.Conv2d(in_channels=channels // reduction, out_channels=channels, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.F_w = nn.Conv2d(in_channels=channels // reduction, out_channels=channels, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)  </span><br><span class="line">        <span class="variable language_">self</span>.sigmoid_h = nn.Sigmoid() </span><br><span class="line">        <span class="variable language_">self</span>.sigmoid_w = nn.Sigmoid()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        h, w = x.shape[<span class="number">2</span>], x.shape[<span class="number">3</span>]</span><br><span class="line">        avg_pool_x = nn.AdaptiveAvgPool2d((h, <span class="number">1</span>))</span><br><span class="line">        avg_pool_y = nn.AdaptiveAvgPool2d((<span class="number">1</span>, w))</span><br><span class="line">        x_h = avg_pool_x(x).permute(<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>) </span><br><span class="line">        x_w = avg_pool_y(x)  </span><br><span class="line">        x_cat_conv_relu = <span class="variable language_">self</span>.mish(<span class="variable language_">self</span>.conv_1x1(torch.cat((x_h, x_w), <span class="number">3</span>))) </span><br><span class="line">        x_cat_conv_split_h, x_cat_conv_split_w = x_cat_conv_relu.split([h, w], <span class="number">3</span>)</span><br><span class="line">        s_h = <span class="variable language_">self</span>.sigmoid_h(<span class="variable language_">self</span>.F_h(x_cat_conv_split_h.permute(<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>)))</span><br><span class="line">        s_w = <span class="variable language_">self</span>.sigmoid_w(<span class="variable language_">self</span>.F_w(x_cat_conv_split_w))</span><br><span class="line">        out = x * s_h.expand_as(x) * s_w.expand_as(x)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h2 id="åœ¨yolox-models-yolo-pafpn-pyä¸­æ·»åŠ CAM"><a href="#åœ¨yolox-models-yolo-pafpn-pyä¸­æ·»åŠ CAM" class="headerlink" title="åœ¨yolox&#x2F;models&#x2F;yolo_pafpn.pyä¸­æ·»åŠ CAM"></a>åœ¨yolox&#x2F;models&#x2F;yolo_pafpn.pyä¸­æ·»åŠ CAM</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- encoding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># Copyright (c) 2014-2021 Megvii Inc. All rights reserved.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .darknet <span class="keyword">import</span> CSPDarknet</span><br><span class="line"><span class="keyword">from</span> .network_blocks <span class="keyword">import</span> BaseConv, CSPLayer, DWConv</span><br><span class="line"><span class="keyword">from</span> .attention <span class="keyword">import</span> CAM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YOLOPAFPN</span>(nn.Module):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    YOLOv3 model. Darknet 53 is the default backbone of this model.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params"></span></span><br><span class="line"><span class="params">        self,</span></span><br><span class="line"><span class="params">        depth=<span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        width=<span class="number">1.0</span>,</span></span><br><span class="line"><span class="params">        in_features=(<span class="params"><span class="string">&quot;dark3&quot;</span>, <span class="string">&quot;dark4&quot;</span>, <span class="string">&quot;dark5&quot;</span></span>),</span></span><br><span class="line"><span class="params">        in_channels=[<span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>],</span></span><br><span class="line"><span class="params">        depthwise=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        act=<span class="string">&quot;silu&quot;</span>,</span></span><br><span class="line"><span class="params">    </span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.backbone = CSPDarknet(depth, width, depthwise=depthwise, act=act)</span><br><span class="line">        <span class="variable language_">self</span>.in_features = in_features</span><br><span class="line">        <span class="variable language_">self</span>.in_channels = in_channels</span><br><span class="line">        Conv = DWConv <span class="keyword">if</span> depthwise <span class="keyword">else</span> BaseConv</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.upsample = nn.Upsample(scale_factor=<span class="number">2</span>, mode=<span class="string">&quot;nearest&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lateral_conv0 = BaseConv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">2</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width), <span class="number">1</span>, <span class="number">1</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_p4 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">1</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )  <span class="comment"># cat</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.reduce_conv1 = BaseConv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="number">1</span>, <span class="number">1</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_p3 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># bottom-up conv</span></span><br><span class="line">        <span class="variable language_">self</span>.bu_conv2 = Conv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width), <span class="number">3</span>, <span class="number">2</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_n3 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">0</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># bottom-up conv</span></span><br><span class="line">        <span class="variable language_">self</span>.bu_conv1 = Conv(</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width), <span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width), <span class="number">3</span>, <span class="number">2</span>, act=act</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.C3_n4 = CSPLayer(</span><br><span class="line">            <span class="built_in">int</span>(<span class="number">2</span> * in_channels[<span class="number">1</span>] * width),</span><br><span class="line">            <span class="built_in">int</span>(in_channels[<span class="number">2</span>] * width),</span><br><span class="line">            <span class="built_in">round</span>(<span class="number">3</span> * depth),</span><br><span class="line">            <span class="literal">False</span>,</span><br><span class="line">            depthwise=depthwise,</span><br><span class="line">            act=act,</span><br><span class="line">        )</span><br><span class="line">        <span class="comment">##################################################</span></span><br><span class="line">        <span class="variable language_">self</span>.CAM0 = CAM(<span class="built_in">int</span>(in_channels[<span class="number">2</span>] * width))</span><br><span class="line">        <span class="variable language_">self</span>.CAM1 = CAM(<span class="built_in">int</span>(in_channels[<span class="number">1</span>] * width))</span><br><span class="line">        <span class="variable language_">self</span>.CAM2 = CAM(<span class="built_in">int</span>(in_channels[<span class="number">0</span>] * width))</span><br><span class="line">        <span class="comment">##################################################</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, <span class="built_in">input</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            inputs: input images.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            Tuple[Tensor]: FPN feature.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#  backbone</span></span><br><span class="line">        out_features = <span class="variable language_">self</span>.backbone(<span class="built_in">input</span>)</span><br><span class="line">        features = [out_features[f] <span class="keyword">for</span> f <span class="keyword">in</span> <span class="variable language_">self</span>.in_features]</span><br><span class="line">        [x2, x1, x0] = features</span><br><span class="line">        <span class="comment">##################################################</span></span><br><span class="line">        x0 = <span class="variable language_">self</span>.CAM0(x0)</span><br><span class="line">        x1 = <span class="variable language_">self</span>.CAM1(x1)</span><br><span class="line">        x2 = <span class="variable language_">self</span>.CAM2(x2)</span><br><span class="line">        <span class="comment">##################################################</span></span><br><span class="line"></span><br><span class="line">        fpn_out0 = <span class="variable language_">self</span>.lateral_conv0(x0)  <span class="comment"># 1024-&gt;512/32</span></span><br><span class="line">        f_out0 = <span class="variable language_">self</span>.upsample(fpn_out0)  <span class="comment"># 512/16</span></span><br><span class="line">        f_out0 = torch.cat([f_out0, x1], <span class="number">1</span>)  <span class="comment"># 512-&gt;1024/16</span></span><br><span class="line">        f_out0 = <span class="variable language_">self</span>.C3_p4(f_out0)  <span class="comment"># 1024-&gt;512/16</span></span><br><span class="line"></span><br><span class="line">        fpn_out1 = <span class="variable language_">self</span>.reduce_conv1(f_out0)  <span class="comment"># 512-&gt;256/16</span></span><br><span class="line">        f_out1 = <span class="variable language_">self</span>.upsample(fpn_out1)  <span class="comment"># 256/8</span></span><br><span class="line">        f_out1 = torch.cat([f_out1, x2], <span class="number">1</span>)  <span class="comment"># 256-&gt;512/8</span></span><br><span class="line">        pan_out2 = <span class="variable language_">self</span>.C3_p3(f_out1)  <span class="comment"># 512-&gt;256/8</span></span><br><span class="line"></span><br><span class="line">        p_out1 = <span class="variable language_">self</span>.bu_conv2(pan_out2)  <span class="comment"># 256-&gt;256/16</span></span><br><span class="line">        p_out1 = torch.cat([p_out1, fpn_out1], <span class="number">1</span>)  <span class="comment"># 256-&gt;512/16</span></span><br><span class="line">        pan_out1 = <span class="variable language_">self</span>.C3_n3(p_out1)  <span class="comment"># 512-&gt;512/16</span></span><br><span class="line"></span><br><span class="line">        p_out0 = <span class="variable language_">self</span>.bu_conv1(pan_out1)  <span class="comment"># 512-&gt;512/32</span></span><br><span class="line">        p_out0 = torch.cat([p_out0, fpn_out0], <span class="number">1</span>)  <span class="comment"># 512-&gt;1024/32</span></span><br><span class="line">        pan_out0 = <span class="variable language_">self</span>.C3_n4(p_out0)  <span class="comment"># 1024-&gt;1024/32</span></span><br><span class="line"></span><br><span class="line">        outputs = (pan_out2, pan_out1, pan_out0)</span><br><span class="line">        <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–æ³¨æ„åŠ›æœºåˆ¶ï¼ˆSEã€CBAMã€ECAï¼‰åŒç†ï¼Œä»£ç å¦‚ä¸‹-æ’å…¥ä½¿ç”¨æ–¹æ³•ç›¸åŒ"><a href="#å…¶ä»–æ³¨æ„åŠ›æœºåˆ¶ï¼ˆSEã€CBAMã€ECAï¼‰åŒç†ï¼Œä»£ç å¦‚ä¸‹-æ’å…¥ä½¿ç”¨æ–¹æ³•ç›¸åŒ" class="headerlink" title="å…¶ä»–æ³¨æ„åŠ›æœºåˆ¶ï¼ˆSEã€CBAMã€ECAï¼‰åŒç†ï¼Œä»£ç å¦‚ä¸‹,æ’å…¥ä½¿ç”¨æ–¹æ³•ç›¸åŒ"></a>å…¶ä»–æ³¨æ„åŠ›æœºåˆ¶ï¼ˆSEã€CBAMã€ECAï¼‰åŒç†ï¼Œä»£ç å¦‚ä¸‹,æ’å…¥ä½¿ç”¨æ–¹æ³•ç›¸åŒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- encoding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CAM</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channels, reduction=<span class="number">32</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(CAM, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv_1x1 = nn.Conv2d(in_channels=channels, out_channels=channels // reduction, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>,</span><br><span class="line">                                  bias=<span class="literal">False</span>)                      </span><br><span class="line">        <span class="variable language_">self</span>.mish = nn.Mish() <span class="comment"># å¯ç”¨è‡ªè¡Œé€‰æ‹©æ¿€æ´»å‡½æ•°</span></span><br><span class="line">        <span class="variable language_">self</span>.bn = nn.BatchNorm2d(channels // reduction)  </span><br><span class="line">        <span class="variable language_">self</span>.F_h = nn.Conv2d(in_channels=channels // reduction, out_channels=channels, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.F_w = nn.Conv2d(in_channels=channels // reduction, out_channels=channels, kernel_size=<span class="number">1</span>, stride=<span class="number">1</span>, bias=<span class="literal">False</span>)  </span><br><span class="line">        <span class="variable language_">self</span>.sigmoid_h = nn.Sigmoid() </span><br><span class="line">        <span class="variable language_">self</span>.sigmoid_w = nn.Sigmoid()</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        h, w = x.shape[<span class="number">2</span>], x.shape[<span class="number">3</span>]</span><br><span class="line">        avg_pool_x = nn.AdaptiveAvgPool2d((h, <span class="number">1</span>))</span><br><span class="line">        avg_pool_y = nn.AdaptiveAvgPool2d((<span class="number">1</span>, w))</span><br><span class="line">        x_h = avg_pool_x(x).permute(<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>) </span><br><span class="line">        x_w = avg_pool_y(x)  </span><br><span class="line">        x_cat_conv_relu = <span class="variable language_">self</span>.mish(<span class="variable language_">self</span>.conv_1x1(torch.cat((x_h, x_w), <span class="number">3</span>))) </span><br><span class="line">        x_cat_conv_split_h, x_cat_conv_split_w = x_cat_conv_relu.split([h, w], <span class="number">3</span>)</span><br><span class="line">        s_h = <span class="variable language_">self</span>.sigmoid_h(<span class="variable language_">self</span>.F_h(x_cat_conv_split_h.permute(<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>)))</span><br><span class="line">        s_w = <span class="variable language_">self</span>.sigmoid_w(<span class="variable language_">self</span>.F_w(x_cat_conv_split_w))</span><br><span class="line">        out = x * s_h.expand_as(x) * s_w.expand_as(x)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SE</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channel, ratio=<span class="number">16</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(SE, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.avg_pool = nn.AdaptiveAvgPool2d(<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.fc = nn.Sequential(</span><br><span class="line">                nn.Linear(channel, channel // ratio, bias=<span class="literal">False</span>),</span><br><span class="line">                nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">                nn.Linear(channel // ratio, channel, bias=<span class="literal">False</span>),</span><br><span class="line">                nn.Sigmoid()</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        b, c, _, _ = x.size()</span><br><span class="line">        y = <span class="variable language_">self</span>.avg_pool(x).view(b, c)</span><br><span class="line">        y = <span class="variable language_">self</span>.fc(y).view(b, c, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> x * y</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ECA</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channel, b=<span class="number">1</span>, gamma=<span class="number">2</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(ECA, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        kernel_size = <span class="built_in">int</span>(<span class="built_in">abs</span>((math.log(channel, <span class="number">2</span>) + b) / gamma))</span><br><span class="line">        kernel_size = kernel_size <span class="keyword">if</span> kernel_size % <span class="number">2</span> <span class="keyword">else</span> kernel_size + <span class="number">1</span></span><br><span class="line">      </span><br><span class="line">        <span class="variable language_">self</span>.avg_pool = nn.AdaptiveAvgPool2d(<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.conv = nn.Conv1d(<span class="number">1</span>, <span class="number">1</span>, kernel_size=kernel_size, padding=(kernel_size - <span class="number">1</span>) // <span class="number">2</span>, bias=<span class="literal">False</span>) </span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = nn.Sigmoid()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        y = <span class="variable language_">self</span>.avg_pool(x)</span><br><span class="line">        y = <span class="variable language_">self</span>.conv(y.squeeze(-<span class="number">1</span>).transpose(-<span class="number">1</span>, -<span class="number">2</span>)).transpose(-<span class="number">1</span>, -<span class="number">2</span>).unsqueeze(-<span class="number">1</span>)</span><br><span class="line">        y = <span class="variable language_">self</span>.sigmoid(y)</span><br><span class="line">        <span class="keyword">return</span> x * y.expand_as(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChannelAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, in_planes, ratio=<span class="number">8</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(ChannelAttention, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.avg_pool = nn.AdaptiveAvgPool2d(<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.max_pool = nn.AdaptiveMaxPool2d(<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># åˆ©ç”¨1x1å·ç§¯ä»£æ›¿å…¨è¿æ¥</span></span><br><span class="line">        <span class="variable language_">self</span>.fc1   = nn.Conv2d(in_planes, in_planes // ratio, <span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu1 = nn.ReLU()</span><br><span class="line">        <span class="variable language_">self</span>.fc2   = nn.Conv2d(in_planes // ratio, in_planes, <span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = nn.Sigmoid()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        avg_out = <span class="variable language_">self</span>.fc2(<span class="variable language_">self</span>.relu1(<span class="variable language_">self</span>.fc1(<span class="variable language_">self</span>.avg_pool(x))))</span><br><span class="line">        max_out = <span class="variable language_">self</span>.fc2(<span class="variable language_">self</span>.relu1(<span class="variable language_">self</span>.fc1(<span class="variable language_">self</span>.max_pool(x))))</span><br><span class="line">        out = avg_out + max_out</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.sigmoid(out)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpatialAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, kernel_size=<span class="number">7</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(SpatialAttention, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="keyword">assert</span> kernel_size <span class="keyword">in</span> (<span class="number">3</span>, <span class="number">7</span>), <span class="string">&#x27;kernel size must be 3 or 7&#x27;</span></span><br><span class="line">        padding = <span class="number">3</span> <span class="keyword">if</span> kernel_size == <span class="number">7</span> <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Conv2d(<span class="number">2</span>, <span class="number">1</span>, kernel_size, padding=padding, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.sigmoid = nn.Sigmoid()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        avg_out = torch.mean(x, dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>)</span><br><span class="line">        max_out, _ = torch.<span class="built_in">max</span>(x, dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>)</span><br><span class="line">        x = torch.cat([avg_out, max_out], dim=<span class="number">1</span>)</span><br><span class="line">        x = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.sigmoid(x)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CBAM</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, channel, ratio=<span class="number">8</span>, kernel_size=<span class="number">7</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(CBAM, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.channelattention = ChannelAttention(channel, ratio=ratio)</span><br><span class="line">        <span class="variable language_">self</span>.spatialattention = SpatialAttention(kernel_size=kernel_size)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = x*<span class="variable language_">self</span>.channelattention(x)</span><br><span class="line">        x = x*<span class="variable language_">self</span>.spatialattention(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>è¯•éªŒäº†ä¸¤ä¸ªæ•°æ®é›†ï¼Œè¿™äº›æ³¨æ„åŠ›æœºåˆ¶é€šå¸¸éƒ½æœ‰é›¶ç‚¹å‡ çš„APæå‡ï¼Œä½†ä¸ä¼šæœ‰å¤ªå¤§çš„ä½œç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yoloä¸»æµç‰ˆæœ¬ä»‹ç»(v1-v7)</title>
    <link href="/2022/10/08/yolo%E7%B3%BB%E5%88%97%E7%BB%BC%E8%BF%B0(v1-v7)/"/>
    <url>/2022/10/08/yolo%E7%B3%BB%E5%88%97%E7%BB%BC%E8%BF%B0(v1-v7)/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»ç›®æ ‡æ£€æµ‹yoloç³»åˆ—ä¸»æµç‰ˆæœ¬çš„å‘å±•ã€‚</p><h3 id="ç›®æ ‡æ£€æµ‹è¯„ä»·æŒ‡æ ‡"><a href="#ç›®æ ‡æ£€æµ‹è¯„ä»·æŒ‡æ ‡" class="headerlink" title="ç›®æ ‡æ£€æµ‹è¯„ä»·æŒ‡æ ‡"></a>ç›®æ ‡æ£€æµ‹è¯„ä»·æŒ‡æ ‡</h3><h4 id="IOU"><a href="#IOU" class="headerlink" title="IOU"></a>IOU</h4><p>çœŸå®æ¡†å’Œé¢„æµ‹æ¡†ä¹‹é—´çš„äº¤å¹¶æ¯”ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/4.png"></p><h4 id="ç²¾ç¡®åº¦"><a href="#ç²¾ç¡®åº¦" class="headerlink" title="ç²¾ç¡®åº¦"></a>ç²¾ç¡®åº¦</h4><p>é¢„æµ‹ä¸ºæ­£ä¾‹çš„é‚£äº›æ•°æ®é‡Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ã€‚</p><h4 id="å¬å›ç‡"><a href="#å¬å›ç‡" class="headerlink" title="å¬å›ç‡"></a>å¬å›ç‡</h4><p>çœŸå®ä¸ºæ­£ä¾‹çš„é‚£äº›æ•°æ®é‡Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ã€‚</p><h4 id="AP"><a href="#AP" class="headerlink" title="AP"></a>AP</h4><p>ä¸åŒçš„ç½®ä¿¡åº¦é˜ˆå€¼å¯¹åº”ä¸åŒçš„æ£€æµ‹ç»“æœï¼Œå¯¹åº”ä¸€ç»„ç²¾ç¡®åº¦å’Œå¬å›ç‡ï¼Œè®¡ç®—åˆæˆçš„é¢ç§¯<br><img src="https://xinhaojin.github.io/imgs-host/20221010/18.png"></p><h4 id="MAP"><a href="#MAP" class="headerlink" title="MAP"></a>MAP</h4><p>MAPæ˜¯ä¸åŒç±»åˆ«çš„å¹³å‡APã€‚</p><h2 id="YOLOv1"><a href="#YOLOv1" class="headerlink" title="YOLOv1"></a>YOLOv1</h2><p><a href="https://arxiv.org/abs/1506.02640">paper(CVPR2015)</a></p><p>You only look once,one-stageæ–¹æ³•,æŠŠç›®æ ‡æ£€æµ‹é—®é¢˜ç›´æ¥è½¬åŒ–æˆCNNå›å½’é—®é¢˜ï¼ˆé¢„æµ‹æ•°å€¼ï¼‰ã€‚</p><p><strong>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š</strong> æ€ä¹ˆè¡¨ç¤ºä¸€ä¸ªä½ç½®æ¡†(ç›®æ ‡)ï¼Ÿ<br>x,y,w,h,conf,class<br><img src="https://xinhaojin.github.io/imgs-host/20221010/7.png"></p><h3 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h3><p>å°†ä¸€å¹…å›¾åƒåˆ†æˆ7x7ä¸ªç½‘æ ¼(grid cell),å¦‚æœæŸä¸ªobjectçš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œåˆ™è¿™ä¸ªç½‘æ ¼å°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªobjectã€‚<br>æ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹2ä¸ªbounding box(æŒ‡å®šé•¿å®½æ¯”ä¾‹çš„é¢„é€‰æ¡†)ï¼Œæ¯ä¸ªbounding boxé™¤äº†è¦é¢„æµ‹ä½ç½®ä¹‹å¤–ï¼Œè¿˜è¦é™„å¸¦é¢„æµ‹ä¸€ä¸ªconfidenceå€¼ã€‚æ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹20ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p><h3 id="ç½‘ç»œç»“æ„"><a href="#ç½‘ç»œç»“æ„" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p><img src="https://xinhaojin.github.io/imgs-host/20221010/19.png"><br>è¾“å…¥ï¼š448<em>448</em>3<code>&lt;br&gt;</code><br>ç»è¿‡å·ç§¯æ± åŒ–å·ç§¯æ± åŒ–â€¦å…¨è¿æ¥<code>&lt;br&gt;</code><br>è¾“å‡ºï¼š7<em>7</em>30<code>&lt;br&gt;</code><br>7<em>7ï¼šæ ¼å­<code>&lt;br&gt;</code><br>30&#x3D;20+5</em>2<code>&lt;br&gt;</code><br>20ï¼šç±»åˆ«<code>&lt;br&gt;</code><br>5ï¼šx,y,w,h,conf<code>&lt;br&gt;</code><br>2ï¼šä¸¤ä¸ªé¢„é€‰æ¡†<code>&lt;br&gt;</code><br><strong>ç–‘é—®:</strong> ç¥ç»ç½‘ç»œæ€ä¹ˆçŸ¥é“æ¯ä¸ªå€¼ä»£è¡¨ä»€ä¹ˆæ„æ€?<br>è®¾è®¡åˆé€‚çš„æŸå¤±å‡½æ•°ã€‚</p><h3 id="æŸå¤±å‡½æ•°"><a href="#æŸå¤±å‡½æ•°" class="headerlink" title="æŸå¤±å‡½æ•°"></a>æŸå¤±å‡½æ•°</h3><p>bounding boxæŸå¤±ã€confidenceæŸå¤±å’ŒclassesæŸå¤±ã€‚åœ¨è®¡ç®—æŸå¤±æ—¶ä¸»è¦éƒ½æ˜¯ç”¨çš„è¯¯å·®å¹³æ–¹å’Œæ±‚è§£ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/20.png"><br><img src="https://xinhaojin.github.io/imgs-host/20221010/17.png"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¼˜ç‚¹ï¼šå¿«é€Ÿï¼Œç®€å•</p><p>ç¼ºç‚¹ï¼šæ¯ä¸ªcellåªèƒ½é¢„æµ‹ä¸€ä¸ªç±»åˆ«ï¼Œé‡å é—®é¢˜æ— æ³•è§£å†³ï¼›<br>å°ç‰©ä½“æ£€æµ‹æ•ˆæœä¸€èˆ¬ï¼›æ— æ³•åº”å¯¹æ–°å°ºå¯¸ç›®æ ‡ï¼›å®šä½ä¸å‡†ç¡®</p><h2 id="YOLOv2-YOLO9000"><a href="#YOLOv2-YOLO9000" class="headerlink" title="YOLOv2&#x2F;YOLO9000"></a>YOLOv2&#x2F;YOLO9000</h2><p><a href="https://arxiv.org/abs/1612.08242">paper(CVPR2016)</a></p><p>åœ¨v1åŸºç¡€ä¸Šåšçš„æ”¹è¿›</p><h3 id="æ‰¹æ ‡å‡†åŒ–"><a href="#æ‰¹æ ‡å‡†åŒ–" class="headerlink" title="æ‰¹æ ‡å‡†åŒ–"></a>æ‰¹æ ‡å‡†åŒ–</h3><p>V2ç‰ˆæœ¬èˆå¼ƒDropoutï¼Œå·ç§¯åå…¨éƒ¨åŠ å…¥Batch Normalizationï¼Œç½‘ç»œçš„æ¯ä¸€å±‚çš„è¾“å…¥éƒ½åšäº†å½’ä¸€åŒ–ï¼Œæ”¶æ•›ç›¸å¯¹æ›´å®¹æ˜“ï¼Œç»è¿‡Batch Normalizationå¤„ç†åçš„ç½‘ç»œä¼šæå‡2%çš„mAPï¼Œä»ç°åœ¨çš„è§’åº¦æ¥çœ‹ï¼ŒBatch Normalizationå·²ç»æˆç½‘ç»œå¿…å¤‡å¤„ç†ã€‚</p><h3 id="æ›´å¤§çš„è¾“å…¥å°ºå¯¸"><a href="#æ›´å¤§çš„è¾“å…¥å°ºå¯¸" class="headerlink" title="æ›´å¤§çš„è¾“å…¥å°ºå¯¸"></a>æ›´å¤§çš„è¾“å…¥å°ºå¯¸</h3><p>åœ¨YOLOv1ä¸­è®­ç»ƒåˆ†ç±»å™¨æ—¶ä½¿ç”¨çš„æ˜¯224Ã—244çš„è¾“å…¥ï¼Œè€Œåœ¨ YOLOv2ä¸­ä½œè€…é‡‡ç”¨äº†448Ã—448çš„å°ºå¯¸ä½œä¸ºè¾“å…¥ï¼Œè®ºæ–‡æ€»è¡¨æ˜ï¼Œé‡‡ç”¨æ›´å¤§çš„åˆ†è¾¨ç‡ä½œä¸ºè¾“å…¥å¯ä»¥å¾—åˆ°MAPå€¼4%çš„æå‡ã€‚</p><h3 id="å¼•å…¥é”šæ¡†"><a href="#å¼•å…¥é”šæ¡†" class="headerlink" title="å¼•å…¥é”šæ¡†"></a>å¼•å…¥é”šæ¡†</h3><p>YOLOv1ç”¨å…¨è¿æ¥å±‚é¢„æµ‹è¾¹ç•Œæ¡†çš„ä¸­å¿ƒåæ ‡ã€å®½åº¦å’Œé«˜åº¦ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼å®šä½æ•ˆæœæ¯”è¾ƒå·®ï¼Œæ‰€ä»¥åœ¨YOLOv2ä¸­ä½œè€…é‡‡ç”¨anchorè¿›è¡Œç›®æ ‡æ¡†çš„é¢„æµ‹ï¼Œä½¿å¾—é¢„æµ‹çš„boxæ•°é‡æ›´å¤šã€‚å¼ƒç”¨äº†å…¨è¿æ¥å±‚ï¼Œä½¿ç”¨5æ¬¡ä¸‹é‡‡æ ·ï¼Œå¾—åˆ°13<em>13(å®é™…è¾“å…¥æ˜¯416</em>416,416&#x3D;13*2^5)ï¼Œç›¸æ¯”å…¨è¿æ¥èŠ‚çœäº†å‚æ•°ï¼Œå¯ä»¥ä½¿ç½‘ç»œæ›´å®¹æ˜“å­¦ä¹ å’Œæ”¶æ•›ã€‚</p><h3 id="èšç±»å¾—åˆ°å…ˆéªŒæ¡†"><a href="#èšç±»å¾—åˆ°å…ˆéªŒæ¡†" class="headerlink" title="èšç±»å¾—åˆ°å…ˆéªŒæ¡†"></a>èšç±»å¾—åˆ°å…ˆéªŒæ¡†</h3><p>å¼•å…¥anchoråçš„é—®é¢˜1ï¼šæ€ä¹ˆç¡®å®šå…ˆéªŒæ¡†çš„å°ºå¯¸å’Œæ¯”ä¾‹ï¼Ÿ<br><img src="https://xinhaojin.github.io/imgs-host/20221010/21.png"></p><p>æŠŠè®­ç»ƒé›†çš„æ ‡æ³¨æ¡†è¿›è¡Œkmeansèšç±»ï¼Œk&#x3D;5ã€‚è·ç¦»çš„å®šä¹‰æ˜¯D&#x3D;1-IOUã€‚é¿å…äº†å¤§çš„æ¡†è¯¯å·®å°±å¤§çš„æƒ…å†µã€‚</p><h3 id="ç›´æ¥ä½ç½®é¢„æµ‹"><a href="#ç›´æ¥ä½ç½®é¢„æµ‹" class="headerlink" title="ç›´æ¥ä½ç½®é¢„æµ‹"></a>ç›´æ¥ä½ç½®é¢„æµ‹</h3><p>å¼•å…¥anchoråçš„é—®é¢˜2ï¼šç›´æ¥ä½¿ç”¨anchorè¿›è¡Œé¢„æµ‹æ—¶å‘ç°ï¼Œåœ¨è®­ç»ƒæ¨¡å‹çš„æ—¶å€™è®­ç»ƒä¸ç¨³å®šã€‚é€šè¿‡è§‚å¯Ÿå‘ç°è®­ç»ƒåˆå§‹é˜¶æ®µä¸ç¨³å®šå› ç´ æ¥è‡ªä¸­å¿ƒåæ ‡çš„é¢„æµ‹éƒ¨åˆ†å¯¼è‡´ï¼Œæ‰€ä»¥yolov2è§„å®šäº†ä¸­å¿ƒç‚¹ä¸èƒ½ä¹±é£˜å‡ºæ ¼å­ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/22.png"></p><h3 id="å¤šå°ºåº¦è®­ç»ƒ"><a href="#å¤šå°ºåº¦è®­ç»ƒ" class="headerlink" title="å¤šå°ºåº¦è®­ç»ƒ"></a>å¤šå°ºåº¦è®­ç»ƒ</h3><p>å®é™…å›¾ç‰‡å°ºå¯¸å¤šå˜ï¼Œä¸å¯èƒ½éƒ½resizeæˆ416*416ã€‚æ¯è®­ç»ƒ10æ‰¹æ¬¡ï¼Œå°±éšæœºæ”¹å˜ä¸€æ¬¡å›¾åƒå°ºå¯¸ï¼Œæœ€å°320ï¼Œæœ€å¤§608ã€‚ä½¿ç½‘ç»œèƒ½å¤Ÿé€‚åº”ä¸åŒè¾“å…¥å°ºå¯¸çš„å›¾ç‰‡ã€‚</p><h3 id="ç‰¹å¾å›¾èåˆ"><a href="#ç‰¹å¾å›¾èåˆ" class="headerlink" title="ç‰¹å¾å›¾èåˆ"></a>ç‰¹å¾å›¾èåˆ</h3><p>åœ¨ç½‘ç»œä¸­ï¼Œå‰æ®µ256<em>256çš„ç‰¹å¾å›¾é€‚åˆé¢„æµ‹å°ç›®æ ‡ï¼Œåæ®µ13</em>13çš„ç‰¹å¾å›¾é€‚åˆé¢„æµ‹å¤§ç›®æ ‡ï¼Œå› ä¸ºæ„Ÿå—é‡ä¸åŒã€‚</p><p><strong>æ„Ÿå—é‡</strong>ï¼šç‰¹å¾å›¾ä¸Šçš„ä¸€ä¸ªç‚¹èƒ½çœ‹åˆ°åŸå§‹å›¾åƒä¸Šå¤šå¤§çš„åŒºåŸŸã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/23.png"><br>æœ€åä¸€å±‚çš„æ„Ÿå—é‡å¤ªå¤§äº†ï¼Œå®¹æ˜“ä¸¢å¤±å°ç›®æ ‡ï¼Œæ‰€ä»¥éœ€è¦èåˆä¹‹å‰çš„ç‰¹å¾å±‚ï¼Œreshapeåå åŠ ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/24.png"></p><h3 id="ç½‘ç»œç»“æ„-1"><a href="#ç½‘ç»œç»“æ„-1" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p>é‡‡ç”¨äº†Darknet19ç½‘ç»œç»“æ„ï¼Œå®é™…çš„sizeå’Œå›¾ä¸ä¸€æ ·ã€‚<br>è¾“å…¥416<em>416</em>3,è¾“å‡º13<em>13</em>1024<br><img src="https://xinhaojin.github.io/imgs-host/20221010/25.png"></p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>YOLOv2å¯¹YOLOv1çš„ç¼ºé™·è¿›è¡Œä¼˜åŒ–ï¼Œå¤§å¹…åº¦é«˜äº†æ£€æµ‹çš„æ€§èƒ½ï¼Œä½†ä»å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼Œå¦‚æ— æ³•è§£å†³é‡å é—®é¢˜çš„åˆ†ç±»ç­‰ã€‚</p><h2 id="YOLOv3"><a href="#YOLOv3" class="headerlink" title="YOLOv3"></a>YOLOv3</h2><p><a href="https://arxiv.org/abs/1804.02767">paper(CVPR2018)</a></p><p><a href="https://github.com/ultralytics/yolov3">code</a><br><img src="https://xinhaojin.github.io/imgs-host/20221010/26.png"></p><h3 id="ç½‘ç»œç»“æ„-2"><a href="#ç½‘ç»œç»“æ„-2" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p>ä¸»å¹²ç½‘ç»œ:å…¨å·ç§¯ç½‘ç»œDarkNet-53ï¼Œ53å±‚å·ç§¯å±‚ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/28.png"></p><h4 id="æ®‹å·®è¿æ¥"><a href="#æ®‹å·®è¿æ¥" class="headerlink" title="æ®‹å·®è¿æ¥"></a>æ®‹å·®è¿æ¥</h4><p>Resnetæ€æƒ³ï¼šä¼ ç»Ÿçš„å·ç§¯ç½‘ç»œæˆ–è€…å…¨è¿æ¥ç½‘ç»œåœ¨ä¿¡æ¯ä¼ é€’çš„æ—¶å€™æˆ–å¤šæˆ–å°‘ä¼šå­˜åœ¨ä¿¡æ¯ä¸¢å¤±ï¼ŒæŸè€—ç­‰é—®é¢˜ï¼ŒåŒæ—¶è¿˜æœ‰å¯¼è‡´æ¢¯åº¦æ¶ˆå¤±æˆ–è€…æ¢¯åº¦çˆ†ç‚¸ï¼Œå¯¼è‡´å¾ˆæ·±çš„ç½‘ç»œæ— æ³•è®­ç»ƒã€‚Resnetåœ¨ç½‘ç»œä¸­å¢åŠ äº†ç›´è¿é€šé“ï¼Œå…è®¸åŸå§‹è¾“å…¥ä¿¡æ¯ç›´æ¥ä¼ åˆ°åé¢çš„å±‚ä¸­ï¼Œçœ‹å›¾éå¸¸æ˜æ˜¾ï¼Œä¹Ÿå°±æ˜¯å¦‚æœåé¢çš„å±‚æ€§èƒ½ä¸å¥½ï¼Œå¯ä»¥å¿½ç•¥ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/20221010/27.png"></p><h3 id="å¤šscaleç‰¹å¾èåˆ"><a href="#å¤šscaleç‰¹å¾èåˆ" class="headerlink" title="å¤šscaleç‰¹å¾èåˆ"></a>å¤šscaleç‰¹å¾èåˆ</h3><p>éšç€å·ç§¯ç½‘ç»œçš„ä¸æ–­æ·±å…¥ï¼Œæ·±å±‚å·ç§¯å¾—åˆ°çš„ç‰¹å¾å›¾è¯­ä¹‰ä¿¡æ¯è¶ŠæŠ½è±¡ï¼Œä»è€Œä½¿å°ç›®æ ‡çš„ç‰¹å¾ä¿¡æ¯å®¹æ˜“ä¸¢å¤±ã€‚YOLOv3å€Ÿé‰´ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œç»“æ„ï¼ˆFPNï¼Œfeature pyramid networksï¼‰å®è¡Œå¤šå°ºåº¦æ£€æµ‹çš„æ–¹æ³•ã€‚å°†416Ã—416å°ºå¯¸çš„å›¾åƒè¾“å…¥YOLOv3ç®—æ³•ä¸­ï¼Œç»è¿‡5æ¬¡ä¸‹é‡‡æ ·åå¾—åˆ°13Ã—13ã€26Ã—26å’Œ52Ã—52å°ºå¯¸çš„ç‰¹å¾å›¾ï¼Œé¦–å…ˆå°†13Ã—13å°ºå¯¸çš„ç‰¹å¾å›¾äºŒå€ä¸Šé‡‡æ ·åä¸26Ã—26å°ºå¯¸çš„ç‰¹å¾å›¾èåˆï¼Œè·å¾—åŒ…å«æµ…å±‚ç‰¹å¾ä¿¡æ¯å’Œæ·±å±‚ç‰¹å¾ä¿¡æ¯çš„ç‰¹å¾å›¾ï¼Œç„¶åå°†ç‰¹å¾å›¾å†æ¬¡äºŒå€ä¸Šé‡‡æ ·ä¸52Ã—52å°ºå¯¸çš„ç‰¹å¾å›¾èåˆï¼Œæœ€ååˆ†åˆ«åœ¨13Ã—13ã€26Ã—26å’Œ52Ã—52å°ºå¯¸çš„ç‰¹å¾å›¾ä¸Šè¿›è¡Œç›®æ ‡æ£€æµ‹ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/29.png"></p><h3 id="å…ˆéªŒæ¡†æ›´ä¸°å¯Œ"><a href="#å…ˆéªŒæ¡†æ›´ä¸°å¯Œ" class="headerlink" title="å…ˆéªŒæ¡†æ›´ä¸°å¯Œ"></a>å…ˆéªŒæ¡†æ›´ä¸°å¯Œ</h3><p><img src="https://xinhaojin.github.io/imgs-host/20221010/30.png"><br>è®­ç»ƒé›†çœŸå®æ¡†åškmeansèšç±»,k&#x3D;9,æŒ‰å¤§å°å†åˆ†ä¸‰ç±»ï¼Œç”¨ä¸åŒçš„ç‰¹å¾å›¾é¢„æµ‹ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/31.png"></p><h3 id="é¢„æµ‹å¤šæ ‡ç­¾ä»»åŠ¡"><a href="#é¢„æµ‹å¤šæ ‡ç­¾ä»»åŠ¡" class="headerlink" title="é¢„æµ‹å¤šæ ‡ç­¾ä»»åŠ¡"></a>é¢„æµ‹å¤šæ ‡ç­¾ä»»åŠ¡</h3><p>ä¸€ä¸ªç›®æ ‡åŒæ—¶å±äºå¤šä¸ªç±»åˆ«ï¼Œå¦‚ï¼šåŠ¨ç‰©ï¼Œç‹—ï¼Œå“ˆå£«å¥‡ã€‚åœ¨å•æ ‡ç­¾é¢„æµ‹çš„æ—¶å€™ï¼ŒæŸå¤±å‡½æ•°åªå’Œæ­£ç¡®ç±»åˆ«çš„æ¦‚ç‡å€¼æœ‰å…³ï¼Œè€Œä¸å…³å¿ƒå±äºå…¶ä»–ç±»åˆ«çš„æ¦‚ç‡ã€‚å¤šæ ‡ç­¾é¢„æµ‹æ—¶ï¼Œç›¸å½“äºå°†ä¸€ä¸ªå¤šæ ‡ç­¾é—®é¢˜è½¬åŒ–ä¸ºäº†åœ¨æ¯ä¸ªæ ‡ç­¾ä¸Šçš„äºŒåˆ†ç±»é—®é¢˜,è®¡ç®—ä¸€ä¸ªæ ·æœ¬å„ä¸ªæ ‡ç­¾çš„æŸå¤±ï¼Œç„¶åå–å¹³å‡å€¼ï¼Œå¾—åˆ°æœ€åçš„æŸå¤±ã€‚</p><h2 id="YOLOv4"><a href="#YOLOv4" class="headerlink" title="YOLOv4"></a>YOLOv4</h2><p><a href="https://arxiv.org/abs/2004.10934">paper(CVPR2020)</a></p><p><a href="https://github.com/Tianxiaomo/pytorch-YOLOv4">code</a></p><p>ç°é˜¶æ®µçš„ç›®æ ‡æ£€æµ‹ç®—æ³•ä¸­æœ‰ä¸‰ä¸ªç»„ä»¶ï¼šBackboneã€Neckå’ŒHeadï¼Œä¹ä¸€çœ‹å¾ˆè®©äººä¸ç†è§£ï¼š</p><p>Backbone, è¯‘ä½œéª¨å¹²ç½‘ç»œï¼Œä¸»è¦æŒ‡ç”¨äºç‰¹å¾æå–çš„ï¼Œå·²åœ¨å¤§å‹æ•°æ®é›†(ä¾‹å¦‚ImageNet|COCOç­‰)ä¸Šå®Œæˆé¢„è®­ç»ƒï¼Œæ‹¥æœ‰é¢„è®­ç»ƒå‚æ•°çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œä¾‹å¦‚ï¼šResNet-50ã€Darknet53ç­‰</p><p>Headï¼Œè¯‘ä½œæ£€æµ‹å¤´ï¼Œä¸»è¦ç”¨äºé¢„æµ‹ç›®æ ‡çš„ç§ç±»å’Œä½ç½®(bounding boxes)<br>åœ¨Backoneå’ŒHeadä¹‹é—´ï¼Œä¼šæ·»åŠ ä¸€äº›ç”¨äºæ”¶é›†ä¸åŒé˜¶æ®µä¸­ç‰¹å¾å›¾çš„ç½‘ç»œå±‚ï¼Œé€šå¸¸ç§°ä¸ºNeckã€‚</p><p>è¾“å…¥-&gt;ä¸»å¹²-&gt;è„–å­-&gt;å¤´-&gt;è¾“å‡ºã€‚ä¸»å¹²ç½‘ç»œæå–ç‰¹å¾ï¼Œè„–å­æå–ä¸€äº›æ›´å¤æ‚çš„ç‰¹å¾ï¼Œç„¶åå¤´éƒ¨è®¡ç®—é¢„æµ‹è¾“å‡º</p><h3 id="ç½‘ç»œç»“æ„-3"><a href="#ç½‘ç»œç»“æ„-3" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p>é€šè¿‡å¯¹æ¯”å¤šç§æ–¹æ³•å’ŒæŠ€å·§ï¼ŒYOLOv4æœ€ç»ˆé€‰ç”¨CSPDarknet53ä½œä¸ºbackboneï¼Œé€‰ç”¨SPP+PANä½œä¸ºNeckï¼Œé€‰ç”¨YOLOv3-headä½œä¸ºHeadã€‚</p><h3 id="Bag-of-freebies"><a href="#Bag-of-freebies" class="headerlink" title="Bag of freebies"></a>Bag of freebies</h3><p>å°†åªæ”¹å˜è®­ç»ƒç­–ç•¥æˆ–åªå¢åŠ è®­ç»ƒæˆæœ¬ï¼Œè€Œä¸å¢åŠ æ¨ç†æˆæœ¬çš„æ–¹æ³•ç§°ä¸ºâ€œbag of freebiesâ€(BoF)ã€‚BoFä¸­åŒ…å«çš„æ–¹æ³•æœ‰æ•°æ®å¢å¼ºã€æ­£åˆ™åŒ–å‡½æ•°ã€æ ‡ç­¾ç»†åŒ–ç½‘ç»œã€æ¡†å›å½’å‡½æ•°ç­‰ã€‚ä»BoFä¸­æŒ‘é€‰ä¿ç•™çš„æ–¹æ³•æœ‰ï¼Œç”¨äºBackboneçš„CutMixã€Mosaicæ•°æ®å¢å¼ºã€DropBlockæ­£åˆ™åŒ–ã€Class label smoothingï¼›ç”¨äºæ£€æµ‹å™¨ä¸­çš„CIoU-lossã€CmBNã€DropBlockæ­£åˆ™åŒ–ã€Mosaicæ•°æ®å¢å¼ºã€Self-Adversarial Trainingã€Eliminate grid sensitivityã€ä¸€ä¸ªGTä½¿ç”¨å¤šä¸ªanchorsã€Cosine annealing schedulerã€è¶…å‚æ•°è°ƒä¼˜ã€éšæœºè®­ç»ƒå›¾ç‰‡å¤§å°ã€‚</p><p>Mosaicæ•°æ®å¢å¼ºï¼Œæ˜¯ä¸€ç§å°†4å¼ è®­ç»ƒå›¾ç‰‡æ··åˆæˆä¸€å¼ çš„æ–°æ•°æ®å¢å¼ºæ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥ä¸°å¯Œå›¾åƒçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™ç§åšæ³•çš„å¥½å¤„æ˜¯å…è®¸æ£€æµ‹ä¸Šä¸‹æ–‡ä¹‹å¤–çš„ç›®æ ‡ï¼Œå¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/32.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/20221010/33.png"></p><h3 id="Bag-of-specoals"><a href="#Bag-of-specoals" class="headerlink" title="Bag of specoals"></a>Bag of specoals</h3><p>å°†é‚£äº›åªä¼šå°‘é‡å¢åŠ æ¨ç†æˆæœ¬ï¼Œä½†èƒ½æ˜¾è‘—æé«˜ç›®æ ‡æ£€æµ‹ç²¾åº¦çš„æ¨¡å—å’Œåå¤„ç†æ–¹æ³•ï¼Œç§°ä¹‹ä¸ºâ€œbag of specoalsâ€(BoS)ã€‚BoSä¸­åŒ…å«çš„æ–¹æ³•æœ‰å¢å¼ºæ„Ÿå—é‡ã€æ³¨æ„åŠ›æ¨¡å—ã€ç‰¹å¾é›†æˆã€æ¿€æ´»å‡½æ•°ã€åå¤„ç†ç­‰ã€‚ä»BoSä¸­æŒ‘é€‰ä¿ç•™çš„æ–¹æ³•æœ‰ï¼Œç”¨äºBackboneçš„Mishæ¿€æ´»å‡½æ•°ã€Cross-stage partial connections (CSP)ã€Multiinput weighted residual connections (MiWRC)ï¼›ç”¨äºæ£€æµ‹å™¨çš„Mishæ¿€æ´»å‡½æ•°ã€SPP-blockã€SAM-blockã€PAN path-aggregation blockã€DIoU-NMSã€‚</p><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>YOLOv4è®ºæ–‡ä¸­ç»™å‡ºäº†å¤§é‡çš„å®éªŒç»“æœæ¥è¯æ˜äº†å…¶æ‰€é€‰æ‹©tricksçš„æœ‰æ•ˆæ€§ã€‚</p><h2 id="YOLOv5"><a href="#YOLOv5" class="headerlink" title="YOLOv5"></a>YOLOv5</h2><p><a href="https://github.com/ultralytics/yolov5">code</a></p><h3 id="ç½‘ç»œç»“æ„-4"><a href="#ç½‘ç»œç»“æ„-4" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p>Backbone: New CSP-Darknet53</p><p>Neck: SPPF, New CSP-PAN</p><p>Head : YOLOv3 Head</p><h4 id="SPP"><a href="#SPP" class="headerlink" title="SPP"></a>SPP</h4><p>èƒŒæ™¯ï¼šå·ç§¯ç¥ç»ç½‘ç»œä¸­ç»å¸¸çœ‹åˆ°å›ºå®šè¾“å…¥çš„è®¾è®¡ï¼Œä½†å¦‚æœæˆ‘ä»¬çš„è¾“å…¥æ˜¯ä¸èƒ½å›ºå®šçš„å°ºå¯¸æ€ä¹ˆåŠï¼Ÿ<br>SPPï¼šç©ºé—´é‡‘å­—å¡”æ± åŒ–ï¼Œèƒ½å°†ä»»æ„å¤§å°çš„ç‰¹å¾å›¾è½¬æ¢æˆå›ºå®šå¤§å°çš„ç‰¹å¾å‘é‡ã€‚<br>eg:</p><p>è¾“å…¥å±‚ï¼šé¦–å…ˆæˆ‘ä»¬ç°åœ¨æœ‰ä¸€å¼ ä»»æ„å¤§å°çš„å›¾ç‰‡ï¼Œå…¶å¤§å°ä¸ºw * hã€‚</p><p>è¾“å‡ºå±‚ï¼š21ä¸ªç¥ç»å…ƒ â€“ å³æˆ‘ä»¬å¾…ä¼šå¸Œæœ›æå–åˆ°21ä¸ªç‰¹å¾ã€‚</p><p>åˆ†æå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šåˆ†åˆ«å¯¹1 * 1åˆ†å—ï¼Œ2 * 2åˆ†å—å’Œ4 * 4å­å›¾é‡Œåˆ†åˆ«å–æ¯ä¸€ä¸ªæ¡†å†…çš„maxå€¼ï¼ˆå³å–è“æ¡†æ¡†å†…çš„æœ€å¤§å€¼ï¼‰ï¼Œè¿™ä¸€æ­¥å°±æ˜¯ä½œæœ€å¤§æ± åŒ–ï¼Œè¿™æ ·æœ€åæå–å‡ºæ¥çš„ç‰¹å¾å€¼ï¼ˆå³å–å‡ºæ¥çš„æœ€å¤§å€¼ï¼‰ä¸€å…±æœ‰1 * 1 + 2 * 2 + 4 * 4 &#x3D; 21ä¸ªã€‚å¾—å‡ºçš„ç‰¹å¾å†concatåœ¨ä¸€èµ·ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/34.png"></p><h4 id="SPPF"><a href="#SPPF" class="headerlink" title="SPPF"></a>SPPF</h4><p>SPPFä¸²è”ä½¿ç”¨äº†æ± åŒ–å±‚ï¼Œä½¿å¾—è®¡ç®—æ•ˆç‡æ›´é«˜ã€‚<br>å°†ä¸¤ä¸ª5Ã—5çš„æ± åŒ–å±‚è¿›è¡Œä¸²è”ç­‰ä»·äºä½¿ç”¨ä¸€ä¸ª9Ã—9çš„æœ€å¤§æ± åŒ–ï¼Œè€Œä½¿ç”¨3ä¸ª5Ã—5çš„æœ€å¤§æ± åŒ–åˆç­‰ä»·äºä¸€ä¸ª13Ã—13çš„æœ€å¤§æ± åŒ–ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/35.png"></p><h3 id="æ•°æ®å¢å¼ºç­–ç•¥"><a href="#æ•°æ®å¢å¼ºç­–ç•¥" class="headerlink" title="æ•°æ®å¢å¼ºç­–ç•¥"></a>æ•°æ®å¢å¼ºç­–ç•¥</h3><p>Mosaicï¼ˆå›¾åƒæ‹¼æ¥ï¼‰<br><code>&lt;br&gt;</code>Copy pasteï¼ˆå°†ä¸åŒå›¾åƒä¸­çš„ç›®æ ‡è¿›è¡Œè´Ÿå€¼å’Œç²˜è´´ï¼‰<br><code>&lt;br&gt;</code>Random affineï¼ˆéšæœºä»¿å°„å˜æ¢ï¼šæ—‹è½¬ã€å¹³ç§»ç­‰ï¼‰<br><code>&lt;br&gt;</code>MixUpï¼ˆå°†ä¸¤å¼ å›¾ç‰‡æŒ‰ä¸€å®šé€æ˜ç¨‹åº¦æ··åˆæˆä¸€å¼ å›¾ç‰‡ï¼‰<br><code>&lt;br&gt;</code>Albumentationsï¼ˆæ»¤æ³¢ã€ç›´æ–¹å›¾å‡è¡¡åŒ–ä»¥åŠæ”¹å˜å›¾ç‰‡è´¨é‡ç­‰ç­‰ï¼‰<br><code>&lt;br&gt;</code>Augment HSVï¼ˆè°ƒæ•´å›¾åƒè‰²åº¦ã€é€æ˜åº¦å’Œé¥±å’Œåº¦ï¼‰<br><code>&lt;br&gt;</code>Random horizontal flipï¼ˆæ°´å¹³ç¿»è½¬ï¼‰</p><h3 id="è®­ç»ƒç­–ç•¥"><a href="#è®­ç»ƒç­–ç•¥" class="headerlink" title="è®­ç»ƒç­–ç•¥"></a>è®­ç»ƒç­–ç•¥</h3><p>Multi-scale training(0.5~1.5x)ï¼ˆå¤šå°ºåº¦è®­ç»ƒï¼‰<br><code>&lt;br&gt;</code>AutoAnchor(For training custom data)ï¼ˆé‡æ–°ç”Ÿæˆanchorï¼‰<br><code>&lt;br&gt;</code>Warmup and Cosine LR schedulerï¼ˆå­¦ä¹ ç‡çš„è°ƒæ•´ï¼‰<br><code>&lt;br&gt;</code>EMA(Exponential Moving Average)Mixed precisionï¼ˆå°†å­¦ä¹ å˜é‡æ·»åŠ ä¸€ä¸ªåŠ¨é‡ï¼‰<br><code>&lt;br&gt;</code>Mixed precisionï¼ˆæ··åˆç²¾åº¦è®­ç»ƒï¼‰<br><code>&lt;br&gt;</code>Evolve hyper-parameters</p><h3 id="æŸå¤±å‡½æ•°-1"><a href="#æŸå¤±å‡½æ•°-1" class="headerlink" title="æŸå¤±å‡½æ•°"></a>æŸå¤±å‡½æ•°</h3><p>Classes lossï¼Œåˆ†ç±»æŸå¤±ï¼Œé‡‡ç”¨çš„æ˜¯BCE lossï¼ˆäºŒå€¼äº¤å‰ç†µæŸå¤±ï¼‰ï¼Œæ³¨æ„åªè®¡ç®—æ­£æ ·æœ¬çš„åˆ†ç±»æŸå¤±ã€‚<br><code>&lt;br&gt;</code>objectness lossï¼ŒobjæŸå¤±ï¼Œé‡‡ç”¨çš„ä¾ç„¶æ˜¯BCE lossï¼Œæ³¨æ„è¿™é‡Œçš„objæŒ‡çš„æ˜¯ç½‘ç»œé¢„æµ‹çš„ç›®æ ‡è¾¹ç•Œæ¡†ä¸GT<br>Boxçš„CIoUã€‚è¿™é‡Œè®¡ç®—çš„æ˜¯æ‰€æœ‰æ ·æœ¬çš„objæŸå¤±ã€‚<br><code>&lt;br&gt;</code>Location lossï¼Œå®šä½æŸå¤±ï¼Œé‡‡ç”¨çš„æ˜¯CIoU lossï¼Œæ³¨æ„åªè®¡ç®—æ­£æ ·æœ¬çš„å®šä½æŸå¤±ã€‚</p><h2 id="YOLOX"><a href="#YOLOX" class="headerlink" title="YOLOX"></a>YOLOX</h2><p><a href="https://arxiv.org/abs/2107.08430">paper(CVPR2021)</a></p><p><a href="https://github.com/Megvii-BaseDetection/YOLOX">code</a></p><p>ä¸yolov5çš„å¯¹æ¯”<br><img src="https://xinhaojin.github.io/imgs-host/20221010/36.png"></p><h3 id="decoupled-head"><a href="#decoupled-head" class="headerlink" title="decoupled head"></a>decoupled head</h3><p>YOLOXå’ŒYOLOv5åœ¨ç½‘ç»œç»“æ„ä¸Šçš„ä¸»è¦çš„å·®åˆ«å°±åœ¨æ£€æµ‹å¤´headéƒ¨åˆ†ã€‚ä¹‹å‰çš„æ£€æµ‹å¤´å°±æ˜¯é€šè¿‡ä¸€ä¸ªå·ç§¯æ ¸å¤§å°ä¸º1x1çš„å·ç§¯å±‚å®ç°çš„ï¼Œå³è¿™ä¸ªå·ç§¯å±‚è¦åŒæ—¶é¢„æµ‹ç±»åˆ«åˆ†æ•°ã€è¾¹ç•Œæ¡†å›å½’å‚æ•°ä»¥åŠIOUï¼Œè¿™ç§æ–¹å¼åœ¨æ–‡ç« ä¸­ç§°ä¹‹ä¸ºcoupled detection headï¼ˆè€¦åˆçš„æ£€æµ‹å¤´ï¼‰ã€‚ä½œè€…è¯´é‡‡ç”¨coupled detection headæ˜¯å¯¹ç½‘ç»œæœ‰å®³çš„ï¼Œå¦‚æœå°†coupled detection headæ¢æˆdecoupled detection headï¼ˆè§£è€¦çš„æ£€æµ‹å¤´ï¼‰èƒ½å¤Ÿå¤§å¹…æå‡ç½‘ç»œçš„æ”¶æ•›é€Ÿåº¦ã€‚åœ¨è®ºæ–‡çš„å›¾3ä¸­å±•ç¤ºäº†YOLO v3åˆ†åˆ«ä½¿ç”¨coupled detection headå’Œdecoupled detection headçš„è®­ç»ƒæ”¶æ•›æƒ…å†µï¼Œæ˜æ˜¾é‡‡ç”¨decoupled detection headåæ”¶æ•›é€Ÿåº¦ä¼šæ›´å¿«ï¼ˆåœ¨è®ºæ–‡çš„è¡¨2ä¸­æ˜¾ç¤ºé‡‡ç”¨decoupled detection headèƒ½å¤Ÿæå‡APçº¦1.1ä¸ªç‚¹ï¼‰ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/37.png"><br>åˆ°åº•ä»€ä¹ˆæ˜¯è§£è€¦çš„æ£€æµ‹å¤´ï¼Ÿæ ¹æ®åŸè®ºæ–‡çš„å›¾2ä»¥åŠæºç ç»˜åˆ¶çš„decoupled detection headç»“æ„å¦‚ä¸‹ã€‚åœ¨decoupled detection headä¸­å¯¹äºé¢„æµ‹Clsã€Regä»¥åŠIoUå‚æ•°åˆ†åˆ«ä½¿ç”¨ä¸‰ä¸ªä¸åŒçš„åˆ†æ”¯ï¼Œè¿™æ ·å°±å°†ä¸‰è€…è¿›è¡Œäº†è§£è€¦ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/38.png"></p><h3 id="anchor-free"><a href="#anchor-free" class="headerlink" title="anchor-free"></a>anchor-free</h3><p>ç›®å‰è¡Œä¸šå†…ï¼Œä¸»è¦æœ‰Anchor Basedå’ŒAnchor Freeä¸¤ç§æ–¹å¼ã€‚</p><p>åœ¨Yolov3ã€Yolov4ã€Yolov5ä¸­ï¼Œé€šå¸¸éƒ½æ˜¯é‡‡ç”¨Anchor Basedçš„æ–¹å¼ï¼Œæ¥æå–ç›®æ ‡æ¡†ï¼Œè¿›è€Œå’Œæ ‡æ³¨çš„groundtruthè¿›è¡Œæ¯”å¯¹ï¼Œåˆ¤æ–­ä¸¤è€…çš„å·®è·ã€‚</p><p><strong>ç¼ºç‚¹</strong></p><p>1).anchorä¼šå¼•å…¥å¾ˆå¤šéœ€è¦ä¼˜åŒ–çš„è¶…å‚æ•°ï¼Œ æ¯”å¦‚anchor numberã€anchor sizeã€anchor ratioã€‚</p><p>2).å› ä¸ºanchorçš„å¤§å°ã€æ¯”ä¾‹ã€æ•°é‡éƒ½æ˜¯æå‰ç¡®å®šçš„ï¼Œä¼šå½±å“æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ã€‚å¯¹äºæ–°çš„æ£€æµ‹ä»»åŠ¡ï¼Œéœ€è¦é‡æ–°è®¾è®¡anchorçš„å„ç§å‚æ•°ã€‚<br>ä¸ºäº†ä¿è¯high recall rateï¼Œéœ€è¦å¤§é‡å¯†é›†åˆ†å¸ƒçš„anchor boxesï¼Œä¼šå¯¼è‡´è®­ç»ƒé˜¶æ®µæ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡çš„é—®é¢˜ã€‚</p><p>3).å› ä¸ºanchor boxesæ•°é‡ç‰¹åˆ«å¤šï¼Œè®­ç»ƒé˜¶æ®µéœ€è¦è®¡ç®—æ‰€æœ‰anchor boxeså’Œground-truth boxesçš„IOUï¼Œå¯¼è‡´ç‰¹åˆ«å¤§çš„è®¡ç®—é‡å’Œå†…å­˜ï¼ˆæ˜¾å­˜ï¼‰å ç”¨ã€‚<br><strong>Anchor Basedæ–¹å¼</strong></p><p>æ¯”å¦‚è¾“å…¥å›¾åƒï¼Œç»è¿‡Backboneã€Neckå±‚ï¼Œæœ€ç»ˆå°†ç‰¹å¾ä¿¡æ¯ï¼Œä¼ é€åˆ°è¾“å‡ºçš„Feature Mapä¸­ã€‚</p><p>è¿™æ—¶ï¼Œå°±è¦è®¾ç½®ä¸€äº›Anchorè§„åˆ™ï¼Œå°†é¢„æµ‹æ¡†å’Œæ ‡æ³¨æ¡†è¿›è¡Œå…³è”ã€‚ä»è€Œåœ¨è®­ç»ƒä¸­ï¼Œè®¡ç®—ä¸¤è€…çš„å·®è·ï¼Œå³æŸå¤±å‡½æ•°ï¼Œå†æ›´æ–°ç½‘ç»œå‚æ•°ã€‚</p><p>æ¯”å¦‚åœ¨ä¸‹å›¾çš„ï¼Œæœ€åçš„ä¸‰ä¸ªFeature Mapä¸Šï¼ŒåŸºäºæ¯ä¸ªå•å…ƒæ ¼ï¼Œéƒ½æœ‰ä¸‰ä¸ªä¸åŒå°ºå¯¸å¤§å°çš„é”šæ¡†ã€‚å½“è¾“å…¥ä¸º416<em>416æ—¶ï¼Œç½‘ç»œæœ€åçš„ä¸‰ä¸ªç‰¹å¾å›¾å¤§å°åˆ†åˆ«ä¸º13</em>13ï¼Œ26<em>26ï¼Œ52</em>52ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/40.png"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé»„è‰²æ¡†ä¸ºå°ç‹—çš„Groundtruthï¼Œå³æ ‡æ³¨æ¡†ï¼ˆçœŸå€¼ï¼‰ã€‚</p><p>è€Œè“è‰²çš„æ¡†ï¼Œä¸ºå°ç‹—ä¸­å¿ƒç‚¹æ‰€åœ¨çš„å•å…ƒæ ¼ï¼ˆçº¢æ¡†ï¼‰ï¼Œæ‰€å¯¹åº”çš„é”šæ¡†ï¼Œæ¯ä¸ªå•å…ƒæ ¼éƒ½æœ‰3ä¸ªè“æ¡†ã€‚</p><p>å½“é‡‡ç”¨COCOæ•°æ®é›†ï¼Œå³æœ‰80ä¸ªç±»åˆ«æ—¶ã€‚</p><p>åŸºäºæ¯ä¸ªé”šæ¡†ï¼Œéƒ½æœ‰xã€yã€wã€hã€objï¼ˆå‰æ™¯èƒŒæ™¯ï¼‰ã€classï¼ˆ80ä¸ªç±»åˆ«ï¼‰ï¼Œå…±85ä¸ªå‚æ•°ã€‚</p><p>å› æ­¤ä¼šäº§ç”Ÿ3*(13<em>13+26</em>26+52*52ï¼‰*85&#x3D;904995ä¸ªé¢„æµ‹ç»“æœã€‚</p><p>å¦‚æœå°†è¾“å…¥ä»416<em>416ï¼Œå˜ä¸º640</em>640ï¼Œæœ€åçš„ä¸‰ä¸ªç‰¹å¾å›¾å¤§å°ä¸º20<em>20,40</em>40,80*80ã€‚</p><p>åˆ™ä¼šäº§ç”Ÿ3*ï¼ˆ20<em>20+40</em>40+80*80ï¼‰*85&#x3D;2142000ä¸ªé¢„æµ‹ç»“æœã€‚</p><p><strong>Anchor Freeæ–¹å¼</strong><br>åœ¨å‰é¢Anchor Basedä¸­ï¼Œæ¯ä¸ªFeature mapçš„å•å…ƒæ ¼ï¼Œéƒ½æœ‰3ä¸ªå¤§å°ä¸ä¸€çš„é”šæ¡†ã€‚</p><p>é‚£ä¹ˆYolox-Darknet53å°±æ²¡æœ‰å—ï¼Ÿ</p><p>å…¶å®å¹¶ä¸ç„¶ï¼Œè¿™é‡Œåªæ˜¯å·§å¦™åœ°å°†å‰é¢Backboneä¸­ï¼Œä¸‹é‡‡æ ·çš„å¤§å°ä¿¡æ¯å¼•å…¥è¿›æ¥ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/41.png"><br>æ¯”å¦‚ä¸Šå›¾ä¸­ï¼Œæœ€ä¸Šé¢çš„åˆ†æ”¯ï¼Œä¸‹é‡‡æ ·äº†5æ¬¡ï¼Œ2çš„5æ¬¡æ–¹ä¸º32ã€‚</p><p>å¹¶ä¸”Decoupled Headçš„è¾“å‡ºï¼Œä¸º20<em>20</em>85å¤§å°ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/42.png"><br>å› æ­¤å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p><p>æœ€å8400ä¸ªé¢„æµ‹æ¡†ä¸­ï¼Œå…¶ä¸­æœ‰400ä¸ªæ¡†(20*20)ï¼Œæ‰€å¯¹åº”é”šæ¡†çš„å¤§å°ï¼Œä¸º32 * 32ã€‚</p><p>åŒæ ·çš„åŸç†ï¼Œä¸­é—´çš„åˆ†æ”¯ï¼Œæœ€åæœ‰1600ä¸ªé¢„æµ‹æ¡†(40*40)ï¼Œæ‰€å¯¹åº”é”šæ¡†çš„å¤§å°ï¼Œä¸º16 * 16ã€‚</p><p>æœ€ä¸‹é¢çš„åˆ†æ”¯ï¼Œæœ€åæœ‰6400ä¸ªé¢„æµ‹æ¡†(80*80)ï¼Œæ‰€å¯¹åº”é”šæ¡†çš„å¤§å°ï¼Œä¸º8 * 8ã€‚</p><p>å½“æœ‰äº†8400ä¸ªé¢„æµ‹æ¡†çš„ä¿¡æ¯ï¼Œæ¯å¼ å›¾ç‰‡ä¹Ÿæœ‰æ ‡æ³¨çš„ç›®æ ‡æ¡†çš„ä¿¡æ¯ã€‚<br>ä¸‹ä¸€æ­¥éœ€è¦åšçš„ï¼Œå°±æ˜¯å°†8400ä¸ªé”šæ¡†ï¼Œå’Œå›¾ç‰‡ä¸Šæ‰€æœ‰çš„ç›®æ ‡æ¡†è¿›è¡Œå…³è”ï¼ŒæŒ‘é€‰å‡ºæ­£æ ·æœ¬é”šæ¡†ã€‚</p><h3 id="æ ‡ç­¾åˆ†é…"><a href="#æ ‡ç­¾åˆ†é…" class="headerlink" title="æ ‡ç­¾åˆ†é…"></a>æ ‡ç­¾åˆ†é…</h3><p>å½“æœ‰äº†8400ä¸ªAnchoré”šæ¡†åï¼Œè¿™é‡Œçš„æ¯ä¸€ä¸ªé”šæ¡†ï¼Œéƒ½å¯¹åº”85*8400ç‰¹å¾å‘é‡ä¸­çš„é¢„æµ‹æ¡†ä¿¡æ¯ã€‚</p><p>ä¸è¿‡éœ€è¦çŸ¥é“ï¼Œè¿™äº›é¢„æµ‹æ¡†åªæœ‰å°‘éƒ¨åˆ†æ˜¯æ­£æ ·æœ¬ï¼Œç»å¤§å¤šæ•°æ˜¯è´Ÿæ ·æœ¬ã€‚</p><p>é‚£ä¹ˆåˆ°åº•å“ªäº›æ‰æ˜¯æ­£æ ·æœ¬å‘¢ï¼Ÿ</p><p>è¿™é‡Œéœ€è¦åˆ©ç”¨é”šæ¡†å’Œå®é™…ç›®æ ‡æ¡†çš„å…³ç³»ï¼Œå…ˆæŒ‘é€‰å‡ºä¸€éƒ¨åˆ†é€‚åˆçš„æ­£æ ·æœ¬é”šæ¡†ã€‚</p><p>æ¯”å¦‚ç¬¬3ã€10ã€15ä¸ªé”šæ¡†æ˜¯æ­£æ ·æœ¬é”šæ¡†ï¼Œåˆ™å¯¹åº”åˆ°ç½‘ç»œè¾“å‡ºçš„8400ä¸ªé¢„æµ‹æ¡†ä¸­ï¼Œç¬¬3ã€10ã€15ä¸ªé¢„æµ‹æ¡†ï¼Œå°±æ˜¯ç›¸åº”çš„æ­£æ ·æœ¬é¢„æµ‹æ¡†ã€‚</p><p>è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œåœ¨é”šæ¡†çš„åŸºç¡€ä¸Šï¼Œä¸æ–­çš„é¢„æµ‹ï¼Œç„¶åä¸æ–­çš„è¿­ä»£ï¼Œä»è€Œæ›´æ–°ç½‘ç»œå‚æ•°ï¼Œè®©ç½‘ç»œæŸå¤±è¶Šæ¥è¶Šå°ï¼Œé¢„æµ‹çš„è¶Šæ¥è¶Šå‡†ã€‚</p><p>é‚£ä¹ˆåœ¨Yoloxä¸­ï¼Œæ˜¯å¦‚ä½•æŒ‘é€‰æ­£æ ·æœ¬é”šæ¡†çš„å‘¢ï¼Ÿ</p><p>è¿™é‡Œå°±æ¶‰åŠåˆ°ä¸¤ä¸ªå…³é”®ç‚¹ï¼šåˆæ­¥ç­›é€‰ã€SimOTAã€‚</p><h4 id="åˆæ­¥ç­›é€‰"><a href="#åˆæ­¥ç­›é€‰" class="headerlink" title="åˆæ­¥ç­›é€‰"></a>åˆæ­¥ç­›é€‰</h4><p>1.ä¸­å¿ƒç‚¹åœ¨çœŸå®æ¡†å†…çš„é”šæ¡†</p><p>2.å·²çœŸå®æ¡†ä¸­å¿ƒç‚¹ä¸ºåŸºå‡†ï¼Œè®¾ç½®è¾¹é•¿ä¸º5çš„æ­£æ–¹å½¢ï¼ŒæŒ‘é€‰åœ¨æ­£æ–¹å½¢å†…çš„æ‰€æœ‰é”šæ¡†</p><h4 id="SimOTA"><a href="#SimOTA" class="headerlink" title="SimOTA"></a>SimOTA</h4><p><img src="https://xinhaojin.github.io/imgs-host/20221010/43.png"><br>SimOTAå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§åŒ¹é…ç­–ç•¥çš„æ–¹æ³•ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæœ€ä¼˜ä¼ è¾“çš„é—®é¢˜ã€‚ä¸¾ä¸€ä¸ªé€šä¿—æ˜“æ‡‚çš„ä¾‹å­å°±æ˜¯ï¼Œæœ‰2ä¸ªåˆ†é…åŸºåœ°ä¸6ä¸ªå‘¨å›´åŸå¸‚ï¼Œç°åœ¨éœ€è¦è€ƒè™‘ä¸€ä¸ªæœ€ä¼˜çš„é…é€æ–¹å¼æ¥ç¡®ä¿åˆ†é…ä¸œè¥¿åˆ°è¿™å‡ ä¸ªåŸå¸‚çš„è¿è¾“æˆæœ¬æ˜¯æœ€ä½çš„ã€‚è€Œå¯¹äºç›®æ ‡æ£€æµ‹æ¥è¯´ï¼Œè¿™ä¸ªæœ€ä¼˜ä¼ è¾“é—®é¢˜ä¹Ÿå°±æ˜¯ä¸€ä¸ªæœ€ä¼˜åˆ†é…é—®é¢˜ï¼Œå¦‚ä½•å®ç°æŠŠè¿™äº›anchor pointåˆ†é…ç»™groundtruthçš„ä»£ä»·ï¼ˆcostï¼‰æ˜¯æœ€ä½çš„ã€‚è¿™ä¸ªä»£ä»·å°±æ˜¯iouæŸå¤±ï¼Œåˆ†ç±»æŸå¤±ç­‰å†…å®¹ã€‚<br>(yoloxçš„æ ¸å¿ƒï¼Œä½†æ²¡çœ‹æ‡‚)</p><h2 id="YOLOv7"><a href="#YOLOv7" class="headerlink" title="YOLOv7"></a>YOLOv7</h2><p><a href="https://arxiv.org/abs/2207.02696">paper(CVPR2022)</a></p><p><a href="https://github.com/WongKinYiu/yolov7">code</a></p><p>æœ¬æ–‡çš„è´¡çŒ®æ€»ç»“å¦‚ä¸‹ï¼š</p><p>1.è®¾è®¡äº†å‡ ç§å¯è®­ç»ƒçš„bag-of-freebies æ–¹æ³•ï¼Œä½¿å¾—å®æ—¶ç›®æ ‡æ£€æµ‹å¯ä»¥åœ¨ä¸å¢åŠ æ¨ç†æˆæœ¬çš„æƒ…å†µä¸‹å¤§å¤§æé«˜æ£€æµ‹ç²¾åº¦ï¼›</p><p>2.å¯¹äºç›®æ ‡æ£€æµ‹æ–¹æ³•çš„å‘å±•ï¼Œæœ¬æ–‡å‘ç°äº†ä¸¤ä¸ªæ–°é—®é¢˜ï¼Œå³é‡å‚æ•°åŒ–æ¨¡å—ã€‚å¦‚ä½•æ›¿æ¢åŸå§‹æ¨¡å—ï¼Œä»¥åŠåŠ¨æ€æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œå¦‚ä½•å¤„ç†å¯¹ä¸åŒè¾“å‡ºå±‚çš„åˆ†é…ã€‚æ­¤å¤–ï¼Œæœ¬æ–‡è¿˜æå‡ºäº†è§£å†³è¿™äº›é—®é¢˜çš„æ–¹æ³•ï¼›</p><p>3.æœ¬æ–‡æå‡ºäº†å®æ—¶ç›®æ ‡æ£€æµ‹å™¨çš„extendå’Œcompound scalingå¤åˆç¼©æ”¾ æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨å‚æ•°å’Œè®¡ç®—ï¼›</p><p>4.æœ¬æ–‡æå‡ºçš„æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ç›®å‰æœ€ä¼˜ç§€çš„å®æ—¶ç›®æ ‡æ£€æµ‹å™¨çš„å¤§çº¦40%çš„å‚æ•°å’Œ50%çš„è®¡ç®—ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¿«çš„æ¨ç†é€Ÿåº¦å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ã€‚</p><h3 id="æ¨¡å‹é‡å‚æ•°åŒ–æ–¹æ³•-GoogLeNet-Snapshot-ensembles"><a href="#æ¨¡å‹é‡å‚æ•°åŒ–æ–¹æ³•-GoogLeNet-Snapshot-ensembles" class="headerlink" title="æ¨¡å‹é‡å‚æ•°åŒ–æ–¹æ³•(GoogLeNet,Snapshot ensembles)"></a>æ¨¡å‹é‡å‚æ•°åŒ–æ–¹æ³•(GoogLeNet,Snapshot ensembles)</h3><p>åœ¨æ¨ç†é˜¶æ®µå°†å¤šä¸ªè®¡ç®—æ¨¡å—åˆå¹¶ä¸ºä¸€ä¸ªã€‚æ¨¡å‹é‡å‚æ•°åŒ–æŠ€æœ¯å¯ä»¥è¢«è§†ä¸ºä¸€ç§é›†æˆæŠ€æœ¯ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºä¸¤ç±»ï¼Œå³æ¨¡å—çº§é›†æˆå’Œæ¨¡å‹çº§é›†æˆã€‚æœ‰ä¸¤ç§ç”¨äºæ¨¡å‹çº§é‡å‚æ•°åŒ–ä»¥è·å¾—æœ€ç»ˆæ¨ç†æ¨¡å‹çš„å¸¸è§ç”¨æ³•ï¼šä¸€ç§æ˜¯ç”¨ä¸åŒçš„è®­ç»ƒæ•°æ®è®­ç»ƒå¤šä¸ªç›¸åŒçš„æ¨¡å‹ï¼Œç„¶åå¯¹å¤šä¸ªè®­ç»ƒæ¨¡å‹çš„æƒé‡è¿›è¡Œå¹³å‡ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯å¯¹ä¸åŒè¿­ä»£æ¬¡æ•°ä¸‹çš„æ¨¡å‹æƒé‡è¿›è¡ŒåŠ æƒå¹³å‡ã€‚</p><p>æ¨¡å—çº§é‡å‚æ•°åŒ–æ˜¯æœ€è¿‘æ¯”è¾ƒæµè¡Œçš„ç ”ç©¶é—®é¢˜ã€‚è¿™ç§ç±»å‹çš„æ–¹æ³•åœ¨è®­ç»ƒæœŸé—´å°†æ¨¡å—æ‹†åˆ†ä¸ºå¤šä¸ªç›¸åŒæˆ–ä¸åŒçš„æ¨¡å—åˆ†æ”¯ï¼Œå¹¶åœ¨æ¨ç†æœŸé—´å°†å¤šä¸ªåˆ†æ”¯æ¨¡å—é›†æˆä¸ºå®Œå…¨ç­‰æ•ˆçš„æ¨¡å—ã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/46.png"></p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„å®æ—¶ç›®æ ‡æ£€æµ‹å™¨ä½“ç³»ç»“æ„ å’Œ ç›¸åº”çš„æ¨¡å‹ç¼©æ”¾æ–¹æ³•ã€‚æ­¤å¤–è¿˜å‘ç°ï¼Œç›®æ ‡æ£€æµ‹æ–¹æ³•çš„å‘å±•è¿‡ç¨‹äº§ç”Ÿäº†æ–°çš„ç ”ç©¶è¯¾é¢˜ã€‚åœ¨ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº† é‡å‚æ•°åŒ–æ¨¡å—çš„æ›¿æ¢é—®é¢˜å’ŒåŠ¨æ€æ ‡ç­¾åˆ†é…çš„åˆ†é…é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§å¯è®­ç»ƒçš„bag-of-freebies ï¼Œä»¥æé«˜ç›®æ ‡æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¼€å‘äº†YOLOv7ç³»åˆ—ç›®æ ‡æ£€æµ‹ç³»ç»Ÿ ï¼Œè¯¥ç³»ç»Ÿè·å¾—äº†æœ€ä¼˜ç§€çš„ç»“æœã€‚</p><h2 id="YOLOv6"><a href="#YOLOv6" class="headerlink" title="YOLOv6"></a>YOLOv6</h2><p><a href="https://arxiv.org/abs/2209.02976">paper(CVPR2022)</a></p><p><a href="https://github.com/meituan/YOLOv6">code</a></p><p>YOLOv6 æ˜¯ç¾å›¢è§†è§‰æ™ºèƒ½éƒ¨ç ”å‘çš„ä¸€æ¬¾ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œè‡´åŠ›äºå·¥ä¸šåº”ç”¨ã€‚æœ¬æ¡†æ¶åŒæ—¶ä¸“æ³¨äºæ£€æµ‹çš„ç²¾åº¦å’Œæ¨ç†æ•ˆç‡ï¼Œåœ¨å·¥ä¸šç•Œå¸¸ç”¨çš„å°ºå¯¸æ¨¡å‹ä¸­ï¼šYOLOv6-nano åœ¨ COCO ä¸Šç²¾åº¦å¯è¾¾ 35.0% APï¼Œåœ¨ T4 ä¸Šæ¨ç†é€Ÿåº¦å¯è¾¾ 1242 FPSï¼›YOLOv6-s åœ¨ COCO ä¸Šç²¾åº¦å¯è¾¾ 43.1% APï¼Œåœ¨ T4 ä¸Šæ¨ç†é€Ÿåº¦å¯è¾¾ 520 FPSã€‚åœ¨éƒ¨ç½²æ–¹é¢ï¼ŒYOLOv6 æ”¯æŒ GPUï¼ˆTensorRTï¼‰ã€CPUï¼ˆOPENVINOï¼‰ã€ARMï¼ˆMNNã€TNNã€NCNNï¼‰ç­‰ä¸åŒå¹³å°çš„éƒ¨ç½²ï¼Œæå¤§åœ°ç®€åŒ–å·¥ç¨‹éƒ¨ç½²æ—¶çš„é€‚é…å·¥ä½œã€‚<br><img src="https://xinhaojin.github.io/imgs-host/20221010/45.png"></p><h3 id="ç°æœ‰YOLOçš„é—®é¢˜"><a href="#ç°æœ‰YOLOçš„é—®é¢˜" class="headerlink" title="ç°æœ‰YOLOçš„é—®é¢˜"></a>ç°æœ‰YOLOçš„é—®é¢˜</h3><p>æ ¹æ®ç»éªŒåˆ†æä»¥å¾€YOLOç³»åˆ—åŠæœ€æ–°ç®—æ³•ï¼Œè§‚å¯Ÿåˆ°äº†å‡ ä¸ªé‡è¦å› ç´ ï¼Œè¿™äº›å› ç´ ä¿ƒä½¿é‡æ–°å®Œå–„YOLOæ¡†æ¶ï¼š</p><p>1.RepVGGçš„é‡å‚æ•°åŒ–ç®—æ³•æ˜¯ä¸€ç§ä¼˜è¶Šçš„æŠ€æœ¯ï¼Œå°šæœªåœ¨æ£€æµ‹ä¸­å¾—åˆ°å……åˆ†åˆ©ç”¨ã€‚è€Œä¸”ï¼ŒRepVGG Blockçš„æ¨¡å‹ç¼©æ”¾ä¸åˆ‡å®é™…ï¼Œæœ¬æ–‡è®¤ä¸ºå°å‹å’Œå¤§å‹ç½‘ç»œä¹‹é—´çš„ç½‘ç»œè®¾è®¡ä¿æŒä¸€è‡´æ˜¯ä¸å¿…è¦çš„ã€‚æ™®é€šå•è·¯å¾„æ¶æ„å¯¹äºå°å‹ç½‘ç»œæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯å¯¹äºæ›´å¤§çš„æ¨¡å‹ï¼Œå‚æ•°çš„æŒ‡æ•°å¢é•¿å’Œå•è·¯å¾„æ¶æ„çš„è®¡ç®—æˆæœ¬ä½¿å…¶ä¸å¯è¡Œï¼›</p><p>2.åŸºäºé‡å‚æ•°åŒ–çš„æ£€æµ‹å™¨çš„é‡åŒ–ä¹Ÿéœ€è¦ç»†è‡´çš„å¤„ç†ï¼Œå¦åˆ™ï¼Œç”±äºå…¶åœ¨è®­ç»ƒå’Œæ¨ç†æœŸé—´çš„ä¸åŒå¤„ç†ï¼Œå¾ˆéš¾å¤„ç†æ€§èƒ½é€€åŒ–çš„é—®é¢˜ã€‚</p><p>3.ä»¥å‰çš„ç®—æ³•[YOLOXï¼ŒYOLOv5ï¼ŒYOLOv7ï¼ŒPP-YOLOE]è¾ƒå°‘ å…³æ³¨éƒ¨ç½²ï¼Œå…¶å»¶è¿Ÿé€šå¸¸åœ¨é«˜æˆæœ¬æœºå™¨ï¼ˆå¦‚V100ï¼‰ä¸Šè¿›è¡Œæ¯”è¾ƒã€‚åœ¨å®é™…æœåŠ¡ç¯å¢ƒä¸­ï¼Œå­˜åœ¨ç¡¬ä»¶å·®è·ã€‚</p><p>4.å…ˆè¿›çš„ç‰¹å®šç­–ç•¥ï¼Œå¦‚ æ ‡ç­¾åˆ†é…å’Œ æŸå¤±å‡½æ•°è®¾è®¡ï¼Œè€ƒè™‘åˆ°æ¶æ„å·®å¼‚ï¼Œéœ€è¦è¿›ä¸€æ­¥éªŒè¯ä½¿ç”¨ï¼›</p><p>5.å¯¹äºéƒ¨ç½²ï¼Œå¯ä»¥å¯¹è®­ç»ƒç­–ç•¥è¿›è¡Œè°ƒæ•´ï¼Œä»¥æé«˜å‡†ç¡®æ€§æ€§èƒ½ï¼Œä½†ä¸å¢åŠ æ¨ç†æˆæœ¬ï¼Œå¦‚çŸ¥è¯†è’¸é¦ã€‚</p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>é€šè¿‡å¯¹ä»¥ä¸Šé—®é¢˜çš„åˆ†æï¼Œæå‡ºäº†YOLOv6ï¼Œåœ¨ç²¾åº¦å’Œé€Ÿåº¦æ–¹é¢å®ç°äº†è¿„ä»Šä¸ºæ­¢æœ€å¥½çš„æŠ˜è¡·ã€‚å¦å¤–ä¸ºäº†æé«˜æ¨ç†é€Ÿåº¦è€Œä¸ä½¿æ€§èƒ½æœ‰æœ‰å¤ªå¤šé€€åŒ–ï¼Œç ”ç©¶äº†æœ€å‰æ²¿çš„é‡åŒ–æ–¹æ³•ï¼ŒåŒ…æ‹¬ è®­ç»ƒåé‡åŒ–ï¼ˆpost-training quantization,PTQï¼‰å’Œ é‡åŒ–æ„ŸçŸ¥è®­ç»ƒï¼ˆquantization-aware training,QATï¼‰ï¼Œå¹¶å°†å…¶æ•´åˆåœ¨YOLOv6ä¸­ã€‚<br>YOLOv6çš„å…³é”®ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š</p><p>1.ä¸ºä¸åŒåœºæ™¯ä¸­çš„å·¥ä¸šåº”ç”¨é‡èº«å®šåˆ¶äº†ä¸€ç³»åˆ—ä¸åŒè§„æ¨¡çš„ç½‘ç»œã€‚ä¸åŒè§„æ¨¡çš„æ¶æ„å„ä¸ç›¸åŒï¼Œä»¥å®ç°æœ€ä½³çš„é€Ÿåº¦å’Œç²¾åº¦æƒè¡¡ï¼Œå…¶ä¸­å°å‹æ¨¡å‹é‡‡ç”¨ç®€å•çš„å•è·¯å¾„backboneï¼Œå¤§å‹æ¨¡å‹æ„å»ºåœ¨é«˜æ•ˆçš„å¤šåˆ†æ”¯å—ä¸Šã€‚</p><p>2.ä¸ºYOLOv6åœ¨åˆ†ç±»ä»»åŠ¡å’Œå›å½’ä»»åŠ¡ä¸­éƒ½åŠ å…¥äº†è‡ªè’¸é¦ç­–ç•¥ã€‚åŒæ—¶ï¼ŒåŠ¨æ€è°ƒæ•´æ¥è‡ªteacherå’Œæ ‡ç­¾çš„ä¿¡æ¯ï¼Œä»¥å¸®åŠ©studentæ¨¡å‹èƒ½åœ¨æ‰€æœ‰è®­ç»ƒé˜¶æ®µæ›´æœ‰æ•ˆåœ°å­¦ä¹ çŸ¥è¯†ã€‚</p><p>3.å¹¿æ³›éªŒè¯äº†æ¯”è¾ƒå…ˆè¿›çš„æŠ€æœ¯ï¼Œä¾‹å¦‚ æ ‡ç­¾åˆ†é…ã€æŸå¤±å‡½æ•°å’Œæ•°æ®å¢å¼ºæŠ€æœ¯ç­‰ï¼Œå¹¶ æœ‰é€‰æ‹©åœ°é‡‡ç”¨å®ƒä»¬ä»¥è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚</p><p>4.åœ¨ RepOptimizerä¼˜åŒ–å™¨å’Œé€šé“è’¸é¦çš„å¸®åŠ©ä¸‹ï¼Œå¯¹æ£€æµ‹ä»»åŠ¡çš„é‡åŒ–æ–¹æ¡ˆè¿›è¡Œäº†æ”¹é©ï¼Œå¾—åˆ°äº†ä¸€ä¸ªå…·æœ‰43.3%COCOAPå’Œ869FPSååé‡çš„å¿«é€Ÿå‡†ç¡®æ£€æµ‹å™¨(batchsizeä¸º32)ã€‚</p><h3 id="ç»“è®º-1"><a href="#ç»“è®º-1" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>ç®€è€Œè¨€ä¹‹ï¼Œè€ƒè™‘åˆ°æŒç»­çš„å·¥ä¸šéœ€æ±‚ï¼Œæå‡ºäº†YOLOv6ï¼Œä»”ç»†åˆ†æäº†è¿„ä»Šä¸ºæ­¢ç›®æ ‡æ£€æµ‹å™¨ç»„ä»¶çš„æ‰€æœ‰è¿›æ­¥ã€‚ç»“æœåœ¨ç²¾åº¦å’Œé€Ÿåº¦ä¸Šéƒ½è¶…è¿‡äº†å…¶ä»–å¯ç”¨çš„å®æ—¶ç›®æ ‡æ£€æµ‹å™¨ã€‚ä¸ºäº†ä¾¿äºå·¥ä¸šéƒ¨ç½²ï¼Œè¿˜ä¸ºYOLOv6æä¾›äº†ä¸€ç§å®šåˆ¶çš„é‡åŒ–æ–¹æ³•ï¼Œä»è€Œæä¾›äº†å‰æ‰€æœªæœ‰çš„å¿«é€Ÿæ£€æµ‹å™¨ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.bilibili.com/video/BV1gS4y1w79N">https://www.bilibili.com/video/BV1gS4y1w79N</a></p><p><a href="https://blog.csdn.net/weixin_45848575/article/details/125438818">https://blog.csdn.net/weixin_45848575/article/details/125438818</a></p><p><a href="https://www.jianshu.com/p/014e76d3b614">https://www.jianshu.com/p/014e76d3b614</a></p><p><a href="https://blog.csdn.net/qq_39707285/category_12009356.html">https://blog.csdn.net/qq_39707285/category_12009356.html</a></p><p><a href="https://blog.csdn.net/weixin_38688399/article/details/106692156">https://blog.csdn.net/weixin_38688399/article/details/106692156</a></p><p><a href="https://blog.csdn.net/weixin_55073640/article/details/122621148">https://blog.csdn.net/weixin_55073640/article/details/122621148</a></p><p><a href="https://blog.csdn.net/qq_37541097/article/details/125132817">https://blog.csdn.net/qq_37541097/article/details/125132817</a></p><p><a href="https://blog.csdn.net/rh8866/article/details/123775117">https://blog.csdn.net/rh8866/article/details/123775117</a></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>windowså‘½ä»¤è¡Œcmdä»£ç†è®¾ç½®ï¼ˆç»“åˆv2raynï¼‰</title>
    <link href="/2022/09/22/windows%E5%91%BD%E4%BB%A4%E8%A1%8Ccmd%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE%EF%BC%88%E7%BB%93%E5%90%88v2rayn%EF%BC%89/"/>
    <url>/2022/09/22/windows%E5%91%BD%E4%BB%A4%E8%A1%8Ccmd%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE%EF%BC%88%E7%BB%93%E5%90%88v2rayn%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="v2raynä»£ç†ç«¯å£"><a href="#v2raynä»£ç†ç«¯å£" class="headerlink" title="v2raynä»£ç†ç«¯å£"></a>v2raynä»£ç†ç«¯å£</h2><pre><code>socks5:127.0.0.1:10808http:127.0.0.1:10809</code></pre><h2 id="cmdä¸´æ—¶ä»£ç†ï¼ˆå¯¹å½“å‰cmdç”Ÿæ•ˆï¼‰"><a href="#cmdä¸´æ—¶ä»£ç†ï¼ˆå¯¹å½“å‰cmdç”Ÿæ•ˆï¼‰" class="headerlink" title="cmdä¸´æ—¶ä»£ç†ï¼ˆå¯¹å½“å‰cmdç”Ÿæ•ˆï¼‰"></a>cmdä¸´æ—¶ä»£ç†ï¼ˆå¯¹å½“å‰cmdç”Ÿæ•ˆï¼‰</h2><pre><code>set http_proxy=http://127.0.0.1:10809set https_proxy=http://127.0.0.1:10809set http_proxy=socks5://127.0.0.1:10808set https_proxy=socks5://127.0.0.1:10808</code></pre><h2 id="cmdæ°¸ä¹…ä»£ç†"><a href="#cmdæ°¸ä¹…ä»£ç†" class="headerlink" title="cmdæ°¸ä¹…ä»£ç†"></a>cmdæ°¸ä¹…ä»£ç†</h2><pre><code>netsh winhttp import proxy source=ie</code></pre><h3 id="æ‰“å¼€å‰åçš„å¯¹æ¯”"><a href="#æ‰“å¼€å‰åçš„å¯¹æ¯”" class="headerlink" title="æ‰“å¼€å‰åçš„å¯¹æ¯”"></a>æ‰“å¼€å‰åçš„å¯¹æ¯”</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-7.png"></p><h3 id="æµ‹è¯•ä»£ç†"><a href="#æµ‹è¯•ä»£ç†" class="headerlink" title="æµ‹è¯•ä»£ç†"></a>æµ‹è¯•ä»£ç†</h3><pre><code>curl www.google.com</code></pre><h3 id="æ§åˆ¶ä»£ç†å¼€å…³ï¼Œæ¸…é™¤ç³»ç»Ÿä»£ç†ï¼šå…³ï¼Œè‡ªåŠ¨é…ç½®ç³»ç»Ÿä»£ç†ï¼šå¼€ã€‚"><a href="#æ§åˆ¶ä»£ç†å¼€å…³ï¼Œæ¸…é™¤ç³»ç»Ÿä»£ç†ï¼šå…³ï¼Œè‡ªåŠ¨é…ç½®ç³»ç»Ÿä»£ç†ï¼šå¼€ã€‚" class="headerlink" title="æ§åˆ¶ä»£ç†å¼€å…³ï¼Œæ¸…é™¤ç³»ç»Ÿä»£ç†ï¼šå…³ï¼Œè‡ªåŠ¨é…ç½®ç³»ç»Ÿä»£ç†ï¼šå¼€ã€‚"></a>æ§åˆ¶ä»£ç†å¼€å…³ï¼Œæ¸…é™¤ç³»ç»Ÿä»£ç†ï¼šå…³ï¼Œè‡ªåŠ¨é…ç½®ç³»ç»Ÿä»£ç†ï¼šå¼€ã€‚</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-6.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä»£ç†</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Yolox+Siameseå­ªç”Ÿç¥ç»ç½‘ç»œ:å›¾æ ‡ç‚¹é€‰éªŒè¯ç è¯†åˆ«</title>
    <link href="/2022/09/15/yoloxsiamese%E5%AD%AA%E7%94%9F%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9B%BE%E6%A0%87%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81%E8%AF%86%E5%88%AB/"/>
    <url>/2022/09/15/yoloxsiamese%E5%AD%AA%E7%94%9F%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9B%BE%E6%A0%87%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p><a href="https://dun.163.com/trial/icon-click">å›¾æ ‡ç‚¹é€‰éªŒè¯ç _ç‚¹é€‰éªŒè¯ç _éªŒè¯ç API_åœ¨çº¿ä½“éªŒ_ç½‘æ˜“æ˜“ç›¾ (163.com)</a></p><p>ç½‘é¡µåœºæ™¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image.png"></p><p>å›¾ç‰‡ä¸‹è½½ä¸‹æ¥æ˜¯è¿™æ ·çš„ï¼Œåº•éƒ¨ä¼šæœ‰å‡ è¡Œå°å›¾æ ‡ï¼Œç¬¬ä¸‰è¡Œå°å›¾æ ‡æ˜¯æ­£ç¡®çš„é¡ºåº</p><p>è¿™ä¸ªé—®é¢˜çš„ç›®æ ‡å°±æ˜¯æŒ‰é¡ºåºç»™å‡ºä¸‰ä¸ªåæ ‡ç‚¹ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/00001.jpg"></p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="step1-ä½¿ç”¨yoloxæ£€æµ‹å‡ºæ‰€æœ‰å›¾æ ‡çš„ä½ç½®ï¼ˆä¸åŒ…å«ä¸‹é¢çš„ä¸‰è¡Œå›¾æ ‡ï¼‰"><a href="#step1-ä½¿ç”¨yoloxæ£€æµ‹å‡ºæ‰€æœ‰å›¾æ ‡çš„ä½ç½®ï¼ˆä¸åŒ…å«ä¸‹é¢çš„ä¸‰è¡Œå›¾æ ‡ï¼‰" class="headerlink" title="step1.ä½¿ç”¨yoloxæ£€æµ‹å‡ºæ‰€æœ‰å›¾æ ‡çš„ä½ç½®ï¼ˆä¸åŒ…å«ä¸‹é¢çš„ä¸‰è¡Œå›¾æ ‡ï¼‰"></a>step1.ä½¿ç”¨yoloxæ£€æµ‹å‡ºæ‰€æœ‰å›¾æ ‡çš„ä½ç½®ï¼ˆä¸åŒ…å«ä¸‹é¢çš„ä¸‰è¡Œå›¾æ ‡ï¼‰</h3><p>å› ä¸ºå›¾æ ‡ç§ç±»ä¼—å¤šï¼Œæ²¡æ³•ç›´æ¥ç”¨yoloxè¿›è¡Œå›¾æ ‡è¯¦ç»†åˆ†ç±»ï¼Œæ‰€ä»¥æˆ‘è®­ç»ƒçš„æ—¶å€™åªåˆ†äº†ä¸¤ç±»ï¼Œä¸€ç±»ç™½çš„ï¼Œä¸€ç±»é»‘çš„ï¼Œè™½ç„¶åœ¨æœ¬æ–‡å†™çš„æ–¹æ³•ä¸­è¿™ä¸ªç±»åˆ«å¹¶æ²¡æœ‰å‘æŒ¥ä½œç”¨ï¼Œä½†è€ƒè™‘åˆ°æ ‡æ³¨ä¸€ç±»å’Œä¸¤ç±»çš„å·¥ä½œé‡æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯æ ‡äº†ä¸¤ç±»ï¼Œè€Œä¸”å¦‚æœé‡‡ç”¨å…¶ä»–æ–¹æ³•å¯¹å›¾æ ‡è¿›è¡Œé¢„å¤„ç†ï¼Œè¿™ä¸ªåˆ†ç±»è¿˜æ˜¯æœ‰ç”¨çš„ã€‚</p><p>yoloxéƒ¨åˆ†ä¸åšä»‹ç»äº†ï¼Œä¹‹å‰ä¹Ÿå†™è¿‡å‡ ç¯‡ç›¸å…³çš„æ–‡ç« ï¼Œå¯ä»¥å‚è€ƒã€‚</p><p><a href="https://blog.xinhaojin.top/?s=yolox">â€œyoloxâ€çš„æœç´¢ç»“æœ â€“ Xinhao Jin</a></p><p><a href="https://github.com/Megvii-BaseDetection/YOLOX">Megvii-BaseDetection&#x2F;YOLOX: YOLOX is a high-performance anchor-free YOLO, exceeding yolov3~v5 with MegEngine, ONNX, TensorRT, ncnn, and OpenVINO supported. Documentation: https://yolox.readthedocs.io/ (github.com)</a></p><p>æ•ˆæœå¦‚ä¸‹å›¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-1.png"></p><h3 id="step2-ä½¿ç”¨å­ªç”Ÿç¥ç»ç½‘ç»œè®­ç»ƒå›¾åƒç›¸ä¼¼åº¦"><a href="#step2-ä½¿ç”¨å­ªç”Ÿç¥ç»ç½‘ç»œè®­ç»ƒå›¾åƒç›¸ä¼¼åº¦" class="headerlink" title="step2.ä½¿ç”¨å­ªç”Ÿç¥ç»ç½‘ç»œè®­ç»ƒå›¾åƒç›¸ä¼¼åº¦"></a>step2.ä½¿ç”¨å­ªç”Ÿç¥ç»ç½‘ç»œè®­ç»ƒå›¾åƒç›¸ä¼¼åº¦</h3><p>å€Ÿç”¨äº†å¤§ä½¬æä¾›çš„ä»£ç ï¼Œç‰¹å¾æå–ç½‘ç»œé‡‡ç”¨vgg16</p><p><a href="https://github.com/bubbliiiing/Siamese-pytorch">bubbliiiing&#x2F;Siamese-pytorch: è¿™æ˜¯ä¸€ä¸ªå­ªç”Ÿç¥ç»ç½‘ç»œï¼ˆSiamese networkï¼‰çš„åº“ï¼Œå¯è¿›è¡Œå›¾ç‰‡çš„ç›¸ä¼¼æ€§æ¯”è¾ƒã€‚ (github.com)</a></p><p>éœ€è¦å…³æ³¨çš„æ˜¯æ•°æ®é›†çš„æ ¼å¼ï¼Œå°±æ˜¯ä¸€ä¸ªç±»åˆ«ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾åŒä¸€ç±»åˆ«çš„å›¾ç‰‡ï¼Œç›¸ä¼¼åº¦è®°ä¸º1ï¼Œä¸åŒæ–‡ä»¶å¤¹é‡Œçš„å›¾ç‰‡æ˜¯ä¸åŒç±»çš„ï¼Œç›¸ä¼¼åº¦è®°ä¸º0ã€‚</p><p><strong>å¿«é€Ÿæ‰“æ ‡ç­¾åˆ¶ä½œæ•°æ®é›†çš„æ–¹æ³•</strong></p><p>yoloxæ¡†å‡ºæ¥çš„5å¼ å°å›¾ï¼Œä»å·¦åˆ°å³è®°ä¸º1-5ï¼Œç»™å‡ºå›¾æ ‡æ­£ç¡®é¡ºåºå¯¹åº”çš„è®°å·ï¼Œå¦‚ï¼Œä¾‹å›¾çš„æ ‡ç­¾ä¸º243ï¼Œ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/00001-1.jpg"></p><p>æ‰“å¼€å›¾ç‰‡æ–‡ä»¶å¤¹æ”¾å¤§ï¼Œæ‰“å¼€ä¸€ä¸ªè®°äº‹æœ¬å³å¯å¿«é€Ÿæ‰“æ ‡ç­¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-2.png"></p><p>æ‰“å®Œæ ‡ç­¾ï¼Œç»“åˆyoloxç»™å‡ºçš„ä½ç½®æ¡†ï¼Œå³å¯æ‰£å‡ºå›¾ç‰‡ï¼Œæ¯å¼ éªŒè¯ç å›¾ç‰‡å¯ä»¥å½¢æˆ3å¯¹å›¾ç‰‡ï¼ˆ3ä¸ªç±»åˆ«ï¼‰ï¼Œæ¯ä¸ªç±»åˆ«æœ‰3å¼ å›¾ï¼šéªŒè¯ç å›¾ç‰‡ä¸‹æ–¹ç»™å‡ºçš„é»‘å›¾ã€ç™½å›¾ï¼Œä»¥åŠåµŒå…¥èƒŒæ™¯çš„å›¾æ ‡ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-3.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-4.png"></p><h3 id="æ•°æ®é›†å»é‡"><a href="#æ•°æ®é›†å»é‡" class="headerlink" title="æ•°æ®é›†å»é‡"></a>æ•°æ®é›†å»é‡</h3><p>å¼€å¤´æåˆ°å›¾æ ‡ç§ç±»å¾ˆå¤šï¼Œä½†ä¹Ÿä¼šæœ‰é‡å¤çš„ï¼Œå› æ­¤å¦‚æœä»…æŒ‰ç…§ä¸Šé¢çš„æµç¨‹ï¼Œä¼šå¯¼è‡´åŒä¸€ç±»å›¾æ ‡æ”¾è¿›äº†ä¸¤ä¸ªä¸åŒæ–‡ä»¶å¤¹ï¼Œç¥ç»ç½‘ç»œå°±ä¸æ‡‚äº†ï¼Œåˆ°åº•æ˜¯è¦ç®—ä¸€ç±»è¿˜æ˜¯ä¸¤ç±»ï¼Ÿ</p><p>æ‰€ä»¥éœ€è¦ç»™æ•°æ®é›†å»é‡ï¼Œç¡®ä¿åŒä¸€ç±»çš„æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–¹æ³•æ˜¯å–å‡ºæ¯ä¸ªæ–‡ä»¶å¤¹çš„ç¬¬ä¸€ä¸ªå›¾æ ‡ï¼ˆ1.jpgæ˜¯éªŒè¯ç å›¾ç‰‡ä¸‹æ–¹ä¸‰æ’ä¸­çš„é»‘åº•ç™½å›¾ï¼‰ï¼Œè¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ï¼Œå¦‚æœè¶³å¤Ÿç›¸ä¼¼ï¼Œåˆ™æŠŠä¸¤ä¸ªæ–‡ä»¶å¤¹åˆå¹¶ã€‚</p><p>æ€ä¹ˆåˆ¤æ–­è¶³å¤Ÿç›¸ä¼¼ï¼Ÿå¦‚æœåŒä¸€ä¸ªå›¾æ ‡ï¼ˆé»‘åº•ç™½å›¾ï¼‰å‡ºç°åœ¨ä¸åŒéªŒè¯ç å›¾ç‰‡ä¸­ï¼Œé‚£ä¹ˆä»–ä»¬å‡ ä¹æ˜¯åƒç´ çº§ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡ŒäºŒå€¼åŒ–åå°†ä¸¤å¼ å›¾ç‰‡ç›¸å‡ï¼Œå–å·®å€¼ç»å¯¹å€¼ä¹‹å’Œï¼Œå¦‚æœè¿™ä¸ªå€¼è¶³å¤Ÿå°ï¼Œè¯´æ˜æ˜¯åŒä¸€ç±»çš„å›¾æ ‡ã€‚</p><h3 id="è®­ç»ƒ-é¢„æµ‹"><a href="#è®­ç»ƒ-é¢„æµ‹" class="headerlink" title="è®­ç»ƒ&amp;é¢„æµ‹"></a>è®­ç»ƒ&amp;é¢„æµ‹</h3><p>è®­ç»ƒè¿‡ç¨‹çœç•¥</p><p>é¢„æµ‹å°±æ˜¯è¾“å…¥ä¸¤ä¸ªå›¾ç‰‡ï¼Œç»™å‡ºç›¸ä¼¼åº¦</p><h3 id="ç»“æœå¤„ç†"><a href="#ç»“æœå¤„ç†" class="headerlink" title="ç»“æœå¤„ç†"></a>ç»“æœå¤„ç†</h3><p>é¢„æµ‹å¾—åˆ°ä¸€ä¸ª3*5çš„ç›¸ä¼¼åº¦çŸ©é˜µï¼Œå¾ªç¯é€‰å–ç›¸ä¼¼åº¦æœ€å¤§å€¼å¹¶åˆ é™¤æ‰€åœ¨è¡Œåˆ—å³å¯å¾—åˆ°æœ€ä½³åŒ¹é…ç»“æœï¼Œç»“æœç»˜å›¾å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/09/image-5.png"></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
      <tag>å­ªç”Ÿç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>paddleocrè½¬pytorchæ¨ç†</title>
    <link href="/2022/08/17/paddleocr%E8%BD%ACpytorch%E6%8E%A8%E7%90%86/"/>
    <url>/2022/08/17/paddleocr%E8%BD%ACpytorch%E6%8E%A8%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/frotms/PaddleOCR2Pytorch">frotms&#x2F;PaddleOCR2Pytorch: PaddleOCR inference in PyTorch. Converted from <a href="https://github.com/PaddlePaddle/PaddleOCR">PaddleOCR</a></a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre><code>paddlepaddle==2.0.0shapelynumpypillowpyclipperopencv-python &lt;= 4.2.0.32pytorchpyyamlscikit-image</code></pre><h2 id="ä¸­è‹±æ–‡æ¨ç†"><a href="#ä¸­è‹±æ–‡æ¨ç†" class="headerlink" title="ä¸­è‹±æ–‡æ¨ç†"></a>ä¸­è‹±æ–‡æ¨ç†</h2><p>forkäº†ä¸€ä¸ªï¼ŒæŠŠé‡è¦çš„ä¸¤ä¸ªæ£€æµ‹è¯†åˆ«æ¨¡å‹ç›´æ¥åŠ åˆ°äº†ä¸»åˆ†æ”¯ä¸­</p><p><a href="https://github.com/xinhaojin/PaddleOCR2Pytorch">xinhaojin&#x2F;PaddleOCR2Pytorch: PaddleOCR inference in PyTorch. Converted from <a href="https://github.com/PaddlePaddle/PaddleOCR">PaddleOCR</a></a></p><p>å•æ£€æµ‹</p><pre><code>python tools/infer/predict_det.py --det_model_path weights/ch_ptocr_v3_det_infer.pth --image_dir doc/imgs/example.jpg</code></pre><p>å•è¯†åˆ«</p><pre><code>python tools/infer/predict_rec.py --rec_model_path weights/ch_ptocr_v3_rec_infer.pth --rec_image_shape 3,48,320 --rec_yaml_path configs/rec/PP-OCRv3/multi_language/chinese_cht_PP-OCRv3_rec.yml --rec_char_dict_path pytorchocr/utils/ppocr_keys_v1.txt  --image_dir doc/imgs_words/ch/word_4.jpg</code></pre><p>æ£€æµ‹å¹¶è¯†åˆ«</p><pre><code>python tools/infer/predict_system.py --image_dir doc/imgs/example.jpg --det_model_path weights/ch_ptocr_v3_det_infer.pth --rec_image_shape 3,48,320 --rec_model_path weights/ch_ptocr_v3_rec_infer.pth</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/08/image-1.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/08/example2-1024x724.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨yoloxé¢„æµ‹ç»“æœè‡ªåŠ¨ç”Ÿæˆvocæ•°æ®é›†æ ‡ç­¾æ–‡ä»¶</title>
    <link href="/2022/07/12/%E7%94%A8yolox%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%9C%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90voc%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%87%E7%AD%BE%E6%96%87%E4%BB%B6/"/>
    <url>/2022/07/12/%E7%94%A8yolox%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%9C%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90voc%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%87%E7%AD%BE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å·²æœ‰å°‘é‡ï¼ˆ100å¼ ï¼‰æ•°æ®é›†ç”±æ‰‹å·¥æ ‡æ³¨ï¼Œè®­ç»ƒç»“æœä¹Ÿä¸ç®—å·®ï¼Œä½†å¸Œæœ›èƒ½å¤Ÿè¿›ä¸€æ­¥æé«˜å‡†ç¡®ç‡ï¼Œéœ€è¦æ‰©å……æ•°æ®é›†æ ·æœ¬ï¼Œæ‰‹å·¥æ ‡æ³¨å¤ªç´¯ï¼Œå› æ­¤åˆ©ç”¨å·²æœ‰è®­ç»ƒæƒé‡è¿›è¡Œé¢„æµ‹ï¼Œç”¨é¢„æµ‹ç»“æœè‡ªåŠ¨ç”Ÿæˆxmlæ ¼å¼çš„æ ‡æ³¨æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿä¼šå­˜åœ¨é¢„æµ‹é”™è¯¯çš„æƒ…å†µï¼Œè‡ªå®šä¹‰æ¡ä»¶ç­›é€‰æ­£ç¡®ï¼Œå…¶ä½™æ‰‹å·¥æ ‡æ³¨å³å¯ã€‚</p><h2 id="vocæ•°æ®é›†çš„xmlæ–‡ä»¶æ ¼å¼"><a href="#vocæ•°æ®é›†çš„xmlæ–‡ä»¶æ ¼å¼" class="headerlink" title="vocæ•°æ®é›†çš„xmlæ–‡ä»¶æ ¼å¼"></a>vocæ•°æ®é›†çš„xmlæ–‡ä»¶æ ¼å¼</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">annotation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">folder</span>&gt;</span>jiyan[_new<span class="tag">&lt;/<span class="name">folder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filename</span>&gt;</span>00002.png<span class="tag">&lt;/<span class="name">filename</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">path</span>&gt;</span>E:[[Y1[[éªŒè¯ç [[æ•°æ®é›†[[jiyan[_new[[00002.png<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">database</span>&gt;</span>Unknown<span class="tag">&lt;/<span class="name">database</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">size</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">width</span>&gt;</span>300<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">height</span>&gt;</span>200<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">depth</span>&gt;</span>3<span class="tag">&lt;/<span class="name">depth</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">segmented</span>&gt;</span>0<span class="tag">&lt;/<span class="name">segmented</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>word<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pose</span>&gt;</span>Unspecified<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">truncated</span>&gt;</span>0<span class="tag">&lt;/<span class="name">truncated</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">difficult</span>&gt;</span>0<span class="tag">&lt;/<span class="name">difficult</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmin</span>&gt;</span>123<span class="tag">&lt;/<span class="name">xmin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymin</span>&gt;</span>52<span class="tag">&lt;/<span class="name">ymin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmax</span>&gt;</span>177<span class="tag">&lt;/<span class="name">xmax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymax</span>&gt;</span>106<span class="tag">&lt;/<span class="name">ymax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>word<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pose</span>&gt;</span>Unspecified<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">truncated</span>&gt;</span>0<span class="tag">&lt;/<span class="name">truncated</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">difficult</span>&gt;</span>0<span class="tag">&lt;/<span class="name">difficult</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmin</span>&gt;</span>206<span class="tag">&lt;/<span class="name">xmin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymin</span>&gt;</span>16<span class="tag">&lt;/<span class="name">ymin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmax</span>&gt;</span>260<span class="tag">&lt;/<span class="name">xmax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymax</span>&gt;</span>70<span class="tag">&lt;/<span class="name">ymax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>word<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pose</span>&gt;</span>Unspecified<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">truncated</span>&gt;</span>0<span class="tag">&lt;/<span class="name">truncated</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">difficult</span>&gt;</span>0<span class="tag">&lt;/<span class="name">difficult</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmin</span>&gt;</span>194<span class="tag">&lt;/<span class="name">xmin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymin</span>&gt;</span>90<span class="tag">&lt;/<span class="name">ymin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xmax</span>&gt;</span>247<span class="tag">&lt;/<span class="name">xmax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ymax</span>&gt;</span>142<span class="tag">&lt;/<span class="name">ymax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bndbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">object</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">annotation</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é¢„æµ‹ä»£ç "><a href="#ä¿®æ”¹é¢„æµ‹ä»£ç " class="headerlink" title="ä¿®æ”¹é¢„æµ‹ä»£ç "></a>ä¿®æ”¹é¢„æµ‹ä»£ç </h2><p>ä½¿å¾—é’ˆå¯¹æ¯åœºå›¾ç‰‡ï¼Œè¾“å‡ºé¢„æµ‹çŸ©å½¢æ¡†åŠå¯¹åº”çš„ç±»åˆ«</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/07/image.png"></p><h2 id="ç”Ÿæˆxmlæ–‡ä»¶"><a href="#ç”Ÿæˆxmlæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆxmlæ–‡ä»¶"></a>ç”Ÿæˆxmlæ–‡ä»¶</h2><p>æ‹¿åˆ°çŸ©å½¢æ¡†å’Œç±»åˆ«åï¼Œå°±å¯ä»¥å†™xmlæ–‡ä»¶äº†ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ ¼å¼å†™å°±è¡Œï¼Œæœ‰äº›æ ‡ç­¾æ˜¯æ¬¡è¦çš„ï¼Œå¹¶ä¸ä¼šç”¨åˆ°ï¼Œå¯ä»¥çœç•¥ã€‚</p><p>è¿™ä¸ªå‡½æ•°æ˜¯copilotæ’ä»¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘åªå†™äº†ä¸ªå‡½æ•°åï¼Œè¿å‚æ•°éƒ½æ²¡å†™ï¼Œå°±ç»™æˆ‘è‡ªåŠ¨è¡¥å…¨äº†ï¼Œä½ æ•¢ä¿¡ï¼Ÿå±å®ç‰›é€¼ï¼</p><p>æˆ‘åªæ”¹åŠ¨äº†ä¸¤ä¸‰è¡Œï¼Œå†åŠ ä¸ªimportï¼Œå°±èƒ½ç”¨äº†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> et</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box2xml</span>(<span class="params">bboxes, <span class="keyword">class</span>[_names, save[_path</span>):</span><br><span class="line">    root = et.Element(<span class="string">&#x27;annotation&#x27;</span>)</span><br><span class="line">    et.SubElement(root, <span class="string">&#x27;folder&#x27;</span>).text = <span class="string">&#x27;VOC2007&#x27;</span></span><br><span class="line">    <span class="comment">#et.SubElement(root, &#x27;filename&#x27;).text = os.path.basename(save[_path)</span></span><br><span class="line">    et.SubElement(root, <span class="string">&#x27;source&#x27;</span>).text = <span class="string">&#x27; &#x27;</span>.join([[<span class="string">&#x27;VOC2007&#x27;</span>, <span class="string">&#x27;createed by YOLOX&#x27;</span>[])</span><br><span class="line">    <span class="comment">#et.SubElement(root, &#x27;segmented&#x27;).text = &#x27;0&#x27;</span></span><br><span class="line">    size = et.SubElement(root, <span class="string">&#x27;size&#x27;</span>)</span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;width&#x27;</span>).text = <span class="string">&#x27;300&#x27;</span></span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;height&#x27;</span>).text = <span class="string">&#x27;200&#x27;</span></span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;depth&#x27;</span>).text = <span class="string">&#x27;3&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(bboxes.shape[[<span class="number">0</span>[]):</span><br><span class="line">        obj = et.SubElement(root, <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;name&#x27;</span>).text = <span class="keyword">class</span>[_names[[i[]</span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;pose&#x27;</span>).text = <span class="string">&#x27;Unspecified&#x27;</span></span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;truncated&#x27;</span>).text = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;difficult&#x27;</span>).text = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        bbox = et.SubElement(obj, <span class="string">&#x27;bndbox&#x27;</span>)</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;xmin&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">0</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;ymin&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">1</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;xmax&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">2</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;ymax&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">3</span>[])</span><br><span class="line">    tree = et.ElementTree(root)</span><br><span class="line">    tree.write(save[_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;save xml file to &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(save[_path))</span><br></pre></td></tr></table></figure><h2 id="æ€ä¹ˆç¡®å®šæ ‡æ³¨çš„æ­£ç¡®æ€§ï¼Ÿ"><a href="#æ€ä¹ˆç¡®å®šæ ‡æ³¨çš„æ­£ç¡®æ€§ï¼Ÿ" class="headerlink" title="æ€ä¹ˆç¡®å®šæ ‡æ³¨çš„æ­£ç¡®æ€§ï¼Ÿ"></a>æ€ä¹ˆç¡®å®šæ ‡æ³¨çš„æ­£ç¡®æ€§ï¼Ÿ</h2><p>å…·ä½“é—®é¢˜å…·ä½“åˆ†æ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/07/00001.jpg"></p><p>é’ˆå¯¹æˆ‘çš„åœºæ™¯ï¼Œæ­£ç¡®æ ‡æ³¨åº”è¯¥æ˜¯3ä¸ªæ¡†ï¼Œå·²æœ‰æƒé‡æœ‰æ—¶ä¼šåªæ£€æµ‹å‡ºä¸¤ä¸ªæ¡†ï¼Œå› æ­¤æˆ‘çš„ç­›é€‰æ¡ä»¶å°±æ˜¯ï¼Œé¢„æµ‹æ¡†ä¸ªæ•°&lt;3çš„ï¼ŒæŠŠæ–‡ä»¶åæ±‡æ€»èµ·æ¥æœ€åè¾“å‡ºï¼Œæˆ‘è‡ªå·±å†ä¿®æ”¹å³å¯ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/07/image-1-1024x108.png"></p><p>è¿™æ ·å·¥ä½œé‡å°±ä»æ ‡æ³¨500å¤šå¼ å›¾ç‰‡é”å‡åˆ°30å¤šå¼ ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ç”±tools&#x2F;demo.pyä¿®æ”¹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -[*- coding:utf-8 -[*-</span></span><br><span class="line"><span class="comment"># Copyright (c) Megvii, Inc. and its affiliates.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> loguru <span class="keyword">import</span> logger</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> yolox.data.data[_augment <span class="keyword">import</span> ValTransform</span><br><span class="line"><span class="keyword">from</span> yolox.data.datasets <span class="keyword">import</span> COCO[_CLASSES</span><br><span class="line"><span class="keyword">from</span> yolox.exp <span class="keyword">import</span> get[_exp</span><br><span class="line"><span class="keyword">from</span> yolox.utils <span class="keyword">import</span> fuse[_model, get[_model[_info, postprocess, vis</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> et</span><br><span class="line"></span><br><span class="line">IMAGE[_EXT = [[<span class="string">&quot;.jpg&quot;</span>, <span class="string">&quot;.jpeg&quot;</span>, <span class="string">&quot;.webp&quot;</span>, <span class="string">&quot;.bmp&quot;</span>, <span class="string">&quot;.png&quot;</span>[]</span><br><span class="line"><span class="comment">#python tools/predict2xml.py image -n yolox-s -c weights/90jiyan.pth --path /home/jxh/work/YOLOX/datasets/VOCdevkit/VOC2007/JPEGImages --conf 0.6 --nms 0.6 --save[_result --device [[cpu/gpu[]</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make</span>[_parser():</span><br><span class="line">    parser = argparse.ArgumentParser(<span class="string">&quot;YOLOX Demo!&quot;</span>)</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;demo&quot;</span>, default=<span class="string">&quot;image&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;demo type, eg. image, video and webcam&quot;</span></span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;-expn&quot;</span>, <span class="string">&quot;--experiment-name&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;-n&quot;</span>, <span class="string">&quot;--name&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="string">&#x27;yolox-s&#x27;</span>, <span class="built_in">help</span>=<span class="string">&quot;model name&quot;</span>)</span><br><span class="line"></span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--path&quot;</span>, default=<span class="string">&quot;./assets/test&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;path to images or video&quot;</span></span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;--camid&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">0</span>, <span class="built_in">help</span>=<span class="string">&quot;webcam demo camera id&quot;</span>)</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--save[_result&quot;</span>,</span><br><span class="line">        action=<span class="string">&quot;store[_true&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;whether to save the inference result of image/video&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># exp file</span></span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;-f&quot;</span>,</span><br><span class="line">        <span class="string">&quot;--exp[_file&quot;</span>,</span><br><span class="line">        default=<span class="string">&#x27;exps/example/yolox[_voc/yolox[_voc[_s.py&#x27;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;pls input your experiment description file&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;-c&quot;</span>, <span class="string">&quot;--ckpt&quot;</span>, default=<span class="string">&#x27;YOLOX[_outputs/yolox[_voc[_s/90jiyan[_new.pth&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&quot;ckpt for eval&quot;</span>)</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--device&quot;</span>,</span><br><span class="line">        default=<span class="string">&quot;cpu&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;device to run our model, can either be cpu or gpu&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;--conf&quot;</span>, default=<span class="number">0.5</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">&quot;test conf&quot;</span>)</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;--nms&quot;</span>, default=<span class="number">0.5</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, <span class="built_in">help</span>=<span class="string">&quot;test nms threshold&quot;</span>)</span><br><span class="line">    parser.add[_argument(<span class="string">&quot;--tsize&quot;</span>, default=<span class="literal">None</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&quot;test img size&quot;</span>)</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--fp16&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;fp16&quot;</span>,</span><br><span class="line">        default=<span class="literal">False</span>,</span><br><span class="line">        action=<span class="string">&quot;store[_true&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Adopting mix precision evaluating.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--legacy&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;legacy&quot;</span>,</span><br><span class="line">        default=<span class="literal">False</span>,</span><br><span class="line">        action=<span class="string">&quot;store[_true&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;To be compatible with older versions&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--fuse&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;fuse&quot;</span>,</span><br><span class="line">        default=<span class="literal">False</span>,</span><br><span class="line">        action=<span class="string">&quot;store[_true&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Fuse conv and bn for testing.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parser.add[_argument(</span><br><span class="line">        <span class="string">&quot;--trt&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;trt&quot;</span>,</span><br><span class="line">        default=<span class="literal">False</span>,</span><br><span class="line">        action=<span class="string">&quot;store[_true&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Using TensorRT model for testing.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> parser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get</span>[_image[_<span class="built_in">list</span>(path):</span><br><span class="line">    image[_names = [[[]</span><br><span class="line">    <span class="keyword">for</span> maindir, subdir, file[_name[_<span class="built_in">list</span> <span class="keyword">in</span> os.walk(path):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> file[_name[_<span class="built_in">list</span>:</span><br><span class="line">            apath = os.path.join(maindir, filename)</span><br><span class="line">            ext = os.path.splitext(apath)[[<span class="number">1</span>[]</span><br><span class="line">            <span class="keyword">if</span> ext <span class="keyword">in</span> IMAGE[_EXT:</span><br><span class="line">                image[_names.append(apath)</span><br><span class="line">    <span class="keyword">return</span> image[_names</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">box2xml</span>(<span class="params">bboxes, <span class="keyword">class</span>[_names, save[_path</span>):</span><br><span class="line">    root = et.Element(<span class="string">&#x27;annotation&#x27;</span>)</span><br><span class="line">    et.SubElement(root, <span class="string">&#x27;folder&#x27;</span>).text = <span class="string">&#x27;VOC2007&#x27;</span></span><br><span class="line">    <span class="comment">#et.SubElement(root, &#x27;filename&#x27;).text = os.path.basename(save[_path)</span></span><br><span class="line">    et.SubElement(root, <span class="string">&#x27;source&#x27;</span>).text = <span class="string">&#x27; &#x27;</span>.join([[<span class="string">&#x27;VOC2007&#x27;</span>, <span class="string">&#x27;createed by YOLOX&#x27;</span>[])</span><br><span class="line">    <span class="comment">#et.SubElement(root, &#x27;segmented&#x27;).text = &#x27;0&#x27;</span></span><br><span class="line">    size = et.SubElement(root, <span class="string">&#x27;size&#x27;</span>)</span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;width&#x27;</span>).text = <span class="string">&#x27;300&#x27;</span></span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;height&#x27;</span>).text = <span class="string">&#x27;200&#x27;</span></span><br><span class="line">    et.SubElement(size, <span class="string">&#x27;depth&#x27;</span>).text = <span class="string">&#x27;3&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(bboxes.shape[[<span class="number">0</span>[]):</span><br><span class="line">        obj = et.SubElement(root, <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;name&#x27;</span>).text = <span class="keyword">class</span>[_names[[i[]</span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;pose&#x27;</span>).text = <span class="string">&#x27;Unspecified&#x27;</span></span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;truncated&#x27;</span>).text = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        et.SubElement(obj, <span class="string">&#x27;difficult&#x27;</span>).text = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        bbox = et.SubElement(obj, <span class="string">&#x27;bndbox&#x27;</span>)</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;xmin&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">0</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;ymin&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">1</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;xmax&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">2</span>[])</span><br><span class="line">        et.SubElement(bbox, <span class="string">&#x27;ymax&#x27;</span>).text = <span class="built_in">str</span>(bboxes[[i, <span class="number">3</span>[])</span><br><span class="line">    tree = et.ElementTree(root)</span><br><span class="line">    tree.write(save[_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;save xml file to &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(save[_path))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Predictor</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> [_[_init[_[_(</span><br><span class="line">        <span class="variable language_">self</span>,</span><br><span class="line">        model,</span><br><span class="line">        exp,</span><br><span class="line">        cls[_names=COCO[_CLASSES,</span><br><span class="line">        trt[_file=<span class="literal">None</span>,</span><br><span class="line">        decoder=<span class="literal">None</span>,</span><br><span class="line">        device=<span class="string">&quot;cpu&quot;</span>,</span><br><span class="line">        fp16=<span class="literal">False</span>,</span><br><span class="line">        legacy=<span class="literal">False</span>,</span><br><span class="line">    ):</span><br><span class="line">        <span class="variable language_">self</span>.model = model</span><br><span class="line">        <span class="variable language_">self</span>.cls[_names = cls[_names</span><br><span class="line">        <span class="variable language_">self</span>.decoder = decoder</span><br><span class="line">        <span class="variable language_">self</span>.num[_classes = exp.num[_classes</span><br><span class="line">        <span class="variable language_">self</span>.confthre = exp.test[_conf</span><br><span class="line">        <span class="variable language_">self</span>.nmsthre = exp.nmsthre</span><br><span class="line">        <span class="variable language_">self</span>.test[_size = exp.test[_size</span><br><span class="line">        <span class="variable language_">self</span>.device = device</span><br><span class="line">        <span class="variable language_">self</span>.fp16 = fp16</span><br><span class="line">        <span class="variable language_">self</span>.preproc = ValTransform(legacy=legacy)</span><br><span class="line">        <span class="keyword">if</span> trt[_file <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">from</span> torch2trt <span class="keyword">import</span> TRTModule</span><br><span class="line"></span><br><span class="line">            model[_trt = TRTModule()</span><br><span class="line">            model[_trt.load[_state[_<span class="built_in">dict</span>(torch.load(trt[_file))</span><br><span class="line"></span><br><span class="line">            x = torch.ones(<span class="number">1</span>, <span class="number">3</span>, exp.test[_size[[<span class="number">0</span>[], exp.test[_size[[<span class="number">1</span>[]).cuda()</span><br><span class="line">            <span class="variable language_">self</span>.model(x)</span><br><span class="line">            <span class="variable language_">self</span>.model = model[_trt</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inference</span>(<span class="params">self, img</span>):</span><br><span class="line">        img[_info = &#123;<span class="string">&quot;id&quot;</span>: <span class="number">0</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(img, <span class="built_in">str</span>):</span><br><span class="line">            img[_info[[<span class="string">&quot;file[_name&quot;</span>[] = os.path.basename(img)</span><br><span class="line">            img = cv2.imread(img)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            img[_info[[<span class="string">&quot;file[_name&quot;</span>[] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        height, width = img.shape[[:<span class="number">2</span>[]</span><br><span class="line">        img[_info[[<span class="string">&quot;height&quot;</span>[] = height</span><br><span class="line">        img[_info[[<span class="string">&quot;width&quot;</span>[] = width</span><br><span class="line">        img[_info[[<span class="string">&quot;raw[_img&quot;</span>[] = img</span><br><span class="line"></span><br><span class="line">        ratio = <span class="built_in">min</span>(<span class="variable language_">self</span>.test[_size[[<span class="number">0</span>[] / img.shape[[<span class="number">0</span>[], <span class="variable language_">self</span>.test[_size[[<span class="number">1</span>[] / img.shape[[<span class="number">1</span>[])</span><br><span class="line">        img[_info[[<span class="string">&quot;ratio&quot;</span>[] = ratio</span><br><span class="line"></span><br><span class="line">        img, [_ = <span class="variable language_">self</span>.preproc(img, <span class="literal">None</span>, <span class="variable language_">self</span>.test[_size)</span><br><span class="line">        img = torch.<span class="keyword">from</span>[_numpy(img).unsqueeze(<span class="number">0</span>)</span><br><span class="line">        img = img.<span class="built_in">float</span>()</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.device == <span class="string">&quot;gpu&quot;</span>:</span><br><span class="line">            img = img.cuda()</span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.fp16:</span><br><span class="line">                img = img.half()  <span class="comment"># to FP16</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> torch.no[_grad():</span><br><span class="line">            t0 = time.time()</span><br><span class="line">            outputs = <span class="variable language_">self</span>.model(img)</span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.decoder <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                outputs = <span class="variable language_">self</span>.decoder(outputs, dtype=outputs.<span class="built_in">type</span>())</span><br><span class="line">            outputs = postprocess(</span><br><span class="line">                outputs, <span class="variable language_">self</span>.num[_classes, <span class="variable language_">self</span>.confthre,</span><br><span class="line">                <span class="variable language_">self</span>.nmsthre, <span class="keyword">class</span>[_agnostic=<span class="literal">True</span></span><br><span class="line">            )</span><br><span class="line">            logger.info(<span class="string">&quot;Infer time: &#123;:.4f&#125;s&quot;</span>.<span class="built_in">format</span>(time.time() - t0))</span><br><span class="line">        <span class="keyword">return</span> outputs, img[_info</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">visual</span>(<span class="params">self, output, img[_info, cls[_conf=<span class="number">0.5</span></span>):</span><br><span class="line">        <span class="comment">#print(img[_info)</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &#123;&#x27;id&#x27;: 0, &#x27;file[_name&#x27;: &#x27;00032å›¢åœ†æ±¤.png&#x27;, &#x27;height&#x27;: 200, &#x27;width&#x27;: 300,&#x27;&#x27;&#x27;</span></span><br><span class="line">        ratio = img[_info[[<span class="string">&quot;ratio&quot;</span>[]</span><br><span class="line">        img = img[_info[[<span class="string">&quot;raw[_img&quot;</span>[]</span><br><span class="line">        <span class="keyword">if</span> output <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> img</span><br><span class="line">        output = output.cpu()</span><br><span class="line"></span><br><span class="line">        bboxes = output[[:, <span class="number">0</span>:<span class="number">4</span>[]</span><br><span class="line">        <span class="comment"># preprocessing: resize</span></span><br><span class="line">        bboxes /= ratio</span><br><span class="line">        boxes=bboxes.numpy()</span><br><span class="line">        boxes = boxes.astype(<span class="built_in">int</span>)</span><br><span class="line">        <span class="built_in">print</span>(boxes)</span><br><span class="line">        cls = output[[:, <span class="number">6</span>[]</span><br><span class="line">        clses= cls.numpy()</span><br><span class="line">        <span class="comment">#è½¬ä¸ºlist</span></span><br><span class="line">        clses = clses.tolist()</span><br><span class="line">        classnames = [[<span class="variable language_">self</span>.cls[_names[[<span class="built_in">int</span>(i)[] <span class="keyword">for</span> i <span class="keyword">in</span> clses[]</span><br><span class="line">        <span class="built_in">print</span>(classnames)</span><br><span class="line">        box2xml(boxes, classnames, <span class="string">&#x27;xml[_output/&#x27;</span>+img[_info[[<span class="string">&#x27;file[_name&#x27;</span>[].split(<span class="string">&#x27;.&#x27;</span>)[[<span class="number">0</span>[]+<span class="string">&#x27;.xml&#x27;</span>)</span><br><span class="line">        scores = output[[:, <span class="number">4</span>[] [* output[[:, <span class="number">5</span>[]</span><br><span class="line"></span><br><span class="line">        vis[_res = vis(img, bboxes, scores, cls, cls[_conf, <span class="variable language_">self</span>.cls[_names)</span><br><span class="line">        <span class="keyword">return</span> vis[_res,bboxes</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">image</span>[_demo(predictor, vis[_folder, path, current[_time, save[_result):</span><br><span class="line">    <span class="keyword">if</span> os.path.isdir(path):</span><br><span class="line">        files = get[_image[_<span class="built_in">list</span>(path)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        files = [[path[]</span><br><span class="line">    files.sort()</span><br><span class="line">    error=[[[]</span><br><span class="line">    <span class="keyword">for</span> image[_name <span class="keyword">in</span> files:</span><br><span class="line">        outputs, img[_info = predictor.inference(image[_name)</span><br><span class="line">        result[_image,bboxes = predictor.visual(outputs[[<span class="number">0</span>[], img[_info, predictor.confthre)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(bboxes)&lt;<span class="number">3</span>:</span><br><span class="line">            error.append(image[_name)</span><br><span class="line">        <span class="keyword">if</span> save[_result:</span><br><span class="line">            save[_folder = os.path.join(</span><br><span class="line">                vis[_folder, time.strftime(<span class="string">&quot;%Y[_%m[_%d[_%H[_%M[_%S&quot;</span>, current[_time)</span><br><span class="line">            )</span><br><span class="line">            os.makedirs(save[_folder, exist[_ok=<span class="literal">True</span>)</span><br><span class="line">            save[_file[_name = os.path.join(save[_folder, os.path.basename(image[_name))</span><br><span class="line">            logger.info(<span class="string">&quot;Saving detection result in &#123;&#125;&quot;</span>.<span class="built_in">format</span>(save[_file[_name))</span><br><span class="line">            <span class="comment">####################################</span></span><br><span class="line">            bboxes=bboxes.numpy()</span><br><span class="line">            bboxes = bboxes.astype(<span class="built_in">int</span>)</span><br><span class="line">            log[_file = <span class="built_in">open</span>(<span class="string">&#x27;log.txt&#x27;</span>,<span class="string">&#x27;a+&#x27;</span>)</span><br><span class="line">            log[_file.write(save[_file[_name+<span class="string">&quot;[[n&quot;</span>)</span><br><span class="line">            log[_file.write(<span class="built_in">str</span>(bboxes)+<span class="string">&quot;[[n&quot;</span>)</span><br><span class="line">            log[_file.close()</span><br><span class="line">            <span class="comment">###################################</span></span><br><span class="line">            <span class="comment"># result[_image=koutu(result[_image,bboxes)</span></span><br><span class="line">            cv2.imwrite(save[_file[_name, result[_image)</span><br><span class="line">        ch = cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> ch == <span class="number">27</span> <span class="keyword">or</span> ch == <span class="built_in">ord</span>(<span class="string">&quot;q&quot;</span>) <span class="keyword">or</span> ch == <span class="built_in">ord</span>(<span class="string">&quot;Q&quot;</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;é”™è¯¯æ ‡æ³¨æ–‡ä»¶:&#x27;</span>,error)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">imageflow</span>[_demo(predictor, vis[_folder, current[_time, args):</span><br><span class="line">    cap = cv2.VideoCapture(args.path <span class="keyword">if</span> args.demo == <span class="string">&quot;video&quot;</span> <span class="keyword">else</span> args.camid)</span><br><span class="line">    width = cap.get(cv2.CAP[_PROP[_FRAME[_WIDTH)  <span class="comment"># float</span></span><br><span class="line">    height = cap.get(cv2.CAP[_PROP[_FRAME[_HEIGHT)  <span class="comment"># float</span></span><br><span class="line">    fps = cap.get(cv2.CAP[_PROP[_FPS)</span><br><span class="line">    <span class="keyword">if</span> args.save[_result:</span><br><span class="line">        save[_folder = os.path.join(</span><br><span class="line">            vis[_folder, time.strftime(<span class="string">&quot;%Y[_%m[_%d[_%H[_%M[_%S&quot;</span>, current[_time)</span><br><span class="line">        )</span><br><span class="line">        os.makedirs(save[_folder, exist[_ok=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">if</span> args.demo == <span class="string">&quot;video&quot;</span>:</span><br><span class="line">            save[_path = os.path.join(save[_folder, os.path.basename(args.path))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            save[_path = os.path.join(save[_folder, <span class="string">&quot;camera.mp4&quot;</span>)</span><br><span class="line">        logger.info(<span class="string">f&quot;video save[_path is <span class="subst">&#123;save[_path&#125;</span>&quot;</span>)</span><br><span class="line">        vid[_writer = cv2.VideoWriter(</span><br><span class="line">            save[_path, cv2.VideoWriter[_fourcc([*<span class="string">&quot;mp4v&quot;</span>), fps, (<span class="built_in">int</span>(width), <span class="built_in">int</span>(height))</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        ret[_val, frame = cap.read()</span><br><span class="line">        <span class="keyword">if</span> ret[_val:</span><br><span class="line">            outputs, img[_info = predictor.inference(frame)</span><br><span class="line">            result[_frame = predictor.visual(outputs[[<span class="number">0</span>[], img[_info, predictor.confthre)</span><br><span class="line">            <span class="keyword">if</span> args.save[_result:</span><br><span class="line">                vid[_writer.write(result[_frame)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cv2.namedWindow(<span class="string">&quot;yolox&quot;</span>, cv2.WINDOW[_NORMAL)</span><br><span class="line">                cv2.imshow(<span class="string">&quot;yolox&quot;</span>, result[_frame)</span><br><span class="line">            ch = cv2.waitKey(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> ch == <span class="number">27</span> <span class="keyword">or</span> ch == <span class="built_in">ord</span>(<span class="string">&quot;q&quot;</span>) <span class="keyword">or</span> ch == <span class="built_in">ord</span>(<span class="string">&quot;Q&quot;</span>):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">exp, args</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> args.experiment[_name:</span><br><span class="line">        args.experiment[_name = exp.exp[_name</span><br><span class="line"></span><br><span class="line">    file[_name = os.path.join(exp.output[_<span class="built_in">dir</span>, args.experiment[_name)</span><br><span class="line">    os.makedirs(file[_name, exist[_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    vis[_folder = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> args.save[_result:</span><br><span class="line">        vis[_folder = os.path.join(file[_name, <span class="string">&quot;vis[_res&quot;</span>)</span><br><span class="line">        os.makedirs(vis[_folder, exist[_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.trt:</span><br><span class="line">        args.device = <span class="string">&quot;gpu&quot;</span></span><br><span class="line"></span><br><span class="line">    logger.info(<span class="string">&quot;Args: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(args))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.conf <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        exp.test[_conf = args.conf</span><br><span class="line">    <span class="keyword">if</span> args.nms <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        exp.nmsthre = args.nms</span><br><span class="line">    <span class="keyword">if</span> args.tsize <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        exp.test[_size = (args.tsize, args.tsize)</span><br><span class="line"></span><br><span class="line">    model = exp.get[_model()</span><br><span class="line">    logger.info(<span class="string">&quot;Model Summary: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(get[_model[_info(model, exp.test[_size)))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.device == <span class="string">&quot;gpu&quot;</span>:</span><br><span class="line">        model.cuda()</span><br><span class="line">        <span class="keyword">if</span> args.fp16:</span><br><span class="line">            model.half()  <span class="comment"># to FP16</span></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> args.trt:</span><br><span class="line">        <span class="keyword">if</span> args.ckpt <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            ckpt[_file = os.path.join(file[_name, <span class="string">&quot;best[_ckpt.pth&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ckpt[_file = args.ckpt</span><br><span class="line">        logger.info(<span class="string">&quot;loading checkpoint&quot;</span>)</span><br><span class="line">        ckpt = torch.load(ckpt[_file, <span class="built_in">map</span>[_location=<span class="string">&quot;cpu&quot;</span>)</span><br><span class="line">        <span class="comment"># load the model state dict</span></span><br><span class="line">        model.load[_state[_<span class="built_in">dict</span>(ckpt[[<span class="string">&quot;model&quot;</span>[])</span><br><span class="line">        logger.info(<span class="string">&quot;loaded checkpoint done.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.fuse:</span><br><span class="line">        logger.info(<span class="string">&quot;[[tFusing model...&quot;</span>)</span><br><span class="line">        model = fuse[_model(model)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.trt:</span><br><span class="line">        <span class="keyword">assert</span> <span class="keyword">not</span> args.fuse, <span class="string">&quot;TensorRT model is not support model fusing!&quot;</span></span><br><span class="line">        trt[_file = os.path.join(file[_name, <span class="string">&quot;model[_trt.pth&quot;</span>)</span><br><span class="line">        <span class="keyword">assert</span> os.path.exists(</span><br><span class="line">            trt[_file</span><br><span class="line">        ), <span class="string">&quot;TensorRT model is not found![[n Run python3 tools/trt.py first!&quot;</span></span><br><span class="line">        model.head.decode[_<span class="keyword">in</span>[_inference = <span class="literal">False</span></span><br><span class="line">        decoder = model.head.decode[_outputs</span><br><span class="line">        logger.info(<span class="string">&quot;Using TensorRT to inference&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        trt[_file = <span class="literal">None</span></span><br><span class="line">        decoder = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    predictor = Predictor(</span><br><span class="line">        model, exp, COCO[_CLASSES, trt[_file, decoder,</span><br><span class="line">        args.device, args.fp16, args.legacy,</span><br><span class="line">    )</span><br><span class="line">    current[_time = time.localtime()</span><br><span class="line">    <span class="keyword">if</span> args.demo == <span class="string">&quot;image&quot;</span>:</span><br><span class="line">        image[_demo(predictor, vis[_folder, args.path, current[_time, args.save[_result)</span><br><span class="line">    <span class="keyword">elif</span> args.demo == <span class="string">&quot;video&quot;</span> <span class="keyword">or</span> args.demo == <span class="string">&quot;webcam&quot;</span>:</span><br><span class="line">        imageflow[_demo(predictor, vis[_folder, current[_time, args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [_[_name[_[_ == <span class="string">&quot;[_[_main[_[_&quot;</span>:</span><br><span class="line">    args = make[_parser().parse[_args()</span><br><span class="line">    exp = get[_exp(args.exp[_file, args.name)</span><br><span class="line"></span><br><span class="line">    main(exp, args)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºç›´æ–¹å›¾åˆ†æçš„è‡ªé€‚åº”é˜ˆå€¼åˆ†å‰²</title>
    <link href="/2022/06/10/%E5%9F%BA%E4%BA%8E%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%88%86%E6%9E%90%E7%9A%84%E8%87%AA%E9%80%82%E5%BA%94%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/"/>
    <url>/2022/06/10/%E5%9F%BA%E4%BA%8E%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%88%86%E6%9E%90%E7%9A%84%E8%87%AA%E9%80%82%E5%BA%94%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åˆ†å‰²å‡ºæ–‡å­—ï¼Œå»æ‰èƒŒæ™¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-11.png"></p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>ç”»å‡ºç›´æ–¹å›¾ï¼Œç”¨å¤šé¡¹å¼æ›²çº¿æ‹Ÿåˆã€‚åœ¨æ–œç‡ç»å¯¹å€¼æœ€å¤§å¤„å·¦å³ä¸¤ä¾§æ‰¾æå°å€¼ï¼Œå¯¹åº”æ¨ªåæ ‡ä½œä¸ºåˆ†å‰²çš„å·¦å³é˜ˆå€¼ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-10-1024x534.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-12-1024x538.png"></p><p>å¯¹äºèƒŒæ™¯å¤æ‚ï¼Œå‰æ™¯é¢œè‰²å•ä¸€çš„å›¾ç‰‡ï¼Œåˆ†å‰²æ•ˆæœä½³ï¼Œå…¶ä½™æƒ…å†µå¯èƒ½ä¸é€‚åˆã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-13.png"></p><p>ç»†èŠ‚ç•¥</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºå·²çŸ¥èƒŒæ™¯çš„éªŒè¯ç æ–‡å­—å€¾æ–œçŸ«æ­£åŠè¯†åˆ«</title>
    <link href="/2022/06/10/%E5%9F%BA%E4%BA%8E%E5%B7%B2%E7%9F%A5%E8%83%8C%E6%99%AF%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E6%96%87%E5%AD%97%E5%80%BE%E6%96%9C%E7%9F%AB%E6%AD%A3%E5%8F%8A%E8%AF%86%E5%88%AB/"/>
    <url>/2022/06/10/%E5%9F%BA%E4%BA%8E%E5%B7%B2%E7%9F%A5%E8%83%8C%E6%99%AF%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E6%96%87%E5%AD%97%E5%80%BE%E6%96%9C%E7%9F%AB%E6%AD%A3%E5%8F%8A%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>è¯·ç‚¹å‡»â€œè”æèŒ¶â€ã€‚å³åˆ¤æ–­æ–‡å­—ä½ç½®åŠé¡ºåºã€‚</p><p>å·²çŸ¥æ¡ä»¶ï¼šyoloxèƒ½å¤Ÿé¢„æµ‹æ±‰å­—ä½ç½®ï¼ŒpaddleOCRå¯ä»¥ç›´æ¥è¯†åˆ«æ–‡å­—ï¼Œä½†æœ‰æ—¶å‡ºé”™ã€‚</p><p>ç°åœ¨è¦åšçš„æ˜¯çŸ«æ­£éªŒè¯ç å›¾ç‰‡ä¸­çš„æ–‡å­—å€¾æ–œï¼Œä»¥æé«˜æ–‡å­—è¯†åˆ«å‡†ç¡®ç‡ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-6.png"></p><h2 id="èƒŒæ™¯åŒ¹é…"><a href="#èƒŒæ™¯åŒ¹é…" class="headerlink" title="èƒŒæ™¯åŒ¹é…"></a>èƒŒæ™¯åŒ¹é…</h2><p>æ‰€æœ‰å¯èƒ½çš„èƒŒæ™¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-5.png"></p><p>ç”¨ç›´æ–¹å›¾æ ‡å‡†å·®çš„æ–¹æ³•æ¥åšèƒŒæ™¯åŒ¹é…</p><p><a href="https://xinhaojin.github.io/2022/06/10/%E5%9B%BE%E5%83%8F%E7%9B%B8%E4%BC%BC%E5%BA%A6-%E7%9B%B4%E6%96%B9%E5%9B%BE%E6%A0%87%E5%87%86%E5%B7%AE/">å›¾åƒç›¸ä¼¼åº¦-ç›´æ–¹å›¾æ ‡å‡†å·®</a></p><h2 id="æ±‰å­—åˆ†å‰²"><a href="#æ±‰å­—åˆ†å‰²" class="headerlink" title="æ±‰å­—åˆ†å‰²"></a>æ±‰å­—åˆ†å‰²</h2><p>ä¸ºä»€ä¹ˆè¦åˆ†å‰²ï¼Ÿåˆ†å‰²åå¯ä»¥æ ¹æ®äºŒå€¼å›¾æ¥ç”»å‡ºæœ€å°å¤–æ¥çŸ©å½¢ï¼Œè®¡ç®—å€¾æ–œè§’åº¦ï¼Œç»™åŸå›¾æ±‰å­—çŸ«æ­£ã€‚</p><p>æ€ä¹ˆåˆ†å‰²ï¼Ÿéå†åƒç´ ï¼Œå¦‚æœä¸å¯¹åº”èƒŒæ™¯åƒç´ ç›¸å·®è¾ƒå¤§ï¼Œè®¤ä¸ºæ˜¯æ±‰å­—ã€‚</p><p>æ€ä¹ˆå®šä¹‰â€œç›¸å·®è¾ƒå¤§å¤§â€ï¼Ÿå¯ä»¥è®¡ç®—åƒç´ é—´çš„è·ç¦»ï¼ˆé¢œè‰²è·ç¦»&#x2F;å·®å¼‚ï¼‰ã€‚ä¸€ç§æ¯”è¾ƒæ¥è¿‘äººçœ¼è§‚å¯Ÿçš„é¢œè‰²å·®å¼‚çš„è®¡ç®—æ–¹æ³•æ˜¯LABè‰²å½©ç©ºé—´çš„deltaEï¼Œï¼ˆè²Œä¼¼è®¡ç®—é€Ÿåº¦è¾ƒæ…¢ï¼‰ï¼Œä½†å¾ˆå‡†ç¡®ï¼Œç›¸æ¯”è¾ƒrgbå€¼æ–¹å·®ä¹‹ç±»çš„æ–¹æ³•ã€‚</p><p>è®¡ç®—æ–¹æ³•<a href="https://python-colormath.readthedocs.io/en/latest/delta_e.html">Delta E Equations â€” python-colormath 3.0.0 documentation</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> colormath.color_objects <span class="keyword">import</span> LabColor</span><br><span class="line"><span class="keyword">from</span> colormath.color_diff <span class="keyword">import</span> delta_e_cmc</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img_lab=cv2.cvtColor(img,cv2.COLOR_BGR2LAB)</span><br><span class="line">background_lab=cv2.cvtColor(background,cv2.COLOR_BGR2LAB)</span><br><span class="line">......</span><br><span class="line">a=img_lab[j,k]</span><br><span class="line">b=background_lab[j,k]</span><br><span class="line">color1 = LabColor(lab_l=a[<span class="number">0</span>], lab_a=a[<span class="number">1</span>], lab_b=a[<span class="number">2</span>])</span><br><span class="line">color2 = LabColor(lab_l=b[<span class="number">0</span>], lab_a=b[<span class="number">1</span>], lab_b=b[<span class="number">2</span>])</span><br><span class="line">delta_e = delta_e_cmc(color1, color2)</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-7.png"></p><h2 id="å€¾æ–œçŸ«æ­£"><a href="#å€¾æ–œçŸ«æ­£" class="headerlink" title="å€¾æ–œçŸ«æ­£"></a>å€¾æ–œçŸ«æ­£</h2><p>å€¾æ–œçŸ«æ­£çš„åŸºç¡€æ˜¯ä¸Šä¸€æ­¥çš„åˆ†å‰²ï¼Œå¾—åˆ°äºŒå€¼å›¾åƒä¹‹åï¼Œ</p><p>å…ˆç”¨contours, hierarchy &#x3D; cv2.findContours(img, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)ç”»å‡ºè½®å»“</p><p>ç„¶åæœ€å…³é”®çš„ä¸€æ­¥ï¼Œè¦æŠŠè½®å»“ç‚¹æ±‡æ€»ï¼ŒæŠŠè½®å»“æ”¹æˆrect &#x3D; cv2.minAreaRect(contours)æ¥æ”¶çš„è¾“å…¥æ ¼å¼ï¼Œç”»å‡ºæœ€å°å¤–æ¥çŸ©å½¢</p><p>ç„¶åè®¡ç®—å€¾æ–œè§’åº¦ï¼Œå› ä¸ºè¿™é‡ŒåŸºæœ¬ä¸Šæ˜¯+-45åº¦å°è§’åº¦åè½¬ï¼Œæ‰€ä»¥åªè¦è®¡ç®—å¤–æ¥çŸ©å½¢çš„ä»»æ„ä¸¤ä¸ªç›¸é‚»é¡¶ç‚¹çš„ç›´çº¿æ–œç‡å³å¯ï¼Œè‹¥è§’åº¦è¿‡å¤§ï¼Œ+-90åº¦ä½¿è§’åº¦æ¢å¤åˆ°+-45åº¦èŒƒå›´å†…å³å¯ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">img, angle</span>):</span><br><span class="line">    rows, cols = img.shape[:<span class="number">2</span>]</span><br><span class="line">    rotate = cv2.getRotationMatrix2D((rows*<span class="number">0.5</span>, cols*<span class="number">0.5</span>), angle, <span class="number">1</span>)</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ—‹è½¬ä¸­å¿ƒç‚¹</span></span><br><span class="line"><span class="string">    ç¬¬äºŒä¸ªå‚æ•°ï¼šæ—‹è½¬è§’åº¦</span></span><br><span class="line"><span class="string">    ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šç¼©æ”¾æ¯”ä¾‹</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    res = cv2.warpAffine(img, rotate, (cols, rows))</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getAngle</span>(<span class="params">box</span>):</span><br><span class="line">    x1, y1 = <span class="built_in">list</span>(box[<span class="number">0</span>])</span><br><span class="line">    x2, y2 = <span class="built_in">list</span>(box[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">abs</span>(x1-x2)&lt;=<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    k = (y1-y2)/(x1-x2)  <span class="comment"># è®¡ç®—æ–œç‡çš„ç›¸åæ•°ï¼Œå› ä¸ºå›¾åƒå·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œä¸åŒäºæ™®é€šç›´è§’åæ ‡ç³»</span></span><br><span class="line">    angle = np.arctan(-k)*<span class="number">180</span>/math.pi</span><br><span class="line">    <span class="keyword">if</span> angle &gt; <span class="number">45</span>:</span><br><span class="line">        angle -= <span class="number">90</span></span><br><span class="line">    <span class="keyword">elif</span> angle&lt;-<span class="number">45</span>:</span><br><span class="line">        angle += <span class="number">90</span></span><br><span class="line">    <span class="keyword">return</span> angle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mergeContours</span>(<span class="params">contours</span>):  <span class="comment"># è½®å»“ç‚¹æ±‡æ€»</span></span><br><span class="line">    nb = []</span><br><span class="line">    <span class="keyword">for</span> contour <span class="keyword">in</span> contours:</span><br><span class="line">        rect = cv2.minAreaRect(contour)  <span class="comment"># æœ€å°å¤–æ¥çŸ©å½¢</span></span><br><span class="line">        box = cv2.boxPoints(rect)</span><br><span class="line">        box = np.int0(box)  <span class="comment"># np.ndarray</span></span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> box:</span><br><span class="line">            temp = []</span><br><span class="line">            temp.append(b.tolist())</span><br><span class="line">            nb.append(temp)</span><br><span class="line">    nb = np.array(nb)</span><br><span class="line">    <span class="keyword">return</span> nb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawBox</span>(<span class="params">img, contours</span>):  <span class="comment"># å›¾,è½®å»“ç‚¹,è¿”å›åŒ…å«æ‰€æœ‰è½®å»“ç‚¹çš„æœ€å°å¤–æ¥çŸ©å½¢çš„å›¾,çŸ©å½¢å››è§’</span></span><br><span class="line">    rect = cv2.minAreaRect(contours)  <span class="comment"># æœ€å°å¤–æ¥çŸ©å½¢</span></span><br><span class="line">    box = cv2.boxPoints(rect)</span><br><span class="line">    box = np.int0(box)</span><br><span class="line">    img = cv2.drawContours(img, [box], <span class="number">0</span>, (<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> img, box</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">correct</span>(<span class="params">img</span>):  <span class="comment"># ä¼ å…¥å•é€šé“ç°åº¦å›¾</span></span><br><span class="line">    ret, img = cv2.threshold(img, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line">    <span class="comment">#img = cv2.resize(img, (64, 64))</span></span><br><span class="line">    contours, hierarchy = cv2.findContours(</span><br><span class="line">        img, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line">    img = cv2.cvtColor(img, cv2.COLOR_GRAY2BGR)</span><br><span class="line"></span><br><span class="line">    contours = mergeContours(contours)  <span class="comment"># åˆå¹¶è½®å»“ç‚¹</span></span><br><span class="line">    img, box = drawBox(img, contours)  <span class="comment"># ç”»æœ€å°å¤–æ¥çŸ©å½¢</span></span><br><span class="line">    angle = getAngle(box)</span><br><span class="line">    <span class="built_in">print</span>(angle)</span><br><span class="line">    img = rotate(img, <span class="built_in">int</span>(-angle))</span><br><span class="line">    <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure><p>æœ€åçŸ«æ­£çš„æ•ˆæœå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒäºŒå€¼å›¾ä¸­çš„æ–‡å­—å…¶å®å·²ç»çŸ«æ­£äº†ã€‚</p><h2 id="æ–‡å­—è¯†åˆ«"><a href="#æ–‡å­—è¯†åˆ«" class="headerlink" title="æ–‡å­—è¯†åˆ«"></a>æ–‡å­—è¯†åˆ«</h2><p>1.ç›´æ¥è¯†åˆ«æ–‡å­—æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæ–‡å­—å›¾ç‰‡å¹¶ä¸ç®—æ¸…æ¥šï¼Œåæœ‰å…«ä¹è¦è¯†åˆ«é”™è¯¯ã€‚</p><p>2.ä½†æ˜¯ï¼Œæ–‡å­—è¯†åˆ«æ¨¡å‹çš„è¾“å‡ºç»“æœå…¶å®æ˜¯å¯¹åº”å­—å…¸é‡Œæ¯ä¸ªå­—çš„æ¦‚ç‡ï¼Œæˆ‘åªè¦å»æ‰¾æ ‡é¢˜ä¸­ä¸‰ä¸ªå­—çš„æ¦‚ç‡å“ªä¸ªæœ€å¤§å°±è¡Œäº†ã€‚</p><p>3.å¯èƒ½æœ‰ä¸¤ä¸ªæ¡†ï¼Œå¯¹äºæ¦‚ç‡æœ€å¤§çš„æ˜¯åŒä¸€ä¸ªå­—ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ</p><p>4.æ¯ä¸€ä¸ªçŸ©å½¢æ¡†ï¼ˆä¸€å¼ å°å›¾ï¼‰ï¼Œå¯ä»¥å¾—åˆ°æ ‡é¢˜ä¸­ä¸‰ä¸ªå­—çš„æ¦‚ç‡ï¼Œä¸‰ä¸ªçŸ©å½¢æ¡†ä¸­çš„æ–‡å­—è¯†åˆ«ç»“æŸåï¼Œå¾—åˆ°ä¸€ä¸ª3*3çš„æ¦‚ç‡çŸ©é˜µ</p><p>å…ˆæ‰¾åˆ°9ä¸ªä¸­æœ€å¤§çš„ï¼Œè®°å½•å®ƒçš„è¡Œåˆ—å·ï¼Œæ¶ˆå»æ‰€åœ¨è¡Œæ‰€åœ¨åˆ—ï¼Œå‰©ä½™4ä¸ª</p><p>æ‰¾åˆ°4ä¸ªä¸­æœ€å¤§çš„ï¼Œè®°å½•å®ƒåŸå…ˆçš„è¡Œåˆ—å·ï¼Œæ¶ˆå»æ‰€åœ¨è¡Œæ‰€åœ¨åˆ—ï¼Œå‰©ä½™1ä¸ª</p><p>ä¸‰ä¸ªæ¡†ï¼Œä¸‰ä¸ªå­—ï¼Œä¸€ä¸€å¯¹åº”ï¼Œèƒ½å……åˆ†åˆ©ç”¨æ’é™¤æ³•å’Œé¢˜ç›®å·²çŸ¥æ¡ä»¶</p><table><thead><tr><th>å­—1</th><th>å­—2</th><th>å­—3</th></tr></thead><tbody><tr><td>çŸ©å½¢æ¡†1</td><td>0.xxx</td><td>0.xxx</td></tr><tr><td>çŸ©å½¢æ¡†2</td><td>0.xxx(9ä¸ªä¸­æœ€å¤§)</td><td>0.xxx</td></tr><tr><td>çŸ©å½¢æ¡†3</td><td>0.xxx</td><td>0.xxx(4ä¸ªä¸­æœ€å¤§)</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p>æŠŠçŸ«æ­£åçš„æ–‡å­—å°å›¾æ”¾è¿›æ–‡å­—è¯†åˆ«æ¨¡å‹ä¸­è¯†åˆ«ï¼Œå¦‚ä¸‹ä¸¤å›¾ï¼Œå…¶ä¸­â€œç³–â€çŸ«æ­£æˆäº†åè½¬90åº¦çš„æ ·å­ï¼Œä½†ç»“æœå´æ˜¯æ­£ç¡®çš„ï¼Œå¾—ç›Šäºä¸Šè¿°æ’é™¤æ³•ã€‚100å¼ æµ‹è¯•å›¾ç‰‡è¯†åˆ«å‡†ç¡®ç‡ä»84%æé«˜åˆ°99%ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-8.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-9.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>éªŒè¯ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾åƒç›¸ä¼¼åº¦-ç›´æ–¹å›¾æ ‡å‡†å·®</title>
    <link href="/2022/06/10/%E5%9B%BE%E5%83%8F%E7%9B%B8%E4%BC%BC%E5%BA%A6-%E7%9B%B4%E6%96%B9%E5%9B%BE%E6%A0%87%E5%87%86%E5%B7%AE/"/>
    <url>/2022/06/10/%E5%9B%BE%E5%83%8F%E7%9B%B8%E4%BC%BC%E5%BA%A6-%E7%9B%B4%E6%96%B9%E5%9B%BE%E6%A0%87%E5%87%86%E5%B7%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>ç°æœ‰ä¸€å¼ éªŒè¯ç å›¾ç‰‡ï¼Œå¯èƒ½çš„èƒŒæ™¯æœ‰6ç§ï¼Œæ€ä¹ˆåˆ¤æ–­ä»–çš„èƒŒæ™¯æ˜¯å“ªä¸€ç§ï¼Ÿ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-2.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-4.png"></p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>å¯¹äºè¿™ç§å¤§é¢ç§¯ç›¸åŒçš„å›¾ç‰‡ï¼Œä¸€ç§å¾ˆå¿«é€Ÿçš„æ–¹æ³•æ˜¯è®¡ç®—ä¸¤å¼ å›¾ç›´æ–¹å›¾çš„æ ‡å‡†å·®ã€‚</p><p>è®¡ç®—å’Œæ¯ä¸€å¼ èƒŒæ™¯å›¾çš„æ ‡å‡†å·®ï¼Œå–æœ€å°çš„å°±è¡Œ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¡ç®—ç›´æ–¹å›¾çš„æ ‡å‡†å·®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">image_contrast_std</span>(<span class="params">img1, img2</span>):</span><br><span class="line">    image1 = Image.<span class="built_in">open</span>(img1)</span><br><span class="line">    image2 = Image.<span class="built_in">open</span>(img2)</span><br><span class="line"></span><br><span class="line">    h1 = image1.histogram()</span><br><span class="line">    h2 = image2.histogram()</span><br><span class="line">    h1 = np.array(h1)</span><br><span class="line">    h2 = np.array(h2)</span><br><span class="line">    result = np.std(h1-h2)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éªŒè¯ç èƒŒæ™¯åˆæˆï¼ˆå¤šå¼ æ®‹ç¼ºå›¾åˆæˆä¸€å¼ å®Œæ•´å›¾ï¼‰</title>
    <link href="/2022/06/10/%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%8C%E6%99%AF%E5%90%88%E6%88%90%EF%BC%88%E5%A4%9A%E5%BC%A0%E6%AE%8B%E7%BC%BA%E5%9B%BE%E5%90%88%E6%88%90%E4%B8%80%E5%BC%A0%E5%AE%8C%E6%95%B4%E5%9B%BE%EF%BC%89/"/>
    <url>/2022/06/10/%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%8C%E6%99%AF%E5%90%88%E6%88%90%EF%BC%88%E5%A4%9A%E5%BC%A0%E6%AE%8B%E7%BC%BA%E5%9B%BE%E5%90%88%E6%88%90%E4%B8%80%E5%BC%A0%E5%AE%8C%E6%95%B4%E5%9B%BE%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>æœ‰å¤šå¼ éªŒè¯ç å›¾ç‰‡ï¼ŒèƒŒæ™¯ç›¸åŒï¼Œå¦‚ä½•è·å–å®Œæ•´çš„èƒŒæ™¯å›¾ï¼Ÿ</p><p>å·²æœ‰æ¡ä»¶ï¼šå¯ä»¥ä½¿ç”¨yoloxæ£€æµ‹å‡ºæ±‰å­—çš„ä½ç½®çŸ©å½¢æ¡†ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image.png"></p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>è¾“å…¥ï¼šä¸€ä¸ªéªŒè¯ç å›¾ç‰‡æ–‡ä»¶å¤¹</p><p>è¾“å‡ºï¼šåŒ…å«æ‰€æœ‰çš„èƒŒæ™¯å›¾ç‰‡çš„æ–‡ä»¶å¤¹</p><ol><li>èƒŒæ™¯åŒºåˆ†ï¼šå‡è®¾ç›¸åŒçš„èƒŒæ™¯çš„éªŒè¯ç å›¾ç‰‡çš„èƒŒæ™¯éƒ¨åˆ†æ˜¯å®Œå…¨ä¸€è‡´çš„çš„ï¼Œé‚£ä¹ˆå¯ä»¥æ¯”è¾ƒè¾¹æ¡†çš„åƒç´ ç‚¹æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªèƒŒæ™¯ï¼ŒæŠŠæ‰€æœ‰å›¾ç‰‡æŒ‰ç…§èƒŒæ™¯åˆ†ç±»ã€‚</li><li>é’ˆå¯¹æ¯ä¸€ä¸ªåˆ†ç±»ï¼Œç”¨yoloxé¢„æµ‹å‡ºæ±‰å­—æ¡†ï¼ŒæŠŠæ±‰å­—æ¡†éƒ¨åˆ†åƒç´ ç‚¹è®¾ç½®ä¸ºé»‘è‰²ï¼Œä»¥å…¶ä¸­ä¸€å¼ ä¸ºåŸºç¡€ï¼Œéå†å®ƒçš„é»‘è‰²åƒç´ ä½ç½®ï¼Œåœ¨å…¶ä»–å‡ å¼ éªŒè¯ç å›¾ç‰‡ä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰ä¸æ˜¯é»‘è‰²çš„åƒç´ ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ›¿æ¢åŸºç¡€å›¾ç‰‡çš„å¯¹åº”åƒç´ ç‚¹ã€‚</li><li>ä¿å­˜åˆæˆçš„èƒŒæ™¯å›¾ç‰‡ã€‚</li></ol><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/06/image-1.png"></p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>è¿™é‡Œçš„yolox_predict.imagedemo()ç”¨äºå¾—åˆ°æ‰€æœ‰æ–‡å­—çŸ©å½¢æ¡†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="comment">#ç”¨äºåˆ†æåˆæˆæ‰€æœ‰èƒŒæ™¯å›¾</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> yolox_predict</span><br><span class="line"></span><br><span class="line"><span class="comment">#å›¾ç‰‡èƒŒæ™¯åˆ†ç±»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params"><span class="built_in">dir</span></span>):</span><br><span class="line">    <span class="built_in">dict</span>=&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> os.listdir(<span class="built_in">dir</span>):</span><br><span class="line">        filePath=os.path.join(<span class="built_in">dir</span>,fileName)</span><br><span class="line">        img=cv2.imdecode(np.fromfile(filePath,dtype=np.uint8),-<span class="number">1</span>)</span><br><span class="line">        x,y=img.shape[:<span class="number">2</span>]</span><br><span class="line">        <span class="comment">#æå–å››ä¸ªè§’çš„åƒç´ å€¼ä½œä¸ºç‰¹å¾ç‚¹ï¼Œåˆ†ç±»ä¾æ®</span></span><br><span class="line">        feature = <span class="string">&#x27;&#x27;</span>.join(<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> img[<span class="number">0</span>,<span class="number">0</span>])+<span class="string">&#x27;&#x27;</span>.join(<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> img[<span class="number">0</span>,y-<span class="number">1</span>])+<span class="string">&#x27;&#x27;</span>.join(<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> img[x-<span class="number">1</span>,<span class="number">0</span>])+<span class="string">&#x27;&#x27;</span>.join(<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> img[x-<span class="number">1</span>,y-<span class="number">1</span>])</span><br><span class="line">        <span class="built_in">print</span>(feature)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">dict</span>.__contains__(<span class="built_in">str</span>(feature)):</span><br><span class="line">            <span class="built_in">dict</span>[<span class="built_in">str</span>(feature)].append(fileName)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">dict</span>[<span class="built_in">str</span>(feature)]=[fileName]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># inputDir=&quot;E:/Y1/éªŒè¯ç /æ•°æ®é›†/VOC2007-ç½‘æ˜“/JPEGImages&quot;</span></span><br><span class="line">inputDir=<span class="string">&quot;C:/Users/Administrator/Desktop/test&quot;</span></span><br><span class="line">outputDir=<span class="string">&quot;C:/Users/Administrator/Desktop/result&quot;</span></span><br><span class="line">DICT=classify(inputDir)<span class="comment">#å›¾ç‰‡èƒŒæ™¯åˆ†ç±»</span></span><br><span class="line"><span class="built_in">print</span>(DICT)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;åˆ†ç±»å®Œæˆ...&#x27;</span>)</span><br><span class="line">predictor,current_time= yolox_predict.init()<span class="comment">#åŠ è½½æ¨¡å‹</span></span><br><span class="line">index=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> DICT.items():</span><br><span class="line">    imgs=[]<span class="comment">#è¯¥åˆ†ç±»ä¸‹æ‰€æœ‰æŒ–æ‰æ±‰å­—åçš„èƒŒæ™¯å›¾</span></span><br><span class="line">    rects=[]<span class="comment">#æœ€åä¸€å¼ å›¾çš„ä¸‰ä¸ªçŸ©å½¢æ¡†</span></span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> value:<span class="comment">#åŒä¸€èƒŒæ™¯çš„éªŒè¯ç å›¾ç‰‡</span></span><br><span class="line">        filePath=os.path.join(inputDir,fileName)</span><br><span class="line">        rects=yolox_predict.image_demo(predictor, vis_folder=outputDir, path=filePath, current_time=current_time)</span><br><span class="line">        <span class="built_in">print</span>(filePath+<span class="string">&#x27;é¢„æµ‹å®Œæˆ...&#x27;</span>)</span><br><span class="line">        img=cv2.imdecode(np.fromfile(filePath,dtype=np.uint8),-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> rect <span class="keyword">in</span> rects:</span><br><span class="line">            x1,y1,x2,y2=rect</span><br><span class="line">            img[y1:y2,x1:x2]=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">        imgs.append(img)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(imgs)&lt;<span class="number">5</span>:<span class="comment">#5å¼ ç›¸åŒèƒŒæ™¯çš„éªŒè¯ç å›¾ç‰‡ï¼Œè¢«è®¤ä¸ºå¯ä»¥æ‹¼å‡‘å‡ºå®Œæ•´èƒŒæ™¯</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">for</span> rect <span class="keyword">in</span> rects:</span><br><span class="line">        x1,y1,x2,y2=rect</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(x1,x2):</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(y1,y2):<span class="comment">#ç©ºç¼ºçš„æ¯ä¸ªåƒç´ </span></span><br><span class="line">                <span class="keyword">for</span> img <span class="keyword">in</span> imgs[:-<span class="number">1</span>]:<span class="comment">#åœ¨å…¶ä½™å‡ å¼ å›¾ä¸­æ‰¾</span></span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">sum</span>(img[y,x])&gt;<span class="number">0</span>:<span class="comment">#ä¸æ˜¯é»‘çš„</span></span><br><span class="line">                            imgs[-<span class="number">1</span>][y,x]=img[y,x]<span class="comment">#æ‰¾åˆ°ï¼Œæ›¿æ¢</span></span><br><span class="line">    cv2.imwrite(os.path.join(outputDir,<span class="built_in">str</span>(index)+<span class="string">&#x27;.jpg&#x27;</span>) ,imgs[-<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åˆæˆèƒŒæ™¯å›¾&#x27;</span>+os.path.join(outputDir,<span class="built_in">str</span>(index)+<span class="string">&#x27;.jpg&#x27;</span>))</span><br><span class="line">    index+=<span class="number">1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
      <tag>éªŒè¯ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu20.04å®‰è£…é…ç½®vncserver</title>
    <link href="/2022/05/18/ubuntu20-04%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEvncserver/"/>
    <url>/2022/05/18/ubuntu20-04%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEvncserver/</url>
    
    <content type="html"><![CDATA[<h2 id="æ›´æ–°ç³»ç»Ÿ"><a href="#æ›´æ–°ç³»ç»Ÿ" class="headerlink" title="æ›´æ–°ç³»ç»Ÿ"></a>æ›´æ–°ç³»ç»Ÿ</h2><pre><code>sudo apt updatesudo apt upgrade</code></pre><h2 id="å®‰è£…è½¯ä»¶"><a href="#å®‰è£…è½¯ä»¶" class="headerlink" title="å®‰è£…è½¯ä»¶"></a>å®‰è£…è½¯ä»¶</h2><pre><code>sudo apt install tigervncserver</code></pre><p>æ‰“å¼€ç«¯å£</p><pre><code>sudo firewall-cmd --zone=public --add-port=5900/tcp --permanentsudo firewall-cmd --zone=public --add-port=5901/tcp --permanent</code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>è¿è¡Œ vncserver å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å°†åˆ›å»ºåˆå§‹é…ç½®å¹¶è®¾ç½®å¯†ç ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ—¶ä¸è¦ä½¿ç”¨ sudo</p><pre><code>vncserver</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image-3-1024x386.png"></p><p>ç³»ç»Ÿå°†æç¤ºæ‚¨è¾“å…¥å¹¶ç¡®è®¤å¯†ç ï¼Œä»¥åŠæ˜¯å¦å°†å…¶è®¾ç½®ä¸ºä»…æŸ¥çœ‹å¯†ç ã€‚å¦‚æœæ‚¨é€‰æ‹©è®¾ç½®ä»…æŸ¥çœ‹å¯†ç ï¼Œåˆ™ç”¨æˆ·å°†æ— æ³•ä½¿ç”¨é¼ æ ‡å’Œé”®ç›˜ä¸ VNC å®ä¾‹è¿›è¡Œäº¤äº’</p><p>ç¬¬ä¸€æ¬¡ vncserver è¿è¡Œå‘½ä»¤æ—¶ï¼Œå®ƒå°†åˆ›å»ºå¯†ç æ–‡ä»¶å¹¶å°†å…¶å­˜å‚¨åœ¨ ~&#x2F;.vnc ç›®å½•ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºè¯¥ç›®å½•ã€‚</p><p>æ³¨æ„ä¸Šé¢è¾“å‡ºä¸­ä¸»æœºåä¹‹åçš„ :1 ã€‚è¿™è¡¨ç¤ºè¿è¡Œ vnc æœåŠ¡å™¨çš„æ˜¾ç¤ºç«¯å£å·ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨åœ¨ TCP ç«¯å£ 5901 (5900 + 1)ä¸Šè¿è¡Œã€‚å¦‚æœæ‚¨åˆ›å»ºç¬¬äºŒä¸ªå®ä¾‹ï¼Œ vncserver å®ƒå°†åœ¨ä¸‹ä¸€ä¸ªç©ºé—²ç«¯å£ä¸Šè¿è¡Œï¼Œå³ :2 è¿™æ„å‘³ç€æœåŠ¡å™¨æ­£åœ¨ç«¯å£ 5902 (5900 + 2)ä¸Šè¿è¡Œã€‚</p><p>é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œå½“ä½¿ç”¨ VNC æœåŠ¡å™¨æ—¶ï¼Œ :X æ˜¯ä¸€ä¸ªå¼•ç”¨çš„æ˜¾ç¤ºç«¯å£ 5900+X ã€‚</p><p>æ³¨ï¼šå¦‚æœå¯åŠ¨æ—¶å‡ºç° vnc å¯åŠ¨å¼‚å¸¸ï¼š is taken because of &#x2F;tmp&#x2F;.X11-unix&#x2F;X1</p><p>æ­¤æ—¶åªéœ€è¦å°†æç¤ºçš„æ–‡ä»¶åˆ é™¤å³å¯ã€‚å†æ¬¡è¾“å…¥ vncserverã€‚</p><p>åœ¨ç»§ç»­ä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œé¦–å…ˆä½¿ç”¨å¸¦æœ‰ -kill é€‰é¡¹å’ŒæœåŠ¡å™¨ç¼–å·ä½œä¸ºå‚æ•°çš„ vncserver å‘½ä»¤åœæ­¢ VNC å®ä¾‹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨åœ¨ç«¯å£ 5901 (:1)ä¸­è¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœæ­¢å®ƒï¼š</p><pre><code>vncserver -kill :1</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image-4.png"></p><p>ç°åœ¨æˆ‘ä»¬å·²ç»åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº† Xfce å’Œ TigerVNC ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® TigerVNC æ¥ä½¿ç”¨ Xfce ã€‚ä¸ºæ­¤ï¼Œè¯·åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ ã€œ&#x2F;.vnc&#x2F;xstartupï¼š</p><pre><code>vi ~/.vnc/xstartup#!/bin/shunset SESSION_MANAGERunset DBUS_SESSION_BUS_ADDRESSexec startxfce4</code></pre><p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚æ— è®ºä½•æ—¶å¯åŠ¨æˆ–é‡å¯ TigerVNC æœåŠ¡å™¨ï¼Œéƒ½å°†è‡ªåŠ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚</p><p>~&#x2F;.vnc&#x2F;xstartup æ–‡ä»¶è¿˜éœ€è¦å…·æœ‰æ‰§è¡Œæƒé™ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ç¡®ä¿æƒé™æ­£ç¡®ï¼š</p><pre><code>chmod u+x ~/.vnc/xstartup</code></pre><p>å¦‚æœéœ€è¦å°†<a href="https://xie.infoq.cn/link?target=http://tigervnc.org/doc/vncserver.html">é™„åŠ é€‰é¡¹</a>ä¼ é€’ç»™ VNC æœåŠ¡å™¨ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º config çš„æ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ªé€‰é¡¹ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><p>æ–‡ä»¶ ~&#x2F;.vnc&#x2F;config</p><pre><code>geometry=1920x1084dpi=96</code></pre><h2 id="åˆ›å»º-Systemd-å•å…ƒæ–‡ä»¶"><a href="#åˆ›å»º-Systemd-å•å…ƒæ–‡ä»¶" class="headerlink" title="åˆ›å»º Systemd å•å…ƒæ–‡ä»¶"></a>åˆ›å»º Systemd å•å…ƒæ–‡ä»¶</h2><p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª systemd å•å…ƒæ–‡ä»¶ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®éœ€è¦è½»æ¾å¯åŠ¨ï¼Œåœæ­¢å’Œé‡æ–°å¯åŠ¨ VNC æœåŠ¡ï¼Œä¸ä»»ä½•å…¶ä»– systemd æœåŠ¡ç›¸åŒã€‚</p><p>æ‰“å¼€æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå°†ä»¥ä¸‹é…ç½®å¤åˆ¶å¹¶ç²˜è´´åˆ°å…¶ä¸­ã€‚</p><pre><code>sudo vi /etc/systemd/system/vncserver@.service</code></pre><p>è¯·åŠ¡å¿…æ›´æ”¹ç¬¬ 7 è¡Œä¸­çš„ç”¨æˆ·åä»¥åŒ¹é…æ‚¨çš„ç”¨æˆ·åã€‚</p><pre><code>[Unit]Description=Remote desktop service (VNC)After=syslog.target network.target[Service]Type=simpleUser=usernamePAMName=loginPIDFile=/home/%u/.vnc/%H%i.pidExecStartPre=/bin/sh -c &#39;/usr/bin/vncserver -kill :%i &gt; /dev/null 2&gt;&amp;1  :&#39;ExecStart=/usr/bin/vncserver :%i -geometry 1440x900 -alwaysshared -fgExecStop=/usr/bin/vncserver -kill :%i[Install]WantedBy=multi-user.target</code></pre><p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚</p><p>é€šçŸ¥ systemd æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å•å…ƒæ–‡ä»¶ï¼š</p><pre><code>sudo systemctl daemon-reload</code></pre><p>ä¸‹ä¸€æ­¥æ˜¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ç”¨å•å…ƒæ–‡ä»¶ï¼š</p><pre><code>sudo systemctl enable vncserver@1.service</code></pre><p>ç¬¦å· 1 åé¢çš„æ•°å­— @ å®šä¹‰äº†è¿è¡Œ VNC æœåŠ¡çš„æ˜¾ç¤ºç«¯å£ã€‚è¿™æ„å‘³ç€ VNC æœåŠ¡å™¨å°†ä¾¦å¬ç«¯å£ 5901 ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­è®¨è®ºçš„é‚£æ ·ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ VNC æœåŠ¡ï¼š</p><pre><code>sudo systemctl start vncserver@1.service</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image-5-1024x237.png"></p><pre><code>sudo systemctl start vncserver@1.service#å¯åŠ¨sudo systemctl enable vncserver@1.service#è‡ªå¯åŠ¨</code></pre>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>seleniumçˆ¬å–æéªŒéªŒè¯ç ï¼ŒPaddleOCRè¯†åˆ«æ–‡å­—ä½œä¸ºæ–‡ä»¶å</title>
    <link href="/2022/05/15/selenium%E7%88%AC%E5%8F%96%E6%9E%81%E9%AA%8C%E9%AA%8C%E8%AF%81%E7%A0%81%EF%BC%8Cpaddleocr%E8%AF%86%E5%88%AB%E6%96%87%E5%AD%97%E4%BD%9C%E4%B8%BA%E6%96%87%E4%BB%B6%E5%90%8D/"/>
    <url>/2022/05/15/selenium%E7%88%AC%E5%8F%96%E6%9E%81%E9%AA%8C%E9%AA%8C%E8%AF%81%E7%A0%81%EF%BC%8Cpaddleocr%E8%AF%86%E5%88%AB%E6%96%87%E5%AD%97%E4%BD%9C%E4%B8%BA%E6%96%87%E4%BB%B6%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>è‡ªåŠ¨çˆ¬å–éªŒè¯ç å›¾ç‰‡ï¼Œå›¾ç‰‡æ–‡ä»¶åéœ€è¦åŒ…å«å³ä¸Šè§’çš„æ ‡é¢˜æ–‡å­—ï¼ˆåœ¨ç½‘é¡µä¸Šæ˜¯å›¾ç‰‡ç±»å‹ï¼Œä¸æ˜¯æ–‡æœ¬ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image-2.png"></p><h2 id="Edge-driveråˆå§‹åŒ–"><a href="#Edge-driveråˆå§‹åŒ–" class="headerlink" title="Edge driveråˆå§‹åŒ–"></a>Edge driveråˆå§‹åŒ–</h2><p>ç¬¬ä¸€ç§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> msedge.selenium_tools <span class="keyword">import</span> Edge, EdgeOptions</span><br><span class="line">        edge_options = EdgeOptions()</span><br><span class="line">        edge_options.use_chromium = <span class="literal">True</span></span><br><span class="line">        edge_options.add_argument(<span class="string">&#x27;headless&#x27;</span>)<span class="comment">#åå°è¿è¡Œ</span></span><br><span class="line">        edge_options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;enable-automation&#x27;</span>,<span class="string">&#x27;enable-logging&#x27;</span>])</span><br><span class="line">        driver = Edge(options=edge_options)</span><br><span class="line">        <span class="keyword">return</span> driver</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">driver=webdriver.Edge(executable_path=<span class="string">&#x27;msedgedriver.exe&#x27;</span>)</span><br><span class="line"><span class="comment">#åœ¨https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/ä¸‹è½½å¯¹åº”é©±åŠ¨</span></span><br></pre></td></tr></table></figure><h2 id="PaddleOCRæ–‡å­—è¯†åˆ«"><a href="#PaddleOCRæ–‡å­—è¯†åˆ«" class="headerlink" title="PaddleOCRæ–‡å­—è¯†åˆ«"></a>PaddleOCRæ–‡å­—è¯†åˆ«</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> paddleocr <span class="keyword">import</span> PaddleOCR</span><br><span class="line">ocr = PaddleOCR(use_angle_cls=<span class="literal">True</span>, lang=<span class="string">&quot;ch&quot;</span>)<span class="comment">#å¯åŠ¨ocrå¼•æ“</span></span><br><span class="line">result = ocr.ocr(<span class="string">&#x27;temp.jpg&#x27;</span>)</span><br><span class="line">text=result[<span class="number">0</span>][<span class="number">1</span>][<span class="number">0</span>]<span class="comment">#åªæœ‰ä¸€ä¸ªå­—çš„æƒ…å†µ</span></span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡å¤„ç†"><a href="#å›¾ç‰‡å¤„ç†" class="headerlink" title="å›¾ç‰‡å¤„ç†"></a>å›¾ç‰‡å¤„ç†</h2><p>å›¾ç‰‡ä¸‹è½½ä¸‹æ¥åï¼Œç”¨paddleOCRè¯†åˆ«ï¼Œå‘ç°æ— ç»“æœï¼Œç”¨opencvè¯»å–ï¼Œå‘ç°æœ‰4é€šé“ï¼Œåº”è¯¥æ˜¯æœ‰ä¸€ä¸ªé€æ˜çš„é€šé“</p><p>æŠŠ4é€šé“åˆ†åˆ«æ˜¾ç¤ºå‡ºæ¥åå‘ç°æœ‰ä¿¡æ¯çš„æ˜¯ç¬¬4é€šé“ï¼Œæ‰€ä»¥éœ€è¦æŠŠä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡è¯»å–ç¬¬4é€šé“ä¿å­˜ä¸ºç°åº¦å›¾ï¼Œå†ç»™paddleOCRè¯†åˆ«å³å¯ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img=cv2.imdecode(np.fromfile(<span class="string">&#x27;temp.jpg&#x27;</span>,dtype=np.uint8),-<span class="number">1</span>)<span class="comment">#è¯»å–å›¾ç‰‡</span></span><br><span class="line">img=img[:,:,<span class="number">3</span>]<span class="comment">#å–ç¬¬å››ä¸ªé€šé“</span></span><br><span class="line">cv2.imwrite(<span class="string">&#x27;temp.jpg&#x27;</span>,img)<span class="comment">#ä¿å­˜åŒ…å«æ±‰å­—ä¿¡æ¯çš„ç°åº¦å›¾</span></span><br></pre></td></tr></table></figure><p><img src="https://static.geetest.com/nerualpic/original_word_pic/jiangchengzhengjunti/fd6a0e7d3606d6c328cd552c2bb52fa3.png"></p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> paddleocr <span class="keyword">import</span> PaddleOCR</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">downloadPic</span>(<span class="params">url, filename</span>):<span class="comment"># ä¸‹è½½å›¾ç‰‡</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line">        urllib.request.urlretrieve(url=url, filename=filename)</span><br><span class="line">    <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;IOError&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Exception&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">transfer</span>(<span class="params">num</span>):<span class="comment"># åºå·å‰åŠ 0</span></span><br><span class="line">    temp = num</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        temp = <span class="built_in">int</span>(temp/<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">if</span> temp &gt; <span class="number">0</span>:</span><br><span class="line">            count = count+<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;0&#x27;</span>*(<span class="number">4</span>-count)+<span class="built_in">str</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getTitleText</span>(<span class="params">titleImgs,ocr</span>):</span><br><span class="line">    title = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        downloadPic(titleImgs[i],<span class="string">&#x27;temp.jpg&#x27;</span>) <span class="comment"># ä¸‹è½½å›¾ç‰‡,ä¿å­˜åˆ°å½“å‰æ–‡ä»¶å¤¹</span></span><br><span class="line">        img=cv2.imdecode(np.fromfile(<span class="string">&#x27;temp.jpg&#x27;</span>,dtype=np.uint8),-<span class="number">1</span>)<span class="comment">#è¯»å–å›¾ç‰‡</span></span><br><span class="line">        img=img[:,:,<span class="number">3</span>]<span class="comment">#å–ç¬¬å››ä¸ªé€šé“</span></span><br><span class="line">        cv2.imwrite(<span class="string">&#x27;temp.jpg&#x27;</span>,img)<span class="comment">#ä¿å­˜åŒ…å«æ±‰å­—ä¿¡æ¯çš„ç°åº¦å›¾</span></span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line">        result = ocr.ocr(<span class="string">&#x27;temp.jpg&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(result)==<span class="number">0</span>:<span class="comment">#è¯†åˆ«å¤±è´¥ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œè·³è¿‡å³å¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            title+=result[<span class="number">0</span>][<span class="number">1</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> title</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>(<span class="params">mode</span>):<span class="comment">#åˆå§‹åŒ–driver</span></span><br><span class="line">    <span class="keyword">if</span> mode ==<span class="number">1</span>:<span class="comment">#ä¸ç”¨driver.exe</span></span><br><span class="line">        <span class="keyword">from</span> msedge.selenium_tools <span class="keyword">import</span> Edge, EdgeOptions</span><br><span class="line">        edge_options = EdgeOptions()</span><br><span class="line">        edge_options.use_chromium = <span class="literal">True</span></span><br><span class="line">        edge_options.add_argument(<span class="string">&#x27;headless&#x27;</span>)</span><br><span class="line">        edge_options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;enable-automation&#x27;</span>,<span class="string">&#x27;enable-logging&#x27;</span>])</span><br><span class="line">        driver = Edge(options=edge_options)</span><br><span class="line">        <span class="keyword">return</span> driver</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        driver=webdriver.Edge(executable_path=<span class="string">&#x27;msedgedriver.exe&#x27;</span>)</span><br><span class="line">        driver.maximize_window()</span><br><span class="line">        <span class="keyword">return</span> driver</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ocr = PaddleOCR(use_angle_cls=<span class="literal">True</span>, lang=<span class="string">&quot;ch&quot;</span>)<span class="comment">#å¯åŠ¨ocrå¼•æ“</span></span><br><span class="line">        <span class="built_in">dir</span>=<span class="string">&#x27;datasets/jiyan_new/&#x27;</span><span class="comment">#ä¿å­˜å›¾ç‰‡çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">        driver=init(<span class="number">0</span>)</span><br><span class="line">        driver.get(<span class="string">&#x27;https://www.geetest.com/adaptive-captcha-demo&#x27;</span>)</span><br><span class="line">        driver.implicitly_wait(<span class="number">10</span>)  <span class="comment"># æœ€å¤šç­‰å¾…æ—¶é—´</span></span><br><span class="line">        driver.find_element_by_css_selector(<span class="string">&#x27;.tab-item-2&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        driver.find_element_by_css_selector(<span class="string">&#x27;.geetest_btn_click&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="built_in">dir</span>):</span><br><span class="line">            os.mkdir(<span class="built_in">dir</span>)</span><br><span class="line">        files = os.listdir(<span class="built_in">dir</span>)  <span class="comment"># è·å–æ–‡ä»¶æ•°ç›®</span></span><br><span class="line">        num = <span class="built_in">len</span>(files)+<span class="number">1</span>  <span class="comment"># èµ·å§‹åºå·</span></span><br><span class="line"></span><br><span class="line">        index = <span class="number">0</span></span><br><span class="line">        last_img_src = <span class="string">&#x27;&#x27;</span></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> index &lt; <span class="number">500</span>:  <span class="comment"># éœ€è¦è·å–çš„éªŒè¯ç æ•°é‡</span></span><br><span class="line">            time.sleep(<span class="number">0.8</span>)</span><br><span class="line">            title_imgs=driver.find_element_by_css_selector(<span class="string">&#x27;.geetest_ques_tips&#x27;</span>)</span><br><span class="line">            <span class="comment">#è·å–å­å…ƒç´ </span></span><br><span class="line">            title_imgs=title_imgs.find_elements_by_tag_name(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">            <span class="comment">#è·å–å­å…ƒç´ çš„srcå±æ€§ æ ‡é¢˜ä¸‰ä¸ªå­—çš„å›¾ç‰‡url</span></span><br><span class="line">            title_imgs=[title_img.get_attribute(<span class="string">&#x27;src&#x27;</span>) <span class="keyword">for</span> title_img <span class="keyword">in</span> title_imgs]</span><br><span class="line">            title=getTitleText(title_imgs,ocr)</span><br><span class="line">            <span class="keyword">if</span> title==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                driver.find_element_by_css_selector(</span><br><span class="line">                <span class="string">&#x27;.geetest_refresh&#x27;</span>).click()  <span class="comment"># åˆ·æ–°æŒ‰é’®</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            img_src = driver.find_element_by_css_selector(<span class="string">&#x27;.geetest_bg&#x27;</span>).get_attribute(<span class="string">&#x27;style&#x27;</span>)  <span class="comment"># å›¾ç‰‡url</span></span><br><span class="line">            <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            background-image: </span></span><br><span class="line"><span class="string">            url(&quot;https://static.geetest.com/captcha_v4/policy/fdd2aaa4a429487381bd673b104f152d/word/14/2022-03-22T17/9cc1499b9d0646618f0b12863e6410ce.jpg&quot;);</span></span><br><span class="line"><span class="string">            &#x27;&#x27;&#x27;</span></span><br><span class="line">            img_src = img_src.split(<span class="string">&#x27;&quot;&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> img_src == last_img_src:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            last_img_src = img_src</span><br><span class="line">            filename = transfer(num+index)+title+<span class="string">&#x27;.png&#x27;</span></span><br><span class="line">            downloadPic(img_src, <span class="built_in">dir</span>+filename)</span><br><span class="line">            time.sleep(<span class="number">0.2</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;åºå·ï¼š&#x27;</span>+<span class="built_in">str</span>(index))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ–‡ä»¶åï¼š&#x27;</span>+filename)</span><br><span class="line">            index += <span class="number">1</span></span><br><span class="line">            driver.find_element_by_css_selector(</span><br><span class="line">                <span class="string">&#x27;.geetest_refresh&#x27;</span>).click()  <span class="comment"># åˆ·æ–°æŒ‰é’®</span></span><br><span class="line">        driver.quit()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        driver.quit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>selenium</tag>
      
      <tag>éªŒè¯ç </tag>
      
      <tag>ocr</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linuxå‘½ä»¤è¡Œä»£ç†å·¥å…·ï¼šproxychains</title>
    <link href="/2022/05/09/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%9Aproxychains/"/>
    <url>/2022/05/09/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%9Aproxychains/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre><code>sudo apt install proxychains4</code></pre><p>ç¼–è¾‘&#x2F;etc&#x2F;proxychains4.conf</p><p>åœ¨æœ«å°¾æ·»åŠ ä»£ç†æœåŠ¡å™¨è®¾ç½®</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image.png"></p><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><pre><code>curl www.httpbin.org/ip</code></pre><p>åœ¨å‘½ä»¤å‰æ·»åŠ proxychains4æ¥èµ°ä»£ç†</p><pre><code>proxychains4 curl www.httpbin.org/ip</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/05/image-1-1024x339.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>ä»£ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è·å–PDFä¸­çš„å¯å¤åˆ¶çš„æ–‡æœ¬ä¿¡æ¯</title>
    <link href="/2022/04/14/%E8%8E%B7%E5%8F%96pdf%E4%B8%AD%E7%9A%84%E5%8F%AF%E5%A4%8D%E5%88%B6%E7%9A%84%E6%96%87%E6%9C%AC%E4%BF%A1%E6%81%AF/"/>
    <url>/2022/04/14/%E8%8E%B7%E5%8F%96pdf%E4%B8%AD%E7%9A%84%E5%8F%AF%E5%A4%8D%E5%88%B6%E7%9A%84%E6%96%87%E6%9C%AC%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PyPDF2</span><br><span class="line">pdfFile = <span class="built_in">open</span>(filePath, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">pdfReader = PyPDF2.PdfFileReader(pdfFile)</span><br><span class="line">page0=pdfReader.getPage(<span class="number">0</span>)<span class="comment">#è·å–ç¬¬å‡ é¡µçš„å†…å®¹</span></span><br><span class="line">page1=pdfReader.getPage(<span class="number">1</span>)</span><br><span class="line"><span class="comment">###########</span></span><br><span class="line">text = page.extractText()  <span class="comment"># è·å¾—æ‰€æœ‰å¯å¤åˆ¶çš„æ–‡æœ¬</span></span><br><span class="line">text = re.sub(<span class="string">&quot;\\s&quot;</span>, <span class="string">&quot;&quot;</span>, text)  <span class="comment"># å»æ‰æ‰€æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="comment">###########</span></span><br></pre></td></tr></table></figure><h2 id="ä¾‹ï¼šPDFæå–è¡¨æ ¼ä¿å­˜åˆ°Excel"><a href="#ä¾‹ï¼šPDFæå–è¡¨æ ¼ä¿å­˜åˆ°Excel" class="headerlink" title="ä¾‹ï¼šPDFæå–è¡¨æ ¼ä¿å­˜åˆ°Excel"></a>ä¾‹ï¼šPDFæå–è¡¨æ ¼ä¿å­˜åˆ°Excel</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-25.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/2297a99239f8bdc75b1b263f6941e40.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>PDF</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>frpå†…ç½‘ç©¿é€</title>
    <link href="/2022/04/14/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    <url>/2022/04/14/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>åœ¨å…¬ç½‘è®¿é—®å®éªŒå®¤æœåŠ¡å™¨</p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æœåŠ¡ç«¯ï¼šè…¾è®¯äº‘æœåŠ¡å™¨ï¼ˆcentos7ï¼‰,æœ‰å…¬ç½‘IP</p><p>å®¢æˆ·ç«¯ï¼šå†…ç½‘æœåŠ¡å™¨ï¼ˆubuntu20.04ï¼‰</p><h2 id="ä¸‹è½½frp"><a href="#ä¸‹è½½frp" class="headerlink" title="ä¸‹è½½frp"></a>ä¸‹è½½frp</h2><p>ä¸¤å°æœºå™¨éƒ½ä¸‹è½½åŒä¸€ä¸ªä¸œè¥¿</p><p><a href="https://github.com/fatedier/frp/releases">Releases Â· fatedier&#x2F;frp (github.com)</a></p><pre><code>wget https://github.com/fatedier/frp/releases/download/v0.38.0/frp_0.38.0_linux_amd64.tar.gztar -zxvf frp_0.38.0_linux_amd64.tar.gzcd frp_0.38.0_linux_amd64</code></pre><h2 id="æœåŠ¡ç«¯é…ç½®"><a href="#æœåŠ¡ç«¯é…ç½®" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h2><h3 id="ä¿®æ”¹frps-ini"><a href="#ä¿®æ”¹frps-ini" class="headerlink" title="ä¿®æ”¹frps.ini"></a>ä¿®æ”¹frps.ini</h3><pre><code>[common]bind_port = 7000</code></pre><h3 id="æ”¾è¡Œç«¯å£"><a href="#æ”¾è¡Œç«¯å£" class="headerlink" title="æ”¾è¡Œç«¯å£"></a>æ”¾è¡Œç«¯å£</h3><pre><code>firewall-cmd --zone=public --add-port=7000/tcp --permanentfirewall-cmd --zone=public --add-port=6000/tcp --permanent</code></pre><p>äº‘æœåŠ¡å™¨è¿˜éœ€è¦åœ¨ç®¡ç†é¢æ¿å®‰å…¨ç­–ç•¥ä¸­å†æ¬¡æ”¾è¡Œ</p><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><p>.&#x2F;frps -c .&#x2F;frps.ini</p><h2 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h2><h3 id="ä¿®æ”¹frpc-ini"><a href="#ä¿®æ”¹frpc-ini" class="headerlink" title="ä¿®æ”¹frpc.ini"></a>ä¿®æ”¹frpc.ini</h3><pre><code>[common]    server_addr = xxx.xxx.xxx.xxx # frps æ‰€åœ¨æœåŠ¡å™¨çš„å…¬ç½‘ IP    server_port = 7000[ssh]type = tcplocal_ip = 127.0.0.1    # æœ¬åœ°éœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡åœ°å€local_port = 22         # æœ¬åœ°éœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡åœ°å€remote_port = 6000      # åœ¨ frp æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£ï¼Œè®¿é—®æ­¤ç«¯å£çš„æµé‡å°†ä¼šè¢«è½¬å‘åˆ°æœ¬åœ°æœåŠ¡å¯¹åº”çš„ç«¯å£</code></pre><h3 id="æ”¾è¡Œç«¯å£ï¼ˆè¿™é‡Œæ˜¯22ï¼Œå·²ç»é»˜è®¤æ”¾è¡Œï¼‰"><a href="#æ”¾è¡Œç«¯å£ï¼ˆè¿™é‡Œæ˜¯22ï¼Œå·²ç»é»˜è®¤æ”¾è¡Œï¼‰" class="headerlink" title="æ”¾è¡Œç«¯å£ï¼ˆè¿™é‡Œæ˜¯22ï¼Œå·²ç»é»˜è®¤æ”¾è¡Œï¼‰"></a>æ”¾è¡Œç«¯å£ï¼ˆè¿™é‡Œæ˜¯22ï¼Œå·²ç»é»˜è®¤æ”¾è¡Œï¼‰</h3><pre><code>firewall-cmd --zone=public --add-port=22/tcp --permanent</code></pre><h3 id="å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº"><a href="#å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº" class="headerlink" title="å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº"></a>å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº</h3><pre><code>./frpc -c ./frpc.ini</code></pre><h2 id="è¿œç¨‹ç™»å½•"><a href="#è¿œç¨‹ç™»å½•" class="headerlink" title="è¿œç¨‹ç™»å½•"></a>è¿œç¨‹ç™»å½•</h2><pre><code>ssh username@xxx.xxx.xxx.xxx -p 6000</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-24.png"></p><p>ç”¨å†…ç½‘æœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç </p><p>ç”¨å…¬ç½‘æœåŠ¡å™¨çš„IPå’Œç«¯å£</p><h2 id="è®¾ç½®å¼€å¯è‡ªå¯åŠ¨"><a href="#è®¾ç½®å¼€å¯è‡ªå¯åŠ¨" class="headerlink" title="è®¾ç½®å¼€å¯è‡ªå¯åŠ¨"></a>è®¾ç½®å¼€å¯è‡ªå¯åŠ¨</h2><h3 id="æ³¨å†ŒæœåŠ¡"><a href="#æ³¨å†ŒæœåŠ¡" class="headerlink" title="æ³¨å†ŒæœåŠ¡"></a>æ³¨å†ŒæœåŠ¡</h3><p>æœåŠ¡ç«¯</p><pre><code>sudo vim /lib/systemd/system/frps.service[Unit]Description=fraps serviceAfter=network.target network-online.target syslog.targetWants=network.target network-online.target[Service]Type=simple#å¯åŠ¨æœåŠ¡çš„å‘½ä»¤ï¼ˆæ­¤å¤„å†™ä½ çš„frpsçš„å®é™…å®‰è£…ç›®å½•ï¼‰ExecStart=/your/path/frps -c /your/path/frps.ini[Install]WantedBy=multi-user.target</code></pre><h3 id="å¯åŠ¨æœåŠ¡-1"><a href="#å¯åŠ¨æœåŠ¡-1" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><pre><code>sudo systemctl start frps#å¯åŠ¨sudo systemctl enable frps#è‡ªå¯åŠ¨</code></pre><p>å®¢æˆ·ç«¯ä¸€æ¨¡ä¸€æ ·çš„æ“ä½œï¼Œåªä¸è¿‡æŠŠfrpsæ”¹æˆfrpc</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><pre><code>sudo apt install firewall                 //å®‰è£…é˜²ç«å¢™sudo systemctl start firewalld.service   //å¼€å¯é˜²ç«å¢™sudo systemctl stop firewalld.service   //å…³é—­é˜²ç«å¢™sudo systemctl enable firewalld.service  //è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨sudo systemctl disable firewalld.service   //è®¾ç½®å…³é—­å¼€æœºåˆ¶åŠ¨å¯åŠ¨sudo firewall-cmd --reload  //åœ¨ä¸æ”¹å˜çŠ¶æ€çš„æ¡ä»¶ä¸‹é‡æ–°åŠ è½½é˜²ç«å¢™</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å†…ç½‘ç©¿é€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>win10/11å®‰è£…pycocotools</title>
    <link href="/2022/04/13/win10-11%E5%AE%89%E8%A3%85pycocotools/"/>
    <url>/2022/04/13/win10-11%E5%AE%89%E8%A3%85pycocotools/</url>
    
    <content type="html"><![CDATA[<p>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„whlæ–‡ä»¶åˆ°æœ¬åœ°</p><p><a href="https://pypi.tuna.tsinghua.edu.cn/simple/pycocotools-windows/">Links for pycocotools-windows (tsinghua.edu.cn)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-22.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-23.png"></p><p>pip install pycocotools_windows-2.0-cp37-cp37m-win_amd64.whl</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yolov5æ—‹è½¬ç›®æ ‡æ£€æµ‹(æ•°æ®é›†,è®­ç»ƒ,é¢„æµ‹)</title>
    <link href="/2022/04/07/yolov5%E6%97%8B%E8%BD%AC%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%95%B0%E6%8D%AE%E9%9B%86%E8%AE%AD%E7%BB%83%E9%A2%84%E6%B5%8B/"/>
    <url>/2022/04/07/yolov5%E6%97%8B%E8%BD%AC%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%95%B0%E6%8D%AE%E9%9B%86%E8%AE%AD%E7%BB%83%E9%A2%84%E6%B5%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸€èˆ¬éƒ½æ˜¯ç”¨æ— è§’åº¦çš„çŸ©å½¢æ¡†æ ‡æ³¨çš„ï¼Œä½†æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ç›®æ ‡åœ¨å›¾åƒä¸­æ˜¯æœ‰è§’åº¦çš„ï¼Œæˆ‘ä»¬å¸Œæœ›æ¡†å‡ºæ¥çš„ç›®æ ‡çŸ©å½¢æ¡†ä¹Ÿæ˜¯æœ‰è§’åº¦çš„è´´åˆç›®æ ‡çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µ</p><p>ï¼ˆè™½ç„¶è®­ç»ƒç»“æœä¸å¥½ï¼Œå¯èƒ½æ˜¯æ•°æ®é›†æ•°é‡å°‘ï¼Œæˆ–è€…å¯¹è¿™ç§ç±»å‹çš„æ•°æ®é›†æ•ˆæœä¸ç†æƒ³ä¹‹ç±»çš„ï¼Œä½†è¿˜æ˜¯è®°å½•ä¸€ä¸‹è¿‡ç¨‹ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-4.png"></p><p>yolov5æœ¬èº«æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚ä¸æ”¯æŒæ—‹è½¬ç›®æ ‡çŸ©å½¢æ¡†ã€‚</p><p>æ­¤æ¬¡ç”¨åˆ°çš„æ˜¯ç‰›äººæ”¹å†™çš„yolov5-obb</p><p><a href="https://github.com/hukaixuan19970627/yolov5_obb">hukaixuan19970627&#x2F;yolov5_obb: yolov5 + csl_label.(Oriented Object Detection)ï¼ˆRotation Detectionï¼‰ï¼ˆRotated BBoxï¼‰åŸºäºyolov5çš„æ—‹è½¬ç›®æ ‡æ£€æµ‹ (github.com)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-5.png"></p><h2 id="é¡¹ç›®ç¯å¢ƒå‡†å¤‡"><a href="#é¡¹ç›®ç¯å¢ƒå‡†å¤‡" class="headerlink" title="é¡¹ç›®ç¯å¢ƒå‡†å¤‡"></a>é¡¹ç›®ç¯å¢ƒå‡†å¤‡</h2><p>git clone <a href="https://github.com/hukaixuan19970627/yolov5_obb.git">https://github.com/hukaixuan19970627/yolov5_obb.git</a><br>cd yolov5_obb<br>pip install -r requirements.txt<br>cd utils&#x2F;nms_rotated<br>python setup.py develop  #or â€œpip install -v -e .â€</p><p>å…¶ä¸­æœ€åä¸€æ­¥å¯èƒ½ä¼šå‡ºé”™ï¼Œå±äºCUDAç¯å¢ƒé—®é¢˜ï¼Œå¦‚æœtorch.cuda.is_available()&#x3D;&#x3D;Trueçš„è¯ï¼Œé‚£åº”è¯¥æ˜¯cuda toolkitçš„é—®é¢˜ï¼ŒCUDA_HOMEç¯å¢ƒå˜é‡ä¹‹ç±»çš„é—®é¢˜</p><h2 id="æ•°æ®é›†æ ¼å¼"><a href="#æ•°æ®é›†æ ¼å¼" class="headerlink" title="æ•°æ®é›†æ ¼å¼"></a>æ•°æ®é›†æ ¼å¼</h2><p>çœ‹ä¸€ä¸‹dataset&#x2F;datasetdemoä¸‹çš„ç¤ºä¾‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-6.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-7.png"></p><p>ç»“åˆä»‹ç»çœ‹ä¸€ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-8-1024x569.png"></p><p>å¯ä»¥çœ‹å‡ºï¼Œå›¾ç‰‡æ ‡ç­¾çš„æ ¼å¼æ˜¯å€¾æ–œçŸ©å½¢æ¡†çš„å››ä¸ªç‚¹ï¼Œç±»åˆ«åï¼Œæ˜¯å¦difficult</p><h2 id="ç”¨rolabelimgç»™å›¾ç‰‡æ‰“æ ‡ç­¾"><a href="#ç”¨rolabelimgç»™å›¾ç‰‡æ‰“æ ‡ç­¾" class="headerlink" title="ç”¨rolabelimgç»™å›¾ç‰‡æ‰“æ ‡ç­¾"></a>ç”¨rolabelimgç»™å›¾ç‰‡æ‰“æ ‡ç­¾</h2><p><a href="https://xinhaojin.github.io/2022/04/05/%e6%97%8b%e8%bd%ac%e7%9b%ae%e6%a0%87%e6%a3%80%e6%b5%8b%e6%95%b0%e6%8d%ae%e9%9b%86%e5%88%b6%e4%bd%9c-rolabelimg%e7%9a%84%e5%ae%89%e8%a3%85%e5%92%8c%e4%bd%bf%e7%94%a8/">æ—‹è½¬ç›®æ ‡æ£€æµ‹æ•°æ®é›†åˆ¶ä½œ-rolabelimgçš„å®‰è£…å’Œä½¿ç”¨ â€“ Xinhao Jin</a></p><p>æ ‡æ³¨å®Œä¹‹åå¾—åˆ°çš„æ˜¯xmlæ ¼å¼çš„æ ‡æ³¨æ–‡ä»¶</p><p>éœ€è¦è½¬æ¢ä¸ºä¸Šè¿°æ ¼å¼çš„txtæ–‡ä»¶ï¼ˆ4ä¸ªç‚¹1ä¸ªç±»åˆ«1ä¸ªdifficultï¼‰</p><p>æ‰¾äº†ä¸€ä¸‹å¥½åƒé¡¹ç›®ä¸­æ²¡æœ‰ç”¨äºæ•°æ®é›†è½¬æ¢çš„ä»£ç ï¼Œå¯èƒ½ä½œè€…è§‰å¾—è¿™å¾ˆç®€å•ã€‚ã€‚ã€‚</p><h2 id="è½¬æ¢æ•°æ®é›†æ ¼å¼"><a href="#è½¬æ¢æ•°æ®é›†æ ¼å¼" class="headerlink" title="è½¬æ¢æ•°æ®é›†æ ¼å¼"></a>è½¬æ¢æ•°æ®é›†æ ¼å¼</h2><p>æƒ³æƒ³åº”è¯¥ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿï¼Œé¦–å…ˆæŠŠxmlä¸­çš„robndboxæ ‡ç­¾å†…å®¹è¯»å‡ºæ¥ï¼Œè¿™æ—¶å€™æ‰å‘ç°ï¼Œæ€ä¹ˆä¸æ˜¯å››ä¸ªç‚¹çš„åæ ‡ï¼Ÿ</p><p>è€Œæ˜¯ä¸­å¿ƒç‚¹åæ ‡ï¼Œé«‹ï¼Œé«˜ï¼Œæ—‹è½¬è§’åº¦ï¼Ÿï¼Ÿ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-9.png"></p><p>åæ ‡è½¬æ¢å‡½æ•°å¦‚ä¸‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">cx, cy, w, h, angle</span>):</span><br><span class="line">    <span class="comment"># ç”¨äºå¸¸è§„åæ ‡æ—¶ï¼Œangleæ˜¯é¡ºæ—¶é’ˆæ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment"># ç”¨äºå›¾åƒåæ ‡æ—¶ï¼Œangleæ˜¯é€†æ—¶é’ˆæ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment"># math.cos(angle)è¿™é‡Œçš„angleå•ä½æ˜¯rad</span></span><br><span class="line">    <span class="comment"># angle = angle/180*math.pi  å•ä½è½¬æ¢</span></span><br><span class="line">    angle=-angle<span class="comment">#è¿™é‡Œæ˜¯å›¾åƒåæ ‡</span></span><br><span class="line">    points = [[cx-w/<span class="number">2</span>, cy-h/<span class="number">2</span>], [cx+w/<span class="number">2</span>, cy-h/<span class="number">2</span>],</span><br><span class="line">              [cx+w/<span class="number">2</span>, cy+h/<span class="number">2</span>], [cx-w/<span class="number">2</span>, cy+h/<span class="number">2</span>]]</span><br><span class="line">    newpoints = []</span><br><span class="line">    <span class="keyword">if</span> angle &lt; <span class="number">0</span>:  <span class="comment"># é€†æ—¶é’ˆ</span></span><br><span class="line">        angle = -angle</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> points:</span><br><span class="line">            x, y = point</span><br><span class="line">            newx = <span class="built_in">round</span>((x-cx)*math.cos(angle) - (y-cy)*math.sin(angle) + cx,<span class="number">1</span>)</span><br><span class="line">            newy = <span class="built_in">round</span>((x-cx)*math.sin(angle) + (y-cy)*math.cos(angle) + cy,<span class="number">1</span>)</span><br><span class="line">            newpoints.append([newx, newy])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> points:</span><br><span class="line">            x, y = point</span><br><span class="line">            newx = <span class="built_in">round</span>((x-cx)*math.cos(angle) + (y-cy)*math.sin(angle) + cx,<span class="number">1</span>)</span><br><span class="line">            newy = <span class="built_in">round</span>((y-cy)*math.cos(angle) - (x-cx)*math.sin(angle) + cy,<span class="number">1</span>)</span><br><span class="line">            newpoints.append([newx, newy])</span><br><span class="line">    <span class="keyword">return</span> newpoints</span><br></pre></td></tr></table></figure><p>ä»xmlåˆ°ç›®æ ‡txtï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆæŠŠxmlæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹é‡Œï¼Œç„¶åæ‰§è¡Œç¨‹åºä¼šåœ¨xmlåŒçº§ç›®å½•ç”Ÿæˆtxtæ–‡ä»¶å¤¹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">cx, cy, w, h, angle</span>):</span><br><span class="line">    <span class="comment"># ç”¨äºå¸¸è§„åæ ‡æ—¶ï¼Œangleæ˜¯é¡ºæ—¶é’ˆæ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment"># ç”¨äºå›¾åƒåæ ‡æ—¶ï¼Œangleæ˜¯é€†æ—¶é’ˆæ—‹è½¬è§’åº¦</span></span><br><span class="line">    <span class="comment"># math.cos(angle)è¿™é‡Œçš„angleå•ä½æ˜¯rad</span></span><br><span class="line">    <span class="comment"># angle = angle/180*math.pi  å•ä½è½¬æ¢</span></span><br><span class="line">    angle=-angle<span class="comment">#è¿™é‡Œæ˜¯å›¾åƒåæ ‡</span></span><br><span class="line">    points = [[cx-w/<span class="number">2</span>, cy-h/<span class="number">2</span>], [cx+w/<span class="number">2</span>, cy-h/<span class="number">2</span>],</span><br><span class="line">              [cx+w/<span class="number">2</span>, cy+h/<span class="number">2</span>], [cx-w/<span class="number">2</span>, cy+h/<span class="number">2</span>]]</span><br><span class="line">    newpoints = []</span><br><span class="line">    <span class="keyword">if</span> angle &lt; <span class="number">0</span>:  <span class="comment"># é€†æ—¶é’ˆ</span></span><br><span class="line">        angle = -angle</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> points:</span><br><span class="line">            x, y = point</span><br><span class="line">            newx = <span class="built_in">round</span>((x-cx)*math.cos(angle) - (y-cy)*math.sin(angle) + cx,<span class="number">1</span>)</span><br><span class="line">            newy = <span class="built_in">round</span>((x-cx)*math.sin(angle) + (y-cy)*math.cos(angle) + cy,<span class="number">1</span>)</span><br><span class="line">            newpoints.append([newx, newy])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> points:</span><br><span class="line">            x, y = point</span><br><span class="line">            newx = <span class="built_in">round</span>((x-cx)*math.cos(angle) + (y-cy)*math.sin(angle) + cx,<span class="number">1</span>)</span><br><span class="line">            newy = <span class="built_in">round</span>((y-cy)*math.cos(angle) - (x-cx)*math.sin(angle) + cy,<span class="number">1</span>)</span><br><span class="line">            newpoints.append([newx, newy])</span><br><span class="line">    <span class="keyword">return</span> newpoints</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">roxml2txt</span>(<span class="params"><span class="built_in">dir</span></span>):</span><br><span class="line">    <span class="comment">#diræ˜¯xmlæ–‡ä»¶ç›®å½•</span></span><br><span class="line">    files = os.listdir(<span class="built_in">dir</span>)</span><br><span class="line">    parentdir,dirname = os.path.split(<span class="built_in">dir</span>)</span><br><span class="line">    txtdir=os.path.join(parentdir,<span class="string">&#x27;txt&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(txtdir):</span><br><span class="line">        os.mkdir(txtdir)</span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> files:</span><br><span class="line">        xml = ET.parse(os.path.join(<span class="built_in">dir</span>,f))</span><br><span class="line">        root = xml.getroot()</span><br><span class="line">        boxes = root.<span class="built_in">iter</span>(<span class="string">&#x27;robndbox&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(txtdir,f.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;.txt&#x27;</span>),<span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> t:</span><br><span class="line">            <span class="keyword">for</span> box <span class="keyword">in</span> boxes:</span><br><span class="line">                cx = <span class="built_in">float</span>(box.find(<span class="string">&#x27;cx&#x27;</span>).text)</span><br><span class="line">                cy = <span class="built_in">float</span>(box.find(<span class="string">&#x27;cy&#x27;</span>).text)</span><br><span class="line">                w = <span class="built_in">float</span>(box.find(<span class="string">&#x27;w&#x27;</span>).text)</span><br><span class="line">                h = <span class="built_in">float</span>(box.find(<span class="string">&#x27;h&#x27;</span>).text)</span><br><span class="line">                angle = <span class="built_in">float</span>(box.find(<span class="string">&#x27;angle&#x27;</span>).text)</span><br><span class="line">                newpoints = rotate(cx, cy, w, h, angle)<span class="comment">#è®¡ç®—æ—‹è½¬åçš„4ä¸ªç‚¹åæ ‡</span></span><br><span class="line">                <span class="comment"># ç”¨äºæŸ¥çœ‹åæ ‡è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼Œåœ¨åŸå›¾ä¸Šç”»çŸ©å½¢æ¡†ï¼Œè‡ªè¡Œä¿®æ”¹å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">                newpoints=np.array(newpoints)</span><br><span class="line">                newpoints= newpoints.astype(<span class="built_in">int</span>)</span><br><span class="line">                img=cv2.imread(os.path.join(<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;images&#x27;</span>,f.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;.png&#x27;</span>))</span><br><span class="line">                img=cv2.polylines(img,[newpoints],isClosed=<span class="literal">True</span>,color=(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>))</span><br><span class="line">                cv2.imshow(<span class="string">&#x27;pic&#x27;</span>,img)</span><br><span class="line">                cv2.waitKey()</span><br><span class="line">                <span class="comment">##########################################</span></span><br><span class="line">                line=<span class="string">&#x27;&#x27;</span></span><br><span class="line">                <span class="keyword">for</span> point <span class="keyword">in</span> newpoints:</span><br><span class="line">                    line+=<span class="built_in">str</span>(point[<span class="number">0</span>])+<span class="string">&#x27; &#x27;</span>+<span class="built_in">str</span>(point[<span class="number">1</span>])+<span class="string">&#x27; &#x27;</span></span><br><span class="line">                line+=<span class="string">&#x27;word 0\n&#x27;</span></span><br><span class="line">                t.write(line)</span><br><span class="line">                <span class="built_in">print</span>(line)</span><br><span class="line">            t.close()</span><br><span class="line"></span><br><span class="line">roxml2txt(<span class="string">&#x27;test/xml&#x27;</span>)<span class="comment">#è·¯å¾„æœ€åä¸èƒ½åŠ /</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ£€éªŒåæ ‡è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼ŒåŠ å…¥äº†ä¸€æ®µç”»å›¾ä»£ç </p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">newpoints=np.array(newpoints)</span><br><span class="line">newpoints= newpoints.astype(<span class="built_in">int</span>)</span><br><span class="line">img=cv2.imread(os.path.join(<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;images&#x27;</span>,f.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;.png&#x27;</span>))</span><br><span class="line">img=cv2.polylines(img,[newpoints],isClosed=<span class="literal">True</span>,color=(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>))</span><br><span class="line">cv2.imshow(<span class="string">&#x27;pic&#x27;</span>,img)</span><br><span class="line">cv2.waitKey()</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼Œè¯´æ˜æ˜¯æ­£ç¡®çš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-4.png" alt="æ­¤å›¾ç‰‡çš„altå±æ€§ä¸ºç©ºï¼›æ–‡ä»¶åä¸ºimage-4.png"></p><h2 id="æ•°æ®é›†æ”¾è¿›é¡¹ç›®ç›®å½•"><a href="#æ•°æ®é›†æ”¾è¿›é¡¹ç›®ç›®å½•" class="headerlink" title="æ•°æ®é›†æ”¾è¿›é¡¹ç›®ç›®å½•"></a>æ•°æ®é›†æ”¾è¿›é¡¹ç›®ç›®å½•</h2><p>ç„¶åæŠŠå›¾ç‰‡æ–‡ä»¶å¤¹æ”¹åä¸ºimagesï¼ŒæŠŠtxtæ–‡ä»¶å¤¹æ”¹åä¸ºlabelTxtï¼ˆä¸æ”¹ä¹Ÿè¡Œï¼Œè¿™æ ·æ˜¾å¾—è§„èŒƒï¼‰</p><p>åœ¨datasetç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾imageså’ŒlabelTxt</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-10.png"></p><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><p>é¦–å…ˆè¦ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹ï¼Œåº”è¯¥åœ¨githubä¸Šçš„yolov5é¡¹ç›®é‡Œï¼Œä¸‹è½½yolov5s.ptå³å¯</p><p><a href="https://github.com/ultralytics/yolov5">ultralytics&#x2F;yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite (github.com)</a></p><p>å¦‚æœæ˜¯linuxï¼Œç›´æ¥ä½¿ç”¨ä½œè€…æä¾›çš„è„šæœ¬</p><pre><code>pwd=yolov5_obb/ æ‰§è¡Œbash data/scripts/download_weights.sh</code></pre><p>ä¼šè‡ªåŠ¨ä¸‹è½½æƒé‡æ–‡ä»¶åˆ°yolov5_obb&#x2F;ï¼Œä¸ºäº†å¥½çœ‹ä¸€ç‚¹è¿˜æ˜¯æ–°å»ºä¸€ä¸ªweightsæ–‡ä»¶å¤¹æ¥å­˜æ”¾</p><h3 id="ä¿®æ”¹yolov5-obb-DOTA-devkit-dota-utils-py"><a href="#ä¿®æ”¹yolov5-obb-DOTA-devkit-dota-utils-py" class="headerlink" title="ä¿®æ”¹yolov5_obb&#x2F;DOTA_devkit&#x2F;dota_utils.py"></a>ä¿®æ”¹yolov5_obb&#x2F;DOTA_devkit&#x2F;dota_utils.py</h3><p>classnamesæ”¹ä¸ºè‡ªå·±çš„ç±»åˆ«</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-11.png"></p><h3 id="ä¿®æ”¹yolov5-obb-data-dotav15-poly-yaml"><a href="#ä¿®æ”¹yolov5-obb-data-dotav15-poly-yaml" class="headerlink" title="ä¿®æ”¹yolov5_obb&#x2F;data&#x2F;dotav15_poly.yaml"></a>ä¿®æ”¹yolov5_obb&#x2F;data&#x2F;dotav15_poly.yaml</h3><p>ä¿®æ”¹æ•°æ®é›†çš„ç›®å½•</p><p>train,val,testéƒ½æ˜¯ä¸pathé—´çš„ç›¸å¯¹è·¯å¾„ï¼Œæˆ‘è¿™é‡Œå›¾æ–¹ä¾¿è®¾ä¸ºåŒä¸€ä¸ªäº†</p><p>ç„¶åä¿®æ”¹ncç±»åˆ«æ•°å’Œnamesç±»åˆ«åå³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-12.png"></p><h3 id="ä¿®æ”¹yolov5-obb-train-py"><a href="#ä¿®æ”¹yolov5-obb-train-py" class="headerlink" title="ä¿®æ”¹yolov5_obb&#x2F;train.py"></a>ä¿®æ”¹yolov5_obb&#x2F;train.py</h3><p>ä¿®æ”¹å‚æ•°</p><pre><code>weights:/weights/yolov5s.ptï¼Œä¸‹è½½çš„é¢„è®­ç»ƒæ¨¡å‹è·¯å¾„data:/data/dotav15_poly.yamlï¼Œåˆšåˆšä¿®æ”¹çš„é…ç½®æ–‡ä»¶è·¯å¾„epochs:100ï¼Œè®­ç»ƒæ¬¡æ•°batch-size:8ï¼Œä¸€æ‰¹çš„æ•°é‡imgsz:300ï¼Œå›¾ç‰‡å¤§å°device:0ï¼Œæ˜¾å¡ç´¢å¼•ï¼Œæ²¡æœ‰çš„è¯å†™cpuworkers:8,çº¿ç¨‹æ•°ï¼Œå‡ºé”™çš„è¯å°±ä¸æ–­å‡å°</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-13-1024x296.png"></p><p>æ‰§è¡Œpython train.pyå³å¯è®­ç»ƒ</p><p>ç»“æœä¿å­˜åœ¨runs&#x2F;train&#x2F;expâ€¦&#x2F;</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-14.png"></p><h2 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h2><p>ä¿®æ”¹yolov5_obb&#x2F;detect.py</p><p>weightsè·¯å¾„æ”¹ä¸ºä¸Šé¢è®­ç»ƒå®Œç”Ÿæˆçš„æƒé‡æ–‡ä»¶</p><p>sourceæ˜¯ç”¨äºé¢„æµ‹çš„å›¾ç‰‡è·¯å¾„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-15-1024x310.png"></p><p>é¢„æµ‹ç»“æœä¿å­˜åœ¨runs&#x2F;detect&#x2F;exp..&#x2F;ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-17.png"></p><p>è¿™æ˜¯35å¼ å›¾ç‰‡300æ¬¡è®­ç»ƒçš„ç»“æœï¼Œå¯ä»¥æ‰©å¤§æ•°æ®é›†å¹¶ä¸”æŠŠè®­ç»ƒé›†éªŒè¯é›†åˆ†ç¦»ï¼Œåº”è¯¥ä¼šæœ‰å¥½çš„æ•ˆæœ</p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>selenium Edgeåå°é™é»˜è¿è¡Œ</title>
    <link href="/2022/04/05/selenium-edge%E5%90%8E%E5%8F%B0%E9%9D%99%E9%BB%98%E8%BF%90%E8%A1%8C/"/>
    <url>/2022/04/05/selenium-edge%E5%90%8E%E5%8F%B0%E9%9D%99%E9%BB%98%E8%BF%90%E8%A1%8C/</url>
    
    <content type="html"><![CDATA[<p>webdriverä¸­åªæœ‰ChromeOptionsè€Œæ²¡æœ‰EdgeOptions,æ— æ³•æ·»åŠ headlesså‚æ•°ï¼Œéœ€è¦å€ŸåŠ©å¤–éƒ¨å·¥å…·</p><p>pip install msedge-selenium-tools</p><p>ç„¶åå°±å¯ä»¥äº†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> msedge.selenium_tools <span class="keyword">import</span> EdgeOptions</span><br><span class="line"><span class="keyword">from</span> msedge.selenium_tools <span class="keyword">import</span> Edge</span><br><span class="line"></span><br><span class="line">edge_options = EdgeOptions()</span><br><span class="line">edge_options.use_chromium = <span class="literal">True</span></span><br><span class="line"><span class="comment"># è®¾ç½®æ— ç•Œé¢æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å…¶å®ƒè®¾ç½®</span></span><br><span class="line">edge_options.add_argument(<span class="string">&#x27;headless&#x27;</span>)</span><br><span class="line">driver = Edge(options=edge_options)</span><br><span class="line">r = driver.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(driver.title)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-3.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>selenium</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—‹è½¬ç›®æ ‡æ£€æµ‹æ•°æ®é›†åˆ¶ä½œ-rolabelimgçš„å®‰è£…å’Œä½¿ç”¨</title>
    <link href="/2022/04/05/%E6%97%8B%E8%BD%AC%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%B6%E4%BD%9C-rolabelimg%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/04/05/%E6%97%8B%E8%BD%AC%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%B6%E4%BD%9C-rolabelimg%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä¸‹è½½é¡¹ç›®æºç </p><p>git clone <a href="https://github.com/cgvict/roLabelImg">https://github.com/cgvict/roLabelImg</a><br>#é˜²æ­¢ä½œè€…è·‘è·¯ï¼Œforkäº†ä¸€ä¸ªå¤‡ç”¨<a href="https://github.com/RuBanNo7/roLabelImg">https://github.com/RuBanNo7/roLabelImg</a></p><p>å®‰è£…ä¾èµ–</p><pre><code>pip install pyqt5,lxml</code></pre><p>è¿›å…¥åˆ°roLabelImgç›®å½•ä¸‹</p><pre><code>pyrcc5 -o resources.py resources.qrc</code></pre><p>æˆåŠŸåä¼šåœ¨ç›®å½•ä¸‹ç”Ÿæˆrolabelimg.pyæ–‡ä»¶ï¼Œè¿è¡Œå³å¯å¯åŠ¨</p><pre><code>python rolabelimg.py</code></pre><p>ä¸è¦å…³é—­å‘½ä»¤è¡Œçª—å£ï¼Œå¯ä»¥ä½¿ç”¨è½¯ä»¶</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>ç”»çŸ©å½¢æ¡†ï¼Œä½¿ç”¨z,x or c,vè¿›è¡Œæ—‹è½¬è°ƒèŠ‚ï¼Œå…¶ä½™ç”¨æ³•å’Œæ™®é€šlabelImgç›¸åŒ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/20191211101740462.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-2.png"></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€å¼ å›¾ææ‡‚pythonæ·±æ‹·è´æµ…æ‹·è´</title>
    <link href="/2022/04/05/%E4%B8%80%E5%BC%A0%E5%9B%BE%E6%90%9E%E6%87%82python%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    <url>/2022/04/05/%E4%B8%80%E5%BC%A0%E5%9B%BE%E6%90%9E%E6%87%82python%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    
    <content type="html"><![CDATA[<p>ç‰›é€¼çš„å¯è§†åŒ–å·¥å…·<a href="https://pythontutor.com/live.html#mode=edit">Live Programming Mode - Python Tutor - Visualize Python and JavaScript code</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-1-1024x494.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch12-Dropout(ç¼“è§£è¿‡æ‹Ÿåˆ)</title>
    <link href="/2022/04/05/pytorch12-dropout%E7%BC%93%E8%A7%A3%E8%BF%87%E6%8B%9F%E5%90%88/"/>
    <url>/2022/04/05/pytorch12-dropout%E7%BC%93%E8%A7%A3%E8%BF%87%E6%8B%9F%E5%90%88/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/dropout/">Dropout ç¼“è§£è¿‡æ‹Ÿåˆ - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>è¿‡æ‹Ÿåˆè®©äººå¤´ç–¼, æ˜æ˜è®­ç»ƒæ—¶è¯¯å·®å·²ç»é™å¾—è¶³å¤Ÿä½, å¯æ˜¯æµ‹è¯•çš„æ—¶å€™è¯¯å·®çªç„¶é£™å‡</p><p>ä¸»è¦åŸå› æ˜¯è®­ç»ƒæ•°æ®å¤ªå°‘ï¼Œæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®è¿‡åº¦å­¦ä¹ äº†</p><p>å¯ä»¥ç”¨æ•°æ®ç‚¹çš„æ›²çº¿å›å½’é—®é¢˜æ¥è§£é‡Š</p><h2 id="å®šä¹‰æ•°æ®é›†"><a href="#å®šä¹‰æ•°æ®é›†" class="headerlink" title="å®šä¹‰æ•°æ®é›†"></a>å®šä¹‰æ•°æ®é›†</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/5-3-2.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># reproducible</span></span><br><span class="line"></span><br><span class="line">N_SAMPLES = <span class="number">20</span></span><br><span class="line">N_HIDDEN = <span class="number">300</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># training data</span></span><br><span class="line">x = torch.unsqueeze(torch.linspace(-<span class="number">1</span>, <span class="number">1</span>, N_SAMPLES), <span class="number">1</span>)</span><br><span class="line">y = x + <span class="number">0.3</span>*torch.normal(torch.zeros(N_SAMPLES, <span class="number">1</span>), torch.ones(N_SAMPLES, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># test data</span></span><br><span class="line">test_x = torch.unsqueeze(torch.linspace(-<span class="number">1</span>, <span class="number">1</span>, N_SAMPLES), <span class="number">1</span>)</span><br><span class="line">test_y = test_x + <span class="number">0.3</span>*torch.normal(torch.zeros(N_SAMPLES, <span class="number">1</span>), torch.ones(N_SAMPLES, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># show data</span></span><br><span class="line">plt.scatter(x.data.numpy(), y.data.numpy(), c=<span class="string">&#x27;magenta&#x27;</span>, s=<span class="number">50</span>, alpha=<span class="number">0.5</span>, label=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">plt.scatter(test_x.data.numpy(), test_y.data.numpy(), c=<span class="string">&#x27;cyan&#x27;</span>, s=<span class="number">50</span>, alpha=<span class="number">0.5</span>, label=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>)</span><br><span class="line">plt.ylim((-<span class="number">2.5</span>, <span class="number">2.5</span>))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰ç½‘ç»œ"><a href="#å®šä¹‰ç½‘ç»œ" class="headerlink" title="å®šä¹‰ç½‘ç»œ"></a>å®šä¹‰ç½‘ç»œ</h2><p>æˆ‘ä»¬åœ¨è¿™é‡Œæ­å»ºä¸¤ä¸ªç¥ç»ç½‘ç»œ, ä¸€ä¸ªæ²¡æœ‰Â <code>dropout</code>, ä¸€ä¸ªæœ‰Â <code>dropout</code>. æ²¡æœ‰Â <code>dropout</code>Â çš„å®¹æ˜“å‡ºç° è¿‡æ‹Ÿåˆ, é‚£æˆ‘ä»¬å°±å‘½åä¸ºÂ <code>net_overfitting</code>, å¦ä¸€ä¸ªå°±æ˜¯Â <code>net_dropped</code>.Â <code>torch.nn.Dropout(0.5)</code>Â è¿™é‡Œçš„ 0.5 æŒ‡çš„æ˜¯éšæœºæœ‰ 50% çš„ç¥ç»å…ƒä¼šè¢«å…³é—­&#x2F;ä¸¢å¼ƒ.</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">net_overfitting = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(<span class="number">1</span>, N_HIDDEN),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(N_HIDDEN, N_HIDDEN),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(N_HIDDEN, <span class="number">1</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">net_dropped = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(<span class="number">1</span>, N_HIDDEN),</span><br><span class="line">    torch.nn.Dropout(<span class="number">0.5</span>),  <span class="comment"># drop 50% of the neuron</span></span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(N_HIDDEN, N_HIDDEN),</span><br><span class="line">    torch.nn.Dropout(<span class="number">0.5</span>),  <span class="comment"># drop 50% of the neuron</span></span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(N_HIDDEN, <span class="number">1</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">optimizer_ofit = torch.optim.Adam(net_overfitting.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">optimizer_drop = torch.optim.Adam(net_dropped.parameters(), lr=<span class="number">0.01</span>)</span><br><span class="line">loss_func = torch.nn.MSELoss()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">500</span>):</span><br><span class="line">    pred_ofit = net_overfitting(x)</span><br><span class="line">    pred_drop = net_dropped(x)</span><br><span class="line"></span><br><span class="line">    loss_ofit = loss_func(pred_ofit, y)</span><br><span class="line">    loss_drop = loss_func(pred_drop, y)</span><br><span class="line"></span><br><span class="line">    optimizer_ofit.zero_grad()</span><br><span class="line">    optimizer_drop.zero_grad()</span><br><span class="line">    loss_ofit.backward()</span><br><span class="line">    loss_drop.backward()</span><br><span class="line">    optimizer_ofit.step()</span><br><span class="line">    optimizer_drop.step()</span><br></pre></td></tr></table></figure><h2 id="å¯¹æ¯”æµ‹è¯•ç»“æœ"><a href="#å¯¹æ¯”æµ‹è¯•ç»“æœ" class="headerlink" title="å¯¹æ¯”æµ‹è¯•ç»“æœ"></a>å¯¹æ¯”æµ‹è¯•ç»“æœ</h2><p>åœ¨è¿™ä¸ªÂ <code>for</code>Â å¾ªç¯é‡Œ, æˆ‘ä»¬åŠ ä¸Šç”»æµ‹è¯•å›¾çš„éƒ¨åˆ†. æ³¨æ„åœ¨æµ‹è¯•æ—¶, è¦å°†ç½‘ç»œæ”¹æˆÂ <code>eval()</code>Â å½¢å¼, ç‰¹åˆ«æ˜¯Â <code>net_dropped</code>,Â <code>net_overfitting</code>Â æ”¹ä¸æ”¹å…¶å®æ— æ‰€è°“. ç”»å¥½å›¾å†æ”¹å›Â <code>train()</code>Â æ¨¡å¼</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/5-3-1.gif"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">optimizer_ofit.step()</span><br><span class="line">optimizer_drop.step()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥ç€ä¸Šé¢æ¥</span></span><br><span class="line"><span class="keyword">if</span> t % <span class="number">10</span> == <span class="number">0</span>:     <span class="comment"># æ¯ 10 æ­¥ç”»ä¸€æ¬¡å›¾</span></span><br><span class="line">    <span class="comment"># å°†ç¥ç»ç½‘ç»œè½¬æ¢æˆæµ‹è¯•å½¢å¼, ç”»å¥½å›¾ä¹‹åæ”¹å› è®­ç»ƒå½¢å¼</span></span><br><span class="line">    net_overfitting.<span class="built_in">eval</span>()</span><br><span class="line">    net_dropped.<span class="built_in">eval</span>()  <span class="comment"># å› ä¸º drop ç½‘ç»œåœ¨ train çš„æ—¶å€™å’Œ test çš„æ—¶å€™å‚æ•°ä¸ä¸€æ ·.</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    test_pred_ofit = net_overfitting(test_x)</span><br><span class="line">    test_pred_drop = net_dropped(test_x)</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†ä¸¤ä¸ªç½‘ç»œæ”¹å› è®­ç»ƒå½¢å¼</span></span><br><span class="line">    net_overfitting.train()</span><br><span class="line">    net_dropped.train()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch11-Batch Normalization(æ‰¹æ ‡å‡†åŒ–)</title>
    <link href="/2022/04/05/pytorch11-batch-normalization%E6%89%B9%E6%A0%87%E5%87%86%E5%8C%96/"/>
    <url>/2022/04/05/pytorch11-batch-normalization%E6%89%B9%E6%A0%87%E5%87%86%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/intro-batch-normalization/">ä»€ä¹ˆæ˜¯æ‰¹æ ‡å‡†åŒ– (Batch Normalization) - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>Batch Normalization, æ‰¹æ ‡å‡†åŒ–, å’Œæ™®é€šçš„æ•°æ®æ ‡å‡†åŒ–ç±»ä¼¼, æ˜¯å°†åˆ†æ•£çš„æ•°æ®ç»Ÿä¸€çš„ä¸€ç§åšæ³•, ä¹Ÿæ˜¯ä¼˜åŒ–ç¥ç»ç½‘ç»œçš„ä¸€ç§æ–¹æ³•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB1.png"></p><h2 id="ä¸ºä»€ä¹ˆè¦æ ‡å‡†åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æ ‡å‡†åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ ‡å‡†åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æ ‡å‡†åŒ–ï¼Ÿ</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB2.png"></p><p>åœ¨ç¥ç»ç½‘ç»œä¸­, æ•°æ®åˆ†å¸ƒå¯¹è®­ç»ƒä¼šäº§ç”Ÿå½±å“. æ¯”å¦‚æŸä¸ªç¥ç»å…ƒ x çš„å€¼ä¸º1, æŸä¸ª Weights çš„åˆå§‹å€¼ä¸º 0.1, è¿™æ ·åä¸€å±‚ç¥ç»å…ƒè®¡ç®—ç»“æœå°±æ˜¯ Wx &#x3D; 0.1; åˆæˆ–è€… x &#x3D; 20, è¿™æ · Wx çš„ç»“æœå°±ä¸º 2. ç°åœ¨è¿˜ä¸èƒ½çœ‹å‡ºä»€ä¹ˆé—®é¢˜, ä½†æ˜¯, å½“æˆ‘ä»¬åŠ ä¸Šä¸€å±‚æ¿€åŠ±å‡½æ•°, æ¿€æ´»è¿™ä¸ª Wx å€¼çš„æ—¶å€™, é—®é¢˜å°±æ¥äº†. å¦‚æœä½¿ç”¨ åƒ tanh çš„æ¿€åŠ±å‡½æ•°, Wx çš„æ¿€æ´»å€¼å°±å˜æˆäº† ~0.1 å’Œ ~1, æ¥è¿‘äº 1 çš„éƒ¨å·²ç»å¤„åœ¨äº† æ¿€åŠ±å‡½æ•°çš„é¥±å’Œé˜¶æ®µ, ä¹Ÿå°±æ˜¯å¦‚æœ x æ— è®ºå†æ€ä¹ˆæ‰©å¤§, tanh æ¿€åŠ±å‡½æ•°è¾“å‡ºå€¼ä¹Ÿè¿˜æ˜¯ æ¥è¿‘1. æ¢å¥è¯è¯´, ç¥ç»ç½‘ç»œåœ¨åˆå§‹é˜¶æ®µå·²ç»ä¸å¯¹é‚£äº›æ¯”è¾ƒå¤§çš„ x ç‰¹å¾èŒƒå›´ æ•æ„Ÿäº†. è¿™æ ·å¾ˆç³Ÿç³•, æƒ³è±¡æˆ‘è½»è½»æ‹è‡ªå·±çš„æ„Ÿè§‰å’Œé‡é‡æ‰“è‡ªå·±çš„æ„Ÿè§‰å±…ç„¶æ²¡ä»€ä¹ˆå·®åˆ«, è¿™å°±è¯æ˜æˆ‘çš„æ„Ÿå®˜ç³»ç»Ÿå¤±æ•ˆäº†. å½“ç„¶æˆ‘ä»¬æ˜¯å¯ä»¥ç”¨ä¹‹å‰æåˆ°çš„å¯¹æ•°æ®åš normalization é¢„å¤„ç†, ä½¿å¾—è¾“å…¥çš„ x å˜åŒ–èŒƒå›´ä¸ä¼šå¤ªå¤§, è®©è¾“å…¥å€¼ç»è¿‡æ¿€åŠ±å‡½æ•°çš„æ•æ„Ÿéƒ¨åˆ†. ä½†åˆšåˆšè¿™ä¸ªä¸æ•æ„Ÿé—®é¢˜ä¸ä»…ä»…å‘ç”Ÿåœ¨ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚, è€Œä¸”åœ¨éšè—å±‚ä¸­ä¹Ÿç»å¸¸ä¼šå‘ç”Ÿ.</p><h2 id="æ·»åŠ çš„ä½ç½®"><a href="#æ·»åŠ çš„ä½ç½®" class="headerlink" title="æ·»åŠ çš„ä½ç½®"></a>æ·»åŠ çš„ä½ç½®</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB4.png"></p><p>Batch normalization çš„ batch æ˜¯æ‰¹æ•°æ®, æŠŠæ•°æ®åˆ†æˆå°æ‰¹å°æ‰¹è¿›è¡Œ stochastic gradient descent. è€Œä¸”åœ¨æ¯æ‰¹æ•°æ®è¿›è¡Œå‰å‘ä¼ é€’ forward propagation çš„æ—¶å€™, å¯¹æ¯ä¸€å±‚éƒ½è¿›è¡Œ normalization çš„å¤„ç†</p><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB5.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB6.png"></p><p>æ²¡æœ‰ normalize çš„æ•°æ® ä½¿ç”¨ tanh æ¿€æ´»ä»¥å, æ¿€æ´»å€¼å¤§éƒ¨åˆ†éƒ½åˆ†å¸ƒåˆ°äº†é¥±å’Œé˜¶æ®µ, ä¹Ÿå°±æ˜¯å¤§éƒ¨åˆ†çš„æ¿€æ´»å€¼ä¸æ˜¯-1, å°±æ˜¯1, è€Œ normalize ä»¥å, å¤§éƒ¨åˆ†çš„æ¿€æ´»å€¼åœ¨æ¯ä¸ªåˆ†å¸ƒåŒºé—´éƒ½è¿˜æœ‰å­˜åœ¨. å†å°†è¿™ä¸ªæ¿€æ´»åçš„åˆ†å¸ƒä¼ é€’åˆ°ä¸‹ä¸€å±‚ç¥ç»ç½‘ç»œè¿›è¡Œåç»­è®¡ç®—, æ¯ä¸ªåŒºé—´éƒ½æœ‰åˆ†å¸ƒçš„è¿™ä¸€ç§å¯¹äºç¥ç»ç½‘ç»œå°±ä¼šæ›´åŠ æœ‰ä»·å€¼</p><h2 id="BNç®—æ³•"><a href="#BNç®—æ³•" class="headerlink" title="BNç®—æ³•"></a>BNç®—æ³•</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB7.png"></p><p>è¿™ä¸‰æ­¥å°±æ˜¯æˆ‘ä»¬åœ¨åˆšåˆšä¸€ç›´è¯´çš„ normalization å·¥åº, ä½†æ˜¯å…¬å¼çš„åé¢è¿˜æœ‰ä¸€ä¸ªåå‘æ“ä½œ, å°† normalize åçš„æ•°æ®å†æ‰©å±•å’Œå¹³ç§». åŸæ¥è¿™æ˜¯ä¸ºäº†è®©ç¥ç»ç½‘ç»œè‡ªå·±å»å­¦ç€ä½¿ç”¨å’Œä¿®æ”¹è¿™ä¸ªæ‰©å±•å‚æ•° gamma, å’Œ å¹³ç§»å‚æ•° Î², è¿™æ ·ç¥ç»ç½‘ç»œå°±èƒ½è‡ªå·±æ…¢æ…¢ç¢ç£¨å‡ºå‰é¢çš„ normalization æ“ä½œåˆ°åº•æœ‰æ²¡æœ‰èµ·åˆ°ä¼˜åŒ–çš„ä½œç”¨, å¦‚æœæ²¡æœ‰èµ·åˆ°ä½œç”¨, æˆ‘å°±ä½¿ç”¨ gamma å’Œ belt æ¥æŠµæ¶ˆä¸€äº› normalization çš„æ“ä½œ.</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/NB8.png"></p><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€å¼ ç¥ç»ç½‘ç»œè®­ç»ƒåˆ°æœ€å, ä»£è¡¨äº†æ¯å±‚è¾“å‡ºå€¼çš„ç»“æœçš„åˆ†å¸ƒå›¾. è¿™æ ·æˆ‘ä»¬å°±èƒ½ä¸€çœ¼çœ‹å‡º Batch normalization çš„åŠŸæ•ˆå•¦. è®©æ¯ä¸€å±‚çš„å€¼åœ¨æœ‰æ•ˆçš„èŒƒå›´å†…ä¼ é€’ä¸‹å»</p>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch10-Autoencoder(è‡ªç¼–ç /éç›‘ç£å­¦ä¹ )</title>
    <link href="/2022/04/04/pytorch10-autoencoder%E8%87%AA%E7%BC%96%E7%A0%81-%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/04/04/pytorch10-autoencoder%E8%87%AA%E7%BC%96%E7%A0%81-%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/autoencoder/">AutoEncoder (è‡ªç¼–ç &#x2F;éç›‘ç£å­¦ä¹ ) - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><h2 id="ç¼–ç å™¨"><a href="#ç¼–ç å™¨" class="headerlink" title="ç¼–ç å™¨"></a>ç¼–ç å™¨</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/auto4.png"></p><p>è¿™éƒ¨åˆ†ä¹Ÿå«ä½œ encoder ç¼–ç å™¨. ç¼–ç å™¨èƒ½å¾—åˆ°åŸæ•°æ®çš„ç²¾é«“, ç„¶åæˆ‘ä»¬åªéœ€è¦å†åˆ›å»ºä¸€ä¸ªå°çš„ç¥ç»ç½‘ç»œå­¦ä¹ è¿™ä¸ªç²¾é«“çš„æ•°æ®,ä¸ä»…å‡å°‘äº†ç¥ç»ç½‘ç»œçš„è´Ÿæ‹…, è€Œä¸”åŒæ ·èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœ.</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/auto5.png"></p><p>è¿™æ˜¯ä¸€ä¸ªé€šè¿‡è‡ªç¼–ç æ•´ç†å‡ºæ¥çš„æ•°æ®, ä»–èƒ½ä»åŸæ•°æ®ä¸­æ€»ç»“å‡ºæ¯ç§ç±»å‹æ•°æ®çš„ç‰¹å¾, å¦‚æœæŠŠè¿™äº›ç‰¹å¾ç±»å‹éƒ½æ”¾åœ¨ä¸€å¼ äºŒç»´çš„å›¾ç‰‡ä¸Š, æ¯ç§ç±»å‹éƒ½å·²ç»è¢«å¾ˆå¥½çš„ç”¨åŸæ•°æ®çš„ç²¾é«“åŒºåˆ†å¼€æ¥. å¦‚æœä½ äº†è§£ PCA ä¸»æˆåˆ†åˆ†æ, å†æå–ä¸»è¦ç‰¹å¾æ—¶, è‡ªç¼–ç å’Œå®ƒä¸€æ ·,ç”šè‡³è¶…è¶Šäº† PCA. æ¢å¥è¯è¯´, è‡ªç¼–ç  å¯ä»¥åƒ PCA ä¸€æ · ç»™ç‰¹å¾å±æ€§é™ç»´</p><h2 id="è§£ç å™¨"><a href="#è§£ç å™¨" class="headerlink" title="è§£ç å™¨"></a>è§£ç å™¨</h2><p>è‡³äºè§£ç å™¨ Decoder, æˆ‘ä»¬ä¹Ÿèƒ½é‚£å®ƒæ¥åšç‚¹äº‹æƒ…. æˆ‘ä»¬çŸ¥é“, è§£ç å™¨åœ¨è®­ç»ƒçš„æ—¶å€™æ˜¯è¦å°†ç²¾é«“ä¿¡æ¯è§£å‹æˆåŸå§‹ä¿¡æ¯, é‚£ä¹ˆè¿™å°±æä¾›äº†ä¸€ä¸ªè§£å‹å™¨çš„ä½œç”¨, ç”šè‡³æˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ (ç±»ä¼¼äºGAN).</p><p>æœ‰ä¸€ä¸ªä¾‹å­å°±æ˜¯è®©å®ƒèƒ½æ¨¡ä»¿å¹¶ç”Ÿæˆæ‰‹å†™æ•°å­—.</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/auto6.jpg"></p><h2 id="éç›‘ç£å­¦ä¹ "><a href="#éç›‘ç£å­¦ä¹ " class="headerlink" title="éç›‘ç£å­¦ä¹ "></a>éç›‘ç£å­¦ä¹ </h2><p>ç¥ç»ç½‘ç»œä¹Ÿèƒ½è¿›è¡Œéç›‘ç£å­¦ä¹ , åªéœ€è¦è®­ç»ƒæ•°æ®, ä¸éœ€è¦æ ‡ç­¾æ•°æ®. è‡ªç¼–ç å°±æ˜¯è¿™æ ·ä¸€ç§å½¢å¼. è‡ªç¼–ç èƒ½è‡ªåŠ¨åˆ†ç±»æ•°æ®, è€Œä¸”ä¹Ÿèƒ½åµŒå¥—åœ¨åŠç›‘ç£å­¦ä¹ çš„ä¸Šé¢, ç”¨å°‘é‡çš„æœ‰æ ‡ç­¾æ ·æœ¬å’Œå¤§é‡çš„æ— æ ‡ç­¾æ ·æœ¬å­¦ä¹ </p><p>è¿™æ¬¡æˆ‘ä»¬è¿˜ç”¨ MNIST æ‰‹å†™æ•°å­—æ•°æ®æ¥å‹ç¼©å†è§£å‹å›¾ç‰‡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-4-1.gif"></p><p>ç„¶åç”¨å‹ç¼©çš„ç‰¹å¾è¿›è¡Œéç›‘ç£åˆ†ç±»</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-4-2.gif"></p><h2 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h2><p>è‡ªç¼–ç åªç”¨è®­ç»ƒé›†å°±å¥½äº†, è€Œä¸”åªéœ€è¦è®­ç»ƒ training data çš„ image, ä¸ç”¨è®­ç»ƒ labels.</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¶…å‚æ•°</span></span><br><span class="line">EPOCH = <span class="number">10</span></span><br><span class="line">BATCH_SIZE = <span class="number">64</span></span><br><span class="line">LR = <span class="number">0.005</span></span><br><span class="line">DOWNLOAD_MNIST = <span class="literal">True</span>   <span class="comment"># ä¸‹è¿‡æ•°æ®çš„è¯, å°±å¯ä»¥è®¾ç½®æˆ False</span></span><br><span class="line">N_TEST_IMG = <span class="number">5</span>          <span class="comment"># åˆ°æ—¶å€™æ˜¾ç¤º 5å¼ å›¾ç‰‡çœ‹æ•ˆæœ, å¦‚ä¸Šå›¾ä¸€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mnist digits dataset</span></span><br><span class="line">train_data = torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&#x27;./mnist/&#x27;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,                                     <span class="comment"># this is training data</span></span><br><span class="line">    transform=torchvision.transforms.ToTensor(),    <span class="comment"># Converts a PIL.Image or numpy.ndarray to</span></span><br><span class="line">                                                    <span class="comment"># torch.FloatTensor of shape (C x H x W) and normalize in the range [0.0, 1.0]</span></span><br><span class="line">    download=DOWNLOAD_MNIST,                        <span class="comment"># download it if you don&#x27;t have it</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">AutoEncoder å½¢å¼å¾ˆç®€å•, åˆ†åˆ«æ˜¯Â `encoder`Â å’ŒÂ `decoder`, å‹ç¼©å’Œè§£å‹, å‹ç¼©åå¾—åˆ°å‹ç¼©çš„ç‰¹å¾å€¼, å†ä»å‹ç¼©çš„ç‰¹å¾å€¼è§£å‹æˆåŸå›¾ç‰‡.</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AutoEncoder</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(AutoEncoder, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å‹ç¼©</span></span><br><span class="line">        <span class="variable language_">self</span>.encoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">28</span>*<span class="number">28</span>, <span class="number">128</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">128</span>, <span class="number">64</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">64</span>, <span class="number">12</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">12</span>, <span class="number">3</span>),   <span class="comment"># å‹ç¼©æˆ3ä¸ªç‰¹å¾, è¿›è¡Œ 3D å›¾åƒå¯è§†åŒ–</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># è§£å‹</span></span><br><span class="line">        <span class="variable language_">self</span>.decoder = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">3</span>, <span class="number">12</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">12</span>, <span class="number">64</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">64</span>, <span class="number">128</span>),</span><br><span class="line">            nn.Tanh(),</span><br><span class="line">            nn.Linear(<span class="number">128</span>, <span class="number">28</span>*<span class="number">28</span>),</span><br><span class="line">            nn.Sigmoid(),       <span class="comment"># æ¿€åŠ±å‡½æ•°è®©è¾“å‡ºå€¼åœ¨ (0, 1)</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        encoded = <span class="variable language_">self</span>.encoder(x)</span><br><span class="line">        decoded = <span class="variable language_">self</span>.decoder(encoded)</span><br><span class="line">        <span class="keyword">return</span> encoded, decoded</span><br><span class="line"></span><br><span class="line">autoencoder = AutoEncoder()</span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><p>è®­ç»ƒ, å¹¶å¯è§†åŒ–è®­ç»ƒçš„è¿‡ç¨‹. æˆ‘ä»¬å¯ä»¥æœ‰æ•ˆçš„åˆ©ç”¨Â <code>encoder</code>Â å’ŒÂ <code>decoder</code>Â æ¥åšå¾ˆå¤šäº‹, æ¯”å¦‚è¿™é‡Œæˆ‘ä»¬ç”¨Â <code>decoder</code>Â çš„ä¿¡æ¯è¾“å‡ºçœ‹å’ŒåŸå›¾ç‰‡çš„å¯¹æ¯”, è¿˜èƒ½ç”¨Â <code>encoder</code>Â æ¥çœ‹ç»è¿‡å‹ç¼©å, ç¥ç»ç½‘ç»œå¯¹åŸå›¾ç‰‡çš„ç†è§£.Â <code>encoder</code>Â èƒ½å°†ä¸åŒå›¾ç‰‡æ•°æ®å¤§æ¦‚çš„åˆ†ç¦»å¼€æ¥. è¿™æ ·å°±æ˜¯ä¸€ä¸ªæ— ç›‘ç£å­¦ä¹ çš„è¿‡ç¨‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.Adam(autoencoder.parameters(), lr=LR)</span><br><span class="line">loss_func = nn.MSELoss()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">    <span class="keyword">for</span> step, (x, b_label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        b_x = x.view(-<span class="number">1</span>, <span class="number">28</span>*<span class="number">28</span>)   <span class="comment"># batch x, shape (batch, 28*28)</span></span><br><span class="line">        b_y = x.view(-<span class="number">1</span>, <span class="number">28</span>*<span class="number">28</span>)   <span class="comment"># batch y, shape (batch, 28*28)</span></span><br><span class="line"></span><br><span class="line">        encoded, decoded = autoencoder(b_x)</span><br><span class="line"></span><br><span class="line">        loss = loss_func(decoded, b_y)      <span class="comment"># mean square error</span></span><br><span class="line">        optimizer.zero_grad()               <span class="comment"># clear gradients for this training step</span></span><br><span class="line">        loss.backward()                     <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">        optimizer.step()                    <span class="comment"># apply gradients</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3D çš„å¯è§†åŒ–å›¾æŒºæœ‰è¶£çš„, è¿˜èƒ½æŒªåŠ¨è§‚çœ‹, æ›´åŠ ç›´è§‚, å¥½ç†è§£</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¦è§‚çœ‹çš„æ•°æ®</span></span><br><span class="line">view_data = train_data.train_data[:<span class="number">200</span>].view(-<span class="number">1</span>, <span class="number">28</span>*<span class="number">28</span>).<span class="built_in">type</span>(torch.FloatTensor)/<span class="number">255.</span></span><br><span class="line">encoded_data, _ = autoencoder(view_data)    <span class="comment"># æå–å‹ç¼©çš„ç‰¹å¾å€¼</span></span><br><span class="line">fig = plt.figure(<span class="number">2</span>)</span><br><span class="line">ax = Axes3D(fig)    <span class="comment"># 3D å›¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># x, y, z çš„æ•°æ®å€¼</span></span><br><span class="line"></span><br><span class="line">X = encoded_data.data[:, <span class="number">0</span>].numpy()</span><br><span class="line">Y = encoded_data.data[:, <span class="number">1</span>].numpy()</span><br><span class="line">Z = encoded_data.data[:, <span class="number">2</span>].numpy()</span><br><span class="line">values = train_data.train_labels[:<span class="number">200</span>].numpy()  <span class="comment"># æ ‡ç­¾å€¼</span></span><br><span class="line"><span class="keyword">for</span> x, y, z, s <span class="keyword">in</span> <span class="built_in">zip</span>(X, Y, Z, values):</span><br><span class="line">    c = cm.rainbow(<span class="built_in">int</span>(<span class="number">255</span>*s/<span class="number">9</span>))    <span class="comment"># ä¸Šè‰²</span></span><br><span class="line">    ax.text(x, y, z, s, backgroundcolor=c)  <span class="comment"># æ ‡ä½å­</span></span><br><span class="line">ax.set_xlim(X.<span class="built_in">min</span>(), X.<span class="built_in">max</span>())</span><br><span class="line">ax.set_ylim(Y.<span class="built_in">min</span>(), Y.<span class="built_in">max</span>())</span><br><span class="line">ax.set_zlim(Z.<span class="built_in">min</span>(), Z.<span class="built_in">max</span>())</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-4-5.png"></p>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch09-RNN(å¾ªç¯ç¥ç»ç½‘ç»œ-å›å½’)</title>
    <link href="/2022/04/04/pytorch09-rnn%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%9B%9E%E5%BD%92/"/>
    <url>/2022/04/04/pytorch09-rnn%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%9B%9E%E5%BD%92/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/RNN-regression/">RNN å¾ªç¯ç¥ç»ç½‘ç»œ (å›å½’) - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>PyTorch08-RNN(å¾ªç¯ç¥å¾ªç¯ç¥ç»ç½‘ç»œè®©ç¥ç»ç½‘ç»œæœ‰äº†è®°å¿†, å¯¹äºåºåˆ—è¯çš„æ•°æ®,å¾ªç¯ç¥ç»ç½‘ç»œèƒ½è¾¾åˆ°æ›´å¥½çš„æ•ˆæœ</p><p>ä¸Šæ¬¡æˆ‘ä»¬æåˆ°äº†ç”¨ RNN çš„æœ€åä¸€ä¸ªæ—¶é—´ç‚¹è¾“å‡ºæ¥åˆ¤æ–­ä¹‹å‰çœ‹åˆ°çš„å›¾ç‰‡å±äºå“ªä¸€ç±», è¿™æ¬¡æˆ‘ä»¬ç”¨ RNN æ¥åŠæ—¶é¢„æµ‹æ—¶é—´åºåˆ—</p><p>æ•ˆæœï¼šç”¨siné¢„æµ‹cos</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-3-2.png"></p><h2 id="RNNç½‘ç»œ"><a href="#RNNç½‘ç»œ" class="headerlink" title="RNNç½‘ç»œ"></a>RNNç½‘ç»œ</h2><p>å¯¹æ¯ä¸€ä¸ªÂ <code>r_out</code>Â éƒ½å¾—æ”¾åˆ°Â <code>Linear</code>Â ä¸­å»è®¡ç®—å‡ºé¢„æµ‹çš„Â <code>output</code>, æ‰€ä»¥æˆ‘ä»¬èƒ½ç”¨ä¸€ä¸ª for loop æ¥å¾ªç¯è®¡ç®—</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(RNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.rnn = nn.RNN(  <span class="comment"># è¿™å›ä¸€ä¸ªæ™®é€šçš„ RNN å°±èƒ½èƒœä»»</span></span><br><span class="line">            input_size=<span class="number">1</span>,</span><br><span class="line">            hidden_size=<span class="number">32</span>,     <span class="comment"># rnn hidden unit</span></span><br><span class="line">            num_layers=<span class="number">1</span>,       <span class="comment"># æœ‰å‡ å±‚ RNN layers</span></span><br><span class="line">            batch_first=<span class="literal">True</span>,   <span class="comment"># input &amp; output ä¼šæ˜¯ä»¥ batch size ä¸ºç¬¬ä¸€ç»´åº¦çš„ç‰¹å¾é›† e.g. (batch, time_step, input_size)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">32</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, h_state</span>):  <span class="comment"># å› ä¸º hidden state æ˜¯è¿ç»­çš„, æ‰€ä»¥æˆ‘ä»¬è¦ä¸€ç›´ä¼ é€’è¿™ä¸€ä¸ª state</span></span><br><span class="line">        <span class="comment"># x (batch, time_step, input_size)</span></span><br><span class="line">        <span class="comment"># h_state (n_layers, batch, hidden_size)</span></span><br><span class="line">        <span class="comment"># r_out (batch, time_step, output_size)</span></span><br><span class="line">        r_out, h_state = <span class="variable language_">self</span>.rnn(x, h_state)   <span class="comment"># h_state ä¹Ÿè¦ä½œä¸º RNN çš„ä¸€ä¸ªè¾“å…¥</span></span><br><span class="line"></span><br><span class="line">        outs = []    <span class="comment"># ä¿å­˜æ‰€æœ‰æ—¶é—´ç‚¹çš„é¢„æµ‹å€¼</span></span><br><span class="line">        <span class="keyword">for</span> time_step <span class="keyword">in</span> <span class="built_in">range</span>(r_out.size(<span class="number">1</span>)):    <span class="comment"># å¯¹æ¯ä¸€ä¸ªæ—¶é—´ç‚¹è®¡ç®— output</span></span><br><span class="line">            outs.append(<span class="variable language_">self</span>.out(r_out[:, time_step, :]))</span><br><span class="line">        <span class="keyword">return</span> torch.stack(outs, dim=<span class="number">1</span>), h_state</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rnn = RNN()</span><br><span class="line"><span class="built_in">print</span>(rnn)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">RNN (</span></span><br><span class="line"><span class="string">  (rnn): RNN(1, 32, batch_first=True)</span></span><br><span class="line"><span class="string">  (out): Linear (32 -&gt; 1)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><p>ä½¿ç”¨Â <code>x</code>Â ä½œä¸ºè¾“å…¥çš„Â <code>sin</code>Â å€¼, ç„¶åÂ <code>y</code>Â ä½œä¸ºæƒ³è¦æ‹Ÿåˆçš„è¾“å‡º,Â <code>cos</code>Â å€¼. å› ä¸ºä»–ä»¬ä¸¤æ¡æ›²çº¿æ˜¯å­˜åœ¨æŸç§å…³ç³»çš„, æ‰€ä»¥æˆ‘ä»¬å°±èƒ½ç”¨Â <code>sin</code>Â æ¥é¢„æµ‹Â <code>cos</code>.Â <code>rnn</code>Â ä¼šç†è§£ä»–ä»¬çš„å…³ç³», å¹¶ç”¨é‡Œé¢çš„å‚æ•°åˆ†æå‡ºæ¥è¿™ä¸ªæ—¶åˆ»Â <code>sin</code>Â æ›²çº¿ä¸Šçš„ç‚¹å¦‚ä½•å¯¹åº”ä¸ŠÂ <code>cos</code>Â æ›²çº¿ä¸Šçš„ç‚¹.</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.Adam(rnn.parameters(), lr=LR)   <span class="comment"># optimize all rnn parameters</span></span><br><span class="line">loss_func = nn.MSELoss()</span><br><span class="line"></span><br><span class="line">h_state = <span class="literal">None</span>   <span class="comment"># è¦ä½¿ç”¨åˆå§‹ hidden state, å¯ä»¥è®¾æˆ None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    start, end = step * np.pi, (step+<span class="number">1</span>)*np.pi   <span class="comment"># time steps</span></span><br><span class="line">    <span class="comment"># sin é¢„æµ‹ cos</span></span><br><span class="line">    steps = np.linspace(start, end, <span class="number">10</span>, dtype=np.float32)</span><br><span class="line">    x_np = np.sin(steps)    <span class="comment"># float32 for converting torch FloatTensor</span></span><br><span class="line">    y_np = np.cos(steps)</span><br><span class="line"></span><br><span class="line">    x = torch.from_numpy(x_np[np.newaxis, :, np.newaxis])    <span class="comment"># shape (batch, time_step, input_size)</span></span><br><span class="line">    y = torch.from_numpy(y_np[np.newaxis, :, np.newaxis])</span><br><span class="line"></span><br><span class="line">    prediction, h_state = rnn(x, h_state)   <span class="comment"># rnn å¯¹äºæ¯ä¸ª step çš„ prediction, è¿˜æœ‰æœ€åä¸€ä¸ª step çš„ h_state</span></span><br><span class="line">    <span class="comment"># !!  ä¸‹ä¸€æ­¥ååˆ†é‡è¦ !!</span></span><br><span class="line">    h_state = h_state.data  <span class="comment"># è¦æŠŠ h_state é‡æ–°åŒ…è£…ä¸€ä¸‹æ‰èƒ½æ”¾å…¥ä¸‹ä¸€ä¸ª iteration, ä¸ç„¶ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">    loss = loss_func(prediction, y)     <span class="comment"># cross entropy loss</span></span><br><span class="line">    optimizer.zero_grad()               <span class="comment"># clear gradients for this training step</span></span><br><span class="line">    loss.backward()                     <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">    optimizer.step()                    <span class="comment"># apply gradients</span></span><br></pre></td></tr></table></figure><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># torch.manual_seed(1)    # reproducible</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper Parameters</span></span><br><span class="line">TIME_STEP = <span class="number">10</span>      <span class="comment"># rnn time step</span></span><br><span class="line">INPUT_SIZE = <span class="number">1</span>      <span class="comment"># rnn input size</span></span><br><span class="line">LR =<span class="number">0.02</span>           <span class="comment"># learning rate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># show data</span></span><br><span class="line">steps = np.linspace(<span class="number">0</span>, np.pi*<span class="number">2</span>, <span class="number">100</span>, dtype=np.float32)  <span class="comment"># float32 for converting torch FloatTensor</span></span><br><span class="line">x_np = np.sin(steps)</span><br><span class="line">y_np = np.cos(steps)</span><br><span class="line">plt.plot(steps, y_np, <span class="string">&#x27;r-&#x27;</span>, label=<span class="string">&#x27;target (cos)&#x27;</span>)</span><br><span class="line">plt.plot(steps, x_np, <span class="string">&#x27;b-&#x27;</span>, label=<span class="string">&#x27;input (sin)&#x27;</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(RNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.rnn = nn.RNN(</span><br><span class="line">            input_size=INPUT_SIZE,</span><br><span class="line">            hidden_size=<span class="number">32</span>,     <span class="comment"># rnn hidden unit</span></span><br><span class="line">            num_layers=<span class="number">1</span>,       <span class="comment"># number of rnn layer</span></span><br><span class="line">            batch_first=<span class="literal">True</span>,   <span class="comment"># input &amp; output will has batch size as 1s dimension. e.g. (batch, time_step, input_size)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">32</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x, h_state</span>):</span><br><span class="line">        <span class="comment"># x (batch, time_step, input_size)</span></span><br><span class="line">        <span class="comment"># h_state (n_layers, batch, hidden_size)</span></span><br><span class="line">        <span class="comment"># r_out (batch, time_step, hidden_size)</span></span><br><span class="line">        r_out, h_state = <span class="variable language_">self</span>.rnn(x, h_state)</span><br><span class="line"></span><br><span class="line">        outs = []    <span class="comment"># save all predictions</span></span><br><span class="line">        <span class="keyword">for</span> time_step <span class="keyword">in</span> <span class="built_in">range</span>(r_out.size(<span class="number">1</span>)):    <span class="comment"># calculate output for each time step</span></span><br><span class="line">            outs.append(<span class="variable language_">self</span>.out(r_out[:, time_step, :]))</span><br><span class="line">        <span class="keyword">return</span> torch.stack(outs, dim=<span class="number">1</span>), h_state</span><br><span class="line"></span><br><span class="line">        <span class="comment"># instead, for simplicity, you can replace above codes by follows</span></span><br><span class="line">        <span class="comment"># r_out = r_out.view(-1, 32)</span></span><br><span class="line">        <span class="comment"># outs = self.out(r_out)</span></span><br><span class="line">        <span class="comment"># outs = outs.view(-1, TIME_STEP, 1)</span></span><br><span class="line">        <span class="comment"># return outs, h_state</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment"># or even simpler, since nn.Linear can accept inputs of any dimension </span></span><br><span class="line">        <span class="comment"># and returns outputs with same dimension except for the last</span></span><br><span class="line">        <span class="comment"># outs = self.out(r_out)</span></span><br><span class="line">        <span class="comment"># return outs</span></span><br><span class="line"></span><br><span class="line">rnn = RNN()</span><br><span class="line"><span class="built_in">print</span>(rnn)</span><br><span class="line"></span><br><span class="line">optimizer = torch.optim.Adam(rnn.parameters(), lr=LR)   <span class="comment"># optimize all cnn parameters</span></span><br><span class="line">loss_func = nn.MSELoss()</span><br><span class="line"></span><br><span class="line">h_state = <span class="literal">None</span>      <span class="comment"># for initial hidden state</span></span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">1</span>, figsize=(<span class="number">12</span>, <span class="number">5</span>))</span><br><span class="line">plt.ion()           <span class="comment"># continuously plot</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    start, end = step * np.pi, (step+<span class="number">1</span>)*np.pi   <span class="comment"># time range</span></span><br><span class="line">    <span class="comment"># use sin predicts cos</span></span><br><span class="line">    steps = np.linspace(start, end, TIME_STEP, dtype=np.float32, endpoint=<span class="literal">False</span>)  <span class="comment"># float32 for converting torch FloatTensor</span></span><br><span class="line">    x_np = np.sin(steps)</span><br><span class="line">    y_np = np.cos(steps)</span><br><span class="line"></span><br><span class="line">    x = torch.from_numpy(x_np[np.newaxis, :, np.newaxis])    <span class="comment"># shape (batch, time_step, input_size)</span></span><br><span class="line">    y = torch.from_numpy(y_np[np.newaxis, :, np.newaxis])</span><br><span class="line"></span><br><span class="line">    prediction, h_state = rnn(x, h_state)   <span class="comment"># rnn output</span></span><br><span class="line">    <span class="comment"># !! next step is important !!</span></span><br><span class="line">    h_state = h_state.data        <span class="comment"># repack the hidden state, break the connection from last iteration</span></span><br><span class="line"></span><br><span class="line">    loss = loss_func(prediction, y)         <span class="comment"># calculate loss</span></span><br><span class="line">    optimizer.zero_grad()                   <span class="comment"># clear gradients for this training step</span></span><br><span class="line">    loss.backward()                         <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">    optimizer.step()                        <span class="comment"># apply gradients</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># plotting</span></span><br><span class="line">    plt.plot(steps, y_np.flatten(), <span class="string">&#x27;r-&#x27;</span>)</span><br><span class="line">    plt.plot(steps, prediction.data.numpy().flatten(), <span class="string">&#x27;b-&#x27;</span>)</span><br><span class="line">    plt.draw(); plt.pause(<span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch08-RNN(å¾ªç¯ç¥ç»ç½‘ç»œ-æ‰‹å†™æ•°å­—åˆ†ç±»)</title>
    <link href="/2022/04/04/pytorch08-rnn%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E5%88%86%E7%B1%BB/"/>
    <url>/2022/04/04/pytorch08-rnn%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E5%88%86%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/RNN-classification/">RNN å¾ªç¯ç¥ç»ç½‘ç»œ (åˆ†ç±») - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>å¾ªç¯ç¥ç»ç½‘ç»œè®©ç¥ç»ç½‘ç»œæœ‰äº†è®°å¿†, å¯¹äºåºåˆ—åŒ–çš„æ•°æ®,å¾ªç¯ç¥ç»ç½‘ç»œèƒ½è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚</p><h2 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision.datasets <span class="keyword">as</span> dsets</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># reproducible</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper Parameters</span></span><br><span class="line">EPOCH = <span class="number">1</span>           <span class="comment"># è®­ç»ƒæ•´æ‰¹æ•°æ®å¤šå°‘æ¬¡, ä¸ºäº†èŠ‚çº¦æ—¶é—´, æˆ‘ä»¬åªè®­ç»ƒä¸€æ¬¡</span></span><br><span class="line">BATCH_SIZE = <span class="number">64</span></span><br><span class="line">TIME_STEP = <span class="number">28</span>      <span class="comment"># rnn æ—¶é—´æ­¥æ•° / å›¾ç‰‡é«˜åº¦</span></span><br><span class="line">INPUT_SIZE = <span class="number">28</span>     <span class="comment"># rnn æ¯æ­¥è¾“å…¥å€¼ / å›¾ç‰‡æ¯è¡Œåƒç´ </span></span><br><span class="line">LR = <span class="number">0.01</span>           <span class="comment"># learning rate</span></span><br><span class="line">DOWNLOAD_MNIST = <span class="literal">True</span>  <span class="comment"># å¦‚æœä½ å·²ç»ä¸‹è½½å¥½äº†mnistæ•°æ®å°±å†™ä¸Š Fasle</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mnist æ‰‹å†™æ•°å­—</span></span><br><span class="line">train_data = torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&#x27;./mnist/&#x27;</span>,    <span class="comment"># ä¿å­˜æˆ–è€…æå–ä½ç½®</span></span><br><span class="line">    train=<span class="literal">True</span>,  <span class="comment"># this is training data</span></span><br><span class="line">    transform=torchvision.transforms.ToTensor(),    <span class="comment"># è½¬æ¢ PIL.Image or numpy.ndarray æˆ</span></span><br><span class="line">                                                    <span class="comment"># torch.FloatTensor (C x H x W), è®­ç»ƒçš„æ—¶å€™ normalize æˆ [0.0, 1.0] åŒºé—´</span></span><br><span class="line">    download=DOWNLOAD_MNIST,          <span class="comment"># æ²¡ä¸‹è½½å°±ä¸‹è½½, ä¸‹è½½äº†å°±ä¸ç”¨å†ä¸‹äº†</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ•°æ®é›†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">test_data = torchvision.datasets.MNIST(root=<span class="string">&#x27;./mnist/&#x27;</span>, train=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¹è®­ç»ƒ 50samples, 1 channel, 28x28 (50, 1, 28, 28)</span></span><br><span class="line">train_loader = Data.DataLoader(dataset=train_data, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†èŠ‚çº¦æ—¶é—´, æˆ‘ä»¬æµ‹è¯•æ—¶åªæµ‹è¯•å‰2000ä¸ª</span></span><br><span class="line">test_x = torch.unsqueeze(test_data.test_data, dim=<span class="number">1</span>).<span class="built_in">type</span>(torch.FloatTensor)[:<span class="number">2000</span>]/<span class="number">255.</span>   <span class="comment"># shape from (2000, 28, 28) to (2000, 1, 28, 28), value in range(0,1)</span></span><br><span class="line">test_y = test_data.test_labels[:<span class="number">2000</span>]</span><br></pre></td></tr></table></figure><h2 id="RNNç½‘ç»œ"><a href="#RNNç½‘ç»œ" class="headerlink" title="RNNç½‘ç»œ"></a>RNNç½‘ç»œ</h2><ol><li><code>(input0, state0)</code>Â -&gt;Â <code>LSTM</code>Â -&gt;Â <code>(output0, state1)</code>;</li><li><code>(input1, state1)</code>Â -&gt;Â <code>LSTM</code>Â -&gt;Â <code>(output1, state2)</code>;</li><li>â€¦</li><li><code>(inputN, stateN)</code>-&gt;Â <code>LSTM</code>Â -&gt;Â <code>(outputN, stateN+1)</code>;</li><li><code>outputN</code>Â -&gt;Â <code>Linear</code>Â -&gt;Â <code>prediction</code>. é€šè¿‡ <code>LSTM</code>åˆ†ææ¯ä¸€æ—¶åˆ»çš„å€¼, å¹¶ä¸”å°†è¿™ä¸€æ—¶åˆ»å’Œå‰é¢æ—¶åˆ»çš„ç†è§£åˆå¹¶åœ¨ä¸€èµ·, ç”Ÿæˆå½“å‰æ—¶åˆ»å¯¹å‰é¢æ•°æ®çš„ç†è§£æˆ–è®°å¿†. ä¼ é€’è¿™ç§ç†è§£ç»™ä¸‹ä¸€æ—¶åˆ»åˆ†æ.</li></ol><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(RNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.rnn = nn.LSTM(     <span class="comment"># LSTM æ•ˆæœè¦æ¯” nn.RNN() å¥½å¤šäº†</span></span><br><span class="line">            input_size=<span class="number">28</span>,      <span class="comment"># å›¾ç‰‡æ¯è¡Œçš„æ•°æ®åƒç´ ç‚¹</span></span><br><span class="line">            hidden_size=<span class="number">64</span>,     <span class="comment"># rnn hidden unit</span></span><br><span class="line">            num_layers=<span class="number">1</span>,       <span class="comment"># æœ‰å‡ å±‚ RNN layers</span></span><br><span class="line">            batch_first=<span class="literal">True</span>,   <span class="comment"># input &amp; output ä¼šæ˜¯ä»¥ batch size ä¸ºç¬¬ä¸€ç»´åº¦çš„ç‰¹å¾é›† e.g. (batch, time_step, input_size)</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">64</span>, <span class="number">10</span>)    <span class="comment"># è¾“å‡ºå±‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># x shape (batch, time_step, input_size)</span></span><br><span class="line">        <span class="comment"># r_out shape (batch, time_step, output_size)</span></span><br><span class="line">        <span class="comment"># h_n shape (n_layers, batch, hidden_size)   LSTM æœ‰ä¸¤ä¸ª hidden states, h_n æ˜¯åˆ†çº¿, h_c æ˜¯ä¸»çº¿</span></span><br><span class="line">        <span class="comment"># h_c shape (n_layers, batch, hidden_size)</span></span><br><span class="line">        r_out, (h_n, h_c) = <span class="variable language_">self</span>.rnn(x, <span class="literal">None</span>)   <span class="comment"># None è¡¨ç¤º hidden state ä¼šç”¨å…¨0çš„ state</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># é€‰å–æœ€åä¸€ä¸ªæ—¶é—´ç‚¹çš„ r_out è¾“å‡º</span></span><br><span class="line">        <span class="comment"># è¿™é‡Œ r_out[:, -1, :] çš„å€¼ä¹Ÿæ˜¯ h_n çš„å€¼</span></span><br><span class="line">        out = <span class="variable language_">self</span>.out(r_out[:, -<span class="number">1</span>, :])</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line">rnn = RNN()</span><br><span class="line"><span class="built_in">print</span>(rnn)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">RNN (</span></span><br><span class="line"><span class="string">  (rnn): LSTM(28, 64, batch_first=True)</span></span><br><span class="line"><span class="string">  (out): Linear (64 -&gt; 10)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.Adam(rnn.parameters(), lr=LR)   <span class="comment"># optimize all parameters</span></span><br><span class="line">loss_func = nn.CrossEntropyLoss()   <span class="comment"># the target label is not one-hotted</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># training and testing</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">    <span class="keyword">for</span> step, (x, b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):   <span class="comment"># gives batch data</span></span><br><span class="line">        b_x = x.view(-<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)   <span class="comment"># reshape x to (batch, time_step, input_size)</span></span><br><span class="line"></span><br><span class="line">        output = rnn(b_x)               <span class="comment"># rnn output</span></span><br><span class="line">        loss = loss_func(output, b_y)   <span class="comment"># cross entropy loss</span></span><br><span class="line">        optimizer.zero_grad()           <span class="comment"># clear gradients for this training step</span></span><br><span class="line">        loss.backward()                 <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">        optimizer.step()                <span class="comment"># apply gradients</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0945  test accuracy: 0.94</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0984  test accuracy: 0.94</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0332  test accuracy: 0.95</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.1868  test accuracy: 0.96</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## é¢„æµ‹</span></span><br><span class="line"></span><br><span class="line">test_output = rnn(test_x[:<span class="number">10</span>].view(-<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br><span class="line">pred_y = torch.<span class="built_in">max</span>(test_output, <span class="number">1</span>)[<span class="number">1</span>].data.numpy().squeeze()</span><br><span class="line"><span class="built_in">print</span>(pred_y, <span class="string">&#x27;prediction number&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(test_y[:<span class="number">10</span>], <span class="string">&#x27;real number&#x27;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[7 2 1 0 4 1 4 9 5 9] prediction number</span></span><br><span class="line"><span class="string">[7 2 1 0 4 1 4 9 5 9] real number</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision.datasets <span class="keyword">as</span> dsets</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.manual_seed(1)    # reproducible</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper Parameters</span></span><br><span class="line">EPOCH = <span class="number">1</span>               <span class="comment"># train the training data n times, to save time, we just train 1 epoch</span></span><br><span class="line">BATCH_SIZE = <span class="number">64</span></span><br><span class="line">TIME_STEP = <span class="number">28</span>          <span class="comment"># rnn time step / image height</span></span><br><span class="line">INPUT_SIZE = <span class="number">28</span>         <span class="comment"># rnn input size / image width</span></span><br><span class="line">LR = <span class="number">0.01</span>               <span class="comment"># learning rate</span></span><br><span class="line">DOWNLOAD_MNIST = <span class="literal">True</span>   <span class="comment"># set to True if haven&#x27;t download the data</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mnist digital dataset</span></span><br><span class="line">train_data = dsets.MNIST(</span><br><span class="line">    root=<span class="string">&#x27;./mnist/&#x27;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,                         <span class="comment"># this is training data</span></span><br><span class="line">    transform=transforms.ToTensor(),    <span class="comment"># Converts a PIL.Image or numpy.ndarray to</span></span><br><span class="line">                                        <span class="comment"># torch.FloatTensor of shape (C x H x W) and normalize in the range [0.0, 1.0]</span></span><br><span class="line">    download=DOWNLOAD_MNIST,            <span class="comment"># download it if you don&#x27;t have it</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot one example</span></span><br><span class="line"><span class="comment"># print(train_data.train_data.size())     # (60000, 28, 28)</span></span><br><span class="line"><span class="comment"># print(train_data.train_labels.size())   # (60000)</span></span><br><span class="line"><span class="comment"># plt.imshow(train_data.train_data[0].numpy(), cmap=&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;%i&#x27; % train_data.train_labels[0])</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Data Loader for easy mini-batch return in training</span></span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_data, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># convert test data into Variable, pick 2000 samples to speed up testing</span></span><br><span class="line">test_data = dsets.MNIST(root=<span class="string">&#x27;./mnist/&#x27;</span>, train=<span class="literal">False</span>, transform=transforms.ToTensor())</span><br><span class="line">test_x = test_data.test_data.<span class="built_in">type</span>(torch.FloatTensor)[:<span class="number">1000</span>]/<span class="number">255.</span>   <span class="comment"># shape (2000, 28, 28) value in range(0,1)</span></span><br><span class="line">test_y = test_data.test_labels.numpy()[:<span class="number">1000</span>]    <span class="comment"># covert to numpy array</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(RNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.rnn = nn.LSTM(         <span class="comment"># if use nn.RNN(), it hardly learns</span></span><br><span class="line">            input_size=INPUT_SIZE,</span><br><span class="line">            hidden_size=<span class="number">64</span>,         <span class="comment"># rnn hidden unit</span></span><br><span class="line">            num_layers=<span class="number">1</span>,           <span class="comment"># number of rnn layer</span></span><br><span class="line">            batch_first=<span class="literal">True</span>,       <span class="comment"># input &amp; output will has batch size as 1s dimension. e.g. (batch, time_step, input_size)</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">64</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># x shape (batch, time_step, input_size)</span></span><br><span class="line">        <span class="comment"># r_out shape (batch, time_step, output_size)</span></span><br><span class="line">        <span class="comment"># h_n shape (n_layers, batch, hidden_size)</span></span><br><span class="line">        <span class="comment"># h_c shape (n_layers, batch, hidden_size)</span></span><br><span class="line">        r_out, (h_n, h_c) = <span class="variable language_">self</span>.rnn(x, <span class="literal">None</span>)   <span class="comment"># None represents zero initial hidden state</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># choose r_out at the last time step</span></span><br><span class="line">        out = <span class="variable language_">self</span>.out(r_out[:, -<span class="number">1</span>, :])</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rnn = RNN()</span><br><span class="line"><span class="built_in">print</span>(rnn)</span><br><span class="line"></span><br><span class="line">optimizer = torch.optim.Adam(rnn.parameters(), lr=LR)   <span class="comment"># optimize all cnn parameters</span></span><br><span class="line">loss_func = nn.CrossEntropyLoss()                       <span class="comment"># the target label is not one-hotted</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># training and testing</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">    <span class="keyword">for</span> step, (b_x, b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):        <span class="comment"># gives batch data</span></span><br><span class="line">        b_x = b_x.view(-<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>)              <span class="comment"># reshape x to (batch, time_step, input_size)</span></span><br><span class="line"></span><br><span class="line">        output = rnn(b_x)                               <span class="comment"># rnn output</span></span><br><span class="line">        loss = loss_func(output, b_y)                   <span class="comment"># cross entropy loss</span></span><br><span class="line">        optimizer.zero_grad()                           <span class="comment"># clear gradients for this training step</span></span><br><span class="line">        loss.backward()                                 <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">        optimizer.step()                                <span class="comment"># apply gradients</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> step % <span class="number">50</span> == <span class="number">0</span>:</span><br><span class="line">            test_output = rnn(test_x)                   <span class="comment"># (samples, time_step, input_size)</span></span><br><span class="line">            pred_y = torch.<span class="built_in">max</span>(test_output, <span class="number">1</span>)[<span class="number">1</span>].data.numpy()</span><br><span class="line">            accuracy = <span class="built_in">float</span>((pred_y == test_y).astype(<span class="built_in">int</span>).<span class="built_in">sum</span>()) / <span class="built_in">float</span>(test_y.size)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Epoch: &#x27;</span>, epoch, <span class="string">&#x27; train loss: %.4f&#x27;</span> % loss.data.numpy(), <span class="string">&#x27; test accuracy: %.2f&#x27;</span> % accuracy)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print 10 predictions from test data</span></span><br><span class="line">test_output = rnn(test_x[:<span class="number">10</span>].view(-<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>))</span><br><span class="line">pred_y = torch.<span class="built_in">max</span>(test_output, <span class="number">1</span>)[<span class="number">1</span>].data.numpy()</span><br><span class="line"><span class="built_in">print</span>(pred_y, <span class="string">&#x27;prediction number&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(test_y[:<span class="number">10</span>], <span class="string">&#x27;real number&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch07-CNN(å·ç§¯ç¥ç»ç½‘ç»œæ‰‹å†™æ•°å­—è¯†åˆ«)</title>
    <link href="/2022/04/04/pytorch07-cnn%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/"/>
    <url>/2022/04/04/pytorch07-cnn%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡:<a href="https://mofanpy.com/tutorials/machine-learning/torch/CNN/">CNN å·ç§¯ç¥ç»ç½‘ç»œ - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-1-2.gif"></p><h2 id="ä¸‹è½½æ•°æ®é›†"><a href="#ä¸‹è½½æ•°æ®é›†" class="headerlink" title="ä¸‹è½½æ•°æ®é›†"></a>ä¸‹è½½æ•°æ®é›†</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> torchvision      <span class="comment"># æ•°æ®åº“æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># reproducible</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper Parameters</span></span><br><span class="line">EPOCH = <span class="number">1</span>           <span class="comment"># è®­ç»ƒæ•´æ‰¹æ•°æ®å¤šå°‘æ¬¡, ä¸ºäº†èŠ‚çº¦æ—¶é—´, æˆ‘ä»¬åªè®­ç»ƒä¸€æ¬¡</span></span><br><span class="line">BATCH_SIZE = <span class="number">50</span></span><br><span class="line">LR = <span class="number">0.001</span>          <span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">DOWNLOAD_MNIST = <span class="literal">True</span>  <span class="comment"># å¦‚æœä½ å·²ç»ä¸‹è½½å¥½äº†mnistæ•°æ®å°±å†™ä¸Š False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mnist æ‰‹å†™æ•°å­—</span></span><br><span class="line">train_data = torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&#x27;./mnist/&#x27;</span>,    <span class="comment"># ä¿å­˜æˆ–è€…æå–ä½ç½®</span></span><br><span class="line">    train=<span class="literal">True</span>,  <span class="comment"># this is training data</span></span><br><span class="line">    transform=torchvision.transforms.ToTensor(),    <span class="comment"># è½¬æ¢ PIL.Image or numpy.ndarray æˆ</span></span><br><span class="line">                                                    <span class="comment"># torch.FloatTensor (C x H x W), è®­ç»ƒçš„æ—¶å€™ normalize æˆ [0.0, 1.0] åŒºé—´</span></span><br><span class="line">    download=DOWNLOAD_MNIST,          <span class="comment"># æ²¡ä¸‹è½½å°±ä¸‹è½½, ä¸‹è½½äº†å°±ä¸ç”¨å†ä¸‹äº†</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/4-1-1.png"></p><p>æµ‹è¯•æ•°æ®</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">test_data = torchvision.datasets.MNIST(root=<span class="string">&#x27;./mnist/&#x27;</span>, train=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¹è®­ç»ƒ 50samples, 1 channel, 28x28 (50, 1, 28, 28)</span></span><br><span class="line">train_loader = Data.DataLoader(dataset=train_data, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†èŠ‚çº¦æ—¶é—´, æˆ‘ä»¬æµ‹è¯•æ—¶åªæµ‹è¯•å‰2000ä¸ª</span></span><br><span class="line">test_x = torch.unsqueeze(test_data.test_data, dim=<span class="number">1</span>).<span class="built_in">type</span>(torch.FloatTensor)[:<span class="number">2000</span>]/<span class="number">255.</span>   <span class="comment"># shape from (2000, 28, 28) to (2000, 1, 28, 28), value in range(0,1)</span></span><br><span class="line">test_y = test_data.test_labels[:<span class="number">2000</span>]</span><br></pre></td></tr></table></figure><h2 id="æ­å»ºCNNç½‘ç»œ"><a href="#æ­å»ºCNNç½‘ç»œ" class="headerlink" title="æ­å»ºCNNç½‘ç»œ"></a>æ­å»ºCNNç½‘ç»œ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(CNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Sequential(  <span class="comment"># input shape (1, 28, 28)</span></span><br><span class="line">            nn.Conv2d(</span><br><span class="line">                in_channels=<span class="number">1</span>,      <span class="comment"># input height</span></span><br><span class="line">                out_channels=<span class="number">16</span>,    <span class="comment"># n_filters</span></span><br><span class="line">                kernel_size=<span class="number">5</span>,      <span class="comment"># filter size</span></span><br><span class="line">                stride=<span class="number">1</span>,           <span class="comment"># filter movement/step</span></span><br><span class="line">                padding=<span class="number">2</span>,      <span class="comment"># å¦‚æœæƒ³è¦ con2d å‡ºæ¥çš„å›¾ç‰‡é•¿å®½æ²¡æœ‰å˜åŒ–, padding=(kernel_size-1)/2 å½“ stride=1</span></span><br><span class="line">            ),      <span class="comment"># output shape (16, 28, 28)</span></span><br><span class="line">            nn.ReLU(),    <span class="comment"># activation</span></span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>),    <span class="comment"># åœ¨ 2x2 ç©ºé—´é‡Œå‘ä¸‹é‡‡æ ·, output shape (16, 14, 14)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.conv2 = nn.Sequential(  <span class="comment"># input shape (16, 14, 14)</span></span><br><span class="line">            nn.Conv2d(<span class="number">16</span>, <span class="number">32</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>),  <span class="comment"># output shape (32, 14, 14)</span></span><br><span class="line">            nn.ReLU(),  <span class="comment"># activation</span></span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>),  <span class="comment"># output shape (32, 7, 7)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">32</span> * <span class="number">7</span> * <span class="number">7</span>, <span class="number">10</span>)   <span class="comment"># fully connected layer, output 10 classes</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.conv2(x)</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)   <span class="comment"># å±•å¹³å¤šç»´çš„å·ç§¯å›¾æˆ (batch_size, 32 * 7 * 7)</span></span><br><span class="line">        output = <span class="variable language_">self</span>.out(x)</span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line">cnn = CNN()</span><br><span class="line"><span class="built_in">print</span>(cnn)  <span class="comment"># net architecture</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">CNN (</span></span><br><span class="line"><span class="string">  (conv1): Sequential (</span></span><br><span class="line"><span class="string">    (0): Conv2d(1, 16, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))</span></span><br><span class="line"><span class="string">    (1): ReLU ()</span></span><br><span class="line"><span class="string">    (2): MaxPool2d (size=(2, 2), stride=(2, 2), dilation=(1, 1))</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (conv2): Sequential (</span></span><br><span class="line"><span class="string">    (0): Conv2d(16, 32, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))</span></span><br><span class="line"><span class="string">    (1): ReLU ()</span></span><br><span class="line"><span class="string">    (2): MaxPool2d (size=(2, 2), stride=(2, 2), dilation=(1, 1))</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  (out): Linear (1568 -&gt; 10)</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.Adam(cnn.parameters(), lr=LR)   <span class="comment"># optimize all cnn parameters</span></span><br><span class="line">loss_func = nn.CrossEntropyLoss()   <span class="comment"># the target label is not one-hotted</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># training and testing</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">    <span class="keyword">for</span> step, (b_x, b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):   <span class="comment"># åˆ†é… batch data, normalize x when iterate train_loader</span></span><br><span class="line">        output = cnn(b_x)               <span class="comment"># cnn output</span></span><br><span class="line">        loss = loss_func(output, b_y)   <span class="comment"># cross entropy loss</span></span><br><span class="line">        optimizer.zero_grad()           <span class="comment"># clear gradients for this training step</span></span><br><span class="line">        loss.backward()                 <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">        optimizer.step()                <span class="comment"># apply gradients</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0306  test accuracy: 0.97</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0147  test accuracy: 0.98</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0427  test accuracy: 0.98</span></span><br><span class="line"><span class="string">Epoch:  0  train loss: 0.0078  test accuracy: 0.98</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># third-party library</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># torch.manual_seed(1)    # reproducible</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper Parameters</span></span><br><span class="line">EPOCH = <span class="number">1</span>               <span class="comment"># train the training data n times, to save time, we just train 1 epoch</span></span><br><span class="line">BATCH_SIZE = <span class="number">50</span></span><br><span class="line">LR = <span class="number">0.001</span>              <span class="comment"># learning rate</span></span><br><span class="line">DOWNLOAD_MNIST = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mnist digits dataset</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span>(os.path.exists(<span class="string">&#x27;./mnist/&#x27;</span>)) <span class="keyword">or</span> <span class="keyword">not</span> os.listdir(<span class="string">&#x27;./mnist/&#x27;</span>):</span><br><span class="line">    <span class="comment"># not mnist dir or mnist is empyt dir</span></span><br><span class="line">    DOWNLOAD_MNIST = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">train_data = torchvision.datasets.MNIST(</span><br><span class="line">    root=<span class="string">&#x27;./mnist/&#x27;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,                                     <span class="comment"># this is training data</span></span><br><span class="line">    transform=torchvision.transforms.ToTensor(),    <span class="comment"># Converts a PIL.Image or numpy.ndarray to</span></span><br><span class="line">                                                    <span class="comment"># torch.FloatTensor of shape (C x H x W) and normalize in the range [0.0, 1.0]</span></span><br><span class="line">    download=DOWNLOAD_MNIST,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot one example</span></span><br><span class="line"><span class="built_in">print</span>(train_data.train_data.size())                 <span class="comment"># (60000, 28, 28)</span></span><br><span class="line"><span class="built_in">print</span>(train_data.train_labels.size())               <span class="comment"># (60000)</span></span><br><span class="line"><span class="comment"># plt.imshow(train_data.train_data[0].numpy(), cmap=&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;%i&#x27; % train_data.train_labels[0])</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Data Loader for easy mini-batch return in training, the image batch shape will be (50, 1, 28, 28)</span></span><br><span class="line">train_loader = Data.DataLoader(dataset=train_data, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pick 2000 samples to speed up testing</span></span><br><span class="line">test_data = torchvision.datasets.MNIST(root=<span class="string">&#x27;./mnist/&#x27;</span>, train=<span class="literal">False</span>)</span><br><span class="line">test_x = torch.unsqueeze(test_data.test_data, dim=<span class="number">1</span>).<span class="built_in">type</span>(torch.FloatTensor)[:<span class="number">1000</span>]/<span class="number">255.</span>   <span class="comment"># shape from (2000, 28, 28) to (2000, 1, 28, 28), value in range(0,1)</span></span><br><span class="line">test_y = test_data.test_labels[:<span class="number">1000</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CNN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(CNN, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Sequential(         <span class="comment"># input shape (1, 28, 28)</span></span><br><span class="line">            nn.Conv2d(</span><br><span class="line">                in_channels=<span class="number">1</span>,              <span class="comment"># input height</span></span><br><span class="line">                out_channels=<span class="number">16</span>,            <span class="comment"># n_filters</span></span><br><span class="line">                kernel_size=<span class="number">5</span>,              <span class="comment"># filter size</span></span><br><span class="line">                stride=<span class="number">1</span>,                   <span class="comment"># filter movement/step</span></span><br><span class="line">                padding=<span class="number">2</span>,                  <span class="comment"># if want same width and length of this image after Conv2d, padding=(kernel_size-1)/2 if stride=1</span></span><br><span class="line">            ),                              <span class="comment"># output shape (16, 28, 28)</span></span><br><span class="line">            nn.ReLU(),                      <span class="comment"># activation</span></span><br><span class="line">            nn.MaxPool2d(kernel_size=<span class="number">2</span>),    <span class="comment"># choose max value in 2x2 area, output shape (16, 14, 14)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.conv2 = nn.Sequential(         <span class="comment"># input shape (16, 14, 14)</span></span><br><span class="line">            nn.Conv2d(<span class="number">16</span>, <span class="number">32</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>),     <span class="comment"># output shape (32, 14, 14)</span></span><br><span class="line">            nn.ReLU(),                      <span class="comment"># activation</span></span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>),                <span class="comment"># output shape (32, 7, 7)</span></span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.out = nn.Linear(<span class="number">32</span> * <span class="number">7</span> * <span class="number">7</span>, <span class="number">10</span>)   <span class="comment"># fully connected layer, output 10 classes</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        x = <span class="variable language_">self</span>.conv2(x)</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)           <span class="comment"># flatten the output of conv2 to (batch_size, 32 * 7 * 7)</span></span><br><span class="line">        output = <span class="variable language_">self</span>.out(x)</span><br><span class="line">        <span class="keyword">return</span> output, x    <span class="comment"># return x for visualization</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cnn = CNN()</span><br><span class="line"><span class="built_in">print</span>(cnn)  <span class="comment"># net architecture</span></span><br><span class="line"></span><br><span class="line">optimizer = torch.optim.Adam(cnn.parameters(), lr=LR)   <span class="comment"># optimize all cnn parameters</span></span><br><span class="line">loss_func = nn.CrossEntropyLoss()                       <span class="comment"># the target label is not one-hotted</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># following function (plot_with_labels) is for visualization, can be ignored if not interested</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br><span class="line"><span class="keyword">try</span>: <span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE; HAS_SK = <span class="literal">True</span></span><br><span class="line"><span class="keyword">except</span>: HAS_SK = <span class="literal">False</span>; <span class="built_in">print</span>(<span class="string">&#x27;Please install sklearn for layer visualization&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_with_labels</span>(<span class="params">lowDWeights, labels</span>):</span><br><span class="line">    plt.cla()</span><br><span class="line">    X, Y = lowDWeights[:, <span class="number">0</span>], lowDWeights[:, <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> x, y, s <span class="keyword">in</span> <span class="built_in">zip</span>(X, Y, labels):</span><br><span class="line">        c = cm.rainbow(<span class="built_in">int</span>(<span class="number">255</span> * s / <span class="number">9</span>)); plt.text(x, y, s, backgroundcolor=c, fontsize=<span class="number">9</span>)</span><br><span class="line">    plt.xlim(X.<span class="built_in">min</span>(), X.<span class="built_in">max</span>()); plt.ylim(Y.<span class="built_in">min</span>(), Y.<span class="built_in">max</span>()); plt.title(<span class="string">&#x27;Visualize last layer&#x27;</span>); plt.show(); plt.pause(<span class="number">0.01</span>)</span><br><span class="line"></span><br><span class="line">plt.ion()</span><br><span class="line"><span class="comment"># training and testing</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">    <span class="keyword">for</span> step, (b_x, b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):   <span class="comment"># gives batch data, normalize x when iterate train_loader</span></span><br><span class="line"></span><br><span class="line">        output = cnn(b_x)[<span class="number">0</span>]               <span class="comment"># cnn output</span></span><br><span class="line">        loss = loss_func(output, b_y)   <span class="comment"># cross entropy loss</span></span><br><span class="line">        optimizer.zero_grad()           <span class="comment"># clear gradients for this training step</span></span><br><span class="line">        loss.backward()                 <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">        optimizer.step()                <span class="comment"># apply gradients</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> step % <span class="number">50</span> == <span class="number">0</span>:</span><br><span class="line">            test_output, last_layer = cnn(test_x)</span><br><span class="line">            pred_y = torch.<span class="built_in">max</span>(test_output, <span class="number">1</span>)[<span class="number">1</span>].data.numpy()</span><br><span class="line">            accuracy = <span class="built_in">float</span>((pred_y == test_y.data.numpy()).astype(<span class="built_in">int</span>).<span class="built_in">sum</span>()) / <span class="built_in">float</span>(test_y.size(<span class="number">0</span>))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Epoch: &#x27;</span>, epoch, <span class="string">&#x27; train loss: %.4f&#x27;</span> % loss.data.numpy(), <span class="string">&#x27; test accuracy: %.2f&#x27;</span> % accuracy)</span><br><span class="line">            <span class="keyword">if</span> HAS_SK:</span><br><span class="line">                <span class="comment"># Visualization of trained flatten layer (T-SNE)</span></span><br><span class="line">                tsne = TSNE(perplexity=<span class="number">30</span>, n_components=<span class="number">2</span>, init=<span class="string">&#x27;pca&#x27;</span>, n_iter=<span class="number">5000</span>)</span><br><span class="line">                plot_only = <span class="number">500</span></span><br><span class="line">                low_dim_embs = tsne.fit_transform(last_layer.data.numpy()[:plot_only, :])</span><br><span class="line">                labels = test_y.numpy()[:plot_only]</span><br><span class="line">                plot_with_labels(low_dim_embs, labels)</span><br><span class="line">plt.ioff()</span><br><span class="line"></span><br><span class="line"><span class="comment"># print 10 predictions from test data</span></span><br><span class="line">test_output, _ = cnn(test_x[:<span class="number">10</span>])</span><br><span class="line">pred_y = torch.<span class="built_in">max</span>(test_output, <span class="number">1</span>)[<span class="number">1</span>].data.numpy()</span><br><span class="line"><span class="built_in">print</span>(pred_y, <span class="string">&#x27;prediction number&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(test_y[:<span class="number">10</span>].numpy(), <span class="string">&#x27;real number&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch06-ä¼˜åŒ–å™¨(Optimizer)</title>
    <link href="/2022/04/03/pytorch06-%E4%BC%98%E5%8C%96%E5%99%A8optimizer/"/>
    <url>/2022/04/03/pytorch06-%E4%BC%98%E5%8C%96%E5%99%A8optimizer/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/optimizer/">Optimizer ä¼˜åŒ–å™¨ - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>é‡‡ç”¨ä¸åŒçš„ä¼˜åŒ–ç®—æ³•ï¼Œç½‘ç»œæ¨¡å‹æ”¶æ•›çš„æ•ˆæœæ˜¯ä¸åŒçš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/3-6-2.png"></p><h2 id="æ¯”è¾ƒä¼˜åŒ–å™¨é‡‡ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ•ˆæœ"><a href="#æ¯”è¾ƒä¼˜åŒ–å™¨é‡‡ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ•ˆæœ" class="headerlink" title="æ¯”è¾ƒä¼˜åŒ–å™¨é‡‡ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ•ˆæœ"></a>æ¯”è¾ƒä¼˜åŒ–å™¨é‡‡ç”¨ä¸åŒä¼˜åŒ–ç®—æ³•çš„æ•ˆæœ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">LR = <span class="number">0.01</span></span><br><span class="line">BATCH_SIZE = <span class="number">32</span></span><br><span class="line">EPOCH = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># fake dataset</span></span><br><span class="line">x = torch.unsqueeze(torch.linspace(-<span class="number">1</span>, <span class="number">1</span>, <span class="number">1000</span>), dim=<span class="number">1</span>)</span><br><span class="line">y = x.<span class="built_in">pow</span>(<span class="number">2</span>) + <span class="number">0.1</span>*torch.normal(torch.zeros(*x.size()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot dataset</span></span><br><span class="line"><span class="comment"># plt.scatter(x.numpy(), y.numpy())</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># put dateset into torch dataset</span></span><br><span class="line">torch_dataset = Data.TensorDataset(x, y)</span><br><span class="line">loader = Data.DataLoader(dataset=torch_dataset, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>, num_workers=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># default network</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(<span class="number">1</span>, <span class="number">20</span>)   <span class="comment"># hidden layer</span></span><br><span class="line">        <span class="variable language_">self</span>.predict = torch.nn.Linear(<span class="number">20</span>, <span class="number">1</span>)   <span class="comment"># output layer</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.hidden(x))      <span class="comment"># activation function for hidden layer</span></span><br><span class="line">        x = <span class="variable language_">self</span>.predict(x)             <span class="comment"># linear output</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># different nets</span></span><br><span class="line">    net_SGD         = Net()</span><br><span class="line">    net_Momentum    = Net()</span><br><span class="line">    net_RMSprop     = Net()</span><br><span class="line">    net_Adam        = Net()</span><br><span class="line">    nets = [net_SGD, net_Momentum, net_RMSprop, net_Adam]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># different optimizers</span></span><br><span class="line">    opt_SGD         = torch.optim.SGD(net_SGD.parameters(), lr=LR)</span><br><span class="line">    opt_Momentum    = torch.optim.SGD(net_Momentum.parameters(), lr=LR, momentum=<span class="number">0.8</span>)</span><br><span class="line">    opt_RMSprop     = torch.optim.RMSprop(net_RMSprop.parameters(), lr=LR, alpha=<span class="number">0.9</span>)</span><br><span class="line">    opt_Adam        = torch.optim.Adam(net_Adam.parameters(), lr=LR, betas=(<span class="number">0.9</span>, <span class="number">0.99</span>))</span><br><span class="line">    optimizers = [opt_SGD, opt_Momentum, opt_RMSprop, opt_Adam]</span><br><span class="line"></span><br><span class="line">    loss_func = torch.nn.MSELoss()</span><br><span class="line">    losses_his = [[], [], [], []]   <span class="comment"># record loss</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># training</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Epoch: &#x27;</span>, epoch)</span><br><span class="line">        <span class="keyword">for</span> step, (b_x, b_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(loader):          <span class="comment"># for each training step</span></span><br><span class="line">            <span class="keyword">for</span> net, opt, l_his <span class="keyword">in</span> <span class="built_in">zip</span>(nets, optimizers, losses_his):</span><br><span class="line">                output = net(b_x)              <span class="comment"># get output for every net</span></span><br><span class="line">                loss = loss_func(output, b_y)  <span class="comment"># compute loss for every net</span></span><br><span class="line">                opt.zero_grad()                <span class="comment"># clear gradients for next train</span></span><br><span class="line">                loss.backward()                <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">                opt.step()                     <span class="comment"># apply gradients</span></span><br><span class="line">                l_his.append(loss.item())     <span class="comment"># loss recoder</span></span><br><span class="line"></span><br><span class="line">    labels = [<span class="string">&#x27;SGD&#x27;</span>, <span class="string">&#x27;Momentum&#x27;</span>, <span class="string">&#x27;RMSprop&#x27;</span>, <span class="string">&#x27;Adam&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> i, l_his <span class="keyword">in</span> <span class="built_in">enumerate</span>(losses_his):</span><br><span class="line">        plt.plot(l_his, label=labels[i])</span><br><span class="line">        <span class="built_in">print</span>(l_his)</span><br><span class="line">    plt.legend(loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Steps&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Loss&#x27;</span>)</span><br><span class="line">    plt.ylim((<span class="number">0</span>, <span class="number">0.2</span>))</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>é€‰Adamã€‚</p>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch05-æ‰¹è®­ç»ƒ(Batch Training)</title>
    <link href="/2022/04/03/pytorch05-%E6%89%B9%E8%AE%AD%E7%BB%83batch-training/"/>
    <url>/2022/04/03/pytorch05-%E6%89%B9%E8%AE%AD%E7%BB%83batch-training/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/train-on-batch/">æ‰¹è®­ç»ƒ - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>å•ä¸ªæ•°æ®è®­ç»ƒå¤ªæ…¢ï¼Œä¸€æ‰¹ä¸€æ‰¹è®­ç»ƒä¼šåŠ å¿«è®­ç»ƒé€Ÿåº¦</p><h2 id="DataLoader"><a href="#DataLoader" class="headerlink" title="DataLoader"></a>DataLoader</h2><p>Torchæä¾›äº†DataLoaderæ¥å¸®åŠ©æ‰¹è®­ç»ƒ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># reproducible</span></span><br><span class="line"></span><br><span class="line">BATCH_SIZE = <span class="number">5</span>      <span class="comment"># æ‰¹è®­ç»ƒçš„æ•°æ®ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">x = torch.linspace(<span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)       <span class="comment"># x data (torch tensor)</span></span><br><span class="line">y = torch.linspace(<span class="number">10</span>, <span class="number">1</span>, <span class="number">10</span>)       <span class="comment"># y data (torch tensor)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆè½¬æ¢æˆ torch èƒ½è¯†åˆ«çš„ Dataset</span></span><br><span class="line">torch_dataset = Data.TensorDataset(data_tensor=x, target_tensor=y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠ dataset æ”¾å…¥ DataLoader</span></span><br><span class="line">loader = Data.DataLoader(</span><br><span class="line">    dataset=torch_dataset,      <span class="comment"># torch TensorDataset format</span></span><br><span class="line">    batch_size=BATCH_SIZE,      <span class="comment"># mini batch size</span></span><br><span class="line">    shuffle=<span class="literal">True</span>,               <span class="comment"># è¦ä¸è¦æ‰“ä¹±æ•°æ® (æ‰“ä¹±æ¯”è¾ƒå¥½)</span></span><br><span class="line">    num_workers=<span class="number">2</span>,              <span class="comment"># å¤šçº¿ç¨‹æ¥è¯»æ•°æ®</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):   <span class="comment"># è®­ç»ƒæ‰€æœ‰!æ•´å¥—!æ•°æ® 3 æ¬¡</span></span><br><span class="line">    <span class="keyword">for</span> step, (batch_x, batch_y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(loader):  <span class="comment"># æ¯ä¸€æ­¥ loader é‡Šæ”¾ä¸€å°æ‰¹æ•°æ®ç”¨æ¥å­¦ä¹ </span></span><br><span class="line">        <span class="comment"># å‡è®¾è¿™é‡Œå°±æ˜¯ä½ è®­ç»ƒçš„åœ°æ–¹...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‰“å‡ºæ¥ä¸€äº›æ•°æ®</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Epoch: &#x27;</span>, epoch, <span class="string">&#x27; Step: &#x27;</span>, step, <span class="string">&#x27; batch x: &#x27;</span>,</span><br><span class="line">              batch_x.numpy(), <span class="string">&#x27; batch y: &#x27;</span>, batch_y.numpy())</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Epoch:  0  Step:  0  batch x:  [ 6.  7.  2.  3.  1.]  batch y:  [  5.   4.   9.   8.  10.]</span></span><br><span class="line"><span class="string">Epoch:  0  Step:  1  batch x:  [  9.  10.   4.   8.   5.]  batch y:  [ 2.  1.  7.  3.  6.]</span></span><br><span class="line"><span class="string">Epoch:  1  Step:  0  batch x:  [  3.   4.   2.   9.  10.]  batch y:  [ 8.  7.  9.  2.  1.]</span></span><br><span class="line"><span class="string">Epoch:  1  Step:  1  batch x:  [ 1.  7.  8.  5.  6.]  batch y:  [ 10.   4.   3.   6.   5.]</span></span><br><span class="line"><span class="string">Epoch:  2  Step:  0  batch x:  [ 3.  9.  2.  6.  7.]  batch y:  [ 8.  2.  9.  5.  4.]</span></span><br><span class="line"><span class="string">Epoch:  2  Step:  1  batch x:  [ 10.   4.   8.   1.   5.]  batch y:  [  1.   7.   3.  10.   6.]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch04-ä¿å­˜æå–ç½‘ç»œæ¨¡å‹</title>
    <link href="/2022/04/03/pytorch04-%E4%BF%9D%E5%AD%98%E6%8F%90%E5%8F%96%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/"/>
    <url>/2022/04/03/pytorch04-%E4%BF%9D%E5%AD%98%E6%8F%90%E5%8F%96%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/save-reload/">ä¿å­˜æå– - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p>è®­ç»ƒå¥½ä¸€ä¸ªç½‘ç»œçš„å‚æ•°ä¹‹åï¼Œå¦‚æœæƒ³è¦ä¸‹æ¬¡ç›´æ¥ç”¨ï¼Œå°±éœ€è¦æŠŠç½‘ç»œæ¨¡å‹å‚æ•°ä¿å­˜ä¸‹æ¥ã€‚</p><h2 id="å¿«é€Ÿæ­å»ºç½‘ç»œå¹¶è®­ç»ƒï¼Œä¸¤ç§ä¿å­˜æ–¹æ³•"><a href="#å¿«é€Ÿæ­å»ºç½‘ç»œå¹¶è®­ç»ƒï¼Œä¸¤ç§ä¿å­˜æ–¹æ³•" class="headerlink" title="å¿«é€Ÿæ­å»ºç½‘ç»œå¹¶è®­ç»ƒï¼Œä¸¤ç§ä¿å­˜æ–¹æ³•"></a>å¿«é€Ÿæ­å»ºç½‘ç»œå¹¶è®­ç»ƒï¼Œä¸¤ç§ä¿å­˜æ–¹æ³•</h2><p>å°±æ˜¯ä¹‹å‰çš„å›å½’æ¨¡å‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x = torch.unsqueeze(torch.linspace(-<span class="number">1</span>, <span class="number">1</span>, <span class="number">100</span>), dim=<span class="number">1</span>)  <span class="comment"># x data (tensor), shape=(100, 1)</span></span><br><span class="line">y = x.<span class="built_in">pow</span>(<span class="number">2</span>) + <span class="number">0.2</span>*torch.rand(x.size())  <span class="comment"># noisy y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save</span>():</span><br><span class="line">    net1 = torch.nn.Sequential(</span><br><span class="line">        torch.nn.Linear(<span class="number">1</span>, <span class="number">10</span>),</span><br><span class="line">        torch.nn.ReLU(),</span><br><span class="line">        torch.nn.Linear(<span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line">    optimizer = torch.optim.SGD(net1.parameters(), lr=<span class="number">0.5</span>)</span><br><span class="line">    loss_func = torch.nn.MSELoss()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        prediction = net1(x)</span><br><span class="line">        loss = loss_func(prediction, y)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.figure(<span class="number">1</span>, figsize=(<span class="number">10</span>, <span class="number">3</span>))</span><br><span class="line">    plt.subplot(<span class="number">131</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net1&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2 ways to save the net</span></span><br><span class="line">    torch.save(net1, <span class="string">&#x27;net.pkl&#x27;</span>)  <span class="comment"># ä¿å­˜æ•´ä¸ªç½‘ç»œ</span></span><br><span class="line">    torch.save(net1.state_dict(), <span class="string">&#x27;net_params.pkl&#x27;</span>)   <span class="comment"># åªä¿å­˜å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯¹åº”ä¸¤ç§æå–æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">restore_net</span>():</span><br><span class="line">    <span class="comment"># restore entire net1 to net2</span></span><br><span class="line">    net2 = torch.load(<span class="string">&#x27;net.pkl&#x27;</span>)<span class="comment">#åŠ è½½æ•´ä¸ªç½‘ç»œ</span></span><br><span class="line">    prediction = net2(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.subplot(<span class="number">132</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net2&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">restore_params</span>():<span class="comment">#æ­å»ºç½‘ç»œï¼ŒåŠ è½½å‚æ•°</span></span><br><span class="line">    <span class="comment"># restore only the parameters in net1 to net3</span></span><br><span class="line">    net3 = torch.nn.Sequential(</span><br><span class="line">        torch.nn.Linear(<span class="number">1</span>, <span class="number">10</span>),</span><br><span class="line">        torch.nn.ReLU(),</span><br><span class="line">        torch.nn.Linear(<span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># copy net1&#x27;s parameters into net3</span></span><br><span class="line">    net3.load_state_dict(torch.load(<span class="string">&#x27;net_params.pkl&#x27;</span>))</span><br><span class="line">    prediction = net3(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.subplot(<span class="number">133</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net3&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">## æµ‹è¯•ä¸€ä¸‹æ•ˆæœ</span></span><br></pre></td></tr></table></figure><p>å®Œå…¨ä¸€è‡´</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/image-1024x340.png"></p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x = torch.unsqueeze(torch.linspace(-<span class="number">1</span>, <span class="number">1</span>, <span class="number">100</span>), dim=<span class="number">1</span>)  <span class="comment"># x data (tensor), shape=(100, 1)</span></span><br><span class="line">y = x.<span class="built_in">pow</span>(<span class="number">2</span>) + <span class="number">0.2</span>*torch.rand(x.size())  <span class="comment"># noisy y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save</span>():</span><br><span class="line">    net1 = torch.nn.Sequential(</span><br><span class="line">        torch.nn.Linear(<span class="number">1</span>, <span class="number">10</span>),</span><br><span class="line">        torch.nn.ReLU(),</span><br><span class="line">        torch.nn.Linear(<span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line">    optimizer = torch.optim.SGD(net1.parameters(), lr=<span class="number">0.5</span>)</span><br><span class="line">    loss_func = torch.nn.MSELoss()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        prediction = net1(x)</span><br><span class="line">        loss = loss_func(prediction, y)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.figure(<span class="number">1</span>, figsize=(<span class="number">10</span>, <span class="number">3</span>))</span><br><span class="line">    plt.subplot(<span class="number">131</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net1&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2 ways to save the net</span></span><br><span class="line">    torch.save(net1, <span class="string">&#x27;net.pkl&#x27;</span>)  <span class="comment"># ä¿å­˜æ•´ä¸ªç½‘ç»œ</span></span><br><span class="line">    torch.save(net1.state_dict(), <span class="string">&#x27;net_params.pkl&#x27;</span>)   <span class="comment"># åªä¿å­˜å‚æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">restore_net</span>():</span><br><span class="line">    <span class="comment"># restore entire net1 to net2</span></span><br><span class="line">    net2 = torch.load(<span class="string">&#x27;net.pkl&#x27;</span>)<span class="comment">#åŠ è½½æ•´ä¸ªç½‘ç»œ</span></span><br><span class="line">    prediction = net2(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.subplot(<span class="number">132</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net2&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">restore_params</span>():<span class="comment">#æ­å»ºç½‘ç»œï¼ŒåŠ è½½å‚æ•°</span></span><br><span class="line">    <span class="comment"># restore only the parameters in net1 to net3</span></span><br><span class="line">    net3 = torch.nn.Sequential(</span><br><span class="line">        torch.nn.Linear(<span class="number">1</span>, <span class="number">10</span>),</span><br><span class="line">        torch.nn.ReLU(),</span><br><span class="line">        torch.nn.Linear(<span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># copy net1&#x27;s parameters into net3</span></span><br><span class="line">    net3.load_state_dict(torch.load(<span class="string">&#x27;net_params.pkl&#x27;</span>))</span><br><span class="line">    prediction = net3(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plot result</span></span><br><span class="line">    plt.subplot(<span class="number">133</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Net3&#x27;</span>)</span><br><span class="line">    plt.scatter(x.data.numpy(), y.data.numpy())</span><br><span class="line">    plt.plot(x.data.numpy(), prediction.data.numpy(), <span class="string">&#x27;r-&#x27;</span>, lw=<span class="number">5</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># save net1</span></span><br><span class="line">save()</span><br><span class="line"></span><br><span class="line"><span class="comment"># restore entire net (may slow)</span></span><br><span class="line">restore_net()</span><br><span class="line"></span><br><span class="line"><span class="comment"># restore only the net parameters</span></span><br><span class="line">restore_params()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch03-å¿«é€Ÿæ­å»ºç½‘ç»œæ³•</title>
    <link href="/2022/04/03/pytorch03-%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E7%BD%91%E7%BB%9C%E6%B3%95/"/>
    <url>/2022/04/03/pytorch03-%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E7%BD%91%E7%BB%9C%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ï¼š<a href="https://mofanpy.com/tutorials/machine-learning/torch/fast-nn/">å¿«é€Ÿæ­å»ºæ³• - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Network</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n_features,n_hidden,n_output</span>):</span><br><span class="line">        <span class="built_in">super</span>(Network,<span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(n_features,n_hidden)</span><br><span class="line">        <span class="variable language_">self</span>.predict = torch.nn.Linear(n_hidden,n_output)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        x=F.relu(<span class="variable language_">self</span>.hidden(x))</span><br><span class="line">        x=<span class="variable language_">self</span>.predict(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">net1=Network(<span class="number">2</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•äºŒï¼ˆå¿«é€Ÿï¼‰"><a href="#æ–¹æ³•äºŒï¼ˆå¿«é€Ÿï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼ˆå¿«é€Ÿï¼‰"></a>æ–¹æ³•äºŒï¼ˆå¿«é€Ÿï¼‰</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">net2=torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(<span class="number">2</span>,<span class="number">10</span>),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(net1)</span><br><span class="line"><span class="built_in">print</span>(net2)</span><br><span class="line"></span><br><span class="line">Network(</span><br><span class="line">  (hidden): Linear(in_features=<span class="number">2</span>, out_features=<span class="number">10</span>, bias=<span class="literal">True</span>) </span><br><span class="line">  (predict): Linear(in_features=<span class="number">10</span>, out_features=<span class="number">2</span>, bias=<span class="literal">True</span>)</span><br><span class="line">)</span><br><span class="line">Sequential(</span><br><span class="line">  (<span class="number">0</span>): Linear(in_features=<span class="number">2</span>, out_features=<span class="number">10</span>, bias=<span class="literal">True</span>)</span><br><span class="line">  (<span class="number">1</span>): ReLU()</span><br><span class="line">  (<span class="number">2</span>): Linear(in_features=<span class="number">10</span>, out_features=<span class="number">2</span>, bias=<span class="literal">True</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ç§æ–¹æ³•ç”±æˆ‘ä»¬æŒ‡å®šäº†ç½‘ç»œå±‚åï¼Œç¬¬äºŒç§æ–¹æ³•åˆ™æ˜¯æ•°å­—ç´¢å¼•ï¼Œç¬¬ä¸€ç§æ–¹æ³•ä¸­Reluæ˜¯ä¸€ä¸ªfunctionï¼Œç¬¬äºŒç§æ–¹æ³•ä¸­Reluæ˜¯torch.nnçš„ä¸€ç§ç½‘ç»œå±‚</p><p><strong>ä¸¤è€…å®Œå…¨ç­‰ä»·</strong></p>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch02-åˆ†ç±»é—®é¢˜ï¼ˆåˆ’åˆ†æ•°æ®ç‚¹ç±»åˆ«ï¼‰</title>
    <link href="/2022/04/03/pytorch02-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%EF%BC%88%E5%88%92%E5%88%86%E6%95%B0%E6%8D%AE%E7%82%B9%E7%B1%BB%E5%88%AB%EF%BC%89/"/>
    <url>/2022/04/03/pytorch02-%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98%EF%BC%88%E5%88%92%E5%88%86%E6%95%B0%E6%8D%AE%E7%82%B9%E7%B1%BB%E5%88%AB%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡<a href="https://mofanpy.com/tutorials/machine-learning/torch/classification/">åŒºåˆ†ç±»å‹ (åˆ†ç±») - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/1-1-3.gif"></p><h2 id="å®šä¹‰æ•°æ®é›†"><a href="#å®šä¹‰æ•°æ®é›†" class="headerlink" title="å®šä¹‰æ•°æ®é›†"></a>å®šä¹‰æ•°æ®é›†</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#xæ˜¯æ•°æ®ç‚¹</span></span><br><span class="line"><span class="comment">#yæ˜¯æ ‡ç­¾</span></span><br><span class="line">n_data = torch.ones(<span class="number">100</span>, <span class="number">2</span>)<span class="comment">#100*2çš„å…¨1çŸ©é˜µ</span></span><br><span class="line"><span class="comment">#å‡å€¼ä¸º2ï¼Œæ–¹å·®ä¸º1çš„ç¦»æ•£æ­£æ€åˆ†å¸ƒéšæœºç‚¹</span></span><br><span class="line">x0 = torch.normal(<span class="number">2</span>*n_data, <span class="number">1</span>)      <span class="comment"># class0 x data (tensor), shape=(100, 2) </span></span><br><span class="line"><span class="comment">#æ ‡ç­¾ä¸º0</span></span><br><span class="line">y0 = torch.zeros(<span class="number">100</span>)               <span class="comment"># class0 y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line">x1 = torch.normal(-<span class="number">2</span>*n_data, <span class="number">1</span>)     <span class="comment"># class1 x data (tensor), shape=(100, 2)</span></span><br><span class="line"><span class="comment">#æ ‡ç­¾ä¸º1</span></span><br><span class="line">y1 = torch.ones(<span class="number">100</span>)                <span class="comment"># class1 y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cat è¿æ¥ä¸¤ä¸ªtensor</span></span><br><span class="line">x = torch.cat((x0, x1), <span class="number">0</span>).<span class="built_in">type</span>(torch.FloatTensor)  <span class="comment"># shape (200, 2) FloatTensor = 32-bit floating </span></span><br><span class="line">y = torch.cat((y0, y1), ).<span class="built_in">type</span>(torch.LongTensor)    <span class="comment"># shape (200,) LongTensor = 64-bit integer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®šä¹‰ç½‘ç»œç»“æ„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(torch.nn.Module):  <span class="comment"># ç»§æ‰¿ torch çš„ Module</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_feature, n_hidden, n_output</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, <span class="variable language_">self</span>).__init__()     <span class="comment"># ç»§æ‰¿ __init__ åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># å®šä¹‰æ¯å±‚ç”¨ä»€ä¹ˆæ ·çš„å½¢å¼</span></span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(n_feature, n_hidden)   <span class="comment"># éšè—å±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line">        <span class="variable language_">self</span>.predict = torch.nn.Linear(n_hidden, n_output)   <span class="comment"># è¾“å‡ºå±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):   <span class="comment"># è¿™åŒæ—¶ä¹Ÿæ˜¯ Module ä¸­çš„ forward åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># æ­£å‘ä¼ æ’­è¾“å…¥å€¼, ç¥ç»ç½‘ç»œåˆ†æå‡ºè¾“å‡ºå€¼</span></span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.hidden(x))      <span class="comment"># æ¿€åŠ±å‡½æ•°(éšè—å±‚çš„çº¿æ€§å€¼)</span></span><br><span class="line">        x = <span class="variable language_">self</span>.predict(x)             <span class="comment"># è¾“å‡ºå€¼</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">net = Net(n_feature=<span class="number">2</span>, n_hidden=<span class="number">10</span>, n_output=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>æŠŠä¸€å †æ•°æ®ç‚¹åˆ†ä¸ºä¸¤ç±»</p><p>è¾“å…¥æ˜¯ä¸€ä¸ªç‚¹çš„åæ ‡[x,y]ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªé¢„æµ‹çš„ç±»åˆ«æ¦‚ç‡[å±äºç¬¬ä¸€ç±»çš„æ¦‚ç‡,å±äºç¬¬äºŒç±»çš„æ¦‚ç‡]ï¼Œæ‰€ä»¥è¾“å…¥è¾“å‡ºç»´åº¦éƒ½æ˜¯2</p><h2 id="å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°"><a href="#å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°" class="headerlink" title="å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°"></a>å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.SGD(net.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">loss_func = torch.nn.CrossEntropyLoss()<span class="comment">#softmaxæ¦‚ç‡ï¼Œç”¨äºæ ‡ç­¾è¯¯å·®è®¡ç®—</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># optimizer æ˜¯è®­ç»ƒçš„å·¥å…·</span></span><br><span class="line">optimizer = torch.optim.SGD(net.parameters(), lr=<span class="number">0.02</span>)  <span class="comment"># ä¼ å…¥ net çš„æ‰€æœ‰å‚æ•°, å­¦ä¹ ç‡</span></span><br><span class="line"><span class="comment"># ç®—è¯¯å·®çš„æ—¶å€™, æ³¨æ„çœŸå®å€¼!ä¸æ˜¯! one-hot å½¢å¼çš„, è€Œæ˜¯1D Tensor, (batch,)</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯é¢„æµ‹å€¼æ˜¯2D tensor (batch, n_classes)</span></span><br><span class="line">loss_func = torch.nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    out = net(x)     <span class="comment"># å–‚ç»™ net è®­ç»ƒæ•°æ® x, è¾“å‡ºåˆ†æå€¼</span></span><br><span class="line"></span><br><span class="line">    loss = loss_func(out, y)     <span class="comment"># è®¡ç®—ä¸¤è€…çš„è¯¯å·®</span></span><br><span class="line"></span><br><span class="line">    optimizer.zero_grad()   <span class="comment"># æ¸…ç©ºä¸Šä¸€æ­¥çš„æ®‹ä½™æ›´æ–°å‚æ•°å€¼</span></span><br><span class="line">    loss.backward()         <span class="comment"># è¯¯å·®åå‘ä¼ æ’­, è®¡ç®—å‚æ•°æ›´æ–°å€¼</span></span><br><span class="line">    optimizer.step()        <span class="comment"># å°†å‚æ•°æ›´æ–°å€¼æ–½åŠ åˆ° net çš„ parameters</span></span><br></pre></td></tr></table></figure><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#xæ˜¯æ•°æ®</span></span><br><span class="line"><span class="comment">#yæ˜¯æ ‡ç­¾</span></span><br><span class="line">n_data = torch.ones(<span class="number">100</span>, <span class="number">2</span>)<span class="comment">#100*2çš„å…¨1çŸ©é˜µ</span></span><br><span class="line"><span class="comment">#å‡å€¼ä¸º2ï¼Œæ–¹å·®ä¸º1çš„ç¦»æ•£æ­£æ€åˆ†å¸ƒéšæœºç‚¹</span></span><br><span class="line">x0 = torch.normal(<span class="number">2</span>*n_data, <span class="number">1</span>)      <span class="comment"># class0 x data (tensor), shape=(100, 2) </span></span><br><span class="line"><span class="comment">#æ ‡ç­¾ä¸º0</span></span><br><span class="line">y0 = torch.zeros(<span class="number">100</span>)               <span class="comment"># class0 y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line">x1 = torch.normal(-<span class="number">2</span>*n_data, <span class="number">1</span>)     <span class="comment"># class1 x data (tensor), shape=(100, 2)</span></span><br><span class="line"><span class="comment">#æ ‡ç­¾ä¸º1</span></span><br><span class="line">y1 = torch.ones(<span class="number">100</span>)                <span class="comment"># class1 y data (tensor), shape=(100, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cat è¿æ¥ä¸¤ä¸ªtensor</span></span><br><span class="line">x = torch.cat((x0, x1), <span class="number">0</span>).<span class="built_in">type</span>(torch.FloatTensor)  <span class="comment"># shape (200, 2) FloatTensor = 32-bit floating </span></span><br><span class="line">y = torch.cat((y0, y1), ).<span class="built_in">type</span>(torch.LongTensor)    <span class="comment"># shape (200,) LongTensor = 64-bit integer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_feature, n_hidden, n_output</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(n_feature, n_hidden)</span><br><span class="line">        <span class="variable language_">self</span>.out =torch.nn.Linear(n_hidden, n_output)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.hidden(x))</span><br><span class="line">        x =<span class="variable language_">self</span>.out(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">net = Net(n_feature=<span class="number">2</span>, n_hidden=<span class="number">10</span>, n_output=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(net)</span><br><span class="line"></span><br><span class="line">optimizer = torch.optim.SGD(net.parameters(), lr=<span class="number">0.02</span>)</span><br><span class="line">loss_func = torch.nn.CrossEntropyLoss()<span class="comment">#softmaxæ¦‚ç‡ï¼Œç”¨äºæ ‡ç­¾è¯¯å·®è®¡ç®—</span></span><br><span class="line"></span><br><span class="line">plt.ion()<span class="comment">#å®æ—¶æ‰“å°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    out = net(x)<span class="comment">#è¾“å‡ºæ˜¯ç±»åˆ«æ¦‚ç‡[0.3,0.7]</span></span><br><span class="line">    loss = loss_func(out, y)<span class="comment">#å…ˆå†™é¢„æµ‹å€¼ï¼Œåå†™çœŸå®å€¼</span></span><br><span class="line"></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> t % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        plt.cla()</span><br><span class="line">        prediction = torch.<span class="built_in">max</span>(out, <span class="number">1</span>)[<span class="number">1</span>]<span class="comment">#1æ˜¯æœ€å¤§å€¼ç´¢å¼•ï¼Œ[0]æ˜¯æœ€å¤§å€¼</span></span><br><span class="line">        pred_y = prediction.data.numpy()</span><br><span class="line">        target_y = y.data.numpy()</span><br><span class="line">        plt.scatter(x.data.numpy()[:, <span class="number">0</span>], x.data.numpy()[:, <span class="number">1</span>], c=pred_y, s=<span class="number">100</span>, lw=<span class="number">0</span>, cmap=<span class="string">&#x27;RdYlGn&#x27;</span>)</span><br><span class="line">        accuracy = <span class="built_in">float</span>((pred_y == target_y).astype(<span class="built_in">int</span>).<span class="built_in">sum</span>()) / <span class="built_in">float</span>(target_y.size)</span><br><span class="line">        plt.text(<span class="number">1.5</span>, -<span class="number">4</span>, <span class="string">&#x27;Accuracy=%.2f&#x27;</span> % accuracy, fontdict=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;color&#x27;</span>:  <span class="string">&#x27;red&#x27;</span>&#125;)</span><br><span class="line">        plt.pause(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyTorch01-å›å½’é—®é¢˜ï¼ˆç”¨æ›²çº¿æ‹Ÿåˆæ•°æ®ç‚¹ï¼‰</title>
    <link href="/2022/04/03/pytorch01-%E5%9B%9E%E5%BD%92%E9%97%AE%E9%A2%98%EF%BC%88%E7%94%A8%E6%9B%B2%E7%BA%BF%E6%8B%9F%E5%90%88%E6%95%B0%E6%8D%AE%E7%82%B9%EF%BC%89/"/>
    <url>/2022/04/03/pytorch01-%E5%9B%9E%E5%BD%92%E9%97%AE%E9%A2%98%EF%BC%88%E7%94%A8%E6%9B%B2%E7%BA%BF%E6%8B%9F%E5%90%88%E6%95%B0%E6%8D%AE%E7%82%B9%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡<a href="https://mofanpy.com/tutorials/machine-learning/torch/regression/">å…³ç³»æ‹Ÿåˆ (å›å½’) - PyTorch è«çƒ¦Python (mofanpy.com)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/04/1-1-2.gif"></p><h2 id="å®šä¹‰æ•°æ®ç‚¹é›†"><a href="#å®šä¹‰æ•°æ®ç‚¹é›†" class="headerlink" title="å®šä¹‰æ•°æ®ç‚¹é›†"></a>å®šä¹‰æ•°æ®ç‚¹é›†</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=torch.unsqueeze(torch.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">100</span>),dim=<span class="number">1</span>)</span><br><span class="line">y=x.<span class="built_in">pow</span>(<span class="number">2</span>)+<span class="number">0.2</span>*torch.rand(x.size())</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.linspace(start,end,step)æ„é€ ç­‰å·®æ•°åˆ—</span><br><span class="line">torch.unsqueeze()å‡ç»´</span><br></pre></td></tr></table></figure><p>xæ˜¯(-1,1)åŒºé—´å†…çš„100ä¸ªç­‰å·®æ•°ï¼Œy&#x3D;x^2ï¼Œå¤–åŠ äº†ä¸€äº›éšæœºå™ªå£°</p><h2 id="å®šä¹‰ç½‘ç»œç»“æ„"><a href="#å®šä¹‰ç½‘ç»œç»“æ„" class="headerlink" title="å®šä¹‰ç½‘ç»œç»“æ„"></a>å®šä¹‰ç½‘ç»œç»“æ„</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(torch.nn.Module):  <span class="comment"># ç»§æ‰¿ torch çš„ Module</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_feature, n_hidden, n_output</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, <span class="variable language_">self</span>).__init__()     <span class="comment"># ç»§æ‰¿ __init__ åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># å®šä¹‰æ¯å±‚ç”¨ä»€ä¹ˆæ ·çš„å½¢å¼</span></span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(n_feature, n_hidden)   <span class="comment"># éšè—å±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line">        <span class="variable language_">self</span>.predict = torch.nn.Linear(n_hidden, n_output)   <span class="comment"># è¾“å‡ºå±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):   <span class="comment"># è¿™åŒæ—¶ä¹Ÿæ˜¯ Module ä¸­çš„ forward åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># æ­£å‘ä¼ æ’­è¾“å…¥å€¼, ç¥ç»ç½‘ç»œåˆ†æå‡ºè¾“å‡ºå€¼</span></span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.hidden(x))      <span class="comment"># æ¿€åŠ±å‡½æ•°(éšè—å±‚çš„çº¿æ€§å€¼)</span></span><br><span class="line">        x = <span class="variable language_">self</span>.predict(x)             <span class="comment"># è¾“å‡ºå€¼</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">net = Net(n_feature=<span class="number">1</span>, n_hidden=<span class="number">10</span>, n_output=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><p>initæ˜¯å›ºå®šæ ¼å¼ï¼Œä¸å¯ä¿®æ”¹ï¼Œå¯ä»¥ä¼ å‚</p><p>forwardæ˜¯å‰å‘ä¼ æ’­ï¼Œå‡½æ•°åä¸å¯ä¿®æ”¹</p><p>è¾“å…¥æ˜¯ä¸€ä¸ªxï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªé¢„æµ‹å€¼yï¼Œæ‰€ä»¥è¾“å…¥è¾“å‡ºç»´åº¦éƒ½æ˜¯1</p><p>reluæ˜¯æ¿€æ´»å‡½æ•°ï¼Œç”¨äºæŠŠå¤šä¸ªçº¿æ€§å•å…ƒè½¬ä¸ºéçº¿æ€§æ˜ å°„</p><h2 id="å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°"><a href="#å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°" class="headerlink" title="å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°"></a>å®šä¹‰ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</h2><p>optimizer&#x3D;torch.optim.SGD(net.parameters(),lr&#x3D;0.5)<br>loss_func&#x3D;torch.nn.MSELoss()#å‡æ–¹å·®ï¼Œç”¨åœ¨å›å½’é—®é¢˜</p><p>æ³¨:</p><p>SGDæ˜¯ä¸€ç§ä¼˜åŒ–ç®—æ³•</p><p>net.parameters()æ˜¯ç½‘ç»œçš„æ‰€æœ‰å‚æ•°ï¼Œå›ºå®šå†™æ³•</p><p>lræ˜¯learning rateå­¦ä¹ ç‡</p><p>MSELOSSæ˜¯å‡æ–¹å·®mean square error loss,é€‚åˆç”¨äºè®¡ç®—å›å½’é—®é¢˜çš„è¯¯å·®</p><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    prediction = net(x)     <span class="comment"># å–‚ç»™ net è®­ç»ƒæ•°æ® x, è¾“å‡ºé¢„æµ‹å€¼</span></span><br><span class="line">    loss = loss_func(prediction, y)     <span class="comment"># è®¡ç®—ä¸¤è€…çš„è¯¯å·®</span></span><br><span class="line"></span><br><span class="line">    optimizer.zero_grad()   <span class="comment"># æ¸…ç©ºä¸Šä¸€æ­¥çš„æ®‹ä½™æ›´æ–°å‚æ•°å€¼</span></span><br><span class="line">    loss.backward()         <span class="comment"># è¯¯å·®åå‘ä¼ æ’­, è®¡ç®—å‚æ•°æ›´æ–°å€¼</span></span><br><span class="line">    optimizer.step()        <span class="comment"># å°†å‚æ•°æ›´æ–°å€¼æ–½åŠ åˆ° net çš„ parameters ä¸Š</span></span><br></pre></td></tr></table></figure><p>å›ºå®šå†™æ³•</p><h2 id="åé¦ˆ-å¯è§†åŒ–"><a href="#åé¦ˆ-å¯è§†åŒ–" class="headerlink" title="åé¦ˆ&#x2F;å¯è§†åŒ–"></a>åé¦ˆ&#x2F;å¯è§†åŒ–</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">plt.ion()<span class="comment">#å®æ—¶æ‰“å°</span></span><br><span class="line">plt.show()<span class="comment">#æ˜¾ç¤ºç”»å¸ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    prediction=net(x)</span><br><span class="line">    loss=loss_func(prediction,y)</span><br><span class="line"></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> t%<span class="number">5</span>==<span class="number">0</span>:</span><br><span class="line">        plt.cla()</span><br><span class="line">        plt.scatter(x.data.numpy(),y.data.numpy())</span><br><span class="line">        plt.plot(x.data.numpy(),prediction.data.numpy(),<span class="string">&#x27;r-&#x27;</span>,lw=<span class="number">5</span>)</span><br><span class="line">        plt.text(<span class="number">0.5</span>,<span class="number">0</span>,<span class="string">&quot;Loss=%.4f&quot;</span>% loss.data,fontdict=&#123;<span class="string">&#x27;size&#x27;</span>:<span class="number">20</span>,<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;)</span><br><span class="line">        plt.pause(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>æ¯éš”5æ¬¡è®­ç»ƒå°±ç”»ä¸€ä¸‹é¢„æµ‹æ›²çº¿ï¼Œå®æ—¶æ‰“å°åœ¨ç”»å¸ƒ</p><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F   <span class="comment">#æ¿€åŠ±å‡½æ•°éƒ½åœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(torch.nn.Module):  <span class="comment"># ç»§æ‰¿ torch çš„ Module</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_feature, n_hidden, n_output</span>):</span><br><span class="line">        <span class="built_in">super</span>(Net, <span class="variable language_">self</span>).__init__()     <span class="comment"># ç»§æ‰¿ __init__ åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># å®šä¹‰æ¯å±‚ç”¨ä»€ä¹ˆæ ·çš„å½¢å¼</span></span><br><span class="line">        <span class="variable language_">self</span>.hidden = torch.nn.Linear(n_feature, n_hidden)   <span class="comment"># éšè—å±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line">        <span class="variable language_">self</span>.predict = torch.nn.Linear(n_hidden, n_output)   <span class="comment"># è¾“å‡ºå±‚çº¿æ€§è¾“å‡º</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):   <span class="comment"># è¿™åŒæ—¶ä¹Ÿæ˜¯ Module ä¸­çš„ forward åŠŸèƒ½</span></span><br><span class="line">        <span class="comment"># æ­£å‘ä¼ æ’­è¾“å…¥å€¼, ç¥ç»ç½‘ç»œåˆ†æå‡ºè¾“å‡ºå€¼</span></span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.hidden(x))      <span class="comment"># æ¿€åŠ±å‡½æ•°(éšè—å±‚çš„çº¿æ€§å€¼)</span></span><br><span class="line">        x = <span class="variable language_">self</span>.predict(x)             <span class="comment"># è¾“å‡ºå€¼</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">net = Net(n_feature=<span class="number">1</span>, n_hidden=<span class="number">10</span>, n_output=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x=torch.unsqueeze(torch.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">100</span>),dim=<span class="number">1</span>)</span><br><span class="line">y=x.<span class="built_in">pow</span>(<span class="number">2</span>)+<span class="number">0.2</span>*torch.rand(x.size())</span><br><span class="line"></span><br><span class="line">optimizer=torch.optim.SGD(net.parameters(),lr=<span class="number">0.5</span>)</span><br><span class="line">loss_func=torch.nn.MSELoss()<span class="comment">#å‡æ–¹å·®ï¼Œç”¨åœ¨å›å½’é—®é¢˜</span></span><br><span class="line"></span><br><span class="line">plt.ion()<span class="comment">#å®æ—¶æ‰“å°</span></span><br><span class="line">plt.show()<span class="comment">#æ˜¾ç¤ºç”»å¸ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">80</span>):</span><br><span class="line">    prediction=net(x)</span><br><span class="line">    loss=loss_func(prediction,y)</span><br><span class="line"></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> t%<span class="number">5</span>==<span class="number">0</span>:</span><br><span class="line">        plt.cla()</span><br><span class="line">        plt.scatter(x.data.numpy(),y.data.numpy())</span><br><span class="line">        plt.plot(x.data.numpy(),prediction.data.numpy(),<span class="string">&#x27;r-&#x27;</span>,lw=<span class="number">5</span>)</span><br><span class="line">        plt.text(<span class="number">0.5</span>,<span class="number">0</span>,<span class="string">&quot;Loss=%.4f&quot;</span>% loss.data,fontdict=&#123;<span class="string">&#x27;size&#x27;</span>:<span class="number">20</span>,<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;)</span><br><span class="line">        plt.pause(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pytorch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yoloxè®­ç»ƒä¸åŒæ•°æ®é›†æ³¨æ„äº‹é¡¹</title>
    <link href="/2022/03/31/yolox%E8%AE%AD%E7%BB%83%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E9%9B%86%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"/>
    <url>/2022/03/31/yolox%E8%AE%AD%E7%BB%83%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E9%9B%86%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å…ˆåè®­ç»ƒä¸¤ä¸ªæ•°æ®é›†ï¼Œéƒ½æ˜¯VOCæ ¼å¼ï¼Œä»…æœ‰å›¾ç‰‡å’Œæ ‡ç­¾ä¸åŒï¼Œé‚£ä¹ˆæ€ä¹ˆå¯¹ä»–ä»¬è¿›è¡Œè®­ç»ƒï¼Ÿ</p><p>ç­”ï¼šç›´è§‰å°±æ˜¯ï¼Œé…ç½®å¥½ä¸€æ¬¡ç¯å¢ƒï¼Œå…ˆè®­ç»ƒç¬¬ä¸€ä¸ªæ•°æ®é›†ï¼Œç„¶åè®­ç»ƒç¬¬äºŒä¸ªæ•°æ®é›†çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®é›†æ–‡ä»¶å¤¹å†…å®¹æ›¿æ¢ï¼Œå…¶ä½™ä¸€å¾‹ä¸å˜ã€‚</p><p>ä½†è¿™æ ·æœ‰ä¸€ä¸ª<strong>è‡´å‘½é”™è¯¯</strong>ï¼šAPå§‹ç»ˆå¾ˆå°ï¼Œå¯èƒ½æ˜¯0.00000XXXã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>å› ä¸ºä¸¤ä¸ªæ•°æ®é›†çš„æ ‡æ³¨å·¥ä½œæ˜¯åˆ†åˆ«åœ¨labelmeå’Œlabelimgä¸Šå®Œæˆçš„ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›ç»†å¾®åŒºåˆ«ï¼Œæ‰€ä»¥é¦–å…ˆæ€€ç–‘æ•°æ®é›†æœ¬èº«çš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘åšäº†ä¸ªè¿·ä½ ç‰ˆçš„æ•°æ®é›†ï¼Œåªæœ‰10å¼ å›¾ç‰‡ï¼Œä¸¥æ ¼æŒ‰ç…§VOC2007æ ¼å¼è¦æ±‚æ¥åšï¼Œç„¶åè®­ç»ƒã€‚</p><p>ç„¶åæˆ‘å°±å‘ç°äº†é—®é¢˜ï¼Œå‡ºç°ä¸€ä¸ªæŠ¥é”™ï¼Œæ²¡æœ‰æˆªå›¾ï¼Œå¤§æ¦‚æ„æ€æ˜¯æ‰¾ä¸åˆ°åä¸ºâ€˜00022â€™çš„å›¾ç‰‡ã€‚</p><p>ä½†æ˜¯æˆ‘è¿™æ¬¡åªåšäº†10å¼ å›¾ç‰‡çš„æ•°æ®é›†ï¼Œç¼–å·1-10ï¼Œæ ¹æœ¬æ²¡æœ‰åä¸º22çš„å›¾ç‰‡ï¼Œè¿™è¯´æ˜ï¼Œè™½ç„¶æˆ‘åœ¨ç”¨æ–°çš„æ•°æ®é›†ï¼Œä½†ç¨‹åºç”¨çš„è¿˜æ˜¯ä¸Šä¸€ä¸ªæ•°æ®é›†çš„æŸäº›ä¸œè¥¿ã€‚åº”è¯¥æ˜¯ç±»ä¼¼â€˜ç¼“å­˜â€™çš„ä¸œè¥¿æ²¡æœ‰æ¸…ç†ã€‚</p><p>ç„¶åæˆ‘å°±åœ¨å„ä¸ªé…ç½®ç¾¤æ–‡ä»¶ä¸­æ‰¾ï¼Œåœ¨YOLOX&#x2F;yolox&#x2F;evaluators&#x2F;voc_eval.pyä¸­æ‰¾åˆ°è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-20.png"></p><p>æ˜¾ç„¶è¿™æ˜¯ä¸€æ®µå…³äºç¼“å­˜æ–‡ä»¶å¤¹çš„ä¸œè¥¿ï¼Œâ€™annots.pklâ€™è²Œä¼¼ä»£è¡¨ç€ç”±æ ‡ç­¾æ–‡ä»¶ç”Ÿæˆçš„æŸç§ä¸œè¥¿ã€‚</p><p>**å¤§å¸ˆï¼Œæˆ‘æ‚Ÿäº†ï¼**åªè¦æ‰¾åˆ°è¿™ä¸ªç¼“å­˜æ–‡ä»¶å¤¹ï¼ŒæŠŠå®ƒåˆ æ‰å³å¯ï¼<strong>éªŒè¯æ­£ç¡®ï¼</strong></p><p>æ€ªä¸å¾—åˆ ç¼“å­˜ä¹‹å‰APæå°ä½†ä¸ä¸º0ï¼Œä¸ä¸º0è¯´æ˜è®­ç»ƒçš„é…ç½®æ˜¯æœ‰æ•ˆçš„ï¼ŒAPæå°å°±æ˜¯å› ä¸ºç”¨äºæ¯”è¾ƒIOUçš„æ ‡ç­¾æ˜¯åŸæ¥æ˜¯åŸæ¥æ•°æ®é›†ä¸Šçš„ï¼Œæ ¹æœ¬å°±æ²¡æ³•å¯¹åº”æ–°çš„æ•°æ®é›†å›¾ç‰‡ã€‚</p><p>å†ä»”ç»†ä¸€çœ‹ç¼“å­˜æ–‡ä»¶å¤¹ä¸‹è¿˜æœ‰å­æ–‡ä»¶å¤¹ï¼Œå‘½åä¸ºtestï¼ŒçŒœæµ‹æ˜¯train.pyé‡ŒæŸä¸ªè‡ªå®šä¹‰çš„å±æ€§å€¼ï¼Œä½†å¥‡æ€ªçš„æ˜¯æ²¡æ‰¾åˆ°å“ªé‡Œè®¾ç½®äº†testï¼Œå¯èƒ½è¿™æ˜¯é»˜è®¤çš„åå­—ï¼Œæ‡’å¾—æ·±ç©¶äº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-21.png"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆ‡æ¢æ•°æ®é›†è®­ç»ƒå‰ï¼Œåˆ é™¤æ•°æ®åŠæ–‡ä»¶å¤¹åŒç›®å½•ä¸‹çš„annotations_cacheæ–‡ä»¶å¤¹ï¼</p><p>ç„¶åpython setup.py installä¸€ä¸‹ï¼Œè¿™å¯èƒ½æ˜¯æ ¹æ®é…ç½®æ–‡ä»¶é‡å»ºä¸€ä¸‹yoloxçš„ä»€ä¹ˆä»€ä¹ˆã€‚ã€‚ï¼Ÿçæä¸€ä¸‹å§</p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éªŒè¯ç æ±‰å­—å›¾äºŒå€¼åŒ–å¤„ç†</title>
    <link href="/2022/03/09/%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B1%89%E5%AD%97%E5%9B%BE%E4%BA%8C%E5%80%BC%E5%8C%96%E5%A4%84%E7%90%86/"/>
    <url>/2022/03/09/%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B1%89%E5%AD%97%E5%9B%BE%E4%BA%8C%E5%80%BC%E5%8C%96%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æŠŠä¸‹å›¾ä¸­æ±‰å­—å›¾ç‰‡æ ‡å‡†åŒ–å¤„ç†ï¼Œä¸èƒŒæ™¯åˆ†ç¦»ï¼Œç™½å­—é»‘åº•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E5%8E%9F%E5%9B%BE-1024x768.jpg"></p><h2 id="è½¬ä¸ºç°åº¦å›¾"><a href="#è½¬ä¸ºç°åº¦å›¾" class="headerlink" title="è½¬ä¸ºç°åº¦å›¾"></a>è½¬ä¸ºç°åº¦å›¾</h2><p>emmm,å‹‰å¼ºè¿˜æ˜¯çœ‹å¾—æ¸…çš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E7%81%B0%E5%BA%A6%E5%9B%BE-1024x768.jpg"></p><p>ç°åº¦å›¾ç›´æ–¹å›¾å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E7%81%B0%E5%BA%A6%E5%9B%BE_%E7%9B%B4%E6%96%B9%E5%9B%BE-1024x768.jpg"></p><h2 id="ç›´æ–¹å›¾å‡è¡¡åŒ–"><a href="#ç›´æ–¹å›¾å‡è¡¡åŒ–" class="headerlink" title="ç›´æ–¹å›¾å‡è¡¡åŒ–"></a>ç›´æ–¹å›¾å‡è¡¡åŒ–</h2><p>å‡è¡¡åŒ–åçš„ç›´æ–¹å›¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E5%9D%87%E8%A1%A1%E5%8C%96_%E7%9B%B4%E6%96%B9%E5%9B%BE-1024x768.jpg"></p><p>å¯¹åº”ç°åº¦å›¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E5%9D%87%E8%A1%A1%E5%8C%96_%E7%81%B0%E5%BA%A6%E5%9B%BE-1024x768.jpg"></p><h2 id="äºŒå€¼åŒ–"><a href="#äºŒå€¼åŒ–" class="headerlink" title="äºŒå€¼åŒ–"></a>äºŒå€¼åŒ–</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E5%9D%87%E8%A1%A1%E5%8C%96%E4%BA%8C%E5%80%BC%E5%8C%96_%E7%81%B0%E5%BA%A6%E5%9B%BE-1024x768.jpg"></p><p>äºŒå€¼åŒ–ä¹‹åé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œç™½å­—oré»‘å­—ï¼Ÿéœ€è¦ç»Ÿä¸€ä¸€ä¸‹</p><p>é»‘å­—ç™½åº•çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œåè‰²å¤„ç†</p><p><strong>åˆ¤åˆ«æ¡ä»¶ï¼šè¾¹ç•Œåƒç´ ä¸­ï¼Œç™½è‰²åƒç´ æ¯”é»‘è‰²åƒç´ å°‘</strong></p><p>æ ¹æ®æ¡ä»¶åè‰²åçš„ç°åº¦å›¾å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/%E5%9D%87%E8%A1%A1%E5%8C%96%E4%BA%8C%E5%80%BC%E5%8C%96%E7%99%BD%E5%AD%97_%E7%81%B0%E5%BA%A6%E5%9B%BE-1024x768.jpg"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">invert</span>(<span class="params">img</span>):</span><br><span class="line">    y,x=img.shape</span><br><span class="line">    left=[[[]</span><br><span class="line">    right=[[[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(y):</span><br><span class="line">        left.append(img[[i,<span class="number">0</span>[])</span><br><span class="line">        right.append(img[[i,x-<span class="number">1</span>[])</span><br><span class="line">    blackPoints=<span class="built_in">list</span>(img[[<span class="number">0</span>[]).count(<span class="number">0</span>)+<span class="built_in">list</span>(img[[y-<span class="number">1</span>[]).count(<span class="number">0</span>)+left.count(<span class="number">0</span>)+right.count(<span class="number">0</span>)</span><br><span class="line">    blackRate=<span class="built_in">float</span>(blackPoints/(x[*<span class="number">2</span>+y[*<span class="number">2</span>-<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">if</span> blackRate&lt;<span class="number">0.5</span>:<span class="comment">#è¾¹ç•Œé»‘åƒç´ æ¯”ä¾‹</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(y):<span class="comment">#åè‰²</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(x):</span><br><span class="line">                img[[i,j[] = <span class="number">255</span> - img[[i,j[]</span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line">path=<span class="string">&#x27;D:[[[[Desktop[[[[2022[_03[_08[_15[_04[_37[[[[&#x27;</span></span><br><span class="line">files=os.listdir(path)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">40</span>):</span><br><span class="line">    img=cv2.imdecode(np.fromfile(path+files[[i[], dtype=np.uint8),-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># B,G,R = cv2.split(img) #get single 8-bits channel</span></span><br><span class="line">    <span class="comment"># EB=cv2.equalizeHist(B)</span></span><br><span class="line">    <span class="comment"># EG=cv2.equalizeHist(G)</span></span><br><span class="line">    <span class="comment"># ER=cv2.equalizeHist(R)</span></span><br><span class="line">    <span class="comment"># img=cv2.merge([[EB,EG,ER[])  #merge it back</span></span><br><span class="line"></span><br><span class="line">    img=cv2.cvtColor(img,cv2.COLOR[_BGR2GRAY)<span class="comment">#ç°åº¦å›¾</span></span><br><span class="line">    <span class="comment">#img=cv2.GaussianBlur(img,(3,3),0,)#é«˜æ–¯å¹³æ»‘</span></span><br><span class="line">    img=cv2.equalizeHist(img)<span class="comment">#ç›´æ–¹å›¾å‡è¡¡åŒ–</span></span><br><span class="line">    r,img=cv2.threshold(img,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH[_BINARY)<span class="comment">#äºŒå€¼åŒ–</span></span><br><span class="line">    img=invert(img)<span class="comment">#å¦‚æœå­—ä½“æ˜¯é»‘çš„ï¼Œåè‰²å¤„ç†</span></span><br><span class="line">    plt.subplot(<span class="number">5</span>,<span class="number">8</span>,i+<span class="number">1</span>)</span><br><span class="line">    plt.imshow(img,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.savefig(<span class="string">&#x27;å‡è¡¡åŒ–+äºŒå€¼åŒ–+ç™½å­—[_ç°åº¦å›¾.jpg&#x27;</span>,dpi=<span class="number">800</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>1.åŸºæœ¬è¾¾åˆ°è¦æ±‚ï¼Œä½†éƒ¨åˆ†å›¾ç‰‡è‚‰çœ¼å¯è§æ— æ³•è¯†åˆ«</p><p>2.åœ¨å½©è‰²å›¾åƒä¸Šæ¯”è¾ƒå¥½åŒºåˆ†ï¼Œä½†ç¬¬ä¸€æ­¥å°±è½¬ä¸ºäº†ç°åº¦å›¾ï¼Œä¸¢å¤±äº†å¾ˆå¤šä¿¡æ¯ï¼Œè¿™é‡Œåº”è¯¥è¿˜æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
      <tag>éªŒè¯ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>opencvä¸­æ–‡è·¯å¾„ã€å›¾ç‰‡åçš„è¯»å†™</title>
    <link href="/2022/03/08/opencv%E4%B8%AD%E6%96%87%E8%B7%AF%E5%BE%84%E3%80%81%E5%9B%BE%E7%89%87%E5%90%8D%E7%9A%84%E8%AF%BB%E5%86%99/"/>
    <url>/2022/03/08/opencv%E4%B8%AD%E6%96%87%E8%B7%AF%E5%BE%84%E3%80%81%E5%9B%BE%E7%89%87%E5%90%8D%E7%9A%84%E8%AF%BB%E5%86%99/</url>
    
    <content type="html"><![CDATA[<h2 id="è¯»"><a href="#è¯»" class="headerlink" title="è¯»"></a>è¯»</h2><p>ä¸€èˆ¬å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img=cv2.imread(<span class="string">&#x27;ä¸­æ–‡ç›®å½•/ä¸­æ–‡åç§°.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æŠ¥é”™</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-17.png"></p><p>æ”¹è¿›å†™æ³•</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img=cv2.imdecode(np.fromfile(<span class="string">&#x27;ä¸­æ–‡ç›®å½•/ä¸­æ–‡åç§°.jpg&#x27;</span>, dtype=np.uint8), -<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="å†™"><a href="#å†™" class="headerlink" title="å†™"></a>å†™</h2><p>ä¸€èˆ¬å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.imwrite(<span class="string">&#x27;ä¸­æ–‡ç›®å½•/ä¸­æ–‡åç§°.jpg&#x27;</span>,img)</span><br></pre></td></tr></table></figure><p>ä¸æŠ¥é”™ï¼Œä½†æ²¡ç”¨</p><p>æ”¹è¿›å†™æ³•ï¼Œéœ€è¦é¢å¤–å†å†™ä¸€éåç¼€å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.imencode(<span class="string">&#x27;.jpg&#x27;</span>,img)[<span class="number">1</span>].tofile(<span class="string">&#x27;ä¸­æ–‡ç›®å½•/ä¸­æ–‡åç§°.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu20.04å…³é—­è‡ªåŠ¨ä¼‘çœ </title>
    <link href="/2022/03/04/ubuntu20-04%E5%85%B3%E9%97%AD%E8%87%AA%E5%8A%A8%E4%BC%91%E7%9C%A0/"/>
    <url>/2022/03/04/ubuntu20-04%E5%85%B3%E9%97%AD%E8%87%AA%E5%8A%A8%E4%BC%91%E7%9C%A0/</url>
    
    <content type="html"><![CDATA[<pre><code>sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-16-1024x274.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yoloxè®­ç»ƒvocæ•°æ®é›†</title>
    <link href="/2022/03/01/yolox%E8%AE%AD%E7%BB%83voc%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <url>/2022/03/01/yolox%E8%AE%AD%E7%BB%83voc%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ¶ä½œæ•°æ®é›†"><a href="#åˆ¶ä½œæ•°æ®é›†" class="headerlink" title="åˆ¶ä½œæ•°æ®é›†"></a>åˆ¶ä½œæ•°æ®é›†</h2><p>è¯·å‚è€ƒä¸Šä¸€ç¯‡ä½¿ç”¨labelmeæ‰“æ ‡ç­¾å¹¶åˆ¶ä½œvocæ•°æ®é›†</p><p><a href="https://xinhaojin.github.io/2022/02/26/labelme%e6%a0%87%e6%b3%a8%e5%9b%be%e7%89%87%e5%b9%b6%e5%88%b6%e4%bd%9cvoc%e6%95%b0%e6%8d%ae%e9%9b%86/">labelmeæ ‡æ³¨å›¾ç‰‡å¹¶åˆ¶ä½œvocæ•°æ®é›†</a></p><p>ä¸Šæ–‡ä¸­æœ€åå¾—åˆ°äº†å‡ ä¸ªæ–‡ä»¶å¤¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image.png"></p><p>ä½†è¿™ä¸èƒ½ç›´æ¥ç”¨ï¼Œè¿˜éœ€è¦åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ’åˆ†ï¼Œæˆ–è€…å†™æ®µä»£ç éšæœºåˆ’åˆ†ï¼Œæœ€åæ•°æ®é›†ç›®å½•ç»“æ„å¦‚ä¸‹</p><p>VOC2007<br>â€”-Annotations<br>â€”-JPEGImages<br>â€”-ImageSets<br>â€”â€”â€“Main<br>â€”â€”â€”â€”test.txt<br>â€”â€”â€”â€”trainval.txt</p><p>Annotationsæ˜¯VOCæ ¼å¼çš„æ ‡æ³¨æ–‡ä»¶</p><p>JPEGImagesæ˜¯å›¾ç‰‡æ–‡ä»¶å¤¹</p><p>ImageSets&#x2F;Mainä¸­åŒ…å«äº†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å›¾ç‰‡ååˆ—è¡¨ï¼Œä¸åŒ…å«åç¼€å</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-1.png"></p><p>åœ¨VOC2007åŒçº§ç›®å½•æ‰§è¡Œä¸‹é¢è¿™æ®µä»£ç å³å¯è‡ªåŠ¨åˆ’åˆ†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">train_rate=<span class="number">0.75</span><span class="comment">#è®­ç»ƒé›†æ¯”ä¾‹</span></span><br><span class="line">xmls=os.listdir(<span class="string">&#x27;./VOC2007/Annotations&#x27;</span>)</span><br><span class="line">nums=<span class="built_in">len</span>(xmls)</span><br><span class="line">train_nums=<span class="built_in">int</span>(train_rate*nums)</span><br><span class="line">train_index=random.sample(<span class="built_in">range</span>(nums),train_nums)</span><br><span class="line"><span class="built_in">print</span>(train_index)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./VOC2007/ImageSets&#x27;</span>):</span><br><span class="line">    os.mkdir(<span class="string">&#x27;./VOC2007/ImageSets&#x27;</span>)</span><br><span class="line">    os.mkdir(<span class="string">&#x27;./VOC2007/ImageSets/Main&#x27;</span>)</span><br><span class="line">trainval=<span class="built_in">open</span>(<span class="string">&#x27;./VOC2007/ImageSets/Main/trainval.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">test=<span class="built_in">open</span>(<span class="string">&#x27;./VOC2007/ImageSets/Main/test.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(nums):</span><br><span class="line">    name=xmls[i].split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> i <span class="keyword">in</span> train_index:</span><br><span class="line">        trainval.write(name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        test.write(name)</span><br><span class="line"></span><br><span class="line">trainval.close()</span><br><span class="line">test.close()</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…YOLOX"><a href="#å®‰è£…YOLOX" class="headerlink" title="å®‰è£…YOLOX"></a>å®‰è£…YOLOX</h2><p>ä»githubä¸‹è½½å³å¯</p><p><a href="https://github.com/Megvii-BaseDetection/YOLOX">Megvii-BaseDetection&#x2F;YOLOX: YOLOX is a high-performance anchor-free YOLO, exceeding yolov3~v5 with MegEngine, ONNX, TensorRT, ncnn, and OpenVINO supported. Documentation: https://yolox.readthedocs.io/ (github.com)</a></p><p>å»ºè®®æ–°å»ºä¸€ä¸ªcondaç¯å¢ƒæ¥å®‰è£…</p><p>å‚è€ƒä¹‹å‰å†™è¿‡çš„æ–‡ç« </p><p><a href="https://xinhaojin.github.io/2021/08/05/win10%e4%b8%8b%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%aeyolox/">win10ä¸‹å®‰è£…é…ç½®yolox</a></p><p>å› ä¸ºå’Œç°åœ¨çš„ç‰ˆæœ¬ç¨æœ‰ä¸åŒï¼Œä»¥githubé¡¹ç›®å®˜æ–¹å®‰è£…æŒ‡å¼•ä¸ºå‡†</p><p>æ€»ç»“æ¥è®²å°±æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•æˆåŠŸæ‰§è¡Œä¸‹é¢ä¸¤è¡Œå‘½ä»¤</p><p>pip install -r requirement.txt<br>python setup.py develop</p><p>å¦‚æœå®‰è£…GPUç‰ˆæœ¬torchï¼Œå†å®‰è£…cudnnå’Œcudaå³å¯</p><h2 id="ä¿®æ”¹è®­ç»ƒç›¸å…³é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹è®­ç»ƒç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹è®­ç»ƒç›¸å…³é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹è®­ç»ƒç›¸å…³é…ç½®æ–‡ä»¶</h2><p>é¦–å…ˆæŠŠæ•°æ®é›†æ”¾åˆ°datasetsç›®å½•ä¸‹ï¼Œä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç›®å½•ç»“æ„ï¼Œä¼šæ›´æ–¹ä¾¿ä¸€äº›</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-2.png"></p><h3 id="ä¿®æ”¹exps-example-yolox-voc-yolox-voc-s-py"><a href="#ä¿®æ”¹exps-example-yolox-voc-yolox-voc-s-py" class="headerlink" title="ä¿®æ”¹exps&#x2F;example&#x2F;yolox_voc&#x2F;yolox_voc_s.py"></a>ä¿®æ”¹exps&#x2F;example&#x2F;yolox_voc&#x2F;yolox_voc_s.py</h3><p>num_classesæ”¹ä¸ºæ ‡ç­¾æ•°ç›®ï¼Œæˆ‘è¿™é‡Œåªæœ‰ä¸€ä¸ªæ ‡ç­¾ç±»åˆ«</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-3.png"></p><p>å»æ‰2012ç›¸å…³çš„å†…å®¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-4.png"></p><h3 id="ä¿®æ”¹tools-train-py"><a href="#ä¿®æ”¹tools-train-py" class="headerlink" title="ä¿®æ”¹tools&#x2F;train.py"></a>ä¿®æ”¹tools&#x2F;train.py</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-5.png"></p><p>-b ä¸€æ¬¡è®­ç»ƒæ‰€æŠ“å–çš„æ•°æ®æ ·æœ¬æ•°é‡ï¼Œå–å†³äºå†…å­˜å¤§å°ï¼Œæç¤ºmemoryç›¸å…³é”™è¯¯ä¼˜å…ˆè€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œ2,4,8,16â€¦</p><p>-d GPUç´¢å¼•ï¼Œåªæœ‰ä¸€ä¸ªGPUçš„è¯ï¼Œå†™0æˆ–1æ˜¯ä¸€æ ·çš„</p><p>-f è¯•éªŒæè¿°æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä¿®æ”¹çš„é…ç½®æ–‡ä»¶</p><p>-c æ¨¡å‹æƒé‡æ–‡ä»¶ï¼Œä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼Œä»å®˜ç½‘ä¸‹è½½</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-6.png"></p><h3 id="ä¿®æ”¹yolox-data-datasets-voc-py"><a href="#ä¿®æ”¹yolox-data-datasets-voc-py" class="headerlink" title="ä¿®æ”¹yolox&#x2F;data&#x2F;datasets&#x2F;voc.py"></a>ä¿®æ”¹yolox&#x2F;data&#x2F;datasets&#x2F;voc.py</h3><p>æ³¨é‡Šdifficultï¼Œæ„æ€æ˜¯æ‰“æ ‡ç­¾æ—¶å¯¹åº”æ ‡ç­¾çš„è¯†åˆ«éš¾åº¦ï¼Œæˆ‘çš„æ ‡ç­¾é‡Œæ²¡æœ‰è¿™ä¸€é¡¹ï¼Œä¸ä¿®æ”¹ä¼šæŠ¥é”™ï¼Œéœ€è¦æŠŠdifficultè®¾ç½®ä¸ºFalse</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-7.png"></p><p>åˆ å»èŠ±æ‹¬å·é‡ŒåŸæœ‰çš„:sï¼Œå¦åˆ™æ— æ³•æ­£ç¡®è¯»å–</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-8.png"></p><h3 id="ä¿®æ”¹yolox-data-datasets-voc-classes-pycoco-classes-py-è®°å¾—æ”¹ä¸‹cocoç±»åï¼Œå› ä¸ºåé¢importç±»åˆ«çš„æ—¶å€™é»˜è®¤æ˜¯coco"><a href="#ä¿®æ”¹yolox-data-datasets-voc-classes-pycoco-classes-py-è®°å¾—æ”¹ä¸‹cocoç±»åï¼Œå› ä¸ºåé¢importç±»åˆ«çš„æ—¶å€™é»˜è®¤æ˜¯coco" class="headerlink" title="ä¿®æ”¹yolox&#x2F;data&#x2F;datasets&#x2F;voc_classes.pycoco_classes.py(è®°å¾—æ”¹ä¸‹cocoç±»åï¼Œå› ä¸ºåé¢importç±»åˆ«çš„æ—¶å€™é»˜è®¤æ˜¯coco)"></a>ä¿®æ”¹yolox&#x2F;data&#x2F;datasets&#x2F;voc_classes.pycoco_classes.py(è®°å¾—æ”¹ä¸‹cocoç±»åï¼Œå› ä¸ºåé¢importç±»åˆ«çš„æ—¶å€™é»˜è®¤æ˜¯coco)</h3><p>æ³¨é‡ŠåŸæœ‰ç±»åˆ«ï¼Œæ”¹ä¸ºè‡ªå·±çš„ï¼Œè¿™é‡Œåªæœ‰å•ç±»</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-9.png"></p><h3 id="ä¿®æ”¹yolox-evaluators-voc-eval-py"><a href="#ä¿®æ”¹yolox-evaluators-voc-eval-py" class="headerlink" title="ä¿®æ”¹yolox&#x2F;evaluators&#x2F;voc_eval.py"></a>ä¿®æ”¹yolox&#x2F;evaluators&#x2F;voc_eval.py</h3><p>å› ä¸ºæ²¡æœ‰truncatedå’Œdifficultæ ‡ç­¾ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿè¦ä¿®æ”¹ä¸º0</p><p>è¿˜æœ‰ä¸€å¤„æ˜¯ç±»å‹è½¬æ¢ï¼Œæ·»åŠ äº†floatç±»å‹è½¬æ¢ï¼Œå¦åˆ™æŠ¥é”™</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-11.png"></p><p>x[â€œdifficultâ€]æ”¹ä¸º0</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-12.png"></p><h3 id="ä¿®æ”¹yolox-exp-yolox-base-py"><a href="#ä¿®æ”¹yolox-exp-yolox-base-py" class="headerlink" title="ä¿®æ”¹yolox&#x2F;exp&#x2F;yolox_base.py"></a>ä¿®æ”¹yolox&#x2F;exp&#x2F;yolox_base.py</h3><p>ä¿®æ”¹è®­ç»ƒè½®æ¬¡ï¼Œé»˜è®¤300<br>self.max_epoch &#x3D; 150</p><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><p>python tools&#x2F;train.py</p><p>æ¯10è½®ä¼šæœ‰ä¸€æ¬¡ç»Ÿè®¡ï¼Œåªè¦ä¸‹é¢ä¸¤ä¸ªæ•°å­—ä¸æ˜¯0å°±å¥½äº†ï¼Œè¶Šæ¥è¿‘1æ•ˆæœè¶Šå¥½</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/image-15.png"></p><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>è®­ç»ƒå®Œåçš„æ¨¡å‹æƒé‡æ–‡ä»¶ä¿å­˜åœ¨YOLOX_outputs&#x2F;yolox_voc_sä¸‹ï¼Œæœ€å¥½çš„æƒé‡æ˜¯best_ckpt.pth</p><p>ä½¿ç”¨è¿™ä¸ªæƒé‡æ¥éªŒè¯ä¸€ä¸‹</p><p>python tools&#x2F;demo.py image -f exps&#x2F;example&#x2F;yolox_voc&#x2F;yolox_voc_s.py -c YOLOX_outputs&#x2F;yolox_voc_s&#x2F;best_ckpt.pth â€“path datasets&#x2F;coco&#x2F;val2017&#x2F;00001.png â€“save_result â€“device gpu</p><p>ç„¶ååœ¨YOLOX_outputs&#x2F;yolox_voc_s&#x2F;vis_resä¸‹çš„æ—¶é—´æ–‡ä»¶å¤¹é‡Œå°±èƒ½æ‰¾åˆ°è¯†åˆ«ç»“æœï¼Œå¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/03/00001.png"></p><h2 id="å¦"><a href="#å¦" class="headerlink" title="å¦"></a>å¦</h2><p>å¦‚æœè¦è®­ç»ƒå¤šä¸ªæ•°æ®é›†ï¼Œå»ºè®®çœ‹ä¸‹æ³¨æ„äº‹é¡¹ï¼š</p><p><a href="https://xinhaojin.github.io/2022/03/31/yolox%e8%ae%ad%e7%bb%83%e4%b8%8d%e5%90%8c%e6%95%b0%e6%8d%ae%e9%9b%86%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9/">yoloxè®­ç»ƒä¸åŒæ•°æ®é›†æ³¨æ„äº‹é¡¹</a></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>labelmeæ ‡æ³¨å›¾ç‰‡å¹¶åˆ¶ä½œvocæ•°æ®é›†</title>
    <link href="/2022/02/26/labelme%E6%A0%87%E6%B3%A8%E5%9B%BE%E7%89%87%E5%B9%B6%E5%88%B6%E4%BD%9Cvoc%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <url>/2022/02/26/labelme%E6%A0%87%E6%B3%A8%E5%9B%BE%E7%89%87%E5%B9%B6%E5%88%B6%E4%BD%9Cvoc%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…labelme"><a href="#å®‰è£…labelme" class="headerlink" title="å®‰è£…labelme"></a>å®‰è£…labelme</h3><p><a href="https://github.com/wkentaro/labelme">wkentaro&#x2F;labelme: Image Polygonal Annotation with Python (polygon, rectangle, circle, line, point and image-level flag annotation). (github.com)</a></p><pre><code>pip install labelme</code></pre><p>å¦‚æœå®‰è£…è¿‡ï¼Œå»ºè®®å‡çº§æˆæ–°ç‰ˆæœ¬</p><pre><code>pip install -U labelme</code></pre><h3 id="ä½¿ç”¨labelme"><a href="#ä½¿ç”¨labelme" class="headerlink" title="ä½¿ç”¨labelme"></a>ä½¿ç”¨labelme</h3><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥labelmeå›è½¦å³å¯ï¼Œä¸è¦å…³é—­å‘½ä»¤è¡Œ</p><p>åœ¨å›¾å½¢ç•Œé¢ä¸­é€‰æ‹©æ‰“å¼€å›¾ç‰‡æ‰€åœ¨æ–‡ä»¶å¤¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-11.png"></p><p>ç„¶ååœ¨fileä¸­ä¿®æ”¹3æ¡è®¾ç½®</p><p>å‹¾é€‰è‡ªåŠ¨ä¿å­˜ï¼ˆå›¾æ ‡æœ‰è“è‰²é˜´å½±å°±æ˜¯é€‰ä¸Šäº†ï¼‰</p><p>ä¿®æ”¹è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ä¸è¦å’Œå›¾ç‰‡æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œé€‰æ‹©å¦ä¸€ä¸ªæ–‡ä»¶å¤¹</p><p><strong>çº æ­£ï¼šä¸å»ºè®®ä¿®æ”¹</strong></p><p>å–æ¶ˆå‹¾é€‰ä¿å­˜å›¾åƒæ•°æ®ï¼Œå¦åˆ™jsonå¾ˆå¤§ï¼Œæ²¡æœ‰å¿…è¦</p><p><strong>çº æ­£ï¼šæœ€å¥½å‹¾é€‰ä¿å­˜å›¾åƒæ•°æ®</strong>ï¼Œå¦åˆ™å¦‚æœæƒ³è½¬æ¢å…¶ä»–æ•°æ®é›†æ ¼å¼å¦‚cocoå¥½åƒä¸è¡Œ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-13.png"></p><p>ç„¶åctrl+rå¿«æ·é”®æ ‡çŸ©å½¢æ¡†å°±è¡Œï¼Œç‚¹ä¸€ä¸‹æ”¾å¼€ï¼Œå†ç‚¹ä¸€ä¸‹ï¼Œç„¶åè¾“å…¥æ ‡ç­¾ç‚¹å‡»OKå³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-12.png"></p><h3 id="è½¬æ¢ä¸ºvocæ•°æ®é›†"><a href="#è½¬æ¢ä¸ºvocæ•°æ®é›†" class="headerlink" title="è½¬æ¢ä¸ºvocæ•°æ®é›†"></a>è½¬æ¢ä¸ºvocæ•°æ®é›†</h3><p>ä¸‹è½½labelme2voc.py</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-14.png"></p><p>æ–°å»ºlabels.txtå­˜æ”¾æ ‡ç­¾</p><p>__ignore__å’Œ_background_æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–æ ‡ç­¾ä¸ºè‡ªå®šä¹‰ï¼Œæ¯”å¦‚æˆ‘åªéœ€è¦æ£€æµ‹éªŒè¯ç å›¾ç‰‡ä¸­æ–‡å­—çš„ä½ç½®ï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªæ ‡ç­¾å°±æ˜¯word</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-16.png"></p><p>æ­¤æ—¶æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹,æ¯”å¦‚imagesï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰å›¾ç‰‡å’Œæ‰€æœ‰æ ‡æ³¨åçš„jsonæ–‡ä»¶</p><p>æŠŠlabelme2voc.pyå’Œlabels.txtæ”¾åˆ°å’ŒimagesåŒçº§ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p><p>python labelme2voc.py images voc â€“labels labels.txt</p><p>imagesæ˜¯è¾“å…¥æ–‡ä»¶å¤¹åï¼Œå³æ ‡æ³¨åä¿å­˜çš„jsonæ‰€åœ¨æ–‡ä»¶å¤¹</p><p>vocæ˜¯è¾“å‡ºæ–‡ä»¶å¤¹åï¼Œä¸èƒ½æ˜¯å·²å­˜åœ¨çš„æ–‡ä»¶å¤¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-15.png"></p><p>ç„¶åå°±åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ªvocæ–‡ä»¶å¤¹ï¼Œ4ä¸ªå†…å®¹ï¼Œåˆ†åˆ«æ˜¯</p><p>xmlæ ¼å¼çš„æ ‡æ³¨æ–‡ä»¶å¤¹</p><p>å¸¦æ ‡æ³¨çš„å›¾ç‰‡æ–‡ä»¶å¤¹</p><p>åŸå›¾ç‰‡æ–‡ä»¶å¤¹</p><p>å­˜æœ‰æ ‡ç­¾åçš„æ–‡æœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-19.png"></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‚¹é€‰éªŒè¯ç è‡ªåŠ¨çˆ¬å–(ç½‘æ˜“æ˜“ç›¾ï¼‰</title>
    <link href="/2022/02/26/%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81%E8%87%AA%E5%8A%A8%E7%88%AC%E5%8F%96/"/>
    <url>/2022/02/26/%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81%E8%87%AA%E5%8A%A8%E7%88%AC%E5%8F%96/</url>
    
    <content type="html"><![CDATA[<h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>æ±‰å­—ç‚¹é€‰éªŒè¯ç çš„æ‰¹é‡è·å–ï¼Œå›¾ç‰‡å‘½åä¸ºåºå·åŠ æ–‡å­—ï¼Œåé¢ç”¨äºåˆ¶ä½œæ•°æ®é›†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-6.png"></p><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-7.png"></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>æ³¨é‡Šå¾ˆæ¸…æ¥šï¼Œä¸å†èµ˜è¿°ï¼Œå¯å‚è€ƒç«™å†…å†™è¿‡çš„å…¶ä»–seleniumå†…å®¹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -_*- coding: utf-8 -_*-</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹è½½å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">downloadPic</span>(<span class="params">url,filename</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment">#ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line">        urllib.request.urlretrieve(url=url,filename=filename)</span><br><span class="line">    <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;IOError&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Exception&quot;</span>)</span><br><span class="line"><span class="comment">#åºå·å‰åŠ 0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">transfer</span>(<span class="params">num</span>):</span><br><span class="line">    temp=num</span><br><span class="line">    count=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        temp=<span class="built_in">int</span>(temp/<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">if</span> temp&gt;<span class="number">0</span>:</span><br><span class="line">            count=count+<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;0&#x27;</span>_*(<span class="number">4</span>-count)+<span class="built_in">str</span>(num)</span><br><span class="line"><span class="keyword">if</span> ____name____ == <span class="string">&#x27;____main____&#x27;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        options=webdriver.ChromeOptions()</span><br><span class="line">        <span class="comment">#åå°é™é»˜è¿è¡Œ</span></span><br><span class="line">        options.add__argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line">        <span class="comment">#å¿½ç•¥æ— ç”¨çš„æŠ¥é”™</span></span><br><span class="line">        options.add__experimental__option(<span class="string">&#x27;excludeSwitches&#x27;</span>,_[<span class="string">&#x27;enable-automation&#x27;</span>,<span class="string">&#x27;enable-logging&#x27;</span>_])</span><br><span class="line">        driver=webdriver.Chrome(chrome__options=options,executable__path=<span class="string">&#x27;./chromedriver.exe&#x27;</span>)</span><br><span class="line">        <span class="comment">#http://npm.taobao.org/mirrors/chromedriver/</span></span><br><span class="line">        driver.maximize__window()</span><br><span class="line">        driver.get(<span class="string">&#x27;https://dun.163.com/trial/picture-click&#x27;</span>)</span><br><span class="line">        driver.implicitly__wait(<span class="number">10</span>)<span class="comment">#æœ€å¤šç­‰å¾…æ—¶é—´</span></span><br><span class="line">        driver.find__element__by__css__selector(<span class="string">&#x27;_[captcha-mode=embed_]&#x27;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;./datasets&#x27;</span>):</span><br><span class="line">            os.mkdir(<span class="string">&#x27;./datasets&#x27;</span>)</span><br><span class="line">        files=os.listdir(<span class="string">&#x27;./datasets&#x27;</span>)<span class="comment">#è·å–æ–‡ä»¶æ•°ç›®</span></span><br><span class="line">        num=<span class="built_in">len</span>(files)+<span class="number">1</span><span class="comment">#èµ·å§‹åºå·</span></span><br><span class="line">        index=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> index&lt;<span class="number">100</span>:<span class="comment">#éœ€è¦è·å–çš„éªŒè¯ç æ•°é‡</span></span><br><span class="line">            time.sleep(<span class="number">0.2</span>)</span><br><span class="line">            img__src=driver.find__element__by__css__selector(<span class="string">&#x27;.yidun__bg-img&#x27;</span>).get__attribute(<span class="string">&#x27;src&#x27;</span>)<span class="comment">#å›¾ç‰‡url</span></span><br><span class="line">            img__text=driver.find__element__by__css__selector(<span class="string">&#x27;.yidun__tips____point&#x27;</span>).text<span class="comment">#æ­£ç¡®æ–‡æœ¬</span></span><br><span class="line">            <span class="keyword">if</span> img__text==<span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> img__text==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                time.sleep(<span class="number">2</span>)</span><br><span class="line">                img__src=<span class="string">&#x27;&#x27;</span></span><br><span class="line">                img__text=<span class="string">&#x27;&#x27;</span></span><br><span class="line">                driver.find__element__by__css__selector(<span class="string">&#x27;.yidun__refresh&#x27;</span>).click()<span class="comment">#åˆ·æ–°æŒ‰é’®</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            img__text=img__text.replace(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)<span class="comment">#å»æ‰å¼•å·å’Œç©ºæ ¼</span></span><br><span class="line">            img__text=img__text.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            filename=transfer(num+index)+<span class="string">&#x27;__&#x27;</span>+img__text+<span class="string">&#x27;.png&#x27;</span></span><br><span class="line">            downloadPic(img__src,<span class="string">&#x27;./datasets/&#x27;</span>+filename)</span><br><span class="line">            time.sleep(<span class="number">0.2</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;åºå·ï¼š&#x27;</span>+<span class="built_in">str</span>(index))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ–‡ä»¶åï¼š&#x27;</span>+filename)</span><br><span class="line">            index+=<span class="number">1</span></span><br><span class="line">            driver.find__element__by__css__selector(<span class="string">&#x27;.yidun__refresh&#x27;</span>).click()<span class="comment">#åˆ·æ–°æŒ‰é’®</span></span><br><span class="line">        driver.quit()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        driver.quit()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>ç‚¹é€‰éªŒè¯ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gité…ç½®</title>
    <link href="/2022/02/25/linux%E9%85%8D%E7%BD%AEgit/"/>
    <url>/2022/02/25/linux%E9%85%8D%E7%BD%AEgit/</url>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yourname&quot;</span><br><span class="line">git config --global user.email &quot;youremail&quot;</span><br><span class="line">ssh-keygen -t rsa -C &quot;youremail&quot;</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°ç”¨æˆ·ç›®å½•ä¸‹çš„.sshæ–‡ä»¶å¤¹ä¸‹çš„id_rsa.pubï¼Œå¤åˆ¶å†…å®¹åˆ°githubè®¾ç½®ä¸­æ·»åŠ sshkey<br><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-5-1024x442.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ—å‡ºå±€åŸŸç½‘å†…å¯Pingé€šçš„IP</title>
    <link href="/2022/02/25/%E5%88%97%E5%87%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E5%8F%AFping%E9%80%9A%E7%9A%84ip/"/>
    <url>/2022/02/25/%E5%88%97%E5%87%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E5%8F%AFping%E9%80%9A%E7%9A%84ip/</url>
    
    <content type="html"><![CDATA[<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"> </span><br><span class="line">live_ip = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_os</span>():</span><br><span class="line">    os = platform.system()</span><br><span class="line">    <span class="keyword">if</span> os == <span class="string">&quot;Windows&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;n&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;c&quot;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ping_ip</span>(<span class="params">ip_str</span>):</span><br><span class="line">    cmd = [<span class="string">&quot;ping&quot;</span>, <span class="string">&quot;-&#123;op&#125;&quot;</span>.<span class="built_in">format</span>(op=get_os()),</span><br><span class="line">           <span class="string">&quot;1&quot;</span>, ip_str]</span><br><span class="line">    output = os.popen(<span class="string">&quot; &quot;</span>.join(cmd)).readlines()</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> output:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">str</span>(line).upper().find(<span class="string">&quot;TTL&quot;</span>) &gt;= <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ip: %s åœ¨çº¿&quot;</span> % ip_str)</span><br><span class="line">            <span class="keyword">global</span> live_ip</span><br><span class="line">            live_ip += <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_ip</span>(<span class="params">ip_prefix</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    ç»™å‡ºå½“å‰çš„ipåœ°å€æ®µ ï¼Œç„¶åæ‰«ææ•´ä¸ªæ®µæ‰€æœ‰åœ°å€</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    threads = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">256</span>):</span><br><span class="line">        ip = <span class="string">&#x27;%s.%s&#x27;</span> % (ip_prefix, i)</span><br><span class="line">        threads.append(threading.Thread(target=ping_ip, args=&#123;ip, &#125;))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> threads:</span><br><span class="line">        i.start()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> threads:</span><br><span class="line">        i.join()</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_local_ip</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–æœ¬æœºå½“å‰ipåœ°å€</span></span><br><span class="line"><span class="string">    :return: è¿”å›æœ¬æœºipåœ°å€</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    myname = socket.getfqdn(socket.gethostname())</span><br><span class="line">    myaddr = socket.gethostbyname(myname)</span><br><span class="line">    <span class="keyword">return</span> myaddr</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹æ‰«ææ—¶é—´: %s&quot;</span> % time.ctime())</span><br><span class="line">    addr = find_local_ip()</span><br><span class="line">    args = <span class="string">&quot;&quot;</span>.join(addr)</span><br><span class="line">    ip_pre = <span class="string">&#x27;.&#x27;</span>.join(args.split(<span class="string">&#x27;.&#x27;</span>)[:-<span class="number">1</span>])</span><br><span class="line">    find_ip(ip_pre)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‰«æç»“æŸæ—¶é—´ %s&quot;</span> % time.ctime())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æœ¬æ¬¡æ‰«æå…±æ£€æµ‹åˆ°æœ¬ç½‘ç»œå­˜åœ¨%så°è®¾å¤‡&#x27;</span> % live_ip)</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-4.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å±€åŸŸç½‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ»‘å—éªŒè¯ç è‡ªåŠ¨æ‹–æ‹½ï¼ˆselenium+opencvï¼‰</title>
    <link href="/2022/02/22/%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%87%AA%E5%8A%A8%E6%8B%96%E6%8B%BD%EF%BC%88seleniumopencv%EF%BC%89/"/>
    <url>/2022/02/22/%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81%E8%87%AA%E5%8A%A8%E6%8B%96%E6%8B%BD%EF%BC%88seleniumopencv%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="è®¡ç®—éœ€è¦ç§»åŠ¨çš„åƒç´ "><a href="#è®¡ç®—éœ€è¦ç§»åŠ¨çš„åƒç´ " class="headerlink" title="è®¡ç®—éœ€è¦ç§»åŠ¨çš„åƒç´ "></a>è®¡ç®—éœ€è¦ç§»åŠ¨çš„åƒç´ </h2><p>é¦–å…ˆæˆ‘åœ¨githubä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå¤§ä½¬å†™çš„é¡¹ç›®<a href="https://github.com/crazyxw/SlideCrack/tree/master/slide_01">SlideCrack&#x2F;slide_01 at master Â· crazyxw&#x2F;SlideCrack (github.com)</a></p><p>è¾“å…¥æ˜¯æœ¬åœ°çš„ä¸¤å¼ å›¾ï¼šæ»‘å—éªŒè¯ç èƒŒæ™¯å’Œæ»‘å—å›¾ç‰‡</p><p>è¾“å‡ºæ˜¯ä¸¤ä¸ªç¼ºå£çš„åƒç´ è·ç¦»</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-1-1024x493.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SlideCrack</span>(<span class="title class_ inherited__">object</span>):<span class="comment"># https://github.com/crazyxw/SlideCrack/tree/master/slide_01</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, gap, bg, out</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        init code</span></span><br><span class="line"><span class="string">        :param gap: ç¼ºå£å›¾ç‰‡</span></span><br><span class="line"><span class="string">        :param bg: èƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line"><span class="string">        :param out: è¾“å‡ºå›¾ç‰‡</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.gap = gap</span><br><span class="line">        <span class="variable language_">self</span>.bg = bg</span><br><span class="line">        <span class="variable language_">self</span>.out = out</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clear_white</span>(<span class="params">img</span>):</span><br><span class="line">        <span class="comment"># æ¸…é™¤å›¾ç‰‡çš„ç©ºç™½åŒºåŸŸï¼Œè¿™é‡Œä¸»è¦æ¸…é™¤æ»‘å—çš„ç©ºç™½</span></span><br><span class="line">        img = cv2.imread(img)</span><br><span class="line">        rows, cols, channel = img.shape</span><br><span class="line">        min_x = <span class="number">255</span></span><br><span class="line">        min_y = <span class="number">255</span></span><br><span class="line">        max_x = <span class="number">0</span></span><br><span class="line">        max_y = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, rows):</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, cols):</span><br><span class="line">                t = <span class="built_in">set</span>(img[x, y])</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(t) &gt;= <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span> x &lt;= min_x:</span><br><span class="line">                        min_x = x</span><br><span class="line">                    <span class="keyword">elif</span> x &gt;= max_x:</span><br><span class="line">                        max_x = x</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> y &lt;= min_y:</span><br><span class="line">                        min_y = y</span><br><span class="line">                    <span class="keyword">elif</span> y &gt;= max_y:</span><br><span class="line">                        max_y = y</span><br><span class="line">        img1 = img[min_x:max_x, min_y: max_y]</span><br><span class="line">        <span class="keyword">return</span> img1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">template_match</span>(<span class="params">self, tpl, target</span>):</span><br><span class="line">        th, tw = tpl.shape[:<span class="number">2</span>]</span><br><span class="line">        result = cv2.matchTemplate(target, tpl, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">        <span class="comment"># å¯»æ‰¾çŸ©é˜µ(ä¸€ç»´æ•°ç»„å½“ä½œå‘é‡,ç”¨Matå®šä¹‰) ä¸­æœ€å°å€¼å’Œæœ€å¤§å€¼çš„ä½ç½®</span></span><br><span class="line">        min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)</span><br><span class="line">        tl = max_loc</span><br><span class="line">        br = (tl[<span class="number">0</span>] + tw, tl[<span class="number">1</span>] + th)</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†ï¼Œå°†åŒ¹é…åŒºåŸŸæ ‡æ³¨å‡ºæ¥</span></span><br><span class="line">        <span class="comment"># targetï¼šç›®æ ‡å›¾åƒ</span></span><br><span class="line">        <span class="comment"># tlï¼šçŸ©å½¢å®šç‚¹</span></span><br><span class="line">        <span class="comment"># brï¼šçŸ©å½¢çš„å®½é«˜</span></span><br><span class="line">        <span class="comment"># (0,0,255)ï¼šçŸ©å½¢è¾¹æ¡†é¢œè‰²</span></span><br><span class="line">        <span class="comment"># 1ï¼šçŸ©å½¢è¾¹æ¡†å¤§å°</span></span><br><span class="line">        cv2.rectangle(target, tl, br, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">        cv2.imwrite(<span class="variable language_">self</span>.out, target)</span><br><span class="line">        <span class="keyword">return</span> tl[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">image_edge_detection</span>(<span class="params">img</span>):</span><br><span class="line">        edges = cv2.Canny(img, <span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> edges</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">discern</span>(<span class="params">self</span>):</span><br><span class="line">        img1 = <span class="variable language_">self</span>.clear_white(<span class="variable language_">self</span>.gap)</span><br><span class="line">        img1 = cv2.cvtColor(img1, cv2.COLOR_RGB2GRAY)</span><br><span class="line">        slide = <span class="variable language_">self</span>.image_edge_detection(img1)</span><br><span class="line"></span><br><span class="line">        back = cv2.imread(<span class="variable language_">self</span>.bg, <span class="number">0</span>)</span><br><span class="line">        back = <span class="variable language_">self</span>.image_edge_detection(back)</span><br><span class="line"></span><br><span class="line">        slide_pic = cv2.cvtColor(slide, cv2.COLOR_GRAY2RGB)</span><br><span class="line">        back_pic = cv2.cvtColor(back, cv2.COLOR_GRAY2RGB)</span><br><span class="line">        x = <span class="variable language_">self</span>.template_match(slide_pic, back_pic)</span><br><span class="line">        <span class="comment"># è¾“å‡ºæ¨ªåæ ‡, å³ æ»‘å—åœ¨å›¾ç‰‡ä¸Šçš„ä½ç½®</span></span><br><span class="line">        <span class="built_in">print</span>(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ»‘å—å›¾ç‰‡</span></span><br><span class="line">img1 = <span class="string">&quot;1.png&quot;</span></span><br><span class="line"><span class="comment"># èƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line">img2 = <span class="string">&quot;2.jpg&quot;</span></span><br><span class="line"><span class="comment"># å¤„ç†ç»“æœå›¾ç‰‡,ç”¨çº¢çº¿æ ‡æ³¨</span></span><br><span class="line">img3 = <span class="string">&quot;3.png&quot;</span></span><br><span class="line">sc = SlideCrack(img1, img2, img3)</span><br><span class="line">x=sc.discern()</span><br></pre></td></tr></table></figure><h2 id="æµè§ˆå™¨è‡ªåŠ¨æ§åˆ¶"><a href="#æµè§ˆå™¨è‡ªåŠ¨æ§åˆ¶" class="headerlink" title="æµè§ˆå™¨è‡ªåŠ¨æ§åˆ¶"></a>æµè§ˆå™¨è‡ªåŠ¨æ§åˆ¶</h2><p>é’ˆå¯¹è¿™ä¸ªç½‘é¡µï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼Œæ‰“å¼€ç½‘å€ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œæ‹–æ‹½æ»‘å—</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-2-1024x634.png"></p><h3 id="æ“ä½œç½‘é¡µå…ƒç´ "><a href="#æ“ä½œç½‘é¡µå…ƒç´ " class="headerlink" title="æ“ä½œç½‘é¡µå…ƒç´ "></a>æ“ä½œç½‘é¡µå…ƒç´ </h3><p>å¯ä»¥ç”¨cssé€‰æ‹©å™¨æ¥è·å–ç½‘é¡µå…ƒç´ å¯¹è±¡</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_slider&#x27;</span>)</span><br><span class="line">driver.find_element_by_css_selector(<span class="string">&#x27;[captcha-mode=embed]&#x27;</span>).click()</span><br><span class="line">driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_jigsaw&#x27;</span>).get_attribute(<span class="string">&#x27;src&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç”¨è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥å¾—åˆ°å›¾ç‰‡çš„srcå±æ€§ï¼Œä¹Ÿå°±æ˜¯urlåœ°å€</p><p>ä¸‹ä¸€æ­¥å°±æ˜¯æŠŠå›¾ç‰‡ä¸‹è½½ä¸‹æ¥</p><h3 id="ä¸‹è½½å›¾ç‰‡"><a href="#ä¸‹è½½å›¾ç‰‡" class="headerlink" title="ä¸‹è½½å›¾ç‰‡"></a>ä¸‹è½½å›¾ç‰‡</h3><p>ä½¿ç”¨urllib.requestå³å¯</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">downloadPic</span>(<span class="params">url,filename</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment">#ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line">        urllib.request.urlretrieve(url=url,filename=filename)</span><br><span class="line">    <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;IOError&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Exception&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="æ¨¡æ‹Ÿæ‹–æ‹½"><a href="#æ¨¡æ‹Ÿæ‹–æ‹½" class="headerlink" title="æ¨¡æ‹Ÿæ‹–æ‹½"></a>æ¨¡æ‹Ÿæ‹–æ‹½</h3><p>ä½¿ç”¨ActionChains(driver).drag_and_drop_by_offset(source,xoffset,yoffset).perform()</p><p>ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å…ƒç´ å¯¹è±¡ï¼Œæ¨ªå‘åç§»ï¼Œçºµå‘ç›˜åç§»ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œæ„æ€å°±æ˜¯æ‰¾åˆ°ç±»åä¸ºyidun_sliderçš„å…ƒç´ ï¼Œå‘å³æ‹–åŠ¨50åƒç´ </p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tag=driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_slider&#x27;</span>)</span><br><span class="line">ActionChains(driver).drag_and_drop_by_offset(tag,<span class="number">50</span>,<span class="number">0</span>).perform()</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2022/02/image-3.png"></p><h2 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h2><p>ç„¶åå°±å¯ä»¥ç”¨åˆ«äººå†™å¥½çš„ä»£ç äº†ï¼Œå®é™…æ“ä½œæ—¶å‘ç°è®¡ç®—å‡ºçš„è·ç¦»åå°ä¸€ç‚¹ç‚¹ï¼Œæ‹–æ‹½å‚æ•°é‡Œæ‰‹åŠ¨åŠ ä¸€ç‚¹ç‚¹å°±è¡Œ</p><p>ä½†æ˜¯ï¼</p><p>è¿™ä¸ªç½‘ç«™å¥½åƒè¯†åˆ«å‡ºæ¥æ˜¯seleniumåœ¨æ§åˆ¶æµè§ˆå™¨ï¼Œå°±ç®—æ‹–æ‹½çš„ä½ç½®éå¸¸å‡†ç¡®ï¼Œä¹Ÿä¸ä¼šé€šè¿‡</p><p>æˆ‘ä»¥ä¸ºæ˜¯æ£€æµ‹åˆ°æ‹–æ‹½å¤ªå‡†å¤ªå¿«äº†ï¼Œç„¶åæˆ‘å°±æ‰‹åŠ¨æ‹–æ‹½ï¼Œå±…ç„¶ä¹Ÿä¸è¡Œ</p><p>åˆæ­¥å¾—å‡ºçš„ç»“è®ºæ˜¯åªè¦æ˜¯ç”¨seleniumæ‰“å¼€çš„è¿™ä¸ªç½‘é¡µï¼Œæ‰“å¼€åå³ä½¿æ‰‹åŠ¨æ“ä½œä¹Ÿä¸å¯èƒ½æˆåŠŸ</p><p>å…¶ä»–ç½‘ç«™å¯èƒ½æ²¡æœ‰è¿™ç§é™åˆ¶ï¼Œæ²¡æœ‰æµ‹è¯•</p><p>å…³äºseleniumæ€ä¹ˆä¸è¢«ç½‘ç«™æ£€æµ‹åˆ°ï¼Œå€¼å¾—ç ”ç©¶ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">downloadPic</span>(<span class="params">url,filename</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment">#ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line">        urllib.request.urlretrieve(url=url,filename=filename)</span><br><span class="line">    <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;IOError&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Exception&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SlideCrack</span>(<span class="title class_ inherited__">object</span>):<span class="comment"># https://github.com/crazyxw/SlideCrack/tree/master/slide_01</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, gap, bg, out</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        init code</span></span><br><span class="line"><span class="string">        :param gap: ç¼ºå£å›¾ç‰‡</span></span><br><span class="line"><span class="string">        :param bg: èƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line"><span class="string">        :param out: è¾“å‡ºå›¾ç‰‡</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.gap = gap</span><br><span class="line">        <span class="variable language_">self</span>.bg = bg</span><br><span class="line">        <span class="variable language_">self</span>.out = out</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clear_white</span>(<span class="params">img</span>):</span><br><span class="line">        <span class="comment"># æ¸…é™¤å›¾ç‰‡çš„ç©ºç™½åŒºåŸŸï¼Œè¿™é‡Œä¸»è¦æ¸…é™¤æ»‘å—çš„ç©ºç™½</span></span><br><span class="line">        img = cv2.imread(img)</span><br><span class="line">        rows, cols, channel = img.shape</span><br><span class="line">        min_x = <span class="number">255</span></span><br><span class="line">        min_y = <span class="number">255</span></span><br><span class="line">        max_x = <span class="number">0</span></span><br><span class="line">        max_y = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, rows):</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, cols):</span><br><span class="line">                t = <span class="built_in">set</span>(img[x, y])</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(t) &gt;= <span class="number">2</span>:</span><br><span class="line">                    <span class="keyword">if</span> x &lt;= min_x:</span><br><span class="line">                        min_x = x</span><br><span class="line">                    <span class="keyword">elif</span> x &gt;= max_x:</span><br><span class="line">                        max_x = x</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> y &lt;= min_y:</span><br><span class="line">                        min_y = y</span><br><span class="line">                    <span class="keyword">elif</span> y &gt;= max_y:</span><br><span class="line">                        max_y = y</span><br><span class="line">        img1 = img[min_x:max_x, min_y: max_y]</span><br><span class="line">        <span class="keyword">return</span> img1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">template_match</span>(<span class="params">self, tpl, target</span>):</span><br><span class="line">        th, tw = tpl.shape[:<span class="number">2</span>]</span><br><span class="line">        result = cv2.matchTemplate(target, tpl, cv2.TM_CCOEFF_NORMED)</span><br><span class="line">        <span class="comment"># å¯»æ‰¾çŸ©é˜µ(ä¸€ç»´æ•°ç»„å½“ä½œå‘é‡,ç”¨Matå®šä¹‰) ä¸­æœ€å°å€¼å’Œæœ€å¤§å€¼çš„ä½ç½®</span></span><br><span class="line">        min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)</span><br><span class="line">        tl = max_loc</span><br><span class="line">        br = (tl[<span class="number">0</span>] + tw, tl[<span class="number">1</span>] + th)</span><br><span class="line">        <span class="comment"># ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†ï¼Œå°†åŒ¹é…åŒºåŸŸæ ‡æ³¨å‡ºæ¥</span></span><br><span class="line">        <span class="comment"># targetï¼šç›®æ ‡å›¾åƒ</span></span><br><span class="line">        <span class="comment"># tlï¼šçŸ©å½¢å®šç‚¹</span></span><br><span class="line">        <span class="comment"># brï¼šçŸ©å½¢çš„å®½é«˜</span></span><br><span class="line">        <span class="comment"># (0,0,255)ï¼šçŸ©å½¢è¾¹æ¡†é¢œè‰²</span></span><br><span class="line">        <span class="comment"># 1ï¼šçŸ©å½¢è¾¹æ¡†å¤§å°</span></span><br><span class="line">        cv2.rectangle(target, tl, br, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">        cv2.imwrite(<span class="variable language_">self</span>.out, target)</span><br><span class="line">        <span class="keyword">return</span> tl[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">image_edge_detection</span>(<span class="params">img</span>):</span><br><span class="line">        edges = cv2.Canny(img, <span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line">        <span class="keyword">return</span> edges</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">discern</span>(<span class="params">self</span>):</span><br><span class="line">        img1 = <span class="variable language_">self</span>.clear_white(<span class="variable language_">self</span>.gap)</span><br><span class="line">        img1 = cv2.cvtColor(img1, cv2.COLOR_RGB2GRAY)</span><br><span class="line">        slide = <span class="variable language_">self</span>.image_edge_detection(img1)</span><br><span class="line"></span><br><span class="line">        back = cv2.imread(<span class="variable language_">self</span>.bg, <span class="number">0</span>)</span><br><span class="line">        back = <span class="variable language_">self</span>.image_edge_detection(back)</span><br><span class="line"></span><br><span class="line">        slide_pic = cv2.cvtColor(slide, cv2.COLOR_GRAY2RGB)</span><br><span class="line">        back_pic = cv2.cvtColor(back, cv2.COLOR_GRAY2RGB)</span><br><span class="line">        x = <span class="variable language_">self</span>.template_match(slide_pic, back_pic)</span><br><span class="line">        <span class="comment"># è¾“å‡ºæ¨ªåæ ‡, å³ æ»‘å—åœ¨å›¾ç‰‡ä¸Šçš„ä½ç½®</span></span><br><span class="line">        <span class="built_in">print</span>(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line">driver=webdriver.Chrome(executable_path=<span class="string">&#x27;chromedriver.exe&#x27;</span>)</span><br><span class="line"><span class="comment">#http://npm.taobao.org/mirrors/chromedriver/</span></span><br><span class="line">driver.maximize_window()</span><br><span class="line">driver.get(<span class="string">&#x27;https://dun.163.com/trial/jigsaw&#x27;</span>)</span><br><span class="line">driver.implicitly_wait(<span class="number">10</span>)<span class="comment">#æœ€å¤šç­‰å¾…æ—¶é—´</span></span><br><span class="line">driver.find_element_by_css_selector(<span class="string">&#x27;[captcha-mode=embed]&#x27;</span>).click()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">tag=driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_slider&#x27;</span>)</span><br><span class="line">driver.find_element_by_css_selector(<span class="string">&#x27;[captcha-mode=embed]&#x27;</span>).click()</span><br><span class="line">img1_src=driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_jigsaw&#x27;</span>).get_attribute(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">img2_src=driver.find_element_by_css_selector(<span class="string">&#x27;.yidun_bg-img&#x27;</span>).get_attribute(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(img1_src)</span><br><span class="line"><span class="built_in">print</span>(img2_src)</span><br><span class="line">downloadPic(img1_src,<span class="string">&#x27;1.png&#x27;</span>)</span><br><span class="line">downloadPic(img2_src,<span class="string">&#x27;2.jpg&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># æ»‘å—å›¾ç‰‡</span></span><br><span class="line">img1 = <span class="string">&quot;1.png&quot;</span></span><br><span class="line"><span class="comment"># èƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line">img2 = <span class="string">&quot;2.jpg&quot;</span></span><br><span class="line"><span class="comment"># å¤„ç†ç»“æœå›¾ç‰‡,ç”¨çº¢çº¿æ ‡æ³¨</span></span><br><span class="line">img3 = <span class="string">&quot;3.png&quot;</span></span><br><span class="line">sc = SlideCrack(img1, img2, img3)</span><br><span class="line">x=sc.discern()</span><br><span class="line">ActionChains(driver).drag_and_drop_by_offset(tag,x,<span class="number">0</span>).perform()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>éªŒè¯ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuç»ˆç«¯source: not found</title>
    <link href="/2022/01/07/ubuntu%E7%BB%88%E7%AB%AFsource-not-found/"/>
    <url>/2022/01/07/ubuntu%E7%BB%88%E7%AB%AFsource-not-found/</url>
    
    <content type="html"><![CDATA[<h2 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h2><p>shellè„šæœ¬ä¸­å«æœ‰sourceå‘½ä»¤è¿è¡Œæ—¶æç¤º source: not found</p><p>è¿è¡Œ ls -l &#x2F;bin&#x2F;sh åæ˜¾ç¤º&#x2F;bin&#x2F;sh -&gt; dash<br>è¿™è¯´æ˜æ˜¯ç”¨dashæ¥è¿›è¡Œè§£æçš„ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å‘½ä»¤è¡Œæ‰§è¡Œï¼šï¼ˆéœ€è¦rootæƒé™ï¼‰</p><pre><code>dpkg-reconfigure dash</code></pre><p>åœ¨ç•Œé¢ä¸­é€‰æ‹©no<br>å†è¿è¡Œls -l &#x2F;bin&#x2F;sh åæ˜¾ç¤º&#x2F;bin&#x2F;sh -&gt; bash</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/buynow123/article/details/51774018">https://blog.csdn.net/buynow123/article/details/51774018</a></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nodejs cheerioçˆ¬è™«</title>
    <link href="/2021/12/14/nodejs-cheerio%E7%88%AC%E8%99%AB/"/>
    <url>/2021/12/14/nodejs-cheerio%E7%88%AC%E8%99%AB/</url>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>è·å–ç¾å›½å„å·ç–«æƒ…æ•°æ®<a href="https://www.guruin.com/guides/covid19">ç¾å›½ç–«æƒ…ï¼ˆæ¯å°æ—¶æ›´æ–°ï¼‰ å„å·æ–°å¢æ–°å† ç¡®è¯Šæ¡ˆä¾‹ã€ç–«è‹—æ¥ç§ç‡ã€å®æ—¶æ–°é—»ã€ç–«æƒ…åœ°å›¾ - å’•å™œç¾å›½é€š (Guruin.com)</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image-3.png"></p><p>æœ¬æ¥ç”¨çš„æ•°æ®æ¥æºä¸æ˜¯è¿™ä¸ªç½‘ç«™ï¼Œä½†åŸå…ˆçš„æ•°æ®æºä¸è®©è·¨åŸŸçˆ¬è™«ï¼Œhttpå’Œrequestéƒ½æ²¡æ³•è·å–HTMLæºç ï¼Œåªå¥½æ¢äº†ä¸€ä¸ªæ•°æ®æº</p><h2 id="requestè·å–ç›®æ ‡ç½‘é¡µæºä»£ç "><a href="#requestè·å–ç›®æ ‡ç½‘é¡µæºä»£ç " class="headerlink" title="requestè·å–ç›®æ ‡ç½‘é¡µæºä»£ç "></a>requestè·å–ç›®æ ‡ç½‘é¡µæºä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"><span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.guruin.com/guides/covid19&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,                   <span class="comment">// è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        <span class="attr">headers</span>: &#123;                       <span class="comment">// æŒ‡å®šè¯·æ±‚å¤´</span></span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">                <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="keyword">function</span> (<span class="params">error, response, body</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error &amp;&amp; response.<span class="property">statusCode</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log(body) // bodyå³ä¸ºHTMLå†…å®¹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h2 id="è½¬æ¢ä¸ºcheerioå¯¹è±¡ï¼Œåˆ©ç”¨jqueryé€‰æ‹©å™¨è§„åˆ™é€‰å–éœ€è¦çš„å…ƒç´ "><a href="#è½¬æ¢ä¸ºcheerioå¯¹è±¡ï¼Œåˆ©ç”¨jqueryé€‰æ‹©å™¨è§„åˆ™é€‰å–éœ€è¦çš„å…ƒç´ " class="headerlink" title="è½¬æ¢ä¸ºcheerioå¯¹è±¡ï¼Œåˆ©ç”¨jqueryé€‰æ‹©å™¨è§„åˆ™é€‰å–éœ€è¦çš„å…ƒç´ "></a>è½¬æ¢ä¸ºcheerioå¯¹è±¡ï¼Œåˆ©ç”¨jqueryé€‰æ‹©å™¨è§„åˆ™é€‰å–éœ€è¦çš„å…ƒç´ </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(body);<span class="comment">// bodyä¸ºhtmlå†…å®¹</span></span><br><span class="line"></span><br><span class="line">[jQuery é€‰æ‹©å™¨ èœé¸Ÿæ•™ç¨‹ (runoob.<span class="property">com</span>)](<span class="attr">https</span>:<span class="comment">//www.runoob.com/jquery/jquery-ref-selectors.html)</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;é€‰æ‹©å™¨&#x27;</span>)å³ä¸ºç­›é€‰çš„å…ƒç´ ï¼Œè¦è·å–å…¶æ–‡æœ¬ï¼Œç”¨.<span class="title function_">text</span>()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">å¦‚$(<span class="string">&#x27;[data-total-positive]&#x27;</span>).<span class="title function_">text</span>()ï¼Œå¾—åˆ°å…·æœ‰ data-total-positive å±æ€§çš„å…ƒç´ çš„æ–‡æœ¬</span><br><span class="line"></span><br><span class="line">è¦éå†æ‰€æœ‰ç¬¦åˆçš„å…ƒç´ è¿›è¡Œå•ç‹¬æ“ä½œï¼Œä½¿ç”¨ $(<span class="string">&#x27;é€‰æ‹©å™¨&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params">i,elem</span>)&#123;$(<span class="variable language_">this</span>).<span class="title function_">text</span>()...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠæœ‰data-total-positiveå±æ€§çš„å…ƒç´ éå†ï¼Œå…¶æ–‡æœ¬å†…å®¹æ”¾åˆ°æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> positive = []</span><br><span class="line">$(<span class="string">&#x27;[data-total-positive]&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, elem</span>) &#123;</span><br><span class="line">                positive[i] = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span><br><span class="line">            &#125;);</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹éœ€æ±‚åˆ†æï¼Œå¯ä»¥é€‰æ‹©ç”¨ä»¥ä¸‹ä¸‰ä¸ªå±æ€§æ¥ç­›é€‰ï¼Œåˆ†åˆ«å¯¹åº”ç¡®è¯Šã€æ­»äº¡å’Œæ¥ç§ç‡ï¼Œç„¶ååˆ†åˆ«éå†æ”¾åˆ°ä¸‰ä¸ªæ•°ç»„ä¸­</p><p>â€¦â€¦å†™åˆ°è¿™åˆšå‘ç°å¿˜è®°çˆ¬å–å·åäº†ï¼Œé—®é¢˜ä¸å¤§ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image-4.png"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"><span class="comment">//  Cheerio æ˜¯ä¸€ä¸ªNode.jsçš„åº“ï¼Œ å®ƒå¯ä»¥ä»htmlçš„ç‰‡æ–­ä¸­æ„å»ºDOMç»“æ„ï¼Œç„¶åæä¾›åƒjqueryä¸€æ ·çš„cssé€‰æ‹©å™¨æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"><span class="comment">//åŒ…è£…æˆæ¨¡å—å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> &#123; getData &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.guruin.com/guides/covid19&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,                   <span class="comment">// è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">        <span class="attr">headers</span>: &#123;                       <span class="comment">// æŒ‡å®šè¯·æ±‚å¤´</span></span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">                <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="keyword">function</span> (<span class="params">error, response, body</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error &amp;&amp; response.<span class="property">statusCode</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log(body) // è¾“å‡ºç½‘é¡µå†…å®¹</span></span><br><span class="line">            <span class="comment">// æ¥ä¸‹æ¥ç”¨cheerioæ¥æå–ç½‘é¡µä¸­çš„æ•°æ®</span></span><br><span class="line">            <span class="comment">// é€šè¿‡ load æ–¹æ³•æŠŠ HTML ä»£ç è½¬æ¢æˆä¸€ä¸ª jQuery å¯¹è±¡</span></span><br><span class="line">            <span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(body);<span class="comment">//table-row .collapsed</span></span><br><span class="line">            <span class="keyword">var</span> positive = []</span><br><span class="line">            <span class="keyword">var</span> death = []</span><br><span class="line">            <span class="keyword">var</span> detection_rate = []</span><br><span class="line">            $(<span class="string">&#x27;[data-total-positive]&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, elem</span>) &#123;</span><br><span class="line">                positive[i] = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">&#x27;[data-total-death]&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, elem</span>) &#123;</span><br><span class="line">                death[i] = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">&#x27;[data-detection-rate]&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params">i, elem</span>) &#123;</span><br><span class="line">                detection_rate[i] = $(<span class="variable language_">this</span>).<span class="title function_">text</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(positive);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(death);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(detection_rate);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image-5-1024x241.png"></p>]]></content>
    
    
    <categories>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>nodejs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuæ™®é€šç”¨æˆ·å®‰è£…é…ç½®anaconda</title>
    <link href="/2021/12/10/ubuntu%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEanaconda/"/>
    <url>/2021/12/10/ubuntu%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEanaconda/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p><a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">anacondaæ¸…åæºåœ°å€</a></p><p>æ–¹æ³•ä¸€ï¼šåœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨wgetå‘½ä»¤</p><pre><code>wget -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.11-Linux-x86_64.sh</code></pre><p>æ–¹æ³•äºŒï¼šä¸‹è½½åˆ°æœ¬åœ°ä¹‹åé€šè¿‡ftpå·¥å…·ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ˆæ¨èä½¿ç”¨FinalShellï¼‰</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>åœ¨ä¸‹è½½ç›®å½•æ‰§è¡Œä¸‹è½½çš„bashæ–‡ä»¶</p><pre><code>bash Anaconda3-2021.11-Linux-x86_64.sh</code></pre><p>æ ¹æ®æç¤ºä¸€è·¯yeså³å¯</p><h4 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><p>å®‰è£…å®Œä¹‹åcondaè¿˜ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦æŠŠcondaç›®å½•åŠ å…¥åˆ°ç”¨æˆ·å˜é‡ä¸­</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image.png"></p><pre><code>vi ~/.bashrc</code></pre><p>åœ¨æœ€åä¸€è¡ŒåŠ å…¥</p><pre><code>export PATH=/home/username/anaconda3/bin:$PATH</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image-1.png"></p><p>ä¿å­˜é€€å‡ºï¼Œå†æ‰§è¡Œ</p><pre><code>source ~/.bashrc</code></pre><p>æˆåŠŸ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/12/image-2.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>selenium+beautifulsoup4è·å–ç½‘é¡µåŠ¨æ€åŠ è½½çš„æ•°æ®</title>
    <link href="/2021/11/25/seleniumbeautifulsoup4%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%95%B0%E6%8D%AE/"/>
    <url>/2021/11/25/seleniumbeautifulsoup4%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æƒ³è¦è·å–ä¸€ä¸ªç½‘é¡µä¸­çš„è¡¨æ ¼æ•°æ®ï¼Œä½†æ˜¯ä¸æä¾›ä¸‹è½½</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/image-5-1024x475.png"></p><p>ç½‘é¡µæºç ä¸­èƒ½çœ‹åˆ°è¡¨æ ¼ä¿¡æ¯ï¼Œä½†beautifulè·å–æºç ç»“æœä¸­æ²¡æœ‰è¡¨æ ¼</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/image-6.png"></p><p>åŸå› æ˜¯è¡¨æ ¼æ•°æ®ä»åå°åŠ¨æ€åŠ è½½ï¼Œbeautifulsoupæ— æ³•è·å–</p><h2 id="ä½¿ç”¨seleniumè·å–æºç "><a href="#ä½¿ç”¨seleniumè·å–æºç " class="headerlink" title="ä½¿ç”¨seleniumè·å–æºç "></a>ä½¿ç”¨seleniumè·å–æºç </h2><p>seleniumæ˜¯æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¯ä»¥æ¨¡æ‹Ÿäººçš„æ“ä½œï¼Œèƒ½å¤Ÿæ­£å¸¸è·å–æ‰€æœ‰æºç </p><p>ä¸ºäº†ç¨‹åºè¿è¡Œæ›´ä¼˜é›…ï¼Œè®¾ç½®æµè§ˆå™¨åœ¨åå°é™é»˜è¿è¡Œ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">options=webdriver.ChromeOptions()</span><br><span class="line"><span class="comment">#åå°é™é»˜è¿è¡Œ</span></span><br><span class="line">options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line"><span class="comment">#å¿½ç•¥æ— ç”¨çš„æŠ¥é”™</span></span><br><span class="line">options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;enable-automation&#x27;</span>,<span class="string">&#x27;enable-logging&#x27;</span>])</span><br><span class="line">driver=webdriver.Chrome(chrome_options=options,executable_path=<span class="string">&#x27;./driver/chromedriver.exe&#x27;</span>)</span><br><span class="line"><span class="comment">#æŠŠé©±åŠ¨æ–‡ä»¶æ”¾åˆ°æ ¹ç›®å½•ï¼Œæˆ–æŠŠè·¯å¾„å½“ä½œå‚æ•°ä¼ å…¥ï¼Œchromeé©±åŠ¨ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">#http://npm.taobao.org/mirrors/chromedriver/</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">driver=webdriver.Edge(executable_path=&#x27;./driver/edgedriver.exe&#x27;)</span></span><br><span class="line"><span class="string">https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#driver.set_window_size(1000,800)#æ‰“å¼€æµè§ˆå™¨çš„çª—å£å°ºå¯¸</span></span><br><span class="line"><span class="comment">#driver.maximize_window()</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&#x27;https://www.heywhale.com/mw/dataset/5fe1c7d183e4460030ab6c08/file&#x27;</span></span><br><span class="line">driver.get(url)</span><br><span class="line">driver.implicitly_wait(<span class="number">10</span>)<span class="comment">#æœ€å¤šç­‰å¾…æ—¶é—´</span></span><br><span class="line">html=driver.page_source<span class="comment">#htmlæºç </span></span><br><span class="line">driver.quit()<span class="comment">#é€€å‡ºæµè§ˆå™¨</span></span><br><span class="line"></span><br><span class="line">![](https://xinhaojin.github.io/imgs-host/past/<span class="number">2021</span>/<span class="number">11</span>/image-<span class="number">7.</span>png)</span><br><span class="line"></span><br><span class="line"><span class="comment">## è½¬ä¸ºbeautifulsoupå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment">#print(soup.prettify())#prettifyæ˜¯æ ¼å¼åŒ–ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## è·å–è¡¨æ ¼æ•°æ®</span></span><br><span class="line"></span><br><span class="line">results=[]<span class="comment">#è¡¨æ ¼ç»“æœä¿å­˜åˆ°äºŒç»´æ•°ç»„</span></span><br><span class="line">tags=soup.find_all(<span class="string">&#x27;tr&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> tags:<span class="comment">#tagè¡¨ç¤ºä¸€è¡Œæ•°æ®</span></span><br><span class="line">    result=[]</span><br><span class="line">    <span class="keyword">for</span> content <span class="keyword">in</span> tag.contents:<span class="comment">#contentè¡¨ç¤ºæ¯ä¸€è¡Œçš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        result.append(content.string)</span><br><span class="line">    results.append(result)</span><br><span class="line"><span class="comment">#print(results)</span></span><br><span class="line"></span><br><span class="line">![](https://xinhaojin.github.io/imgs-host/past/<span class="number">2021</span>/<span class="number">11</span>/image-<span class="number">8</span>-1024x336.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">## å†™å…¥Excel</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">wk=xlwt.Workbook()</span><br><span class="line">sheet = wk.add_sheet(<span class="string">&quot;æ•°æ®&quot;</span>, cell_overwrite_ok=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(results)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(results[<span class="number">0</span>])):</span><br><span class="line">        sheet.write(i , j, results[i][j])</span><br><span class="line">wk.save(<span class="string">&quot;æ•°æ®.xls&quot;</span>)</span><br><span class="line"></span><br><span class="line">![](https://xinhaojin.github.io/imgs-host/past/<span class="number">2021</span>/<span class="number">11</span>/image-<span class="number">9</span>-1024x263.png)</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">options=webdriver.ChromeOptions()</span><br><span class="line"><span class="comment">#åå°é™é»˜è¿è¡Œ</span></span><br><span class="line">options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line"><span class="comment">#å¿½ç•¥æ— ç”¨çš„æŠ¥é”™</span></span><br><span class="line">options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>,[<span class="string">&#x27;enable-automation&#x27;</span>,<span class="string">&#x27;enable-logging&#x27;</span>])</span><br><span class="line">driver=webdriver.Chrome(chrome_options=options,executable_path=<span class="string">&#x27;./driver/chromedriver.exe&#x27;</span>)</span><br><span class="line"><span class="comment">#æŠŠé©±åŠ¨æ–‡ä»¶æ”¾åˆ°æ ¹ç›®å½•ï¼Œæˆ–æŠŠè·¯å¾„å½“ä½œå‚æ•°ä¼ å…¥ï¼Œchromeé©±åŠ¨ä¸‹è½½åœ°å€å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">#http://npm.taobao.org/mirrors/chromedriver/</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">driver=webdriver.Edge(executable_path=&#x27;./driver/edgedriver.exe&#x27;)</span></span><br><span class="line"><span class="string">https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#driver.set_window_size(1000,800)#æ‰“å¼€æµè§ˆå™¨çš„çª—å£å°ºå¯¸</span></span><br><span class="line"><span class="comment">#driver.maximize_window()</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&#x27;https://www.heywhale.com/mw/dataset/5fe1c7d183e4460030ab6c08/file&#x27;</span></span><br><span class="line">driver.get(url)</span><br><span class="line">driver.implicitly_wait(<span class="number">10</span>)<span class="comment">#æœ€å¤šç­‰å¾…æ—¶é—´</span></span><br><span class="line">html=driver.page_source</span><br><span class="line">driver.quit()</span><br><span class="line">soup = BeautifulSoup(html,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment">#print(soup.prettify())#prettifyæ˜¯æ ¼å¼åŒ–ç»“æœ</span></span><br><span class="line"></span><br><span class="line">results=[]<span class="comment">#è¡¨æ ¼ç»“æœä¿å­˜åˆ°äºŒç»´æ•°ç»„</span></span><br><span class="line">tags=soup.find_all(<span class="string">&#x27;tr&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> tags:<span class="comment">#tagè¡¨ç¤ºä¸€è¡Œæ•°æ®</span></span><br><span class="line">    result=[]</span><br><span class="line">    <span class="keyword">for</span> content <span class="keyword">in</span> tag.contents:<span class="comment">#contentè¡¨ç¤ºæ¯ä¸€è¡Œçš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">        result.append(content.string)</span><br><span class="line">    results.append(result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(results)==<span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error!&quot;</span>)</span><br><span class="line">    exit()</span><br><span class="line">  </span><br><span class="line"><span class="comment">#å†™å…¥excel</span></span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line">wk=xlwt.Workbook()</span><br><span class="line">sheet = wk.add_sheet(<span class="string">&quot;æ•°æ®&quot;</span>, cell_overwrite_ok=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(results)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(results[<span class="number">0</span>])):</span><br><span class="line">        sheet.write(i , j, results[i][j])</span><br><span class="line">wk.save(<span class="string">&quot;æ•°æ®.xls&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Success!&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h2><p>å› ä¸ºè¿™æ¬¡éœ€æ±‚ä¸­çš„è¡¨æ ¼æ²¡æœ‰å®Œæ•´æ˜¾ç¤ºåœ¨ç½‘é¡µä¸­ï¼Œæ‰€ä»¥åªè·å–äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæ²¡æœ‰æ»¡è¶³éœ€æ±‚ï¼Œä½†å¯¹äºæ•°æ®å®Œå…¨æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šçš„éœ€æ±‚ï¼Œæœ‰å‚è€ƒä»·å€¼ï¼Œç‰¹æ­¤è®°å½•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/image-11.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>selenium</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>wordcloudè¯äº‘</title>
    <link href="/2021/11/10/wordcloud%E8%AF%8D%E4%BA%91/"/>
    <url>/2021/11/10/wordcloud%E8%AF%8D%E4%BA%91/</url>
    
    <content type="html"><![CDATA[<h4 id="åŠ è½½åœç”¨è¯"><a href="#åŠ è½½åœç”¨è¯" class="headerlink" title="åŠ è½½åœç”¨è¯"></a>åŠ è½½åœç”¨è¯</h4><p>stopwords.txtæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„åœç”¨è¯åˆ—è¡¨ï¼Œé‡Œé¢çš„è¯éƒ½ä¼šè¢«è¿‡æ»¤</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;è¯»å–åœç”¨è¯&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;stopwords.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    stopwords = <span class="built_in">set</span>([s.rstrip() <span class="keyword">for</span> s <span class="keyword">in</span> fp.readlines()])</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/image.png"></p><h4 id="è¯»å–æ–‡æœ¬å†…å®¹ï¼Œè¿‡æ»¤åœç”¨è¯"><a href="#è¯»å–æ–‡æœ¬å†…å®¹ï¼Œè¿‡æ»¤åœç”¨è¯" class="headerlink" title="è¯»å–æ–‡æœ¬å†…å®¹ï¼Œè¿‡æ»¤åœç”¨è¯"></a>è¯»å–æ–‡æœ¬å†…å®¹ï¼Œè¿‡æ»¤åœç”¨è¯</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;è·å–æ–‡æœ¬å†…å®¹&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    content = fp.read()</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;ä¸­æ–‡åˆ†è¯&quot;&quot;&quot;</span></span><br><span class="line">content = jieba.lcut(content)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;å»é™¤åœç”¨è¯&quot;&quot;&quot;</span></span><br><span class="line">text = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> content:</span><br><span class="line">    <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords:</span><br><span class="line">        text.append(word)</span><br></pre></td></tr></table></figure><h4 id="è®¡ç®—è¯é¢‘"><a href="#è®¡ç®—è¯é¢‘" class="headerlink" title="è®¡ç®—è¯é¢‘"></a>è®¡ç®—è¯é¢‘</h4><p>è¯é¢‘æ ¼å¼æ˜¯å­—å…¸{è¯ï¼šæ•°é‡}ï¼Œtextæ˜¯ä¸€ä¸ªå»æ‰åœç”¨è¯åçš„è¯æ•°ç»„ï¼Œç›´æ¥ç»Ÿè®¡</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frequency = <span class="built_in">dict</span>(Counter(text))  <span class="comment"># å»æ‰åœç”¨è¯åçš„è¯é¢‘ç»Ÿè®¡</span></span><br></pre></td></tr></table></figure><p>è®¡ç®—è¯é¢‘çš„ç›®çš„æ˜¯æ ¹æ®è¯é¢‘æ¥ç”Ÿæˆè¯äº‘</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wordcloud.fit_words(frequency)</span><br></pre></td></tr></table></figure><h4 id="wordcloudï¼ˆï¼‰å‚æ•°"><a href="#wordcloudï¼ˆï¼‰å‚æ•°" class="headerlink" title="wordcloudï¼ˆï¼‰å‚æ•°"></a>wordcloudï¼ˆï¼‰å‚æ•°</h4><p>å…·ä½“APIè¯·æŸ¥é˜…<a href="https://amueller.github.io/word_cloud/generated/wordcloud.WordCloud.html">wordcloud.WordCloud â€” wordcloud 1.8.1 documentation (amueller.github.io)</a></p><p>å¸¸ç”¨çš„æœ‰è¿™äº›</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wc = WordCloud(font_path=<span class="string">&#x27;C:\\Windows\\Fonts\\STZHONGS.TTF&#x27;</span>,  <span class="comment"># å­—ä½“</span></span><br><span class="line">               background_color=<span class="string">&quot;white&quot;</span>,  <span class="comment"># èƒŒæ™¯è‰²</span></span><br><span class="line">               mask=mask_image,  <span class="comment"># é®ç½©</span></span><br><span class="line">               prefer_horizontal=<span class="number">0.6</span>,  <span class="comment"># æ°´å¹³æ–‡å­—æ¯”ä¾‹</span></span><br><span class="line">               width=<span class="number">800</span>,  <span class="comment"># å®½åº¦</span></span><br><span class="line">               height=<span class="number">1000</span>,  <span class="comment"># é«˜åº¦</span></span><br><span class="line">               colormap=<span class="string">&quot;tab10&quot;</span>  <span class="comment"># æŒ‡å®šå­—ä½“é¢œè‰²</span></span><br><span class="line">               )</span><br></pre></td></tr></table></figure><p>å…¶ä¸­é®ç½©æ˜¯ä¸€ä¸ªç™½åº•çš„å›¾ç‰‡ï¼Œéç™½è‰²éƒ¨åˆ†å°±æ˜¯è¯äº‘çš„å½¢çŠ¶</p><p>æœ‰æ—¶å€™æ‰¾çš„èƒŒæ™¯å›¾ä¸æ˜¯ç™½è‰²æˆ–è€…ä¸å¤Ÿç™½ï¼Œå¯ä»¥åœ¨ç”»å›¾å·¥å…·ä¸­æ‰“å¼€å›¾ç‰‡ï¼Œç”»ç¬”-å¡«å……-é¢œè‰²é»˜è®¤-ç™½è‰²-ç‚¹å‡»èƒŒæ™¯è‰²</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/image-1-1024x792.png"></p><p>colormapå°±æ˜¯æŒ‡å®šçš„é¢œè‰²é›†åˆï¼Œå‚æ•°å¡«çš„æ˜¯stringç±»å‹ï¼Œå¯é€‰çš„å€¼æœ‰ä¸‹é¢è¿™äº›ï¼Œå·¦ä¾§åˆ—è¡¨éƒ½å¯ä½œä¸ºå‚æ•°å€¼ï¼Œå¯¹åº”çš„é¢œè‰²æ˜¯å³è¾¹è¿™äº›</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_00.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_01.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_02.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_03.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_04.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/colormaps_reference_05.png"></p><h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/11/output.png"></p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">from</span> imageio <span class="keyword">import</span> imread</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;è¯»å–åœç”¨è¯&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;stopwords.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    stopwords = <span class="built_in">set</span>([s.rstrip() <span class="keyword">for</span> s <span class="keyword">in</span> fp.readlines()])  <span class="comment"># æ•°ç»„è½¬é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;è·å–æ–‡æœ¬å†…å®¹&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    content = fp.read()</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;ä¸­æ–‡åˆ†è¯&quot;&quot;&quot;</span></span><br><span class="line">content = jieba.lcut(content)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;å»é™¤åœç”¨è¯&quot;&quot;&quot;</span></span><br><span class="line">text = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> content:</span><br><span class="line">    <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords:</span><br><span class="line">        text.append(word)</span><br><span class="line"></span><br><span class="line">frequency = <span class="built_in">dict</span>(Counter(text))  <span class="comment"># å»æ‰åœç”¨è¯åçš„è¯é¢‘ç»Ÿè®¡</span></span><br><span class="line"></span><br><span class="line">mask_image = imread(<span class="string">&quot;map.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line">wc = WordCloud(font_path=<span class="string">&#x27;C:\\Windows\\Fonts\\STZHONGS.TTF&#x27;</span>,  <span class="comment"># å­—ä½“</span></span><br><span class="line">               background_color=<span class="string">&quot;white&quot;</span>,  <span class="comment"># èƒŒæ™¯è‰²</span></span><br><span class="line">               mask=mask_image,  <span class="comment"># é®ç½©</span></span><br><span class="line">               prefer_horizontal=<span class="number">0.6</span>,  <span class="comment"># æ°´å¹³æ–‡å­—æ¯”ä¾‹</span></span><br><span class="line">               width=<span class="number">800</span>,  <span class="comment"># å®½åº¦</span></span><br><span class="line">               height=<span class="number">1000</span>,  <span class="comment"># é«˜åº¦</span></span><br><span class="line">               colormap=<span class="string">&quot;tab10&quot;</span></span><br><span class="line">               )</span><br><span class="line"></span><br><span class="line">wc.fit_words(frequency)</span><br><span class="line"></span><br><span class="line">plt.imshow(wc, interpolation=<span class="string">&quot;bilinear&quot;</span>)</span><br><span class="line">plt.axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">plt.show()</span><br><span class="line">wc.to_file(<span class="string">&quot;output.png&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>worldcloud</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çº¢ç±³AC2100åœ¨çº¿åˆ·breed+è€æ¯›å­å›ºä»¶</title>
    <link href="/2021/10/25/%E7%BA%A2%E7%B1%B3ac2100%E5%9C%A8%E7%BA%BF%E5%88%B7breed%E8%80%81%E6%AF%9B%E5%AD%90%E5%9B%BA%E4%BB%B6/"/>
    <url>/2021/10/25/%E7%BA%A2%E7%B1%B3ac2100%E5%9C%A8%E7%BA%BF%E5%88%B7breed%E8%80%81%E6%AF%9B%E5%AD%90%E5%9B%BA%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>çº¯è®°å½•ï¼Œä¸æ”¾å›¾äº†</p><h4 id="åˆ·breed"><a href="#åˆ·breed" class="headerlink" title="åˆ·breed"></a>åˆ·breed</h4><p>ç™»å½•è·¯ç”±å™¨åå°192.168.31.1ï¼Œå¤åˆ¶åœ°å€æ çš„stock</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/stock-1024x286.png"></p><p>æ›¿æ¢æ‰ä¸‹é¢åœ°å€ä¸­çš„stockï¼Œç›´æ¥åœ¨æµè§ˆå™¨é‡Œè¾“å…¥å¹¶å›è½¦ï¼Œè¿”å›ä¸€ä¸ªcode:0å³æˆåŠŸ</p><p><a href="http://192.168.31.1/cgi-bin/luci/;stok=dcd5c3196a7d5e620bd382328bf36218/api/misystem/set_config_iotdev?bssid=Xiaomi&user_id=longdike&ssid=%0Acd%20/tmp%0Acurl%20-o%20B%20-O%20https://breed.hackpascal.net/breed-mt7621-xiaomi-r3g.bin%20-k%0A%5B%20-z%20%22$(sha256sum%20B%20%7C%20grep%20242d42eb5f5aaa67ddc9c1baf1acdf58d289e3f792adfdd77b589b9dc71eff85)%22%20%5D%20%7C%7C%20mtd%20-r%20write%20B%20Bootloader%0A">http://192.168.31.1/cgi-bin/luci/;stok=dcd5c3196a7d5e620bd382328bf36218/api/misystem/set_config_iotdev?bssid=Xiaomi&amp;user_id=longdike&amp;ssid=%0Acd%20%2Ftmp%0Acurl%20-o%20B%20-O%20https%3A%2F%2Fbreed.hackpascal.net%2Fbreed-mt7621-xiaomi-r3g.bin%20-k%0A%5B%20-z%20%22%24(sha256sum%20B%20%7C%20grep%20242d42eb5f5aaa67ddc9c1baf1acdf58d289e3f792adfdd77b589b9dc71eff85)%22%20%5D%20%7C%7C%20mtd%20-r%20write%20B%20Bootloader%0A</a></p><p>ç­‰å¾…è·¯ç”±å™¨ç¯å˜æˆæ©˜è‰²ï¼Œæ–­å¼€ç”µæºï¼ŒæŒ‰ä¸‹resetï¼ŒåŒæ—¶æ¥é€šç”µæºï¼Œç­‰å¾…10ç§’é’Ÿæ¾å¼€resetï¼Œç­‰å¾…ä¸€ä¸‹è¾“å…¥192.168.1.1è¿›å…¥breedåå°</p><h4 id="åˆ·è€æ¯›å­å›ºä»¶"><a href="#åˆ·è€æ¯›å­å›ºä»¶" class="headerlink" title="åˆ·è€æ¯›å­å›ºä»¶"></a>åˆ·è€æ¯›å­å›ºä»¶</h4><p>åœ¨breedåå°é€‰æ‹©å›ºä»¶æ›´æ–°ï¼Œä¸Šä¼ å›ºä»¶å³å¯</p><p><a href="https://xinhaojin.lanzoui.com/ixnETvqlrfa">å›ºä»¶ä¸‹è½½åœ°å€</a></p><p><a href="https://www.right.com.cn/forum/forum.php?mod=forumdisplay&fid=171&filter=digest&digest=1&typeid=43">å›ºä»¶ç²¾åå¸–</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210306233855.png"></p><p>æç¤ºæ›´æ–°å®Œæˆåç­‰å¾…ä¸¤åˆ†é’Ÿè¿›å…¥192.168.123.1ï¼Œç”¨æˆ·åadminï¼Œå¯†ç adminï¼Œè¿›å…¥è€æ¯›å­åå°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è·¯ç”±å™¨åˆ·æœº</tag>
      
      <tag>è€æ¯›å­å›ºä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jupyter matplotlibç”»å›¾ä¸­æ–‡ä¹±ç çš„è§£å†³æ–¹æ¡ˆ</title>
    <link href="/2021/10/14/jupyter-matplotlib%E7%94%BB%E5%9B%BE%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/2021/10/14/jupyter-matplotlib%E7%94%BB%E5%9B%BE%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<p>åœ¨jupyter notebookä¸­ä½¿ç”¨matplotlibç”»å›¾æ—¶ï¼Œä¸­æ–‡å­—ä½“æ˜¾ç¤ºä¹±ç </p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-1-1024x416.png"></p><p>çœ‹æç¤ºæ˜¯ç¼ºå°‘å­—ä½“</p><h4 id="æŸ¥æ‰¾matplotlibå­—ä½“é…ç½®æ–‡ä»¶çš„ç›®å½•"><a href="#æŸ¥æ‰¾matplotlibå­—ä½“é…ç½®æ–‡ä»¶çš„ç›®å½•" class="headerlink" title="æŸ¥æ‰¾matplotlibå­—ä½“é…ç½®æ–‡ä»¶çš„ç›®å½•"></a>æŸ¥æ‰¾matplotlibå­—ä½“é…ç½®æ–‡ä»¶çš„ç›®å½•</h4><p>import matplotlib<br>matplotlib.matplotlib_fname()</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-2.png"></p><h4 id="ä¸‹è½½å­—ä½“ï¼Œæ”¾å…¥å¯¹åº”ç›®å½•ä¸­"><a href="#ä¸‹è½½å­—ä½“ï¼Œæ”¾å…¥å¯¹åº”ç›®å½•ä¸­" class="headerlink" title="ä¸‹è½½å­—ä½“ï¼Œæ”¾å…¥å¯¹åº”ç›®å½•ä¸­"></a>ä¸‹è½½å­—ä½“ï¼Œæ”¾å…¥å¯¹åº”ç›®å½•ä¸­</h4><p>ä¸‹è½½åœ°å€ï¼š<a href="https://xinhaojin.lanzoui.com/ibUMJvbo7ib">https://xinhaojin.lanzoui.com/ibUMJvbo7ib</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-3.png"></p><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æ–°å­—ä½“"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æ–°å­—ä½“" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æ–°å­—ä½“"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æ–°å­—ä½“</h4><p>æ‰“å¼€matplotliblibrc</p><p>å–æ¶ˆfont.familyå‰é¢çš„æ³¨é‡Š</p><p>å–æ¶ˆfont.sans-serifå‰é¢çš„æ³¨é‡Šï¼Œå†’å·åé¢å¢åŠ SimHei</p><p>å–æ¶ˆaxes.unicode_minuså‰é¢çš„æ³¨é‡Šï¼ŒTrueæ”¹ä¸ºFalse</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-4.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-5.png"></p><h4 id="æ¸…é™¤ç¼“å­˜"><a href="#æ¸…é™¤ç¼“å­˜" class="headerlink" title="æ¸…é™¤ç¼“å­˜"></a>æ¸…é™¤ç¼“å­˜</h4><p>åˆ é™¤~&#x2F;.cache&#x2F;matplotlib</p><h4 id="é‡å¯æœåŠ¡å™¨"><a href="#é‡å¯æœåŠ¡å™¨" class="headerlink" title="é‡å¯æœåŠ¡å™¨"></a>é‡å¯æœåŠ¡å™¨</h4><p>ä¸­æ–‡å‡ºç°</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image-6.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonä¸RPAï¼ˆè½¬è½½ï¼‰</title>
    <link href="/2021/09/14/python%E4%B8%8Erpa%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/"/>
    <url>/2021/09/14/python%E4%B8%8Erpa%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>RPAï¼Œæ˜¯Robotic Process Automationçš„è‹±æ–‡ç¼©å†™ï¼Œä¸­æ–‡æ˜¯æœºå™¨äººæµç¨‹è‡ªåŠ¨åŒ–ï¼Œåˆ©ç”¨è½¯ä»¶å°†é‡å¤æ€§çš„å·¥ä½œè‡ªåŠ¨åŒ–ã€‚åŸºæœ¬ç›®æ ‡æ˜¯è®©äººä»é‡å¤æ€§å¼ºçš„ç¹çå·¥ä½œä¸­è§£æ”¾å‡ºæ¥å»åšæ›´æœ‰æ„ä¹‰æ›´å…·åˆ›é€ æ€§çš„å·¥ä½œã€‚æ¯”å¦‚è‡ªåŠ¨çˆ¬å–ç½‘ç«™å†…å®¹ã€å°†åå‡ ä¸ªExcelä¸­æ•°æ®åˆå¹¶åˆ†æã€å®šæ—¶å‘é€é‚®ä»¶ç­‰éƒ½æ˜¯ç®€å•çš„RPAåº”ç”¨çš„ä¾‹å­ã€‚</p><p>åŠ ä¸Šå¦‚ä»ŠAIæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œèƒ½æå¤§åœ°æ‰©å±•è½¯ä»¶è‡ªåŠ¨åŒ–çš„åº”ç”¨èŒƒå›´ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå¯ä»¥é€šè¿‡å›¾åƒè¯†åˆ«ã€è¯­ä¹‰ç†è§£ç­‰æŠ€æœ¯å°†å›¾ç‰‡ã€ç‰¹å®šæ ¼å¼çš„æ–‡æ¡£ç­‰éç»“æ„åŒ–æ•°æ®è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œè‡ªåŠ¨æäº¤åˆ°æ•°æ®ä¸­å¿ƒï¼Œç„¶ååŸºäºæœºå™¨å­¦ä¹ ç®—æ³•å®šæ—¶åˆ†æç»“æœç”ŸæˆæŠ¥è¡¨å¹¶å‘é€åˆ°é‚®ç®±ã€‚</p><p>RPAçš„æœ¬è´¨æ˜¯è®©è®¡ç®—æœºè‡ªåŠ¨ä¸ºäººæœåŠ¡ï¼ŒRPAå°±åƒä¸€ä¸ªç²˜åˆå‰‚ï¼Œé€šè¿‡RPAäººä¸éœ€è¦å¯¹è®¡ç®—æœºæ“ä½œç»†èŠ‚ï¼Œåªéœ€è¦æŒ‡æŒ¥è®¡ç®—æœºæ‰§è¡ŒæŸä¸ªä»»åŠ¡å°±è¡Œäº†ã€‚</p><p>ç°åœ¨å›½å†…å¤–æœ‰ä¸å°‘åŠŸèƒ½åœ¨ç ”å‘RPAè½¯ä»¶ç”¨äºå®ç°æµç¨‹è‡ªåŠ¨åŒ–ã€‚ä½†ä½œä¸ºä¸€ä¸ªPythonç¨‹åºå‘˜ï¼Œæˆ‘è§‰å¾—Pythonæ˜¯å®ç°RPAçš„å¤©ç„¶å·¥å…·ã€‚</p><p>Pythonä½œä¸ºRPAå·¥å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><p>ä¸€æ–¹é¢ï¼ŒPythonè¯­æ³•ç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚è€Œä¸”æ—©æœŸPythonèµ·æºå°±æ˜¯ä½œä¸ºcè¯­è¨€å’Œshellè„šæœ¬ä¹‹é—´çš„ä¸­é—´å±‚è€Œè¢«å¼€å‘å‡ºæ¥ï¼ˆè¯¦è§æ¼«ç”»Pythonä¸‰åå¹´ï¼‰ï¼Œå¯è§å®ƒæœ¬èº«å°±æœ‰è¿™æ–¹é¢çš„åŸºå› ï¼›</p><p>å¦ä¸€æ–¹é¢ï¼ŒPythonåº”ç”¨èŒƒå›´å¹¿é˜”ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç®¡ç†ã€æ–‡ä»¶å¤„ç†ã€é‚®ä»¶å‘é€ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç­‰ï¼ŒåŸºæœ¬ä¸Šéƒ½æœ‰å…è´¹å¼€æºçš„ç±»åº“å¯ä»¥ä½¿ç”¨ï¼ŒRPAéœ€è¦çš„åŠŸèƒ½PythonåŸºæœ¬ä¸Šéƒ½å¯ä»¥æ”¯æŒï¼Œä¸éœ€è¦è‡ªå·±å†é‡æ–°å¼€å‘ã€‚</p><p>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åŸºäºPythonæ ¹æ®è‡ªå·±çš„éœ€è¦å®šåˆ¶ä¸€å¥—å¼ºå¤§çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿã€‚ä½†æ ¹æ®ä¸šåŠ¡ä¸åŒå®ç°æ–¹å¼ä¹Ÿä¸èƒ½ä¸€æ¦‚è€Œè®ºã€‚è¿™é‡Œæ”¶é›†æ•´ç†äº†å‡ ä¸ªå¸¸ç”¨è‡ªåŠ¨åŒ–å¤„ç†å·¥å…·åº“ä¾›å¤§å®¶å‚è€ƒå­¦ä¹ ï¼Œèƒ½åŠ›æœ‰é™ï¼Œä¸è¶³ä¹‹å¤„è¯·å¤šæŒ‡æ­£ã€‚</p><p>æ¦‚è¦å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaHp3YjYxeTV6ajMweXUwdTBqd3MuanBn-1024x882.jpg"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaHp3YjVubjd6ajMxMnUwaGdqdDMuanBn-1024x460.jpg"></p><h4 id="Excelè‡ªåŠ¨åŒ–"><a href="#Excelè‡ªåŠ¨åŒ–" class="headerlink" title="Excelè‡ªåŠ¨åŒ–"></a>Excelè‡ªåŠ¨åŒ–</h4><p><strong>åŠŸèƒ½</strong>ï¼šå®ç°å¯¹excelæ–‡ä»¶çš„å¢åˆ æ”¹å†™ã€æ ¼å¼ä¿®æ”¹ç­‰</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šxlwingsã€xlrdã€xlwt</p><ul><li>xlrdç”¨äºè¯»Excelæ–‡ä»¶(<a href="https://xlrd.readthedocs.io/en/latest/">å®˜æ–¹æ–‡æ¡£</a>)</li><li>xlwtç”¨äºå†™Excelæ–‡ä»¶(<a href="https://xlwt.readthedocs.io/en/latest/">å®˜æ–¹æ–‡æ¡£</a>)</li><li>xlwingså®ç°äº†Excelä¸­è°ƒç”¨Pythonï¼Œpythonä¸­è°ƒç”¨Excelçš„éªšæ“ä½œï¼Œè¿˜æ”¯æŒVBAã€‚ï¼ˆ<a href="https://www.xlwings.org/">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxneTFnaTB4N3B4djNiajMyNGgwdTBha2suanBn-1024x402.jpg"></p><h4 id="Wordè‡ªåŠ¨åŒ–"><a href="#Wordè‡ªåŠ¨åŒ–" class="headerlink" title="Wordè‡ªåŠ¨åŒ–"></a>Wordè‡ªåŠ¨åŒ–</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šå¯¹wordæ–‡ä»¶çš„å¢åˆ æ”¹å†™ã€æ ¼å¼ä¿®æ”¹ç­‰</p><p><strong>å¸¸ç”¨åº“</strong>ï¼špython-docx</p><p>å®˜æ–¹ç¤ºä¾‹ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBpemdyOGxlajMwd2owdTBxYzMuanBn-1024x944.jpg"></p><p><a href="https://python-docx.readthedocs.io/en/latest/">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="PPTè‡ªåŠ¨åŒ–"><a href="#PPTè‡ªåŠ¨åŒ–" class="headerlink" title="PPTè‡ªåŠ¨åŒ–"></a>PPTè‡ªåŠ¨åŒ–</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šå¯¹PPTçš„åˆ›å»ºå’Œä¿®æ”¹</p><p><strong>å¸¸ç”¨åº“</strong>ï¼špython-pptx</p><p>ç®€å•ç¤ºä¾‹ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBpemhiYXE5ajMxY3EwdTBncDMuanBn-1024x631.jpg"></p><p><a href="https://python-pptx.readthedocs.io/en/latest/user/quickstart.html">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="é‚®ä»¶è‡ªåŠ¨åŒ–"><a href="#é‚®ä»¶è‡ªåŠ¨åŒ–" class="headerlink" title="é‚®ä»¶è‡ªåŠ¨åŒ–"></a>é‚®ä»¶è‡ªåŠ¨åŒ–</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šæ„é€ é‚®ä»¶å’Œå‘é€é‚®ä»¶</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šsmtplibå’Œemail</p><p><strong>smtplib</strong>æä¾›äº†ä¸€ç§å¾ˆæ–¹ä¾¿çš„é€”å¾„å‘é€ç”µå­é‚®ä»¶ã€‚å®ƒå¯¹smtpåè®®è¿›è¡Œäº†ç®€å•çš„å°è£…ã€‚ä½¿ç”¨å¦‚ä¸‹ï¼š</p><p>import smtplib<br>smtp &#x3D; smtplib.SMTP( [host [, port [, local_hostname]]] )</p><p>å…¶ä¸­å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><p>host: SMTP æœåŠ¡å™¨ä¸»æœºã€‚ ä½ å¯ä»¥æŒ‡å®šä¸»æœºçš„ipåœ°å€æˆ–è€…åŸŸåå¦‚: runoob.comï¼Œè¿™ä¸ªæ˜¯å¯é€‰å‚æ•°ã€‚<br>port: å¦‚æœä½ æä¾›äº† host å‚æ•°, ä½ éœ€è¦æŒ‡å®š SMTP æœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ SMTP ç«¯å£å·ä¸º25ã€‚<br>local_hostname: å¦‚æœ SMTP åœ¨ä½ çš„æœ¬æœºä¸Šï¼Œä½ åªéœ€è¦æŒ‡å®šæœåŠ¡å™¨åœ°å€ä¸º localhost å³å¯ã€‚<br>ç„¶åä½¿ç”¨sendmailå‘é€é‚®ä»¶ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p>smtp.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options])</p><p>å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>from_addr: é‚®ä»¶å‘é€è€…åœ°å€ã€‚</li><li>to_addrs: å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œé‚®ä»¶å‘é€åœ°å€ã€‚</li><li>msg: å‘é€æ¶ˆæ¯</li></ul><p><strong>email</strong>åº“å¯ä»¥è¯»å–ã€å†™å…¥å’Œå‘é€ç”µå­é‚®ä»¶å†…å®¹ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p>import smtplib</p><h1 id="Import-the-email-modules-weâ€™ll-need"><a href="#Import-the-email-modules-weâ€™ll-need" class="headerlink" title="Import the email modules weâ€™ll need"></a>Import the email modules weâ€™ll need</h1><p>from email.message import EmailMessage</p><h1 id="Open-the-plain-text-file-whose-name-is-in-textfile-for-reading"><a href="#Open-the-plain-text-file-whose-name-is-in-textfile-for-reading" class="headerlink" title="Open the plain text file whose name is in textfile for reading."></a>Open the plain text file whose name is in textfile for reading.</h1><p>with open(textfile) as fp:<br>    # Create a text&#x2F;plain message<br>    msg &#x3D; EmailMessage()<br>    msg.set_content(fp.read())</p><h1 id="me-the-senderâ€™s-email-address"><a href="#me-the-senderâ€™s-email-address" class="headerlink" title="me &#x3D;&#x3D; the senderâ€™s email address"></a>me &#x3D;&#x3D; the senderâ€™s email address</h1><h1 id="you-the-recipientâ€™s-email-address"><a href="#you-the-recipientâ€™s-email-address" class="headerlink" title="you &#x3D;&#x3D; the recipientâ€™s email address"></a>you &#x3D;&#x3D; the recipientâ€™s email address</h1><p>msg[â€˜Subjectâ€™] &#x3D; fâ€™The contents of {textfile}â€™<br>msg[â€˜Fromâ€™] &#x3D; me<br>msg[â€˜Toâ€™] &#x3D; you</p><h1 id="Send-the-message-via-our-own-SMTP-server"><a href="#Send-the-message-via-our-own-SMTP-server" class="headerlink" title="Send the message via our own SMTP server."></a>Send the message via our own SMTP server.</h1><p>s &#x3D; smtplib.SMTP(â€˜localhostâ€™)<br>s.send_message(msg)<br>s.quit()</p><h4 id="æ–‡ä»¶å¤„ç†"><a href="#æ–‡ä»¶å¤„ç†" class="headerlink" title="æ–‡ä»¶å¤„ç†"></a>æ–‡ä»¶å¤„ç†</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šæ‰¹é‡ä¿®æ”¹æ–‡ä»¶ç­‰é‡å¤æ€§æ“ä½œ</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šos</p><p><strong>os</strong>åº“æä¾›äº†ä¸€ç§ä½¿ç”¨ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½çš„ä¾¿æ·å¼é€”å¾„ï¼Œå¸¸ç”¨æ“ä½œå¦‚ä¸‹ï¼š</p><p>å‡½æ•°</p><p>åŠŸèƒ½</p><p>os.listdir()</p><p>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆåŒ…æ‹¬è¢«éšè—çš„ï¼‰</p><p>os.system()</p><p>è¿è¡Œshellå‘½ä»¤ï¼›å¯å°† æŒ‡ä»¤ ä»¥ å­—ç¬¦ä¸² &#x2F; å­—ç¬¦ä¸²æ‹¼æ¥ çš„å½¢å¼å–‚è¿›å»</p><p>os.sep()</p><p>æ›´æ”¹æ“ä½œç³»ç»Ÿä¸­çš„è·¯å¾„åˆ†éš”ç¬¦</p><p>os.getcwd()</p><p>è·å–å½“å‰è·¯å¾„(ä¸­é—´ä¼šè‡ªåŠ¨æ·»ä¸Šä¸€ä¸ªè·¯å¾„åˆ†éš”ç¬¦)</p><p>os.walk</p><p>å¾ªç¯éå†ç›®å½•ï¼Œè¿”å›tupleè¡¨ï¼Œè¡¨ä¸­æ¯ä¸€ä¸ªtupleåŒ…å«è¯¥å±‚æ–‡ä»¶ã€æ–‡ä»¶å¤¹åŠè¯¥å±‚çˆ¶èŠ‚ç‚¹</p><p>os.path.isfile()</p><p>æ˜¯å¦æ˜¯æ–‡ä»¶</p><p>os.path.isdir()</p><p>æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹</p><p>os.path.exists()</p><p>è·¯å¾„æ˜¯å¦å­˜åœ¨</p><p>os.path.abspath()</p><p>å¦‚æœè¾“å…¥è·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è½¬æ¢ä¸ºç»å¯¹è·¯å¾„</p><p>os.path.dirname()</p><p>è·å–æŒ‡å®šç›®å½•çš„çˆ¶ç›®å½•è·¯å¾„</p><p>os.path.pardir</p><p>è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•è·¯å¾„</p><p>os.pardir()</p><p>è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•è·¯å¾„</p><p>os.path.split()</p><p>å°†ç›®å½•å’Œæ–‡ä»¶ååˆ†å‰²å¼€ï¼Œç»„æˆäºŒå…ƒç»„è¿”å›</p><p>os.remove()</p><p>åˆ é™¤æŒ‡å®šæ–‡ä»¶</p><p>os.rmdir()</p><p>åˆ é™¤ç©ºæ–‡ä»¶å¤¹</p><p>os.mkdir()</p><p>æ–°å»ºæ–‡ä»¶å¤¹</p><p>os.makedirs( , exist_ok&#x3D;True)</p><p>åˆ›å»ºé€’å½’çš„ç›®å½•æ ‘(exist_okæ˜¯py3.2æ‰åŠ å…¥çš„å‚æ•°)</p><p>os.chdir()</p><p>æ”¹å˜å½“å‰ç›®å½•åˆ°æŒ‡å®šç›®å½•ä¸­</p><p>os.rename(path1 ,path2)</p><p>é‡å‘½åæ–‡ä»¶</p><p>os.chmod(path ,mode)</p><p>æ”¹å˜æ–‡ä»¶æƒé™æ¨¡å¼</p><p>os.access(path ,mode)</p><p>æ£€éªŒæ–‡ä»¶æƒé™æ¨¡å¼</p><p>os.sep</p><p>è¾“å‡ºæ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦ã€‚winä¸‹ä¸ºâ€â€,macxä¸‹ä¸ºâ€&#x2F;â€œ</p><p>os.linesep</p><p>è¾“å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦</p><p>os.pathsep</p><p>è¾“å‡ºç”¨äºåˆ†å‰²æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²</p><p>os.name</p><p>è¾“å‡ºå­—ç¬¦ä¸²æŒ‡ç¤ºå½“å‰ä½¿ç”¨å¹³å°ã€‚win-&gt;â€˜ntâ€™; mac-&gt;â€˜posixâ€™</p><p>os.environ</p><p>è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡</p><h4 id="çˆ¬è™«"><a href="#çˆ¬è™«" class="headerlink" title="çˆ¬è™«"></a>çˆ¬è™«</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šçˆ¬å–è±†ç“£ã€çŸ¥ä¹ã€å¾®åšç­‰æ•°æ®ç”¨äºæ•°æ®åˆ†æ</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šrequestsã€scrapy</p><p><strong>requests</strong>æ˜¯ä¸€ä¸ªPython HTTPåº“ï¼Œåœ¨Apache License 2.0ä¸‹å‘å¸ƒã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯ä½¿HTTPè¯·æ±‚æ›´ç®€å•ï¼Œæ›´äººæ€§åŒ–ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p>&gt;&gt;&gt; r &#x3D; requests.get(â€˜<a href="https://api.github.com/user">https://api.github.com/user</a>â€˜, auth&#x3D;(â€˜userâ€™, â€˜passâ€™))</p><blockquote><blockquote><blockquote><p>r.status_code<br>200<br>r.headers[â€˜content-typeâ€™]<br>â€˜application&#x2F;json; charset&#x3D;utf8â€™<br>r.encoding<br>â€˜utf-8â€™<br>r.text<br>â€˜{â€œtypeâ€:â€Userâ€â€¦â€™<br>r.json()<br>{â€˜private_gistsâ€™: 419, â€˜total_private_reposâ€™: 77, â€¦}</p></blockquote></blockquote></blockquote><p><a href="https://requests.readthedocs.io/en/master/">å®˜æ–¹æ–‡æ¡£</a></p><p><strong>Scrapy</strong>Â æ˜¯ç”¨Python å®ç°çš„ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ã€æå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ï¼Œå…¶æ¶æ„å¦‚ä¸‹ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBqbmNva2xhajMwamcwZHE3NWQuanBn.jpg"></p><p><a href="https://scrapy-chs.readthedocs.io/zh_CN/0.24/intro/tutorial.html">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="æ•°æ®åˆ†æ"><a href="#æ•°æ®åˆ†æ" class="headerlink" title="æ•°æ®åˆ†æ"></a>æ•°æ®åˆ†æ</h4><p>å®ç°åŠŸèƒ½ï¼šå¤„ç†ç»Ÿè®¡å„ç§æ•°æ®ï¼Œå¹¶è¿›è¡Œå¯è§†åŒ–</p><p>å¸¸ç”¨åº“ï¼špandasã€matplotlib</p><p>pandasæ˜¯ä¸ºPythonç¼–ç¨‹è¯­è¨€ç¼–å†™çš„è½¯ä»¶åº“ï¼Œç”¨äºæ•°æ®å¤„ç†å’Œåˆ†æã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒæä¾›äº†ç”¨äºæ“ä½œæ•°å€¼è¡¨å’Œæ—¶é—´åºåˆ—çš„æ•°æ®ç»“æ„å’Œæ“ä½œã€‚(ååˆ†é’Ÿå…¥é—¨pandas)</p><p>Matplotlib æ˜¯ Python çš„ä¸€ä¸ªç»˜å›¾åº“ã€‚å®ƒåŒ…å«äº†å¤§é‡çš„å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›å·¥å…·åˆ›å»ºå„ç§å›¾å½¢ï¼ŒåŒ…æ‹¬ç®€å•çš„æ•£ç‚¹å›¾ï¼Œæ­£å¼¦æ›²çº¿ï¼Œç”šè‡³æ˜¯ä¸‰ç»´å›¾å½¢ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBrNzEyNGw5ajMxZzIwdHNqdHkuanBn-1024x586.jpg"></p><p><a href="https://matplotlib.org/">å®˜æ–¹æ•™ç¨‹</a></p><h4 id="å›¾åƒè¯†åˆ«"><a href="#å›¾åƒè¯†åˆ«" class="headerlink" title="å›¾åƒè¯†åˆ«"></a>å›¾åƒè¯†åˆ«</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šè¯†åˆ«å‡ºæ–‡æœ¬ç­‰ä¿¡æ¯</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šâ€pytesseractï¼Œopencv</p><p><strong>Python-tesseract</strong>Â æ˜¯ä¸€ä¸ªåŸºäº googleâ€™s Tesseract-OCR çš„ç‹¬ç«‹å°è£…åŒ…ï¼ŒåŠŸèƒ½æ˜¯è¯†åˆ«å›¾ç‰‡æ–‡ä»¶ä¸­æ–‡å­—ï¼Œå¹¶ä½œä¸ºè¿”å›å‚æ•°è¿”å›è¯†åˆ«ç»“æœã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBrYXN1OTZtajMwemwwdTBuMHEuanBn-1024x863.jpg"></p><p>OpenCVçš„å…¨ç§°æ˜¯Open Source Computer Vision Libraryï¼Œæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è®¡ç®—æœºè§†è§‰åº“ï¼Œç”¨äºå›¾åƒå¤„ç†ã€åˆ†æã€æœºå™¨è§†è§‰æ–¹é¢çš„å¼€æºå‡½æ•°åº“ã€‚OpenCVé‡‡ç”¨C&#x2F;C++è¯­è¨€ç¼–å†™ï¼Œpython-opencvæ˜¯Pythonå¯¹OpenCVçš„å°è£…ï¼Œå¯ä»¥è®©Pythonè°ƒç”¨OpenCVçš„åŠŸèƒ½ã€‚</p><p><a href="https://docs.opencv.org/master/d6/d00/tutorial_py_root.html">å®˜æ–¹æ•™ç¨‹</a></p><h4 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šå®šåˆ¶æ‰§è¡ŒæŸä¸ªåŠ¨ä½œ</p><p><strong>å¸¸ç”¨åº“</strong>ï¼šAPScheduler</p><p><strong>APScheduler</strong>å®ç°äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ¡†æ¶ï¼Œæä¾›äº†éå¸¸ä¸°å¯Œè€Œä¸”æ–¹ä¾¿æ˜“ç”¨çš„å®šæ—¶ä»»åŠ¡æ¥å£ï¼Œå¯ä»¥å®ç°åŸºäºæ—¥æœŸã€å›ºå®šæ—¶é—´é—´éš”ä»¥åŠcrontab ç±»å‹çš„ä»»åŠ¡ã€‚</p><p><a href="https://apscheduler.readthedocs.io/en/stable/">å®˜æ–¹æ–‡æ¡£</a></p><h4 id="RPAæ¡†æ¶"><a href="#RPAæ¡†æ¶" class="headerlink" title="RPAæ¡†æ¶"></a>RPAæ¡†æ¶</h4><p><strong>å®ç°åŠŸèƒ½</strong>ï¼šæ¨¡æ‹Ÿé¼ æ ‡é”®ç›˜æ“ä½œï¼Œæ§åˆ¶æµè§ˆå™¨ã€æ¡Œé¢åº”ç”¨ç­‰è½¯ä»¶ï¼Œè®©ç”µè„‘ä¸Šæ“ä½œæµç¨‹è‡ªåŠ¨åŒ–</p><p><strong>å¸¸ç”¨åº“</strong>ï¼špython-rpa</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTBqbmN5NGN3ajMwazAwZGNxNmYuanBn.jpg"></p><p><a href="https://github.com/tebelorg/RPA-Python">å®˜æ–¹æ–‡æ¡£</a></p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/pyfun/article/details/108216876">https://blog.csdn.net/pyfun/article/details/108216876</a></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>rpa</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨labelmeåˆ¶ä½œcocoæ•°æ®é›†</title>
    <link href="/2021/09/02/%E4%BD%BF%E7%94%A8labelme%E5%88%B6%E4%BD%9Ccoco%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <url>/2021/09/02/%E4%BD%BF%E7%94%A8labelme%E5%88%B6%E4%BD%9Ccoco%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h4 id="å®‰è£…labelme"><a href="#å®‰è£…labelme" class="headerlink" title="å®‰è£…labelme"></a>å®‰è£…labelme</h4><p>ç›´æ¥ä½¿ç”¨pipå®‰è£…</p><pre><code>pip install labelme</code></pre><h4 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h4><p>å‘½ä»¤è¡Œæ‰§è¡Œ</p><pre><code>labelme</code></pre><p>æ‰“å¼€åé€‰æ‹©æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©è‡ªåŠ¨ä¿å­˜</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/image-1.png"></p><p>ç¼–è¾‘ï¼Œç”»çŸ©å½¢ï¼Œç„¶åæ‰“ä¸Šæ ‡ç­¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/image-2-1024x626.png"></p><p>åœ¨å›¾ç‰‡ç›®å½•ä¸‹ä¼šä¿å­˜jsonæ ¼å¼çš„æ ‡ç­¾ä¿¡æ¯</p><h4 id="åº”ç”¨ï¼ˆä»¥yoloxä¸ºä¾‹ï¼‰"><a href="#åº”ç”¨ï¼ˆä»¥yoloxä¸ºä¾‹ï¼‰" class="headerlink" title="åº”ç”¨ï¼ˆä»¥yoloxä¸ºä¾‹ï¼‰"></a>åº”ç”¨ï¼ˆä»¥yoloxä¸ºä¾‹ï¼‰</h4><p>yoloxçš„æ•°æ®é›†readmeä¸­å†™æ˜äº†éœ€è¦çš„æ•°æ®é›†æ ¼å¼</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/image-3.png"></p><p>å…¶ä¸­instancesxxx.jsonæ˜¯å¾ˆå¤šjsonçš„é›†åˆï¼Œéœ€è¦æ‰‹åŠ¨ç”Ÿæˆ</p><p>ç°åœ¨è¦åšçš„æ˜¯ï¼Œå…ˆæ‰‹åŠ¨åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå†ç”Ÿæˆå¯¹åº”æ ‡ç­¾çš„jsoné›†åˆ</p><p>ä¸‹è½½labelme2coco.py</p><p><a href="https://github.com/Tony607/labelme2coco">https://github.com/Tony607/labelme2coco</a></p><p>è¿›å…¥jsonæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ</p><pre><code>python labelme2coco.py ./</code></pre><p>ä¼šç”Ÿæˆä¸€ä¸ªå¤§jsonæ–‡ä»¶ï¼Œæ”¹æˆéœ€è¦çš„æ–‡ä»¶åä½¿ç”¨å³å¯</p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flaskä½¿ç”¨https</title>
    <link href="/2021/09/01/flask%E4%BD%BF%E7%94%A8https/"/>
    <url>/2021/09/01/flask%E4%BD%BF%E7%94%A8https/</url>
    
    <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªhttpsé¡µé¢ï¼Œéœ€è¦åŠ è½½httpèµ„æºï¼ˆåå°æ˜¯flaskï¼‰ï¼Œå‡ºäºå®‰å…¨åŸå› è¢«æµè§ˆå™¨ç¦æ­¢äº†</p><p>æ—¢ç„¶åªèƒ½ç”¨httpsï¼Œé‚£å°±å¹²è„†æŠŠflaskçš„æ‰€æœ‰è¯·æ±‚éƒ½æ”¹æˆhttps</p><p>ä»£ç æ–¹é¢ï¼Œåªéœ€è¦åœ¨app.runæ–¹æ³•ä¸­å¢åŠ ssl_context&#x3D;â€™adhocâ€™ï¼Œæ„æ€æ˜¯ä½¿ç”¨æœåŠ¡å™¨çš„æœ¬åœ°SSLè¯ä¹¦</p><p>if <strong>name</strong>&#x3D;&#x3D;â€<strong>main</strong>â€œ:<br>    app.run(host&#x3D;â€0.0.0.0â€, port&#x3D;5000,ssl_context&#x3D;â€™adhocâ€™)</p><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨httpsè®¿é—®äº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/09/image.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntu20å®‰è£…cuda&amp;cudnn</title>
    <link href="/2021/08/14/ubuntu20%E5%AE%89%E8%A3%85cudacudnn/"/>
    <url>/2021/08/14/ubuntu20%E5%AE%89%E8%A3%85cudacudnn/</url>
    
    <content type="html"><![CDATA[<h4 id="å®‰è£…é©±åŠ¨"><a href="#å®‰è£…é©±åŠ¨" class="headerlink" title="å®‰è£…é©±åŠ¨"></a>å®‰è£…é©±åŠ¨</h4><p>åœ¨è½¯ä»¶å’Œæ›´æ–°-é™„åŠ é©±åŠ¨é‡Œï¼Œé€‰æ‹©æ˜¾å¡é©±åŠ¨</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-15-39-14%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>ç¦ç”¨è‡ªå¸¦æ˜¾å¡é©±åŠ¨</p><pre><code>sudo gedit /etc/modprobe.d/blacklist.conf</code></pre><p>åœ¨æœ€åä¸€è¡ŒåŠ ä¸Š: Â blacklist nouveauÂ ï¼Œå°†Ubuntuè‡ªå¸¦çš„æ˜¾å¡é©±åŠ¨åŠ å…¥é»‘åå•ï¼Œä¿®æ”¹åä¿å­˜</p><p>è¿˜éœ€æ‰§è¡Œä¸€æ¡å‘½ä»¤ä½¿ä»–ç”Ÿæ•ˆ</p><pre><code>sudo update-initramfs -u</code></pre><p>ç„¶åé‡å¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ”¯æŒçš„cudaç‰ˆæœ¬</p><pre><code>nvidia-smi</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-18-59%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>æ‰€ä»¥æˆ‘å¯ä»¥å®‰è£…çš„æ˜¯cuda11.4ç‰ˆæœ¬</p><h4 id="ä¸‹è½½cuda"><a href="#ä¸‹è½½cuda" class="headerlink" title="ä¸‹è½½cuda"></a>ä¸‹è½½cuda</h4><p><a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></p><p>é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-23-17%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>é€‰æ‹©æ“ä½œç³»ç»Ÿã€æ¶æ„ç­‰ï¼Œä¾æ¬¡æ‰§è¡Œä¸‹é¢ç”Ÿæˆçš„å‘½ä»¤</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-24-23%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE-1024x545.png"></p><p>æˆ‘è¿™é‡Œå°±æ˜¯è¿™æ ·</p><pre><code>wget https://developer.download.nvidia.com/compute/cuda/11.4.0/local_installers/cuda_11.4.0_470.42.01_linux.runsudo sh cuda_11.4.0_470.42.01_linux.run</code></pre><p>bashå‘½ä»¤æ‰§è¡Œè¦ç­‰ä¸€ä¼šå„¿ï¼Œå‡ºç°è¿™ä¸ªç•Œé¢åé€‰æ‹©continue</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-47-50%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>ä¸‹ä¸ªç•Œé¢è¾“å…¥accept</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-49-42%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>å†ä¸‹ä¸ªç•Œé¢å…ˆæŒ‰ç©ºæ ¼ï¼Œå–æ¶ˆå®‰è£…é©±åŠ¨ï¼Œå› ä¸ºä¸Šé¢æˆ‘ä»¬å·²ç»å®‰è£…å¥½äº†ï¼Œç„¶åé€‰æ‹©install</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-50-48%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>ç­‰å¾…å®‰è£…å®Œæˆåæ˜¯è¿™ä¸ªç•Œé¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-52-43%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><h4 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><p>è¾“å…¥gedit ~&#x2F;.bashrcå‘½ä»¤æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ç»“å°¾è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼Œä¿å­˜</p><pre><code>export PATH=/usr/local/cuda-11.4/bin$&#123;PATH:+:$&#123;PATH&#125;&#125;export LD_LIBRARY_PATH=/usr/local/cuda-11.4/lib64$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;&#125;</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-54-30%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>æ›´æ–°ç¯å¢ƒå˜é‡é…ç½®</p><pre><code>source ~/.bashrc</code></pre><p>è‡³æ­¤ï¼Œcudaå®‰è£…å®Œæˆï¼Œè¾“å…¥nvcc -V æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-16-56-54%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><h4 id="å®‰è£…cudnn"><a href="#å®‰è£…cudnn" class="headerlink" title="å®‰è£…cudnn"></a>å®‰è£…cudnn</h4><p><a href="https://developer.nvidia.com/rdp/cudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a></p><p>éœ€è¦ç™»å½•(æ¯”è¾ƒéº»çƒ¦ï¼Œå»ºè®®çœ‹æœ€åä¸€æ­¥çš„é˜¿é‡Œäº‘é•œåƒæº)</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/2021-08-14-17-01-39%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p><p>è§£å‹åè¿›å…¥è§£å‹ç›®å½•ï¼Œå°†cuda&#x2F;include&#x2F;cudnn.hæ–‡ä»¶å¤åˆ¶åˆ°usr&#x2F;local&#x2F;cuda&#x2F;includeæ–‡ä»¶å¤¹ï¼Œå°†cuda&#x2F;lib64&#x2F;ä¸‹æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°&#x2F;usr&#x2F;local&#x2F;cuda&#x2F;lib64æ–‡ä»¶å¤¹ä¸­,å†æ·»åŠ è¯»å–æƒé™</p><p>å¯ä»¥åœ¨è§£å‹åçš„cudnn-11.4â€¦..&#x2F;cudaç›®å½•ä¸‹æ‰§è¡Œ</p><pre><code>sudo cp include/cudnn.h /usr/local/cuda/include/cudnn.hsudo cp -r lib64/* /usr/local/cuda/lib64sudo chmod a+r /usr/local/cuda/lib64/libcudnn*sudo chmod a+r /usr/local/cuda/include/cudnn.h</code></pre><p>è‡³æ­¤ï¼Œcudnnå®‰è£…å®Œæˆ</p><h4 id="é˜¿é‡Œäº‘é•œåƒdebå®‰è£…æ–¹æ³•"><a href="#é˜¿é‡Œäº‘é•œåƒdebå®‰è£…æ–¹æ³•" class="headerlink" title="é˜¿é‡Œäº‘é•œåƒdebå®‰è£…æ–¹æ³•"></a>é˜¿é‡Œäº‘é•œåƒdebå®‰è£…æ–¹æ³•</h4><p><a href="https://mirrors.aliyun.com/nvidia-cuda/">https://mirrors.aliyun.com/nvidia-cuda/</a></p><p>é€‰æ‹©å¯¹åº”çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼ŒæŸ¥æ‰¾cudaç‰ˆæœ¬å¯¹åº”çš„cudnnï¼Œdevå’Œédevä¸¤ä¸ªç‰ˆæœ¬ï¼Œéƒ½éœ€è¦ä¸‹è½½<br><img src="https://xinhaojin.github.io/imgs-host/20221025/xxx.4tdndxgkm1k0.png"><br>å®‰è£…å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i libcudnn8-dev_8.2.4.15-1+cuda11.4_amd64.deb</span><br><span class="line">sudo dpkg -i libcudnn8_8.2.4.15-1+cuda11.4_amd64.deb</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œæœ‰ä»¥ä¸Šä¸¤ä¸ªçš„å®‰è£…ä¿¡æ¯å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -l | grep cudnn</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>win10ä¸‹å®‰è£…é…ç½®yolox</title>
    <link href="/2021/08/05/win10%E4%B8%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEyolox/"/>
    <url>/2021/08/05/win10%E4%B8%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEyolox/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸‹è½½æºç å’Œæ¨¡å‹æ–‡ä»¶"><a href="#ä¸‹è½½æºç å’Œæ¨¡å‹æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æºç å’Œæ¨¡å‹æ–‡ä»¶"></a>ä¸‹è½½æºç å’Œæ¨¡å‹æ–‡ä»¶</h4><p><a href="https://github.com/Megvii-BaseDetection/YOLOX">https://github.com/Megvii-BaseDetection/YOLOX</a></p><h4 id="åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ"><a href="#åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ"></a>åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ</h4><p>conda create -n yolox python&#x3D;&#x3D;3.7<br>conda activate yolox</p><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p>åœ¨yoloxæ ¹ç›®å½•ä¸‹æ‰§è¡Œ</p><p>pip install -U pip<br>pip install -r requirements.txt<br>pip install cython<br>pip install -U setuptools<br>python setup.py develop</p><h2 id="cudaé…ç½®ï¼ˆé’ˆå¯¹torch-gpuç‰ˆæœ¬ï¼Œé»˜è®¤cpuç‰ˆæœ¬å¯è·³è¿‡ï¼‰"><a href="#cudaé…ç½®ï¼ˆé’ˆå¯¹torch-gpuç‰ˆæœ¬ï¼Œé»˜è®¤cpuç‰ˆæœ¬å¯è·³è¿‡ï¼‰" class="headerlink" title="cudaé…ç½®ï¼ˆé’ˆå¯¹torch-gpuç‰ˆæœ¬ï¼Œé»˜è®¤cpuç‰ˆæœ¬å¯è·³è¿‡ï¼‰"></a>cudaé…ç½®ï¼ˆé’ˆå¯¹torch-gpuç‰ˆæœ¬ï¼Œé»˜è®¤cpuç‰ˆæœ¬å¯è·³è¿‡ï¼‰</h2><p>cudaä»¥åŠcudnnçš„æ­£ç¡®å®‰è£…æ–¹å¼å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« <br><a href="https://xinhaojin.github.io/2021/05/18/cuda%E5%AE%89%E8%A3%85/">https://xinhaojin.github.io/2021/05/18/cudaå®‰è£…/</a><br><a href="https://xinhaojin.github.io/2021/05/19/cudnn%E5%AE%89%E8%A3%85/">https://xinhaojin.github.io/2021/05/19/cudnnå®‰è£…/</a></p><p>ç„¶åæŒ‰ç…§å¯¹åº”çš„cudaç‰ˆæœ¬é€‰æ‹©å®‰è£…å‘½ä»¤</p><p>å‚è€ƒ<a href="https://pytorch.org/get-started/locally/">https://pytorch.org/get-started/locally/</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/image-4.png"></p><h2 id="æ¨¡å‹æ–‡ä»¶"><a href="#æ¨¡å‹æ–‡ä»¶" class="headerlink" title="æ¨¡å‹æ–‡ä»¶"></a>æ¨¡å‹æ–‡ä»¶</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/image-5.png"></p><p>æŠŠä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶æ”¾åˆ°yolox&#x2F;yolox&#x2F;modelsä¸‹</p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><pre><code>python tools/demo.py image -n yolox-s -c yolox/models/yolox_s.pth --path assets/dog.jpg --conf 0.25 --nms 0.45 --tsize 640 --save_result --device [cpu/gpu]</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/image-7.png"></p><p>å›¾ç‰‡è¯†åˆ«æˆåŠŸ</p><h4 id="demo-pyä¸»è¦å‚æ•°"><a href="#demo-pyä¸»è¦å‚æ•°" class="headerlink" title="demo.pyä¸»è¦å‚æ•°"></a>demo.pyä¸»è¦å‚æ•°</h4><pre><code>--demo  å¯ä»¥æ˜¯image,videoæˆ–è€…wecam,åˆ†åˆ«ç”¨äºå¤„ç†å›¾ç‰‡ã€è§†é¢‘å’Œæ‘„åƒå¤´çš„è§†é¢‘--path  å›¾ç‰‡æˆ–è€…è§†é¢‘çš„è·¯å¾„--camid  æ‘„åƒå¤´çš„åºå·ï¼Œä¸€ä¸ªæ‘„åƒå¤´çš„è¯å°±æ˜¯0--save_result  ä¸ç”¨é¢å¤–è®¾ç½®å‚æ•°ï¼Œæ·»åŠ è¿™ä¸€é¡¹å¯ä»¥æŠŠè¯†åˆ«ç»“æœä¿å­˜-c  æ¨¡å‹æ–‡ä»¶è·¯å¾„--device GPU/CPUè®¡ç®—--nms  ç›¸ä¼¼åº¦é—¨é™ï¼Œé«˜äºè¿™ä¸ªå€¼å°±æ¡†å‡ºæ¥--tsize  å›¾åƒå¤§å°</code></pre>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å®‰å“Intentè¿”å›ä¸Šä¸€ä¸ªactivity</title>
    <link href="/2021/07/28/%E5%AE%89%E5%8D%93intent%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E4%B8%AAactivity/"/>
    <url>/2021/07/28/%E5%AE%89%E5%8D%93intent%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%80%E4%B8%AAactivity/</url>
    
    <content type="html"><![CDATA[<h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><p>ä»Activity1è·³è½¬åˆ° Activity2ï¼Œå†ä» Activity2è¿”å›åˆ° Activity1ï¼Œè¿”å›åè‡ªåŠ¨æ›´æ–° Activity1</p><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h4><p>å¦‚æœåªä½¿ç”¨å¸¸è§„çš„startActivityæ˜¯ä¸è¡Œçš„ï¼ŒæŒ‰æˆ‘çš„ç†è§£ï¼Œä»–ä¼šä¿å­˜è·³è½¬çš„çŠ¶æ€æ ˆï¼ŒçŠ¶æ€åªå¢ä¸å‡ï¼Œæ— æ³•å®ç°çœŸæ­£çš„â€œè¿”å›â€ï¼Œå³ï¼š</p><p>ä»1è·³è½¬åˆ°2ä½¿ç”¨ startActivity ï¼Œä»2è·³è½¬åˆ°1ä¹Ÿä½¿ç”¨ startActivity ï¼Œé‚£ä¹ˆè¿™ä¸¤æ¬¡è·³è½¬ä¹‹åï¼Œå¦‚æœä½ æŒ‰æ‰‹æœºçš„è¿”å›æŒ‰é’®ï¼Œä¼šå‘ç°ä»–è¿”å›åˆ°äº†2ï¼Œå¦‚æœå†å¤šè·³è½¬å‡ æ¬¡ï¼ŒæŒ‰è¿”å›æŒ‰é’®ï¼Œå°±ä¼šåœ¨1å’Œ2ä¹‹é—´åå¤æ¨ªè·³ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆé¢„æœŸã€‚</p><p>è¦å®ç°çœŸæ­£çš„â€œè¿”å›â€ï¼Œå¯ä»¥ä½¿ç”¨startActivityForResult</p><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>åœ¨activity1ä¸­ï¼ŒstartActivityForResult(Intent,requestCode)</p><p>å…¶ä¸­requestCodeç”¨äºåŒºåˆ†æ˜¯ä»å“ªä¸ªactivityè¿”å›åˆ°å½“å‰activityçš„ï¼Œæ˜¯è‡ªå®šä¹‰çš„intç±»å‹å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Activity1.<span class="built_in">this</span>, Activity2.class);</span><br><span class="line">startActivityForResult(intent,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>åœ¨activity2ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">setResult(RESULT_OK);<span class="comment">//RESULT_OKè¡¨ç¤ºæ­£ç¡®è¿”å›</span></span><br><span class="line">finish();<span class="comment">//ç»“æŸå½“å‰avtivityï¼Œè¿”å›ä¸Šä¸€ä¸ªactivity</span></span><br><span class="line"></span><br><span class="line">å½“activity2æ‰§è¡Œfinishåï¼Œä¼šè‡ªåŠ¨è¿”å›åˆ°activity1ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨activity1ä¸­å®šä¹‰çš„onActivityResultæ–¹æ³•åšè¿”å›åçš„æ“ä½œï¼Œå¦‚æ›´æ–°activity1</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, Intent data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        <span class="keyword">if</span>(resultCode==RESULT_OK)&#123;<span class="comment">//åˆ¤æ–­æ˜¯å¦è¿”å›æˆåŠŸ</span></span><br><span class="line">            <span class="keyword">if</span>(requestCode==<span class="number">1</span>)<span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å“ªä¸ªavtivityè¿”å›,ä¸€ä¸ªavtivityå¯¹åº”ä¸€ä¸ªcode,ä¸Šé¢å®šä¹‰è¿‡ä¸º1</span></span><br><span class="line">            &#123;</span><br><span class="line">               <span class="comment">//ä½ çš„æ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ¯æ¬¡è·³è½¬éƒ½å¯ä»¥åœ¨intentä¸­æºå¸¦æ•°æ®ï¼Œè¿™é‡Œæ²¡æœ‰å†™å‡º</p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>matplotlibåŠ¨æ€ç”»å›¾</title>
    <link href="/2021/07/27/matplotlib%E5%8A%A8%E6%80%81%E7%94%BB%E5%9B%BE/"/>
    <url>/2021/07/27/matplotlib%E5%8A%A8%E6%80%81%E7%94%BB%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<p>æ–¹æ³•ä¸€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">y = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    y.append(i)     <span class="comment"># æ¯è¿­ä»£ä¸€æ¬¡ï¼Œè¿½åŠ yæ•°ç»„çš„å†…å®¹</span></span><br><span class="line">    ax.cla()        <span class="comment"># æ¸…é™¤é”®</span></span><br><span class="line">    ax.bar(y, label=<span class="string">&#x27;test&#x27;</span>, height=y, width=<span class="number">0.3</span>)<span class="comment">#ç”»å›¾</span></span><br><span class="line">    ax.legend()<span class="comment">#æ ‡æ³¨å›¾ä¾‹</span></span><br><span class="line">    plt.pause(<span class="number">0.1</span>)<span class="comment">#æš‚åœ0.1s</span></span><br><span class="line"></span><br><span class="line">![](https://xinhaojin.github.io/imgs-host/past/<span class="number">2021</span>/07/<span class="number">20180611135854497.</span>gif)</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">1</span>])<span class="comment">#è®¾ç½®åæ ‡è½´</span></span><br><span class="line">plt.ion()<span class="comment">#æ‰“å¼€äº¤äº’æ¨¡å¼ï¼ŒåŒæ—¶æ˜¾ç¤ºå¤šå¼ å›¾æˆ–åŠ¨æ€å›¾ï¼Œå…³é—­ï¼šplt.ioff()</span></span><br><span class="line"></span><br><span class="line">xs = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">ys = [<span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    y = np.random.random()<span class="comment">#0-1çš„éšæœºæ•°</span></span><br><span class="line">    xs[<span class="number">0</span>] = xs[<span class="number">1</span>]</span><br><span class="line">    ys[<span class="number">0</span>] = ys[<span class="number">1</span>]</span><br><span class="line">    xs[<span class="number">1</span>] = i</span><br><span class="line">    ys[<span class="number">1</span>] = y</span><br><span class="line">    plt.plot(xs, ys)</span><br><span class="line">    plt.pause(<span class="number">0.1</span>)<span class="comment">#æš‚åœ0.1s</span></span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/20180611135923916.gif"></p><p>åŸæ–‡<a href="https://blog.csdn.net/xyisv/article/details/80651334">https://blog.csdn.net/xyisv/article/details/80651334</a></p><p>ä»¥ä¸Šå‡ä¸ºè½¬è½½ï¼Œæ„Ÿè§‰ä¾‹å­ä¸å¤ªå…·æœ‰æ™®é€‚æ€§ï¼Œå¯èƒ½ä»¥ä¸‹æ–¹æ³•æ›´ç®€å•æ›´æ™®é</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_iterations):</span><br><span class="line">        plt.cla()        <span class="comment"># æ¸…é™¤é”®</span></span><br><span class="line">        <span class="comment">#...</span></span><br><span class="line">        plt.plot(...)</span><br><span class="line">        plt.pause(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å›¾åƒå¤„ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤šçº¿ç¨‹çˆ¬å–æŸä¸ªç½‘é¡µçš„æ‰€æœ‰å›¾ç‰‡</title>
    <link href="/2021/07/14/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E5%8F%96%E6%9F%90%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87/"/>
    <url>/2021/07/14/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E5%8F%96%E6%9F%90%E4%B8%AA%E7%BD%91%E9%A1%B5%E7%9A%84%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87/</url>
    
    <content type="html"><![CDATA[<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup, UnicodeDammit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">imageSpider</span>(<span class="params">start_url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        urls = []</span><br><span class="line">        req = urllib.request.Request(start_url,headers=headers)</span><br><span class="line">        data = urllib.request.urlopen(req)</span><br><span class="line">        data = data.read()</span><br><span class="line">        dammit = UnicodeDammit(data, [<span class="string">&quot;utf-8&quot;</span>, <span class="string">&quot;gbk&quot;</span>])</span><br><span class="line">        data = dammit.unicode_markup</span><br><span class="line">        soup = BeautifulSoup(data, <span class="string">&quot;lxml&quot;</span>)</span><br><span class="line">        images = soup.select(<span class="string">&quot;img&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> image <span class="keyword">in</span> images:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                src = image[<span class="string">&quot;src&quot;</span>]</span><br><span class="line">                url = urllib.request.urljoin(start_url, src)</span><br><span class="line">                <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> urls:</span><br><span class="line">                    urls.append(url)</span><br><span class="line">                <span class="built_in">print</span>(url)</span><br><span class="line">                download(url)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                <span class="built_in">print</span>(err)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">global</span> count</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        count = count+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(url[<span class="built_in">len</span>(url)-<span class="number">4</span>] == <span class="string">&quot;.&quot;</span>):</span><br><span class="line">            ext = url[<span class="built_in">len</span>(url)-<span class="number">4</span>:] </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ext = <span class="string">&quot;&quot;</span></span><br><span class="line">        req = urllib.request.Request(url, headers=headers)</span><br><span class="line">        data = urllib.request.urlopen(req, timeout=<span class="number">100</span>)</span><br><span class="line">        data = data.read()</span><br><span class="line">        fobj = <span class="built_in">open</span>(<span class="string">&quot;images&quot;</span>+<span class="built_in">str</span>(count)+ext, <span class="string">&quot;wb&quot;</span>)</span><br><span class="line">        fobj.write(data)</span><br><span class="line">        fobj.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;downloaded &quot;</span>+<span class="built_in">str</span>(count)+ext)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_url = <span class="string">&quot;https://blog.xinhaojin.top&quot;</span></span><br><span class="line">headers=&#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.131 Safari/537.36&quot;</span>&#125;</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line">importlib.reload(sys)</span><br><span class="line">imageSpider(start_url)</span><br></pre></td></tr></table></figure><p>åœ¨ç¨‹åºæ ¹ç›®å½•ä¸‹æ–°å»ºimagesæ–‡ä»¶å¤¹å³å¯</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>çˆ¬è™«</tag>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BeautifulSoupæŸ¥æ‰¾å…ƒç´ </title>
    <link href="/2021/07/14/beautifulsoup%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0/"/>
    <url>/2021/07/14/beautifulsoup%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#è·å–ç½‘é¡µhtmlä»£ç </span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">url=<span class="string">&#x27;https://blog.xinhaojin.top&#x27;</span></span><br><span class="line">resp=urllib.request.urlopen(url)</span><br><span class="line">data=resp.read()</span><br><span class="line">html=data.decode()</span><br><span class="line"><span class="comment">#print(html)</span></span><br><span class="line"></span><br><span class="line">soup=BeautifulSoup(html,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥æ‰¾ç¬¬ä¸€ä¸ªtitleå…ƒç´ </span></span><br><span class="line">tag=soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tag),tag)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥æ‰¾æ‰€æœ‰è¶…é“¾æ¥</span></span><br><span class="line">tags=soup.find_all(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> tags:</span><br><span class="line">    <span class="built_in">print</span>(tag)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥æ‰¾class=xxxçš„divå…ƒç´ </span></span><br><span class="line">tags=soup.find_all(<span class="string">&#x27;div&#x27;</span>,attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&quot;entry excerpt entry-summary&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> tags:</span><br><span class="line">    <span class="built_in">print</span>(tag)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰ç±»å‹å…ƒç´ </span></span><br><span class="line">tags=soup.find_all(name=<span class="literal">None</span>,attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&quot;entry excerpt entry-summary&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> tags:</span><br><span class="line">    <span class="built_in">print</span>(tag)</span><br><span class="line"><span class="comment">#è·å–tagå±æ€§å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(tag[<span class="string">&#x27;class&#x27;</span>])</span><br><span class="line"><span class="comment">#è·å–å…ƒç´ åŒ…å«çš„æ–‡æœ¬å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(tag.text)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰é«˜çº§æŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myFilter</span>(<span class="params">tag</span>):</span><br><span class="line">    <span class="comment">#print(tag.name)</span></span><br><span class="line">    <span class="comment">#åˆ©ç”¨classå±æ€§æŸ¥æ‰¾æ—¶,åº”æ³¨æ„:classä¸ºåˆ—è¡¨,è€Œéå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">return</span> (tag.name==<span class="string">&#x27;a&#x27;</span> <span class="keyword">and</span> tag.has_attr(<span class="string">&quot;href&quot;</span>) <span class="keyword">and</span> tag[<span class="string">&#x27;href&#x27;</span>]==<span class="string">&quot;https://blog.xinhaojin.top/2020/08/&quot;</span>)</span><br><span class="line"></span><br><span class="line">tag=soup.find_all(myFilter)</span><br><span class="line"><span class="built_in">print</span>(tag)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>çˆ¬è™«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>çˆ¬è™«</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python flaskå®ç°å‰åç«¯äº¤äº’</title>
    <link href="/2021/07/09/python-flask%E5%AE%9E%E7%8E%B0%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/"/>
    <url>/2021/07/09/python-flask%E5%AE%9E%E7%8E%B0%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/</url>
    
    <content type="html"><![CDATA[<h4 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> flask</span><br><span class="line">app=flask.Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask_cors <span class="keyword">import</span> *</span><br><span class="line">CORS(app, supports_credentials=<span class="literal">True</span>)<span class="comment">#æ¥æ”¶è·¨åŸŸè¯·æ±‚</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/path&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        p=flask.request.args.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        c=flask.request.args.get(<span class="string">&quot;sex&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(p,c)</span><br><span class="line">        <span class="keyword">return</span> p+<span class="string">&quot;,&quot;</span>+c</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(err)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5000</span>)<span class="comment">#æƒ³è¦å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®ï¼Œå¿…é¡»æ˜¯0.0.0.0</span></span><br></pre></td></tr></table></figure><h4 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>flaskæµ‹è¯•é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    sex:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;submit()&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>)</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// IE7+, Firefox, Chrome, Opera, Safari æµè§ˆå™¨æ‰§è¡Œçš„ä»£ç </span></span></span><br><span class="line"><span class="language-javascript">        xmlhttp=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">    &#123;  </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//IE6, IE5 æµè§ˆå™¨æ‰§è¡Œçš„ä»£ç </span></span></span><br><span class="line"><span class="language-javascript">        xmlhttp=<span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    xmlhttp.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (xmlhttp.<span class="property">readyState</span>==<span class="number">4</span> &amp;&amp; xmlhttp.<span class="property">status</span>==<span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> res=<span class="title class_">JSON</span>.<span class="title function_">parse</span>( xmlhttp.<span class="property">responseText</span> );</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//resæ˜¯è¿”å›çš„æ•°æ®ï¼Œå¯ä»¥åšåç»­å¤„ç†</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> name=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> sex=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sex&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> url=<span class="string">&#x27;http://127.0.0.1:5000/path?name=&#x27;</span>+name+<span class="string">&#x27;&amp;sex=&#x27;</span>+sex;</span></span><br><span class="line"><span class="language-javascript">    xmlhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,url,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">    xmlhttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç›´æ¥æµ‹è¯•url"><a href="#ç›´æ¥æµ‹è¯•url" class="headerlink" title="ç›´æ¥æµ‹è¯•url"></a>ç›´æ¥æµ‹è¯•url</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-4.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-3.png"></p><h4 id="HTMLæµ‹è¯•GET"><a href="#HTMLæµ‹è¯•GET" class="headerlink" title="HTMLæµ‹è¯•GET"></a>HTMLæµ‹è¯•GET</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-5.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-6.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>flask</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>phpå‘é€SMTPé‚®ä»¶</title>
    <link href="/2021/07/03/php%E5%8F%91%E9%80%81smtp%E9%82%AE%E4%BB%B6/"/>
    <url>/2021/07/03/php%E5%8F%91%E9%80%81smtp%E9%82%AE%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>main.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">PHPMailer</span>\\<span class="title">PHPMailer</span>\\<span class="title">PHPMailer</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PHPMailer</span>\\<span class="title">PHPMailer</span>\\<span class="title">Exception</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;./src/Exception.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;./src/PHPMailer.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;./src/SMTP.php&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendEmail</span>(<span class="params"><span class="variable">$content</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$mail</span> = <span class="keyword">new</span> <span class="title class_">PHPMailer</span>(<span class="literal">true</span>);                              <span class="comment">// Passing \`true\` enables exceptions</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨é…ç½®</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;CharSet =<span class="string">&quot;UTF-8&quot;</span>;                     <span class="comment">//è®¾å®šé‚®ä»¶ç¼–ç </span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;SMTPDebug = <span class="number">0</span>;                        <span class="comment">// è°ƒè¯•æ¨¡å¼è¾“å‡º</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">isSMTP</span>();                             <span class="comment">// ä½¿ç”¨SMTP</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;Host = <span class="string">&#x27;smtp.qq.com&#x27;</span>;                <span class="comment">// SMTPæœåŠ¡å™¨</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;SMTPAuth = <span class="literal">true</span>;                      <span class="comment">// å…è®¸ SMTP è®¤è¯</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;Username = <span class="string">&#x27;xinhaojin@qq.com&#x27;</span>;                <span class="comment">// SMTP ç”¨æˆ·å  å³é‚®ç®±çš„ç”¨æˆ·å</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;Password = <span class="string">&#x27;tjhv*********xdjaj&#x27;</span>;             <span class="comment">// SMTP å¯†ç   éƒ¨åˆ†é‚®ç®±æ˜¯æˆæƒç (ä¾‹å¦‚163é‚®ç®±)</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;SMTPSecure = <span class="string">&#x27;ssl&#x27;</span>;                    <span class="comment">// å…è®¸ TLS æˆ–è€…sslåè®®</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;Port = <span class="number">465</span>;                            <span class="comment">// æœåŠ¡å™¨ç«¯å£ 25 æˆ–è€…465 å…·ä½“è¦çœ‹é‚®ç®±æœåŠ¡å™¨æ”¯æŒ</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">setFrom</span>(<span class="string">&#x27;xinhaojin@qq.com&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>);  <span class="comment">//å‘ä»¶äºº</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">addAddress</span>(<span class="string">&#x27;xinhaojin@qq.com&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>);  <span class="comment">// æ”¶ä»¶äºº</span></span><br><span class="line">        <span class="comment">//$mail-&gt;addAddress(&#x27;ellen@example.com&#x27;);  // å¯æ·»åŠ å¤šä¸ªæ”¶ä»¶äºº</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">addReplyTo</span>(<span class="string">&#x27;xinhaojin@qq.com&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>); <span class="comment">//å›å¤çš„æ—¶å€™å›å¤ç»™å“ªä¸ªé‚®ç®± å»ºè®®å’Œå‘ä»¶äººä¸€è‡´</span></span><br><span class="line">        <span class="comment">//$mail-&gt;addCC(&#x27;cc@example.com&#x27;);                    //æŠ„é€</span></span><br><span class="line">        <span class="comment">//$mail-&gt;addBCC(&#x27;bcc@example.com&#x27;);                    //å¯†é€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘é€é™„ä»¶</span></span><br><span class="line">        <span class="comment">// $mail-&gt;addAttachment(&#x27;../xy.zip&#x27;);         // æ·»åŠ é™„ä»¶</span></span><br><span class="line">        <span class="comment">// $mail-&gt;addAttachment(&#x27;../thumb-1.jpg&#x27;, &#x27;new.jpg&#x27;);    // å‘é€é™„ä»¶å¹¶ä¸”é‡å‘½å</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Content</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">isHTML</span>(<span class="literal">true</span>);                                  <span class="comment">// æ˜¯å¦ä»¥HTMLæ–‡æ¡£æ ¼å¼å‘é€  å‘é€åå®¢æˆ·ç«¯å¯ç›´æ¥æ˜¾ç¤ºå¯¹åº”HTMLå†…å®¹</span></span><br><span class="line">        <span class="variable">$mail</span>-&gt;Subject = <span class="string">&#x27;æœ‰æ–°ç•™è¨€ï¼Œè¯·å°½å¿«å®¡æ ¸ï¼&#x27;</span>;</span><br><span class="line">        <span class="variable">$mail</span>-&gt;Body    = <span class="string">&#x27;&lt;h1&gt;&#x27;</span>.<span class="variable">$content</span>.<span class="string">&#x27;&lt;/h1&gt;&#x27;</span>;</span><br><span class="line">        <span class="variable">$mail</span>-&gt;AltBody = <span class="variable">$content</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$mail</span>-&gt;<span class="title function_ invoke__">send</span>();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;é‚®ä»¶å‘é€æˆåŠŸ&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;é‚®ä»¶å‘é€å¤±è´¥: &#x27;</span>, <span class="variable">$mail</span>-&gt;ErrorInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">sendEmail</span>(<span class="string">&#x27;å¿«æ¥çœ‹çœ‹å§&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è¿˜éœ€è¦ä¸€ä¸ªsrcæ–‡ä»¶å¤¹ï¼Œå†…å®¹å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-1.png"></p><p>å¯ä»¥åœ¨GitHubä¸‹è½½<a href="https://github.com/PHPMailer/PHPMailer%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%90%8E%E8%A7%A3%E5%8E%8B%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E7%94%A8%E5%88%B0src%E6%96%87%E4%BB%B6%E5%A4%B9">https://github.com/PHPMailer/PHPMailerï¼Œä¸‹è½½åè§£å‹ï¼Œåªéœ€è¦ç”¨åˆ°srcæ–‡ä»¶å¤¹</a></p><p>è“å¥äº‘ä¸‹è½½é“¾æ¥<a href="https://xinhaojin.lanzoui.com/izMoEqz9fyj">https://xinhaojin.lanzoui.com/izMoEqz9fyj</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image-2.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>php</tag>
      
      <tag>SMTP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å†³wordpressé¡µé¢æ”¹ä¸ºå›ºå®šé“¾æ¥å403çš„é—®é¢˜</title>
    <link href="/2021/07/03/%E8%A7%A3%E5%86%B3wordpress%E9%A1%B5%E9%9D%A2%E6%94%B9%E4%B8%BA%E5%9B%BA%E5%AE%9A%E9%93%BE%E6%8E%A5%E5%90%8E403%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2021/07/03/%E8%A7%A3%E5%86%B3wordpress%E9%A1%B5%E9%9D%A2%E6%94%B9%E4%B8%BA%E5%9B%BA%E5%AE%9A%E9%93%BE%E6%8E%A5%E5%90%8E403%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼Œåœ¨ç«™ç‚¹ç›®å½•å­—æ®µåæ·»åŠ </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (-f <span class="variable">$request_filename</span>/index.html)&#123;</span><br><span class="line">    <span class="title function_ invoke__">rewrite</span> (.*) $<span class="number">1</span>/index.html <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (-f <span class="variable">$request_filename</span>/index.php)&#123;</span><br><span class="line">    <span class="title function_ invoke__">rewrite</span> (.*) $<span class="number">1</span>/index.php;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">    <span class="title function_ invoke__">rewrite</span> (.*) /index.php;</span><br><span class="line">    &#125;</span><br><span class="line">    rewrite /wp-admin$ <span class="variable">$scheme</span>:<span class="comment">//$host$uri/ permanent;</span></span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/07/image.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>wordpress</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonå‘é€QQé‚®ä»¶</title>
    <link href="/2021/06/30/python%E5%8F%91%E9%80%81qq%E9%82%AE%E4%BB%B6/"/>
    <url>/2021/06/30/python%E5%8F%91%E9%80%81qq%E9%82%AE%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨åå°æ•°æ®åº“å˜åŒ–æ—¶ä¸»åŠ¨æé†’æˆ‘ï¼Œè‡ªåŠ¨å‘é‚®ä»¶æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©</p><h4 id="å¼€å¯QQé‚®ç®±çš„SMTPæœåŠ¡"><a href="#å¼€å¯QQé‚®ç®±çš„SMTPæœåŠ¡" class="headerlink" title="å¼€å¯QQé‚®ç®±çš„SMTPæœåŠ¡"></a>å¼€å¯QQé‚®ç®±çš„SMTPæœåŠ¡</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-8.png"></p><h4 id="è·å–æˆæƒç "><a href="#è·å–æˆæƒç " class="headerlink" title="è·å–æˆæƒç "></a>è·å–æˆæƒç </h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-9.png"></p><h4 id="ä»£ç å¦‚ä¸‹"><a href="#ä»£ç å¦‚ä¸‹" class="headerlink" title="ä»£ç å¦‚ä¸‹"></a>ä»£ç å¦‚ä¸‹</h4><p>å®Œå…¨å‚è€ƒäº†èœé¸Ÿæ•™ç¨‹çš„ä»£ç ï¼Œä¿®æ”¹å‚æ•°å³å¯<a href="https://www.runoob.com/python3/python3-smtp.html">https://www.runoob.com/python3/python3-smtp.html</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¬¬ä¸‰æ–¹ SMTP æœåŠ¡</span></span><br><span class="line">mail_host=<span class="string">&quot;smtp.qq.com&quot;</span>  <span class="comment">#è®¾ç½®æœåŠ¡å™¨ï¼Œè¿™é‡Œæ˜¯QQçš„smtpæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">mail_user=<span class="string">&quot;xinhaojin@qq.com&quot;</span>    <span class="comment">#ç”¨æˆ·å</span></span><br><span class="line">mail_pass=<span class="string">&quot;tj***********j&quot;</span>   <span class="comment">#å£ä»¤ ï¼Œå³æˆæƒç </span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">sender = <span class="string">&#x27;xinhaojin@qq.com&#x27;</span><span class="comment">#å‘é€è€…</span></span><br><span class="line">receivers = [<span class="string">&#x27;xinhaojin@qq.com&#x27;</span>]  <span class="comment"># æ¥æ”¶é‚®ä»¶ï¼Œå¯è®¾ç½®ä¸ºä½ çš„QQé‚®ç®±æˆ–è€…å…¶ä»–é‚®ç®±</span></span><br><span class="line"> </span><br><span class="line">message = MIMEText(<span class="string">&#x27;Python é‚®ä»¶å‘é€æµ‹è¯•...&#x27;</span>, <span class="string">&#x27;plain&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">message[<span class="string">&#x27;From&#x27;</span>] = Header(<span class="string">&quot;èœé¸Ÿæ•™ç¨‹&quot;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">message[<span class="string">&#x27;To&#x27;</span>] =  Header(<span class="string">&quot;æµ‹è¯•&quot;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">subject = <span class="string">&#x27;Python SMTP é‚®ä»¶æµ‹è¯•&#x27;</span></span><br><span class="line">message[<span class="string">&#x27;Subject&#x27;</span>] = Header(subject, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    smtpObj = smtplib.SMTP() </span><br><span class="line">    smtpObj.connect(mail_host, <span class="number">25</span>)    <span class="comment"># 25 ä¸º SMTP ç«¯å£å·</span></span><br><span class="line">    smtpObj.login(mail_user,mail_pass)</span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;é‚®ä»¶å‘é€æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> smtplib.SMTPException <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;Error: æ— æ³•å‘é€é‚®ä»¶&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-10.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythoné¡¹ç›®ç”Ÿæˆrequirements.txt</title>
    <link href="/2021/06/26/python%E9%A1%B9%E7%9B%AE%E7%94%9F%E6%88%90requirements-txt/"/>
    <url>/2021/06/26/python%E9%A1%B9%E7%9B%AE%E7%94%9F%E6%88%90requirements-txt/</url>
    
    <content type="html"><![CDATA[<h4 id="å¯¼å‡ºå½“å‰ç¯å¢ƒæ‰€æœ‰ä¾èµ–"><a href="#å¯¼å‡ºå½“å‰ç¯å¢ƒæ‰€æœ‰ä¾èµ–" class="headerlink" title="å¯¼å‡ºå½“å‰ç¯å¢ƒæ‰€æœ‰ä¾èµ–"></a>å¯¼å‡ºå½“å‰ç¯å¢ƒæ‰€æœ‰ä¾èµ–</h4><pre><code>pip freeze &gt; requirements.txt</code></pre><p>ä½†è¿™äº›ä¸ä¸€å®šéƒ½æ˜¯å½“å‰é¡¹ç›®å¿…éœ€çš„åŒ…ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯ä¸‹é¢è¿™ç§</p><h4 id="å¯¼å‡ºå½“å‰ç›®å½•é¡¹ç›®çš„ä¾èµ–"><a href="#å¯¼å‡ºå½“å‰ç›®å½•é¡¹ç›®çš„ä¾èµ–" class="headerlink" title="å¯¼å‡ºå½“å‰ç›®å½•é¡¹ç›®çš„ä¾èµ–"></a>å¯¼å‡ºå½“å‰ç›®å½•é¡¹ç›®çš„ä¾èµ–</h4><pre><code>pip install pipreqspipreqs . --encoding=utf8 --force</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-6.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-7.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>wordpressä¸€é”®æ¬è¿</title>
    <link href="/2021/06/01/wordpress%E4%B8%80%E9%94%AE%E6%90%AC%E8%BF%81/"/>
    <url>/2021/06/01/wordpress%E4%B8%80%E9%94%AE%E6%90%AC%E8%BF%81/</url>
    
    <content type="html"><![CDATA[<h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>ä¹‹å‰ç”¨çš„é˜¿é‡Œäº‘æœåŠ¡å™¨å¿«åˆ°æœŸäº†ï¼Œç»­è´¹ä¸èµ·ï¼Œä¹°äº†å°è…¾è®¯äº‘æœåŠ¡å™¨ï¼Œ3å¹´300å—ï¼ŒçœŸé¦™ã€‚é¦™çš„åŒæ—¶ï¼Œé—®é¢˜ä¹Ÿæ¥äº†ï¼Œä¹‹å‰çš„ç½‘ç«™æ€ä¹ˆæ¬è¿è¿‡æ¥ï¼ŒåŒæ—¶æˆ‘å¯¹ä¹‹å‰çš„ç½‘ç«™åŸŸåè¿˜ä¸æ»¡æ„ï¼Œæƒ³é‡æ–°æ¢ä¸€ä¸ªæ–°çš„ã€‚</p><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>æœ¬æ¥æƒ³æŠŠè¸©å‘è¿‡ç¨‹è®°å½•ä¸€ä¸‹çš„ï¼Œæƒ³æƒ³è¿˜æ˜¯ç®—äº†å§ï¼Œæ€»æ„Ÿè§‰ç½—é‡Œå§å—¦çš„ã€‚ç›´æ¥æŠŠæœ€æ­£ç¡®æœ€å®Œç¾çš„ä¸€æ¬¡åšå¯¹çš„æ–¹æ¡ˆè´´å‡ºæ¥ï¼</p><h5 id="å¯¼å‡º-wpressæ–‡ä»¶"><a href="#å¯¼å‡º-wpressæ–‡ä»¶" class="headerlink" title="å¯¼å‡º.wpressæ–‡ä»¶"></a>å¯¼å‡º.wpressæ–‡ä»¶</h5><p>é¦–å…ˆå®‰è£…<a href="https://wordpress.org/plugins/all-in-one-wp-migration/">All in one WP migration</a>æ’ä»¶ï¼Œç„¶åé€‰æ‹©å¯¼å‡ºï¼Œå¯¼å‡ºçš„æ—¶å€™å¯ä»¥æ·»åŠ æ¡ä»¶ï¼ŒæŠŠæ•°æ®åº“çš„æ–‡ä»¶å†…å®¹è¿›è¡Œè‡ªå®šä¹‰çš„æ›¿æ¢ï¼Œç‰¹åˆ«é€‚åˆè¦æ”¹åŸŸåçš„æˆ‘ï¼Œæ¯”å¦‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-1024x457.png"></p><p>ç„¶åä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘ï¼Œæ–‡ä»¶åç¼€æ˜¯.wpress</p><h5 id="å®‰è£…è€ç‰ˆæœ¬æ’ä»¶"><a href="#å®‰è£…è€ç‰ˆæœ¬æ’ä»¶" class="headerlink" title="å®‰è£…è€ç‰ˆæœ¬æ’ä»¶"></a>å®‰è£…è€ç‰ˆæœ¬æ’ä»¶</h5><p>åœ¨æ–°wordpressç«™ç‚¹ä¸Šï¼Œå®‰è£…æ—§ç‰ˆæœ¬çš„All in one WP Migrationæ’ä»¶ï¼ˆæ–°ç‰ˆæœ¬çš„æ’ä»¶ä¸èƒ½å…è´¹æ¢å¤å¤‡ä»½ï¼‰</p><p>ä¸‹è½½åœ°å€<a href="https://webhostingadvices.com/wp-content/uploads/2020/05/all-in-one-wp-migration-6.7.zip">All-in-on WP Migration Plugin 6.7</a>ï¼Œä¸‹è½½å®Œåé€šè¿‡æœ¬åœ°ä¸Šä¼ çš„æ–¹å¼å®‰è£…æ’ä»¶</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-1.png"></p><h5 id="ä¸Šä¼ -wpress"><a href="#ä¸Šä¼ -wpress" class="headerlink" title="ä¸Šä¼ .wpress"></a>ä¸Šä¼ .wpress</h5><p>å¯ç”¨æ’ä»¶åï¼Œé€šè¿‡FTPå·¥å…·æŠŠä¹‹å‰ä¸‹è½½çš„.wpressæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼ˆç½‘ç«™æ ¹ç›®å½•ä¸‹çš„wp-content&#x2F;ai1wm-backupsï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-2.png"></p><h5 id="æé«˜æ–‡ä»¶ä¸Šä¼ ä¸Šé™"><a href="#æé«˜æ–‡ä»¶ä¸Šä¼ ä¸Šé™" class="headerlink" title="æé«˜æ–‡ä»¶ä¸Šä¼ ä¸Šé™"></a>æé«˜æ–‡ä»¶ä¸Šä¼ ä¸Šé™</h5><p>æŸ¥æ‰¾php.ini</p><pre><code>php -i  grep &#39;php.ini&#39;</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-3.png"></p><p>æ‰“å¼€php.ini</p><pre><code>vim /www/server/php/70/etc/php.ini</code></pre><p>ä¿®æ”¹ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼Œç”±äºæˆ‘çš„.wpresså¤§æ¦‚780Mï¼Œæ‰€ä»¥æˆ‘æŠŠfilesizeæ”¹æˆäº†1024Mï¼Œå…¶ä»–å‚æ•°ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚è°ƒå¾ˆå¤§</p><pre><code>upload_max_filesize 128Mpost_max_size 128Mmemory_limit 256Mmax_execution_time 300max_input_time 300</code></pre><p>åˆ°è¿™é‡Œåªæ˜¯è§£é™¤äº†phpæœåŠ¡çš„é™åˆ¶ï¼Œæ’ä»¶æœ¬èº«è¿˜æœ‰é™åˆ¶ï¼Œéœ€è¦å¯¹æ’ä»¶è¿›è¡Œç¼–è¾‘ï¼Œé€‰æ‹©æ’ä»¶-æ’ä»¶ç¼–è¾‘å™¨ï¼Œå³ä¾§é€‰ä¸­All in one WP Migration,ç‚¹å‡»é€‰æ‹©ï¼Œç„¶åé€‰æ‹©constants.phpï¼Œç¼–è¾‘284è¡Œï¼Œsizeä¿®æ”¹ä¸ºå¦‚å›¾ï¼ˆæ•°å­—30åŸæœ¬æ˜¯28ï¼‰ï¼Œå¢å¤§1å°±å¢å¤§ä¸€å€ï¼Œ30çš„è¯é™åˆ¶ä¸Šä¼ æ˜¯2Gï¼Œå¤Ÿäº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-4-1024x409.png"></p><h5 id="æ¢å¤å¤‡ä»½"><a href="#æ¢å¤å¤‡ä»½" class="headerlink" title="æ¢å¤å¤‡ä»½"></a>æ¢å¤å¤‡ä»½</h5><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/image-5-1024x455.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/06/QQ%E6%88%AA%E5%9B%BE20210601193705-1024x435.png"></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>blog</tag>
      
      <tag>wordpress</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>windowså®‰è£…openssh</title>
    <link href="/2021/05/22/windows%E5%AE%89%E8%A3%85openssh/"/>
    <url>/2021/05/22/windows%E5%AE%89%E8%A3%85openssh/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸åä¸å¿«ï¼ˆæœ‰æˆ¾æ°”ï¼Œæœªæˆå¹´äººè¯·åœ¨å®¶é•¿é™ªåŒä¸‹é˜…è¯»ï¼‰"><a href="#ä¸åä¸å¿«ï¼ˆæœ‰æˆ¾æ°”ï¼Œæœªæˆå¹´äººè¯·åœ¨å®¶é•¿é™ªåŒä¸‹é˜…è¯»ï¼‰" class="headerlink" title="ä¸åä¸å¿«ï¼ˆæœ‰æˆ¾æ°”ï¼Œæœªæˆå¹´äººè¯·åœ¨å®¶é•¿é™ªåŒä¸‹é˜…è¯»ï¼‰"></a>ä¸åä¸å¿«ï¼ˆæœ‰æˆ¾æ°”ï¼Œæœªæˆå¹´äººè¯·åœ¨å®¶é•¿é™ªåŒä¸‹é˜…è¯»ï¼‰</h4><p>å°±è£…ä¸ªSSHï¼Œç½‘ä¸Šä¸€å †æ•™ç¨‹è´¼xxï¼ŒçœŸä¸çŸ¥é“å“ªé‡Œæ¥çš„è‡ªä¿¡å‘å‡ºæ¥ï¼Œæ²¡å›¾æ²¡é€»è¾‘æ²¡é‡ç‚¹æ²¡ä¸Šä¸‹æ–‡ï¼Œæˆ‘åäº†</p><p>æœ‰äº›äººçœŸä»¥ä¸ºè‡ªå·±å®‰è£…æˆåŠŸäº†å°±å¯ä»¥éšä¾¿å‘å‡ å¥è¯å‡ºæ¥æˆä¸ºå°ç™½æ•™ç¨‹äº†ï¼Ÿå‚»é€¼ã€‚</p><h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p><a href="https://github.com/PowerShell/Win32-OpenSSH/releases">https://github.com/PowerShell/Win32-OpenSSH/releases</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-35.png"></p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>è§£å‹åˆ°c:\Program Files\</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-36.png"></p><p>åœ¨OpenSSH-Win64æ–‡ä»¶å¤¹ä¸­æ‰“å¼€cmd</p><pre><code>powershell.exe -ExecutionPolicy Bypass -File install-sshd.ps1sc config sshd start= autonet start sshd</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-37.png"></p><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><p>ç¯å¢ƒå˜é‡-ç³»ç»Ÿå˜é‡-Pathæœ«å°¾æ·»åŠ ;<code>C:\Program Files\OpenSSH-Win64</code></p><h4 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h4><p>ä»¥ä¸Šå®‰è£…åªé’ˆå¯¹windowsä½œä¸ºå®¢æˆ·ç«¯çš„æƒ…å†µ</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linuxæœåŠ¡å™¨å®‰è£…jupyter notebook</title>
    <link href="/2021/05/22/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85jupyter-notebook/"/>
    <url>/2021/05/22/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85jupyter-notebook/</url>
    
    <content type="html"><![CDATA[<p>ç”¨pipå®‰è£…</p><pre><code>sudo pip3 install jupyter</code></pre><p>è¿›å…¥python3ç¯å¢ƒï¼Œè®¾ç½®å¯†ç ï¼Œç”Ÿæˆç§˜é’¥ï¼Œå¤åˆ¶ä¸‹æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">passwd()</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-33.png"></p><p>æŸ¥æ‰¾é…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„</p><pre><code>jupyter notebook --generate-config</code></pre><p>å¦‚æœæç¤ºæœªæ‰¾åˆ°å‘½ä»¤ï¼Œå…ˆæ‰¾ä¸€ä¸‹jupyterçš„å®‰è£…ç›®å½•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/10/image.png"></p><p>æ ¹æ®è·¯å¾„æ‰“å¼€é…ç½®æ–‡ä»¶jupyter_notebook_config.py,è¾“å…¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…è®¸rootç”¨æˆ·å¯åŠ¨</span></span><br><span class="line">c.NotebookApp.allow_root = <span class="literal">True</span></span><br><span class="line"><span class="comment">#å…è®¸ä»»æ„IPè®¿é—®</span></span><br><span class="line">c.NotebookApp.ip=<span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="comment">#é»˜è®¤ä¸æ‰“å¼€æµè§ˆå™¨ï¼Œä»…å¯åŠ¨æœåŠ¡</span></span><br><span class="line">c.NotebookApp.open_browser=<span class="literal">False</span></span><br><span class="line"><span class="comment">#å¯†é’¥</span></span><br><span class="line">c.NotebookApp.password=<span class="string">&#x27;argI******ä½ çš„å¯†é’¥**********zQ&#x27;</span></span><br><span class="line"><span class="comment">#ç«¯å£å·ï¼Œè®°å¾—æ”¾è¡Œ</span></span><br><span class="line">c.NotebookApp.port=<span class="number">8888</span></span><br><span class="line"><span class="comment">#å·¥ä½œç›®å½•</span></span><br><span class="line">c.NotebookApp.notebook_dir=<span class="string">&#x27;/notebook_space&#x27;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ä»»æ„ç»ˆç«¯çš„æµè§ˆå™¨è¾“å…¥IPç«¯å£å·å°±èƒ½æ‰“å¼€äº†ï¼Œå¯†ç æ˜¯è‡ªå·±è®¾ç½®çš„passwd</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-34-1024x332.png"></p><p>ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æŠŠjupyter notebookåŠ å…¥å¼€æœºå¯åŠ¨é¡¹</p><p>åœ¨&#x2F;etc&#x2F;rc.d&#x2F;rc.localä¸­æ·»åŠ </p><pre><code>jupyter notebook</code></pre>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº‘æœåŠ¡å™¨+wget+è½¬å‚¨ï¼šè§£å†³ç½‘ç»œé€ æˆçš„ä¸‹è½½é—®é¢˜</title>
    <link href="/2021/05/21/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8wget%E8%BD%AC%E5%82%A8%EF%BC%9A%E8%A7%A3%E5%86%B3%E7%BD%91%E7%BB%9C%E9%80%A0%E6%88%90%E7%9A%84%E4%B8%8B%E8%BD%BD%E9%97%AE%E9%A2%98/"/>
    <url>/2021/05/21/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8wget%E8%BD%AC%E5%82%A8%EF%BC%9A%E8%A7%A3%E5%86%B3%E7%BD%91%E7%BB%9C%E9%80%A0%E6%88%90%E7%9A%84%E4%B8%8B%E8%BD%BD%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>ä¸‹è½½ç»å¸¸æ˜¯ä¸€ä»¶è®©äººå¤´ç—›çš„äº‹æƒ…ï¼Œå°¤å…¶æ˜¯ä¸‹è½½å›½å¤–ç½‘ç«™çš„èµ„æºï¼Œèƒ½ç”¨çš„å›½å†…é•œåƒç«™å¾ˆå°‘ä¸”ä¸ç¨³å®šï¼Œå½’æ ¹åˆ°åº•è¿˜æ˜¯ç½‘ç»œç¯å¢ƒä¸å¤Ÿå¥½ã€‚</p><p>ä¸€ç§æ— éœ€ä»£ç†çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ©ç”¨äº‘æœåŠ¡å™¨ä¸‹è½½èµ„æºï¼Œå†è½¬å­˜åˆ°æœ¬åœ°ï¼Œ å› ä¸ºäº‘æœåŠ¡å™¨çš„ç½‘ç»œç¯å¢ƒé€šå¸¸éå¸¸å¥½ï¼ˆéƒ¨åˆ†èµ„æºåœ¨å›½å†…äº‘æœåŠ¡å™¨ä¸Šä»ç„¶æ— æ³•ä¸‹è½½ï¼Œå¯ä»¥è€ƒè™‘ç”¨å¢ƒå¤–æœåŠ¡å™¨ä¸‹è½½ï¼‰</p><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ç‰¹æ„æ‰¾äº†ä¸€ä¸ªä¹‹å‰ä¸‹è½½åˆ—è¡¨é‡Œå¤±è´¥çš„ä¸€ä¸ªæ¡ç›®ï¼Œå†æ¬¡å°è¯•ä¸‹è½½ï¼Œæœç„¶è¿˜æ˜¯å¤±è´¥çš„ï¼Œæ­£å¥½æ¥æ‹¿æµ‹è¯•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/QQ%E6%88%AA%E5%9B%BE20210521151432.png"></p><p>å¤åˆ¶ä¸‹è½½é“¾æ¥ï¼Œç™»ä¸ŠæœåŠ¡å™¨ï¼Œä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½ï¼Œç•…é€šæ— é˜»ï¼Œç”±äºå¸¦å®½é™åˆ¶ä¸ç®—ç‰¹åˆ«å¿«ï¼Œä½†è‡³å°‘è§£å†³äº†å®Œå…¨æ— æ³•ä¸‹è½½çš„é—®é¢˜</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-31.png"></p><p>æ¥ä¸‹æ¥å°±æ˜¯ä»è‡ªå·±çš„æœåŠ¡å™¨ä¸‹è½½èµ„æºåˆ°æœ¬åœ°äº†ï¼Œä¾‹å¦‚æˆ‘ä½¿ç”¨finalshell,ç›´æ¥é€‰æ‹©ä¸‹è½½å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-32-1024x678.png"></p><p>ä»¥åç¢°åˆ°ä¸‹è½½æ–¹é¢çš„ç–‘éš¾æ‚ç—‡ï¼Œä¼˜å…ˆè€ƒè™‘æ­¤æ–¹æ³•ï¼Œç‰¹æ­¤è®°å½•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>ä»£ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>windowså®‰è£…wget+ç”¨æ³•</title>
    <link href="/2021/05/21/windows%E5%AE%89%E8%A3%85wget%E7%94%A8%E6%B3%95/"/>
    <url>/2021/05/21/windows%E5%AE%89%E8%A3%85wget%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>wgetæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¯é…ç½®ä¸‹è½½å·¥å…·</p><h4 id="windowsä¸‹å®‰è£…wget"><a href="#windowsä¸‹å®‰è£…wget" class="headerlink" title="windowsä¸‹å®‰è£…wget"></a>windowsä¸‹å®‰è£…wget</h4><p>ä¸‹è½½åœ°å€-&gt;<a href="https://jaist.dl.sourceforge.net/project/gnuwin32/wget/1.11.4-1/">è¿™é‡Œ</a></p><p>å®‰è£…æ—¶è®°ä½å®‰è£…ç›®å½•ï¼Œè¿™ç©æ„å„¿å‹æ ¹ä¸å ç©ºé—´ï¼Œéšä»–é»˜è®¤å³å¯</p><p>åœ¨é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡-ç³»ç»Ÿå˜é‡ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ</p><pre><code>GNU_HOME=C:\\Program Files (x86)\\GnuWin32</code></pre><p>åœ¨ç³»ç»Ÿå˜é‡Pathä¸­æ·»åŠ ;%GNU_HOME%\binï¼ˆwin7æ³¨æ„å‰é¢æœ‰åˆ†å·ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-30.png"></p><h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><p><strong>ç›´æ¥ä¸‹è½½å•ä¸ªæ–‡ä»¶</strong> wget url</p><pre><code>wget https://down.qq.com/qqweb/PCQQ/PCQQ_EXE/PCQQ2021.exe</code></pre><p><strong>è‡ªå®šä¹‰æ–‡ä»¶å</strong> wget -O name url</p><p>wgeté»˜è®¤ä¼šä»¥æœ€åä¸€ä¸ªç¬¦åˆâ€&#x2F;â€çš„åé¢çš„å­—ç¬¦æ¥å‘½ä»¤ï¼Œå¯¹äºåŠ¨æ€é“¾æ¥çš„ä¸‹è½½é€šå¸¸æ–‡ä»¶åä¼šä¸æ­£ç¡®ã€‚Â </p><p>ä¸‹é¢çš„ä¾‹å­ä¼šä¸‹è½½ä¸€ä¸ªæ–‡ä»¶å¹¶ä»¥åç§°download.php?id&#x3D;1080ä¿å­˜Â </p><pre><code>wget http://www.xxxx.xxx/download?id=1080</code></pre><p>å³ä½¿ä¸‹è½½çš„æ–‡ä»¶æ˜¯zipæ ¼å¼ï¼Œå®ƒä»ç„¶ä»¥download.php?id&#x3D;1080å‘½å</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‚æ•°-Oæ¥æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å</p><pre><code>wget -O abc.zip http://www.xxxx.xxx/download.php?id=1080</code></pre><p><strong>æ–­ç‚¹ç»­ä¼ </strong> wget -c</p><p>å¯¹äºå¤§æ–‡ä»¶ä¸‹è½½æ—¶é—´è¾ƒé•¿ï¼Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œè¿™æ—¶ä½¿ç”¨wget -c urlä¾¿å¯ä»¥ç»­ä¼ </p><p><strong>åå°ä¸‹è½½</strong> wget -b</p><pre><code>wget -b url</code></pre><p>æŸ¥çœ‹è¿›åº¦å¯ä»¥ä½¿ç”¨wget-log</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
      <tag>wget</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LDAæ¨¡å‹(gensim)ä¸­æ–‡ä¸»é¢˜æå–</title>
    <link href="/2021/05/20/lda%E6%A8%A1%E5%9E%8B%E4%B8%AD%E6%96%87%E4%B8%BB%E9%A2%98%E6%8F%90%E5%8F%96/"/>
    <url>/2021/05/20/lda%E6%A8%A1%E5%9E%8B%E4%B8%AD%E6%96%87%E4%B8%BB%E9%A2%98%E6%8F%90%E5%8F%96/</url>
    
    <content type="html"><![CDATA[<h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p>pythonç‰ˆæœ¬3.7</p><pre><code>pip install gensimpip install jieba</code></pre><h4 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h4><p>æ•°æ®å¾ˆéšæ„ï¼Œæ²¡ä»€ä¹ˆæ ¼å¼è¦æ±‚ï¼Œåƒè¿™æ ·çš„éƒ½è¡Œ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-25-1024x596.png"></p><h4 id="åˆ†è¯"><a href="#åˆ†è¯" class="headerlink" title="åˆ†è¯"></a>åˆ†è¯</h4><p>æŠŠåŸå§‹æ•°æ®æŒ‰è¡Œåˆ†è¯ï¼Œå»æ‰æ²¡ç”¨çš„éƒ¨åˆ†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-26-1024x388.png"></p><p>åˆ†è¯ä»£ç å¦‚ä¸‹ï¼Œå¯ä»¥ä¸€æ¬¡è½¬æ¢å•ä¸ªtxtæˆ–è€…æ•´ä¸ªæ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹å†…ä¸èƒ½æœ‰å…¶ä»–æ ¼å¼æ–‡ä»¶ï¼‰</p><p>#coding&#x3D;utf-8<br>import re<br>import jieba as jb<br>import os<br>def stopwordslist(filepath):<br>    stopwords &#x3D; [line.strip() for line in open(filepath, â€˜râ€™, encoding&#x3D;â€™utf-8â€™).readlines()]<br>    return stopwords</p><h1 id="å¯¹å¥å­è¿›è¡Œåˆ†è¯"><a href="#å¯¹å¥å­è¿›è¡Œåˆ†è¯" class="headerlink" title="å¯¹å¥å­è¿›è¡Œåˆ†è¯"></a>å¯¹å¥å­è¿›è¡Œåˆ†è¯</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">seg_sentence</span>(<span class="params">sentence</span>):</span><br><span class="line">    sentence = re.sub(<span class="string">u&#x27;[0-9\\.]+&#x27;</span>, <span class="string">u&#x27;&#x27;</span>, sentence)</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;jb.add_word(&#x27;å…‰çº¿æ‘„å½±å­¦é™¢&#x27;)# è¿™é‡Œæ˜¯åŠ å…¥ç”¨æˆ·è‡ªå®šä¹‰çš„è¯æ¥è¡¥å……jiebaè¯å…¸ã€‚</span></span><br><span class="line"><span class="string">    jb.add_word(&#x27;æ›¾å…°è€å¸ˆ&#x27;)# åŒæ ·ï¼Œå¦‚æœä½ æƒ³åˆ é™¤å“ªä¸ªç‰¹å®šçš„æœªç™»å½•è¯ï¼Œå°±å…ˆæŠŠå®ƒåŠ ä¸Šç„¶åæ”¾è¿›åœç”¨è¯è¡¨é‡Œã€‚</span></span><br><span class="line"><span class="string">    jb.add_word(&#x27;ç½‘é¡µé“¾æ¥&#x27;)</span></span><br><span class="line"><span class="string">    jb.add_word(&#x27;å¾®åšè§†é¢‘&#x27;)&#x27;&#x27;&#x27;</span></span><br><span class="line">    sentence_seged = jb.cut(sentence.strip())</span><br><span class="line">    stopwords = stopwordslist(<span class="string">&#x27;stopwords.txt&#x27;</span>)  <span class="comment"># è¿™é‡ŒåŠ è½½åœç”¨è¯çš„è·¯å¾„</span></span><br><span class="line">    outstr = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> sentence_seged:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords <span class="keyword">and</span> word.__len__()&gt;<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">if</span> word != <span class="string">&#x27;\\t&#x27;</span>:</span><br><span class="line">                outstr += word</span><br><span class="line">                outstr += <span class="string">&quot; &quot;</span></span><br><span class="line">    <span class="keyword">return</span> outstr</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">seg_file</span>(<span class="params">input_file,output_file</span>):<span class="comment">#å•ä¸ªtxt</span></span><br><span class="line">    inputs = <span class="built_in">open</span>(input_file, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    outputs = <span class="built_in">open</span>(output_file, <span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> inputs:</span><br><span class="line">        line_seg = seg_sentence(line)  <span class="comment"># è¿™é‡Œçš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">        outputs.write(line_seg + <span class="string">&#x27;\\n&#x27;</span>)</span><br><span class="line">    outputs.close()</span><br><span class="line">    inputs.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">seg_dir</span>(<span class="params">input_dir,output_dir</span>):<span class="comment">#æ•´ä¸ªæ–‡ä»¶å¤¹</span></span><br><span class="line">    filelist=os.listdir(input_dir)</span><br><span class="line">    <span class="keyword">for</span> files <span class="keyword">in</span> filelist:</span><br><span class="line">        inputs = <span class="built_in">open</span>(input_dir+<span class="string">&#x27;/&#x27;</span>+files, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        outputs = <span class="built_in">open</span>(output_dir+<span class="string">&#x27;/&#x27;</span>+files, <span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> inputs:</span><br><span class="line">            line_seg = seg_sentence(line)  <span class="comment"># è¿™é‡Œçš„è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">            outputs.write(line_seg + <span class="string">&#x27;\\n&#x27;</span>)</span><br><span class="line">        outputs.close()</span><br><span class="line">        inputs.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">seg_dir(<span class="string">&quot;original_input&quot;</span>,<span class="string">&quot;processed_input&quot;</span>)</span><br><span class="line"><span class="comment">#seg_file(&quot;original_input/ç»å…´.txt&quot;,&quot;processed_input/ç»å…´.txt&quot;)</span></span><br></pre></td></tr></table></figure><h4 id="èšç±»"><a href="#èšç±»" class="headerlink" title="èšç±»"></a>èšç±»</h4><p>ç›¸å…³æ€§å¼ºçš„è¯èšä¸ºä¸€ç±»</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-27.png"></p><p>èšç±»ä»£ç å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> gensim <span class="keyword">import</span> corpora</span><br><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> LdaModel</span><br><span class="line"><span class="keyword">from</span> gensim.corpora <span class="keyword">import</span> Dictionary</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params">file</span>):</span><br><span class="line">    train = []</span><br><span class="line">    fp = codecs.<span class="built_in">open</span>(<span class="string">&#x27;processed_input/&#x27;</span>+file,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fp:</span><br><span class="line">        <span class="keyword">if</span> line != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            line = line.split()</span><br><span class="line">            train.append([w <span class="keyword">for</span> w <span class="keyword">in</span> line])</span><br><span class="line"></span><br><span class="line">    dictionary = corpora.Dictionary(train)</span><br><span class="line"></span><br><span class="line">    corpus = [dictionary.doc2bow(text) <span class="keyword">for</span> text <span class="keyword">in</span> train]</span><br><span class="line"></span><br><span class="line">    lda = LdaModel(corpus=corpus, id2word=dictionary, num_topics=<span class="number">5</span>, passes=<span class="number">100</span>)</span><br><span class="line">    <span class="comment"># num_topicsï¼šä¸»é¢˜æ•°ç›®</span></span><br><span class="line">    <span class="comment"># passesï¼šè®­ç»ƒä¼¦æ¬¡</span></span><br><span class="line">    <span class="comment"># num_wordsï¼šæ¯ä¸ªä¸»é¢˜ä¸‹è¾“å‡ºçš„termçš„æ•°ç›®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&#x27;txt_output/&#x27;</span>+file):</span><br><span class="line">        os.remove(<span class="string">&#x27;txt_output/&#x27;</span>+file)</span><br><span class="line">    f=<span class="built_in">open</span>(<span class="string">&#x27;txt_output/&#x27;</span>+file,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> topic <span class="keyword">in</span> lda.print_topics(num_words = <span class="number">10</span>):</span><br><span class="line">        termNumber = topic[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(topic[<span class="number">0</span>], <span class="string">&#x27;:&#x27;</span>, sep=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        f.write(<span class="built_in">str</span>(topic[<span class="number">0</span>])+<span class="string">&#x27;:\\n&#x27;</span>)<span class="comment">#è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line">        listOfTerms = topic[<span class="number">1</span>].split(<span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> term <span class="keyword">in</span> listOfTerms:</span><br><span class="line">            listItems = term.split(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">            result=<span class="string">&#x27;  &#x27;</span>+listItems[<span class="number">1</span>]+<span class="string">&#x27;(&#x27;</span>+<span class="built_in">str</span>(listItems[<span class="number">0</span>])+<span class="string">&#x27;)&#x27;</span></span><br><span class="line">            <span class="built_in">print</span>(result)</span><br><span class="line">            f.write(result+<span class="string">&#x27;\\n&#x27;</span>)<span class="comment">#è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line">    f.close()</span><br><span class="line">classify(<span class="string">&#x27;å¡çº³æ²³.txt&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h4><p>æ·»åŠ ä¾èµ–</p><pre><code>pip install pyldavis</code></pre><p>åœ¨èšç±»ä»£ç çš„åŸºç¡€ä¸Šï¼Œå¢åŠ å¯è§†åŒ–ï¼Œä¿å­˜ç½‘é¡µæ–‡ä»¶åˆ°æœ¬åœ°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> gensim</span><br><span class="line"><span class="keyword">import</span> OpenSSL.crypto</span><br><span class="line"><span class="keyword">import</span> pyLDAvis.gensim_models</span><br><span class="line"><span class="keyword">from</span> gensim <span class="keyword">import</span> corpora, models</span><br><span class="line"><span class="keyword">from</span> gensim.corpora <span class="keyword">import</span> Dictionary</span><br><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> LdaModel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visualize</span>(<span class="params">file</span>):</span><br><span class="line">    train = []</span><br><span class="line">    fp = codecs.<span class="built_in">open</span>(<span class="string">&#x27;processed_input/&#x27;</span>+file,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fp:</span><br><span class="line">        <span class="keyword">if</span> line != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            line = line.split()</span><br><span class="line">            train.append([w <span class="keyword">for</span> w <span class="keyword">in</span> line])</span><br><span class="line"></span><br><span class="line">    dictionary = corpora.Dictionary(train)</span><br><span class="line"></span><br><span class="line">    corpus = [dictionary.doc2bow(text) <span class="keyword">for</span> text <span class="keyword">in</span> train]</span><br><span class="line"></span><br><span class="line">    lda = LdaModel(corpus=corpus, id2word=dictionary, num_topics=<span class="number">5</span>, passes=<span class="number">100</span>)</span><br><span class="line">    <span class="comment"># num_topicsï¼šä¸»é¢˜æ•°ç›®</span></span><br><span class="line">    <span class="comment"># passesï¼šè®­ç»ƒä¼¦æ¬¡</span></span><br><span class="line">    <span class="comment"># num_wordsï¼šæ¯ä¸ªä¸»é¢˜ä¸‹è¾“å‡ºçš„termçš„æ•°ç›®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&#x27;txt_output/&#x27;</span>+file):</span><br><span class="line">        os.remove(<span class="string">&#x27;txt_output/&#x27;</span>+file)</span><br><span class="line">    f=<span class="built_in">open</span>(<span class="string">&#x27;txt_output/&#x27;</span>+file,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> topic <span class="keyword">in</span> lda.print_topics(num_words = <span class="number">10</span>):</span><br><span class="line">        termNumber = topic[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(topic[<span class="number">0</span>], <span class="string">&#x27;:&#x27;</span>, sep=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        f.write(<span class="built_in">str</span>(topic[<span class="number">0</span>])+<span class="string">&#x27;:\\n&#x27;</span>)<span class="comment">#è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line">        listOfTerms = topic[<span class="number">1</span>].split(<span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> term <span class="keyword">in</span> listOfTerms:</span><br><span class="line">            listItems = term.split(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">            result=<span class="string">&#x27;  &#x27;</span>+listItems[<span class="number">1</span>]+<span class="string">&#x27;(&#x27;</span>+<span class="built_in">str</span>(listItems[<span class="number">0</span>])+<span class="string">&#x27;)&#x27;</span></span><br><span class="line">            <span class="built_in">print</span>(result)</span><br><span class="line">            f.write(result+<span class="string">&#x27;\\n&#x27;</span>)<span class="comment">#è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line">    f.close()</span><br><span class="line">    <span class="comment">#dictionary = gensim.corpora.Dictionary.load(&#x27;lda.dict&#x27;)</span></span><br><span class="line">    <span class="comment">#corpus = gensim.corpora.MmCorpus(&#x27;lda.mm&#x27;)</span></span><br><span class="line">    <span class="comment">#lda = models.ldamodel.LdaModel.load(&#x27;lda.lda&#x27;)</span></span><br><span class="line">    vis = pyLDAvis.gensim_models.prepare(lda, corpus, dictionary)</span><br><span class="line">    pyLDAvis.save_html(vis, <span class="string">&#x27;html_output/&#x27;</span>+file[:-<span class="number">4</span>]+<span class="string">&#x27;.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">visualize(<span class="string">&quot;ç»å…´.txt&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-28-1024x646.png"></p><h4 id="å¯è§†åŒ–ç»“æœçš„å«ä¹‰"><a href="#å¯è§†åŒ–ç»“æœçš„å«ä¹‰" class="headerlink" title="å¯è§†åŒ–ç»“æœçš„å«ä¹‰"></a>å¯è§†åŒ–ç»“æœçš„å«ä¹‰</h4><p>å·¦è¾¹çš„æ¯ä¸ªæ°”æ³¡ä»£è¡¨ä¸€ä¸ªä¸»é¢˜ï¼Œæ°”æ³¡è¶Šå¤§ï¼Œåºå·ä¹Ÿè¶Šå°ï¼Œä»£è¡¨è¿™ä¸ªä¸»é¢˜å‡ºç°çš„é¢‘ç‡è¶Šé«˜ï¼Œæ°”æ³¡ä¹‹é—´çš„è·ç¦»è¿œè¿‘ä»£è¡¨ä¸»é¢˜ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œæ°”æ³¡é‡å ä»£è¡¨ä¸»é¢˜ä¹‹é—´çš„ç‰¹å¾è¯æœ‰äº¤å‰é‡å¤</p><p>é€‰ä¸­ä¸»é¢˜æ°”æ³¡åï¼Œå³ä¾§åˆ—å‡ºäº†è¿™ä¸ªä¸»é¢˜ä¸‹çš„30ä¸ªæœ€å…·ç›¸å…³æ€§çš„ä¸»é¢˜è¯ï¼Œçº¢è‰²æŸ±å­ä»£è¡¨è¯¥ç‰¹å¾è¯åœ¨è¿™ä¸ªä¸»é¢˜ä¸‹å‡ºç°çš„æ¬¡æ•°ï¼Œæ›´é•¿çš„æµ…è“è‰²æŸ±å­ä»£è¡¨è¯¥ä¸»é¢˜è¯åœ¨æ•´ä¸ªæ–‡æœ¬ä¸­å‡ºç°çš„æ¬¡æ•°</p><p>å³ä¸Šè§’çš„Î»å‚æ•°ï¼Œå¯ä»¥é€šè¿‡æ‹‰åŠ¨è°ƒèŠ‚ï¼Œä»£è¡¨çš„æ˜¯ä¸»é¢˜è¯ä¸ä¸»é¢˜çš„ç›¸å…³æ€§ã€‚å¦‚æœÎ»æ¥è¿‘1ï¼Œé‚£ä¹ˆåœ¨è¯¥ä¸»é¢˜ä¸‹æ›´é¢‘ç¹å‡ºç°çš„è¯ï¼Œè·Ÿä¸»é¢˜æ›´ç›¸å…³ï¼›å¦‚æœÎ»è¶Šæ¥è¿‘0ï¼Œé‚£ä¹ˆè¯¥ä¸»é¢˜ä¸‹æ›´ç‰¹æ®Šã€æ›´ç‹¬æœ‰çš„è¯ï¼Œè·Ÿä¸»é¢˜æ›´ç›¸å…³ã€‚</p><h4 id="å¤‡æ³¨"><a href="#å¤‡æ³¨" class="headerlink" title="å¤‡æ³¨"></a>å¤‡æ³¨</h4><p>ç›®å½•æ ¼å¼å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-29.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>LDA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Anacondaå›½å†…é•œåƒæº3ä¸ª</title>
    <link href="/2021/05/20/anaconda%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%903%E4%B8%AA/"/>
    <url>/2021/05/20/anaconda%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%903%E4%B8%AA/</url>
    
    <content type="html"><![CDATA[<h4 id="åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒæº"><a href="#åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒæº" class="headerlink" title="åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒæº"></a>åŒ—äº¬å¤–å›½è¯­å¤§å­¦é•œåƒæº</h4><pre><code>channels:  - defaultsshow_channel_urls: truechannel_alias: https://mirrors.bfsu.edu.cn/anacondadefault_channels:  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/main  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/free  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/r  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/pro  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/msys2custom_channels:  conda-forge: https://mirrors.bfsu.edu.cn/anaconda/cloud  msys2: https://mirrors.bfsu.edu.cn/anaconda/cloud  bioconda: https://mirrors.bfsu.edu.cn/anaconda/cloud  menpo: https://mirrors.bfsu.edu.cn/anaconda/cloud  pytorch: https://mirrors.bfsu.edu.cn/anaconda/cloud  simpleitk: https://mirrors.bfsu.edu.cn/anaconda/cloud</code></pre><h4 id="ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒæº"><a href="#ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒæº" class="headerlink" title="ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒæº"></a>ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒæº</h4><pre><code>channels:  - defaultsshow_channel_urls: truechannel_alias: https://anaconda.mirrors.sjtug.sjtu.edu.cn/default_channels:  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/main  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/free  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/mro  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/msys2  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/pro  - https://anaconda.mirrors.sjtug.sjtu.edu.cn/pkgs/rcustom_channels:  conda-forge: https://anaconda.mirrors.sjtug.sjtu.edu.cn/conda-forge  soumith: https://anaconda.mirrors.sjtug.sjtu.edu.cn/cloud/soumith  bioconda: https://anaconda.mirrors.sjtug.sjtu.edu.cn/cloud/bioconda  menpo: https://anaconda.mirrors.sjtug.sjtu.edu.cn/cloud/menpo  viscid-hub: https://anaconda.mirrors.sjtug.sjtu.edu.cn/cloud/viscid-hub  atztogo: https://anaconda.mirrors.sjtug.sjtu.edu.cn/cloud/atztogo</code></pre><h4 id="æ¸…åå¤§å­¦é•œåƒæº"><a href="#æ¸…åå¤§å­¦é•œåƒæº" class="headerlink" title="æ¸…åå¤§å­¦é•œåƒæº"></a>æ¸…åå¤§å­¦é•œåƒæº</h4><pre><code>channels:  - defaultsshow_channel_urls: truechannel_alias: https://mirrors.tuna.tsinghua.edu.cn/anacondadefault_channels:  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2custom_channels:  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</code></pre>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>cudnnå®‰è£…</title>
    <link href="/2021/05/19/cudnn%E5%AE%89%E8%A3%85/"/>
    <url>/2021/05/19/cudnn%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡å·²ç»ä»‹ç»äº†cudaçš„å®‰è£…æ–¹æ³•</p><p>äºæ˜¯æˆ‘å°è¯•è¿è¡Œä¸€ä¸ªpaddleæ ·ä¾‹ï¼ŒæŠ¥é”™ï¼Œæœ€å‰é¢çš„æç¤ºä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼Œå¥½çš„æˆ‘çœ‹æ‡‚äº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-20-1024x129.png"></p><p>æ‰€ä»¥ï¼Œcudnnæ˜¯ä»€ä¹ˆï¼Ÿ</p><p><em>cuDNNï¼ˆCUDA Deep Neural Network libraryï¼‰ï¼šæ˜¯NVIDIAæ‰“é€ çš„é’ˆå¯¹æ·±åº¦ç¥ç»ç½‘ç»œçš„åŠ é€Ÿåº“ï¼Œæ˜¯ä¸€ä¸ªç”¨äºæ·±å±‚ç¥ç»ç½‘ç»œçš„GPUåŠ é€Ÿåº“ã€‚ å¦‚æœä½ è¦ç”¨GPUè®­ç»ƒæ¨¡å‹ï¼ŒcuDNNä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯ä¸€èˆ¬ä¼šé‡‡ç”¨è¿™ä¸ªåŠ é€Ÿåº“ã€‚</em></p><h4 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><p><a href="https://developer.nvidia.com/rdp/cudnn-download">ä¸‹è½½åœ°å€</a>ä¸‹è½½å‰éœ€è¦æ³¨å†Œç™»å½•NVIDIAè´¦å·</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/QQ%E6%88%AA%E5%9B%BE20210519135720.png"></p><p>ç™»å½•åé‡æ–°æ‰“å¼€ä¸‹è½½é“¾æ¥</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/QQ%E6%88%AA%E5%9B%BE20210519140216.png"></p><p>ä¸‹è½½å®Œæˆåè§£å‹ï¼Œç„¶åæŠŠbinã€includeã€libç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°cudaå®‰è£…ç›®å½•ä¸‹çš„binã€includeã€libç›®å½•</p><p>è¿™æ˜¯cudaå®‰è£…çš„é»˜è®¤è·¯å¾„C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2</p><h4 id="éªŒè¯å®‰è£…"><a href="#éªŒè¯å®‰è£…" class="headerlink" title="éªŒè¯å®‰è£…"></a>éªŒè¯å®‰è£…</h4><p>åœ¨CUDAæ–‡ä»¶å¤¹ä¸­æ‰“å¼€cmd</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-22.png"></p><p>è¾“å…¥.\bandwidthTest.exeå’Œ.\deviceQuery.exeï¼Œresult&#x3D;PASSå³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-24-1024x493.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cudaå®‰è£…</title>
    <link href="/2021/05/18/cuda%E5%AE%89%E8%A3%85/"/>
    <url>/2021/05/18/cuda%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h4 id="ç¡®å®šå®‰è£…ç‰ˆæœ¬"><a href="#ç¡®å®šå®‰è£…ç‰ˆæœ¬" class="headerlink" title="ç¡®å®šå®‰è£…ç‰ˆæœ¬"></a>ç¡®å®šå®‰è£…ç‰ˆæœ¬</h4><p>é¦–å…ˆæŸ¥çœ‹æ˜¾å¡ä¿¡æ¯ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨çš„è‹±ä¼Ÿè¾¾æ˜¾å¡ï¼Œæ‰“å¼€NVIDIAæ§åˆ¶é¢æ¿-å¸®åŠ©-ç³»ç»Ÿä¿¡æ¯-æ˜¾ç¤ºï¼ŒæŸ¥çœ‹é©±åŠ¨ç¨‹åºç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-9.png"></p><p>ä½¿ç”¨é©±åŠ¨ç²¾çµæŸ¥çœ‹å¯æ›´æ–°çš„é©±åŠ¨ç‰ˆæœ¬ï¼ˆåªç”¨äºæŸ¥çœ‹ï¼Œä¸éœ€è¦åœ¨è¿™æ›´æ–°é©±åŠ¨ï¼Œcudaå®‰è£…æ—¶ä¼šè‡ªåŠ¨æ›´æ–°é©±åŠ¨ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-10-1024x664.png"></p><p>æœ€åå¯¹ç…§è¿™å¼ <a href="https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html">è¡¨</a>ï¼ŒæŸ¥çœ‹å¯ä»¥å®‰è£…çš„cudaç‰ˆæœ¬ï¼Œå¯¹äºæˆ‘çš„æœºå™¨è€Œè¨€ï¼Œæ›´æ–°é©±åŠ¨åæœ€é«˜èƒ½å®‰è£…cuda10.2ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-12-1024x504.png"></p><h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p>åœ¨<a href="https://developer.nvidia.com/cuda-toolkit-archive">è¿™é‡Œ</a>é€‰æ‹©æˆ‘è¦å®‰è£…çš„ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-14.png"></p><p>ç‚¹å‡»ä¸‹è½½é“¾æ¥</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-13-1024x490.png"></p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>æ‰“å¼€å®‰è£…åŒ…ï¼Œé»˜è®¤è·¯å¾„å³å¯ï¼Œä¿è¯Cç›˜ç©ºé—´å……è¶³</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-15.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-16.png"></p><p>å®‰è£…å®Œæˆåå†æ¬¡æ‰“å¼€NVIDIAæ§åˆ¶é¢æ¿-å¸®åŠ©-ç³»ç»Ÿä¿¡æ¯</p><p>é©±åŠ¨æˆåŠŸæ›´æ–°</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-17.png"></p><p>cuda10.2ä¹Ÿå®‰è£…æˆåŠŸ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-18.png"></p><p>cmdè¾“å…¥nvcc -Vèƒ½çœ‹åˆ°ç‰ˆæœ¬å·</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-19.png"></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cloudflareåŸŸåé‡å®šå‘</title>
    <link href="/2021/05/11/cloudflare%E5%9F%9F%E5%90%8D%E9%87%8D%E5%AE%9A%E5%90%91/"/>
    <url>/2021/05/11/cloudflare%E5%9F%9F%E5%90%8D%E9%87%8D%E5%AE%9A%E5%90%91/</url>
    
    <content type="html"><![CDATA[<h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><p>å°†<a href="https://www.xinhaojin.top,https//xinhaojin.top%E4%B8%A4%E4%B8%AA%E5%9F%9F%E5%90%8D%E9%83%BD%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0https://main.xinhaojin.top">https://www.xinhaojin.top,https://xinhaojin.topä¸¤ä¸ªåŸŸåéƒ½é‡å®šå‘åˆ°https://main.xinhaojin.top</a></p><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>ä½¿ç”¨cloudflareç®¡ç†åŸŸå</p><p>ä¿®æ”¹DNSçš„Aè®°å½•ï¼Œåœ°å€è§£æåˆ°ä»»æ„DNSè§£ææœåŠ¡å™¨ï¼Œå¦‚114.114.114,8.8.8.8,223.5.5.5ç­‰(å»ºè®®ä½¿ç”¨é˜¿é‡Œäº‘å…¬å…±DNS)ï¼Œä»£ç†çŠ¶æ€é€‰æ‹©ä»£ç†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-6-1024x471.png"></p><p>é€‰æ‹©é¡µé¢è§„åˆ™ï¼Œæ–°å»ºè§„åˆ™</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-7-1024x490.png"></p><p>é€‰æ‹©è½¬å‘URLï¼Œ301é‡å®šå‘</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/image-8.png"></p><p>è¿™å°±å®Œæˆäº†ä»<a href="http://www.xinhaojin.topåˆ°main.xinhaojin.topçš„é‡å®šå‘/">www.xinhaojin.topåˆ°main.xinhaojin.topçš„é‡å®šå‘</a></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cloudflare</tag>
      
      <tag>åŸŸå</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCodeå†™Java</title>
    <link href="/2021/04/27/vscode%E5%86%99java/"/>
    <url>/2021/04/27/vscode%E5%86%99java/</url>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆè¦æœ‰Java JDKç¯å¢ƒï¼Œå†™åœ¨ä¸Šä¸€ç¯‡<br><a href="https://xinhaojin.github.io/2021/04/27/win10-java-se-jdk%E5%AE%89%E8%A3%85/">https://xinhaojin.github.io/2021/04/27/win10-java-se-jdkå®‰è£…/</a></p><h4 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h4><p>æ‰©å±•ç¨‹åºæœjavaå°±è¡Œï¼Œä¸»è¦æ˜¯å®‰è£…language support</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-38.png"></p><p>å®‰è£…å¥½ååœ¨è®¾ç½®é‡Œæœç´¢java.home</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-39.png"></p><p>è®¾ç½®é‡Œæœç´¢java runtimeï¼Œé€‰æ‹©å·²å®‰è£…çš„jdkï¼Œç„¶åreload window</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-50-1024x427.png"></p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>ctrl+shift+pè¾“å…¥javaï¼Œé€‰æ‹©åˆ›å»ºæ–°é¡¹ç›®</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-42.png"></p><p>é€‰æ‹©no build tools</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-43.png"></p><p>é€‰æ‹©æ–‡ä»¶å¤¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-44.png"></p><p>è¾“å…¥é¡¹ç›®å</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-45.png"></p><p>ç”Ÿæˆäº†é¡¹ç›®æ–‡ä»¶ï¼Œé€‰æ‹©app.java</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-51.png"></p><p>helloworldè¾“å‡ºæˆåŠŸ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-52-1024x674.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>win10 Java JDKå®‰è£…ï¼ˆOracle/OpenJDKï¼‰</title>
    <link href="/2021/04/27/win10-java-se-jdk%E5%AE%89%E8%A3%85/"/>
    <url>/2021/04/27/win10-java-se-jdk%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h3 id="Oracleç‰ˆæœ¬ï¼ˆå®‰è£…ç›¸å¯¹è¾ƒå¤æ‚ï¼‰"><a href="#Oracleç‰ˆæœ¬ï¼ˆå®‰è£…ç›¸å¯¹è¾ƒå¤æ‚ï¼‰" class="headerlink" title="Oracleç‰ˆæœ¬ï¼ˆå®‰è£…ç›¸å¯¹è¾ƒå¤æ‚ï¼‰"></a>Oracleç‰ˆæœ¬ï¼ˆå®‰è£…ç›¸å¯¹è¾ƒå¤æ‚ï¼‰</h3><h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p><a href="https://www.oracle.com/java/technologies/javase-downloads.html">https://www.oracle.com/java/technologies/javase-downloads.html</a></p><p>é€‰æ‹©ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-33.png"></p><p>é€‰æ‹©å¹³å°</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210427200447-1024x375.png"></p><p>ç°åœ¨ä¸‹è½½å¥½åƒè¦Oracleè´¦å·äº†â€¦â€¦æ²¡æœ‰çš„æ³¨å†Œä¸€ä¸ªå§</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>é€‰æ‹©è·¯å¾„å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210427201237.png"></p><h4 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h4><p>é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡-ç”¨æˆ·å˜é‡ï¼Œæ·»åŠ æˆ–ä¿®æ”¹3ä¸ªå˜é‡ï¼š</p><p>JAVA_HOMEÂ  Â  Â  C:\Program Files\Java\jdk1.8.0_291\</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210427202303-1.png"></p><p>PathÂ  Â  Â  Â %JAVA_HOME%\bin;%JAVA_HOME%\jre\bin</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210427202436.png"></p><p>CLASSPATHÂ  Â  .;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210427202529.png"></p><h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><p>cmdè¾“å…¥javaæœ‰å†…å®¹å°±å¯¹äº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-35.png"></p><p>java -versionæŸ¥çœ‹ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-36.png"></p><h3 id="OpenJDKç‰ˆæœ¬ï¼ˆè¶…çº§æ–¹ä¾¿ï¼‰"><a href="#OpenJDKç‰ˆæœ¬ï¼ˆè¶…çº§æ–¹ä¾¿ï¼‰" class="headerlink" title="OpenJDKç‰ˆæœ¬ï¼ˆè¶…çº§æ–¹ä¾¿ï¼‰"></a>OpenJDKç‰ˆæœ¬ï¼ˆè¶…çº§æ–¹ä¾¿ï¼‰</h3><p>ä»GitHubä¸‹è½½ï¼Œå¦‚<a href="https://github.com/AdoptOpenJDK/openjdk15-binaries/releases/">openjdk15</a>ï¼Œwindowsç›´æ¥é€‰æ‹©msiä¸‹è½½</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-47.png"></p><p>å®‰è£…æ—¶ä¸‹é¢ä¸¤é¡¹é»˜è®¤æ²¡æœ‰å‹¾é€‰ï¼Œå¯ä»¥é€‰ä¸€ä¸‹ï¼Œç„¶åä¸€ç›´ä¸‹ä¸€æ­¥å°±è¡Œ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-48.png"></p><p>è¿™æ ·å°±å®‰è£…å¥½äº†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-49.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VL53L0Xæ¿€å…‰æµ‹è·ï¼ˆæ ‘è“æ´¾ï¼‰</title>
    <link href="/2021/04/27/vl53l0x%E6%BF%80%E5%85%89%E6%B5%8B%E8%B7%9D%EF%BC%88%E6%A0%91%E8%8E%93%E6%B4%BE%EF%BC%89/"/>
    <url>/2021/04/27/vl53l0x%E6%BF%80%E5%85%89%E6%B5%8B%E8%B7%9D%EF%BC%88%E6%A0%91%E8%8E%93%E6%B4%BE%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>ä¸Šç¯‡æ›¾æåˆ°è¶…å£°æ³¢æµ‹è·éå¸¸ä¸å‡†ï¼Œæ‰€ä»¥èŠ±10å—é’±åœ¨æ·˜å®ä¹°äº†ä¸ªæ¿€å…‰æµ‹è·ä¼ æ„Ÿå™¨VL53L0Xï¼ˆä¾¿å®œæ‰ä¹°çš„ï¼‰ï¼Œç‰¹æ­¤è®°å½•é…ç½®è¿‡ç¨‹</p><h4 id="æ¥çº¿"><a href="#æ¥çº¿" class="headerlink" title="æ¥çº¿"></a>æ¥çº¿</h4><p>æœ‰4ä¸ªå¼•è„šéœ€è¦æ¥</p><p>VINæ¥3-5Vç”µæºï¼›GNDæ¥åœ°ï¼›SDAå’ŒSCLæ¥æ ‘è“æ´¾ä¸Šå¯¹åº”çš„SDAå’ŒSCL</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-32.png"></p><p>é‚£ä¹ˆæ€ä¹ˆåˆ¤æ–­æ¥çº¿æ˜¯å¦æ­£ç¡®å‘¢ï¼Ÿå¯ä»¥æŸ¥çœ‹I2Cè®¾å¤‡åœ°å€ï¼Œå¦‚æœæ¥çº¿åI2Cè®¾å¤‡å¤šäº†ä¸€ä¸ªï¼Œé‚£å°±åŸºæœ¬æ²¡é”™äº†</p><p>å¼€å¯I2C</p><pre><code>sudo raspi-config #ä¾æ¬¡é€‰æ‹©Interfacing Options---I2C---Enabled</code></pre><p>æŸ¥çœ‹I2Cè®¾å¤‡åœ°å€</p><pre><code>sudo i2cdetect -y 1</code></pre><h4 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h4><p>VL53L0Xæ˜¯æœ‰ä¸€ä¸ªä¸“é—¨çš„åŒ…çš„ï¼Œå¯ä»¥é€šè¿‡pipå®‰è£…</p><p>ä½†æˆ‘å°è¯•pipå®‰è£…åæç¤ºæ²¡æœ‰å¯ç”¨çš„ç‰ˆæœ¬,æŸ¥çœ‹pypiåå‘ç°ä»…æ”¯æŒåˆ°python3.5ï¼Œè€Œæˆ‘ç”¨çš„æ˜¯python3.7</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-31-1024x535.png"></p><p>æŠ±ç€ä¾¥å¹¸çš„å¿ƒç†ä¸‹è½½3.5çš„åŒ…ï¼Œæœ¬åœ°å®‰è£…æ—¶æŠŠåŒ…åæ”¹æˆ3.7çš„ï¼Œå®‰è£…æˆåŠŸï¼Œä½†æ˜¯è·‘äº†æ ·ä¾‹ä»£ç è¿˜æ˜¯ä¸å¯¹ï¼Œåˆ¤æ–­ä¸‹æ¥æ˜¯å®‰è£…çš„é—®é¢˜ï¼Œäºæ˜¯åˆæŠŠè¿™ä¸ªåŒ…å¸è½½äº†</p><h4 id="æ­£ç¡®æ–¹æ³•"><a href="#æ­£ç¡®æ–¹æ³•" class="headerlink" title="æ­£ç¡®æ–¹æ³•"></a>æ­£ç¡®æ–¹æ³•</h4><p>æ¢ä¸ªå®‰è£…æ–¹æ³•ï¼Œä¸Š<a href="https://github.com/pimoroni/VL53L0X-python">GitHub</a>ä¸€æœï¼Œæœç„¶æœ‰æºç å®‰è£…æ–¹æ³•</p><pre><code>sudo apt-get install build-essential python-dev#å‰ç½®æ¡ä»¶pip install git+https://github.com/pimoroni/VL53L0X-python.gitcd your_directory#é€‰æ‹©ä½ çš„ç›®å½•git clone https://github.com/pimoroni/VL53L0X_rasp_python.gitcd VL53L0X-pythonmake</code></pre><p>ç„¶ååœ¨VL53L0X-pythonæ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰ä¸€ä¸ªVL53L0X_example.pyï¼Œå°±æ˜¯æ ·ä¾‹ä»£ç ï¼Œèƒ½è·‘é€šå°±å¯ä»¥äº†</p><p>æ•´ä½“ç²¾åº¦è¡¨ç°ç¢¾å‹è¶…å£°æ³¢æ²¡æœ‰æ‚¬å¿µ</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
      <tag>æ¿€å…‰æµ‹è·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é’ˆå¯¹æŒ‡å®šå‚è€ƒç‰©çš„å•ç›®æ‘„åƒå¤´æµ‹è·</title>
    <link href="/2021/04/26/%E9%92%88%E5%AF%B9%E6%8C%87%E5%AE%9A%E5%8F%82%E8%80%83%E7%89%A9%E7%9A%84%E5%8D%95%E7%9B%AE%E6%91%84%E5%83%8F%E5%A4%B4%E6%B5%8B%E8%B7%9D/"/>
    <url>/2021/04/26/%E9%92%88%E5%AF%B9%E6%8C%87%E5%AE%9A%E5%8F%82%E8%80%83%E7%89%A9%E7%9A%84%E5%8D%95%E7%9B%AE%E6%91%84%E5%83%8F%E5%A4%B4%E6%B5%8B%E8%B7%9D/</url>
    
    <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>æµ‹è·æ˜¯æ™ºèƒ½å°è½¦ä¸Šå¸¸å¤‡çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå¸¸è§æ–¹æ¡ˆæœ‰è¶…å£°æ³¢æµ‹è·ã€çº¢å¤–çº¿æµ‹è·ã€æ¿€å…‰æµ‹è·ï¼Œå…¶ä¸­è¶…å£°æ³¢æµ‹è·éå¸¸é¸¡è‚‹ï¼Œä»…ä»…å¯¹äºå¤§å¹³é¢èƒ½èµ·åˆ°è‰¯å¥½çš„è¶…å£°æ³¢åå°„æ•ˆæœï¼Œå…¶ä»–æƒ…å†µå‡ ä¹æ— æ³•æµ‹é‡è·ç¦»ï¼Œçº¢å¤–å’Œæ¿€å…‰æµ‹è·åº”è¯¥æ˜¯æ€§èƒ½è¾ƒå¥½çš„ï¼Œä¸è¿‡ç›®å‰å°šæœªä½¿ç”¨ã€‚æ­¤å¤–ï¼Œè€ƒè™‘åˆ°æˆ‘çš„æ™ºèƒ½å°è½¦ä¸Šæœ‰ä¸€ä¸ªæ‘„åƒå¤´ï¼Œæˆ‘çš„åº”ç”¨åˆæ˜¯ç›®æ ‡æ£€æµ‹ï¼Œæ­£å¥½èƒ½æ¡†å‡ºæŒ‡å®šç‰©ä½“çš„è½®å»“ï¼Œæ ¹æ® è¿‘ <strong>å¤§</strong> è¿œ <em>å°</em> çš„åŸç†ï¼Œç†è®ºä¸Šæ¥è®²ï¼Œé€šè¿‡åˆ¤æ–­çŸ©å½¢æ¡†çš„å¤§å°åº”è¯¥å¯ä»¥æ¨æ–­ç‰©ä½“ç¦»æ‘„åƒå¤´çš„è·ç¦»ï¼Œäºæ˜¯å°è¯•ä½¿ç”¨æ‘„åƒå¤´è¿›è¡Œæµ‹è·å®éªŒã€‚</p><h4 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h4><p>ä¸€å¥è¯æ¦‚æ‹¬ï¼šæ‰‹åŠ¨æ ‡è®°å¤šä¸ª<strong>ç‚¹</strong>ï¼Œè¿›è¡Œå¤šé¡¹å¼æ‹Ÿåˆï¼Œå¾—åˆ°çŸ©å½¢æ¡†å‚æ•°ä¸è·ç¦»ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p><p>å·²çŸ¥çŸ©å½¢æ¡†çš„å®½åº¦ï¼ŒæŠŠå®ƒä½œä¸ºè‡ªå˜é‡xï¼ŒåŒæ—¶è¿›è¡Œå®é™…æµ‹é‡ï¼Œæµ‹é‡å€¼distanceä½œä¸ºå› å˜é‡ã€‚å¤šæ¢å‡ ä¸ªä½ç½®ï¼Œå†è¿›è¡Œæµ‹é‡ï¼Œå°±å¾—åˆ°äº†å¤šä¸ªx-distanceï¼ŒæŠŠå®ƒçœ‹åšå¤šä¸ªå·²çŸ¥ç‚¹ï¼Œç„¶åè¿›è¡Œå¤šé¡¹å¼æ‹Ÿåˆã€‚</p><p>è¿™ç§å¸¸ç”¨çš„ä¸œè¥¿ä¸€èˆ¬éƒ½ä¼šæœ‰å…è´¹çš„åœ¨çº¿å·¥å…·ï¼Œä¸€æœå°±æœ‰ã€‚å¦‚<a href="http://www.qinms.com/webapp/curvefit/cf.aspx">è¿™ä¸ª</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-28.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-29.png"></p><p>æ‹Ÿåˆçš„æ—¶å€™è¦æŸ¥çœ‹æ‹Ÿåˆç»“æœæ˜¯å¦è‰¯å¥½ï¼Œæœ‰äº›æ—¶å€™æ‹Ÿåˆçš„ç»“æœå¯¹äºå®æ•°èŒƒå›´å†…æ€»ä½“è‰¯å¥½ï¼Œä½†åœ¨å®é™…ä½¿ç”¨åœºæ™¯çš„èŒƒå›´å†…ä¸ä¸€å®šå¥½ï¼Œè¿™æ—¶å€™å»ºè®®æ¢ä¸€ä¸‹æœ€é«˜æ¬¡æ•°å†æ¬¡å°è¯•ï¼Œä¸Šé¢æˆ‘è¿™ä¸ªç»“æœå°±ç®—è¿˜ä¸é”™ã€‚</p><p>æ ¹æ®æ‹Ÿåˆæ–¹ç¨‹å¼ï¼Œå°±å¾—åˆ°äº†x-distanceçš„æ˜ å°„å…³ç³»ï¼Œä¹‹åå°±èƒ½é€šè¿‡ç›®æ ‡æ£€æµ‹çš„çŸ©å½¢æ¡†å®½åº¦ï¼Œæ¥æ¨ç®—è·ç¦»äº†ï¼Œå®é™…è¯¯å·®ä¹Ÿåœ¨3cmä»¥å†…ï¼Œå¯ä»¥æ¥å—</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-27-1024x805.png"></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
      <tag>å•ç›®æ‘„åƒå¤´æµ‹è·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”²éª¨æ–‡äº‘ï¼ˆOracle Cloudï¼‰nginxå¯åŠ¨å¤±è´¥ï¼ˆç«¯å£è¢«å ç”¨ï¼‰</title>
    <link href="/2021/04/24/%E7%94%B2%E9%AA%A8%E6%96%87%E4%BA%91%EF%BC%88oracle-cloud%EF%BC%89nginx%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%EF%BC%88%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%EF%BC%89/"/>
    <url>/2021/04/24/%E7%94%B2%E9%AA%A8%E6%96%87%E4%BA%91%EF%BC%88oracle-cloud%EF%BC%89nginx%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%EF%BC%88%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>ç”²éª¨æ–‡äº‘åˆ›å»ºå®ä¾‹åï¼Œå§‹ç»ˆæœ‰è¿›ç¨‹å ç”¨80ç«¯å£ï¼Œå¯¼è‡´nginxæ— æ³•æ­£å¸¸å¯ç”¨é»˜è®¤80ç«¯å£ï¼Œéå¸¸ä¸æ–¹ä¾¿</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-25.png"></p><p>å½“ç„¶å¯ä»¥killä¹‹åå†å°è¯•ï¼Œä½†æ˜¯è¿™æ˜æ˜¾æ˜¯å¼€å¯è‡ªå¯çš„æœåŠ¡ï¼Œkillä¸€æ¬¡ï¼Œè¿˜ä¼šæœ‰åƒåƒä¸‡ä¸‡æ¬¡</p><p>å¯¹äºcentos,ç»ˆç«¯è¾“å…¥ntsysv,æŸ¥çœ‹æ‰€æœ‰æœåŠ¡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-26.png"></p><p>æ–¹å‘é”®é€‰æ‹©ï¼Œæ‰¾åˆ°ç›¸å…³çš„ï¼ŒæŒ‰ç©ºæ ¼è®¾ç½®æˆ–å–æ¶ˆæœåŠ¡ï¼ŒæŒ‰tanabé”®åˆ‡åˆ°ä¸‹æ–¹æŒ‰é’®</p><p>è¿™é‡Œæ˜æ˜¾éœ€è¦å…³é—­çº¢æ¡†ä¸­çš„æœåŠ¡,ä¹Ÿå¯ä»¥ç›´æ¥ç”¨å‘½ä»¤</p><pre><code>systemctl stop oracle-cloud-agentsystemctl disable oracle-cloud-agentsystemctl stop oracle-cloud-agent-updatersystemctl disable oracle-cloud-agent-updater</code></pre><p>å¯¹äºUbuntu&#x2F;Debianï¼Œä½¿ç”¨service â€“status-allæŸ¥çœ‹æœåŠ¡</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cenos7ä¿®æ”¹sshç«¯å£å·</title>
    <link href="/2021/04/17/cenos7%E4%BF%AE%E6%94%B9ssh%E7%AB%AF%E5%8F%A3%E5%8F%B7/"/>
    <url>/2021/04/17/cenos7%E4%BF%AE%E6%94%B9ssh%E7%AB%AF%E5%8F%A3%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<p>ä»¥å‰çœŸæ²¡æƒ³è¿‡ä¼šæœ‰äººæ”»å‡»æˆ‘çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æ”¹sshé»˜è®¤ç«¯å£ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°è¿™ä¸ª</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/QQ%E6%88%AA%E5%9B%BE20210417012556.png"></p><p>æˆ‘çœ‹äº†ä¸‹ï¼Œä»4æœˆ13å·å¼€å§‹ï¼Œè¿ç»­æ”»å‡»äº†4å¤©ï¼Œæ»šçŠŠå­ç©æ„å„¿ï¼Œnmdï¼Œæ”¹ç«¯å£ï¼</p><p>æ‰“å¼€sshé…ç½®æ–‡ä»¶</p><pre><code>vim /etc/ssh/sshd_config</code></pre><p>æ‰¾åˆ°portï¼Œå–æ¶ˆæ³¨é‡Šï¼Œæ”¹ä¸ºè‡ªå®šä¹‰ç«¯å£</p><p>é‡å¯sshæœåŠ¡</p><pre><code>/etc/init.d/sshd restart</code></pre><p>æ·»åŠ é˜²ç«å¢™æ”¾è¡Œè§„åˆ™ï¼Œå¦‚ä¿®æ”¹sshç«¯å£ä¸ºxxx,åˆ™</p><pre><code>iptables -I INPUT  -p tcp --dport xxx -j ACCEPT</code></pre><p>æœ‰å®å¡”é¢æ¿çš„è®°å¾—åœ¨å®‰å…¨ç»„ä¸­æ”¾è¡Œå¯¹åº”ç«¯å£ï¼Œæœ‰äº‘æœåŠ¡å™¨ä¾›åº”å•†æä¾›çš„æ§åˆ¶å°çš„ä¹Ÿåœ¨å®‰å…¨ç»„ä¸­æ”¾è¡Œå¯¹åº”ç«¯å£ï¼Œé¡ºä¾¿æŠŠé»˜è®¤22ç«¯å£ç¦äº†</p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yolov5è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†</title>
    <link href="/2021/04/12/yolo5%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <url>/2021/04/12/yolo5%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h4 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h4><p><a href="https://xinhaojin.github.io/2021/04/12/yolov5%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">yolov5çš„ç¯å¢ƒé…ç½®</a></p><p><a href="https://xinhaojin.github.io/2021/04/12/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B-%E5%88%B6%E4%BD%9C%E6%95%B0%E6%8D%AE%E9%9B%86/">åˆ¶ä½œyolov5æ•°æ®é›†</a></p><h4 id="é…ç½®æ–‡ä»¶ä¿®æ”¹"><a href="#é…ç½®æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="é…ç½®æ–‡ä»¶ä¿®æ”¹"></a>é…ç½®æ–‡ä»¶ä¿®æ”¹</h4><p>1.å¤åˆ¶dataç›®å½•ä¸‹çš„coco.yamlï¼Œé‡å‘½åä¸ºè‡ªå®šä¹‰çš„ï¼Œå¦‚test.yaml</p><p>è¦ä¿®æ”¹çš„å†…å®¹æ˜¯ï¼Œå›¾ç‰‡è·¯å¾„ï¼Œç±»åˆ«æ•°ï¼Œç±»åˆ«åç§°</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-9-1024x416.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-10.png"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä¿®æ”¹åçš„å›¾ç‰‡è·¯å¾„çš„è¡¨è¾¾æ–¹å¼ä¸åŒï¼Œæ˜¯ç›´æ¥ç»™å‡ºå›¾ç‰‡çš„ç›®å½•ï¼Œå»ºè®®å°±åƒæˆ‘è¿™æ ·æ”¹ï¼Œç›®å½•ç»“æ„åœ¨ä¹‹å‰æ–‡ç« ä¸­ä»‹ç»è¿‡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-11.png"></p><p>2.ä¿®æ”¹weightsç›®å½•ä¸‹çš„yolov5s.yamlï¼ˆè¦ç”¨å“ªä¸ªå°±ä¿®æ”¹å“ªä¸ªï¼‰</p><p>ä¿®æ”¹å†…å®¹æ˜¯ç±»åˆ«æ•°ç›®</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-12.png"></p><p>3.ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„train.py</p><p>ä¿®æ”¹å†…å®¹ä¸ºå‡ ä¸ªé‡è¦å‚æ•°ï¼Œå¦‚ä¸Šé…ç½®çš„è¯ï¼Œå°±åº”è¯¥è¿™æ ·ä¿®æ”¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-14-1024x291.png"></p><p>å…¶ä¸­epochsæ˜¯è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤300ï¼Œæ—¶é—´å¤ªä¹…äº†ï¼Œå…ˆæ”¹å°ä¸€ç‚¹è¯•è¯•ï¼Œbatch-sizeè²Œä¼¼è·Ÿæ˜¾å¡é…ç½®å’Œå†…å­˜æœ‰å…³ï¼Œå»ºè®®ä¹Ÿå…ˆæ”¹å°ä¸€ç‚¹è¯•è¯•</p><p>æ‰§è¡Œtrain.pyå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼Œç»“æœå¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-15-1024x616.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-17-1024x420.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-18-1024x775.png"></p><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>ç¼–è¾‘æ ¹ç›®å½•ä¸‹çš„test.py</p><p>ä¿®æ”¹æƒé‡æ–‡ä»¶ä¸ºä»¥ä¸Šè®­ç»ƒå‡ºçš„ç»“æœï¼ˆä¸Šå›¾æ ‡çº¢ï¼‰ï¼Œå…¶ä»–å‚æ•°ä¿®æ”¹å¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-19-1024x353.png"></p><p>æ‰§è¡Œtest.pyåå°±ä¼šå»è¯†åˆ«æµ‹è¯•é›†ä¸­çš„å›¾ç‰‡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-21-1024x99.png"></p><p>åƒæˆ‘è¿™æ ·çš„ä¸€ä¸ªç®€å•ç›®æ ‡æ˜¯å¾ˆå®¹æ˜“æ£€æµ‹å‡ºæ¥çš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/test_batch0_pred-1024x474.jpg"></p><h4 id="æ­£å‘æ¨ç†"><a href="#æ­£å‘æ¨ç†" class="headerlink" title="æ­£å‘æ¨ç†"></a>æ­£å‘æ¨ç†</h4><p>ç¼–è¾‘detect.pyï¼ŒåŒæ ·åœ°ï¼Œä¿®æ”¹ä¸»è¦å‚æ•°ï¼Œè®­ç»ƒå‡ºçš„æƒé‡æ–‡ä»¶å’Œæƒ³è¦æµ‹è¯•çš„å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-22-1024x197.png"></p><p>ç»“æœå¦‚ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-23.png"></p>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç›®æ ‡æ£€æµ‹-åˆ¶ä½œæ•°æ®é›†</title>
    <link href="/2021/04/12/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B-%E5%88%B6%E4%BD%9C%E6%95%B0%E6%8D%AE%E9%9B%86/"/>
    <url>/2021/04/12/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B-%E5%88%B6%E4%BD%9C%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h4 id="å›¾åƒé‡‡é›†"><a href="#å›¾åƒé‡‡é›†" class="headerlink" title="å›¾åƒé‡‡é›†"></a>å›¾åƒé‡‡é›†</h4><p>å¯ä»¥è‡ªå·±æ‹ç…§ï¼Œæˆ–è€…æ˜¯æœé›†ç½‘ç»œå›¾ç‰‡ï¼Œæˆ‘éƒ½è¯•äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è‡ªå·±æ‹çš„æ›´å¥½ä¸€äº›ï¼ŒåŸå› æœ‰äºŒï¼Œä¸€æ˜¯è‡ªå·±æ‹çš„å›¾ç‰‡å°ºå¯¸é£æ ¼éƒ½ä¸€è‡´ï¼Œæ›´å¥½å¤„ç†ï¼ŒäºŒæ˜¯ç½‘ç»œä¸Šçš„å›¾ç‰‡äº”èŠ±å…«é—¨ï¼Œå·®å¼‚å¤ªå¤§ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™äº›å›¾ç‰‡çš„ç»„åˆå¯èƒ½å¾ˆéš¾è½»æ˜“è®­ç»ƒå‡ºä¸€ä¸ªå¥½çš„ç»“æœï¼Œæ–°æ‰‹å¾ˆéš¾åœ¨çŸ­æ—¶é—´å†…è·å¾—æˆå°±æ„Ÿã€‚</p><h4 id="å›¾åƒé¢„å¤„ç†"><a href="#å›¾åƒé¢„å¤„ç†" class="headerlink" title="å›¾åƒé¢„å¤„ç†"></a>å›¾åƒé¢„å¤„ç†</h4><p>å›¾ç‰‡æ‰¹é‡æ”¹å</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rename</span>():</span><br><span class="line">    <span class="comment">#path=input(&quot;è¯·è¾“å…¥è·¯å¾„(ä¾‹å¦‚D:\\picture)ï¼š&quot;)</span></span><br><span class="line">    <span class="comment">#name=input(&quot;è¯·è¾“å…¥å¼€å¤´å:&quot;)</span></span><br><span class="line">    <span class="comment">#startNumber=input(&quot;è¯·è¾“å…¥å¼€å§‹æ•°:&quot;)</span></span><br><span class="line">    <span class="comment">#fileType=input(&quot;è¯·è¾“å…¥åç¼€åï¼ˆå¦‚ .jpgã€.txtç­‰ç­‰ï¼‰:&quot;)</span></span><br><span class="line">    path=<span class="string">r&quot;C:\\Users\\Administrator\\Desktop\\pic&quot;</span></span><br><span class="line">    name=<span class="string">&quot;&quot;</span></span><br><span class="line">    startNumber=<span class="string">&quot;10000&quot;</span></span><br><span class="line">    fileType=<span class="string">&quot;.jpg&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ç”Ÿæˆä»¥&quot;</span>+name+startNumber+fileType+<span class="string">&quot;è¿­ä»£çš„æ–‡ä»¶å&quot;</span>)</span><br><span class="line">    count=<span class="number">1</span></span><br><span class="line">    filelist=os.listdir(path)</span><br><span class="line">    <span class="keyword">for</span> files <span class="keyword">in</span> filelist:</span><br><span class="line">        Olddir=os.path.join(path,files)</span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(Olddir):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        Newdir=os.path.join(path,name+<span class="built_in">str</span>(count+<span class="built_in">int</span>(startNumber))+fileType)</span><br><span class="line">        os.rename(Olddir,Newdir)</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸€å…±ä¿®æ”¹äº†&quot;</span>+<span class="built_in">str</span>(count)+<span class="string">&quot;ä¸ªæ–‡ä»¶&quot;</span>)</span><br><span class="line"></span><br><span class="line">rename() </span><br></pre></td></tr></table></figure><p>æ·±åº¦å­¦ä¹ æŒ‰åƒç´ æ¥è¿›è¡Œè®¡ç®—ï¼Œåœ¨ä¸æ˜æ˜¾å¤±çœŸçš„æƒ…å†µä¸‹ï¼Œå»ºè®®å…ˆå‹ç¼©å›¾ç‰‡ï¼Œå¯ä»¥å¤§å¤§æé«˜è®¡ç®—é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯æ‰‹æœºæ‹çš„å›¾ç‰‡ï¼Œæ¯”å¦‚æˆ‘çš„æ‰‹æœºæ‹çš„ç…§ç‰‡å°ºå¯¸4000<em>1800ï¼Œæˆ‘æŠŠå®ƒæŒ‰æ¯”ä¾‹è°ƒæ•´åˆ°äº†800</em>360</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æå–ç›®å½•ä¸‹æ‰€æœ‰å›¾ç‰‡,æ›´æ”¹å°ºå¯¸åä¿å­˜åˆ°å¦ä¸€ç›®å½•</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os.path</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convertjpg</span>(<span class="params">jpgfile,outdir,width=<span class="number">800</span>,height=<span class="number">360</span></span>):</span><br><span class="line">  img=Image.<span class="built_in">open</span>(jpgfile)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">if</span>(img.width&lt;img.height):<span class="comment">#é•¿å®½é¢ å€’çš„æƒ…å†µ(æ‰‹æœºæ¨ªæ’ç«–æ’çš„åŒºåˆ«)</span></span><br><span class="line">        img = img.transpose(Image.ROTATE_90)</span><br><span class="line">    new_img=img.resize((width,height),Image.BILINEAR)  </span><br><span class="line">    new_img.save(os.path.join(outdir,os.path.basename(jpgfile)))</span><br><span class="line">  <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"><span class="keyword">for</span> jpgfile <span class="keyword">in</span> glob.glob(<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\pic\\*.jpg&quot;</span>):</span><br><span class="line">  convertjpg(jpgfile,<span class="string">&quot;C:\\Users\\Administrator\\Desktop\\xml&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="å›¾åƒæ ‡æ³¨"><a href="#å›¾åƒæ ‡æ³¨" class="headerlink" title="å›¾åƒæ ‡æ³¨"></a>å›¾åƒæ ‡æ³¨</h4><p>æ‰€è°“å›¾åƒæ ‡æ³¨å°±æ˜¯æ¡†å‡ºå›¾åƒä¸­çš„æŸä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ ‡è®°è¿™ä¸ªå¯¹è±¡åº”å±äºå“ªä¸€ç±»ã€‚</p><p>æ ‡æ³¨åç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼é€šå¸¸æ˜¯xml(voc)æˆ–è€…txt(yolo),å›¾ç‰‡å’Œæ ‡æ³¨æ–‡ä»¶çš„ä¸€ä¸€å¯¹åº”çš„æ‰¹é‡é›†åˆï¼Œå°±æ˜¯æ•°æ®é›†ã€‚</p><p>æ ‡æ³¨è½¯ä»¶å¯ä»¥ä½¿ç”¨labelimgï¼Œ<a href="https://blog.csdn.net/weixin_41010198/article/details/106378404">è¿™ç¯‡æ–‡ç« </a>å†™å¾—è¿˜ä¸é”™ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ï¼Œæˆ‘çš„æ€»ç»“æ˜¯ï¼š</p><p>å®‰è£…ï¼špip install labelimg -i <a href="http://mirrors.aliyun.com/pypi/simple">http://mirrors.aliyun.com/pypi/simple</a></p><p>æ‰“å¼€ï¼šcmdè¾“å…¥labelimg</p><p>æ ‡æ³¨ï¼ˆæ‰“æ¡†ï¼‰ï¼šè‹±æ–‡è¾“å…¥æ³•ä¸‹æŒ‰w</p><p>ä¿å­˜ï¼šè½¯ä»¶å·¦ä¸Šè§’è®¾ç½®å¥½ä¿å­˜ç›®å½•ï¼Œctrl+s</p><p>ä¸‹ä¸€å¼ å›¾ï¼šè‹±æ–‡è¾“å…¥æ³•ä¸‹æŒ‰d</p><p>åˆ‡æ¢å¯¼å‡ºæ ¼å¼å’Œè®¾ç½®é»˜è®¤æ ‡ç­¾ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-8-1024x545.png"></p><p>æ ‡æ³¨å®ŒåæŠŠå›¾ç‰‡æ•´ç†åˆ°imagesæ–‡ä»¶å¤¹ï¼Œæ ‡æ³¨æ–‡ä»¶æ”¾åˆ°labelsæ–‡ä»¶å¤¹ï¼Œå†è¿›è¡Œåˆ†å‰²ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹</p><pre><code>images      train      val      testlabels      train      val</code></pre><h4 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h4>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>yolov5çš„ç¯å¢ƒé…ç½®</title>
    <link href="/2021/04/12/yolov5%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/04/12/yolov5%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-7.png"></p><h4 id="ä¸‹è½½æºç "><a href="#ä¸‹è½½æºç " class="headerlink" title="ä¸‹è½½æºç "></a>ä¸‹è½½æºç </h4><p>å®˜æ–¹åœ°å€<a href="https://github.com/ultralytics/yolov5">https://github.com/ultralytics/yolov5</a></p><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><p>ä¸‹è½½å®Œæˆåè§£å‹ï¼Œè¿›å…¥requirement.txtæ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œ</p><p>pip install -r requirements.txt</p><p>æˆ–è€…ï¼Œä½ å¯ä»¥ç›´æ¥æŸ¥çœ‹requirement.txtå†…çš„ç‰ˆæœ¬è¦æ±‚ï¼Œå®é™…æµ‹è¯•ä¸­å‘ç°ç•¥ä½äºè¿™äº›ç‰ˆæœ¬ä¹Ÿå¯ä½¿ç”¨ï¼Œä»¥ä¸‹ç‰ˆæœ¬å·²ç»æ˜¯æˆ‘ç•¥é™ä½åçš„æ ‡å‡†</p><p># pip install -r requirements.txt</p><pre><code># base ----------------------------------------matplotlib&gt;=3.2.2numpy&gt;=1.18.5opencv-python&gt;=4.1.2PillowPyYAML&gt;=5.3.1scipy&gt;=1.4.1torch&gt;=1.7.0torchvision&gt;=0.8.1tqdm&gt;=4.41.0# logging -------------------------------------tensorboard&gt;=2.4.1# wandb# plotting ------------------------------------seaborn&gt;=0.11.0pandas# export --------------------------------------# coremltools&gt;=4.1# onnx&gt;=1.8.1# scikit-learn==0.19.2  # for coreml quantization# extras --------------------------------------thop  # FLOPS computationpycocotools&gt;=2.0  # COCO mAP</code></pre><p>å®‰è£…æ­¥éª¤çœ‹èµ·æ¥ç®€å•ï¼Œè£…èµ·æ¥æ˜¯çœŸçš„ä¸å®¹æ˜“ï¼Œç”±äºç½‘ç»œé—®é¢˜ï¼Œæœ€å¥½å…ˆå°†pipæ¢æºï¼Œæˆ‘è‡ªå·±ä½¿ç”¨æ¸…åæºæ—¶ç»å¸¸å‡ºé”™ï¼Œé˜¿é‡Œäº‘é•œåƒæºå¥½åƒæ›´åŠ ç¨³å®šä¸€äº›ï¼Œå¦‚å®‰è£…xxxä¾èµ–åŒ…ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä»é˜¿é‡Œäº‘é•œåƒæºåŠ é€Ÿä¸‹è½½</p><pre><code>pip install xxx -i http://mirrors.aliyun.com/pypi/simple</code></pre><p>åœ¨win10ä¸Šå®‰è£…è¿˜å¥½è¯´ä¸€ç‚¹ï¼Œæˆ‘çš„æœ€ç»ˆåº”ç”¨å¹³å°æ˜¯æ ‘è“æ´¾ï¼Œè£…èµ·æ¥æ›´åŠ è‰°éš¾ï¼Œå°è±¡ä¸­æ¯”è¾ƒéš¾å®‰è£…çš„æ˜¯opencvã€torchã€matplotlibï¼Œå¦‚æœåœ¨çº¿å®‰è£…å¤±è´¥ï¼Œå»ºè®®ç›´æ¥é€‰æ‹©ä¸‹è½½åŒ…åˆ°æœ¬åœ°æ‰‹åŠ¨å®‰è£…ï¼Œå…¶ä¸­æœ€éš¾çš„æ˜¯torch1.7ä»¥ä¸Šç‰ˆæœ¬çš„å®‰è£…ï¼Œæˆ‘å‘ç°åœ¨Debian10ç³»ç»Ÿä¸‹ï¼Œpip install torchåªæ”¯æŒåˆ°torch0.4çš„ç‰ˆæœ¬ï¼Œåœ¨å®˜ç½‘åˆæ‰¾ä¸åˆ°æ ‘è“æ´¾æ”¯æŒçš„ç‰ˆæœ¬ï¼Œä¸‹è½½äº†å¥½å‡ ä¸ªéƒ½è¯´å¹³å°ä¸æ”¯æŒï¼Œæœ€ååœ¨ç½‘ä¸Šæ‰¾åˆ°äº†æ ‘è“æ´¾å¯ç”¨çš„ç‰ˆæœ¬**<a href="https://gitee.com/jin_xin_hao/pytorch-armv7l">pytorch-armv7l</a>**ï¼Œå†™æœ¬æ–‡çš„æ—¶å€™çªç„¶ä¸Šä¸å»GitHubï¼Œæ­¤é“¾æ¥æ˜¯å…‹éš†åœ¨ç äº‘ä¸Šçš„é¡¹ç›®</p><h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><p>è¿™ä¹ˆå¤æ‚çš„ç¯å¢ƒï¼Œè£…å®Œæ€»è¦éªŒè¯ä¸€ä¸‹æ‰æ”¾å¿ƒã€‚è¿è¡Œdetect.pyï¼Œsourceå‚æ•°æ”¹ä¸º0ï¼Œå³è°ƒç”¨æ‘„åƒå¤´</p><pre><code>python detect.py --source=0 --weights=&quot;weights/yolov5s.pt&quot;</code></pre><p>å…¶ä¸­ptæ–‡ä»¶æ˜¯æƒé‡æ–‡ä»¶ï¼Œæºç ä¸­æ²¡æœ‰è‡ªå¸¦ï¼Œéœ€è¦è‡ªè¡Œä¸‹è½½</p><p>åœ¨weightsæ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰ä¸€ä¸ªdownload_weights.shæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼Œå†™æ˜äº†æƒé‡æ–‡ä»¶çš„ä¸‹è½½æ–¹å¼ï¼Œé»˜è®¤æ˜¯ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œä½†å¾€å¾€ä¹Ÿå› ä¸ºç½‘ç»œé—®é¢˜å¾ˆéš¾ä¸€æ¬¡ä¸‹è½½æˆåŠŸ</p><pre><code>#!/bin/bash# Download latest models from https://github.com/ultralytics/yolov5/releases# Usage:#    $ bash weights/download_weights.shpython - &lt;&lt;EOFfrom utils.google_utils import attempt_downloadfor x in [&#39;s&#39;, &#39;m&#39;, &#39;l&#39;, &#39;x&#39;]:    attempt_download(f&#39;yolov5&#123;x&#125;.pt&#39;)EOF</code></pre><p>è¿™é‡Œä¹Ÿæ”¾ä¸Š<a href="https://xinhaojin.lanzous.com/iHb5xnza7mh">è“å¥äº‘é“¾æ¥</a>ï¼Œä¸è¿‡åªæœ‰ä¸€ä¸ªyolov5s.ptï¼Œè¿™æ˜¯å®˜æ–¹ç»™çš„æœ€å°æœ€å¿«çš„æ¨¡å‹ï¼Œä¸‹è½½ä¸‹æ¥æ”¾åœ¨weightsæ–‡ä»¶å¤¹ä¸‹å³å¯ï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œåˆ™ä¼šè°ƒå–æ‘„åƒå¤´è¯†åˆ«ç‰©ä½“ã€‚</p><h4 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h4>]]></content>
    
    
    <categories>
      
      <category>ç›®æ ‡æ£€æµ‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç›®æ ‡æ£€æµ‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python you-getä¸‹è½½ç½‘ç«™çš„é«˜æ¸…è§†é¢‘</title>
    <link href="/2021/04/08/%E4%B8%80%E7%A7%8D%E9%AB%98%E9%80%BC%E6%A0%BC%E7%9A%84%E4%B8%8B%E8%BD%BD%E7%BD%91%E7%AB%99%E7%9A%84%E9%AB%98%E6%B8%85%E8%A7%86%E9%A2%91%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <url>/2021/04/08/%E4%B8%80%E7%A7%8D%E9%AB%98%E9%80%BC%E6%A0%BC%E7%9A%84%E4%B8%8B%E8%BD%BD%E7%BD%91%E7%AB%99%E7%9A%84%E9%AB%98%E6%B8%85%E8%A7%86%E9%A2%91%E7%9A%84%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>ç„¶åå®‰è£…å·¥å…·åŒ…you-get</p><pre><code>pip install you-getÂ  --user</code></pre><p>ï¼ˆæ·»åŠ â€“useræ˜¯é˜²æ­¢æƒé™ä¸å¤Ÿï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-24638666a79a06cf463dc80738373c87.png"></p><p>åˆ°æ­¤ä¸ºæ­¢ç¯å¢ƒå…¨éƒ¨å®‰è£…æˆåŠŸï¼å°±æ˜¯è¿™ä¹ˆç®€å•</p><p>æ¥ä¸‹æ¥ç›´å¥”ä¸»é¢˜ï¼Œæ‰¾åˆ°æˆ‘ä»¬æƒ³è¦ä¸‹è½½çš„è§†é¢‘ï¼Œå¤åˆ¶ç½‘å€</p><p>ä¾‹å¦‚ï¼Œè…¾è®¯è§†é¢‘æœ€æ–°ä¸€æœŸçš„åæ§½å¤§ä¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-a5bd4da209b06aea93d621e4e7cd9100.png"></p><p>ç›´æ¥ä¸‹è½½</p><p>you-getÂ  Â ç½‘å€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-1ea81a81a0694083efca7c3ee3229b16.png"></p><p>ä¸‹è½½æˆåŠŸï¼Œè·¯å¾„æ˜¯å‰é¢è¿™ä¸€æ®µï¼Œè¿™é‡Œæ˜¯æ¡Œé¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-fa7dc37930434cda9de6680a92c2eb35.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-83f37026375ac95c3b306afc14573df0.png"></p><p>æƒ³è¦ä¸‹è½½åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œå»ºè®®æ‰“å¼€é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨æ³•3æ‰“å¼€å‘½ä»¤è¡Œï¼Œç®€å•å¿«æ·</p><p>å†è¯•ä¸€æ¬¡ï¼ŒBç«™è§†é¢‘ï¼Œåå†œç»™å°ç¾Šæ²»ç—…</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-d89514ce7fc1a460cf23faa0fa68e16d.png"></p><p>ä¸‹è½½æˆåŠŸï¼Œè€Œä¸”æ˜¯1080pçš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/05/frc-796be781caceda7dbce461438786e51f.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è§†é¢‘ä¸‹è½½</tag>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å±€åŸŸç½‘IPæŸ¥çœ‹</title>
    <link href="/2021/04/06/%E5%B1%80%E5%9F%9F%E7%BD%91ip%E6%9F%A5%E7%9C%8B/"/>
    <url>/2021/04/06/%E5%B1%80%E5%9F%9F%E7%BD%91ip%E6%9F%A5%E7%9C%8B/</url>
    
    <content type="html"><![CDATA[<p>cmdå‘½ä»¤çª—å£è¾“å…¥ipconfig,æ‰¾åˆ°å½“å‰ä½¿ç”¨çš„ç½‘å¡çš„IPv4åœ°å€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image.png"></p><p>è®°ä½å‰3ä¸ªæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ‰¾çš„å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡çš„IPåŸºæœ¬ä¸Šå°±æ˜¯192.168.54.xxx</p><p>è¾“å…¥for &#x2F;L %i IN (1,1,254) DO ping -w 2 -n 1 192.168.54.%iï¼Œç­‰å¾…è¿è¡Œå®Œæˆ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-2.png"></p><p>è¾“å…¥arp -aï¼ŒæŸ¥çœ‹å±€åŸŸç½‘å†…å…¶å®ƒè®¾å¤‡çš„IPï¼Œå…¶ä¸­192.168.54.xxxçš„ï¼Œä¸”ç‰©ç†åœ°å€ä¸å…¨ä¸ºfçš„ï¼Œå°±æ˜¯è¦æ‰¾çš„è®¾å¤‡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-4.png"></p><p>æ›´å¥½çš„æ–¹æ³•</p><p><a href="https://xinhaojin.github.io/2022/02/25/%E5%88%97%E5%87%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E5%8F%AFping%E9%80%9A%E7%9A%84ip/">åˆ—å‡ºå±€åŸŸç½‘å†…å¯Pingé€šçš„IP</a></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>å±€åŸŸç½‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jupyter notebooké»˜è®¤ç›®å½•ä¿®æ”¹</title>
    <link href="/2021/03/29/jupyter-notebook%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95%E4%BF%AE%E6%94%B9/"/>
    <url>/2021/03/29/jupyter-notebook%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95%E4%BF%AE%E6%94%B9/</url>
    
    <content type="html"><![CDATA[<p>æ‰“å¼€ç¯å¢ƒç»ˆç«¯ï¼Œè¾“å…¥</p><pre><code>jupyter notebook --generate-config</code></pre><p>ç”Ÿæˆé…ç½®æ–‡ä»¶</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/03/image-2.png"></p><p>æ ¹æ®æç¤ºè·¯å¾„æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œæœç´¢dirå¿«é€Ÿå®šä½ï¼Œä¿®æ”¹é»˜è®¤ç›®å½•ï¼Œæ–‡ä»¶å¤¹éœ€è‡ªå·±æ–°å»º</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/03/image-3.png"></p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sshåå‘ä»£ç†å®ç°å†…ç½‘ç©¿é€</title>
    <link href="/2021/03/05/ssh%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2021/03/05/ssh%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h4 id="ç¯å¢ƒè¯´æ˜"><a href="#ç¯å¢ƒè¯´æ˜" class="headerlink" title="ç¯å¢ƒè¯´æ˜"></a>ç¯å¢ƒè¯´æ˜</h4><table><thead><tr><th>æœåŠ¡å™¨</th><th align="center">IP</th><th align="right">ç”¨æˆ·å</th><th align="center">å¤‡æ³¨</th></tr></thead><tbody><tr><td>A</td><td align="center">192.168.3.241</td><td align="right">pi</td><td align="center">æ ‘è“æ´¾4bï¼ŒRaspbian GNU&#x2F;Linux 10ï¼Œå¤„äºå†…ç½‘ï¼Œéœ€è¦è¢«è¿œç¨‹è®¿é—®</td></tr><tr><td>B</td><td align="center">101.133.xxx.xxx</td><td align="right">root</td><td align="center">é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œcentos7ï¼Œæœ‰å…¬ç½‘IP</td></tr></tbody></table><h4 id="é…ç½®æ–¹æ³•"><a href="#é…ç½®æ–¹æ³•" class="headerlink" title="é…ç½®æ–¹æ³•"></a>é…ç½®æ–¹æ³•</h4><p>åœ¨Bä¸Šæ‰§è¡Œ</p><pre><code>vi /etc/ssh/sshd_config</code></pre><p>æ‰¾åˆ°Gatewayports,å–æ¶ˆæ³¨é‡Šï¼Œæ”¹ä¸ºyes</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/02/image.png"></p><p>ä¿å­˜ï¼Œé‡å¯æœåŠ¡å™¨</p><p>å»ºç«‹Aåˆ°Bçš„åå‘ä»£ç†,è¿™é‡ŒæŠŠAçš„22ç«¯å£æ˜ å°„åˆ°äº†Bçš„2222ç«¯å£ï¼Œè®°å¾—æ”¾è¡ŒBçš„ç«¯å£</p><p>åœ¨Aä¸Šæ‰§è¡Œ</p><pre><code>sudo ssh -fCNR 2222:localhost:22 root@101.133.xxx.xxx</code></pre><p>ç„¶åè¾“å…¥Bçš„rootç”¨æˆ·å¯†ç å³å¯</p><p>æ£€éªŒä¸€ä¸‹æ˜¯å¦æˆåŠŸ</p><p>åœ¨Bä¸ŠæŸ¥çœ‹</p><pre><code>netstat -anp  grep 2222</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/02/image-1-1024x68.png"></p><p>æœ‰ç»“æœè¯´æ˜å·²ç»æˆåŠŸ</p><p>æ­¤æ—¶å¯ä»¥åœ¨ä»»æ„ä¸€å°èƒ½è®¿é—®å…¬ç½‘çš„ç”µè„‘ä¸Šè¿œç¨‹è®¿é—®A</p><pre><code>ssh -p 2222 pi@101.133.xxx.xxx</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/02/image-2.png"></p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤å¤„<strong>ç”¨åˆ°çš„æ˜¯Açš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒBçš„IPå’Œç«¯å£å·</strong></p><p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ä¸ç¨³å®šï¼Œsshè¿æ¥å®¹æ˜“æ–­å¼€</p><h4 id="æ”¹è¿›çš„æ–¹æ³•"><a href="#æ”¹è¿›çš„æ–¹æ³•" class="headerlink" title="æ”¹è¿›çš„æ–¹æ³•"></a>æ”¹è¿›çš„æ–¹æ³•</h4><p>æ”¹è¿›çš„æ–¹å‘æ˜¯ï¼š<strong>å¼€æœºè‡ªå¯ï¼Œå…å¯†ç™»å½•ï¼Œæ–­çº¿é‡è¿</strong>ã€‚éœ€è¦ç”¨åˆ°autossh</p><p>å®‰è£…autossh,åœ¨Aä¸Šæ‰§è¡Œ</p><pre><code>sudo apt-get install autossh</code></pre><p>å®‰è£…æˆåŠŸåï¼ŒæŠŠä¸Šé¢çš„sshå‘½ä»¤æ”¹æˆautosshæ ¼å¼çš„,ç”¨åˆ°äº†å¦ä¸€ä¸ªç«¯å£2223ï¼Œç”¨äºç›‘å¬sshè¿æ¥æƒ…å†µï¼Œè®°å¾—æ”¾è¡Œ</p><pre><code>autossh -M 2223 -NR 2222:localhost:22 root@101.133.xxx.xxx</code></pre><p>è¾“å…¥å¯†ç å³å¯åŒæ ·å¯åœ¨Bä¸Šç”¨netstat -anp grep 2222å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æˆåŠŸ</p><pre><code>netstat -anp  grep 2222</code></pre><p>ç»§ç»­æ”¹è¿›ï¼Œå®ç°å…å¯†ç™»å½•,åœ¨Aä¸Šåˆ†åˆ«æ‰§è¡Œ</p><pre><code>ssh-keygenssh-copy-id root@101.133.xxx.xxx</code></pre><p>è¦è¾“å…¥ä¸€æ¬¡å¯†ç ï¼ŒæˆåŠŸåå¯ç›´æ¥å…å¯†ç™»å½•B,å¦‚ä¸‹å›¾</p><pre><code>ssh root@101.133.xxx.xxx</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/02/image-3.png"></p><p>æ¥ä¸‹æ¥ä½¿ç”¨autosshå°±å¯ä»¥å…å¯†ç äº†ï¼ŒæŠŠautosshå‘½ä»¤è®¾ç½®æˆå¼€å¯å¯åŠ¨</p><pre><code>sudo vim /etc/rc.local</code></pre><p>åœ¨exit0å‰é¢å¢åŠ ä¸€è¡Œ</p><pre><code>sudo su pi -c &quot;autossh -M 2223 -fNR 2222:localhost:22 root@101.133.xxx.xxx&quot;</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/02/image-4.png"></p><p>è¿™é‡Œè¦æ³¨æ„æ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼Œå¦‚æœç›´æ¥æŠŠä¸Šé¢çš„autosshå†™åœ¨è¿™é‡Œæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºå†™åœ¨rc.localé‡Œçš„å‘½ä»¤æ˜¯rootç”¨æˆ·æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬ä¸Šé¢å…å¯†ç™»å½•çš„æ‰§è¡Œç”¨æˆ·æ˜¯æ˜¯æ™®é€šç”¨æˆ·piï¼Œæ‰€ä»¥è¦ç”¨sudo su [ç”¨æˆ·å] -c â€œ[å‘½ä»¤]â€</p><p>autosshçš„å‚æ•°ä¸­æ·»åŠ äº†fï¼Œæ„æ€æ˜¯åå°æ‰§è¡Œ</p><p>è¿™æ ·é…ç½®ä¹‹åï¼Œåªè¦Aå¼€æœºè”ç½‘ï¼ŒBæ­£å¸¸è¿è¡Œï¼Œå°±å¯ä»¥åœ¨ä»»ä½•èƒ½è®¿é—®åˆ°Bçš„ä¸»æœºä¸Šç”¨sshè¿œç¨‹ç™»å½•Açš„piç”¨æˆ·</p><p><strong>ç”¨åˆ°çš„æ˜¯Açš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒBçš„IPå’Œç«¯å£å·</strong></p><h4 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h4><p>è¿™ä¸ªåŠŸèƒ½å½“ç„¶ä¸ä»…é™äºè¿œç¨‹sshç™»å½•ï¼Œæ ¹æœ¬ä¸Šæ˜¯NATç«¯å£æ˜ å°„ï¼Œå¦‚å†…ç½‘ä¸ŠAä¸»æœºçš„8080ç«¯å£ä¸Šçš„æ•°æ®æµæ˜¯æˆ‘çš„ç›®æ ‡ï¼Œä½†æ˜¯å…¬ç½‘æ— æ³•è®¿é—®ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘å°±å¯ä»¥æŠŠ8080ç«¯å£æ˜ å°„åˆ°å…¬ç½‘æœåŠ¡å™¨Bçš„æŒ‡å®šç«¯å£å¦‚9090ä¸Šï¼Œç›¸å½“äºä¸€æ¬¡è½¬å‘ï¼Œè¿™æ—¶è®¿é—®B_IP:9090ç­‰ä»·äºè®¿é—®A_IP:8080ï¼Œç¼ºç‚¹æ˜¯ç›¸åº”çš„å»¶æ—¶ä¹Ÿä¼šå¢å¤§ï¼Œå¦‚æœè½¬å‘æ•°æ®è¾ƒå¤§ï¼Œå¯¹å…¬ç½‘æœåŠ¡å™¨çš„å¸¦å®½ä¹Ÿæ˜¯ä¸€ç§æ¶ˆè€—</p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ssh</tag>
      
      <tag>ä»£ç†</tag>
      
      <tag>å†…ç½‘ç©¿é€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾/centoså¼€æœºè‡ªå¯pythonè„šæœ¬</title>
    <link href="/2021/02/15/linux%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AFpython%E8%84%9A%E6%9C%AC/"/>
    <url>/2021/02/15/linux%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AFpython%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<pre><code>sudo vim /etc/rc.local</code></pre><p>åœ¨exit 0å‰é¢åŠ å…¥ä¸€è¡Œï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œmain.pyæ˜¯pythonæ–‡ä»¶åï¼Œmain.logæ˜¯è¿è¡Œåå°†è¦ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-51.png"></p><p>åœ¨centos7ä¸­ï¼Œ&#x2F;etc&#x2F;rc.d&#x2F;rc.localçš„æƒé™è¢«é™ä½äº†ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤èµ‹äºˆå…¶å¯æ‰§è¡Œæƒé™</p><pre><code>chmod +x /etc/rc.d/rc.local</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python3 socketè‡ªåŠ¨é‡è¿ã€å¿ƒè·³åŒ…</title>
    <link href="/2021/02/14/python3-socket%E8%87%AA%E5%8A%A8%E9%87%8D%E8%BF%9E%E3%80%81%E5%88%A4%E6%96%AD%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%96%AD%E5%BC%80/"/>
    <url>/2021/02/14/python3-socket%E8%87%AA%E5%8A%A8%E9%87%8D%E8%BF%9E%E3%80%81%E5%88%A4%E6%96%AD%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%96%AD%E5%BC%80/</url>
    
    <content type="html"><![CDATA[<h4 id="å®¢æˆ·ç«¯å¼‚å¸¸å¤„ç†"><a href="#å®¢æˆ·ç«¯å¼‚å¸¸å¤„ç†" class="headerlink" title="å®¢æˆ·ç«¯å¼‚å¸¸å¤„ç†"></a>å®¢æˆ·ç«¯å¼‚å¸¸å¤„ç†</h4><p>æœåŠ¡ç«¯ä¸€èˆ¬éƒ½ä¸ä¼šæœ‰ç½‘ç»œé—®é¢˜ï¼Œè€Œå®¢æˆ·ç«¯æœ‰å¯èƒ½å› ä¸ºç½‘ç»œä¸ç¨³å®šç­‰åŸå› ä¼šå¯¼è‡´è¿æ¥æ–­å¼€ï¼Œå› æ­¤æœ‰æ—¶éœ€è¦è®¾ç½®å®¢æˆ·ç«¯è‡ªåŠ¨é‡è¿</p><p>å®¢æˆ·ç«¯æ— æ³•ç›´æ¥åˆ¤æ–­è¿æ¥æ˜¯å¦æ–­å¼€ï¼Œå¦‚æœè¿æ¥æ–­å¼€ï¼Œåˆ™ç»§ç»­æ“ä½œä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œåœ¨å¼‚å¸¸å¤„ç†ä¸­è¿›è¡Œé‡è¿å³å¯</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&#x27;127.0.0.1&#x27;</span> <span class="comment">#æœåŠ¡ç«¯ip</span></span><br><span class="line">PORT = <span class="number">9999</span> <span class="comment">#æœåŠ¡ç«¯ç«¯å£å·</span></span><br><span class="line">BUFSIZ = <span class="number">1024</span></span><br><span class="line">ADDR = (HOST, PORT)</span><br><span class="line">tcpCliSock=<span class="literal">None</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect</span>():</span><br><span class="line">    <span class="keyword">global</span> tcpCliSock</span><br><span class="line">    tcpCliSock = socket(AF_INET, SOCK_STREAM) <span class="comment">#åˆ›å»ºsocketå¯¹è±¡</span></span><br><span class="line">    tcpCliSock.connect(ADDR) <span class="comment">#è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        connect()</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            data = tcpCliSock.recv(BUFSIZ) <span class="comment">#è¯»å–æ¶ˆæ¯</span></span><br><span class="line">            <span class="comment">#dataå¤„ç†</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        tcpCliSock.close()</span><br><span class="line">        <span class="keyword">continue</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¤„ç†ä¹‹åï¼Œä¸€æ—¦ç½‘ç»œæ¢å¤æ­£å¸¸ï¼Œå°±ä¼šè‡ªåŠ¨é‡è¿</p><h4 id="åœ¨æœåŠ¡ç«¯ä¸­åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€è¿æ¥"><a href="#åœ¨æœåŠ¡ç«¯ä¸­åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€è¿æ¥" class="headerlink" title="åœ¨æœåŠ¡ç«¯ä¸­åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€è¿æ¥"></a>åœ¨æœåŠ¡ç«¯ä¸­åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æ–­å¼€è¿æ¥</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">......</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    conn, addr = tcpS.accept() </span><br><span class="line">    conn.settimeout(<span class="number">10</span>)<span class="comment">#10sæ²¡æœ‰æ”¶åˆ°æ•°æ®ï¼Œè¿›å…¥timeoutå¼‚å¸¸å¤„ç†</span></span><br><span class="line">    data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(data)==<span class="number">0</span>:</span><br><span class="line">        <span class="comment">#å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥æ—¶ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">except</span> timeout:</span><br><span class="line">    conn.close()</span><br><span class="line">    <span class="comment">#å…¶ä»–å¤„ç†</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¶‰åŠäº†ä¸¤ç§æƒ…å†µï¼š</p><h5 id="1-å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ï¼ŒæœåŠ¡ç«¯è¯»å–æ•°æ®æ—¶ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²"><a href="#1-å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ï¼ŒæœåŠ¡ç«¯è¯»å–æ•°æ®æ—¶ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²" class="headerlink" title="1.å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ï¼ŒæœåŠ¡ç«¯è¯»å–æ•°æ®æ—¶ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²"></a>1.å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­è¿æ¥ï¼ŒæœåŠ¡ç«¯è¯»å–æ•°æ®æ—¶ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²</h5><h5 id="2-å®¢æˆ·ç«¯ç½‘ç»œå¼‚å¸¸å¯¼è‡´è¿æ¥æ–­å¼€ï¼Œè¿™æ—¶æœåŠ¡ç«¯recvä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ååœ¨å¼‚å¸¸å¤„ç†ä¸­æ–­å¼€è¿æ¥ï¼Œè¿›è¡Œé‡è¿"><a href="#2-å®¢æˆ·ç«¯ç½‘ç»œå¼‚å¸¸å¯¼è‡´è¿æ¥æ–­å¼€ï¼Œè¿™æ—¶æœåŠ¡ç«¯recvä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ååœ¨å¼‚å¸¸å¤„ç†ä¸­æ–­å¼€è¿æ¥ï¼Œè¿›è¡Œé‡è¿" class="headerlink" title="2.å®¢æˆ·ç«¯ç½‘ç»œå¼‚å¸¸å¯¼è‡´è¿æ¥æ–­å¼€ï¼Œè¿™æ—¶æœåŠ¡ç«¯recvä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ååœ¨å¼‚å¸¸å¤„ç†ä¸­æ–­å¼€è¿æ¥ï¼Œè¿›è¡Œé‡è¿"></a>2.å®¢æˆ·ç«¯ç½‘ç»œå¼‚å¸¸å¯¼è‡´è¿æ¥æ–­å¼€ï¼Œè¿™æ—¶æœåŠ¡ç«¯recvä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ååœ¨å¼‚å¸¸å¤„ç†ä¸­æ–­å¼€è¿æ¥ï¼Œè¿›è¡Œé‡è¿</h5><h4 id="å¿ƒè·³åŒ…"><a href="#å¿ƒè·³åŒ…" class="headerlink" title="å¿ƒè·³åŒ…"></a>å¿ƒè·³åŒ…</h4><p>ä¸Šé¢è¿™ç§å¤„ç†çš„ç¼ºç‚¹æ˜¯å°±ç®—è¿æ¥ä¸€åˆ‡æ­£å¸¸ä¹Ÿä¼šåœ¨æ— æ“ä½œä¸€æ®µæ—¶é—´åè¿›è¡Œé‡è¿ï¼Œè¿™æ ·å°±å¤šäº†å¾ˆå¤šä¸å¿…è¦çš„é‡è¿ï¼Œä¸€ç§æ›´å¥½çš„ç›¸å¯¹å¤æ‚çš„ç­–ç•¥æ˜¯å¿ƒè·³åŒ…æœºåˆ¶ï¼Œçº¦å®šæ¯éš”ä¸€æ®µæ—¶é—´å‘é€æŒ‡å®šæ•°æ®è¡¨æ˜è¿æ¥æ­£å¸¸ï¼Œå¦‚æœè¶…è¿‡çº¦å®šæ—¶é—´æœªæ”¶åˆ°è¯¥å¿ƒè·³åŒ…ï¼Œåˆ™è®¤ä¸ºè¿æ¥æ–­å¼€ï¼Œæ­¤æ—¶é‡è¿ã€‚æ˜¾ç„¶è¿™éœ€è¦ç”¨åˆ°å®šæ—¶å™¨ï¼Œä¸ºäº†ä¸å½±å“ä¸»çº¿ç¨‹è¿è¡Œï¼Œåº”è¯¥åœ¨å­çº¿ç¨‹ä¸­å®ç°å¿ƒè·³åŒ…æ¯”è¾ƒåˆé€‚ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myThread</span> (threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadID, name, counter</span>):</span><br><span class="line">        threading.Thread.__init__(<span class="variable language_">self</span>)</span><br><span class="line">        <span class="variable language_">self</span>.threadID = threadID</span><br><span class="line">        <span class="variable language_">self</span>.name = name</span><br><span class="line">        <span class="variable language_">self</span>.counter = counter</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;å¿ƒè·³å¯åŠ¨&quot;</span>)</span><br><span class="line">        heartBeat()</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;å¿ƒè·³åœæ­¢&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">heartBeat</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> exitFlag:</span><br><span class="line">        time.sleep(<span class="number">20</span>)<span class="comment">#20så‘ä¸€æ¬¡å¿ƒè·³åŒ…</span></span><br><span class="line">        <span class="comment">#å‘é€æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">thread1 = myThread(<span class="number">1</span>, <span class="string">&quot;heartbeat&quot;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯æ–°çº¿ç¨‹</span></span><br><span class="line">thread1.start()</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸæ¥å†™çš„ä»£ç åœ¨æ­¤å¤„ä¸å—å¹²æ‰°</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å¿ƒè·³åŒ…ä¹‹åï¼Œé…åˆè¶…æ—¶æ£€æµ‹å°±å¯ä»¥å®ç°ä»…åœ¨å¿…è¦æƒ…å†µä¸‹é‡è¿ï¼Œæœ€å¤§ç¨‹åº¦ç»´æŠ¤äº†é•¿è¿æ¥ã€‚</p><p>æ³¨æ„å¿ƒè·³åŒ…é—´éš”ç•¥å°äºè¶…æ—¶æ—¶é—´å³å¯ï¼Œå¦‚å¿ƒè·³åŒ…é—´éš”20sï¼Œtimeoutè®¾ç½®ä¸º30s</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>socket</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾å®‰è£…ä¸­æ–‡è¾“å…¥æ³•</title>
    <link href="/2021/02/05/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/"/>
    <url>/2021/02/05/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<pre><code>sudo apt-get install fcitx fcitx-googlepinyin fcitx-module-cloudpinyin fcitx-sunpinyin</code></pre><p>é‡å¯å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-41.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bæ¥è¶…å£°æ³¢æ¨¡å—HC-SR05</title>
    <link href="/2021/02/04/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8E%A5%E8%B6%85%E5%A3%B0%E6%B3%A2%E6%A8%A1%E5%9D%97hc-sr05/"/>
    <url>/2021/02/04/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8E%A5%E8%B6%85%E5%A3%B0%E6%B3%A2%E6%A8%A1%E5%9D%97hc-sr05/</url>
    
    <content type="html"><![CDATA[<h4 id="æ¥çº¿"><a href="#æ¥çº¿" class="headerlink" title="æ¥çº¿"></a>æ¥çº¿</h4><p>è¶…å£°æ³¢æ¨¡å—HC-SR05ç›¸æ¯”äºHC-SR04ï¼Œå¤šäº†ä¸€ä¸ªOUTå¼•è„šï¼Œä¸å¤ªæ‡‚ï¼Œæ²¡ç”¨åˆ°</p><p>æ‰€ä»¥ï¼Œè·ŸHC-SR04ä¸€æ ·çœ‹å¾…å³å¯</p><p>VCCï¼šæ¥5V</p><p>GNDï¼šæ¥åœ°</p><p>Trigå’ŒEchoæ¥ä»»æ„ä¸¤ä¸ªGPIOå£</p><h4 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding:UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¶…å£°æ³¢å¼•è„šå®šä¹‰</span></span><br><span class="line">EchoPin = <span class="number">16</span>   <span class="comment">#GPIO16</span></span><br><span class="line">TrigPin = <span class="number">12</span>   <span class="comment">#GPIO12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®GPIOå£ä¸ºBCMç¼–ç æ–¹å¼</span></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¿½ç•¥è­¦å‘Šä¿¡æ¯</span></span><br><span class="line">GPIO.setwarnings(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¶…å£°æ³¢å¼•è„šåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">init</span>():</span><br><span class="line">    GPIO.setup(EchoPin,GPIO.IN)</span><br><span class="line">    GPIO.setup(TrigPin,GPIO.OUT)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¶…å£°æ³¢å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getDistance</span>():</span><br><span class="line">    GPIO.output(TrigPin,GPIO.HIGH)</span><br><span class="line">    time.sleep(<span class="number">0.000015</span>)</span><br><span class="line">    GPIO.output(TrigPin,GPIO.LOW)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> GPIO.<span class="built_in">input</span>(EchoPin):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    t1 = time.time()</span><br><span class="line">    <span class="keyword">while</span> GPIO.<span class="built_in">input</span>(EchoPin):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    t2 = time.time()</span><br><span class="line">    time.sleep(<span class="number">0.01</span>)</span><br><span class="line">    <span class="keyword">return</span> ((t2 - t1)* <span class="number">340</span> / <span class="number">2</span>) * <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    init()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;distance is %d cm&quot;</span> % getDistance())</span><br><span class="line">        time.sleep(<span class="number">0.3</span>)</span><br><span class="line"><span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">GPIO.cleanup()</span><br></pre></td></tr></table></figure><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-40.png"></p><p>å‘ç°è¿™ä¸ªä¼ æ„Ÿå™¨ä¸æ˜¯å¾ˆçµæ•ï¼Œè§’åº¦ä¸èƒ½åï¼Œé®æŒ¡ç‰©é¢éœ€è¦å¤Ÿå¤§ä¸”å°½å¯èƒ½å…‰æ»‘ï¼Œä¸å¤ªæ»¡æ„</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
      <tag>è¶…å£°æ³¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python3è¿è¡Œshellå‘½ä»¤</title>
    <link href="/2021/02/03/python3%E7%94%A8subprocess%E8%BF%90%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/02/03/python3%E7%94%A8subprocess%E8%BF%90%E8%A1%8Cshell%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">subprocess.run(<span class="string">&quot;xxx&quot;</span>,shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">&quot;xxx&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>androidæŠŠå›¾ç‰‡urlè½¬ä¸ºdrawable</title>
    <link href="/2021/01/18/android%E6%8A%8A%E5%9B%BE%E7%89%87url%E8%BD%AC%E4%B8%BAdrawable/"/>
    <url>/2021/01/18/android%E6%8A%8A%E5%9B%BE%E7%89%87url%E8%BD%AC%E4%B8%BAdrawable/</url>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> (InputStream) <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://xxx.jpg&quot;</span>).openStream();</span><br><span class="line"><span class="keyword">final</span> <span class="type">Drawable</span> <span class="variable">d</span> <span class="operator">=</span> Drawable.createFromStream(in, <span class="string">&quot;src&quot;</span>);</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç¤ºä¾‹ç»™linearlayoutè®¾ç½®ç½‘ç»œå›¾ç‰‡ä¸ºèƒŒæ™¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">linear=(LinearLayout)findViewById(R.id.linear);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> (InputStream) <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://xxx.jpg&quot;</span>).openStream();</span><br><span class="line">                    <span class="keyword">final</span> <span class="type">Drawable</span> <span class="variable">d</span> <span class="operator">=</span> Drawable.createFromStream(in, <span class="string">&quot;src&quot;</span>);</span><br><span class="line">                    in.close();</span><br><span class="line">                    runOnUiThread(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                        <span class="meta">@Override</span></span><br><span class="line">                        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                            linear.setBackground(d);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œhttpè¯·æ±‚éœ€è¦åœ¨å­çº¿ç¨‹ä¸­å®Œæˆï¼ŒUIæ›´æ–°éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­å®Œæˆ</p><p>android9.0ä»¥ä¸Šç‰ˆæœ¬ä¸­å…è®¸httpè¯·æ±‚éœ€è¦åœ¨AndroidManifest.xmlä¸­çš„applicationæ ‡ç­¾ä¸­æ·»åŠ </p><p>android:usesCleartextTraffic&#x3D;â€trueâ€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-38.png"></p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>androidå»æ‰ActionBar</title>
    <link href="/2021/01/17/android%E5%8E%BB%E6%8E%89actionbar/"/>
    <url>/2021/01/17/android%E5%8E%BB%E6%8E%89actionbar/</url>
    
    <content type="html"><![CDATA[<p>åªéœ€è¦æŠŠstyle.xmlä¸­çš„é»˜è®¤ä¸»é¢˜ä¿®æ”¹ä¸€ä¸‹å³å¯</p><p>(style.xmlåœ¨app-res-valuesç›®å½•ä¸‹)</p><pre><code>`&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;`</code></pre><p>ä¿®æ”¹æˆ</p><pre><code>`&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;`</code></pre><p>å®Œæˆ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-37.png"></p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bç¼–è¯‘å®‰è£…opencv</title>
    <link href="/2021/01/12/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85opencv/"/>
    <url>/2021/01/12/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85opencv/</url>
    
    <content type="html"><![CDATA[<p>pipå®‰è£…å¤±è´¥ï¼Œæ— å¥ˆé€‰æ‹©æ‰‹åŠ¨ç¼–è¯‘å®‰è£…</p><h4 id="ä¸‹è½½opencv-3-4-13"><a href="#ä¸‹è½½opencv-3-4-13" class="headerlink" title="ä¸‹è½½opencv-3.4.13"></a>ä¸‹è½½opencv-3.4.13</h4><p>å®˜ç½‘<a href="https://opencv.org/releases/">https://opencv.org/releases/</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-35.png"></p><p>å®˜ç½‘æºç æ˜¯githubé“¾æ¥ï¼Œä¸‹è½½å·¨æ…¢ï¼ŒgithubæŒ‚ä»£ç†ä¹Ÿä¸ç®¡ç”¨ï¼Œç»“æœè¯•äº†ä¸€ä¸‹ç”¨æ‰‹æœºæµè§ˆå™¨ä¸‹è½½ï¼Œä¸åˆ°10så°±ä¸‹è½½å®Œäº†ï¼Œç°åœ¨è¿˜æœ‰ç‚¹æ‡µâ€¦â€¦æ€»ä¹‹èƒ½ä¸‹è½½ä¸‹æ¥å°±è¡Œ</p><p>è¿™é‡Œæ”¾ä¸€ä¸ªè“å¥äº‘é“¾æ¥æä¾›ä¸‹è½½<a href="https://xinhaojin.lanzous.com/iEQV5kamg6j">https://xinhaojin.lanzous.com/iEQV5kamg6j</a></p><p>è§£å‹ï¼Œæ”¾åˆ°è¦å®‰è£…çš„ç›®å½•ä¸‹ï¼Œè¿›å…¥opencv-3.4.13æ–‡ä»¶å¤¹</p><h4 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h4><p>åˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre><code>cd  opencv-3.4.13mkdir releasecd releasecmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..makesudo make install</code></pre><p>å…¶ä¸­makeè¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œæˆ‘å¤§æ¦‚èŠ±äº†ä¸€ä¸ªå¤šå°æ—¶</p><p>ç»“æœæ˜¯[100%] Built target opencv versonå¿˜è®°æˆªå›¾äº†</p><pre><code>sudo make install</code></pre><p>ä¹‹åæ˜¯è¿™æ ·çš„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-36.png"></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bæ¥USBæ‘„åƒå¤´å‘é€è§†é¢‘æµ</title>
    <link href="/2021/01/11/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8E%A5usb%E6%91%84%E5%83%8F%E5%A4%B4/"/>
    <url>/2021/01/11/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8E%A5usb%E6%91%84%E5%83%8F%E5%A4%B4/</url>
    
    <content type="html"><![CDATA[<h4 id="æ·»åŠ æ‘„åƒå¤´è®¾å¤‡"><a href="#æ·»åŠ æ‘„åƒå¤´è®¾å¤‡" class="headerlink" title="æ·»åŠ æ‘„åƒå¤´è®¾å¤‡"></a>æ·»åŠ æ‘„åƒå¤´è®¾å¤‡</h4><p>æ’æ‹”æ‘„åƒå¤´åˆ†åˆ«æ‰§è¡Œä¸€æ¬¡ä»¥ä¸‹å‘½ä»¤</p><pre><code>pi@raspberrypi:~ $ lsusb</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-31.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-32.png"></p><p>æˆ–è€…</p><pre><code>pi@raspberrypi:~ $ ls /dev</code></pre><p>æ’ä¸ŠUSBæ‘„åƒå¤´æœ‰video0å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-30.png"></p><p>ä¸æ’çš„æƒ…å†µ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-33.png"></p><h4 id="å®‰è£…MJPG-Streamer"><a href="#å®‰è£…MJPG-Streamer" class="headerlink" title="å®‰è£…MJPG-Streamer"></a>å®‰è£…MJPG-Streamer</h4><p>ä¾æ¬¡é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…</p><pre><code>pi@raspberrypi:~ $ sudo apt-get install cmake libjpeg8-devpi@raspberrypi:~ $ git clone https://e.coding.net/fivecc/mjpg-streamer/mjpg-streamer.gitpi@raspberrypi:~ $ cd mjpg-*pi@raspberrypi:~/mjpg-streamer-master $ cd mjpg-*pi@raspberrypi:~/mjpg-streamer-master/mjpg-streamer-experimental $ makepi@raspberrypi:~/mjpg-streamer-master/mjpg-streamer-experimental $ sudo make installpi@raspberrypi:~/mjpg-streamer-master/mjpg-streamer-experimental $ cdpi@raspberrypi:~ $</code></pre><h4 id="å¯åŠ¨-MJPG-Streamer"><a href="#å¯åŠ¨-MJPG-Streamer" class="headerlink" title="å¯åŠ¨Â MJPG-Streamer"></a>å¯åŠ¨Â MJPG-Streamer</h4><pre><code>pi@raspberrypi: ~ $ /usr/local/bin/mjpg_streamer -i &quot;/usr/local/lib/mjpg-streamer/input_uvc.so -n -f 30 -r 1280x720&quot; -o &quot;/usr/local/lib/mjpg-streamer/output_http.so -p 8080 -w /usr/local/share/mjpg-streamer/www&quot;</code></pre><p>æ­£å¸¸çš„ç»“æœ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-34.png"></p><h4 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h4><p>  Â -i â€œ&#x2F;usr&#x2F;local&#x2F;lib&#x2F;mjpg-streamer&#x2F;input_uvc.so -n -f 30 -r 1280x720â€</p><p>  -i è¾“å…¥</p><p>  Â Â Â Â Â Â Â input_uvc.soï¼šUVCè¾“å…¥ç»„ä»¶</p><p>  Â Â Â Â Â -fÂ  30 Â Â Â Â Â Â Â Â Â Â Â Â ï¼šè¡¨ç¤º30å¸§</p><p>  Â Â Â Â Â -r 1280*720 Â Â Â Â ï¼šåˆ†è¾¨ç‡</p><p>  Â Â Â Â Â -y Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ï¼šYUVæ ¼å¼è¾“å…¥ï¼ˆæœ‰å¡é¡¿ï¼‰ï¼Œä¸åŠ è¡¨ç¤ºMJPGè¾“å…¥ï¼ˆéœ€è¦æ‘„åƒå¤´æ”¯æŒï¼‰</p><p>  Â Â -o â€œ&#x2F;usr&#x2F;local&#x2F;lib&#x2F;mjpg-streamer&#x2F;output_http.so -p 8080 -w &#x2F;usr&#x2F;local&#x2F;share&#x2F;mjpg-streamer&#x2F;wwwâ€</p><p>  Â  Â  Â  Â  -o è¾“å‡º</p><p>  Â Â Â Â Â Â Â Â Â Â output_http.soÂ Â Â Â Â Â Â Â Â Â ï¼šç½‘é¡µè¾“å‡ºç»„ä»¶</p><p>  Â Â Â Â Â Â Â Â Â Â -w wwwÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â :Â ç½‘é¡µè¾“å‡º</p><p>  Â Â Â Â Â Â Â Â Â -p 8080Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ï¼šç«¯å£Â  Â 8080</p><p>  Â  Â  Â  Â  Â Â Â -d 1000Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ï¼š æ—¶é—´1S</p><h4 id="æµè§ˆå™¨å®æ—¶è§†é¢‘æ¥æ”¶"><a href="#æµè§ˆå™¨å®æ—¶è§†é¢‘æ¥æ”¶" class="headerlink" title="æµè§ˆå™¨å®æ—¶è§†é¢‘æ¥æ”¶"></a>æµè§ˆå™¨å®æ—¶è§†é¢‘æ¥æ”¶</h4><p>åˆ›å»ºä¸€ä¸ªhtmlæ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>å®æ—¶è§†é¢‘<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">     <span class="selector-id">#webcam</span>&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">height</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">margin</span>: <span class="number">10%</span> auto;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css">     <span class="selector-id">#webcam</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">         <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">         <span class="attribute">height</span>: auto;</span></span><br><span class="line"><span class="language-css">         <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">         <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;webcam&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> imageNr = <span class="number">0</span>; <span class="comment">// å›¾ç‰‡çš„ç´¢å¼•å·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> finished = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// ä¸‹è½½å›¾ç‰‡çš„é˜Ÿåˆ—</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> paused = <span class="literal">false</span>; <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">createImageLayer</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;absolute&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">style</span>.<span class="property">zIndex</span> = -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">onload</span> = imageOnload;</span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">onclick</span> = imageOnclick;</span></span><br><span class="line"><span class="language-javascript">         <span class="comment">//å¡«ä½ å¯¹åº”çš„ipå’Œç«¯å£</span></span></span><br><span class="line"><span class="language-javascript">      img.<span class="property">src</span> = <span class="string">&quot;http://192.16.34.182:8080/?action=snapshot&amp;n=&quot;</span> + (++imageNr);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> webcam = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;webcam&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      webcam.<span class="title function_">insertBefore</span>(img, webcam.<span class="property">firstChild</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">imageOnload</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">zIndex</span> = imageNr; </span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">while</span> (<span class="number">1</span> &lt; finished.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> del = finished.<span class="title function_">shift</span>(); <span class="comment">// åˆ é™¤æ—§ç…§ç‰‡</span></span></span><br><span class="line"><span class="language-javascript">        del.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(del);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      finished.<span class="title function_">push</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!paused) <span class="title function_">createImageLayer</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">imageOnclick</span>(<span class="params"></span>) &#123; </span></span><br><span class="line"><span class="language-javascript">      paused = !paused;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!paused) <span class="title function_">createImageLayer</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125; </span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">createImageLayer</span>() </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŠŠIPéƒ¨åˆ†æ”¹æˆæ ‘è“æ´¾çš„IPï¼Œæ‰“å¼€ç½‘é¡µå³å¯</p><p>å…¶å®åªéœ€è¦å…³æ³¨â€œ<a href="http://192.16.34.182:8080/?action=snapshot&n=%E2%80%9D%EF%BC%8C%E8%BF%99%E5%90%8E%E9%9D%A2%E6%98%AF%E8%A7%86%E9%A2%91%E5%B8%A7%E7%9A%84%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E7%BB%99%E4%B8%80%E4%B8%AA%E8%B6%B3%E5%A4%9F%E5%A4%A7%E7%9A%84%E6%95%B0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E8%A7%86%E9%A2%91%E5%B8%A7">http://192.16.34.182:8080/?action=snapshot&amp;n=â€ï¼Œè¿™åé¢æ˜¯è§†é¢‘å¸§çš„ç´¢å¼•ï¼Œåªéœ€è¦ç»™ä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ•°å°±å¯ä»¥è·å–æœ€æ–°çš„è§†é¢‘å¸§</a></p><p>å¦‚â€œ<a href="http://192.16.34.182:8080/?action=snapshot&n=100000000%E2%80%9D">http://192.16.34.182:8080/?action=snapshot&amp;n=100000000â€</a></p><p>å½“ç„¶ï¼Œä¹Ÿå¯ç›´æ¥åœ¨æµè§ˆå™¨è¾“å…¥è§†é¢‘æµåœ°å€â€œ<a href="http://192.16.34.182:8080/?action=streamer%E2%80%9D">http://192.16.34.182:8080/?action=streamerâ€</a></p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
      <tag>è§†é¢‘æµ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linuxå…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹</title>
    <link href="/2021/01/10/linux%E5%85%B3%E9%97%AD%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B/"/>
    <url>/2021/01/10/linux%E5%85%B3%E9%97%AD%E5%8D%A0%E7%94%A8%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%BF%9B%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<pre><code>[root@izuf64lmg25t75c8db3hxcz workspace]# lsof -i:9999COMMAND   PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAMEpython3 11902 root    3u  IPv4 9435173      0t0  TCP *:distinct (LISTEN)python3 11902 root    5u  IPv4 9451420      0t0  TCP izuf64lmg25t75c8db3hxcz:distinct-&gt;115.200.48.232:ibm-mgr (CLOSE_WAIT)[root@izuf64lmg25t75c8db3hxcz workspace]# kill -9 11902</code></pre><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-29-1024x173.png"></p><p>lsof -i:ç«¯å£å·</p><p>kill -9 pid</p><p>å½“ç„¶ä¹Ÿæœ‰å¦ä¸€ç§ä¸ç”¨æŸ¥çœ‹pidçš„æ–¹æ³•</p><p>kill -9 `lsof -i:9999  awk â€˜NR&#x3D;&#x3D;2{print $2}â€™`</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Androidè®¾ç½®æ¨ªå±/é¿å…æ—‹è½¬å±å¹•å¯¼è‡´avtivityé‡è½½</title>
    <link href="/2021/01/08/android%E8%AE%BE%E7%BD%AE%E6%A8%AA%E5%B1%8F/"/>
    <url>/2021/01/08/android%E8%AE%BE%E7%BD%AE%E6%A8%AA%E5%B1%8F/</url>
    
    <content type="html"><![CDATA[<p>åœ¨AndroidManifest.xmlçš„activityæ ‡ç­¾ä¸­æ·»åŠ å¦‚ä¸‹ç‰‡æ®µï¼š</p><p>android:screenOrientation&#x3D;â€portraitâ€</p><p>æ¨ªå±æ”¹æˆandroid:screenOrientation&#x3D;â€landscapeâ€</p><p>å¦ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰æ—¶æŠŠç¨‹åºåˆ‡æ¢åˆ°åå°æˆ–æ—‹è½¬å±å¹•ä½¿å¸ƒå±€æ”¹å˜æ—¶ï¼Œä¼šé‡è½½onCreateæ–¹æ³•å¯¼è‡´activityé‡è½½ï¼Œé¿å…è¿™ç§æƒ…å†µçš„æ–¹æ³•æ˜¯åœ¨AndroidManifest.xmlä¸­activityæ ‡ç­¾ä¸­æ·»åŠ </p><p>android:configChanges&#x3D;â€orientationkeyboardHiddenscreenSizeâ€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/04/image-24.png"></p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bæ¢æº</title>
    <link href="/2021/01/06/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8D%A2%E6%BA%90/"/>
    <url>/2021/01/06/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<h4 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h4><pre><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.baksudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak</code></pre><h4 id="æ›´æ”¹ç³»ç»Ÿæºæ–‡ä»¶"><a href="#æ›´æ”¹ç³»ç»Ÿæºæ–‡ä»¶" class="headerlink" title="æ›´æ”¹ç³»ç»Ÿæºæ–‡ä»¶"></a>æ›´æ”¹ç³»ç»Ÿæºæ–‡ä»¶</h4><pre><code>sudo vim /etc/apt/sources.list</code></pre><p>æŠŠåŸæœ‰çš„æ³¨é‡Šæ‰ï¼Œæ·»åŠ </p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpideb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main contrib non-free rpi</code></pre><h4 id="æ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œè½¯ä»¶"><a href="#æ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œè½¯ä»¶" class="headerlink" title="æ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œè½¯ä»¶"></a>æ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œè½¯ä»¶</h4><pre><code>sudo apt-get updatesudo apt-get upgrade</code></pre><h4 id="æ›´æ”¹ç³»ç»Ÿæº"><a href="#æ›´æ”¹ç³»ç»Ÿæº" class="headerlink" title="æ›´æ”¹ç³»ç»Ÿæº"></a>æ›´æ”¹ç³»ç»Ÿæº</h4><pre><code>sudo vim /etc/apt/sources.list.d/raspi.list</code></pre><p>åŒæ ·æ³¨é‡Šæ‰åŸå†…å®¹ï¼Œæ·»åŠ ä¸Š</p><pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main uideb-src http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui</code></pre><p>åˆšæ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆæœ¬</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-16-1024x805.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pipæ¢æºã€è®¾ç½®å¤šä¸ªæºå¹¶æ·»åŠ ä¿¡ä»»</title>
    <link href="/2021/01/06/pip%E6%8D%A2%E6%BA%90/"/>
    <url>/2021/01/06/pip%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><p>cd ~ # è¿›å…¥å®¶ç›®å½•<br>mkdir .pip # æ–°å»º.pipéšè—æ–‡ä»¶å¤¹<br>cd .pip # è¿›å…¥.pipæ–‡ä»¶å¤¹<br>touch pip.conf # æ–°å»ºpip.confæ–‡ä»¶<br>vim pip.conf # ç”¨vimç¼–è¾‘pip.confæ–‡ä»¶</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[global]</span><br><span class="hljs-attr">index-url</span>=https://mirrors.ustc.edu.cn/pypi/simple<br><span class="hljs-attr">extra-index-url</span>=https://pypi.tuna.tsinghua.edu.cn/simple/<br>                http://mirrors.aliyun.com/pypi/simple/<br><br><span class="hljs-section">[install]</span><br><span class="hljs-attr">trusted-host</span>=mirrors.ustc.edu.cn<br>            pypi.tuna.tsinghua.edu.cn<br>            mirrors.aliyun.com<br></code></pre></td></tr></table></figure><h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><p>åœ¨è¿™ä¸ªç›®å½•ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/08/image-2.png"></p><p>æ‰¾åˆ°pipæ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰pipæ–‡ä»¶å¤¹å°±æ–°å»ºä¸€ä¸ª</p><p>åœ¨pipæ–‡ä»¶å¤¹é‡Œé¢æ–°å»ºä¸€ä¸ªtxt,å†…å®¹åŒä¸Š</p><p>å‘½åä¸ºpip.iniä¿å­˜</p><h4 id="ä¸´æ—¶æ¢æº"><a href="#ä¸´æ—¶æ¢æº" class="headerlink" title="ä¸´æ—¶æ¢æº"></a>ä¸´æ—¶æ¢æº</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install xxx -i http://mirrors.baidu.com/pypi/simple --trusted-host mirrors.baidu.com<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chromeæ’ä»¶SwitchyOmegaé…ç½®</title>
    <link href="/2021/01/06/chrome%E6%8F%92%E4%BB%B6switchyomega%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/01/06/chrome%E6%8F%92%E4%BB%B6switchyomega%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h4 id="åˆ°æ’ä»¶é€‰é¡¹ç•Œé¢ï¼Œæ–°å»ºæƒ…æ™¯æ¨¡å¼ï¼Œé€‰æ‹©ä»£ç†æœåŠ¡å™¨"><a href="#åˆ°æ’ä»¶é€‰é¡¹ç•Œé¢ï¼Œæ–°å»ºæƒ…æ™¯æ¨¡å¼ï¼Œé€‰æ‹©ä»£ç†æœåŠ¡å™¨" class="headerlink" title="åˆ°æ’ä»¶é€‰é¡¹ç•Œé¢ï¼Œæ–°å»ºæƒ…æ™¯æ¨¡å¼ï¼Œé€‰æ‹©ä»£ç†æœåŠ¡å™¨"></a>åˆ°æ’ä»¶é€‰é¡¹ç•Œé¢ï¼Œæ–°å»ºæƒ…æ™¯æ¨¡å¼ï¼Œé€‰æ‹©ä»£ç†æœåŠ¡å™¨</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-8-1024x598.png"></p><h4 id="é€‰æ‹©socket5ä»£ç†ï¼Œå¡«å†™æ­£ç¡®çš„ä»£ç†ç«¯å£"><a href="#é€‰æ‹©socket5ä»£ç†ï¼Œå¡«å†™æ­£ç¡®çš„ä»£ç†ç«¯å£" class="headerlink" title="é€‰æ‹©socket5ä»£ç†ï¼Œå¡«å†™æ­£ç¡®çš„ä»£ç†ç«¯å£"></a>é€‰æ‹©socket5ä»£ç†ï¼Œå¡«å†™æ­£ç¡®çš„ä»£ç†ç«¯å£</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-11-1024x221.png"></p><h4 id="ç«¯å£å·å¯ä»¥åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹"><a href="#ç«¯å£å·å¯ä»¥åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹" class="headerlink" title="ç«¯å£å·å¯ä»¥åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹"></a>ç«¯å£å·å¯ä»¥åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­æŸ¥çœ‹</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-10-1024x684.png"></p><h4 id="é€‰æ‹©åº”ç”¨é€‰é¡¹"><a href="#é€‰æ‹©åº”ç”¨é€‰é¡¹" class="headerlink" title="é€‰æ‹©åº”ç”¨é€‰é¡¹"></a>é€‰æ‹©åº”ç”¨é€‰é¡¹</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-12.png"></p><h4 id="é…ç½®auto-switch-é»˜è®¤é€‰æ‹©ç›´è¿ï¼Œè§„åˆ™åˆ—è¡¨è§„åˆ™å¯¹åº”ç‚¹æƒ…æ™¯æ¨¡å¼ä¸ºåˆšæ–°å»ºçš„é‚£ä¸ªæƒ…æ™¯æ¨¡å¼ï¼Œè§„åˆ™åˆ—è¡¨æ ¼å¼é€‰æ‹©AutoProxy-è§„åˆ™åˆ—è¡¨ç½‘å€GitHub-gfwlist-gfwlist-The-one-and-only-one-gfwlist-here"><a href="#é…ç½®auto-switch-é»˜è®¤é€‰æ‹©ç›´è¿ï¼Œè§„åˆ™åˆ—è¡¨è§„åˆ™å¯¹åº”ç‚¹æƒ…æ™¯æ¨¡å¼ä¸ºåˆšæ–°å»ºçš„é‚£ä¸ªæƒ…æ™¯æ¨¡å¼ï¼Œè§„åˆ™åˆ—è¡¨æ ¼å¼é€‰æ‹©AutoProxy-è§„åˆ™åˆ—è¡¨ç½‘å€GitHub-gfwlist-gfwlist-The-one-and-only-one-gfwlist-here" class="headerlink" title="é…ç½®auto switch,é»˜è®¤é€‰æ‹©ç›´è¿ï¼Œè§„åˆ™åˆ—è¡¨è§„åˆ™å¯¹åº”ç‚¹æƒ…æ™¯æ¨¡å¼ä¸ºåˆšæ–°å»ºçš„é‚£ä¸ªæƒ…æ™¯æ¨¡å¼ï¼Œè§„åˆ™åˆ—è¡¨æ ¼å¼é€‰æ‹©AutoProxy,è§„åˆ™åˆ—è¡¨ç½‘å€GitHub - gfwlist&#x2F;gfwlist: The one and only one gfwlist here"></a>é…ç½®auto switch,é»˜è®¤é€‰æ‹©ç›´è¿ï¼Œè§„åˆ™åˆ—è¡¨è§„åˆ™å¯¹åº”ç‚¹æƒ…æ™¯æ¨¡å¼ä¸ºåˆšæ–°å»ºçš„é‚£ä¸ªæƒ…æ™¯æ¨¡å¼ï¼Œè§„åˆ™åˆ—è¡¨æ ¼å¼é€‰æ‹©AutoProxy,è§„åˆ™åˆ—è¡¨ç½‘å€<a href="https://github.com/gfwlist/gfwlist">GitHub - gfwlist&#x2F;gfwlist: The one and only one gfwlist here</a></h4><p>å»ºè®®åœ°å€<a href="https://gitlab.com/gfwlist/gfwlist/raw/master/gfwlist.txt">https://gitlab.com/gfwlist/gfwlist/raw/master/gfwlist.txt</a></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-13-1024x467.png"></p><h4 id="é€‰æ‹©ç«‹å³æ›´æ–°ï¼Œå†ä¿å­˜"><a href="#é€‰æ‹©ç«‹å³æ›´æ–°ï¼Œå†ä¿å­˜" class="headerlink" title="é€‰æ‹©ç«‹å³æ›´æ–°ï¼Œå†ä¿å­˜"></a>é€‰æ‹©ç«‹å³æ›´æ–°ï¼Œå†ä¿å­˜</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-14.png"></p>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä»£ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CloudFlareIPä¼˜é€‰CDNåŠ é€Ÿ</title>
    <link href="/2021/01/04/cloudflareip%E4%BC%98%E9%80%89cdn%E5%8A%A0%E9%80%9F/"/>
    <url>/2021/01/04/cloudflareip%E4%BC%98%E9%80%89cdn%E5%8A%A0%E9%80%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="cloudflareä»£ç†"><a href="#cloudflareä»£ç†" class="headerlink" title="cloudflareä»£ç†"></a>cloudflareä»£ç†</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-1024x149.png"></p><p>pingåŸŸåç»“æœéƒ½æ˜¯cloudflareèŠ‚ç‚¹å°±è¯´æ˜ä»£ç†æˆåŠŸäº†ï¼Œå»¶è¿Ÿé«˜é€Ÿåº¦ä¸ä¸€å®šæ…¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-5-1024x594.png"></p><h3 id="IPä¼˜é€‰"><a href="#IPä¼˜é€‰" class="headerlink" title="IPä¼˜é€‰"></a>IPä¼˜é€‰</h3><p>ä¸‹è½½åœ°å€<a href="https://github.com/badafans/better-cloudflare-ip,%E7%82%B9%E5%87%BB%E5%8F%B3%E4%BE%A7release%E9%80%89%E6%8B%A9%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD">https://github.com/badafans/better-cloudflare-ip,ç‚¹å‡»å³ä¾§releaseé€‰æ‹©ç‰ˆæœ¬ä¸‹è½½</a></p><p>åŒå‡»æ‰“å¼€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-2.png"></p><p>è¾“å…¥æœŸæœ›å¸¦å®½ï¼Œå»ºè®®å°ä¸€ç‚¹ï¼Œå¦åˆ™å¯èƒ½é€‰ä¸åˆ°åˆé€‚çš„IP</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-3.png"></p><p>ç­‰å¾…ç»“æœï¼Œç¬¬ä¸€ä¸ªIPå³æ˜¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2021/01/image-4.png"></p><h3 id="æ–°çš„IPä¼˜é€‰å·¥å…·"><a href="#æ–°çš„IPä¼˜é€‰å·¥å…·" class="headerlink" title="æ–°çš„IPä¼˜é€‰å·¥å…·"></a>æ–°çš„IPä¼˜é€‰å·¥å…·</h3><p><a href="https://github.com/XIU2/CloudflareSpeedTest">https://github.com/XIU2/CloudflareSpeedTest</a></p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cloudflare</tag>
      
      <tag>CDN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bè¿æ¥WiFi</title>
    <link href="/2020/12/30/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E8%BF%9E%E6%8E%A5wifi/"/>
    <url>/2020/12/30/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E8%BF%9E%E6%8E%A5wifi/</url>
    
    <content type="html"><![CDATA[<p>æ–°å»ºTXTæ–‡ä»¶ï¼Œæ ¼å¼å¦‚ï¼š</p><pre><code>country=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;    ssid=&quot;ç›®æ ‡Wi-Fiåç§°&quot;    psk=&quot;ç›®æ ‡Wi-Fiå¯†ç &quot;    priority=3&#125;network=&#123;    ssid=&quot;ç›®æ ‡Wi-Fiåç§°&quot;    psk=&quot;ç›®æ ‡Wi-Fiå¯†ç &quot;    priority=2&#125;</code></pre><p>ssidä¸ºWiFiåç§°ï¼Œpskä¸ºå¯†ç ï¼Œä¿ç•™å¼•å·ï¼Œpriorityä¸ºè¿æ¥ä¼˜å…ˆçº§</p><p>é‡å‘½åä¸ºwpa_supplicant.confï¼Œå¤åˆ¶æ–‡ä»¶åˆ°bootç›®å½•ä¸‹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-22-1024x516.png"></p><p>æ‹”æ‰ç½‘çº¿é‡æ–°å¯åŠ¨ï¼ŒæŸ¥çœ‹è·¯ç”±å™¨ï¼Œå‘ç°æ²¡æœ‰è¿ä¸Šç½‘ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…ï¼Œå‘ç°å¥½åƒéœ€è¦æ‰‹åŠ¨æ‰“å¼€WiFiå¼€å…³</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-23.png"></p><p>é‡å¯ï¼Œä¸Šçº¿ï¼</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-24-1024x493.png"></p><p>è¿™æ—¶å€™æœ‰ä¸€ä¸ªå˜åŒ–ï¼Œå°±æ˜¯IPæ”¹äº†ï¼Œè¿œç¨‹è¿æ¥æ—¶éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4BæŸ¥æ‰¾IPï¼Œå¼€å¯SSHæˆ–VNCè¿æ¥</title>
    <link href="/2020/12/29/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%9F%A5%E6%89%BEip%EF%BC%8C%E5%BC%80%E5%90%AFssh%E6%88%96vnc%E8%BF%9E%E6%8E%A5/"/>
    <url>/2020/12/29/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E6%9F%A5%E6%89%BEip%EF%BC%8C%E5%BC%80%E5%90%AFssh%E6%88%96vnc%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€æŸ¥æ‰¾IP"><a href="#ä¸€ã€æŸ¥æ‰¾IP" class="headerlink" title="ä¸€ã€æŸ¥æ‰¾IP"></a>ä¸€ã€æŸ¥æ‰¾IP</h3><p>æ–¹æ³•æœ‰å¾ˆå¤šï¼Œåªä»‹ç»æˆ‘å®è·µæˆåŠŸçš„æ–¹æ³•ï¼Œå¯èƒ½ä¹Ÿæ˜¯æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼š</p><p>ç½‘çº¿è¿æ¥è·¯ç”±å™¨å’Œæ ‘è“æ´¾ï¼Œæ ‘è“æ´¾ç½‘çº¿æ¥å£ç¯å…‰å¿«é—ªè¡¨ç¤ºè¿æ¥æ­£å¸¸ï¼Œæ­¤æ—¶æ‰“å¼€è·¯ç”±å™¨ç»ˆç«¯ç®¡ç†ç•Œé¢ï¼š</p><p>åœ¨ç”µè„‘è¿æ¥WiFiçš„æƒ…å†µä¸‹ï¼Œå‘½ä»¤è¡Œè¿è¡Œipconfigï¼Œæ— çº¿å±€åŸŸç½‘é€‚é…å™¨çš„é»˜è®¤ç½‘å…³å°±æ˜¯è·¯ç”±å™¨ç»ˆç«¯ç®¡ç†ç•Œé¢åœ°å€</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-7.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-8-1024x588.png"></p><p>æ‰¾åˆ°æœ‰çº¿è¿æ¥è®¾å¤‡ï¼Œå¾ˆå¤šè·¯ç”±å™¨åœ¨è¿™é‡Œä¼šæ˜¾ç¤ºRaspberryï¼Œå¾ˆå¥½è¯†åˆ«ï¼Œæˆ‘è¿™é‡Œå› ä¸ºè®¾å¤‡å°‘ä¹Ÿå¾ˆå¥½è¯†åˆ«ï¼Œå¦‚æœæœ‰å¤šä¸ªç–‘ä¼¼IPçš„è¯ï¼Œå¯ä»¥æŒ¨ä¸ªå°è¯•SSHè¿æ¥</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-9-1024x505.png"></p><h3 id="äºŒã€SSHè¿æ¥"><a href="#äºŒã€SSHè¿æ¥" class="headerlink" title="äºŒã€SSHè¿æ¥"></a>äºŒã€SSHè¿æ¥</h3><p>æ–°å»ºç©ºç™½txtæ–‡ä»¶ï¼Œé‡å‘½åä¸ºsshï¼Œåˆ å»åç¼€ï¼Œå¤åˆ¶æ–‡ä»¶åˆ°SDå¡bootæ ¹ç›®å½•</p><p>æ’å¡ï¼Œé€šç”µã€‚å®˜æ–¹æ¨èç”¨Puttyä½œä¸ºSSHè¿æ¥å·¥å…·ï¼Œé»˜è®¤ç”¨æˆ·åpiï¼Œå¯†ç raspberryï¼Œæ³¨æ„è¾“å…¥å¯†ç æ—¶ä¸æ˜¾ç¤ºå­—ç¬¦</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-12.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-13.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-14.png"></p><p>ç„¶åè¾“å…¥sudo raspi-configï¼Œè¿›å…¥æ ‘è“æ´¾é…ç½®ç•Œé¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-15.png"></p><p>é€‰æ‹©3 Interface Optionsï¼Œå¼€å¯SSHå’ŒVNCæœåŠ¡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-16.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-17.png"></p><p>å¦‚æœè¦ç”¨VNCæ“ä½œå›¾å½¢ç•Œé¢ï¼Œå»ºè®®å†æ“ä½œä¸€æ­¥ï¼Œç¡®ä¿VNCè¿æ¥åå›¾å½¢ç•Œé¢å¯ä»¥æˆåŠŸæ˜¾ç¤ºï¼ˆé»˜è®¤è®¾ç½®æœ‰æ—¶å€™ä¼šæç¤ºæ²¡æ³•æ˜¾ç¤ºï¼‰</p><p>é€‰æ‹©2 Display Options D1 Resolution ä¿®æ”¹åˆ†è¾¨ç‡</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-18.png"></p><h3 id="ä¸‰ã€VNCè¿æ¥"><a href="#ä¸‰ã€VNCè¿æ¥" class="headerlink" title="ä¸‰ã€VNCè¿æ¥"></a>ä¸‰ã€VNCè¿æ¥</h3><p>VNCåªé’ˆå¯¹ç³»ç»Ÿé•œåƒå¸¦å›¾å½¢ç•Œé¢çš„ã€‚è¿™é‡Œä½¿ç”¨VNC viewerï¼Œåœ°å€æ è¾“å…¥IPå³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-19.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-20.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-21-1024x801.png"></p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ‘è“æ´¾4Bç³»ç»Ÿé•œåƒçƒ§å½•</title>
    <link href="/2020/12/29/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E7%83%A7%E5%BD%95/"/>
    <url>/2020/12/29/%E6%A0%91%E8%8E%93%E6%B4%BE4b%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F%E7%83%A7%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€ä¸‹è½½ç³»ç»Ÿé•œåƒ"><a href="#ä¸€ã€ä¸‹è½½ç³»ç»Ÿé•œåƒ" class="headerlink" title="ä¸€ã€ä¸‹è½½ç³»ç»Ÿé•œåƒ"></a>ä¸€ã€ä¸‹è½½ç³»ç»Ÿé•œåƒ</h3><p>åˆ°æ ‘è“æ´¾å®˜ç½‘ä¸‹è½½ç³»ç»Ÿé•œåƒ</p><p><a href="https://www.raspberrypi.org/software/operating-systems/#raspberry-pi-os-32-bit">https://www.raspberrypi.org/software/operating-systems/#raspberry-pi-os-32-bit</a></p><p>ä¸‹è½½ä¸‹æ¥åè§£å‹ä¸º.imgæ–‡ä»¶æ‰å¯ä½¿ç”¨</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-2-1024x579.png"></p><h3 id="äºŒã€çƒ§å½•é•œåƒ"><a href="#äºŒã€çƒ§å½•é•œåƒ" class="headerlink" title="äºŒã€çƒ§å½•é•œåƒ"></a>äºŒã€çƒ§å½•é•œåƒ</h3><p>çƒ§å½•è½¯ä»¶æ¨èbalenaEtcheræˆ–Win32DiskImager</p><p>å†…å­˜å¡æ’å…¥è¯»å¡å™¨ï¼Œè¯»å¡å™¨æ’å…¥ç”µè„‘USBæ¥å£ï¼Œæ‰“å¼€çƒ§å½•è½¯ä»¶</p><p>balenaEtcherï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-5-1024x614.png"></p><p>Win32DiskImagerï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-4.png"></p><p>çƒ§å½•æˆåŠŸåsdå¡åœ¨windowsç›˜ç¬¦ä¸­æ˜¾ç¤ºä¸ºä¸¤ä¸ªç›˜ï¼Œä¸€ä¸ªä¸ºbootï¼Œåªæœ‰ä¸¤ä¸‰ç™¾å…†</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/12/image-6.png"></p><p>æŠŠçƒ§å½•å¥½çš„sdå¡æ’å…¥æ ‘è“æ´¾ï¼Œæ¥é€štype-Cç”µæºï¼Œæ­£å¸¸çŠ¶æ€ä¸ºçº¢ç¯å¸¸äº®ï¼Œç»¿ç¯å¿«é—ªä¸€æ®µæ—¶é—´åå¯èƒ½ä¸äº®</p>]]></content>
    
    
    <categories>
      
      <category>æ ‘è“æ´¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ ‘è“æ´¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Bæ ‘ã€B+æ ‘æ’å…¥åˆ é™¤</title>
    <link href="/2020/11/30/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81b%E6%A0%91%E3%80%81b%E6%A0%91%E3%80%81b%E6%A0%91/"/>
    <url>/2020/11/30/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81b%E6%A0%91%E3%80%81b%E6%A0%91%E3%80%81b%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h3 id="1-Bæ ‘"><a href="#1-Bæ ‘" class="headerlink" title="1 Bæ ‘"></a>1 Bæ ‘</h3><p>åœ¨ä»‹ç»B+æ ‘ä¹‹å‰ï¼Œ å…ˆç®€å•çš„ä»‹ç»ä¸€ä¸‹Bæ ‘ï¼Œè¿™ä¸¤ç§æ•°æ®ç»“æ„æ—¢æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä¹Ÿæœ‰ä»–ä»¬çš„åŒºåˆ«ï¼Œæœ€åï¼Œæˆ‘ä»¬ä¹Ÿä¼šå¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ç§æ•°æ®ç»“æ„çš„åŒºåˆ«ã€‚</p><h4 id="1-1-Bæ ‘æ¦‚å¿µ"><a href="#1-1-Bæ ‘æ¦‚å¿µ" class="headerlink" title="1.1 Bæ ‘æ¦‚å¿µ"></a>1.1 Bæ ‘æ¦‚å¿µ</h4><p>Bæ ‘ä¹Ÿç§°B-æ ‘,å®ƒæ˜¯ä¸€é¢—å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚äºŒå‰æ ‘æˆ‘æƒ³å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œå…¶å®ï¼ŒBæ ‘å’Œåé¢è®²åˆ°çš„B+æ ‘ä¹Ÿæ˜¯ä»æœ€ç®€å•çš„äºŒå‰æ ‘å˜æ¢è€Œæ¥çš„ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç¥ç§˜çš„åœ°æ–¹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹Bæ ‘çš„å®šä¹‰ã€‚</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰m-1ä¸ª<strong>å…³é”®å­—</strong>ï¼ˆå¯ä»¥å­˜æœ‰çš„é”®å€¼å¯¹ï¼‰ã€‚</li><li>æ ¹èŠ‚ç‚¹æœ€å°‘å¯ä»¥åªæœ‰1ä¸ª<strong>å…³é”®å­—</strong>ã€‚</li><li>éæ ¹èŠ‚ç‚¹è‡³å°‘æœ‰m&#x2F;2ä¸ª<strong>å…³é”®å­—</strong>ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…³é”®å­—éƒ½æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œæ¯ä¸ªå…³é”®å­—çš„å·¦å­æ ‘ä¸­çš„æ‰€æœ‰å…³é”®å­—éƒ½å°äºå®ƒï¼Œè€Œå³å­æ ‘ä¸­çš„æ‰€æœ‰å…³é”®å­—éƒ½å¤§äºå®ƒã€‚</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½ä½äºåŒä¸€å±‚ï¼Œæˆ–è€…è¯´æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„é•¿åº¦éƒ½ç›¸åŒã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜æœ‰ç´¢å¼•å’Œæ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„keyå’Œvalueã€‚</li></ul><p>æ‰€ä»¥ï¼Œæ ¹èŠ‚ç‚¹çš„<strong>å…³é”®å­—</strong>æ•°é‡èŒƒå›´ï¼š<code>1 &lt;= k &lt;= m-1</code>ï¼Œéæ ¹èŠ‚ç‚¹çš„<strong>å…³é”®å­—</strong>æ•°é‡èŒƒå›´ï¼š<code>m/2 &lt;= k &lt;= m-1</code>ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸ªæ¦‚å¿µï¼Œæè¿°ä¸€é¢—Bæ ‘æ—¶éœ€è¦æŒ‡å®šå®ƒçš„é˜¶æ•°ï¼Œé˜¶æ•°è¡¨ç¤ºäº†ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªå­©å­èŠ‚ç‚¹ï¼Œä¸€èˆ¬ç”¨å­—æ¯mè¡¨ç¤ºé˜¶æ•°ã€‚</p><p>æˆ‘ä»¬å†ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ä¸Šé¢çš„æ¦‚å¿µï¼Œæ¯”å¦‚è¿™é‡Œæœ‰ä¸€ä¸ª5é˜¶çš„Bæ ‘ï¼Œæ ¹èŠ‚ç‚¹æ•°é‡èŒƒå›´ï¼š1 &lt;&#x3D; k &lt;&#x3D; 4ï¼Œéæ ¹èŠ‚ç‚¹æ•°é‡èŒƒå›´ï¼š2 &lt;&#x3D; k &lt;&#x3D; 4ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ’å…¥çš„ä¾‹å­ï¼Œè®²è§£ä¸€ä¸‹Bæ ‘çš„æ’å…¥è¿‡ç¨‹ï¼Œæ¥ç€ï¼Œå†è®²è§£ä¸€ä¸‹åˆ é™¤å…³é”®å­—çš„è¿‡ç¨‹ã€‚</p><h4 id="1-2-Bæ ‘æ’å…¥"><a href="#1-2-Bæ ‘æ’å…¥" class="headerlink" title="1.2 Bæ ‘æ’å…¥"></a>1.2 Bæ ‘æ’å…¥</h4><p>æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½ä¸€ä¸ªè§„åˆ™ï¼š<strong>åˆ¤æ–­å½“å‰ç»“ç‚¹keyçš„ä¸ªæ•°æ˜¯å¦å°äºç­‰äºm-1ï¼Œå¦‚æœæ»¡è¶³ï¼Œç›´æ¥æ’å…¥å³å¯ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œå°†èŠ‚ç‚¹çš„ä¸­é—´çš„keyå°†è¿™ä¸ªèŠ‚ç‚¹åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œä¸­é—´çš„èŠ‚ç‚¹æ”¾åˆ°çˆ¶èŠ‚ç‚¹ä¸­å³å¯ã€‚</strong></p><p>ä¾‹å­ï¼šåœ¨5é˜¶Bæ ‘ä¸­ï¼Œç»“ç‚¹æœ€å¤šæœ‰4ä¸ªkey,æœ€å°‘æœ‰2ä¸ªkeyï¼ˆæ³¨æ„ï¼šä¸‹é¢çš„èŠ‚ç‚¹ç»Ÿä¸€ç”¨ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºkeyå’Œvalueï¼‰ã€‚</p><ul><li>æ’å…¥18ï¼Œ70ï¼Œ50,40</li></ul><p><img src="https://oscimg.oschina.net/oscnet/eb191e52c4af046dc6d858c793c8ddf3c8e.jpg"></p><ul><li>æ’å…¥22</li></ul><p><img src="https://oscimg.oschina.net/oscnet/0c6e169e37ff9643c46c72922f42bcb5d46.jpg"></p><p>æ’å…¥22æ—¶ï¼Œå‘ç°è¿™ä¸ªèŠ‚ç‚¹çš„å…³é”®å­—å·²ç»å¤§äº4äº†ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œåˆ†è£‚ï¼Œåˆ†è£‚çš„è§„åˆ™åœ¨ä¸Šé¢å·²ç»è®²äº†ï¼Œåˆ†è£‚ä¹‹åï¼Œå¦‚ä¸‹ã€‚</p><p><img src="https://oscimg.oschina.net/oscnet/1377e97a1160e07ffa600c0d8cba7cadf1e.jpg"></p><ul><li>æ¥ç€æ’å…¥23ï¼Œ25ï¼Œ39</li></ul><p><img src="https://oscimg.oschina.net/oscnet/03e1e510bcd8672a98e1a67dd60a91d3aea.jpg"></p><p>åˆ†è£‚ï¼Œå¾—åˆ°ä¸‹é¢çš„ã€‚</p><p><img src="https://oscimg.oschina.net/oscnet/1155825270844bbe53c9f2701395c3fa9af.jpg"></p><p>æ›´è¿‡çš„æ’å…¥çš„è¿‡ç¨‹å°±ä¸å¤šä»‹ç»äº†ï¼Œç›¸ä¿¡æœ‰è¿™ä¸ªä¾‹å­ä½ å·²ç»çŸ¥é“æ€ä¹ˆè¿›è¡Œæ’å…¥æ“ä½œäº†ã€‚</p><h4 id="1-3-Bæ ‘çš„åˆ é™¤æ“ä½œ"><a href="#1-3-Bæ ‘çš„åˆ é™¤æ“ä½œ" class="headerlink" title="1.3 Bæ ‘çš„åˆ é™¤æ“ä½œ"></a>1.3 Bæ ‘çš„åˆ é™¤æ“ä½œ</h4><p>Bæ ‘çš„åˆ é™¤æ“ä½œç›¸å¯¹äºæ’å…¥æ“ä½œæ˜¯ç›¸å¯¹å¤æ‚ä¸€äº›çš„ï¼Œä½†æ˜¯ï¼Œä½ çŸ¥é“è®°ä½å‡ ç§æƒ…å†µï¼Œä¸€æ ·å¯ä»¥å¾ˆè½»æ¾çš„æŒæ¡çš„ã€‚</p><ul><li>ç°åœ¨æœ‰ä¸€ä¸ªåˆå§‹çŠ¶æ€æ˜¯ä¸‹é¢è¿™æ ·çš„Bæ ‘ï¼Œç„¶åè¿›è¡Œåˆ é™¤æ“ä½œã€‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/261678b789a5f4dac373093919ea6a41b8a.jpg"></p><ul><li>åˆ é™¤15ï¼Œè¿™ç§æƒ…å†µæ˜¯åˆ é™¤å¶å­èŠ‚ç‚¹çš„å…ƒç´ ï¼Œå¦‚æœåˆ é™¤ä¹‹åï¼ŒèŠ‚ç‚¹æ•°è¿˜æ˜¯å¤§äº <code>m/2</code>ï¼Œè¿™ç§æƒ…å†µåªè¦ç›´æ¥åˆ é™¤å³å¯ã€‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/0ed340c43b270b4a7932d7db15ebf0acc26.jpg"></p><p><img src="https://oscimg.oschina.net/oscnet/11e2970a52f2b9c73b2a30922b623d4e380.jpg"></p><ul><li>æ¥ç€ï¼Œæˆ‘ä»¬æŠŠ22åˆ é™¤ï¼Œè¿™ç§æƒ…å†µçš„è§„åˆ™ï¼š22æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œ<strong>å¯¹äºéå¶å­èŠ‚ç‚¹çš„åˆ é™¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åç»§keyï¼ˆå…ƒç´ ï¼‰è¦†ç›–è¦åˆ é™¤çš„keyï¼Œç„¶ååœ¨åç»§keyæ‰€åœ¨çš„å­æ”¯ä¸­åˆ é™¤è¯¥åç»§key</strong>ã€‚å¯¹äºåˆ é™¤22ï¼Œéœ€è¦å°†åç»§å…ƒç´ 24ç§»åˆ°è¢«åˆ é™¤çš„22æ‰€åœ¨çš„èŠ‚ç‚¹ã€‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/6343b9be4ff09d04096e9eac1d500ba0e9d.jpg"></p><p><img src="https://oscimg.oschina.net/oscnet/c60eb3ba1f5fac64515eccfc03192f40fdb.jpg"></p><p>æ­¤æ—¶å‘ç°26æ‰€åœ¨çš„èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°äº2ä¸ªï¼ˆm&#x2F;2ï¼‰ï¼Œè¿™ä¸ªèŠ‚ç‚¹ä¸ç¬¦åˆè¦æ±‚ï¼Œè¿™æ—¶å€™çš„è§„åˆ™ï¼ˆå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ ï¼‰ï¼š<strong>å¦‚æœåˆ é™¤å¶å­èŠ‚ç‚¹ï¼Œå¦‚æœåˆ é™¤å…ƒç´ åå…ƒç´ ä¸ªæ•°å°‘äºï¼ˆm&#x2F;2ï¼‰ï¼Œå¹¶ä¸”å®ƒçš„å…„å¼ŸèŠ‚ç‚¹çš„å…ƒç´ å¤§äºï¼ˆm&#x2F;2ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å…„å¼ŸèŠ‚ç‚¹çš„å…ƒç´ æ¯”æœ€å°‘å€¼m&#x2F;2è¿˜å¤šï¼Œå°†å…ˆå°†çˆ¶èŠ‚ç‚¹çš„å…ƒç´ ç§»åˆ°è¯¥èŠ‚ç‚¹ï¼Œç„¶åå°†å…„å¼ŸèŠ‚ç‚¹çš„å…ƒç´ å†ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹</strong>ã€‚è¿™æ ·å°±æ»¡è¶³è¦æ±‚äº†ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹æ“ä½œè¿‡ç¨‹å°±æ›´åŠ æ˜ç™½äº†ã€‚</p><p><img src="https://oscimg.oschina.net/oscnet/853a8ead34267d029e8d984958c8d4dbea8.jpg"></p><p><img src="https://oscimg.oschina.net/oscnet/0ac5a97219474c5fc16270314e655bf0437.jpg"></p><ul><li>æ¥ç€åˆ é™¤28ï¼Œ<strong>åˆ é™¤å¶å­èŠ‚ç‚¹</strong>ï¼Œåˆ é™¤åä¸æ»¡è¶³è¦æ±‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ ï¼Œä½†æ˜¯ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¹Ÿæ²¡æœ‰å¤šçš„èŠ‚ç‚¹ï¼ˆ2ä¸ªï¼‰ï¼Œå€Ÿä¸äº†ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œ<strong>é¦–å…ˆï¼Œè¿˜æ˜¯å°†å…ˆå°†çˆ¶èŠ‚ç‚¹çš„å…ƒç´ ç§»åˆ°è¯¥èŠ‚ç‚¹ï¼Œç„¶åï¼Œå°†å½“å‰èŠ‚ç‚¹åŠå®ƒçš„å…„å¼ŸèŠ‚ç‚¹ä¸­çš„keyåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</strong>ã€‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/e5845ae0ae2fe779a932aa452ce650a4b48.jpg"></p><p>ç§»åŠ¨ä¹‹åï¼Œè·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ã€‚</p><p><img src="https://oscimg.oschina.net/oscnet/2dfa4b4474986a121c404f2b7b89579616f.jpg"></p><p>åˆ é™¤å°±åªæœ‰ä¸Šé¢çš„å‡ ç§æƒ…å†µï¼Œæ ¹æ®ä¸åŒçš„æƒ…å†µè¿›è¡Œåˆ é™¤å³å¯ã€‚</p><p>ä¸Šé¢çš„è¿™äº›ä»‹ç»ï¼Œç›¸ä¿¡å¯¹äºBæ ‘å·²ç»æœ‰ä¸€å®šçš„äº†è§£äº†ï¼Œæ¥ä¸‹æ¥çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç€è®²è§£B+æ ‘ï¼Œæˆ‘ç›¸ä¿¡åŠ ä¸ŠB+æ ‘çš„å¯¹æ¯”ï¼Œå°±æ›´åŠ æ¸…æ™°æ˜äº†äº†ã€‚</p><h3 id="2-B-æ ‘"><a href="#2-B-æ ‘" class="headerlink" title="2 B+æ ‘"></a>2 B+æ ‘</h3><h4 id="2-1-B-æ ‘æ¦‚è¿°"><a href="#2-1-B-æ ‘æ¦‚è¿°" class="headerlink" title="2.1 B+æ ‘æ¦‚è¿°"></a>2.1 B+æ ‘æ¦‚è¿°</h4><p>B+æ ‘å…¶å®å’ŒBæ ‘æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹çœ‹<strong>ç›¸åŒç‚¹</strong>ã€‚</p><ul><li>æ ¹èŠ‚ç‚¹è‡³å°‘ä¸€ä¸ªå…ƒç´ </li><li>éæ ¹èŠ‚ç‚¹å…ƒç´ èŒƒå›´ï¼šm&#x2F;2 &lt;&#x3D; k &lt;&#x3D; m-1</li></ul><p><strong>ä¸åŒç‚¹</strong>ã€‚</p><ul><li>B+æ ‘æœ‰ä¸¤ç§ç±»å‹çš„èŠ‚ç‚¹ï¼šå†…éƒ¨ç»“ç‚¹ï¼ˆä¹Ÿç§°ç´¢å¼•ç»“ç‚¹ï¼‰å’Œå¶å­ç»“ç‚¹ã€‚å†…éƒ¨èŠ‚ç‚¹å°±æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œå†…éƒ¨èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œåªå­˜å‚¨ç´¢å¼•ï¼Œæ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ã€‚</li><li>å†…éƒ¨ç»“ç‚¹ä¸­çš„keyéƒ½æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œå¯¹äºå†…éƒ¨ç»“ç‚¹ä¸­çš„ä¸€ä¸ªkeyï¼Œå·¦æ ‘ä¸­çš„æ‰€æœ‰keyéƒ½å°äºå®ƒï¼Œå³å­æ ‘ä¸­çš„keyéƒ½å¤§äºç­‰äºå®ƒã€‚å¶å­ç»“ç‚¹ä¸­çš„è®°å½•ä¹ŸæŒ‰ç…§keyçš„å¤§å°æ’åˆ—ã€‚</li><li>æ¯ä¸ªå¶å­ç»“ç‚¹éƒ½å­˜æœ‰ç›¸é‚»å¶å­ç»“ç‚¹çš„æŒ‡é’ˆï¼Œå¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚</li><li>çˆ¶èŠ‚ç‚¹å­˜æœ‰å³å­©å­çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚</li></ul><p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªB+æ ‘çš„ä¾‹å­ï¼Œæ„Ÿå—æ„Ÿå—å®ƒå§ï¼</p><p><img src="https://oscimg.oschina.net/oscnet/bf4d4963b024f6c9fe44d6b26d4f27af54f.jpg"></p><h4 id="2-2-æ’å…¥æ“ä½œ"><a href="#2-2-æ’å…¥æ“ä½œ" class="headerlink" title="2.2 æ’å…¥æ“ä½œ"></a>2.2 æ’å…¥æ“ä½œ</h4><p>å¯¹äºæ’å…¥æ“ä½œå¾ˆç®€å•ï¼Œåªéœ€è¦è®°ä½ä¸€ä¸ªæŠ€å·§å³å¯ï¼š<strong>å½“èŠ‚ç‚¹å…ƒç´ æ•°é‡å¤§äºm-1çš„æ—¶å€™ï¼ŒæŒ‰ä¸­é—´å…ƒç´ åˆ†è£‚æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œä¸­é—´å…ƒç´ åˆ†è£‚åˆ°çˆ¶èŠ‚ç‚¹å½“åšç´¢å¼•å­˜å‚¨ï¼Œä½†æ˜¯ï¼Œæœ¬èº«ä¸­é—´å…ƒç´ è¿˜æ˜¯åˆ†è£‚å³è¾¹è¿™ä¸€éƒ¨åˆ†çš„</strong>ã€‚</p><p>ä¸‹é¢ä»¥ä¸€é¢—5é˜¶B+æ ‘çš„æ’å…¥è¿‡ç¨‹ä¸ºä¾‹ï¼Œ5é˜¶B+æ ‘çš„èŠ‚ç‚¹æœ€å°‘2ä¸ªå…ƒç´ ï¼Œæœ€å¤š4ä¸ªå…ƒç´ ã€‚</p><ul><li>æ’å…¥5ï¼Œ10ï¼Œ15ï¼Œ20</li></ul><p><img src="https://oscimg.oschina.net/oscnet/00114e18a748d2a453007a8b252a43ae8a4.jpg"></p><ul><li>æ’å…¥25ï¼Œæ­¤æ—¶å…ƒç´ æ•°é‡å¤§äº4ä¸ªäº†ï¼Œåˆ†è£‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/6869626e80377a560361d624f172e1e384f.jpg"></p><ul><li>æ¥ç€æ’å…¥26ï¼Œ30ï¼Œç»§ç»­åˆ†è£‚</li></ul><p><img src="https://oscimg.oschina.net/oscnet/0a0428579676a0b2543433cafd702029a76.jpg"></p><p><img src="https://oscimg.oschina.net/oscnet/57e93e2184d5307f303a6f846cdf900345b.jpg"></p><p>æœ‰äº†è¿™å‡ ä¸ªä¾‹å­ï¼Œç›¸ä¿¡æ’å…¥æ“ä½œæ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œä¸‹é¢æ¥ç€çœ‹çœ‹åˆ é™¤æ“ä½œã€‚</p><h4 id="2-3-åˆ é™¤æ“ä½œ"><a href="#2-3-åˆ é™¤æ“ä½œ" class="headerlink" title="2.3 åˆ é™¤æ“ä½œ"></a>2.3 åˆ é™¤æ“ä½œ</h4><p>å¯¹äºåˆ é™¤æ“ä½œæ˜¯æ¯”Bæ ‘ç®€å•ä¸€äº›çš„ï¼Œå› ä¸º<strong>å¶å­èŠ‚ç‚¹æœ‰æŒ‡é’ˆçš„å­˜åœ¨ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ æ—¶ï¼Œä¸éœ€è¦é€šè¿‡çˆ¶èŠ‚ç‚¹äº†ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥é€šè¿‡å…„å¼ŸèŠ‚ç§»åŠ¨å³å¯ï¼ˆå‰ææ˜¯å…„å¼ŸèŠ‚ç‚¹çš„å…ƒç´ å¤§äºm&#x2F;2ï¼‰ï¼Œç„¶åæ›´æ–°çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ï¼›å¦‚æœå…„å¼ŸèŠ‚ç‚¹çš„å…ƒç´ ä¸å¤§äºm&#x2F;2ï¼ˆå…„å¼ŸèŠ‚ç‚¹ä¹Ÿæ²¡æœ‰å¤šä½™çš„å…ƒç´ ï¼‰ï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œå¹¶ä¸”åˆ é™¤çˆ¶èŠ‚ç‚¹ä¸­çš„key</strong>ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å…·ä½“çš„å®ä¾‹ã€‚</p><ul><li>åˆå§‹çŠ¶æ€</li></ul><p><img src="https://oscimg.oschina.net/oscnet/365354deaff4bc75d16cf17c3255c46aca4.jpg"></p><ul><li>åˆ é™¤10ï¼Œåˆ é™¤åï¼Œä¸æ»¡è¶³è¦æ±‚ï¼Œå‘ç°å·¦è¾¹å…„å¼ŸèŠ‚ç‚¹æœ‰å¤šä½™çš„å…ƒç´ ï¼Œæ‰€ä»¥å»å€Ÿå…ƒç´ ï¼Œæœ€åï¼Œä¿®æ”¹çˆ¶èŠ‚ç‚¹ç´¢å¼•</li></ul><p><img src="https://oscimg.oschina.net/oscnet/685a53344454eb37d664919a42dac30a45a.jpg"></p><ul><li>åˆ é™¤å…ƒç´ 5ï¼Œå‘ç°ä¸æ»¡è¶³è¦æ±‚ï¼Œå¹¶ä¸”å‘ç°å·¦å³å…„å¼ŸèŠ‚ç‚¹éƒ½æ²¡æœ‰å¤šä½™çš„å…ƒç´ ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥é€‰æ‹©å’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œæœ€åä¿®æ”¹çˆ¶èŠ‚ç‚¹ç´¢å¼•</li></ul><p><img src="https://oscimg.oschina.net/oscnet/f74ef5fff6f4489fbdcaa8d9c113eb48b26.jpg"></p><ul><li>å‘ç°çˆ¶èŠ‚ç‚¹ç´¢å¼•ä¹Ÿä¸æ»¡è¶³æ¡ä»¶ï¼Œæ‰€ä»¥ï¼Œéœ€è¦åšè·Ÿä¸Šé¢ä¸€æ­¥ä¸€æ ·çš„æ“ä½œ</li></ul><p><img src="https://oscimg.oschina.net/oscnet/177f38002658f2edfb39a811fed992d58b0.jpg"></p><p>è¿™æ ·ï¼ŒB+æ ‘çš„åˆ é™¤æ“ä½œä¹Ÿå°±å®Œæˆäº†ï¼Œæ˜¯ä¸æ˜¯çœ‹å®Œä¹‹åï¼Œè§‰å¾—éå¸¸ç®€å•ï¼</p><h3 id="3-Bæ ‘å’ŒB-æ ‘æ€»ç»“"><a href="#3-Bæ ‘å’ŒB-æ ‘æ€»ç»“" class="headerlink" title="3 Bæ ‘å’ŒB+æ ‘æ€»ç»“"></a>3 Bæ ‘å’ŒB+æ ‘æ€»ç»“</h3><p>B+æ ‘ç›¸å¯¹äºBæ ‘æœ‰ä¸€äº›è‡ªå·±çš„ä¼˜åŠ¿ï¼Œå¯ä»¥å½’ç»“ä¸ºä¸‹é¢å‡ ç‚¹ã€‚</p><ul><li>å•ä¸€èŠ‚ç‚¹å­˜å‚¨çš„å…ƒç´ æ›´å¤šï¼Œä½¿å¾—æŸ¥è¯¢çš„IOæ¬¡æ•°æ›´å°‘ï¼Œæ‰€ä»¥ä¹Ÿå°±ä½¿å¾—å®ƒæ›´é€‚åˆåšä¸ºæ•°æ®åº“MySQLçš„åº•å±‚æ•°æ®ç»“æ„äº†ã€‚</li><li>æ‰€æœ‰çš„æŸ¥è¯¢éƒ½è¦æŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ€§èƒ½æ˜¯ç¨³å®šçš„ï¼Œè€ŒBæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æŸ¥æ‰¾åˆ°æ•°æ®ï¼Œæ‰€ä»¥ä¸ç¨³å®šã€‚</li><li>æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œæ›´åŠ ä¾¿äºæŸ¥æ‰¾ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œçŸ¥è¯†ç‚¹æè¦</title>
    <link href="/2020/11/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E7%82%B9%E6%8F%90%E8%A6%81/"/>
    <url>/2020/11/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E7%82%B9%E6%8F%90%E8%A6%81/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h1><p><strong>ç½‘ç»œåè®®çš„è¦ç´ </strong></p><ol><li>è¯­æ³•ï¼šæ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„ç»“æ„æˆ–æ ¼å¼ ã€‚</li><li>è¯­ä¹‰ï¼šéœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œå®Œæˆä½•ç§åŠ¨ä½œä»¥åŠåšå‡ºä½•ç§å“åº”ã€‚</li><li>åŒæ­¥ï¼šäº‹ä»¶å®ç°é¡ºåºçš„è¯¦ç»†è¯´æ˜</li></ol><p><strong>åˆ†å±‚çš„å¥½å¤„ï¼š</strong></p><ol><li>å„å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„</li><li>çµæ´»æ€§å¥½</li><li>ç»“æ„ä¸Šå¯åˆ†å‰²å¼€</li><li>æ˜“äºå®ç°å’Œç»´æŠ¤</li><li>èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œ</li></ol><p><strong>ç½‘ç»œä½“ç³»ç»“æ„</strong> <img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_1.png">  <strong>ä¿¡é“åˆ©ç”¨ç‡</strong></p><p>U&#x3D;TD&#x2F;(TD+RTT+TA)</p><p>å³ï¼šæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªç¡®è®¤å‰å°½å¯èƒ½å‘é€æœ€å¤šçš„å¸§</p><p>ä»¤ D0 è¡¨ç¤ºç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶ï¼ŒD è¡¨ç¤ºç½‘ç»œå½“å‰çš„æ—¶å»¶</p><p>D&#x3D;D0&#x2F;ï¼ˆ1-Uï¼‰</p><h1 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a><strong>ç‰©ç†å±‚</strong></h1><p><strong>ç‰©ç†å±‚è®¾å¤‡</strong></p><p>ä¸­ç»§å™¨ï¼šæ”¾å¤§ä¿¡å·è½¬å‘ï¼Œä¸èƒ½éš”ç¦»å†²çªåŸŸ</p><p>é›†çº¿å™¨ï¼šå¤šç«¯å£ä¸­ç»§å™¨ï¼Œä¸èƒ½éš”ç¦»å†²çªåŸŸ</p><p><strong>ä¸‰ç§äº¤æ¢</strong></p><p>ç”µè·¯äº¤æ¢ï¼šç‰©ç†é€šä¿¡çº¿è·¯ï¼Œç‹¬å </p><p>æŠ¥æ–‡äº¤æ¢ï¼šæ•´ä¸ªå­˜å‚¨è½¬å‘</p><p>åˆ†ç»„äº¤æ¢ï¼šåˆ†ç»„ï¼Œä¸€ä¸ªä¸ªå­˜å‚¨è½¬å‘</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_2.png"></p><p><strong>ä¼ è¾“åª’ä½“</strong></p><p>å•æ¨¡å…‰çº¤ï¼šè·ç¦»è¿œï¼Œè´¨é‡å¥½ï¼Œé€‚ç”¨äºåƒç±³çº§åˆ«</p><p>å¤šæ¨¡å…‰çº¤ï¼šè·ç¦»è¿‘ï¼Œé€‚ç”¨äºç™¾ç±³çº§åˆ«</p><p>åŒç»çº¿ï¼š5ç±»è¾¾ç™¾å…†</p><p>åŒæŠ½ç”µç¼†</p><p><strong>ç¼–ç æ–¹å¼</strong></p><p>æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼šä½å‘¨æœŸä¸­å¿ƒçš„å‘ä¸Šè·³å˜ä»£è¡¨ 0ï¼Œä½å‘¨æœŸä¸­å¿ƒçš„å‘ä¸‹è·³å˜ä»£è¡¨ 1ã€‚ä½†ä¹Ÿå¯åè¿‡æ¥å®šä¹‰ã€‚</p><p>å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼šåœ¨æ¯ä¸€ä½çš„ä¸­å¿ƒå¤„å§‹ç»ˆéƒ½æœ‰è·³å˜ã€‚ä½å¼€å§‹è¾¹ç•Œæœ‰è·³å˜ä»£è¡¨ 0ï¼Œè€Œä½å¼€å§‹è¾¹ç•Œæ²¡æœ‰è·³å˜ä»£è¡¨ 1ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_3.png"></p><p><strong>é¦™å†œå…¬å¼</strong></p><p>ä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡</p><p>C &#x3D; W log2(1+S&#x2F;N)</p><p>ä¿¡å™ªæ¯”&#x3D;10lg(S&#x2F;N) (dB)</p><p><strong>å¥ˆæ°å‡†åˆ™</strong> æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡</p><p>C&#x3D;2Wlog2V</p><p>(Wæ˜¯å¸¦å®½Hzï¼ŒVæ˜¯æ¯ä¸ªç å…ƒçš„ç¦»æ•£ç”µå¹³ä¸ªæ•°)</p><p><strong>ä¿¡é“å¤ç”¨æŠ€æœ¯</strong></p><ol><li>é¢‘åˆ†å¤ç”¨FDMï¼ˆFrequency Division Multiplexingï¼‰</li><li>æ—¶åˆ†å¤ç”¨TDM (Time Division Multiplexing)</li><li>ç»Ÿè®¡æ—¶åˆ†å¤ç”¨ STDM(Statistic TDM) åŠ¨æ€åœ°åˆ†é…æ—¶éš™</li><li>æ³¢åˆ†å¤ç”¨ WDM(Wavelength Division Multiplexing) ä¸€æ ¹å…‰çº¤æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªå…‰è½½æ³¢ä¿¡å·</li><li>ç åˆ†å¤ç”¨ CDM(Code Division Multiplexing)</li></ol><p>ç åˆ†å¤šå€ CDMA (Code Division Multiple Access)</p><p>S ç«™çš„ 8 bit ç ç‰‡åºåˆ—æ˜¯ 00011011ã€‚</p><p>å‘é€æ¯”ç‰¹ 1 æ—¶ï¼Œå°±å‘é€åºåˆ— 00011011ï¼Œ</p><p>å‘é€æ¯”ç‰¹ 0 æ—¶ï¼Œå°±å‘é€åºåˆ— 11100100ã€‚</p><p>S ç«™çš„ç ç‰‡åºåˆ—ï¼š(â€“1 â€“1 â€“1 +1 +1 â€“1 +1 +1)</p><p>æŠŠæ”¶åˆ°çš„ç ä¸Sçš„ç ç‰‡è¿›è¡Œè§„æ ¼åŒ–å†…ç§¯ï¼Œ&gt;0ï¼ˆå‘é€çš„æ˜¯1ï¼‰,&lt;0(å‘é€çš„æ˜¯0)ï¼Œ&#x3D;0ï¼ˆæœªå‘é€ï¼‰</p><h1 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a><strong>æ•°æ®é“¾è·¯å±‚</strong></h1><p><strong>æ•°æ®é“¾è·¯å±‚è®¾å¤‡</strong></p><p>ç½‘æ¡¥ï¼šä»¥å¤ªç½‘äº’è¿ï¼Œéš”ç¦»å†²çªåŸŸ</p><p>äº¤æ¢æœºï¼šå¤šç«¯å£ç½‘æ¡¥ï¼Œéš”ç¦»å†²çªåŸŸ</p><p><strong>ä¸‰å¤§é—®é¢˜</strong></p><ol><li>å°è£…æˆå¸§ï¼šåŠ é¦–éƒ¨å°¾éƒ¨</li><li>é€æ˜ä¼ è¾“ï¼šä¸è®ºä»€ä¹ˆæ¯”ç‰¹ç»„åˆï¼Œéƒ½èƒ½ä¼ è¾“</li><li>å·®é”™æ£€æµ‹ï¼šå¾ªç¯å†—ä½™æ£€æµ‹CRC</li></ol><p><strong>ç‚¹å¯¹ç‚¹åè®® PPP (Point-to-Point Protocol) é¢å‘å­—èŠ‚</strong></p><ol><li>ä¸€ä¸ªå°† IP æ•°æ®æŠ¥å°è£…åˆ°ä¸²è¡Œé“¾è·¯çš„æ–¹æ³•</li><li>é“¾è·¯æ§åˆ¶åè®® LCP (Link Control Protocol)</li><li>ç½‘ç»œæ§åˆ¶åè®® NCP (Network Control Protocol)</li></ol><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_4.png"></p><p><strong>å­—ç¬¦å¡«å……ï¼ˆå¼‚æ­¥ä¼ è¾“ï¼‰</strong></p><p>æ¯ä¸€ä¸ª 0x7E å­—èŠ‚è½¬å˜æˆä¸º 2 å­—èŠ‚åºåˆ— (0x7D, 0x5E)</p><p>ä¸€ä¸ª 0x7D çš„å­—èŠ‚, åˆ™å°†å…¶è½¬å˜æˆä¸º 2 å­—èŠ‚åºåˆ— (0x7D, 0x5D)</p><p><strong>é›¶æ¯”ç‰¹å¡«å……ï¼ˆåŒæ­¥ä¼ è¾“ï¼‰</strong></p><p>åœ¨å‘é€ç«¯ï¼Œ5 ä¸ªè¿ç»­ 1ï¼Œåˆ™ç«‹å³å¡«å…¥ä¸€ä¸ª 0</p><p>æ¥æ”¶ç«¯ï¼Œ5 ä¸ªè¿ç»­1ï¼Œå°±æŠŠè¿™ 5 ä¸ªè¿ç»­ 1 åçš„ä¸€ä¸ª 0 åˆ é™¤</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_5.png"></p><p><strong>CSMA&#x2F;CD è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥ &#x2F; ç¢°æ’æ£€æµ‹ (Carrier Sense Multiple Access with Collision Detection)</strong></p><p>(1) å‡†å¤‡å‘é€ã€‚ä½†åœ¨å‘é€ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ£€æµ‹ä¿¡é“ã€‚</p><p>(2) æ£€æµ‹ä¿¡é“ã€‚è‹¥æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²ï¼Œå¹¶åœ¨ 96 æ¯”ç‰¹æ—¶é—´å†…ä¿¡é“ä¿æŒç©ºé—²ï¼ˆä¿è¯äº†å¸§é—´æœ€å°é—´éš”ï¼‰ï¼Œå°±å‘é€è¿™ä¸ªå¸§ã€‚</p><p>(3) æ£€æŸ¥ç¢°æ’ã€‚åœ¨å‘é€è¿‡ç¨‹ä¸­ä»ä¸åœåœ°æ£€æµ‹ä¿¡é“ï¼Œå³ç½‘ç»œé€‚é…å™¨è¦è¾¹å‘é€è¾¹ç›‘å¬ã€‚è¿™é‡Œåªæœ‰ä¸¤ç§å¯èƒ½æ€§ï¼š</p><p>â‘ å‘é€æˆåŠŸï¼šåœ¨äº‰ç”¨æœŸå†…ä¸€ç›´æœªæ£€æµ‹åˆ°ç¢°æ’ã€‚è¿™ä¸ªå¸§è‚¯å®šèƒ½å¤Ÿå‘é€æˆåŠŸã€‚å‘é€å®Œæ¯•åï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åšã€‚ç„¶åå›åˆ° (1)ã€‚</p><p>â‘¡å‘é€å¤±è´¥ï¼šåœ¨äº‰ç”¨æœŸå†…æ£€æµ‹åˆ°ç¢°æ’ã€‚è¿™æ—¶ç«‹å³åœæ­¢å‘é€æ•°æ®ï¼Œå¹¶æŒ‰è§„å®šå‘é€äººä¸ºå¹²æ‰°ä¿¡å·ã€‚é€‚é…å™¨æ¥ç€å°±æ‰§è¡ŒæŒ‡æ•°é€€é¿ç®—æ³•ï¼Œç­‰å¾… r å€ 512 æ¯”ç‰¹æ—¶é—´ï¼ˆ2Ï„ï¼‰åï¼Œè¿”å›åˆ°æ­¥éª¤ (2)ï¼Œç»§ç»­æ£€æµ‹ä¿¡é“ã€‚ä½†è‹¥é‡ä¼ è¾¾ 16 æ¬¡ä»ä¸èƒ½æˆåŠŸï¼Œåˆ™åœæ­¢é‡ä¼ è€Œå‘ä¸ŠæŠ¥é”™ã€‚</p><p>ç«¯åˆ°ç«¯æ—¶å»¶å¿…é¡»å°äºäº‰ç”¨æœŸï¼ˆå‘é€64å­—èŠ‚çš„æ—¶é—´ï¼‰çš„ä¸€åŠï¼</p><h2 id="ä»¥å¤ªç½‘V2MACå¸§æ ¼å¼"><a href="#ä»¥å¤ªç½‘V2MACå¸§æ ¼å¼" class="headerlink" title="ä»¥å¤ªç½‘V2MACå¸§æ ¼å¼"></a><strong>ä»¥å¤ªç½‘V2MACå¸§æ ¼å¼</strong></h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_6.png"></p><h1 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a><strong>ç½‘ç»œå±‚</strong></h1><p><strong>ç½‘ç»œå±‚è®¾å¤‡</strong></p><p>è·¯ç”±å™¨ï¼šå…·æœ‰å¤šä¸ªè¾“å…¥è¾“å‡ºç«¯å£çš„ä¸“ç”¨è®¡ç®—æœºï¼Œè´Ÿè´£è·¯ç”±é€‰æ‹©å’Œåˆ†ç»„è½¬å‘ï¼Œå¯ä»¥éš”ç¦»å†²çªåŸŸå’Œå¹¿æ’­åŸŸã€‚</p><p><strong>ä¸¤ç§æœåŠ¡</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_7.png"></p><p><strong>ARPï¼ˆAddress Resolution Protocolï¼‰åœ°å€è§£æåè®®</strong></p><p>ARP é«˜é€Ÿç¼“å­˜ï¼šå­˜æ”¾æœ€è¿‘è·å¾—çš„ IP åœ°å€åˆ° MAC åœ°å€çš„ç»‘å®šï¼Œä»¥å‡å°‘ ARP å¹¿æ’­çš„æ•°é‡ã€‚ARP æ˜¯è§£å†³åŒä¸€ä¸ªå±€åŸŸç½‘ä¸Šçš„ä¸»æœºæˆ–è·¯ç”±å™¨çš„ IP åœ°å€å’Œç¡¬ä»¶åœ°å€çš„æ˜ å°„é—®é¢˜ã€‚å¦‚æœæ‰€è¦æ‰¾çš„ä¸»æœºå’Œæºä¸»æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸Šï¼Œé‚£ä¹ˆå°±è¦é€šè¿‡ ARP æ‰¾åˆ°ä¸€ä¸ªä½äºæœ¬å±€åŸŸç½‘ä¸Šçš„æŸä¸ªè·¯ç”±å™¨çš„ç¡¬ä»¶åœ°å€ï¼Œç„¶åæŠŠåˆ†ç»„å‘é€ç»™è¿™ä¸ªè·¯ç”±å™¨ï¼Œè®©è¿™ä¸ªè·¯ç”±å™¨æŠŠåˆ†ç»„è½¬å‘ç»™ä¸‹ä¸€ä¸ªç½‘ç»œã€‚å‰©ä¸‹çš„å·¥ä½œå°±ç”±ä¸‹ä¸€ä¸ªç½‘ç»œæ¥åšã€‚</p><p><strong>ICMPï¼ˆInternet Control Message Protocolï¼‰ç½‘ç»œæ§åˆ¶æŠ¥æ–‡åè®®</strong> ICMP å…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šã€‚ 4ç§å·®é”™</p><ol><li>ç»ˆç‚¹ä¸å¯è¾¾ ï¼ˆå¦‚ï¼šç«¯å£é”™è¯¯ï¼‰</li><li>æ—¶é—´è¶…è¿‡</li><li>å‚æ•°é—®é¢˜</li><li>æ”¹å˜è·¯ç”±ï¼ˆé‡å®šå‘ï¼‰(Redirect)</li></ol><p>ping(Packet InterNet Groper) æ˜¯åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘ç»œå±‚ ICMP çš„ä¾‹å­ï¼Œå®ƒæ²¡æœ‰é€šè¿‡è¿è¾“å±‚çš„ TCP æˆ–UDPã€‚</p><p>tracertç”¨æ¥è·Ÿè¸ªä¸€ä¸ªåˆ†ç»„ä»æºç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ã€‚å®ƒåˆ©ç”¨ IP æ•°æ®æŠ¥ä¸­çš„ TTL å­—æ®µå’Œ ICMP æ—¶é—´è¶…è¿‡å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å®ç°å¯¹ä»æºç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„çš„è·Ÿè¸ªã€‚</p><h2 id="IPæ•°æ®æŠ¥é¦–éƒ¨æ ¼å¼"><a href="#IPæ•°æ®æŠ¥é¦–éƒ¨æ ¼å¼" class="headerlink" title="IPæ•°æ®æŠ¥é¦–éƒ¨æ ¼å¼"></a><strong>IPæ•°æ®æŠ¥é¦–éƒ¨æ ¼å¼</strong></h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_8.png"></p><p><strong>IPæ•°æ®æŠ¥åˆ†ç‰‡</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_9.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_10.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_11.png"></p><p><strong>IPæ•°æ®æŠ¥é¦–éƒ¨æ£€éªŒå’Œè®¡ç®—</strong> äºŒè¿›åˆ¶åŠ æ³•å³å¯ï¼Œæœ‰è¿›ä½ï¼Œæœ€ç»ˆç»“æœå–åå†™å…¥</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_12.png"></p><p><strong>IPåˆ†ç±»</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_13.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_14.png"></p><p><strong>å†…éƒ¨ç½‘å…³åè®®</strong> <strong>IGP</strong> (Interior Gateway Protocol) <strong>åŸŸå†…è·¯ç”±é€‰æ‹©</strong> <strong>RIPï¼ˆRouting Information Protocolï¼‰</strong> è·ç¦»å‘é‡ç®—æ³•ï¼šä¸‹ä¸€è·³ç›¸åŒæ—¶ï¼Œè¦æ›´æ–°ï¼›<strong>è·ç¦»ç›¸åŒ</strong>ï¼Œä¸‹ä¸€è·³ä¸åŒæ—¶ï¼Œ<strong>ä¸æ›´æ–°</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_15.png"></p><p>å¥½æ¶ˆæ¯ä¼ æ’­å¾—å¿«ï¼Œåæ¶ˆæ¯ä¼ æ’­å¾—æ…¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_16.png"></p><p><strong>OSPF å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ OSPF (Open Shortest Path First)</strong></p><ol><li>å‘æœ¬è‡ªæ²»ç³»ç»Ÿä¸­æ‰€æœ‰è·¯ç”±å™¨å‘é€ä¿¡æ¯ï¼Œæ´ªæ³›æ³•ã€‚</li><li>å‘é€çš„ä¿¡æ¯å°±æ˜¯ä¸æœ¬è·¯ç”±å™¨ç›¸é‚»çš„æ‰€æœ‰è·¯ç”±å™¨çš„<strong>é“¾è·¯çŠ¶æ€</strong>ï¼Œä½†è¿™åªæ˜¯è·¯ç”±å™¨æ‰€çŸ¥é“çš„éƒ¨åˆ†ä¿¡æ¯ã€‚</li><li>â€œé“¾è·¯çŠ¶æ€â€å°±æ˜¯è¯´æ˜æœ¬è·¯ç”±å™¨éƒ½**å’Œå“ªäº›è·¯ç”±å™¨ç›¸é‚»ï¼Œ**ä»¥åŠè¯¥é“¾è·¯çš„â€<strong>åº¦é‡</strong>â€œ(metric)ã€‚</li><li>åªæœ‰å½“é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè·¯ç”±å™¨æ‰ç”¨æ´ªæ³›æ³•å‘æ‰€æœ‰è·¯ç”±å™¨å‘é€æ­¤ä¿¡æ¯ã€‚</li></ol><p>ä¸ºäº†ä½¿ OSPF èƒ½å¤Ÿç”¨äºè§„æ¨¡å¾ˆå¤§çš„ç½‘ç»œï¼ŒOSPF å°†ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå«åš<strong>åŒºåŸŸ</strong>ã€‚ <strong>å¤–éƒ¨ç½‘å…³åè®® EGP (External Gateway Protocol) åŸŸé—´è·¯ç”±é€‰æ‹©</strong></p><p>BGP æ˜¯ä¸åŒè‡ªæ²»ç³»ç»Ÿçš„è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯çš„åè®®ã€‚</p><p>BGP åè®®äº¤æ¢è·¯ç”±ä¿¡æ¯çš„ç»“ç‚¹æ•°é‡çº§æ˜¯<strong>è‡ªæ²»ç³»ç»Ÿæ•°çš„é‡çº§</strong>ï¼Œè¿™è¦æ¯”è¿™äº›è‡ªæ²»ç³»ç»Ÿä¸­çš„ç½‘ç»œæ•°å°‘å¾ˆå¤šã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_17.png"></p><p><strong>è™šæ‹Ÿä¸“ç”¨ç½‘VPN</strong></p><p>ä¸“ç”¨åœ°å€åªèƒ½ç”¨ä½œæœ¬åœ°åœ°å€è€Œä¸èƒ½ç”¨ä½œå…¨çƒåœ°å€ã€‚åœ¨äº’è”ç½‘ä¸­çš„æ‰€æœ‰è·¯ç”±å™¨ï¼Œå¯¹ç›®çš„åœ°å€æ˜¯ä¸“ç”¨åœ°å€çš„æ•°æ®æŠ¥ä¸€å¾‹ä¸è¿›è¡Œè½¬å‘ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_18.png"></p><p>åˆ©ç”¨å…¬ç”¨çš„äº’è”ç½‘ä½œä¸ºæœ¬æœºæ„å„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“ï¼Œè¿™æ ·çš„ä¸“ç”¨ç½‘åˆç§°ä¸ºè™šæ‹Ÿä¸“ç”¨ç½‘VPN (Virtual Private Network)ã€‚</p><p><strong>ç½‘ç»œåœ°å€è½¬æ¢ NAT (Network Address Translation)</strong></p><p>ä½¿ç”¨ç«¯å£å·çš„ NAT å«åšç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢NAPT (Network Address and Port Translation)ï¼Œè€Œä¸ä½¿ç”¨ç«¯å£å·çš„ NAT å°±å«åšä¼ ç»Ÿçš„ NAT (traditional NAT)ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_19.png"></p><h1 id="è¿è¾“å±‚"><a href="#è¿è¾“å±‚" class="headerlink" title="è¿è¾“å±‚"></a><strong>è¿è¾“å±‚</strong></h1><p><strong>ç«¯å£å¤ç”¨åˆ†ç”¨</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_20.png"></p><p><strong>æœåŠ¡å™¨ç«¯å£</strong> ç†ŸçŸ¥ç«¯å£ï¼Œæ•°å€¼ä¸€èˆ¬ä¸º 0~1023ã€‚</p><p>ç™»è®°ç«¯å£å·ï¼Œæ•°å€¼ä¸º 1024~49151ï¼Œä¸ºæ²¡æœ‰ç†ŸçŸ¥ç«¯å£å·çš„åº”ç”¨ç¨‹åºä½¿ç”¨çš„ã€‚ä½¿ç”¨è¿™ä¸ªèŒƒå›´çš„ç«¯å£å·å¿…é¡»åœ¨ IANA ç™»è®°ï¼Œä»¥é˜²æ­¢é‡å¤ã€‚</p><p><strong>å®¢æˆ·ç«¯ç«¯å£</strong> åˆç§°ä¸ºçŸ­æš‚ç«¯å£å·ï¼Œæ•°å€¼ä¸º 49152~65535ã€‚ <strong>å¸¸ç”¨ç«¯å£</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_21.png"></p><p><strong>ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP</strong></p><p>æ— è¿æ¥ã€å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ã€é¢å‘æŠ¥æ–‡ï¼ˆåº”ç”¨å±‚ç»™çš„æŠ¥æ–‡ï¼Œä¸åˆå¹¶ä¸æ‹†åˆ†ï¼‰</p><p>æ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œé€‚åˆå®æ—¶é€šä¿¡</p><p>æ”¯æŒä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€ã€å¤šå¯¹å¤šäº¤äº’é€šä¿¡</p><p><strong>åº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡</strong></p><p>è‹¥æŠ¥æ–‡å¤ªé•¿ï¼ŒUDP æŠŠå®ƒäº¤ç»™ IP å±‚åï¼ŒIP å±‚åœ¨ä¼ é€æ—¶å¯èƒ½è¦è¿›è¡Œåˆ†ç‰‡ï¼Œè¿™ä¼šé™ä½ IP å±‚çš„æ•ˆç‡ã€‚</p><p>è‹¥æŠ¥æ–‡å¤ªçŸ­ï¼ŒUDP æŠŠå®ƒäº¤ç»™ IP å±‚åï¼Œä¼šä½¿ IP æ•°æ®æŠ¥çš„é¦–éƒ¨çš„ç›¸å¯¹é•¿åº¦å¤ªå¤§ï¼Œè¿™ä¹Ÿé™ä½äº† IP å±‚çš„æ•ˆç‡ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_22.png"></p><h2 id="UDPé¦–éƒ¨æ ¼å¼"><a href="#UDPé¦–éƒ¨æ ¼å¼" class="headerlink" title="UDPé¦–éƒ¨æ ¼å¼"></a><strong>UDPé¦–éƒ¨æ ¼å¼</strong></h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_23.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_24.png"></p><p><strong>ä¼ è¾“æ§åˆ¶åè®®TCP</strong></p><p>ç‚¹å¯¹ç‚¹ã€é¢å‘è¿æ¥ã€å…¨åŒå·¥ã€é¢å‘å­—èŠ‚</p><p>æ ¹æ®å¯¹æ–¹ç»™å‡ºçš„çª—å£å€¼å’Œç½‘ç»œæ‹¥å¡ç¨‹åº¦æ¥å†³å®šæŠ¥æ–‡æ®µçš„å­—èŠ‚æ•°</p><p><strong>TCP è¿æ¥çš„ç«¯ç‚¹å«åšå¥—æ¥å­— (socket) æˆ–æ’å£</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_25.png"></p><h2 id="TCPé¦–éƒ¨æ ¼å¼"><a href="#TCPé¦–éƒ¨æ ¼å¼" class="headerlink" title="TCPé¦–éƒ¨æ ¼å¼"></a><strong>TCPé¦–éƒ¨æ ¼å¼</strong></h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_26.png"></p><p><strong>å¯é ä¼ è¾“çš„åŸç†ï¼ˆåœæ­¢ç­‰å¾…å’Œè¿ç»­ARQï¼‰</strong> <strong>åœæ­¢ç­‰å¾…</strong>ï¼šæ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ã€‚ **è¶…æ—¶é‡ä¼ ï¼š**è‡ªåŠ¨é‡ä¼ è¯·æ±‚ ARQ (Automatic Repeat reQuest)</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_27.png"></p><p><strong>å¯é ä¼ è¾“çš„å®ç°ï¼ˆæ»‘åŠ¨çª—å£ã€è¶…æ—¶é‡ä¼ æ—¶é—´é€‰æ‹©ã€é€‰æ‹©ç¡®è®¤SACKï¼‰</strong> <strong>æ»‘åŠ¨çª—å£</strong></p><p>å‘é€çª—å£+æ¥æ”¶çª—å£&lt;&#x3D;2^ï¼ˆåºå·ä½æ•°ï¼‰</p><p>å‘é€çª—å£çš„ä¸Šé™å€¼ = Min [rwnd, cwnd]</p><p>å‘é€æ–¹ï¼šä½äºå‘é€çª—å£å†…çš„åˆ†ç»„éƒ½å¯è¿ç»­å‘é€å‡ºå»ï¼Œè€Œä¸éœ€è¦ç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œå°±æŠŠå‘é€çª—å£å‘å‰æ»‘åŠ¨ä¸€ä¸ªåˆ†ç»„çš„ä½ç½®ã€‚</p><p>æ¥æ”¶æ–¹ï¼šå¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ã€‚</p><p><strong>Go-back-Nï¼ˆå›é€€ Nï¼‰</strong></p><p>å¦‚æœå‘é€æ–¹å‘é€äº†å‰ 5 ä¸ªåˆ†ç»„ï¼Œè€Œä¸­é—´çš„ç¬¬ 3 ä¸ªåˆ†ç»„ä¸¢å¤±äº†ã€‚è¿™æ—¶æ¥æ”¶æ–¹åªèƒ½å¯¹å‰ä¸¤ä¸ªåˆ†ç»„å‘å‡ºç¡®è®¤ã€‚å‘é€æ–¹æ— æ³•çŸ¥é“åé¢ä¸‰ä¸ªåˆ†ç»„çš„ä¸‹è½ï¼Œè€Œåªå¥½æŠŠåé¢çš„ä¸‰ä¸ªåˆ†ç»„éƒ½å†é‡ä¼ ä¸€æ¬¡ã€‚</p><p><strong>åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTS</strong></p><p>æ–°çš„RTTS = (1 - a) Â´ (æ—§çš„RTTS) + a Â´ (æ–°çš„RTTæ ·æœ¬) a &#x3D; 1&#x2F;8</p><p><strong>RTTçš„åå·®çš„åŠ æƒå¹³å‡å€¼RTTD</strong></p><p>ç¬¬ä¸€æ¬¡æµ‹é‡æ—¶ï¼ŒRTTD å€¼å–ä¸ºæµ‹é‡åˆ°çš„ RTT æ ·æœ¬å€¼çš„ä¸€åŠ</p><p>æ–°çš„ RTTD &#x3D; (1 - b) Â´ (æ—§çš„RTTD) + b Â´ Â½RTTS - æ–°çš„ RTT æ ·æœ¬Â½ Î²&#x3D;0.25</p><p><strong>è¶…æ—¶é‡ä¼ æ—¶é—´RTO</strong></p><p>RTO = RTTS + 4 Â´ RTTD</p><p><strong>TCPæ‹¥å¡æ§åˆ¶ç®—æ³•</strong></p><ol><li><p><strong>æ…¢å¼€å§‹</strong> (slow-start)</p><p>æ‹¥å¡çª—å£cwndæ¯æ¬¡çš„å¢åŠ é‡ &#x3D; min (N, SMSS)</p><p>N æ˜¯åŸå…ˆæœªè¢«ç¡®è®¤çš„ã€ä½†ç°åœ¨è¢«åˆšæ”¶åˆ°çš„ç¡®è®¤æŠ¥æ–‡æ®µæ‰€ç¡®è®¤çš„å­—èŠ‚æ•°</p><p>æ…¢å¼€å§‹é—¨é™ ssthresh çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><p>å½“ cwnd &lt; ssthresh æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ã€‚</p><p>å½“ cwnd &gt; ssthresh æ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•è€Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚</p><p>å½“ cwnd &#x3D; ssthresh æ—¶ï¼Œæ—¢å¯ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼Œä¹Ÿå¯ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚</p></li><li><p><strong>æ‹¥å¡é¿å…</strong> (congestion avoidance)</p><p>æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´ RTT å°±æŠŠå‘é€æ–¹çš„æ‹¥å¡çª—å£ cwnd åŠ  1ï¼Œ<strong>åŠ æ³•å¢å¤§</strong></p></li></ol><p>æ— è®ºåœ¨æ…¢å¼€å§‹é˜¶æ®µè¿˜æ˜¯åœ¨æ‹¥å¡é¿å…é˜¶æ®µï¼Œåªè¦å‘é€æ–¹åˆ¤æ–­ç½‘ç»œå‡ºç°æ‹¥å¡ï¼ˆé‡ä¼ å®šæ—¶å™¨è¶…æ—¶ï¼‰ï¼š ssthresh &#x3D; max(cwnd&#x2F;2ï¼Œ2) cwnd &#x3D; 1 æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•</p><ol><li><p><strong>å¿«é‡ä¼ </strong> (fast retransmit)</p><p>åªè¦ä¸€è¿æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±çŸ¥é“æ¥æ”¶æ–¹ç¡®å®æ²¡æœ‰æ”¶åˆ°æŠ¥æ–‡æ®µï¼Œå› è€Œåº”å½“ç«‹å³è¿›è¡Œé‡ä¼ ï¼ˆå³â€å¿«é‡ä¼ â€ï¼‰</p></li><li><p><strong>å¿«æ¢å¤</strong> (fast recovery)</p></li></ol><p>æ”¶åˆ°è¿ç»­ä¸‰ä¸ªé‡å¤çš„ç¡®è®¤æ—¶ï¼Œå¾ˆå¯èƒ½æ²¡æœ‰å‘ç”Ÿæ‹¥å¡ï¼Œæ‰§è¡Œå¿«æ¢å¤ç®—æ³•</p><p>ssthresh &#x3D; å½“å‰æ‹¥å¡çª—å£ cwnd &#x2F; 2</p><p>cwnd &#x3D; æ…¢å¼€å§‹é—¨é™ ssthresh <strong>ä¹˜æ³•å‡å°</strong></p><p>æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_28.png"></p><p><strong>å…¨å±€åŒæ­¥</strong></p><p>ç½‘ç»œä¸­é€šå¸¸æœ‰å¾ˆå¤šçš„ TCP è¿æ¥ï¼Œè¿™äº›è¿æ¥ä¸­çš„æŠ¥æ–‡æ®µé€šå¸¸æ˜¯å¤ç”¨åœ¨ç½‘ç»œå±‚çš„ IP æ•°æ®æŠ¥ä¸­ä¼ é€çš„ï¼Œè‹¥å‘ç”Ÿäº†è·¯ç”±å™¨ä¸­çš„å°¾éƒ¨ä¸¢å¼ƒï¼Œå°±å¯èƒ½ä¼šåŒæ—¶å½±å“åˆ°å¾ˆå¤šæ¡ TCP è¿æ¥ï¼Œç»“æœä½¿è¿™è®¸å¤š TCP è¿æ¥åœ¨åŒä¸€æ—¶é—´çªç„¶éƒ½è¿›å…¥åˆ°æ…¢å¼€å§‹çŠ¶æ€ã€‚è¿™åœ¨ TCP çš„æœ¯è¯­ä¸­ç§°ä¸ºå…¨å±€åŒæ­¥ (global syncronization)ã€‚</p><p><strong>ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†AQM</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_29.png"></p><p><strong>TCPçš„è¿è¾“é“¾æ¥ç®¡ç†</strong>ï¼ˆå®¢æˆ·æœåŠ¡å™¨æ–¹å¼ï¼‰ <strong>è¿æ¥å»ºç«‹ï¼šä¸‰æŠ¥æ–‡æ¡æ‰‹</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_30.png"></p><p><strong>è¿æ¥é‡Šæ”¾ï¼šå››æŠ¥æ–‡æ¡æ‰‹</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_31.png"></p><h1 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a><strong>åº”ç”¨å±‚</strong></h1><p><strong>åŸŸåç³»ç»ŸDNS(Domain Name System)</strong> â€¦ . ä¸‰çº§åŸŸå . äºŒçº§åŸŸå . é¡¶çº§åŸŸå <strong>é¡¶çº§åŸŸå</strong> .comÂ Â Â Â ï¼ˆå…¬å¸å’Œä¼ä¸šï¼‰ .netÂ Â Â Â ï¼ˆç½‘ç»œæœåŠ¡æœºæ„ .orgÂ Â Â Â ï¼ˆéèµ¢åˆ©æ€§ç»„ç»‡ï¼‰ .eduÂ Â Â Â ï¼ˆç¾å›½ä¸“ç”¨çš„æ•™è‚²æœºæ„ï¼‰ .govÂ Â Â Â ï¼ˆç¾å›½ä¸“ç”¨çš„æ”¿åºœéƒ¨é—¨ï¼‰ .milÂ Â Â Â ï¼ˆç¾å›½ä¸“ç”¨çš„å†›äº‹éƒ¨é—¨ï¼‰ .intÂ Â Â Â ï¼ˆå›½é™…ç»„ç»‡ï¼‰ .arpa ï¼ˆåŸºç¡€ç»“æ„åŸŸåï¼Œç”¨äºåå‘åŸŸåè§£æï¼‰ <strong>åŸŸåæœåŠ¡å™¨</strong> æ ¹åŸŸåæœåŠ¡å™¨ é¡¶çº§åŸŸåæœåŠ¡å™¨ æƒé™åŸŸåæœåŠ¡å™¨ æœ¬åœ°åŸŸåæœåŠ¡å™¨ <strong>æœ¬åœ°åŸŸåæœåŠ¡å™¨è¿­ä»£æŸ¥è¯¢</strong>ï¼ˆæˆ‘ä¸çŸ¥é“ï¼Œä½ æ‰¾å¼ ä¸‰å§ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_32.png"></p><p><strong>æœ¬åœ°åŸŸåæœåŠ¡å™¨é€’å½’æŸ¥è¯¢</strong>ï¼ˆè¡Œï¼Œæˆ‘å»å¸®ä½ é—®ï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_33.png"></p><p><strong>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ URL</strong> (Uniform Resource Locator) æ¥æ ‡å¿—ä¸‡ç»´ç½‘ä¸Šçš„å„ç§æ–‡æ¡£ã€‚ åœ¨ä¸‡ç»´ç½‘å®¢æˆ·ç¨‹åºä¸ä¸‡ç»´ç½‘æœåŠ¡å™¨ç¨‹åºä¹‹é—´è¿›è¡Œäº¤äº’æ‰€ä½¿ç”¨çš„åè®®ï¼Œæ˜¯<strong>è¶…æ–‡æœ¬ä¼ é€åè®®</strong> <strong>HTTP (HyperText Transfer Protocol)</strong>ã€‚</p><p>HTTP æ˜¯é¢å‘äº‹åŠ¡çš„å®¢æˆ·æœåŠ¡å™¨åè®®ã€‚</p><p>HTTP 1.0 åè®®æ˜¯æ— çŠ¶æ€çš„ (stateless)ã€‚</p><p>HTTP åè®®æœ¬èº«ä¹Ÿæ˜¯æ— è¿æ¥çš„ï¼Œè™½ç„¶å®ƒä½¿ç”¨äº†é¢å‘è¿æ¥çš„ TCP å‘ä¸Šæä¾›çš„æœåŠ¡ã€‚</p><p>HTTP&#x2F;1.1 åè®®ä½¿ç”¨æŒç»­è¿æ¥ (persistent connection)ã€‚</p><p><strong>è¯·æ±‚ä¸€ä¸ªä¸‡ç»´ç½‘æ–‡æ¡£æ‰€éœ€çš„æ—¶é—´</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_34.png"></p><p><strong>ä»£ç†æœåŠ¡å™¨ (proxy server)</strong> åˆç§°ä¸ºä¸‡ç»´ç½‘é«˜é€Ÿç¼“å­˜ (Web cache)</p><p>å®ƒä»£è¡¨æµè§ˆå™¨å‘å‡º HTTP è¯·æ±‚</p><p>ä¸‡ç»´ç½‘é«˜é€Ÿç¼“å­˜æŠŠæœ€è¿‘çš„ä¸€äº›è¯·æ±‚å’Œå“åº”æš‚å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸­ã€‚</p><p>å½“ä¸æš‚æ—¶å­˜æ”¾çš„è¯·æ±‚ç›¸åŒçš„æ–°è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä¸‡ç»´ç½‘é«˜é€Ÿç¼“å­˜å°±æŠŠæš‚å­˜çš„å“åº”å‘é€å‡ºå»ï¼Œè€Œä¸éœ€è¦æŒ‰ URL çš„åœ°å€å†å»äº’è”ç½‘è®¿é—®è¯¥èµ„æº</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_35.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_36.png"></p><p><strong>HTTPçŠ¶æ€ç </strong></p><p>1xx è¡¨ç¤ºé€šçŸ¥ä¿¡æ¯çš„ï¼Œå¦‚è¯·æ±‚æ”¶åˆ°äº†æˆ–æ­£åœ¨è¿›è¡Œå¤„ç†ã€‚</p><p>2xx è¡¨ç¤ºæˆåŠŸï¼Œå¦‚æ¥å—æˆ–çŸ¥é“äº†ã€‚</p><p>3xx è¡¨ç¤ºé‡å®šå‘ï¼Œè¡¨ç¤ºè¦å®Œæˆè¯·æ±‚è¿˜å¿…é¡»é‡‡å–è¿›ä¸€æ­¥çš„è¡ŒåŠ¨ã€‚</p><p>4xx è¡¨ç¤ºå®¢æˆ·çš„å·®é”™ï¼Œå¦‚è¯·æ±‚ä¸­æœ‰é”™è¯¯çš„è¯­æ³•æˆ–ä¸èƒ½å®Œæˆã€‚</p><p>5xx è¡¨ç¤ºæœåŠ¡å™¨çš„å·®é”™ï¼Œå¦‚æœåŠ¡å™¨å¤±æ•ˆæ— æ³•å®Œæˆè¯·æ±‚ã€‚</p><p><strong>ç”µå­é‚®ä»¶</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_37.png"></p><p><strong>SMTP</strong></p><p>SMTP ä¸èƒ½ä¼ é€å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…¶ä»–çš„äºŒè¿›åˆ¶å¯¹è±¡ã€‚</p><p>SMTP é™äºä¼ é€ 7 ä½çš„ ASCII ç </p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_38.png"></p><p><strong>MIME</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_39.png"></p><p><strong>ç½‘ç»œå®‰å…¨</strong></p><p><strong>æ•°æ®åŠ å¯†æ¨¡å‹</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_40.png"></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_41.png"></p><p><strong>å¯¹ç§°å¯†é’¥å¯†ç ä½“åˆ¶</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_42.png"></p><p><strong>å…¬é’¥å¯†ç ä½“åˆ¶</strong></p><p>åŠ å¯†å¯†é’¥(å³å…¬é’¥) PK æ˜¯å…¬å¼€ä¿¡æ¯ï¼Œè€Œè§£å¯†å¯†é’¥(å³ç§é’¥æˆ–ç§˜é’¥) SK æ˜¯éœ€è¦ä¿å¯†çš„ã€‚</p><p>åŠ å¯†ç®—æ³• E å’Œè§£å¯†ç®—æ³• D ä¹Ÿéƒ½æ˜¯å…¬å¼€çš„ã€‚</p><p>è™½ç„¶ç§˜é’¥ SK æ˜¯ç”±å…¬é’¥ PK å†³å®šçš„ï¼Œä½†å´ä¸èƒ½æ ¹æ® PK è®¡ç®—å‡º SKã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_43.png"></p><p><strong>æ•°å­—ç­¾å</strong> ï®Â Â Â Â å¦‚æœæŸä¸€ä¿¡æ¯ç”¨å…¬å¼€å¯†é’¥åŠ å¯†ï¼Œåˆ™å¿…é¡»ç”¨ç§æœ‰å¯†é’¥è§£å¯†ï¼Œè¿™å°±æ˜¯å®ç°ä¿å¯†çš„æ–¹æ³• ï®Â Â Â Â å¦‚æœæŸä¸€ä¿¡æ¯ç”¨ç§æœ‰å¯†é’¥åŠ å¯†ï¼Œé‚£ä¹ˆï¼Œå®ƒå¿…é¡»ç”¨å…¬å¼€å¯†é’¥è§£å¯†ã€‚è¿™å°±æ˜¯å®ç°æ•°å­—ç­¾åçš„æ–¹æ³• <strong>é‰´åˆ«</strong></p><p>åœ¨ä¿¡æ¯çš„å®‰å…¨é¢†åŸŸä¸­ï¼Œå¯¹ä»˜è¢«åŠ¨æ”»å‡»çš„é‡è¦æªæ–½æ˜¯åŠ å¯†ï¼Œè€Œå¯¹ä»˜ä¸»åŠ¨æ”»å‡»ä¸­çš„ç¯¡æ”¹å’Œä¼ªé€ åˆ™è¦ç”¨é‰´åˆ« (authentication) ã€‚</p><p>æŠ¥æ–‡é‰´åˆ«ä½¿å¾—é€šä¿¡çš„æ¥æ”¶æ–¹èƒ½å¤ŸéªŒè¯æ‰€æ”¶åˆ°çš„æŠ¥æ–‡ï¼ˆå‘é€è€…å’ŒæŠ¥æ–‡å†…å®¹ã€å‘é€æ—¶é—´ã€åºåˆ—ç­‰ï¼‰çš„çœŸä¼ªã€‚</p><p>æ•°å­—ç­¾åå¯ä»¥å®ç°é‰´åˆ«ï¼Œä½†ä»£ä»·è¾ƒå¤§ã€‚</p><p><strong>å¯†ç æ•£åˆ—å‡½æ•°</strong> (cryptographic hash function)æ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„å¯¹æŠ¥æ–‡è¿›è¡Œé‰´åˆ«çš„æ–¹æ³•ã€‚ ï®Â Â Â Â (1) æ•£åˆ—å‡½æ•°çš„è¾“å…¥é•¿åº¦å¯ä»¥å¾ˆé•¿ï¼Œä½†å…¶è¾“å‡ºé•¿åº¦åˆ™æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”è¾ƒçŸ­ã€‚æ•£åˆ—å‡½æ•°çš„è¾“å‡ºå«åšæ•£åˆ—å€¼ï¼Œæˆ–æ›´ç®€å•äº›ï¼Œç§°ä¸ºæ•£åˆ—ã€‚ ï®Â Â Â Â (2) ä¸åŒçš„æ•£åˆ—å€¼è‚¯å®šå¯¹åº”äºä¸åŒçš„è¾“å…¥ï¼Œä½†ä¸åŒçš„è¾“å…¥å´å¯èƒ½å¾—å‡ºç›¸åŒçš„æ•£åˆ—å€¼ã€‚è¿™å°±æ˜¯è¯´ï¼Œæ•£åˆ—å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºå¹¶éä¸€ä¸€å¯¹åº”çš„ï¼Œè€Œæ˜¯å¤šå¯¹ä¸€çš„ã€‚ <strong>å¯†é’¥åˆ†é…</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/11/112820_0411_44.png"></p><p><strong>é˜²ç«å¢™</strong></p><p>é˜²ç«å¢™æ˜¯ç”±è½¯ä»¶ã€ç¡¬ä»¶æ„æˆçš„ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç¼–ç¨‹çš„è·¯ç”±å™¨ï¼Œç”¨æ¥åœ¨ä¸¤ä¸ªç½‘ç»œä¹‹é—´å®æ–½è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚</p><p>åŠŸèƒ½æœ‰ä¸¤ä¸ªï¼šé˜»æ­¢å’Œå…è®¸ã€‚</p><p>ï®Â Â Â Â â€œé˜»æ­¢â€å°±æ˜¯é˜»æ­¢æŸç§ç±»å‹çš„é€šä¿¡é‡é€šè¿‡é˜²ç«å¢™ï¼ˆä»å¤–éƒ¨ç½‘ç»œåˆ°å†…éƒ¨ç½‘ç»œï¼Œæˆ–åè¿‡æ¥ï¼‰ã€‚</p><p>ï®Â Â Â Â â€œå…è®¸â€çš„åŠŸèƒ½ä¸â€é˜»æ­¢â€æ°å¥½ç›¸åã€‚</p><p><strong>å…¥ä¾µæ£€æµ‹IDS (Intrusion Detection System)</strong></p><p>ï®Â Â Â Â IDS å¯¹è¿›å…¥ç½‘ç»œçš„åˆ†ç»„æ‰§è¡Œæ·±åº¦åˆ†ç»„æ£€æŸ¥ï¼Œå½“è§‚å¯Ÿåˆ°å¯ç–‘åˆ†ç»„æ—¶ï¼Œå‘ç½‘ç»œç®¡ç†å‘˜å‘å‡ºå‘Šè­¦æˆ–æ‰§è¡Œé˜»æ–­æ“ä½œï¼ˆç”±äº IDS çš„â€è¯¯æŠ¥â€ç‡é€šå¸¸è¾ƒé«˜ï¼Œå¤šæ•°æƒ…å†µä¸æ‰§è¡Œè‡ªåŠ¨é˜»æ–­ï¼‰ã€‚</p><p>ï®Â Â Â Â åŸºäºç‰¹å¾çš„ IDS <strong>ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰å·²çŸ¥æ”»å‡»æ ‡å¿—æ€§ç‰¹å¾çš„æ•°æ®åº“</strong>ã€‚</p><p>ï®Â Â Â Â åŸºäºå¼‚å¸¸çš„ IDS é€šè¿‡è§‚å¯Ÿæ­£å¸¸è¿è¡Œçš„ç½‘ç»œæµé‡ï¼Œå­¦ä¹ æ­£å¸¸æµé‡çš„ç»Ÿè®¡ç‰¹æ€§å’Œè§„å¾‹ã€‚å½“æ£€æµ‹åˆ°ç½‘ç»œä¸­æµé‡æŸç§ç»Ÿè®¡è§„å¾‹ä¸ç¬¦åˆæ­£å¸¸æƒ…å†µæ—¶ï¼Œåˆ™è®¤ä¸ºå¯èƒ½å‘ç”Ÿäº†å…¥ä¾µè¡Œä¸ºã€‚</p><p>ï®Â Â Â Â è‡³ä»Šä¸ºæ­¢ï¼Œå¤§å¤šæ•°éƒ¨ç½²çš„ IDS <strong>ä¸»è¦æ˜¯åŸºäºç‰¹å¾çš„</strong>ï¼Œå°½ç®¡æŸäº› IDS åŒ…æ‹¬äº†æŸäº›åŸºäºå¼‚å¸¸çš„ç‰¹æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Servletå…è®¸è·¨åŸŸè®¿é—®ï¼ˆAjaxè¯·æ±‚Servletæ•°æ®ï¼‰</title>
    <link href="/2020/09/21/elementor-servletajaxservlet/"/>
    <url>/2020/09/21/elementor-servletajaxservlet/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ç”¨Servletå†™è¿‡ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ç®¡ç†çš„æœåŠ¡ç«¯ç¨‹åºï¼Œæ˜¯ç”¨äºå®‰å“appä¸Šçš„HTTPè¯·æ±‚ï¼Œç°åœ¨æƒ³æŠŠè¿™ä¸ªå®¢æˆ·ç«¯éƒ¨åˆ†å†…å®¹åœ¨ç½‘é¡µé‡ç°ï¼Œå°è¯•ç”¨Ajaxè¯·æ±‚urlä¸ºâ€œxxx.doâ€çš„æ•°æ®å‘ç°ä¸è¡Œï¼Œæµè§ˆå™¨å¼€å‘è€…æ¨¡å¼æç¤ºä¸å…è®¸è·¨åŸŸè®¿é—®ã€‚</p><p>äºæ˜¯åœ¨Javaä»£ç HttpServletResponseå¤„æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œä½¿ç”¨ CORSåè®®å…è®¸Â <code>Response</code>Â è·¨åŸŸã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-31.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å…è®¸è·¨åŸŸçš„ä¸»æœºåœ°å€ */</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;*&quot;</span>);  </span><br><span class="line"><span class="comment">/* å…è®¸è·¨åŸŸçš„è¯·æ±‚æ–¹æ³•GET, POST, HEAD ç­‰ */</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;*&quot;</span>);  </span><br><span class="line"><span class="comment">/* é‡æ–°é¢„æ£€éªŒè·¨åŸŸçš„ç¼“å­˜æ—¶é—´ (s) */</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Max-Age&quot;</span>, <span class="string">&quot;3600&quot;</span>);  </span><br><span class="line"><span class="comment">/* å…è®¸è·¨åŸŸçš„è¯·æ±‚å¤´ */</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;*&quot;</span>);  </span><br><span class="line"><span class="comment">/* æ˜¯å¦æºå¸¦cookie */</span></span><br><span class="line">response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);  </span><br></pre></td></tr></table></figure><p>å†æ¬¡å°è¯•Ajaxè¯·æ±‚ï¼Œå°±å¯ä»¥æ‹¿åˆ°servletçš„æ•°æ®å•¦</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-32-1024x225.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">loadXMLDoc</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> xmlhttp;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// IE7+, Firefox, Chrome, Opera, Safari æµè§ˆå™¨æ‰§è¡Œä»£ç </span></span></span><br><span class="line"><span class="language-javascript">xmlhttp=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// IE6, IE5 æµè§ˆå™¨æ‰§è¡Œä»£ç </span></span></span><br><span class="line"><span class="language-javascript">xmlhttp=<span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">xmlhttp.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (xmlhttp.<span class="property">readyState</span>==<span class="number">4</span> &amp;&amp; xmlhttp.<span class="property">status</span>==<span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myDiv&quot;</span>).<span class="property">innerHTML</span>=xmlhttp.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">xmlhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;http://xxxxxxxx/xxx.do&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">xmlhttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>AJAX<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;loadXMLDoc()&quot;</span>&gt;</span>è¯·æ±‚æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myDiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å“ˆå¤«æ›¼æ ‘ï¼Œç¼–ç è§£ç </title>
    <link href="/2020/09/19/%E5%93%88%E5%A4%AB%E6%9B%BC%E6%A0%91%EF%BC%8C%E7%BC%96%E7%A0%81%E8%A7%A3%E7%A0%81/"/>
    <url>/2020/09/19/%E5%93%88%E5%A4%AB%E6%9B%BC%E6%A0%91%EF%BC%8C%E7%BC%96%E7%A0%81%E8%A7%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>ç»™å®šNä¸ªæƒå€¼ä½œä¸ºNä¸ª<a href="https://baike.baidu.com/item/%E5%8F%B6%E5%AD%90%E7%BB%93%E7%82%B9/3620239">å¶å­ç»“ç‚¹</a>ï¼Œæ„é€ ä¸€æ£µäºŒå‰æ ‘ï¼Œè‹¥è¯¥æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦è¾¾åˆ°æœ€å°ï¼Œç§°è¿™æ ·çš„äºŒå‰æ ‘ä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œä¹Ÿç§°ä¸ºå“ˆå¤«æ›¼æ ‘(Huffman Tree)ã€‚å“ˆå¤«æ›¼æ ‘æ˜¯å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„æ ‘ï¼Œæƒå€¼è¾ƒå¤§çš„ç»“ç‚¹ç¦»æ ¹è¾ƒè¿‘ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-22.png"></p><h4 id="æ ‘ç»“æ„"><a href="#æ ‘ç»“æ„" class="headerlink" title="æ ‘ç»“æ„"></a>æ ‘ç»“æ„</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">char</span> c;     <span class="comment">//å­—ç¬¦</span></span><br><span class="line">    <span class="type">int</span> weight; <span class="comment">//æƒé‡</span></span><br><span class="line">    Node *left;</span><br><span class="line">    Node *right;</span><br><span class="line">    Node *parent;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">char</span> cc, <span class="type">int</span> w) <span class="comment">//å¶å­èŠ‚ç‚¹æ„é€ å‡½æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        c = cc;</span><br><span class="line">        weight = w;</span><br><span class="line">        left = <span class="literal">NULL</span>;</span><br><span class="line">        right = <span class="literal">NULL</span>;</span><br><span class="line">        parent = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> w, Node *l, Node *r, Node *p) <span class="comment">//éå¶å­èŠ‚ç‚¹æ„é€ å‡½æ•°</span></span><br><span class="line">    &#123;</span><br><span class="line">        c = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        weight = w;</span><br><span class="line">        left = l;</span><br><span class="line">        right = r;</span><br><span class="line">        parent = p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HuffmanTree</span></span><br><span class="line">&#123;</span><br><span class="line">    Node *root;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">HuffmanTree</span>() &#123; root = <span class="literal">NULL</span>; &#125;</span><br><span class="line">    ~<span class="built_in">HuffmanTree</span>() &#123; <span class="built_in">release</span>(root); &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">release</span><span class="params">(Node *root)</span></span>;        <span class="comment">//ç”¨äºææ„é‡Šæ”¾å†…å­˜</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setTree</span><span class="params">(vector&lt;Node *&gt; &amp;v)</span></span>; <span class="comment">//ç”Ÿæˆå“ˆå¤«æ›¼æ ‘</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">enCode</span><span class="params">(string s)</span></span>;           <span class="comment">//ç¼–ç </span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">deCode</span><span class="params">(string str)</span></span>;         <span class="comment">//è§£ç </span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="æ„é€ æ ‘"><a href="#æ„é€ æ ‘" class="headerlink" title="æ„é€ æ ‘"></a>æ„é€ æ ‘</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">HuffmanTree::setTree</span><span class="params">(vector&lt;Node *&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//ä¼ å…¥å‚æ•°ä¸ºèŠ‚ç‚¹å‘é‡ï¼Œç»“åˆæµ‹è¯•ç”¨ä¾‹çœ‹</span></span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">int</span>(v.<span class="built_in">size</span>() != <span class="number">1</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> n = <span class="built_in">int</span>(v.<span class="built_in">size</span>()) - <span class="number">1</span>;</span><br><span class="line">        Node *p1 = v[n];</span><br><span class="line">        Node *p2 = v[n - <span class="number">1</span>];</span><br><span class="line">        <span class="comment">//æ’åºåï¼Œä»¥æœ€åä¸¤ä¸ªå…ƒç´ ï¼Œnewä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æƒé‡ç­‰äºä¸¤ä¸ªå­èŠ‚ç‚¹æƒé‡ä¹‹å’Œ</span></span><br><span class="line">        Node *temp = <span class="keyword">new</span> <span class="built_in">Node</span>((p1-&gt;weight + p2-&gt;weight), p1, p2, <span class="literal">NULL</span>);</span><br><span class="line">        p1-&gt;parent = temp; <span class="comment">//æœ€åä¸¤ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹</span></span><br><span class="line">        p2-&gt;parent = temp;</span><br><span class="line">        v.<span class="built_in">erase</span>(v.<span class="built_in">end</span>() - <span class="number">1</span>); <span class="comment">//ç§»é™¤æœ€åä¸¤ä¸ªå…ƒç´ ï¼Œï¼ˆæ²¡æœ‰é‡Šæ”¾å¯¹è±¡å†…å­˜ï¼‰</span></span><br><span class="line">        v.<span class="built_in">erase</span>(v.<span class="built_in">end</span>() - <span class="number">1</span>);</span><br><span class="line">        v.<span class="built_in">push_back</span>(temp);             <span class="comment">//æŠŠæ–°èŠ‚ç‚¹æ”¾è¿›å‘é‡ä¸­</span></span><br><span class="line">        <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), cmp); <span class="comment">//é‡æ–°æ’åº</span></span><br><span class="line">    &#125;</span><br><span class="line">    root = v[<span class="number">0</span>]; <span class="comment">//å‘é‡ä¸­åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¯¥èŠ‚ç‚¹å°±æ˜¯å“ˆå¤«æ›¼æ ‘æ ¹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(Node *p1, Node *p2)</span> <span class="comment">//å‘é‡æ’åºæ—¶çš„è‡ªå®šä¹‰è§„åˆ™</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p1-&gt;weight &gt; p2-&gt;weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">HuffmanTree::enCode</span><span class="params">(string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *p = root;</span><br><span class="line">    <span class="keyword">if</span> (!p)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    stack&lt;Node *&gt; s;</span><br><span class="line">    vector&lt;Node&gt; v;</span><br><span class="line">    <span class="comment">//ä»¥ä¸‹ä¸ºéé€’å½’å‰åºéå†</span></span><br><span class="line">    s.<span class="built_in">push</span>(root);</span><br><span class="line">    <span class="keyword">while</span> (!s.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        Node *temp = s.<span class="built_in">top</span>();</span><br><span class="line">        <span class="keyword">if</span> (!temp-&gt;left &amp;&amp; !temp-&gt;right) <span class="comment">//æ˜¯å¶å­èŠ‚ç‚¹</span></span><br><span class="line">            v.<span class="built_in">push_back</span>(*temp);          <span class="comment">//æ”¾è¿›å‘é‡ä¸­</span></span><br><span class="line">        s.<span class="built_in">pop</span>();                         <span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (temp-&gt;right)                 <span class="comment">//å³èŠ‚ç‚¹ä¸ç©º</span></span><br><span class="line">        &#123;</span><br><span class="line">            s.<span class="built_in">push</span>(temp-&gt;right); <span class="comment">//å…¥æ ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (temp-&gt;left) <span class="comment">//å·¦èŠ‚ç‚¹ä¸ç©º</span></span><br><span class="line">        &#123;</span><br><span class="line">            s.<span class="built_in">push</span>(temp-&gt;left); <span class="comment">//å…¥æ ˆ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»¥ä¸Šéå†åæ‰€æœ‰å¶å­èŠ‚ç‚¹å­˜è¿›äº†ä¸€ä¸ªå‘é‡ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">int</span>(str.<span class="built_in">length</span>()); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(v.<span class="built_in">size</span>()); j++) <span class="comment">//åœ¨å‘é‡ä¸­æŸ¥æ‰¾</span></span><br><span class="line">            <span class="keyword">if</span> (v[j].c == str[i])               <span class="comment">//ç›®æ ‡å¶å­èŠ‚ç‚¹çš„å­—ç¬¦å’Œä¼ é€’è¿›æ¥çš„å­—ç¬¦ç›¸åŒ</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ‰§è¡Œç¼–ç ç®—æ³•</span></span><br><span class="line">                stack&lt;<span class="type">char</span>&gt; stk;</span><br><span class="line">                Node *cur;</span><br><span class="line">                cur = &amp;v[j];</span><br><span class="line">                <span class="keyword">while</span> (cur) <span class="comment">//ä»å¶å­èŠ‚ç‚¹å‘æ ¹å›æº¯è·¯å¾„ï¼Œæ¯ä¸€æ­¥å‹å…¥æ ˆ</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (cur-&gt;parent)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span> (cur-&gt;parent-&gt;left-&gt;weight == cur-&gt;weight) <span class="comment">//æ˜¯å·¦èŠ‚ç‚¹ï¼Œæ ‡è®°è·¯å¾„ä¸º0</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            stk.<span class="built_in">push</span>(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="comment">//æ˜¯å³èŠ‚ç‚¹ï¼Œæ ‡è®°è·¯å¾„ä¸º1</span></span><br><span class="line">                            stk.<span class="built_in">push</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    cur = cur-&gt;parent; <span class="comment">//å›æº¯ä¸€æ­¥</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>()) <span class="comment">//è¾“å‡ºæ ˆä¸­æ‰€æœ‰å…ƒç´ ï¼Œå³ä¸ºæ ¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; stk.<span class="built_in">top</span>();</span><br><span class="line">                    stk.<span class="built_in">pop</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                cout &lt;&lt; <span class="string">&#x27; &#x27;</span>; <span class="comment">//æ¯ä¸ªå­—ç¬¦ç¼–ç è¾“å‡ºé—´ç©ºä¸€æ ¼ï¼Œæ–¹ä¾¿æŸ¥çœ‹éªŒè¯</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£ç "><a href="#è§£ç " class="headerlink" title="è§£ç "></a>è§£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">HuffmanTree::deCode</span><span class="params">(string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *p = root;</span><br><span class="line">    <span class="keyword">if</span> (!p)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">int</span>(str.<span class="built_in">length</span>()); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (str[i] == <span class="string">&#x27;0&#x27;</span>)                       <span class="comment">//è¯»åˆ°0</span></span><br><span class="line">            p = p-&gt;left;                         <span class="comment">//æŒ‡é’ˆæŒ‡å‘å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;1&#x27;</span>)                  <span class="comment">//è¯»åˆ°1</span></span><br><span class="line">            p = p-&gt;right;                        <span class="comment">//æŒ‡é’ˆæŒ‡å‘å³èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (p-&gt;left == <span class="literal">NULL</span> &amp;&amp; p-&gt;right == <span class="literal">NULL</span>) <span class="comment">//æ˜¯å¶å­èŠ‚ç‚¹</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; p-&gt;c; <span class="comment">//è¾“å‡ºå­—ç¬¦</span></span><br><span class="line">            p = root;     <span class="comment">//æŒ‡é’ˆé‡æ–°æŒ‡å‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;Node *&gt; v;</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Node</span>(<span class="string">&#x27;S&#x27;</span>, <span class="number">5</span>));</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Node</span>(<span class="string">&#x27;U&#x27;</span>, <span class="number">8</span>));</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Node</span>(<span class="string">&#x27;C&#x27;</span>, <span class="number">9</span>));</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Node</span>(<span class="string">&#x27;E&#x27;</span>, <span class="number">20</span>));</span><br><span class="line">    v.<span class="built_in">push_back</span>(<span class="keyword">new</span> <span class="built_in">Node</span>(<span class="string">&#x27;!&#x27;</span>, <span class="number">10</span>));</span><br><span class="line">    HuffmanTree t;</span><br><span class="line">    t.<span class="built_in">setTree</span>(v);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// cout &lt;&lt; &quot;è¾“å…¥ä¸º:SUCCESS!nç¼–ç ä¸º:&quot;;</span></span><br><span class="line">    t.<span class="built_in">enCode</span>(<span class="string">&quot;SUCCESS!&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// cout &lt;&lt; &quot;è¾“å…¥ä¸º:1001011101100100100111nè§£ç ä¸º:&quot;;</span></span><br><span class="line">    t.<span class="built_in">deCode</span>(<span class="string">&quot;1001011101100100100111&quot;</span>); <span class="comment">//ä¸Šä¸€æ­¥ä¸­çš„ç¼–ç åè¿‡æ¥è§£æ</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;nn&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-23.png"></p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>c++</tag>
      
      <tag>å“ˆå¤«æ›¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å †çš„åŸºæœ¬æ“ä½œï¼šæ’å…¥å…ƒç´ ã€åˆ é™¤æœ€å¤§å…ƒç´ </title>
    <link href="/2020/09/19/%E5%A0%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%9A%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E3%80%81%E5%88%A0%E9%99%A4%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/"/>
    <url>/2020/09/19/%E5%A0%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%EF%BC%9A%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0%E3%80%81%E5%88%A0%E9%99%A4%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0/</url>
    
    <content type="html"><![CDATA[<h4 id="æœ€å¤§å †ç»“æ„å®šä¹‰"><a href="#æœ€å¤§å †ç»“æ„å®šä¹‰" class="headerlink" title="æœ€å¤§å †ç»“æ„å®šä¹‰"></a>æœ€å¤§å †ç»“æ„å®šä¹‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Heap</span></span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vec;<span class="comment">//ç”¨å‘é‡æ¥æ„é€ å †</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Heap</span>() &#123;&#125;</span><br><span class="line">    ~<span class="built_in">Heap</span>()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> n)</span></span>;<span class="comment">//æ’å…¥</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">()</span></span>;<span class="comment">//åˆ é™¤æœ€å¤§å€¼</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span></span>;<span class="comment">//æŒ‰å±‚æ¬¡è¾“å‡ºï¼Œæ–¹ä¾¿éªŒè¯ç¨‹åºæ˜¯å¦æ­£ç¡®</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥ï¼ˆæ·»åŠ åœ¨å°¾éƒ¨ï¼Œä¸Šè°ƒï¼‰"><a href="#æ’å…¥ï¼ˆæ·»åŠ åœ¨å°¾éƒ¨ï¼Œä¸Šè°ƒï¼‰" class="headerlink" title="æ’å…¥ï¼ˆæ·»åŠ åœ¨å°¾éƒ¨ï¼Œä¸Šè°ƒï¼‰"></a>æ’å…¥ï¼ˆæ·»åŠ åœ¨å°¾éƒ¨ï¼Œä¸Šè°ƒï¼‰</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-19.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Heap::insert</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vec.<span class="built_in">push_back</span>(n);           <span class="comment">//å‘é‡æœ«å°¾åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="type">int</span> s = <span class="built_in">int</span>(vec.<span class="built_in">size</span>()) - <span class="number">1</span>; <span class="comment">//è·å–å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">while</span> (vec[(s - <span class="number">1</span>) / <span class="number">2</span>] &lt; vec[s])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(vec[(s - <span class="number">1</span>) / <span class="number">2</span>], vec[s]); <span class="comment">//å’Œçˆ¶èŠ‚ç‚¹å…ƒç´ äº¤æ¢</span></span><br><span class="line">        s = (s - <span class="number">1</span>) / <span class="number">2</span>;                    <span class="comment">//å®šä½åˆ°åŸçˆ¶èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">        <span class="keyword">if</span> (s == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤æœ€å¤§å…ƒç´ ï¼ˆåˆ é™¤æ ¹ï¼Œæœ«å°¾èŠ‚ç‚¹æµ®ä¸Šï¼Œå†ä¸‹è°ƒï¼‰"><a href="#åˆ é™¤æœ€å¤§å…ƒç´ ï¼ˆåˆ é™¤æ ¹ï¼Œæœ«å°¾èŠ‚ç‚¹æµ®ä¸Šï¼Œå†ä¸‹è°ƒï¼‰" class="headerlink" title="åˆ é™¤æœ€å¤§å…ƒç´ ï¼ˆåˆ é™¤æ ¹ï¼Œæœ«å°¾èŠ‚ç‚¹æµ®ä¸Šï¼Œå†ä¸‹è°ƒï¼‰"></a>åˆ é™¤æœ€å¤§å…ƒç´ ï¼ˆåˆ é™¤æ ¹ï¼Œæœ«å°¾èŠ‚ç‚¹æµ®ä¸Šï¼Œå†ä¸‹è°ƒï¼‰</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-20.png"></p><p>æ¯æ¬¡ä¸‹è°ƒï¼Œä¸å·¦å³èŠ‚ç‚¹ä¸­å¤§çš„é‚£ä¸ªäº¤æ¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-21.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Heap::erase</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (vec.<span class="built_in">empty</span>()) <span class="comment">//å‘é‡ä¸ºç©ºï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> s = <span class="built_in">int</span>(vec.<span class="built_in">size</span>());</span><br><span class="line">    <span class="built_in">swap</span>(vec[<span class="number">0</span>], vec[s - <span class="number">1</span>]); <span class="comment">//äº¤æ¢é¦–å°¾å…ƒç´ </span></span><br><span class="line">    vec.<span class="built_in">pop_back</span>();              <span class="comment">//åˆ é™¤æœ«å°¾å…ƒç´ </span></span><br><span class="line">    s -= <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) <span class="comment">//å¯¹æ ¹èŠ‚ç‚¹æ‰§è¡Œä¸‹è°ƒ</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="number">2</span> * i + <span class="number">1</span>) &lt;= (s - <span class="number">1</span>)) <span class="comment">//å·¦èŠ‚ç‚¹å­˜åœ¨</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="number">2</span> * i + <span class="number">2</span>) &lt;= s - <span class="number">1</span>) <span class="comment">//å³èŠ‚ç‚¹å­˜åœ¨</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (vec[i] &lt; vec[<span class="number">2</span> * i + <span class="number">1</span>] &amp;&amp; vec[i] &lt; vec[<span class="number">2</span> * i + <span class="number">2</span>]) <span class="comment">//æ¯”ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½å°</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> temp = vec[<span class="number">2</span> * i + <span class="number">1</span>] &lt; vec[<span class="number">2</span> * i + <span class="number">2</span>] ? (<span class="number">2</span> * i + <span class="number">2</span>) : (<span class="number">2</span> * i + <span class="number">1</span>);</span><br><span class="line">                    <span class="built_in">swap</span>(vec[i], vec[temp]); <span class="comment">//å’Œå¤§çš„é‚£ä¸ªå­èŠ‚ç‚¹äº¤æ¢</span></span><br><span class="line">                    i = temp;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (vec[i] &lt; vec[<span class="number">2</span> * i + <span class="number">1</span>]) <span class="comment">//æ¯”å·¦èŠ‚ç‚¹å°ï¼Œæ¯”å³èŠ‚ç‚¹å¤§</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(vec[i], vec[<span class="number">2</span> * i + <span class="number">1</span>]); <span class="comment">//å’Œå·¦å­èŠ‚ç‚¹äº¤æ¢</span></span><br><span class="line">                    i = <span class="number">2</span> * i + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (vec[i] &lt; vec[<span class="number">2</span> * i + <span class="number">2</span>]) <span class="comment">//æ¯”å³èŠ‚ç‚¹å°ï¼Œæ¯”å·¦èŠ‚ç‚¹å¤§</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(vec[i], vec[<span class="number">2</span> * i + <span class="number">2</span>]); <span class="comment">//å’Œå³å­èŠ‚ç‚¹äº¤æ¢</span></span><br><span class="line">                    i = <span class="number">2</span> * i + <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="comment">//æ¯”å·¦å³èŠ‚ç‚¹éƒ½å¤§</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">//ä¸å­˜åœ¨å³èŠ‚ç‚¹</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (vec[i] &lt; vec[<span class="number">2</span> * i + <span class="number">1</span>])</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">swap</span>(vec[i], vec[<span class="number">2</span> * i + <span class="number">1</span>]); <span class="comment">//å’Œå·¦å­èŠ‚ç‚¹äº¤æ¢</span></span><br><span class="line">                    i = <span class="number">2</span> * i + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="comment">//æ¯”å·¦èŠ‚ç‚¹å¤§</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//æ²¡æœ‰å·¦èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>c++</tag>
      
      <tag>å †</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ»¡äºŒå‰æ ‘ã€å®Œå…¨äºŒå‰æ ‘ã€å¹³è¡¡äºŒå‰æ ‘ã€å †ã€å“ˆå¤«æ›¼æ ‘çš„æ¦‚å¿µ</title>
    <link href="/2020/09/19/%E6%BB%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%A0%86%E3%80%81%E5%93%88%E5%A4%AB%E6%9B%BC/"/>
    <url>/2020/09/19/%E6%BB%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E5%A0%86%E3%80%81%E5%93%88%E5%A4%AB%E6%9B%BC/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€æ»¡äºŒå‰æ ‘"><a href="#ä¸€ã€æ»¡äºŒå‰æ ‘" class="headerlink" title="ä¸€ã€æ»¡äºŒå‰æ ‘"></a>ä¸€ã€æ»¡äºŒå‰æ ‘</h4><p>ã€€ã€€ä¸€æ£µäºŒå‰æ ‘çš„ç»“ç‚¹è¦ä¹ˆæ˜¯å¶å­ç»“ç‚¹ï¼Œè¦ä¹ˆå®ƒæœ‰ä¸¤ä¸ªå­ç»“ç‚¹ï¼ˆå¦‚æœä¸€ä¸ªäºŒå‰æ ‘çš„å±‚æ•°ä¸ºKï¼Œä¸”ç»“ç‚¹æ€»æ•°æ˜¯(2^k) -1ï¼Œåˆ™å®ƒå°±æ˜¯æ»¡äºŒå‰æ ‘ã€‚ï¼‰</p><p><img src="https://img2018.cnblogs.com/i-beta/1468919/201911/1468919-20191103194220076-925294362.png"></p><h4 id="äºŒã€å®Œå…¨äºŒå‰æ ‘"><a href="#äºŒã€å®Œå…¨äºŒå‰æ ‘" class="headerlink" title="äºŒã€å®Œå…¨äºŒå‰æ ‘"></a>äºŒã€å®Œå…¨äºŒå‰æ ‘</h4><p>ã€€ã€€è‹¥è®¾äºŒå‰æ ‘çš„æ·±åº¦ä¸ºkï¼Œé™¤ç¬¬ k å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½k-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬k å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½<strong>è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹</strong>ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚</p><p><img src="https://img2018.cnblogs.com/i-beta/1468919/201911/1468919-20191103194739538-2034251878.png"></p><h4 id="ä¸‰ã€å¹³è¡¡äºŒå‰æ ‘"><a href="#ä¸‰ã€å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="ä¸‰ã€å¹³è¡¡äºŒå‰æ ‘"></a>ä¸‰ã€å¹³è¡¡äºŒå‰æ ‘</h4><p>ã€€ã€€å®ƒæˆ–è€…æ˜¯ä¸€é¢—ç©ºæ ‘ï¼Œæˆ–å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘çš„æ·±åº¦ä¹‹å·®(å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œä¸”å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘ã€‚</p><p><img src="https://img2018.cnblogs.com/i-beta/1468919/201911/1468919-20191103195149869-1317786481.png"></p><h4 id="å››ã€å †"><a href="#å››ã€å †" class="headerlink" title="å››ã€å †"></a>å››ã€å †</h4><p>æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸­çš„æ•°æ®é¡¹éƒ½å¤§äºæˆ–ç­‰äºå…¶å­å¥³çš„æ•°æ®é¡¹â€”-æœ€å¤§å †ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-17.png"></p><p>æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸­çš„æ•°æ®é¡¹éƒ½å°äºæˆ–ç­‰äºå…¶å­å¥³çš„æ•°æ®é¡¹â€”-æœ€å°å †ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-18.png"></p><h4 id="äº”ã€æœ€ä¼˜äºŒå‰æ ‘ï¼ˆå“ˆå¤«æ›¼æ ‘ï¼‰"><a href="#äº”ã€æœ€ä¼˜äºŒå‰æ ‘ï¼ˆå“ˆå¤«æ›¼æ ‘ï¼‰" class="headerlink" title="äº”ã€æœ€ä¼˜äºŒå‰æ ‘ï¼ˆå“ˆå¤«æ›¼æ ‘ï¼‰"></a>äº”ã€æœ€ä¼˜äºŒå‰æ ‘ï¼ˆå“ˆå¤«æ›¼æ ‘ï¼‰</h4><p>ã€€ã€€æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦è¾¾åˆ°æœ€å°ï¼Œç§°è¿™æ ·çš„äºŒå‰æ ‘ä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œä¹Ÿç§°ä¸ºå“ˆå¤«æ›¼æ ‘(Huffman Tree)ã€‚å“ˆå¤«æ›¼æ ‘æ˜¯å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„æ ‘ï¼Œæƒå€¼è¾ƒå¤§çš„ç»“ç‚¹ç¦»æ ¹è¾ƒè¿‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æœç´¢æ ‘çš„æ’å…¥ã€åˆ é™¤èŠ‚ç‚¹</title>
    <link href="/2020/09/19/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5%E3%80%81%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9/"/>
    <url>/2020/09/19/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5%E3%80%81%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h4 id="äºŒå‰æ ‘ç»“æ„å®šä¹‰"><a href="#äºŒå‰æ ‘ç»“æ„å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘ç»“æ„å®šä¹‰"></a>äºŒå‰æ ‘ç»“æ„å®šä¹‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> data=<span class="number">0</span>;</span><br><span class="line">    Node* parent=<span class="literal">NULL</span>;</span><br><span class="line">    Node* lchild=<span class="literal">NULL</span>;</span><br><span class="line">    Node* rchild=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> n)</span><br><span class="line">    &#123;</span><br><span class="line">        data=n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinarySearchTree</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* root;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function">Node* <span class="title">getRoot</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> root;&#125;</span><br><span class="line"><span class="function">Node* <span class="title">getNode</span><span class="params">(<span class="type">int</span> data)</span></span>;<span class="comment">//æŸ¥æ‰¾å¯¹åº”èŠ‚ç‚¹</span></span><br><span class="line"><span class="function">Node* <span class="title">sucessor</span><span class="params">(Node *p)</span></span>;<span class="comment">//æŸ¥æ‰¾å¯¹åº”èŠ‚ç‚¹çš„åœ¨ä¸­åºéå†ä¸­çš„åç»§èŠ‚ç‚¹</span></span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> data)</span></span>;<span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> data)</span></span>;<span class="comment">//åˆ é™¤</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥èŠ‚ç‚¹"><a href="#æ’å…¥èŠ‚ç‚¹" class="headerlink" title="æ’å…¥èŠ‚ç‚¹"></a>æ’å…¥èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">BinarySearchTree::insert</span><span class="params">(<span class="type">int</span> data)</span> <span class="comment">//æ’å…¥</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *p = root, *newNode = <span class="keyword">new</span> <span class="built_in">Node</span>(data);</span><br><span class="line">    Node *temp = p;</span><br><span class="line">    <span class="keyword">if</span> (!root) <span class="comment">//ç©ºæ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        root = newNode; <span class="comment">//æ’å…¥çš„ä¸ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        &#123;</span><br><span class="line">            temp = p;</span><br><span class="line">            <span class="keyword">if</span> (data &lt; p-&gt;data)</span><br><span class="line">                p = p-&gt;lchild;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (data &gt; p-&gt;data)</span><br><span class="line">                p = p-&gt;rchild;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="comment">//æ‰¾åˆ°åº”è¯¥æ’å…¥çš„ä½ç½®</span></span><br><span class="line">        newNode-&gt;parent = temp;</span><br><span class="line">        <span class="keyword">if</span> (newNode-&gt;data &gt; temp-&gt;data)</span><br><span class="line">            temp-&gt;rchild = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            temp-&gt;lchild = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">BinarySearchTree::remove</span><span class="params">(<span class="type">int</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *p = <span class="built_in">getNode</span>(data);</span><br><span class="line">    <span class="keyword">if</span> (!p-&gt;parent) <span class="comment">//æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        Node *q = <span class="built_in">sucessor</span>(p); <span class="comment">//æ‰¾åˆ°åç»§èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> tempData = q-&gt;data;</span><br><span class="line">        <span class="built_in">remove</span>(q-&gt;data);    <span class="comment">//åˆ é™¤åç»§èŠ‚ç‚¹</span></span><br><span class="line">        p-&gt;data = tempData; <span class="comment">//ä¿®æ”¹å€¼ä¸ºåç»§èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">bool</span> flag = p-&gt;data &gt; p-&gt;parent-&gt;data; <span class="comment">//æ˜¯å¦ä¸ºå³å­æ ‘ï¼Œä¸‹é¢å¤šæ¬¡ä½¿ç”¨ï¼Œç‰¹æ­¤åšæ ‡è®°</span></span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤å³å¯</span></span><br><span class="line">    <span class="keyword">if</span> (!p-&gt;lchild &amp;&amp; !p-&gt;rchild)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag)</span><br><span class="line">            p-&gt;parent-&gt;rchild = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p-&gt;parent-&gt;lchild = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">delete</span> p; <span class="comment">//é‡Šæ”¾å†…å­˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;lchild &amp;&amp; !p-&gt;rchild) <span class="comment">//å¦‚æœåªæœ‰å·¦å­æ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">            p-&gt;parent-&gt;rchild = p-&gt;lchild;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">            p-&gt;parent-&gt;lchild = p-&gt;lchild;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!p-&gt;lchild &amp;&amp; p-&gt;rchild) <span class="comment">//å¦‚æœåªæœ‰å³å­æ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">            p-&gt;parent-&gt;rchild = p-&gt;rchild;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">            p-&gt;parent-&gt;lchild = p-&gt;rchild;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">//æ—¢æœ‰å·¦å­æ ‘åˆæœ‰å³å­æ ‘</span></span><br><span class="line">    &#123;</span><br><span class="line">        Node *q = <span class="built_in">sucessor</span>(p); <span class="comment">//æ‰¾åˆ°åç»§èŠ‚ç‚¹</span></span><br><span class="line">        p-&gt;data = q-&gt;data;     <span class="comment">//ä¿®æ”¹å€¼ä¸ºåç»§èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        <span class="built_in">remove</span>(q-&gt;data);       <span class="comment">//åˆ é™¤åç»§èŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¾…åŠ©å‡½æ•°"><a href="#è¾…åŠ©å‡½æ•°" class="headerlink" title="è¾…åŠ©å‡½æ•°"></a>è¾…åŠ©å‡½æ•°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Node *<span class="title">BinarySearchTree::getNode</span><span class="params">(<span class="type">int</span> data)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//æŠ˜åŠæŸ¥æ‰¾å…ƒç´ </span></span><br><span class="line">    Node *p = root;</span><br><span class="line">    <span class="keyword">while</span> (p &amp;&amp; p-&gt;data != data)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;data &lt; data)</span><br><span class="line">        &#123;</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Node *<span class="title">BinarySearchTree::sucessor</span><span class="params">(Node *p)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//æ‰¾åˆ°ä¸­åºéå†çš„åç»§èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (!p)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (p-&gt;rchild) <span class="comment">//æœ‰å³å­æ ‘ï¼Œæ‰¾åˆ°å³å­æ ‘ä¸­æœ€å°çš„</span></span><br><span class="line">    &#123;</span><br><span class="line">        p = p-&gt;rchild;</span><br><span class="line">        <span class="keyword">while</span> (p-&gt;lchild)</span><br><span class="line">        &#123;</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">//æ— å³å­æ ‘ï¼Œæ‰¾çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!p-&gt;parent)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">while</span> (p-&gt;parent)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;parent-&gt;data &lt;= p-&gt;data)</span><br><span class="line">                p = p-&gt;parent;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p-&gt;parent;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æ ‘çš„éå†ï¼ˆå‰åºã€ä¸­åºã€ååºï¼‰*ï¼ˆé€’å½’ã€éé€’å½’ï¼‰å…±6ç§</title>
    <link href="/2020/09/19/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86%EF%BC%88%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%90%8E%E5%BA%8F%EF%BC%89%EF%BC%88%E9%80%92%E5%BD%92%E3%80%81%E9%9D%9E%E9%80%92/"/>
    <url>/2020/09/19/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86%EF%BC%88%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%90%8E%E5%BA%8F%EF%BC%89%EF%BC%88%E9%80%92%E5%BD%92%E3%80%81%E9%9D%9E%E9%80%92/</url>
    
    <content type="html"><![CDATA[<h4 id="äºŒå‰æ ‘ç»“æ„å®šä¹‰"><a href="#äºŒå‰æ ‘ç»“æ„å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘ç»“æ„å®šä¹‰"></a>äºŒå‰æ ‘ç»“æ„å®šä¹‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> data=<span class="number">0</span>;</span><br><span class="line">    Node* parent=<span class="literal">NULL</span>;</span><br><span class="line">    Node* lchild=<span class="literal">NULL</span>;</span><br><span class="line">    Node* rchild=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> n)</span><br><span class="line">    &#123;</span><br><span class="line">        data=n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinarySearchTree</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* root;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">......</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="é€’å½’ç‰ˆ"><a href="#é€’å½’ç‰ˆ" class="headerlink" title="é€’å½’ç‰ˆ"></a>é€’å½’ç‰ˆ</h3><h4 id="ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰"><a href="#ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰" class="headerlink" title="ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰"></a>ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::inOrder</span><span class="params">(Node *p)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//ä¸­åºéå†</span></span><br><span class="line">    <span class="keyword">if</span> (p-&gt;lchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;lchild);</span><br><span class="line">    cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;rchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;rchild);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰"><a href="#å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰" class="headerlink" title="å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰"></a>å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::preOrder</span><span class="params">(Node *p)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//å‰åºéå†</span></span><br><span class="line">    cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;lchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;lchild);</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;rchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;rchild);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰"><a href="#ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰" class="headerlink" title="ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰"></a>ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::postOrder</span><span class="params">(Node *p)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//ååºéå†</span></span><br><span class="line">    <span class="keyword">if</span> (p-&gt;lchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;lchild);</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;rchild)</span><br><span class="line">        <span class="built_in">inOrder</span>(p-&gt;rchild);</span><br><span class="line">    cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éé€’å½’ç‰ˆ"><a href="#éé€’å½’ç‰ˆ" class="headerlink" title="éé€’å½’ç‰ˆ"></a>éé€’å½’ç‰ˆ</h3><h4 id="ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰-1"><a href="#ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰-1" class="headerlink" title="ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰"></a>ä¸­åºéå†ï¼ˆå·¦ã€æ ¹ã€å³ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::nonRecursiveInOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*éé€’å½’ä¸­åºéå†</span></span><br><span class="line"><span class="comment">    å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">    1.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span></span><br><span class="line"><span class="comment">    2.å¼¹å‡ºæ ˆé¡¶å¹¶æ‰“å°</span></span><br><span class="line"><span class="comment">    3.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Node *p = root;</span><br><span class="line">    stack&lt;Node *&gt; stk;</span><br><span class="line">    <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>() p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//éå†èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        &#123;</span><br><span class="line">            stk.<span class="built_in">push</span>(p);</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¼¹å‡ºæ ˆé¡¶å¹¶æ‰“å°</span></span><br><span class="line">        <span class="keyword">if</span> (!stk.<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            p = stk.<span class="built_in">top</span>();</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">            <span class="comment">//è¿›å…¥å³å­æ ‘ï¼Œå¼€å§‹æ–°çš„ä¸€è½®å·¦å­æ ‘éå†</span></span><br><span class="line">            <span class="comment">//è‹¥æ²¡æœ‰å³å­æ ‘ï¼ŒæŒ‰å¾ªç¯æ¡ä»¶ï¼Œç›´æ¥å¼¹å‡ºä¸‹ä¸€ä¸ªæ ˆé¡¶</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰-1"><a href="#å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰-1" class="headerlink" title="å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰"></a>å‰åºéå†ï¼ˆæ ¹ã€å·¦ã€å³ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::nonRecursivePreOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*éé€’å½’å‰åºéå†</span></span><br><span class="line"><span class="comment">    å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">    1.æ‰“å°å€¼</span></span><br><span class="line"><span class="comment">    2.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span></span><br><span class="line"><span class="comment">    3.å¼¹å‡ºæ ˆé¡¶</span></span><br><span class="line"><span class="comment">    4.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Node *p = root;</span><br><span class="line">    stack&lt;Node *&gt; stk;</span><br><span class="line">    <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>() p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰“å°æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œå¾€å·¦ä¸‹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">            stk.<span class="built_in">push</span>(p);</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¼¹å‡ºæ ˆé¡¶</span></span><br><span class="line">        <span class="keyword">if</span> (!stk.<span class="built_in">empty</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            p = stk.<span class="built_in">top</span>();</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">            <span class="comment">//è¿›å…¥å³å­æ ‘ï¼Œå¼€å§‹æ–°çš„ä¸€è½®å·¦å­æ ‘éå†</span></span><br><span class="line">            <span class="comment">//è‹¥æ²¡æœ‰å³å­æ ‘ï¼ŒæŒ‰å¾ªç¯æ¡ä»¶ï¼Œç›´æ¥å¼¹å‡ºä¸‹ä¸€ä¸ªæ ˆé¡¶</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰-1"><a href="#ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰-1" class="headerlink" title="ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰"></a>ååºéå†ï¼ˆå·¦ã€å³ã€æ ¹ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BinarySearchTree::nonRecursivePostOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*éé€’å½’ååºéå†</span></span><br><span class="line"><span class="comment">    å¯¹æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">    1.å‘å·¦ä¸‹æ–¹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆï¼Œæ‰¾åˆ°å®ƒçš„å·¦å­æ ‘æœ€ä¸‹è¾¹</span></span><br><span class="line"><span class="comment">    2.å¦‚æœæ— å³å­æ ‘æˆ–è€…å³å­æ ‘åˆšè¢«è®¿é—®ï¼Œç›´æ¥æ‰“å°æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">      å¦åˆ™æ ¹èŠ‚ç‚¹å†æ¬¡å…¥æ ˆï¼Œå…ˆå¤„ç†å³å­æ ‘</span></span><br><span class="line"><span class="comment">    3.å…¶å³å­æ ‘ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ ˆç©º</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    Node *p = root;</span><br><span class="line">    Node *last = <span class="literal">NULL</span>; <span class="comment">//æ ‡è®°ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹</span></span><br><span class="line">    stack&lt;Node *&gt; stk;</span><br><span class="line">    <span class="comment">//å¾€å·¦ä¸‹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">    <span class="keyword">while</span> (p)</span><br><span class="line">    &#123;</span><br><span class="line">        stk.<span class="built_in">push</span>(p);</span><br><span class="line">        p = p-&gt;lchild;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¼¹å‡ºæ ˆé¡¶</span></span><br><span class="line">        p = stk.<span class="built_in">top</span>();</span><br><span class="line">        stk.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="comment">//ä¸€ä¸ªæ ¹èŠ‚ç‚¹è¢«æ‰“å°çš„æ¡ä»¶ï¼šæ— å³å­æ ‘æˆ–è€…å³å­æ ‘åˆšè¢«è®¿é—®</span></span><br><span class="line">        <span class="keyword">if</span> (!p-&gt;<span class="built_in">rchild</span>(last &amp;&amp; last-&gt;data == p-&gt;rchild-&gt;data))</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; p-&gt;data &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>);</span><br><span class="line">            last = p; <span class="comment">//ä¿®æ”¹ä¸Šä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//è¿›å…¥è¯¥æ¡ä»¶è¯´æ˜æœ‰å³å­æ ‘ä¸”å°šæœªè¢«è®¿é—®</span></span><br><span class="line">            <span class="comment">//æ ¹èŠ‚ç‚¹å†æ¬¡å…¥æ ˆï¼Œå…ˆå¤„ç†å³å­æ ‘</span></span><br><span class="line">            stk.<span class="built_in">push</span>(p);</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">            <span class="comment">//å¾€å·¦ä¸‹éå†ï¼Œéå†èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line">            <span class="keyword">while</span> (p)</span><br><span class="line">            &#123;</span><br><span class="line">                stk.<span class="built_in">push</span>(p);</span><br><span class="line">                p = p-&gt;lchild;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>äºŒå‰æ ‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode C++æ–­ç‚¹è°ƒè¯•é…ç½®</title>
    <link href="/2020/09/18/vscode-c%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/09/18/vscode-c%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ä¸€ç›´ä½¿ç”¨VS2019è°ƒè¯•c++ç¨‹åºï¼Œä½†æ˜¯å¹³æ—¶å†™å¾—æ¯”è¾ƒå¤šçš„å•ä¸ªcppæ–‡ä»¶ä¹Ÿéœ€è¦å»ºä¸€ä¸ªVSé¡¹ç›®ç»™äººçš„æ„Ÿè§‰æœ‰äº›å†—æ‚ï¼Œæ¥è§¦äº†VSCodeä¹‹åå°±è¢«å®ƒçš„è½»é‡å’Œé«˜æ‰©å±•æ€§å¸å¼•äº†ï¼Œæ˜¯æ—¶å€™æŠŠæ–­ç‚¹è°ƒè¯•åŠŸèƒ½ä¹Ÿé…ç½®å¥½ï¼Œå°½é‡ä¸ç”¨VS2019äº†ã€‚</p><p>åœ¨è¿™ä¹‹å‰éœ€è¦å®‰è£…å¥½MinGWï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚</p><p>ç„¶åå®‰è£…è¿™ä¸ªæ’ä»¶ CodeLLDB</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-10.png"></p><p>æ‰“å¼€ç©ºæ–‡ä»¶å¤¹ï¼Œæ–°å»ºcppæ–‡ä»¶ï¼Œå¯ä»¥å…ˆè®¾ç½®å¥½æ–­ç‚¹</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-13.png"></p><p>ç‚¹å‡»åˆ›å»ºlaunch.jsonæ–‡ä»¶ï¼Œé€‰æ‹©C++ï¼ˆGDB&#x2F;LLDBï¼‰</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-14-1024x330.png"></p><p>é€‰æ‹©é…ç½® g++å³å¯</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-15.png"></p><p>ç›´æ¥è¿›å…¥æ–­ç‚¹è°ƒè¯•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-16-1024x457.png"></p><p>åœ¨.vscodeæ–‡ä»¶å¤¹ä¸­è‡ªåŠ¨ç”Ÿæˆäº†launch.jsonå’Œtask.json</p><p>launch.jsonï¼š</p><p>1.å»ºè®®æŠŠâ€externalConsoleâ€:è®¾ç½®ä¸ºtrueï¼Œè¿™æ ·æ§åˆ¶å°è¿è¡Œçª—å£å°±æ˜¯ç‹¬ç«‹çš„</p><p>2.â€miDebuggerPathâ€éœ€è¦æ ¹æ®MinGWçš„å®‰è£…è·¯å¾„ç¡®å®šï¼Œä¸è¿‡æˆ‘è¿™é‡Œè‡ªåŠ¨ç”Ÿæˆçš„å°±æ˜¯æ­£ç¡®çš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºæå‰è®¾ç½®å¥½äº†ç¯å¢ƒå˜é‡å§</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </span></span><br><span class="line">    <span class="comment">// æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</span></span><br><span class="line">    <span class="comment">// æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++.exe - ç”Ÿæˆå’Œè°ƒè¯•æ´»åŠ¨æ–‡ä»¶&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;$&#123;fileBasenameNoExtension&#125;.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;miDebuggerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:MinGWbingdb.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;setupCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸º gdb å¯ç”¨æ•´é½æ‰“å°&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-enable-pretty-printing&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe build active file&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>tasks.json:</p><p>åŒæ ·çš„ï¼Œå”¯ä¸€è¦ä¿®æ”¹çš„å¯èƒ½å°±æ˜¯â€commandâ€éƒ¨åˆ†çš„g++è·¯å¾„ï¼Œä¸MinGWè·¯å¾„å¯¹åº”</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++.exe build active file&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:MinGWbing++.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-g&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;file&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-o&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;$&#123;fileDirname&#125;$&#123;fileBasenameNoExtension&#125;.exe&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;$gcc&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é€’å½’åº”ç”¨ï¼šæ±‰è¯ºå¡”ã€æ•°åˆ¶è½¬æ¢</title>
    <link href="/2020/09/18/%E9%80%92%E5%BD%92%E5%BA%94%E7%94%A8%EF%BC%9A%E6%B1%89%E8%AF%BA%E5%A1%94%E3%80%81%E6%95%B0%E5%88%B6%E8%BD%AC%E6%8D%A2/"/>
    <url>/2020/09/18/%E9%80%92%E5%BD%92%E5%BA%94%E7%94%A8%EF%BC%9A%E6%B1%89%E8%AF%BA%E5%A1%94%E3%80%81%E6%95%B0%E5%88%B6%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h4 id="æ±‰è¯ºå¡”"><a href="#æ±‰è¯ºå¡”" class="headerlink" title="æ±‰è¯ºå¡”"></a>æ±‰è¯ºå¡”</h4><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»å·¦åˆ°å³æœ‰Aã€Bã€Cä¸‰æ ¹æŸ±å­ï¼Œå…¶ä¸­AæŸ±å­ä¸Šé¢æœ‰ä»å°å åˆ°å¤§çš„nä¸ªåœ†ç›˜ï¼Œç°è¦æ±‚å°†AæŸ±å­ä¸Šçš„åœ†ç›˜ç§»åˆ°CæŸ±å­ä¸Šå»ï¼ŒæœŸé—´åªæœ‰ä¸€ä¸ªåŸåˆ™ï¼šä¸€æ¬¡åªèƒ½ç§»åˆ°ä¸€ä¸ªç›˜å­ä¸”å¤§ç›˜å­ä¸èƒ½åœ¨å°ç›˜å­ä¸Šé¢ï¼Œæ±‚ç§»åŠ¨çš„æ­¥éª¤å’Œç§»åŠ¨çš„æ¬¡æ•°</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE1LmNuYmxvZ3MuY29tL2Jsb2cvMTAyNjg2Ni8yMDE2MTAvMTAyNjg2Ni0yMDE2MTAxNjAyMjg1OTg4OS0yMDU1NDAyNjY0LmpwZw?x-oss-process=image/format,png"></p><p>n &#x3D;&#x3D; 1</p><p>Â Â Â Â Â  <strong>ç¬¬1æ¬¡Â  1å·ç›˜Â  Aâ€”-&gt;C</strong> Â Â Â Â Â  sum &#x3D; 1</p><p>n &#x3D;&#x3D; 2</p><p>Â Â Â Â Â Â  ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬1æ¬¡Â  1å·ç›˜Â  Aâ€”-&gt;B</p><p>Â Â Â Â Â Â ã€€ã€€ã€€ã€€ã€€ã€€Â <strong>ç¬¬2æ¬¡Â  2å·ç›˜Â  Aâ€”-&gt;C</strong></p><p>Â Â Â Â Â Â  ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬3æ¬¡Â  1å·ç›˜Â  Bâ€”-&gt;CÂ Â Â Â Â Â Â  sum &#x3D; 3</p><p>n &#x3D;&#x3D; 3</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬1æ¬¡Â  1å·ç›˜Â  Aâ€”-&gt;C</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬2æ¬¡Â  2å·ç›˜Â  Aâ€”-&gt;B</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬3æ¬¡Â  1å·ç›˜Â  Câ€”-&gt;B</p><p> <strong>ç¬¬4æ¬¡Â  3å·ç›˜Â  Aâ€”-&gt;C</strong></p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬5æ¬¡Â  1å·ç›˜Â  Bâ€”-&gt;A</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬6æ¬¡Â  2å·ç›˜Â  Bâ€”-&gt;C</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¬¬7æ¬¡Â  1å·ç›˜Â  Aâ€”-&gt;CÂ Â Â Â Â Â Â  sum &#x3D; 7</p><p>åˆ°æ­¤å¯ä»¥å‘ç°éœ€è¦ç§»åŠ¨çš„æ¬¡æ•°ä¸º2^n-1ï¼ˆnæ˜¯åœ†ç›˜ä¸ªæ•°ï¼‰</p><p>è¿˜å¯ä»¥å‘ç°ï¼Œå¦‚æœæˆ‘æŠŠnä¸ªç›˜å­çš„é—®é¢˜è®°ä¸ºXï¼Œn-1ä¸ªç›˜å­çš„é—®é¢˜è®°ä¸ºYï¼Œé‚£ä¹ˆé—®é¢˜Xå¯ä»¥è§†ä½œä¸¤ä¸ªé—®é¢˜Yå†åŠ ä¸Šâ€œç§»åŠ¨ä¸€æ¬¡æœ€å¤§çš„ç›˜å­â€è¿™ä¸€ä¸ªæ­¥éª¤ï¼š</p><p>1.æŠŠä¸Šé¢n-1ä¸ªç›˜å­ä»Aç§»åŠ¨åˆ°Bï¼Œï¼ˆBå’ŒCå®Œå…¨ç­‰ä»·ï¼Œè¿™ä¸€æ­¥å¯ä»¥è§†ä½œæ˜¯ä¸€ä¸ªé—®é¢˜Yçš„è§£å†³è¿‡ç¨‹ï¼‰</p><p>2.æŠŠæœ€å¤§ç›˜ä»Aç§»åŠ¨åˆ°C</p><p>3.æŠŠBä¸Šçš„n-1ä¸ªç›˜å­ç§»åŠ¨åˆ°Cï¼ŒåŒç†è¿™ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜Yçš„è§£å†³è¿‡ç¨‹</p><p>è§£é‡Šæˆä»£ç å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">hanoi</span><span class="params">(<span class="type">int</span> n, <span class="type">char</span> A, <span class="type">char</span> B, <span class="type">char</span> C)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">move</span>(A, C);<span class="comment">//å¯ä»¥å†™æˆæ‰“å°å‡½æ•°ä¾¿äºæŸ¥çœ‹è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">hanoi</span>(n - <span class="number">1</span>, A, C, B); <span class="comment">//å°†n-1ä¸ªç›˜å­ç”±Aç»è¿‡Cç§»åŠ¨åˆ°B</span></span><br><span class="line">        <span class="built_in">move</span>(A, C);            <span class="comment">//æ‰§è¡Œæœ€å¤§ç›˜å­nç§»åŠ¨</span></span><br><span class="line">        <span class="built_in">hanoi</span>(n - <span class="number">1</span>, B, A, C); <span class="comment">//å‰©ä¸‹çš„n-1ç›˜å­ï¼Œç”±Bç»è¿‡Aç§»åŠ¨åˆ°C</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‚è€ƒ<a href="https://blog.csdn.net/qq_19446965/article/details/81591945">https://blog.csdn.net/qq_19446965&#x2F;article&#x2F;details&#x2F;81591945</a></p><h4 id="æ•°åˆ¶è½¬æ¢ï¼ˆåè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶ï¼‰"><a href="#æ•°åˆ¶è½¬æ¢ï¼ˆåè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶ï¼‰" class="headerlink" title="æ•°åˆ¶è½¬æ¢ï¼ˆåè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶ï¼‰"></a>æ•°åˆ¶è½¬æ¢ï¼ˆåè¿›åˆ¶è½¬ä»»æ„è¿›åˆ¶ï¼‰</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">conversion</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//åè¿›åˆ¶æ•°,ç›®æ ‡è¿›åˆ¶</span></span><br><span class="line">string table = <span class="string">&quot;0123456789ABCDEF&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">c</span><span class="params">(<span class="number">1</span>,table[m % n])</span></span>;<span class="comment">//æ„é€ å‡½æ•°ï¼ŒæŠŠtable[m % n]èµ‹ç»™c</span></span><br><span class="line"><span class="keyword">if</span> (m / n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> c + <span class="string">&quot;&quot;</span>;<span class="comment">//ç›´æ¥è¿”å›ä½™æ•°</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span>  <span class="built_in">conversion</span>(m / n, n) + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»Šå¤©ç¿»å‡ºäº†åˆå­¦æ•°æ®ç»“æ„æ—¶å†™çš„éé€’å½’ç‰ˆæœ¬çš„<strong>ä»»æ„è¿›åˆ¶çš„æ•°åˆ¶è½¬æ¢</strong>ï¼Œè¿˜æœ‰å­—ç¬¦æ ˆçš„æ˜¾ç¤ºï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ï¼Œä¹Ÿè´´åœ¨ä¸‹é¢</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-9.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">stack</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> size;     <span class="comment">//å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span> capacity; <span class="comment">//å®¹é‡</span></span><br><span class="line">    T *stk;      <span class="comment">//æŒ‡å‘åŠ¨æ€æ•°ç»„é¦–åœ°å€</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">stack</span>();</span><br><span class="line">    ~<span class="built_in">stack</span>();</span><br><span class="line">    <span class="function">T <span class="title">Pop</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(T)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Empty</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">T <span class="title">Top</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">Size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">stack&lt;T&gt;::<span class="built_in">stack</span>()</span><br><span class="line">&#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    capacity = <span class="number">1</span>;</span><br><span class="line">    stk = <span class="keyword">new</span> T[capacity];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">stack&lt;T&gt;::~<span class="built_in">stack</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span>[] stk;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">T stack&lt;T&gt;::<span class="built_in">Pop</span>()</span><br><span class="line">&#123;</span><br><span class="line">    size--;</span><br><span class="line">    <span class="keyword">return</span> stk[size];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">void</span> stack&lt;T&gt;::<span class="built_in">Push</span>(T i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (size == capacity)</span><br><span class="line">    &#123;</span><br><span class="line">        capacity *= <span class="number">2</span>;</span><br><span class="line">        <span class="type">char</span> *temp = <span class="keyword">new</span> T[capacity];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            temp[i] = stk[i];</span><br><span class="line">        &#125;</span><br><span class="line">        T *p = stk;</span><br><span class="line">        stk = temp;</span><br><span class="line">        <span class="keyword">delete</span>[] p;</span><br><span class="line">    &#125;</span><br><span class="line">    stk[size++] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">T stack&lt;T&gt;::<span class="built_in">Top</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> stk[size - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">bool</span> stack&lt;T&gt;::<span class="built_in">Empty</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">int</span> stack&lt;T&gt;::<span class="built_in">Size</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="type">void</span> stack&lt;T&gt;::<span class="built_in">Display</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">        cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; stk[i];</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Converter</span><span class="params">(stack&lt;T&gt; &amp;S)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> ch[<span class="number">16</span>] = &#123;<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>&#125;;</span><br><span class="line">    <span class="type">int</span> c1, c2; <span class="comment">//è¿›åˆ¶æ•°</span></span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>;  <span class="comment">//å¯¹åº”çš„åè¿›åˆ¶æ•°</span></span><br><span class="line">    string s1;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å½“å‰è¿›åˆ¶ï¼š\n(æ³¨æ„åº”å½“ä¸å¤§äº16)\n&quot;</span>;</span><br><span class="line">    cin &gt;&gt; c1; <span class="comment">//å½“å‰è¿›åˆ¶</span></span><br><span class="line">    <span class="keyword">while</span> (cin.<span class="built_in">fail</span>() c1 &gt; <span class="number">16</span>c1 &lt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\nè¾“å…¥ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š\n&quot;</span>;</span><br><span class="line">        cin &gt;&gt; c1;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥&quot;</span> &lt;&lt; c1 &lt;&lt; <span class="string">&quot;è¿›åˆ¶çš„ä¸€ä¸ªæ•°\n&quot;</span>;</span><br><span class="line">    cin &gt;&gt; s1; <span class="comment">//å½“å‰æ•°</span></span><br><span class="line">    <span class="keyword">while</span> (cin.<span class="built_in">fail</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\nè¾“å…¥ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š\n&quot;</span>;</span><br><span class="line">        cin &gt;&gt; s1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é¦–å…ˆè½¬ä¸º10è¿›åˆ¶æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="built_in">int</span>(s<span class="number">1.l</span>ength() - <span class="number">1</span>); i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x += <span class="built_in">int</span>((s1[i] - <span class="string">&#x27;0&#x27;</span>)* <span class="built_in">pow</span>(c1, s<span class="number">1.l</span>ength() - i - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s1[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; s1[i] &lt;= <span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x += <span class="built_in">int</span>((s1[i] - <span class="string">&#x27;A&#x27;</span> + <span class="number">10</span>)* <span class="built_in">pow</span>(c1, s<span class="number">1.l</span>ength() - i - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å°†å¾—åˆ°çš„åè¿›åˆ¶æ•°è½¬ä¸ºç›®æ ‡è¿›åˆ¶</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ç›®æ ‡è¿›åˆ¶ï¼š\n&quot;</span>;</span><br><span class="line">    cin &gt;&gt; c2; <span class="comment">//ç›®æ ‡è¿›åˆ¶</span></span><br><span class="line">    <span class="keyword">while</span> (cin.<span class="built_in">fail</span>() c1 &gt; <span class="number">16</span> c1 &lt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\nè¾“å…¥ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š\n&quot;</span>;</span><br><span class="line">        cin &gt;&gt; c2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (x)</span><br><span class="line">    &#123;</span><br><span class="line">        S.<span class="built_in">Push</span>(ch[x % c2]);</span><br><span class="line">        x /= c2;</span><br><span class="line">        S.<span class="built_in">Display</span>(); <span class="comment">//æ¯å‹å…¥ä¸€ä¸ªå…ƒç´ å°±æ‰“å°æ•´ä¸ªæ ˆä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ ˆä¸­æ‰€æœ‰å…ƒç´ ï¼š\n&quot;</span>;</span><br><span class="line">    S.<span class="built_in">Display</span>();</span><br><span class="line">    cout &lt;&lt; c1 &lt;&lt; <span class="string">&quot;è¿›åˆ¶çš„&quot;</span> &lt;&lt; s1 &lt;&lt; <span class="string">&quot;è½¬åŒ–ä¸º&quot;</span> &lt;&lt; c2 &lt;&lt; <span class="string">&quot;è¿›åˆ¶ä¸ºï¼š\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (!S.<span class="built_in">Empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; S.<span class="built_in">Top</span>();</span><br><span class="line">        S.<span class="built_in">Pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    stack&lt;<span class="type">char</span>&gt; S;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Converter</span>(S);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\n\næ˜¯å¦ç»§ç»­æµ‹è¯•ï¼Ÿï¼ˆ0ç»“æŸ1ç»§ç»­ï¼‰\n&quot;</span>;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        cin &gt;&gt; n;</span><br><span class="line">        <span class="keyword">if</span> (!n)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>c++</tag>
      
      <tag>é€’å½’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é€’å½’çš„åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/2020/09/18/%E9%80%92%E5%BD%92%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2020/09/18/%E9%80%92%E5%BD%92%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h4 id="ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ</h4><p>é€’å½’å°±æ˜¯è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå¼•ç”¨ä¸€ä¸ªç»å…¸æ•…äº‹ç†è§£ï¼š</p><p>ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€œä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€˜ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šï¼Œæ­£åœ¨ç»™å°å’Œå°šè®²æ•…äº‹å‘¢ï¼æ•…äº‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€¦â€¦â€™â€</p><p>æ•…äº‹è°ƒç”¨æ•…äº‹æœ¬èº«ï¼Œå±‚æ¬¡è¶Šæ¥è¶Šæ·±â€¦â€¦</p><h4 id="ä½¿ç”¨é€’å½’çš„æ¡ä»¶"><a href="#ä½¿ç”¨é€’å½’çš„æ¡ä»¶" class="headerlink" title="ä½¿ç”¨é€’å½’çš„æ¡ä»¶"></a>ä½¿ç”¨é€’å½’çš„æ¡ä»¶</h4><p>1.é—®é¢˜æœ¬èº«å¯ä»¥åˆ†è§£ä¸ºå­é—®é¢˜ï¼Œå¹¶ä¸”ä¸åŸé—®é¢˜æœ‰ç›¸åŒçš„å½¢å¼</p><p>2.é€’å½’å¿…é¡»è¦æœ‰è¾¹ç•Œæ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€’å½’å‡ºå£</p><p>3.å½“è¾¹ç•Œæ¡ä»¶ï¼ˆé€’å½’å‡ºå£ï¼‰ä¸æ»¡è¶³æ—¶ï¼Œé€’å½’å‰è¿›ï¼›å½“è¾¹ç•Œæ¡ä»¶ï¼ˆé€’å½’å‡ºå£ï¼‰æ»¡è¶³æ—¶ï¼Œé€’å½’è¿”å›</p><h4 id="ç¼–å†™é€’å½’å‡½æ•°çš„æŠ€å·§"><a href="#ç¼–å†™é€’å½’å‡½æ•°çš„æŠ€å·§" class="headerlink" title="ç¼–å†™é€’å½’å‡½æ•°çš„æŠ€å·§"></a>ç¼–å†™é€’å½’å‡½æ•°çš„æŠ€å·§</h4><p>å‡è®¾å­é—®é¢˜å·²ç»è§£å†³ï¼ç±»ä¼¼ç”¨æ•°å­¦å½’çº³æ³•è§£å†³æ•°åˆ—é—®é¢˜æ—¶çš„a(n)ä¸a(n+1)ä¹‹é—´çš„å…³ç³»ï¼Œå‡è®¾a(n)å·²çŸ¥ï¼Œè®¡ç®—a(n+1),ç„¶åè¿½æº¯åˆ°a(0)å·²çŸ¥ï¼Œæ±‚a(1)â€¦â€¦</p><p>ä¾‹å¦‚ï¼šæ±‚n!</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">function</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="comment">//0!=1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">function</span>(n<span class="number">-1</span>)*n;<span class="comment">//n!=(n-1)!*n</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹ä¹Ÿå°±æ˜¯åˆ†æˆä¸¤éƒ¨åˆ†</p><p>1.å‡è®¾å­é—®é¢˜å·²ç»è§£å†³ï¼Œå†™å‡ºå½“å‰é—®é¢˜ä¸å­é—®é¢˜çš„é€’å½’å…³ç³»ï¼›</p><p>2.å†™å‡ºè¾¹ç•Œæ¡ä»¶çš„å¤„ç†æ­¥éª¤(å¦‚:è§£å†³åˆ°æœ€å°é—®é¢˜æ—¶ï¼Œå³æ— æ³•å†é€’è¿›æ—¶ç›´æ¥ç»™å‡ºç»“æœï¼‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é€’å½’</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒå‘é“¾è¡¨ç®€å•ç¤ºä¾‹</title>
    <link href="/2020/09/18/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/"/>
    <url>/2020/09/18/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<p>åŒå‘é“¾è¡¨ä¸åŒå‘é“¾è¡¨ç›¸æ¯”ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å‰åä¸¤ä¸ªå…ƒç´ ï¼Œè¿™æ„å‘³ç€åŒå‘é“¾è¡¨å¯ä»¥åŒå‘éå†ã€‚</p><p>ç®€å•ä¾‹å­å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    Node* prev;</span><br><span class="line">    Node* next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">List</span></span><br><span class="line">&#123;</span><br><span class="line">    Node* head;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">initList</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        head = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">insertNode</span><span class="params">(<span class="type">int</span> value, <span class="type">int</span> index)</span></span></span><br><span class="line"><span class="function">    </span>&#123;<span class="comment">//ç¬¬nä¸ªèŠ‚ç‚¹å‰æ’å…¥,0,1,2..</span></span><br><span class="line">        Node* newnode = <span class="keyword">new</span> <span class="built_in">Node</span>();</span><br><span class="line">        newnode-&gt;value = value;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>)<span class="comment">//æ’å…¥åˆ°æœ€å‰é¢</span></span><br><span class="line">        &#123;</span><br><span class="line">            newnode-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">            newnode-&gt;next = head;</span><br><span class="line">            <span class="keyword">if</span>(head)</span><br><span class="line">                head-&gt;prev = newnode;</span><br><span class="line">            head = newnode;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        Node* p = head;</span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;next)</span><br><span class="line">            &#123;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">if</span> (count == index)</span><br><span class="line">                &#123;</span><br><span class="line">                    newnode-&gt;next = p-&gt;next;</span><br><span class="line">                    p-&gt;next-&gt;prev = newnode;</span><br><span class="line">                    p-&gt;next = newnode;</span><br><span class="line">                    newnode-&gt;prev = p;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                p = p-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">deleteNode</span><span class="params">(<span class="type">int</span> index)</span></span></span><br><span class="line"><span class="function">    </span>&#123;<span class="comment">//åˆ é™¤ä¸‹æ ‡ä¸ºindexçš„å…ƒç´ ï¼Œ0ï¼Œ1ï¼Œ2..</span></span><br><span class="line">        Node* p = head;</span><br><span class="line">        <span class="keyword">while</span> (index&gt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;next)</span><br><span class="line">            &#123;</span><br><span class="line">                p = p-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;prev)</span><br><span class="line">            p-&gt;prev-&gt;next = p-&gt;next;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            head = p-&gt;next;</span><br><span class="line">        <span class="keyword">if</span> (p-&gt;next)</span><br><span class="line">            p-&gt;next-&gt;prev = p-&gt;prev;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node* p = head;</span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; p-&gt;value &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">            p = p-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    List* list = <span class="keyword">new</span> <span class="built_in">List</span>();</span><br><span class="line">    list-&gt;<span class="built_in">initList</span>();</span><br><span class="line">    list-&gt;<span class="built_in">insertNode</span>(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    list-&gt;<span class="built_in">insertNode</span>(<span class="number">6</span>, <span class="number">0</span>);</span><br><span class="line">    list-&gt;<span class="built_in">insertNode</span>(<span class="number">7</span>, <span class="number">0</span>);</span><br><span class="line">    list-&gt;<span class="built_in">insertNode</span>(<span class="number">9</span>, <span class="number">1</span>);</span><br><span class="line">    list-&gt;<span class="built_in">display</span>();</span><br><span class="line">    list-&gt;<span class="built_in">deleteNode</span>(<span class="number">2</span>);</span><br><span class="line">    list-&gt;<span class="built_in">display</span>();</span><br><span class="line">    list-&gt;<span class="built_in">deleteNode</span>(<span class="number">2</span>);</span><br><span class="line">    list-&gt;<span class="built_in">display</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼</title>
    <link href="/2020/09/17/%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <url>/2020/09/17/%E4%B8%AD%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>ä»å·¦å‘å³æ‰«æä¸­ç¼€è¡¨è¾¾å¼;<br>è®¿é—®åˆ°æ“ä½œæ•°,åŠ äººåç¼€è¡¨è¾¾å¼;<br>è®¿é—®åˆ°å·¦æ‹¬å·â€œ(â€œ,ç«‹å³å…¥æ ˆ;<br>è®¿é—®åˆ°å³æ‹¬å·â€œ)â€,æ ˆä¸­æ“ä½œç¬¦ä¾æ¬¡å‡ºæ ˆå¹¶åŠ å…¥åç¼€è¡¨è¾¾å¼,ç›´åˆ°å‡ºç°å·¦æ‹¬å·â€œ(â€,â€œ(â€å‡ºæ ˆ;<br>è®¿é—®åˆ°é™¤æ‹¬å·ä¹‹å¤–çš„å…¶ä»–æ“ä½œç¬¦,å½“å…¶ä¼˜å…ˆçº§æ¯”æ ˆé¡¶é™¤â€œ(â€ä¹‹å¤–çš„æ“ä½œç¬¦é«˜æ—¶å…¥æ ˆ,å¦åˆ™æ¯”å½“å‰æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜æˆ–è€…ä¼˜å…ˆçº§ç›¸ç­‰çš„æ“ä½œç¬¦ä¾æ¬¡å‡ºæ ˆã€‚</p><p>ä½¿ç”¨ä¸€ç§ä¸éœ€è¦æ‹¬å·çš„è¡¨è¾¾å¼çš„å›¾å½¢è¡¨ç¤ºæ³•,ç§°ä¸º<strong>è¡¨è¾¾å¼æ ‘</strong>ã€‚æ ‘ä½¿ç”¨åœ†åœˆä»£è¡¨å­˜å‚¨æ•°æ®çš„èŠ‚ç‚¹,è¿™äº›èŠ‚ç‚¹ä¹‹é—´ç”±ç§°ä¸ºè¾¹çš„çº¿æ®µè¿æ¥ã€‚åœ¨ä¸€æ£µè¡¨è¾¾å¼æ ‘ä¸­,æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆåŒ…å«ä¸€ä¸ªæ“ä½œæ•°,è¦ä¹ˆåŒ…å«ä¸€ä¸ªè¿ç®—ç¬¦ã€‚æ¯ä¸ªåŒ…å«äºŒå…ƒè¿ç®—ç¬¦çš„èŠ‚ç‚¹éƒ½è¿æ¥åˆ°ä¸¤ä¸ªç§°ä¸º<strong>å­å¥³</strong>çš„èŠ‚ç‚¹,åŒ…å«è¿ç®—ç¬¦çš„èŠ‚ç‚¹å°±ç§°ä¸ºè¿™ä¸¤ä¸ªå­å¥³èŠ‚ç‚¹çš„<strong>åŒäº²</strong>ã€‚å·¦è¾¹çš„å­å¥³åŒ…å«è¿™ä¸ªè¿ç®—ç¬¦çš„ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œå®ƒè¢«ç”»åœ¨å®ƒåŒäº²çš„å·¦ä¸‹æ–¹;å³è¾¹çš„å­å¥³åŒ…å«è¿™ä¸ªè¿ç®—ç¬¦çš„ç¬¬äºŒä¸ªæ“ä½œæ•°,è¢«ç”»åœ¨å®ƒåŒäº²çš„å³ä¸‹æ–¹ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-7-1024x406.png"></p><p>ä»è¿™äº›ä¾‹å­å¯ä»¥çœ‹åˆ°ä¸­ç¼€è¡¨è¾¾å¼æ˜¯å¦‚ä½•ä¸ä½¿ç”¨æ‹¬å·è€Œå›¾å½¢åŒ–è¡¨ç¤ºçš„è¦å¾—åˆ°å’Œä¸€æ£µè¡¨è¾¾å¼æ ‘ç›¸å¯¹åº”çš„åç¼€è¡¨è¾¾å¼,å¿…é¡»æŒ‰ç…§å·¦-å³-åŒäº²èŠ‚ç‚¹çš„æ¬¡åº(ååº)æ¥éå†(ä¹Ÿå°±æ˜¯,èµ°é)è¿™æ£µæ ‘ã€‚è¿™æ„å‘³ç€å¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹,åœ¨å¯ä»¥â€œè®¿é—®â€å®ƒä¹‹å‰,å¿…é¡»é¦–å…ˆè®¿é—´å®ƒçš„å·¦å­å¥³å’Œå³å­å¥³ã€‚å¯¹äºä¸­ç¼€è¡¨è¾¾å¼a*b+c,è¿™ä¸ªéå†äº§ç”Ÿäº†å¦‚ä¸‹å›¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-8.png"></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>1.ç”»å‡ºè¡¨è¾¾å¼æ ‘</p><p>2.ååºéå†</p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ˆå’Œé˜Ÿåˆ—</title>
    <link href="/2020/09/17/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/"/>
    <url>/2020/09/17/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h3 id="1-æ ˆçš„ç®€ä»‹"><a href="#1-æ ˆçš„ç®€ä»‹" class="headerlink" title="1. æ ˆçš„ç®€ä»‹"></a>1. æ ˆçš„ç®€ä»‹</h3><h4 id="1-1æ ˆçš„ç‰¹ç‚¹"><a href="#1-1æ ˆçš„ç‰¹ç‚¹" class="headerlink" title="1.1æ ˆçš„ç‰¹ç‚¹"></a>1.1æ ˆçš„ç‰¹ç‚¹</h4><p>æ ˆ(Stack)æ˜¯ä¸€ç§çº¿æ€§å­˜å‚¨ç»“æ„ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>æ ˆä¸­çš„æ•°æ®å…ƒç´ éµå®ˆâ€å…ˆè¿›åå‡ºâ€(First In Last Out)çš„åŸåˆ™ï¼Œç®€ç§°FILOç»“æ„ã€‚</li><li>é™å®šåªèƒ½åœ¨æ ˆé¡¶è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</li></ol><h4 id="1-2æ ˆçš„ç›¸å…³æ¦‚å¿µ"><a href="#1-2æ ˆçš„ç›¸å…³æ¦‚å¿µ" class="headerlink" title="1.2æ ˆçš„ç›¸å…³æ¦‚å¿µ"></a>1.2æ ˆçš„ç›¸å…³æ¦‚å¿µ</h4><p>æ ˆçš„ç›¸å…³æ¦‚å¿µï¼š</p><ol><li>æ ˆé¡¶ä¸æ ˆåº•ï¼šå…è®¸å…ƒç´ æ’å…¥ä¸åˆ é™¤çš„ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ï¼Œå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº•ã€‚</li><li>å‹æ ˆï¼šæ ˆçš„æ’å…¥æ“ä½œï¼Œå«åšè¿›æ ˆï¼Œä¹Ÿç§°å‹æ ˆã€å…¥æ ˆã€‚</li><li>å¼¹æ ˆï¼šæ ˆçš„åˆ é™¤æ“ä½œï¼Œä¹Ÿå«åšå‡ºæ ˆã€‚</li></ol><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå­˜å‚¨æ•´å‹å…ƒç´ çš„æ ˆï¼Œæˆ‘ä»¬ä¾æ¬¡å‹æ ˆï¼š{1,2,3}<br><img src="https://images2015.cnblogs.com/blog/610439/201601/610439-20160130013806989-121668995.png"></p><p>åœ¨å‹æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œæ ˆé¡¶çš„ä½ç½®ä¸€ç›´åœ¨â€å‘ä¸Šâ€œç§»åŠ¨ï¼Œè€Œæ ˆåº•æ˜¯å›ºå®šä¸å˜çš„ã€‚<br>å¦‚æœæˆ‘ä»¬è¦æŠŠæ ˆä¸­çš„å…ƒç´ å¼¹å‡ºæ¥ï¼š<br><img src="https://images2015.cnblogs.com/blog/610439/201601/610439-20160130013814661-295746330.png"></p><p>å‡ºæ ˆçš„é¡ºåºä¸º3ã€2ã€1 ï¼Œé¡ºåºä¸å…¥æ ˆæ—¶ç›¸åï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€å…ˆå…¥åå‡ºâ€œã€‚<br>åœ¨å¼¹æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œæ ˆé¡¶ä½ç½®ä¸€ç›´åœ¨â€å‘ä¸‹â€œç§»åŠ¨ï¼Œè€Œæ ˆåº•ä¸€ç›´ä¿æŒä¸å˜ã€‚</p><p>å¦‚æœä½ ç©è¿‡ä¸€ç§ç§°ä¸ºæ±‰è¯ºå¡”çš„ç›Šæ™ºç©å…·ï¼Œä½ å°±ä¼šçŸ¥é“æ¸¸æˆä¸­å°åœ†ç›˜çš„å­˜å–å°±æ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„é¡ºåºï¼Œä¸€ä¸ªåœ†æŸ±å°±æ˜¯ä¸€ä¸ªæ ˆï¼š<br><img src="https://images2015.cnblogs.com/blog/610439/201601/610439-20160130013821489-1542512229.png"></p><h4 id="1-3-æ ˆçš„æ“ä½œ"><a href="#1-3-æ ˆçš„æ“ä½œ" class="headerlink" title="1.3 æ ˆçš„æ“ä½œ"></a>1.3 æ ˆçš„æ“ä½œ</h4><p>æ ˆçš„å¸¸ç”¨æ“ä½œä¸ºï¼š</p><ol><li>å¼¹æ ˆï¼Œé€šå¸¸å‘½åä¸ºpop</li><li>å‹æ ˆï¼Œé€šå¸¸å‘½åä¸ºpush</li><li>æ±‚æ ˆçš„å¤§å°</li><li>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</li><li>è·å–æ ˆé¡¶å…ƒç´ çš„å€¼</li></ol><h4 id="1-4-æ ˆçš„å­˜å‚¨ç»“æ„"><a href="#1-4-æ ˆçš„å­˜å‚¨ç»“æ„" class="headerlink" title="1.4 æ ˆçš„å­˜å‚¨ç»“æ„"></a>1.4 æ ˆçš„å­˜å‚¨ç»“æ„</h4><p>æ ˆæ—¢ç„¶æ˜¯ä¸€ç§çº¿æ€§ç»“æ„ï¼Œå°±èƒ½å¤Ÿä»¥æ•°ç»„æˆ–é“¾è¡¨ï¼ˆå•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨æˆ–å¾ªç¯é“¾è¡¨ï¼‰ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ã€‚</p><h3 id="2-é˜Ÿåˆ—ç®€ä»‹"><a href="#2-é˜Ÿåˆ—ç®€ä»‹" class="headerlink" title="2. é˜Ÿåˆ—ç®€ä»‹"></a>2. é˜Ÿåˆ—ç®€ä»‹</h3><h4 id="2-1-é˜Ÿåˆ—çš„ç‰¹ç‚¹"><a href="#2-1-é˜Ÿåˆ—çš„ç‰¹ç‚¹" class="headerlink" title="2.1 é˜Ÿåˆ—çš„ç‰¹ç‚¹"></a>2.1 é˜Ÿåˆ—çš„ç‰¹ç‚¹</h4><p>é˜Ÿåˆ—ï¼ˆQueueï¼‰ä¸æ ˆä¸€æ ·ï¼Œæ˜¯ä¸€ç§çº¿æ€§å­˜å‚¨ç»“æ„ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>é˜Ÿåˆ—ä¸­çš„æ•°æ®å…ƒç´ éµå¾ªâ€œå…ˆè¿›å…ˆå‡ºâ€ï¼ˆFirst In First Outï¼‰çš„åŸåˆ™ï¼Œç®€ç§°FIFOç»“æ„ã€‚</li><li>åœ¨é˜Ÿå°¾æ·»åŠ å…ƒç´ ï¼Œåœ¨é˜Ÿå¤´æ·»åŠ å…ƒç´ ã€‚</li></ol><h4 id="2-2-é˜Ÿåˆ—çš„ç›¸å…³æ¦‚å¿µ"><a href="#2-2-é˜Ÿåˆ—çš„ç›¸å…³æ¦‚å¿µ" class="headerlink" title="2.2 é˜Ÿåˆ—çš„ç›¸å…³æ¦‚å¿µ"></a>2.2 é˜Ÿåˆ—çš„ç›¸å…³æ¦‚å¿µ</h4><p>é˜Ÿåˆ—çš„ç›¸å…³æ¦‚å¿µï¼š</p><ol><li>é˜Ÿå¤´ä¸é˜Ÿå°¾ï¼š å…è®¸å…ƒç´ æ’å…¥çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œå…è®¸å…ƒç´ åˆ é™¤çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå¤´ã€‚</li><li>å…¥é˜Ÿï¼šé˜Ÿåˆ—çš„æ’å…¥æ“ä½œã€‚</li><li>å‡ºé˜Ÿï¼šé˜Ÿåˆ—çš„åˆ é™¤æ“ä½œã€‚</li></ol><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå­˜å‚¨æ•´å‹å…ƒç´ çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬ä¾æ¬¡å…¥é˜Ÿï¼š{1ï¼Œ2ï¼Œ3}<br><img src="https://images2015.cnblogs.com/blog/610439/201601/610439-20160130151820974-712348880.png"></p><p>æ·»åŠ å…ƒç´ æ—¶ï¼Œå…ƒç´ åªèƒ½ä»é˜Ÿå°¾ä¸€ç«¯è¿›å…¥é˜Ÿåˆ—ï¼Œä¹Ÿå³æ˜¯2åªèƒ½è·Ÿåœ¨1åé¢ï¼Œ3åªèƒ½è·Ÿåœ¨2åé¢ã€‚<br>å¦‚æœé˜Ÿåˆ—ä¸­çš„å…ƒç´ è¦å‡ºé˜Ÿï¼š<br><img src="https://images2015.cnblogs.com/blog/610439/201601/610439-20160130151830318-592472607.png"></p><p>å…ƒç´ åªèƒ½ä»é˜Ÿé¦–å‡ºé˜Ÿåˆ—ï¼Œå‡ºé˜Ÿåˆ—çš„é¡ºåºä¸ºï¼š1ã€2ã€3ï¼Œä¸å…¥é˜Ÿæ—¶çš„é¡ºåºä¸€è‡´ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œå…ˆè¿›å…ˆå‡ºâ€ã€‚</p><h4 id="2-3-é˜Ÿåˆ—çš„æ“ä½œ"><a href="#2-3-é˜Ÿåˆ—çš„æ“ä½œ" class="headerlink" title="2.3 é˜Ÿåˆ—çš„æ“ä½œ"></a>2.3 é˜Ÿåˆ—çš„æ“ä½œ</h4><p>é˜Ÿåˆ—é€šå¸¸æä¾›çš„æ“ä½œï¼š</p><ol><li>å…¥é˜Ÿï¼š é€šå¸¸å‘½åä¸ºpush()</li><li>å‡ºé˜Ÿï¼š é€šå¸¸å‘½åä¸ºpop()</li><li>æ±‚é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ªæ•°</li><li>åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</li><li>è·å–é˜Ÿé¦–å…ƒç´ </li></ol><h4 id="2-4-é˜Ÿåˆ—çš„å­˜å‚¨ç»“æ„"><a href="#2-4-é˜Ÿåˆ—çš„å­˜å‚¨ç»“æ„" class="headerlink" title="2.4 é˜Ÿåˆ—çš„å­˜å‚¨ç»“æ„"></a>2.4 é˜Ÿåˆ—çš„å­˜å‚¨ç»“æ„</h4><p>é˜Ÿåˆ—ä¸æ ˆä¸€æ ·æ˜¯ä¸€ç§çº¿æ€§ç»“æ„ï¼Œå› æ­¤ä»¥å¸¸è§çš„çº¿æ€§è¡¨å¦‚æ•°ç»„ã€é“¾è¡¨ä½œä¸ºåº•å±‚çš„æ•°æ®ç»“æ„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å®Œæ•´åŠŸèƒ½å•é“¾è¡¨</title>
    <link href="/2020/09/17/%E5%AE%8C%E6%95%B4%E5%8D%95%E9%93%BE%E8%A1%A8/"/>
    <url>/2020/09/17/%E5%AE%8C%E6%95%B4%E5%8D%95%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> Value;   <span class="comment">//å½“å‰èŠ‚ç‚¹å‚¨å­˜çš„å€¼</span></span><br><span class="line">    Node *pNext; <span class="comment">//ä¸‹ä¸€èŠ‚ç‚¹ä½ç½®</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkList</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Node *pHead;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">Push</span><span class="params">(<span class="type">int</span> InValue)</span></span>;                <span class="comment">//å¤´æ’èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">LinkList</span>();                           <span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">LinkList</span>(<span class="type">const</span> LinkList &amp;);           <span class="comment">//å¤åˆ¶æ„é€ å‡½æ•°</span></span><br><span class="line">    LinkList <span class="keyword">operator</span>=(<span class="type">const</span> LinkList &amp;); <span class="comment">//èµ‹å€¼è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line">    ~<span class="built_in">LinkList</span>();                          <span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">IsEmpty</span><span class="params">()</span></span>;                       <span class="comment">//åˆ¤ç©º</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Display</span><span class="params">()</span></span>;                       <span class="comment">//éå†æ‰“å°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Erase</span><span class="params">(<span class="type">int</span> DeValue)</span></span>;              <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="function">Node *<span class="title">Find</span><span class="params">(<span class="type">int</span> Value)</span>                 <span class="comment">//æŸ¥æ‰¾</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Node *p = pHead;</span><br><span class="line">        <span class="keyword">while</span> (p-&gt;Value != Value &amp;&amp; p != <span class="literal">NULL</span>) <span class="comment">//</span></span><br><span class="line">        &#123;                                      <span class="comment">//å½“å‰èŠ‚ç‚¹æ•°æ®ä¸æ˜¯è¦æŸ¥æ‰¾çš„æ•°æ®å¹¶ä¸”ä¸æŒ‡å‘NULL</span></span><br><span class="line">            p = p-&gt;pNext;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!p)          <span class="comment">// p==NULL</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">//è¿”å›ç©ºæŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">IsOrder</span><span class="params">()</span></span>; <span class="comment">//åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰åº</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">ReSort</span><span class="params">()</span></span>;  <span class="comment">//é“¾è¡¨ååº</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LinkList::ReSort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *p1 = pHead, *p2 = pHead-&gt;pNext;</span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Push</span>(p2-&gt;Value);</span><br><span class="line">        p1-&gt;pNext = p2-&gt;pNext;</span><br><span class="line">        Node *temp = p2;</span><br><span class="line">        p2 = p2-&gt;pNext;</span><br><span class="line">        <span class="keyword">delete</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LinkList::IsOrder</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!pHead) <span class="comment">//ç©ºé“¾è¡¨ç›´æ¥è¿”å›false</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;***********ç©ºé“¾è¡¨ï¼\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node *p1 = pHead, *p2 = pHead-&gt;pNext;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;Value &gt; p2-&gt;Value) <span class="comment">//å‰ä¸¤ä¸ªèŠ‚ç‚¹çš„æ•°æ®å¤§å°å…³ç³»</span></span><br><span class="line">    &#123;</span><br><span class="line">        p1 = p1-&gt;pNext;</span><br><span class="line">        p2 = p2-&gt;pNext;</span><br><span class="line">        <span class="keyword">while</span> (p2-&gt;pNext != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p1-&gt;Value &lt; p2-&gt;Value) <span class="comment">//åé¢ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹æ•°æ®çš„å¤§å°å…³ç³»ä¸å¤´éƒ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸åŒ</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;æ— åºï¼\n&quot;</span>; <span class="comment">//åˆ¤æ–­ä¸ºæ— åº</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            p1 = p1-&gt;pNext;</span><br><span class="line">            p2 = p2-&gt;pNext;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é™åºï¼\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        p1 = p1-&gt;pNext;</span><br><span class="line">        p2 = p2-&gt;pNext;</span><br><span class="line">        <span class="keyword">while</span> (p2-&gt;pNext != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (p1-&gt;Value &gt; p2-&gt;Value)</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;æ— åºï¼\n&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            p1 = p1-&gt;pNext;</span><br><span class="line">            p2 = p2-&gt;pNext;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å‡åºï¼\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LinkList::Display</span><span class="params">()</span> <span class="comment">//éå†è¾“å‡º</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¾æ¬¡éå†</span></span><br><span class="line">    Node *pPtr = pHead;</span><br><span class="line">    <span class="keyword">while</span> (pPtr != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">4</span>) &lt;&lt; pPtr-&gt;Value; <span class="comment">//è¾“å‡ºèŠ‚ç‚¹æ•°æ®</span></span><br><span class="line">        pPtr = pPtr-&gt;pNext;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">         &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LinkList::Erase</span><span class="params">(<span class="type">int</span> DelValue)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> Flag = <span class="number">0</span>;</span><br><span class="line">    Node *DelPos, *PrevPos = <span class="literal">NULL</span>;</span><br><span class="line">    DelPos = pHead;</span><br><span class="line">    <span class="keyword">while</span> (DelPos != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DelPos-&gt;Value == DelValue)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (PrevPos != <span class="literal">NULL</span>)</span><br><span class="line">                PrevPos-&gt;pNext = DelPos-&gt;pNext;</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">// PrevPosä»ä¸ºNULLï¼Œè¡¨æ˜åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">                pHead = pHead-&gt;pNext;</span><br><span class="line">            <span class="keyword">delete</span> DelPos;</span><br><span class="line">            Flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        PrevPos = DelPos;</span><br><span class="line">        DelPos = DelPos-&gt;pNext;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!Flag)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;é“¾è¡¨èŠ‚ç‚¹ä¸­ä¸å­˜åœ¨æ•°æ®&quot;</span> &lt;&lt; DelValue &lt;&lt; <span class="string">&quot;!\n\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">LinkList::<span class="built_in">LinkList</span>() <span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    pHead = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">LinkList::<span class="built_in">LinkList</span>(<span class="type">const</span> LinkList &amp;a) <span class="comment">//å¤åˆ¶æ„é€ å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!a.pHead)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;***********ç©ºé“¾è¡¨ï¼\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        pHead = <span class="keyword">new</span> <span class="built_in">Node</span>();</span><br><span class="line">        pHead-&gt;pNext = <span class="literal">NULL</span>;</span><br><span class="line">        Node *p1 = pHead;</span><br><span class="line">        Node *p2 = a.pHead-&gt;pNext;</span><br><span class="line">        pHead-&gt;Value = a.pHead-&gt;Value; <span class="comment">//å¤åˆ¶å¤´èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line">        <span class="keyword">while</span> (p2)                     <span class="comment">//ä¸‹ä¸€èŠ‚ç‚¹ä¸ä¸ºç©º</span></span><br><span class="line">        &#123;</span><br><span class="line">            p1-&gt;pNext = <span class="keyword">new</span> <span class="built_in">Node</span>(); <span class="comment">//å¼€è¾Ÿæ–°ç©ºé—´</span></span><br><span class="line">            p1 = p1-&gt;pNext;</span><br><span class="line">            p1-&gt;Value = p2-&gt;Value; <span class="comment">//å¤åˆ¶èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line">            p1-&gt;pNext = <span class="literal">NULL</span>;      <span class="comment">//é»˜è®¤ä¸‹ä¸€èŠ‚ç‚¹ä¸ºç©º</span></span><br><span class="line">            p2 = p2-&gt;pNext;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">LinkList LinkList::<span class="keyword">operator</span>=(<span class="type">const</span> LinkList &amp;a) <span class="comment">//=å·é‡è½½</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line">LinkList::~<span class="built_in">LinkList</span>() <span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (pHead != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Node *pTmp = pHead-&gt;pNext; <span class="comment">//è®°å½•å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä½ç½®</span></span><br><span class="line">        <span class="keyword">delete</span> pHead;              <span class="comment">//åˆ é™¤å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">        pHead = pTmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LinkList::IsEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!pHead)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;***********ç©ºé“¾è¡¨ï¼\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;***********éç©ºé“¾è¡¨ï¼\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LinkList::Push</span><span class="params">(<span class="type">int</span> InValue)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node *NewNode = <span class="keyword">new</span> Node;</span><br><span class="line">    NewNode-&gt;Value = InValue;</span><br><span class="line">    NewNode-&gt;pNext = <span class="literal">NULL</span>;</span><br><span class="line">    Node *pTmp = pHead;</span><br><span class="line">    pHead = NewNode;</span><br><span class="line">    pHead-&gt;pNext = pTmp; <span class="comment">//æŠŠæ–°å¢çš„èŠ‚ç‚¹æ”¾åˆ°é¦–ä½</span></span><br><span class="line">    <span class="keyword">return</span> InValue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    LinkList link1;</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">IsOrder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        link<span class="number">1.</span><span class="built_in">Push</span>(i * i);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ’å…¥æ‰€æœ‰èŠ‚ç‚¹å:\n&quot;</span>;</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">Display</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">IsOrder</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">ReSort</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">Display</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">IsOrder</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">Push</span>(<span class="number">33</span>);</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">Display</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">IsOrder</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">ReSort</span>();</span><br><span class="line">    link<span class="number">1.</span><span class="built_in">Display</span>();</span><br><span class="line">    <span class="comment">/*link1.Erase(1);</span></span><br><span class="line"><span class="comment">    link1.Erase(81);</span></span><br><span class="line"><span class="comment">    link1.Erase(25);</span></span><br><span class="line"><span class="comment">    link1.Erase(24);</span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;åˆ é™¤éƒ¨åˆ†èŠ‚ç‚¹å:\n&quot;;</span></span><br><span class="line"><span class="comment">    link1.Display();</span></span><br><span class="line"><span class="comment">    LinkList link2(link1);//å¤åˆ¶æ„é€ </span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;å¤åˆ¶æ„é€ åçš„æ–°é“¾è¡¨:\n&quot;;</span></span><br><span class="line"><span class="comment">    link2.Display();</span></span><br><span class="line"><span class="comment">    LinkList link3 = link2;//èµ‹å€¼è¿ç®—</span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;èµ‹å€¼åçš„æ–°é“¾è¡¨:\n&quot;;</span></span><br><span class="line"><span class="comment">    link3.Display();</span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;åˆ¤ç©º:\n&quot;;</span></span><br><span class="line"><span class="comment">    link3.IsEmpty();//åˆ¤ç©º</span></span><br><span class="line"><span class="comment">    LinkList link4;</span></span><br><span class="line"><span class="comment">    link4.IsEmpty();//åˆ¤ç©º</span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;\næŸ¥æ‰¾æ•°æ®9æ‰€åœ¨èŠ‚ç‚¹ï¼š\n&quot;;</span></span><br><span class="line"><span class="comment">    Node* newnode = link3.Find(9);//æŸ¥æ‰¾</span></span><br><span class="line"><span class="comment">    cout &lt;&lt; &quot;\næ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹å†…çš„æ•°æ®ï¼š&quot;&lt;&lt;newnode-&gt;Value &lt;&lt; &#x27;\n&#x27;;*/</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>é“¾è¡¨</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>c++ä½¿ç”¨newå’Œdeleteæ¥åˆ›å»ºå’Œé‡Šæ”¾åŠ¨æ€æ•°ç»„</title>
    <link href="/2020/09/17/c%E4%BD%BF%E7%94%A8new%E5%92%8Cdelete%E6%9D%A5%E5%88%9B%E5%BB%BA%E5%92%8C%E9%87%8A%E6%94%BE%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/"/>
    <url>/2020/09/17/c%E4%BD%BF%E7%94%A8new%E5%92%8Cdelete%E6%9D%A5%E5%88%9B%E5%BB%BA%E5%92%8C%E9%87%8A%E6%94%BE%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€åˆ›å»ºå¹¶é‡Šæ”¾ä¸€ç»´æ•°ç»„"><a href="#ä¸€ã€åˆ›å»ºå¹¶é‡Šæ”¾ä¸€ç»´æ•°ç»„" class="headerlink" title="ä¸€ã€åˆ›å»ºå¹¶é‡Šæ”¾ä¸€ç»´æ•°ç»„"></a>ä¸€ã€åˆ›å»ºå¹¶é‡Šæ”¾ä¸€ç»´æ•°ç»„</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="comment">//åˆ†é…åŠ¨æ€ä¸€ç»´æ•°ç»„ </span></span><br><span class="line">    <span class="type">int</span> *arr=<span class="keyword">new</span> <span class="type">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        cin&gt;&gt;arr[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">       cout&lt;&lt;arr[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="comment">//é‡Šæ”¾arræ•°ç»„ </span></span><br><span class="line">    <span class="keyword">delete</span>[] arr;</span><br><span class="line">    <span class="comment">//æ³¨æ„ï¼šdeleteåé¢çš„[]ä¸èƒ½å°‘!!</span></span><br><span class="line">    <span class="comment">//è‹¥å°‘äº†[],åˆ™åªä¼šé‡Šæ”¾ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒã€åˆ›å»ºå¹¶é‡Šæ”¾äºŒç»´æ•°ç»„"><a href="#äºŒã€åˆ›å»ºå¹¶é‡Šæ”¾äºŒç»´æ•°ç»„" class="headerlink" title="äºŒã€åˆ›å»ºå¹¶é‡Šæ”¾äºŒç»´æ•°ç»„"></a>äºŒã€åˆ›å»ºå¹¶é‡Šæ”¾äºŒç»´æ•°ç»„</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> row,col;</span><br><span class="line">    cin&gt;&gt;row&gt;&gt;col;</span><br><span class="line">    <span class="comment">//ä¸ºè¡ŒæŒ‡é’ˆåˆ†é…ç©ºé—´ </span></span><br><span class="line">    <span class="type">int</span> **arr=<span class="keyword">new</span> <span class="type">int</span> *[row];  </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)</span><br><span class="line">         arr[i]= <span class="keyword">new</span> <span class="type">int</span>[col];<span class="comment">//ä¸ºæ¯è¡Œåˆ†é…ç©ºé—´ï¼ˆæ¯è¡Œä¸­æœ‰colä¸ªå…ƒç´ ï¼‰ </span></span><br><span class="line">    <span class="comment">//è¾“å…¥äºŒç»´æ•°ç»„çš„æ•° </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;col;j++) </span><br><span class="line">        cin&gt;&gt;arr[i][j];</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;*******************&quot;</span>&lt;&lt;endl;</span><br><span class="line">     <span class="comment">//è¾“å‡ºäºŒç»´æ•°ç»„ä¸­çš„æ•°  </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)</span><br><span class="line">    &#123;</span><br><span class="line">         <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;col;j++) </span><br><span class="line">          cout&lt;&lt;arr[i][j]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        cout&lt;&lt;endl;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//é‡Šæ”¾äºŒç»´æ•°ç»„ï¼ˆåè¿‡æ¥ï¼‰ </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;row;i++)</span><br><span class="line">        <span class="keyword">delete</span>[] arr[i]; </span><br><span class="line">    <span class="keyword">delete</span>[] arr;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/2020/09/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2020/09/17/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h4 id="1-é€»è¾‘ç»“æ„"><a href="#1-é€»è¾‘ç»“æ„" class="headerlink" title="1.é€»è¾‘ç»“æ„"></a>1.é€»è¾‘ç»“æ„</h4><p>é€»è¾‘ç»“æ„åˆ†ä¸ºå››ç§ç±»å‹ï¼šé›†åˆç»“æ„ï¼Œçº¿æ€§ç»“æ„ï¼Œæ ‘å½¢ç»“æ„ï¼Œå›¾å½¢ç»“æ„ã€‚</p><h5 id="é›†åˆç»“æ„"><a href="#é›†åˆç»“æ„" class="headerlink" title="é›†åˆç»“æ„"></a>é›†åˆç»“æ„</h5><p>æ•°æ®å…ƒç´ åŒå±ä¸€ä¸ªé›†åˆï¼Œå•ä¸ªæ•°æ®å…ƒç´ ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</p><p><img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1634275952,4100464031&fm=26&gp=0.jpg"></p><h5 id="çº¿æ€§ç»“æ„"><a href="#çº¿æ€§ç»“æ„" class="headerlink" title="çº¿æ€§ç»“æ„"></a>çº¿æ€§ç»“æ„</h5><p>æ•°æ®å…ƒç´ é—´æ˜¯çº¿æ€§æ’åˆ—å…³ç³»ã€‚ä¸€å¯¹ä¸€ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-5.png"></p><h5 id="æ ‘å½¢ç»“æ„"><a href="#æ ‘å½¢ç»“æ„" class="headerlink" title="æ ‘å½¢ç»“æ„"></a>æ ‘å½¢ç»“æ„</h5><p>æ ‘å½¢ç»“æ„ä¸­çš„æ•°æ®å…ƒç´ æ‰€ç»„æˆå›¾å½¢ç±»ä¼¼äºæ ‘çŠ¶å›¾ã€‚ä¸€å¯¹å¤šã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-3.png"></p><h5 id="å›¾å½¢ç»“æ„"><a href="#å›¾å½¢ç»“æ„" class="headerlink" title="å›¾å½¢ç»“æ„"></a>å›¾å½¢ç»“æ„</h5><p>æ•°æ®å…ƒç´ ä¹‹é—´æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-4.png"></p><h4 id="2-ç‰©ç†ç»“æ„ï¼ˆå­˜å‚¨ç»“æ„ï¼‰"><a href="#2-ç‰©ç†ç»“æ„ï¼ˆå­˜å‚¨ç»“æ„ï¼‰" class="headerlink" title="2.ç‰©ç†ç»“æ„ï¼ˆå­˜å‚¨ç»“æ„ï¼‰"></a>2.ç‰©ç†ç»“æ„ï¼ˆå­˜å‚¨ç»“æ„ï¼‰</h4><p>ç‰©ç†ç»“æ„åˆå«å­˜å‚¨ç»“æ„ï¼Œåˆ†ä¸ºå››ç§ç§ï¼Œé¡ºåºå­˜å‚¨ç»“æ„ã€é“¾å¼å­˜å‚¨ç»“æ„ã€ç´¢å¼•ç»“æ„ã€æ•£åˆ—ç»“æ„ã€‚</p><h5 id="é¡ºåºå­˜å‚¨ç»“æ„"><a href="#é¡ºåºå­˜å‚¨ç»“æ„" class="headerlink" title="é¡ºåºå­˜å‚¨ç»“æ„"></a>é¡ºåºå­˜å‚¨ç»“æ„</h5><p>ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚</p><p>ä¼˜ç‚¹ï¼šéšæœºè®¿é—®</p><p>ç¼ºç‚¹ï¼šæ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œå¤§å°å›ºå®š</p><h5 id="é“¾å¼å­˜å‚¨ç»“æ„"><a href="#é“¾å¼å­˜å‚¨ç»“æ„" class="headerlink" title="é“¾å¼å­˜å‚¨ç»“æ„"></a>é“¾å¼å­˜å‚¨ç»“æ„</h5><p>ä¸è¿ç»­çš„å†…å­˜ç©ºé—´</p><p>ä¼˜ç‚¹ï¼šå¤§å°åŠ¨æ€æ‰©å±•ï¼Œæ’å…¥åˆ é™¤æ•ˆç‡é«˜</p><p>ç¼ºç‚¹ï¼šä¸èƒ½éšæœºè®¿é—®</p><h5 id="ç´¢å¼•å­˜å‚¨ç»“æ„"><a href="#ç´¢å¼•å­˜å‚¨ç»“æ„" class="headerlink" title="ç´¢å¼•å­˜å‚¨ç»“æ„"></a>ç´¢å¼•å­˜å‚¨ç»“æ„</h5><p>ä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾ï¼Œæ•´ä½“æ— åºï¼Œä½†ç´¢å¼•å—ä¹‹é—´æœ‰åºï¼Œéœ€è¦é¢å¤–ç©ºé—´ï¼Œå­˜å‚¨ç´¢å¼•è¡¨ã€‚</p><p>ä¼˜ç‚¹ï¼šå¯¹é¡ºåºæŸ¥æ‰¾çš„ä¸€ç§æ”¹è¿›ï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜</p><p>ç¼ºç‚¹ï¼šéœ€é¢å¤–ç©ºé—´å­˜å‚¨ç´¢å¼•</p><h5 id="æ•£åˆ—å­˜å‚¨ç»“æ„"><a href="#æ•£åˆ—å­˜å‚¨ç»“æ„" class="headerlink" title="æ•£åˆ—å­˜å‚¨ç»“æ„"></a><strong>æ•£åˆ—å­˜å‚¨ç»“æ„</strong></h5><p>é€‰å–æŸä¸ªå‡½æ•°ï¼Œæ•°æ®å…ƒç´ æ ¹æ®å‡½æ•°è®¡ç®—å­˜å‚¨ä½ç½®å¯èƒ½å­˜åœ¨å¤šä¸ªæ•°æ®å…ƒç´ å­˜å‚¨åœ¨åŒä¸€ä½ç½®ï¼Œå¼•èµ·åœ°å€å†²çª</p><p>ä¼˜ç‚¹ï¼šæŸ¥æ‰¾åŸºäºæ•°æ®æœ¬èº«å³å¯æ‰¾åˆ°ï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œå­˜å–æ•ˆç‡é«˜ã€‚</p><p>ç¼ºç‚¹ï¼šå­˜å–éšæœºï¼Œä¸ä¾¿äºé¡ºåºæŸ¥æ‰¾ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ’åºç®—æ³•æ€»ç»“</title>
    <link href="/2020/08/20/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/"/>
    <url>/2020/08/20/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h3 id="1-å†’æ³¡æ’åº"><a href="#1-å†’æ³¡æ’åº" class="headerlink" title="1.å†’æ³¡æ’åº"></a>1.å†’æ³¡æ’åº</h3><ul><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</li><li>æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/bubbleSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bubble_sort</span><span class="params">(T arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> i, j;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)<span class="comment">//è½®æ¬¡</span></span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)<span class="comment">//æ¯æ¬¡éœ€è¦æ•´ç†çš„åºåˆ—é•¿åº¦å‡ä¸€</span></span><br><span class="line">                        <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">                                <span class="built_in">swap</span>(arr[j], arr[j + <span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é€‰æ‹©æ’åº"><a href="#2-é€‰æ‹©æ’åº" class="headerlink" title="2.é€‰æ‹©æ’åº"></a>2.é€‰æ‹©æ’åº</h3><ul><li>é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ã€‚</li><li>å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚</li><li>é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/selectionSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">selection_sort</span><span class="params">(vector&lt;T&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">size</span>() - <span class="number">1</span>; i++) &#123;<span class="comment">//è½®æ¬¡</span></span><br><span class="line">                <span class="type">int</span> min = i;<span class="comment">//è®°å½•æœ€å°çš„ä¸‹æ ‡</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; arr.<span class="built_in">size</span>(); j++)</span><br><span class="line">                        <span class="keyword">if</span> (arr[j] &lt; arr[min])</span><br><span class="line">                                min = j;<span class="comment">//æœ‰æ›´å°çš„å°±æ›¿æ¢</span></span><br><span class="line">                std::<span class="built_in">swap</span>(arr[i], arr[min]);<span class="comment">//ä¸å¾…æ’ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æ’å…¥æ’åº"><a href="#3-æ’å…¥æ’åº" class="headerlink" title="3.æ’å…¥æ’åº"></a>3.æ’å…¥æ’åº</h3><ul><li>å°†ç¬¬ä¸€å¾…æ’åºåºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ çœ‹åšä¸€ä¸ªæœ‰åºåºåˆ—ï¼ŒæŠŠç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å½“æˆæ˜¯æœªæ’åºåºåˆ—ã€‚</li><li>ä»å¤´åˆ°å°¾ä¾æ¬¡æ‰«ææœªæ’åºåºåˆ—ï¼Œå°†æ‰«æåˆ°çš„æ¯ä¸ªå…ƒç´ æ’å…¥æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ã€‚ï¼ˆå¦‚æœå¾…æ’å…¥çš„å…ƒç´ ä¸æœ‰åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™å°†å¾…æ’å…¥å…ƒç´ æ’å…¥åˆ°ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚ï¼‰</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/insertionSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">insertion_sort</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> len)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line">                <span class="type">int</span> key=arr[i];</span><br><span class="line">                <span class="type">int</span> j=i<span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">while</span>((j&gt;=<span class="number">0</span>) &amp;&amp; (key&lt;arr[j]))&#123;</span><br><span class="line">                        arr[j<span class="number">+1</span>]=arr[j];<span class="comment">//å¾€å³ç§»ä½ç©ºå‡ºä½å­</span></span><br><span class="line">                        j--;</span><br><span class="line">                &#125;</span><br><span class="line">                arr[j<span class="number">+1</span>]=key;<span class="comment">//æ”¾å…¥ç©ºä½</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å¿«é€Ÿæ’åº"><a href="#4-å¿«é€Ÿæ’åº" class="headerlink" title="4.å¿«é€Ÿæ’åº"></a>4.å¿«é€Ÿæ’åº</h3><blockquote><p><em>å¿«é€Ÿæ’åºçš„æœ€åè¿è¡Œæƒ…å†µæ˜¯ O(nÂ²)ï¼Œæ¯”å¦‚è¯´é¡ºåºæ•°åˆ—çš„å¿«æ’ã€‚ä½†å®ƒçš„å¹³æ‘ŠæœŸæœ›æ—¶é—´æ˜¯ O(nlogn)ï¼Œä¸” O(nlogn) è®°å·ä¸­éšå«çš„å¸¸æ•°å› å­å¾ˆå°ï¼Œæ¯”å¤æ‚åº¦ç¨³å®šç­‰äº O(nlogn) çš„å½’å¹¶æ’åºè¦å°å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œå¯¹ç»å¤§å¤šæ•°é¡ºåºæ€§è¾ƒå¼±çš„éšæœºæ•°åˆ—è€Œè¨€ï¼Œå¿«é€Ÿæ’åºæ€»æ˜¯ä¼˜äºå½’å¹¶æ’åºã€‚</em></p><p>ã€Šç®—æ³•è‰ºæœ¯ä¸ä¿¡æ¯å­¦ç«èµ›ã€‹</p></blockquote><ul><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰;</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›</li><li>é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºï¼›</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/quickSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Paritition1</span>(<span class="type">int</span> A[], <span class="type">int</span> low, <span class="type">int</span> high) &#123;</span><br><span class="line">  <span class="type">int</span> pivot = A[low];</span><br><span class="line">  <span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">    <span class="keyword">while</span> (low &lt; high &amp;&amp; A[high] &gt;= pivot) &#123;</span><br><span class="line">      --high;</span><br><span class="line">    &#125;</span><br><span class="line">    A[low] = A[high];</span><br><span class="line">    <span class="keyword">while</span> (low &lt; high &amp;&amp; A[low] &lt;= pivot) &#123;</span><br><span class="line">      ++low;</span><br><span class="line">    &#125;</span><br><span class="line">    A[high] = A[low];</span><br><span class="line">  &#125;</span><br><span class="line">  A[low] = pivot;</span><br><span class="line">  <span class="keyword">return</span> low;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">QuickSort</span><span class="params">(<span class="type">int</span> A[], <span class="type">int</span> low, <span class="type">int</span> high)</span> <span class="comment">//å¿«æ’æ¯å‡½æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">    <span class="type">int</span> pivot = <span class="built_in">Paritition1</span>(A, low, high);</span><br><span class="line">    <span class="built_in">QuickSort</span>(A, low, pivot - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">QuickSort</span>(A, pivot + <span class="number">1</span>, high);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å½’å¹¶æ’åº"><a href="#5-å½’å¹¶æ’åº" class="headerlink" title="5.å½’å¹¶æ’åº"></a>5.å½’å¹¶æ’åº</h3><ul><li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›</li><li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤ 3 ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ï¼›</li><li>å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/mergeSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="comment">// æ•´æ•¸æˆ–æµ®é»æ•¸çš†å¯ä½¿ç”¨,è‹¥è¦ä½¿ç”¨ç‰©ä»¶(class)æ™‚å¿…é ˆè¨­å®š&quot;å°æ–¼&quot;(&lt;)çš„é‹ç®—å­åŠŸèƒ½</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_sort</span><span class="params">(T arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line">    T *a = arr;</span><br><span class="line">    T *b = <span class="keyword">new</span> T[len];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> seg = <span class="number">1</span>; seg &lt; len; seg += seg) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> start = <span class="number">0</span>; start &lt; len; start += seg + seg) &#123;</span><br><span class="line">            <span class="type">int</span> low = start, mid = <span class="built_in">min</span>(start + seg, len), high = <span class="built_in">min</span>(start + seg + seg, len);</span><br><span class="line">            <span class="type">int</span> k = low;</span><br><span class="line">            <span class="type">int</span> start1 = low, end1 = mid;</span><br><span class="line">            <span class="type">int</span> start2 = mid, end2 = high;</span><br><span class="line">            <span class="keyword">while</span> (start1 &lt; end1 &amp;&amp; start2 &lt; end2)</span><br><span class="line">                b[k++] = a[start1] &lt; a[start2] ? a[start1++] : a[start2++];</span><br><span class="line">            <span class="keyword">while</span> (start1 &lt; end1)</span><br><span class="line">                b[k++] = a[start1++];</span><br><span class="line">            <span class="keyword">while</span> (start2 &lt; end2)</span><br><span class="line">                b[k++] = a[start2++];</span><br><span class="line">        &#125;</span><br><span class="line">        T *temp = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a != arr) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        b = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-å †æ’åº"><a href="#6-å †æ’åº" class="headerlink" title="6.å †æ’åº"></a>6.å †æ’åº</h3><ul><li>åˆ›å»ºä¸€ä¸ªå † H[0â€¦â€¦n-1]ï¼›</li><li>æŠŠå †é¦–ï¼ˆæœ€å¤§å€¼ï¼‰å’Œå †å°¾äº’æ¢ï¼›</li><li>æŠŠå †çš„å°ºå¯¸ç¼©å° 1ï¼Œå¹¶è°ƒç”¨ ä¸‹è°ƒç®—æ³•ï¼Œç›®çš„æ˜¯æŠŠæ–°çš„æ•°ç»„é¡¶ç«¯æ•°æ®è°ƒæ•´åˆ°ç›¸åº”ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°å †çš„å°ºå¯¸ä¸º 1ã€‚</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/heapSort.gif"></p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/Sorting_heapsort_anim.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">max_heapify</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> start, <span class="type">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å»ºç«‹çˆ¶ç¯€é»æŒ‡æ¨™å’Œå­ç¯€é»æŒ‡æ¨™</span></span><br><span class="line">    <span class="type">int</span> dad = start;</span><br><span class="line">    <span class="type">int</span> son = dad * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (son &lt;= end) &#123; <span class="comment">// è‹¥å­ç¯€é»æŒ‡æ¨™åœ¨ç¯„åœå…§æ‰åšæ¯”è¼ƒ</span></span><br><span class="line">        <span class="keyword">if</span> (son + <span class="number">1</span> &lt;= end &amp;&amp; arr[son] &lt; arr[son + <span class="number">1</span>]) <span class="comment">// å…ˆæ¯”è¼ƒå…©å€‹å­ç¯€é»å¤§å°ï¼Œé¸æ“‡æœ€å¤§çš„</span></span><br><span class="line">            son++;</span><br><span class="line">        <span class="keyword">if</span> (arr[dad] &gt; arr[son]) <span class="comment">// å¦‚æœçˆ¶ç¯€é»å¤§æ–¼å­ç¯€é»ä»£è¡¨èª¿æ•´å®Œç•¢ï¼Œç›´æ¥è·³å‡ºå‡½æ•¸</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">// å¦å‰‡äº¤æ›çˆ¶å­å…§å®¹å†ç¹¼çºŒå­ç¯€é»å’Œå­«ç¯€é»æ¯”è¼ƒ</span></span><br><span class="line">            <span class="built_in">swap</span>(arr[dad], arr[son]);</span><br><span class="line">            dad = son;</span><br><span class="line">            son = dad * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heap_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–ï¼Œiå¾æœ€å¾Œä¸€å€‹çˆ¶ç¯€é»é–‹å§‹èª¿æ•´</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="built_in">max_heapify</span>(arr, i, len - <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// å…ˆå°‡ç¬¬ä¸€å€‹å…ƒç´ å’Œå·²ç»æ’å¥½çš„å…ƒç´ å‰ä¸€ä½åšäº¤æ›ï¼Œå†å¾æ–°èª¿æ•´(åˆšè°ƒæ•´çš„å…ƒç´ ä¹‹å‰çš„å…ƒç´ )ï¼Œç›´åˆ°æ’åºå®Œç•¢</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">swap</span>(arr[<span class="number">0</span>], arr[i]);</span><br><span class="line">        <span class="built_in">max_heapify</span>(arr, <span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> arr[] = &#123; <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">6</span> &#125;;</span><br><span class="line">    <span class="type">int</span> len = (<span class="type">int</span>) <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(*arr);</span><br><span class="line">    <span class="built_in">heap_sort</span>(arr, len);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-åŸºæ•°æ’åº"><a href="#7-åŸºæ•°æ’åº" class="headerlink" title="7.åŸºæ•°æ’åº"></a>7.åŸºæ•°æ’åº</h3><p>åŸºæ•°æ’åº(Radix Sort)æ˜¯æ¡¶æ’åºçš„æ‰©å±•ï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚<br>å…·ä½“åšæ³•æ˜¯ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><p>é€šè¿‡åŸºæ•°æ’åºå¯¹æ•°ç»„{53, 3, 542, 748, 14, 214, 154, 63, 616}ï¼Œå®ƒçš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-29.png"></p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/radixSort.gif"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">maxbit</span><span class="params">(<span class="type">int</span> data[], <span class="type">int</span> n)</span> <span class="comment">//è¾…åŠ©å‡½æ•°ï¼Œæ±‚æ•°æ®çš„æœ€å¤§ä½æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> maxData = data[<span class="number">0</span>];              <span class="comment">///&lt; æœ€å¤§æ•°</span></span><br><span class="line">    <span class="comment">/// å…ˆæ±‚å‡ºæœ€å¤§æ•°ï¼Œå†æ±‚å…¶ä½æ•°ï¼Œè¿™æ ·æœ‰åŸå…ˆä¾æ¬¡æ¯ä¸ªæ•°åˆ¤æ–­å…¶ä½æ•°ï¼Œç¨å¾®ä¼˜åŒ–ç‚¹ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (maxData &lt; data[i])</span><br><span class="line">            maxData = data[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> d = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> p = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">while</span> (maxData &gt;= p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//p *= 10; // Maybe overflow</span></span><br><span class="line">        maxData /= <span class="number">10</span>;</span><br><span class="line">        ++d;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line"><span class="comment">/*    int d = 1; //ä¿å­˜æœ€å¤§çš„ä½æ•°</span></span><br><span class="line"><span class="comment">    int p = 10;</span></span><br><span class="line"><span class="comment">    for(int i = 0; i &lt; n; ++i)</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        while(data[i] &gt;= p)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            p *= 10;</span></span><br><span class="line"><span class="comment">            ++d;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    return d;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">radixsort</span><span class="params">(<span class="type">int</span> data[], <span class="type">int</span> n)</span> <span class="comment">//åŸºæ•°æ’åº</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> d = <span class="built_in">maxbit</span>(data, n);</span><br><span class="line">    <span class="type">int</span> *tmp = <span class="keyword">new</span> <span class="type">int</span>[n];</span><br><span class="line">    <span class="type">int</span> *count = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>]; <span class="comment">//è®¡æ•°å™¨</span></span><br><span class="line">    <span class="type">int</span> i, j, k;</span><br><span class="line">    <span class="type">int</span> radix = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= d; i++) <span class="comment">//è¿›è¡Œdæ¬¡æ’åº</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">            count[j] = <span class="number">0</span>; <span class="comment">//æ¯æ¬¡åˆ†é…å‰æ¸…ç©ºè®¡æ•°å™¨</span></span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            k = (data[j] / radix) % <span class="number">10</span>; <span class="comment">//ç»Ÿè®¡æ¯ä¸ªæ¡¶ä¸­çš„è®°å½•æ•°</span></span><br><span class="line">            count[k]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">            count[j] = count[j - <span class="number">1</span>] + count[j]; <span class="comment">//å°†tmpä¸­çš„ä½ç½®ä¾æ¬¡åˆ†é…ç»™æ¯ä¸ªæ¡¶</span></span><br><span class="line">        <span class="keyword">for</span>(j = n - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) <span class="comment">//å°†æ‰€æœ‰æ¡¶ä¸­è®°å½•ä¾æ¬¡æ”¶é›†åˆ°tmpä¸­</span></span><br><span class="line">        &#123;</span><br><span class="line">            k = (data[j] / radix) % <span class="number">10</span>;</span><br><span class="line">            tmp[count[k] - <span class="number">1</span>] = data[j];</span><br><span class="line">            count[k]--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; n; j++) <span class="comment">//å°†ä¸´æ—¶æ•°ç»„çš„å†…å®¹å¤åˆ¶åˆ°dataä¸­</span></span><br><span class="line">            data[j] = tmp[j];</span><br><span class="line">        radix = radix * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []tmp;</span><br><span class="line">    <span class="keyword">delete</span> []count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/sort.png"></p><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/0B319B38-B70E-4118-B897-74EFA7E368F9.png"></p><h3 id="å…³äºæ—¶é—´å¤æ‚åº¦"><a href="#å…³äºæ—¶é—´å¤æ‚åº¦" class="headerlink" title="å…³äºæ—¶é—´å¤æ‚åº¦"></a>å…³äºæ—¶é—´å¤æ‚åº¦</h3><p>å¹³æ–¹é˜¶ (O(n2)) æ’åº å„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åºã€‚</p><p>çº¿æ€§å¯¹æ•°é˜¶ (O(nlog2n)) æ’åº å¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åºï¼›</p><p>O(n1+Â§)) æ’åºï¼ŒÂ§ æ˜¯ä»‹äº 0 å’Œ 1 ä¹‹é—´çš„å¸¸æ•°ã€‚ å¸Œå°”æ’åº</p><p>çº¿æ€§é˜¶ (O(n)) æ’åº åŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åºã€‚</p><p>å…³äºç¨³å®šæ€§</p><p>ç¨³å®šçš„æ’åºç®—æ³•ï¼šå†’æ³¡æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºã€‚</p><p>ä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼šé€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºã€å †æ’åºã€‚</p><p>åè¯è§£é‡Šï¼š</p><ul><li>nï¼šæ•°æ®è§„æ¨¡</li><li>kï¼šâ€æ¡¶â€çš„ä¸ªæ•°</li><li>In-placeï¼šå ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜</li><li>Out-placeï¼šå ç”¨é¢å¤–å†…å­˜</li><li>ç¨³å®šæ€§ï¼šæ’åºå 2 ä¸ªç›¸ç­‰é”®å€¼çš„é¡ºåºå’Œæ’åºä¹‹å‰å®ƒä»¬çš„é¡ºåºç›¸åŒ</li></ul>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å“ˆå¸Œï¼ˆHashï¼‰è¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰</title>
    <link href="/2020/08/20/%E5%93%88%E5%B8%8C%EF%BC%88hash%EF%BC%89%E8%A1%A8%EF%BC%88%E6%95%A3%E5%88%97%E8%A1%A8%EF%BC%89/"/>
    <url>/2020/08/20/%E5%93%88%E5%B8%8C%EF%BC%88hash%EF%BC%89%E8%A1%A8%EF%BC%88%E6%95%A3%E5%88%97%E8%A1%A8%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h3 id="å“ˆå¸Œè¡¨å®šä¹‰"><a href="#å“ˆå¸Œè¡¨å®šä¹‰" class="headerlink" title="å“ˆå¸Œè¡¨å®šä¹‰"></a>å“ˆå¸Œè¡¨å®šä¹‰</h3><p>å“ˆå¸Œè¡¨æ˜¯ä¸€ç§æ ¹æ®å…³é”®ç å»å¯»æ‰¾å€¼çš„æ•°æ®æ˜ å°„ç»“æ„ï¼Œæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯å­—å…¸ï¼Œå¦‚æœæˆ‘æƒ³è¦è·å–â€œ<strong>æŒ‰</strong>â€å­—è¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘è‚¯å®šä¼šå»æ ¹æ®æ‹¼éŸ³<strong>an</strong>å»æŸ¥æ‰¾æ‹¼éŸ³ç´¢å¼•ï¼Œåœ¨ç´¢å¼•åˆ—è¡¨ä¸­æ‰¾åˆ°<strong>an</strong>ï¼Œå‘ç°å®ƒçš„é¡µç æ˜¯4ã€‚è¿™å°±æ˜¯ä¸€ä¸ª<strong>é”®å€¼æ˜ å°„</strong>è¿‡ç¨‹ï¼Œé€šè¿‡<strong>å…³é”®å­—key</strong>æŸ¥æ‰¾å¯¹åº”çš„å€¼çš„<strong>ç´¢å¼•f(key)</strong>ã€‚å…¶ä¸­ï¼Œå…³é”®å­—å°±æ˜¯â€œæŒ‰â€ï¼Œf(key)å°±æ˜¯<strong>å“ˆå¸Œå‡½æ•°</strong>ï¼Œf(â€œæŒ‰â€)&#x3D;4å°±æ˜¯å“ˆå¸Œå€¼ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-24.png"></p><h3 id="å“ˆå¸Œè¡¨å†²çªï¼ˆæ•£åˆ—å†²çªï¼‰"><a href="#å“ˆå¸Œè¡¨å†²çªï¼ˆæ•£åˆ—å†²çªï¼‰" class="headerlink" title="å“ˆå¸Œè¡¨å†²çªï¼ˆæ•£åˆ—å†²çªï¼‰"></a>å“ˆå¸Œè¡¨å†²çªï¼ˆæ•£åˆ—å†²çªï¼‰</h3><p>ä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬è¦æŸ¥çš„æ˜¯â€œæŒ‰â€ï¼Œè€Œä¸æ˜¯â€œå®‰ï¼Œä½†æ˜¯ä»–ä»¬çš„æ‹¼éŸ³éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡å…³é”®å­—æŒ‰å’Œå…³é”®å­—å®‰å¯ä»¥æ˜ å°„åˆ°ä¸€æ ·çš„å­—å…¸é¡µç 4çš„ä½ç½®ï¼Œè¿™å°±æ˜¯å“ˆå¸Œå†²çªï¼ˆä¹Ÿå«å“ˆå¸Œç¢°æ’ï¼‰ï¼Œåœ¨å…¬å¼ä¸Šè¡¨è¾¾å°±æ˜¯key1â‰ key2ï¼Œä½†f(key1)&#x3D;f(key2)ã€‚å†²çªä¼šç»™æŸ¥æ‰¾å¸¦æ¥éº»çƒ¦ï¼Œä½ æƒ³æƒ³ï¼Œä½ æœ¬æ¥æŸ¥æ‰¾çš„æ˜¯â€œæŒ‰â€ï¼Œä½†æ˜¯å´æ‰¾åˆ°â€œå®‰â€å­—ï¼Œä½ åˆå¾—å‘åç¿»ä¸€ä¸¤é¡µï¼Œåœ¨è®¡ç®—æœºé‡Œé¢ä¹Ÿæ˜¯ä¸€æ ·é“ç†çš„ã€‚</p><p>ã€€ã€€ä½†å“ˆå¸Œå†²çªæ˜¯æ— å¯é¿å…çš„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œå› ä¸ºä½ å¦‚æœè¦å®Œå…¨é¿å¼€è¿™ç§æƒ…å†µï¼Œä½ åªèƒ½æ¯ä¸ªå­—å…¸å»æ–°å¼€ä¸€ä¸ªé¡µï¼Œç„¶åæ¯ä¸ªå­—åœ¨ç´¢å¼•é‡Œé¢éƒ½æœ‰å¯¹åº”çš„é¡µç ï¼Œè¿™å°±å¯ä»¥é¿å…å†²çªã€‚ä½†æ˜¯ä¼šå¯¼è‡´ç©ºé—´å¢å¤§ï¼ˆæ¯ä¸ªå­—éƒ½æœ‰ä¸€é¡µï¼‰ã€‚</p><p>ã€€ã€€æ—¢ç„¶æ— æ³•é¿å…ï¼Œå°±åªèƒ½å°½é‡å‡å°‘å†²çªå¸¦æ¥çš„æŸå¤±ï¼Œè€Œä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°éœ€è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><p>ã€€ã€€1.å°½é‡ä½¿å…³é”®å­—å¯¹åº”çš„è®°å½•å‡åŒ€åˆ†é…åœ¨å“ˆå¸Œè¡¨é‡Œé¢ï¼ˆæ¯”å¦‚è¯´æŸå‚å•†å–30æ ‹æˆ¿å­ï¼Œå‡åŒ€åˆ’åˆ†ABCï¼Œ3ä¸ªåŒºåŸŸï¼Œå¦‚æœä½ åˆ’åˆ†AåŒºåŸŸ1ä¸ªæˆ¿å­ï¼ŒBåŒºåŸŸ1ä¸ªæˆ¿å­ï¼ŒCåŒºåŸŸ28ä¸ªæˆ¿å­ï¼Œæœ‰äººæ¥æŸ¥æ‰¾CåŒºåŸŸçš„æŸä¸ªæˆ¿å­æœ€åçš„æƒ…å†µå°±æ˜¯è¦æ‰¾28æ¬¡ï¼‰ã€‚</p><p>ã€€ã€€2.å…³é”®å­—æå°çš„å˜åŒ–å¯ä»¥å¼•èµ·å“ˆå¸Œå€¼æå¤§çš„å˜åŒ–ã€‚</p><h4 id="å¸¸è§çš„å“ˆå¸Œå‡½æ•°"><a href="#å¸¸è§çš„å“ˆå¸Œå‡½æ•°" class="headerlink" title="å¸¸è§çš„å“ˆå¸Œå‡½æ•°"></a><strong>å¸¸è§çš„å“ˆå¸Œå‡½æ•°</strong></h4><ul><li>ç›´æ¥å®šåˆ¶æ³•ï¼šå³å–å…ƒç´ çš„æŸä¸ªçº¿æ€§å‡½æ•°ä¸ºæ•£åˆ—åœ°å€ï¼šHash(key) &#x3D; A*key +B;ä¾‹å¦‚ï¼šæ‰¾å‡ºå­—ç¬¦ä¸²ä¸­åªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N),ç©ºé—´å¤æ‚åº¦ä¸ºï¼šO(1);(å°±å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¼€è¾Ÿä¸€ä¸ª256ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¿›è¡Œç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°)ä¼˜ç‚¹ï¼šç®€å•ï¼Œå‡åŒ€é€‚åˆäºæŸ¥æ‰¾æ¯”è¾ƒå°è€Œä¸”è¿ç»­çš„æƒ…å†µã€‚</li><li>é™¤ç•™å–ä½™æ³•ï¼šï¼ˆæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼‰Hash(key) &#x3D; key % p;(p &lt;&#x3D; m &amp;&amp; p è´¨æ•°)ï¼Œmä¸ºæ•£åˆ—è¡¨ä¸­å…è®¸çš„åœ°å€ä¸ªæ•°ã€‚</li><li>å¹³æ–¹å–ä¸­æ³•ï¼š<br>å¯¹æ•°æ®è¿›è¡Œå¹³æ–¹ï¼Œç„¶åå–æ•°æ®çš„ä¸­é—´3ä½ä¸ºå“ˆå¸Œåœ°å€ã€‚<br>é€‚åˆäºï¼šä¸çŸ¥é“æ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œä½†æ˜¯æ•°å­—åˆä¸æ˜¯å¾ˆå¤§çš„æƒ…å†µ</li></ul><h3 id="å†²çªå¤„ç†ç­–ç•¥"><a href="#å†²çªå¤„ç†ç­–ç•¥" class="headerlink" title="å†²çªå¤„ç†ç­–ç•¥"></a>å†²çªå¤„ç†ç­–ç•¥</h3><h4 id="1-é—­æ•£åˆ—ï¼ˆæ”¾åœ°å€æ³•ï¼‰"><a href="#1-é—­æ•£åˆ—ï¼ˆæ”¾åœ°å€æ³•ï¼‰" class="headerlink" title="1.é—­æ•£åˆ—ï¼ˆæ”¾åœ°å€æ³•ï¼‰"></a>1.<strong>é—­æ•£åˆ—ï¼ˆæ”¾åœ°å€æ³•ï¼‰</strong></h4><p><strong>çº¿æ€§æ¢æµ‹æ³•</strong>æŸ¥æ‰¾ä¸‹ä¸€ä¸ªä½ç½®:<br>ä¾‹å¦‚ï¼šå…³é”®ç é›†åˆä¸ºï¼š{37ï¼Œ25ï¼Œ14ï¼Œ36ï¼Œ49ï¼Œ57ï¼Œ11}ï¼Œè®¾è¡¨çš„é•¿åº¦ä¸º12ï¼ŒHash(key) &#x3D; key%p(p &#x3D; 11);<br>Hash(37) &#x3D; 4;<br>Hash(25) &#x3D; 3;<br>Hash(14) &#x3D; 3;<br>Hash(36) &#x3D; 3;<br>Hash(49) &#x3D; 5;<br>Hash(57) &#x3D; 2;<br>Hash(11) &#x3D; 0;<br>å¾ˆæ˜æ˜¾ï¼šè¿™ç»„æ•°æ®çš„å“ˆå¸Œåœ°å€æœ‰å†²çªã€‚<br>åœ¨æ’å…¥æ—¶ï¼Œå¦‚æœè¯¥ä½ç½®å·²ç»æœ‰å…ƒç´ äº†ï¼Œå°±ä»è¯¥ä½ç½®èµ·å‘åæ‰¾ï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®å°±è¿›è¡Œæ’å…¥ã€‚<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-25.png"></p><p><strong>äºŒæ¬¡æ¢æµ‹</strong>æ³•ï¼š<br>å°±æ˜¯å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼Œå¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºé—²ä½ç½®æ—¶ï¼Œé¦–å…ˆåœ¨è¯¥ä½ç½®å¤„åŠ 1çš„å¹³æ–¹ï¼Œè‹¥åŠ 1çš„å¹³æ–¹çš„ä½ç½®å¤„ä¾ç„¶æœ‰å…ƒç´ ï¼Œé‚£å°±åŠ 2çš„å¹³æ–¹ï¼ŒçŸ¥é“æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„ä½ç½®ä¸ºæ­¢ã€‚</p><p>ä¼˜ç‚¹ï¼šç®€å• æ˜“æ‡‚<br><strong>ç¼ºç‚¹ï¼šä¸€æ—¦å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼Œæ‰€æœ‰çš„å†²çªè¿æ¥åœ¨ä¸€èµ·ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿæ•°æ®â€å †ç§¯â€ã€‚å³ä¸åŒçš„æ•°æ®å ç”¨å¯ä»¥åˆ©ç”¨çš„ä½ç½®ï¼Œå°±ä½¿å¾—å¯»æ‰¾å…¶ä½™æ•°æ®çš„ä½ç½®éœ€è¦è¿›è¡Œå¤šæ¬¡æ¯”è¾ƒï¼Œå°±ä¼šå¯¼è‡´æŸ¥æ‰¾çš„æ•ˆç‡é™ä½ã€‚</strong></p><h4 id="2-å¼€æ•£åˆ—ï¼ˆé“¾åœ°å€æ³•ï¼‰"><a href="#2-å¼€æ•£åˆ—ï¼ˆé“¾åœ°å€æ³•ï¼‰" class="headerlink" title="2.å¼€æ•£åˆ—ï¼ˆé“¾åœ°å€æ³•ï¼‰"></a>2.<strong>å¼€æ•£åˆ—</strong>ï¼ˆé“¾åœ°å€æ³•ï¼‰</h4><p>ä¸Šé¢æ‰€è¯´çš„å¼€å‘å®šå€æ³•çš„åŸç†æ˜¯é‡åˆ°å†²çªçš„æ—¶å€™æŸ¥æ‰¾é¡ºç€åŸæ¥å“ˆå¸Œåœ°å€æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç©ºé—²åœ°å€ç„¶åæ’å…¥ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚æœç©ºé—´ä¸è¶³ï¼Œé‚£ä»–æ— æ³•å¤„ç†å†²çªä¹Ÿæ— æ³•æ’å…¥æ•°æ®ï¼Œå› æ­¤éœ€è¦è£…å¡«å› å­(æ’å…¥æ•°æ®&#x2F;ç©ºé—´)&lt;&#x3D;1ã€‚</p><p>ã€€ã€€é‚£æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ç§é—®é¢˜å‘¢ï¼Ÿé“¾åœ°å€æ³•å¯ä»¥ï¼Œå…ˆç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—æ¯ä¸ªæ•°æ®çš„æ•£åˆ—åœ°å€ï¼ŒæŠŠå…·æœ‰ç›¸åŒåœ°å€çš„å…ƒç´ å½’äºåŒä¸€ä¸ªé›†åˆä¹‹ä¸­ï¼ŒæŠŠè¯¥é›†åˆå¤„ç†ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨çš„å¤´èŠ‚ç‚¹å­˜å‚¨äºå“ˆå¸Œè¡¨ä¹‹ä¸­ã€‚<br>ä¾‹å¦‚ï¼šè¿˜æ˜¯ä¸Šé¢é—­æ•£åˆ—ä¸­çš„ä¾‹å­ï¼Œå½“ä½¿ç”¨å¼€æ•£åˆ—çš„æ–¹æ³•åï¼Œå…¶æ¯ä¸ªå…ƒç´ çš„å­˜å‚¨ä¸ºä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-28.png"></p><p>å¯è§ï¼Œå¼€æ•£åˆ—æ³•æœ‰æ•ˆçš„è§£å†³äº†æ•°æ®æº¢å‡ºï¼Œä¸è¿‡éœ€è¦å¢è®¾é“¾æ¥æŒ‡é’ˆï¼Œå¢åŠ äº†å­˜å‚¨çš„å¼€é”€ã€‚ä½†æ˜¯ï¼Œæ€»ä½“è€Œè¨€ï¼Œæ•ˆç‡è¿˜æ˜¯å¿«çš„å¤šã€‚</p><h3 id="å“ˆå¸Œè¡¨çš„æ€§èƒ½"><a href="#å“ˆå¸Œè¡¨çš„æ€§èƒ½" class="headerlink" title="å“ˆå¸Œè¡¨çš„æ€§èƒ½"></a>å“ˆå¸Œè¡¨çš„æ€§èƒ½</h3><p>ç”±äºå“ˆå¸Œè¡¨é«˜æ•ˆçš„ç‰¹æ€§ï¼ŒæŸ¥æ‰¾æˆ–è€…æ’å…¥çš„æƒ…å†µåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥è¾¾åˆ°O(1)ï¼Œæ—¶é—´ä¸»è¦èŠ±åœ¨è®¡ç®—hashä¸Šï¼Œå½“ç„¶ä¹Ÿæœ‰æœ€åçš„æƒ…å†µå°±æ˜¯hashå€¼å…¨éƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªåœ°å€ä¸Šï¼Œè¿™æ ·å“ˆå¸Œè¡¨å°±ä¼šé€€åŒ–æˆé“¾è¡¨ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å˜æˆO(n)ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µæ¯”è¾ƒå°‘ï¼Œåªè¦ä¸è¦æŠŠhashè®¡ç®—çš„å…¬å¼å¤–æ¼å‡ºå»å¹¶ä¸”æœ‰äººæ•…æ„æ”»å‡»ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-27.png"></p><p>å‚è€ƒåŸæ–‡</p><p><a href="https://www.cnblogs.com/s-b-b/p/6208565.html">https://www.cnblogs.com/s-b-b/p/6208565.html</a></p><p><a href="https://blog.csdn.net/Yinghuhu333333/article/details/81364739">https://blog.csdn.net/Yinghuhu333333/article/details/81364739</a></p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
      <tag>å“ˆå¸Œè¡¨</tag>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—¶é—´å¤æ‚åº¦</title>
    <link href="/2020/08/20/%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/"/>
    <url>/2020/08/20/%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>æˆ‘ä»¬å¾€å¾€æŠŠä¸€ä¸ªç®—æ³•çš„å¤æ‚åº¦åˆ†ä¸º<strong>æ—¶é—´å¤æ‚åº¦</strong>å’Œ<strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼Œæ—¶é—´å¤æ‚åº¦å¯¹åº”ç®—æ³•æ‰§è¡Œæ‰€éœ€è¦çš„æ—¶é—´ï¼Œç©ºé—´å¤æ‚åº¦å¯¹åº”æ‰€éœ€è¦çš„å†…å­˜ï¼Œç›¸å¯¹æ¥è®²ç©ºé—´ä»£ä»·è‚¯å®šæ˜¯æ¯”æ—¶é—´ä»£ä»·æ›´å°ï¼Œæ‰€ä»¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æˆä¸ºè¯„ä»·ç®—æ³•ä¼˜åŠ£çš„æœ€é‡è¦çš„æŒ‡æ ‡ä¹‹ä¸€ã€‚</p><p>å¼•ç”¨ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼šâ€œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°ï¼Œç”¨T(n)è¡¨ç¤ºï¼Œè‹¥æœ‰æŸä¸ªè¾…åŠ©å‡½æ•°f(n),ä½¿å¾—å½“nè¶‹è¿‘äºæ— ç©·å¤§æ—¶ï¼ŒTï¼ˆn)&#x2F;f (n)çš„æé™å€¼ä¸ºä¸ç­‰äºé›¶çš„å¸¸æ•°ï¼Œåˆ™ç§°f(n)æ˜¯T(n)çš„åŒæ•°é‡çº§å‡½æ•°ã€‚è®°ä½œT(n)&#x3D;O(f(n)),ç§°O(f(n)) ä¸ºç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚â€</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å¦‚æœè¾“å…¥è§„æ¨¡ä¸ºnï¼Œé‚£ä¹ˆç®—æ³•çš„æ—¶é—´åŸºæœ¬ä¸Šå¯ä»¥ç”¨ä¸€ä¸ªå…³äºnçš„å‡½æ•°f(n)è¡¨ç¤ºï¼Œæ—¶é—´å¤æ‚åº¦T(n)&#x3D;O(f(n)),f(n)ä»…ä¿ç•™æœ€é«˜æ¬¡é¡¹ï¼Œä¸”èˆå»ç³»æ•°ã€‚</p><p>å¦‚ç®—æ³•æ‰§è¡Œæ‰€éœ€æ—¶é—´f(n)&#x3D;6n^3+2n+3,T(n)&#x3D;O(f(n))&#x3D;O(n^3)</p><h4 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h4><h5 id="çº¿æ€§æŸ¥æ‰¾ï¼šf-n-nï¼ŒT-n-O-f-n-O-n"><a href="#çº¿æ€§æŸ¥æ‰¾ï¼šf-n-nï¼ŒT-n-O-f-n-O-n" class="headerlink" title="çº¿æ€§æŸ¥æ‰¾ï¼šf(n)&#x3D;nï¼ŒT(n)&#x3D;O(f(n))&#x3D;O(n)"></a>çº¿æ€§æŸ¥æ‰¾ï¼šf(n)&#x3D;nï¼ŒT(n)&#x3D;O(f(n))&#x3D;O(n)</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">function</span><span class="params">(vector&lt;<span class="type">int</span>&gt; vec,<span class="type">int</span> tag)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n=vec.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(vec[i]==tag)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æŠ˜åŠæŸ¥æ‰¾ï¼šf-n-log-2-nï¼ŒT-n-O-f-n-O-logn"><a href="#æŠ˜åŠæŸ¥æ‰¾ï¼šf-n-log-2-nï¼ŒT-n-O-f-n-O-logn" class="headerlink" title="æŠ˜åŠæŸ¥æ‰¾ï¼šf(n)&#x3D;log(2)nï¼ŒT(n)&#x3D;O(f(n))&#x3D;O(logn)"></a>æŠ˜åŠæŸ¥æ‰¾ï¼šf(n)&#x3D;log(2)nï¼ŒT(n)&#x3D;O(f(n))&#x3D;O(logn)</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">function</span><span class="params">(vector&lt;<span class="type">int</span>&gt; vec,<span class="type">int</span> tag)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//vecæ˜¯å‡åºå‘é‡</span></span><br><span class="line">    <span class="type">int</span> first=<span class="number">0</span>,last=vec.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(first&lt;=last)</span><br><span class="line">    &#123;</span><br><span class="line">        index=(first+last)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(vec[index]&gt;tag)</span><br><span class="line">            last=index<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(vec[index]&gt;tag)</span><br><span class="line">            first=index<span class="number">+1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSæ§åˆ¶æ–‡æœ¬æ¡†ç¦æ­¢è¾“å…¥ç‰¹æ®Šå­—ç¬¦</title>
    <link href="/2020/08/12/js%E6%8E%A7%E5%88%B6%E6%96%87%E6%9C%AC%E6%A1%86%E7%A6%81%E6%AD%A2%E8%BE%93%E5%85%A5%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/"/>
    <url>/2020/08/12/js%E6%8E%A7%E5%88%B6%E6%96%87%E6%9C%AC%E6%A1%86%E7%A6%81%E6%AD%A2%E8%BE%93%E5%85%A5%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<h4 id="JS-æ§åˆ¶ä¸èƒ½è¾“å…¥ç‰¹æ®Šå­—ç¬¦"><a href="#JS-æ§åˆ¶ä¸èƒ½è¾“å…¥ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="JS æ§åˆ¶ä¸èƒ½è¾“å…¥ç‰¹æ®Šå­—ç¬¦"></a><strong>JS æ§åˆ¶ä¸èƒ½è¾“å…¥ç‰¹æ®Šå­—ç¬¦</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span><span class="attr">class</span>=<span class="string">&quot;domain&quot;</span><span class="attr">onkeyup</span>=<span class="string">&quot;this.value=this.value.replace(/[^u4e00-u9fa5w]/g,&#x27;&#x27;)&quot;</span>ï¼›</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag"><span class="attr">this.value</span>=<span class="string">this.value.replace(/[^u4e00-u9fa5w]/g,</span>&#x27;&#x27;)</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^0-9]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^0-9]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^0-9]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—ã€å°æ•°ç‚¹"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—ã€å°æ•°ç‚¹" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—ã€å°æ•°ç‚¹"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥æ•°å­—ã€å°æ•°ç‚¹</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\0-9\\.]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\0-9\\.]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\0-9\\.]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥è‹±æ–‡ã€æ•°å­—</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\ ]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\ ]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\ ]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€å°æ•°ç‚¹"><a href="#JS-æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€å°æ•°ç‚¹" class="headerlink" title="JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€å°æ•°ç‚¹"></a><strong>JS æ§åˆ¶æ–‡æœ¬æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€å°æ•°ç‚¹</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onkeyup</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\.]/g,&#x27;&#x27;)&quot;</span> <span class="attr">onpaste</span>=<span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\.]/g,&#x27;&#x27;)&quot;</span> <span class="attr">oncontextmenu</span> = <span class="string">&quot;value=value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5\\.]/g,&#x27;&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://www.jb51.net/article/110620.htm">https://www.jb51.net/article/110620.htm</a></p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JSåŠ¨æ€æ·»åŠ div</title>
    <link href="/2020/08/12/js%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0div/"/>
    <url>/2020/08/12/js%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0div/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å®ä¾‹è®²è¿°äº†jQueryä¸­prepend()æ–¹æ³•ã€‚</p><p>æ­¤æ–¹æ³•å¯å‘æ‰€æœ‰åŒ¹é…å…ƒç´ çš„å†…éƒ¨çš„å‰é¢è¿½åŠ HTMLå†…å®¹ã€‚</p><h4 id="ç‰¹åˆ«è¯´æ˜"><a href="#ç‰¹åˆ«è¯´æ˜" class="headerlink" title="ç‰¹åˆ«è¯´æ˜:"></a><strong>ç‰¹åˆ«è¯´æ˜:</strong></h4><p>æ­¤æ–¹æ³•æ˜¯è¿½åŠ å†…å®¹ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„å†…å®¹è¿˜åœ¨ã€‚<br>HTMLå†…å®¹å°±æ˜¯å†…å®¹ä¸­å¯ä»¥åŒ…å«HTMLæ ‡ç­¾ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«æµè§ˆå™¨æ¸²æŸ“ã€‚<br>æ–‡æœ¬å†…å®¹æ˜¯å…ˆå°†å†…å®¹ä¸­çš„htmlé¢„å®šä¹‰å­—ç¬¦è½¬æ¢æˆhtmlå­—ç¬¦å®ä½“ï¼Œè¿™æ ·htmlæ ‡ç­¾å°±ä¸ä¼šè¢«æ¸²æŸ“ã€‚</p><h4 id="è¯­æ³•ç»“æ„"><a href="#è¯­æ³•ç»“æ„" class="headerlink" title="è¯­æ³•ç»“æ„:"></a><strong>è¯­æ³•ç»“æ„:</strong></h4><p>ä»£ç å¦‚ä¸‹:$(selector).prepend(content)</p><h4 id="å®ä¾‹ä»£ç "><a href="#å®ä¾‹ä»£ç " class="headerlink" title="å®ä¾‹ä»£ç :"></a><strong>å®ä¾‹ä»£ç :</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot; utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&quot;div&quot;</span>).<span class="title function_">prepend</span>(<span class="string">&quot;&lt;b&gt;æ–°å¢å†…å®¹&lt;/b&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript">  $(<span class="string">&quot;#divid&quot;</span>).<span class="title function_">prepend</span>(<span class="string">&#x27;&lt;div&gt;æŒ‰é’®æ·»åŠ çš„æ–°å†…å®¹&lt;/div&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;divid&#x27;</span>&gt;</span>åŸæ¥å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ·»åŠ &quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;submit()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h4><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/08/image.png"></p>]]></content>
    
    
    <categories>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginx+PHPé…ç½®</title>
    <link href="/2020/08/11/nginxphp%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/08/11/nginxphp%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h4 id="åœ¨nginx-confä¸­æ·»åŠ ä¸€ä¸ªserver"><a href="#åœ¨nginx-confä¸­æ·»åŠ ä¸€ä¸ªserver" class="headerlink" title="åœ¨nginx.confä¸­æ·»åŠ ä¸€ä¸ªserver"></a>åœ¨nginx.confä¸­æ·»åŠ ä¸€ä¸ªserver</h4><pre><code>server &#123;    listen 999;    server_name blog.xinhaojin.top;    location ~\\.php?.*$ &#123;        root /www/wwwroot/blog.xinhaojin.top;#phpæ–‡ä»¶ç›®å½•        fastcgi_pass unix:/tmp/php-cgi-70.sock;#.sockçš„å½¢å¼        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include fastcgi_params;    &#125;&#125;</code></pre><h4 id="éœ€è¦æ³¨æ„çš„æ˜¯php-fpm-confä¸nginx-confçš„ç›‘å¬æ–¹å¼æ˜¯å¦ç›¸åŒ"><a href="#éœ€è¦æ³¨æ„çš„æ˜¯php-fpm-confä¸nginx-confçš„ç›‘å¬æ–¹å¼æ˜¯å¦ç›¸åŒ" class="headerlink" title="éœ€è¦æ³¨æ„çš„æ˜¯php-fpm.confä¸nginx.confçš„ç›‘å¬æ–¹å¼æ˜¯å¦ç›¸åŒ"></a>éœ€è¦æ³¨æ„çš„æ˜¯php-fpm.confä¸nginx.confçš„ç›‘å¬æ–¹å¼æ˜¯å¦ç›¸åŒ</h4><p>æ–¹å¼1ï¼Œç»Ÿä¸€æˆip+portçš„å½¢å¼:</p><pre><code>php-fpm.conf:listenÂ =Â 127.0.0.1:9000nginx.conf:fastcgi_passÂ 127.0.0.1:9000;</code></pre><p>æ–¹å¼2ï¼Œç»Ÿä¸€æˆ.sockçš„å½¢å¼:</p><pre><code>php-fpm.conf:listenÂ =Â /tmp/php-fpm.socknginx.conf:fastcgi_passÂ unix:/tmp/php-fpm.sock;</code></pre><p>ç„¶å<a href="http://xx.xx.xx.xx/test.php%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%BF%90%E8%A1%8C%E4%BA%86">http://xx.xx.xx.xx/test.phpå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†</a></p><h4 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h4>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
      <tag>php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS ä¸‹æºç å®‰è£… Node.js</title>
    <link href="/2020/07/05/centos-%E4%B8%8B%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85-node-js/"/>
    <url>/2020/07/05/centos-%E4%B8%8B%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85-node-js/</url>
    
    <content type="html"><![CDATA[<h4 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h4><pre><code>curl --silent --location https://rpm.nodesource.com/setup_10.x  sudo bashcurl --silent --location https://rpm.nodesource.com/setup_10.x  sudo bash</code></pre><h2 id="Installing-the-NodeSource-Node-js-10-x-repoâ€¦"><a href="#Installing-the-NodeSource-Node-js-10-x-repoâ€¦" class="headerlink" title="Installing the NodeSource Node.js 10.x repoâ€¦"></a>Installing the NodeSource Node.js 10.x repoâ€¦</h2><h2 id="Inspecting-systemâ€¦"><a href="#Inspecting-systemâ€¦" class="headerlink" title="Inspecting systemâ€¦"></a>Inspecting systemâ€¦</h2><ul><li>rpm -q â€“whatprovides redhat-release  rpm -q â€“whatprovides centos-release  rpm -q â€“whatprovides cloudlinux-release  rpm -q â€“whatprovides sl-release</li><li>uname -m</li></ul><h2 id="Confirming-â€œel6-x86-64â€-is-supportedâ€¦"><a href="#Confirming-â€œel6-x86-64â€-is-supportedâ€¦" class="headerlink" title="Confirming â€œel6-x86_64â€ is supportedâ€¦"></a>Confirming â€œel6-x86_64â€ is supportedâ€¦</h2><ul><li>curl -sLf -o &#x2F;dev&#x2F;null â€˜<a href="https://rpm.nodesource.com/pub_10.x/el/6/x86_64/nodesource-release-el6-1.noarch.rpm">https://rpm.nodesource.com/pub_10.x/el/6/x86_64/nodesource-release-el6-1.noarch.rpm</a>â€˜</li></ul><h2 id="Downloading-release-setup-RPMâ€¦"><a href="#Downloading-release-setup-RPMâ€¦" class="headerlink" title="Downloading release setup RPMâ€¦"></a>Downloading release setup RPMâ€¦</h2><ul><li>mktemp</li><li>curl -sL -o â€˜&#x2F;tmp&#x2F;tmp.aoQY5ifb9mâ€™ â€˜<a href="https://rpm.nodesource.com/pub_10.x/el/6/x86_64/nodesource-release-el6-1.noarch.rpm">https://rpm.nodesource.com/pub_10.x/el/6/x86_64/nodesource-release-el6-1.noarch.rpm</a>â€˜</li></ul><h2 id="Installing-release-setup-RPMâ€¦"><a href="#Installing-release-setup-RPMâ€¦" class="headerlink" title="Installing release setup RPMâ€¦"></a>Installing release setup RPMâ€¦</h2><ul><li>rpm -i â€“nosignature â€“force â€˜&#x2F;tmp&#x2F;tmp.aoQY5ifb9mâ€™</li></ul><h2 id="Cleaning-upâ€¦"><a href="#Cleaning-upâ€¦" class="headerlink" title="Cleaning upâ€¦"></a>Cleaning upâ€¦</h2><ul><li>rm -f â€˜&#x2F;tmp&#x2F;tmp.aoQY5ifb9mâ€™</li></ul><h2 id="Checking-for-existing-installationsâ€¦"><a href="#Checking-for-existing-installationsâ€¦" class="headerlink" title="Checking for existing installationsâ€¦"></a>Checking for existing installationsâ€¦</h2><ul><li>rpm -qa â€˜nodenpmâ€™  grep -v nodesource</li></ul><h2 id="Run-sudo-yum-install-y-nodejs-to-install-Node-js-10-x-and-npm"><a href="#Run-sudo-yum-install-y-nodejs-to-install-Node-js-10-x-and-npm" class="headerlink" title="Run `sudo yum install -y nodejs` to install Node.js 10.x and npm."></a>Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.</h2><h2 id="You-may-also-need-development-tools-to-build-native-addons"><a href="#You-may-also-need-development-tools-to-build-native-addons" class="headerlink" title="You may also need development tools to build native addons:"></a>You may also need development tools to build native addons:</h2><pre><code>sudo yum install gcc-c++ make</code></pre><h2 id="To-install-the-Yarn-package-manager-run"><a href="#To-install-the-Yarn-package-manager-run" class="headerlink" title="To install the Yarn package manager, run:"></a>To install the Yarn package manager, run:</h2><pre><code>curl -sL https://dl.yarnpkg.com/rpm/yarn.repo  sudo tee /etc/yum.repos.d/yarn.repo sudo yum install yarn</code></pre><h4 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h4><pre><code>sudo yum -y install nodejsnode -væŸ¥çœ‹ç‰ˆæœ¬</code></pre><p>å¦‚æœä»¥ä¸Šæ­¥éª¤ä¸èƒ½å®‰è£…ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åå†æ‰§è¡Œç¬¬äºŒæ­¥ï¼š</p><pre><code>sudo yum clean all</code></pre><p>å¦‚æœå­˜åœ¨å¤šä¸ª nodesoucreï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ é™¤ï¼Œç„¶åé‡æ–°æ‰§è¡Œç¬¬ä¸€ç¬¬äºŒæ­¥ï¼š</p><pre><code>sudo rm -fv /etc/yum.repos.d/nodesource*</code></pre>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxè®¾ç½®ROOTç”¨æˆ·ä»¥åŠå…è®¸ç¬¬ä¸‰æ–¹SSHç™»å½•</title>
    <link href="/2020/07/03/centos-debian%E8%AE%BE%E7%BD%AEroot%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E5%85%81%E8%AE%B8%E7%AC%AC%E4%B8%89%E6%96%B9ssh%E7%99%BB%E5%BD%95/"/>
    <url>/2020/07/03/centos-debian%E8%AE%BE%E7%BD%AEroot%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E5%85%81%E8%AE%B8%E7%AC%AC%E4%B8%89%E6%96%B9ssh%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h4 id="åˆ‡æ¢åˆ°rootå¸å·"><a href="#åˆ‡æ¢åˆ°rootå¸å·" class="headerlink" title="åˆ‡æ¢åˆ°rootå¸å·"></a>åˆ‡æ¢åˆ°rootå¸å·</h4><pre><code>sudo -i</code></pre><h4 id="è®¾ç½®rootå¯†ç "><a href="#è®¾ç½®rootå¯†ç " class="headerlink" title="è®¾ç½®rootå¯†ç "></a>è®¾ç½®rootå¯†ç </h4><pre><code>passwd</code></pre><p>ç„¶åä¼šè¦æ±‚è¾“å…¥æ–°å¯†ç ï¼Œç„¶åå†é‡å¤ä¸€æ¬¡å¯†ç ï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥ç›´æ¥è¾“å…¥å¯†ç ï¼Œç„¶åå›è½¦ï¼Œå†ç„¶åé‡å¤è¾“å…¥å¯†ç å›è½¦</p><h4 id="å¼€å¯SSHæƒé™"><a href="#å¼€å¯SSHæƒé™" class="headerlink" title="å¼€å¯SSHæƒé™"></a>å¼€å¯SSHæƒé™</h4><pre><code>vim /etc/ssh/sshd_config #æ‰“å¼€ ssh é…ç½®æ–‡ä»¶PermitRootLogin yes #é»˜è®¤ä¸ºnoï¼Œéœ€è¦å¼€å¯rootç”¨æˆ·è®¿é—®æ”¹ä¸ºyesPasswordAuthentication yes    #é»˜è®¤ä¸ºnoï¼Œæ”¹ä¸ºyeså¼€å¯å¯†ç ç™»é™†</code></pre><h4 id="é‡å¯æœåŠ¡å™¨"><a href="#é‡å¯æœåŠ¡å™¨" class="headerlink" title="é‡å¯æœåŠ¡å™¨"></a>é‡å¯æœåŠ¡å™¨</h4><pre><code>reboot</code></pre>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOSä¸‹Nginxé™æ€èµ„æºä»£ç†é…ç½®</title>
    <link href="/2020/07/01/centos%E4%B8%8Bngnix%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/"/>
    <url>/2020/07/01/centos%E4%B8%8Bngnix%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>æ‰“å¼€nginx.conf,æˆ‘çš„è·¯å¾„æ˜¯&#x2F;www&#x2F;server&#x2F;nginx&#x2F;conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">user root#ç¬¬ä¸€è¡Œç”¨æˆ·è¿™é‡Œæ”¹æˆroot</span><br><span class="line">......</span><br><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">    ......</span><br><span class="line">    server</span><br><span class="line">    &#123;</span><br><span class="line">        listen 888;#ç›‘å¬ç«¯å£ï¼Œå¯ä¿®æ”¹ï¼Œè®°å¾—æ”¾è¡Œ</span><br><span class="line">        server_name localhost;#ä¸»æœºIP</span><br><span class="line">        .......</span><br><span class="line">        #æœ‰ä»¥ä¸‹ä¸¤è¡Œçš„è¯æ³¨é‡Šæ‰ï¼Œå–æ¶ˆèº«ä»½éªŒè¯</span><br><span class="line">        #auth_basic &quot;Authorization&quot;;</span><br><span class="line">        #auth_basic_user_file /www/server/pass/phpmyadmin.pass;</span><br><span class="line">        #æ·»åŠ ä¸€ä¸ªlocation</span><br><span class="line">        location /upload/</span><br><span class="line">        &#123;</span><br><span class="line">            root /ftp;#è·¯å¾„æ˜ å°„</span><br><span class="line">            autoindex on;//å¼€å¯ç›®å½•è‡ªåŠ¨ç´¢å¼•</span><br><span class="line">        &#125;</span><br><span class="line">        ......</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé…ç½®ä¹‹åé‡å¯NgnixæœåŠ¡ï¼Œ<a href="http://ip:888/upload/test.txt%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E5%88%B0/ftp/upload/test.txt">http://IP:888/upload/test.txtå°±å¯ä»¥è®¿é—®åˆ°/ftp/upload/test.txt</a></p><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>nginx</tag>
      
      <tag>ä»£ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç™¾åº¦ç½‘ç›˜å€é€Ÿæ’­æ”¾</title>
    <link href="/2020/06/25/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE/"/>
    <url>/2020/06/25/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç™¾åº¦ç½‘ç›˜çœ‹ä¸€äº›ç½‘è¯¾ï¼Œæœ‰æ—¶å€™ä¼šå«Œè€å¸ˆè®²å¾—å¤ªæ…¢ï¼Œå¦‚æœèƒ½1.5å€é€Ÿæ’­æ”¾å°±å¥½äº†ï¼Œä½†æ˜¯ç™¾åº¦ç½‘ç›˜å¼€å€é€Ÿè¦ä¼šå‘˜ï¼Œä»…ä»…ä¸ºäº†è¿™ä¸ªåŠŸèƒ½å¼€ä¼šå‘˜ä¹Ÿæ˜¯duckä¸å¿…ã€‚åˆ†äº«ä¸€æ‹›ï¼</p><p>åœ¨ç”µè„‘æµè§ˆå™¨é‡Œæ‰“å¼€ç™¾åº¦ç½‘ç›˜æ’­æ”¾è§†é¢‘ï¼Œåœ¨è§†é¢‘æ’­æ”¾ç•Œé¢è¿›å…¥â€œå¼€å‘è€…è°ƒè¯•æ¨¡å¼â€ï¼Œè°·æ­Œã€Edgeæµè§ˆå™¨ç›´æ¥æŒ‰F12ï¼Œå…¶ä½™æµè§ˆå™¨æˆ‘æ²¡è¯•è¿‡ï¼Œä¸ç¡®å®šæ˜¯å¦èƒ½ç”¨ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-1.png"></p><p>é€‰æ‹©æ§åˆ¶å°ï¼ˆconsoleï¼‰ï¼Œç‚¹å‡»ä¸‹æ–¹ç©ºç™½åŒºåŸŸï¼Œè¾“å…¥</p><p>videojs.getPlayers(â€œviedoâ€).html5player.tech_.setPlaybackRate(1.5)</p><p>å›è½¦æ‰§è¡Œï¼Œç„¶åå°±å¯ä»¥å…³é—­äº†ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/09/image-2.png"></p><p>è¿™é‡Œçš„1.5æ˜¯æŒ‡1.5å€é€Ÿï¼Œä½ å¯ä»¥ä¿®æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„å€é€Ÿï¼Œå¯çµæ´»ä½¿ç”¨ï¼Œè¿™ä¸ªæ“ä½œåªå¯¹å½“å‰æ’­æ”¾çš„è§†é¢‘æœ‰æ•ˆï¼Œå…³é—­ç½‘é¡µæˆ–æ’­æ”¾ä¸‹ä¸ªè§†é¢‘ä¸å†èµ·ä½œç”¨ï¼Œæƒ³è¦æ”¹å›æ­£å¸¸é€Ÿåº¦å¯ä»¥é‡æ–°æ‰§è¡Œä¸€æ¬¡ä»£ç ï¼ŒæŠŠæ•°å€¼æ”¹ä¸º1.0ï¼Œæˆ–è€…ç›´æ¥å…³é—­è§†é¢‘é‡æ–°æ‰“å¼€ã€‚å¦å¤–ï¼Œè¿™ä¸²ä»£ç å¹¶ä¸ç”¨æ¯æ¬¡æ‰‹åŠ¨å¤åˆ¶ç²˜è´´è¾“å…¥ï¼Œæœ‰è¿‡ä¸€æ¬¡è¾“å…¥ä¹‹åï¼Œä¸‹æ¬¡å†åˆ°è¿™ä¸ªè¾“å…¥ä»£ç çš„æ­¥éª¤ï¼Œç›´æ¥æŒ‰æ–¹å‘ä¸Šé”®å³å¯è‡ªåŠ¨å¡«å……ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å€é€Ÿæ’­æ”¾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS7ä¸‹å®‰è£…Python3.7ã€</title>
    <link href="/2020/06/11/centos7%E4%B8%8B%E5%AE%89%E8%A3%85python3-7/"/>
    <url>/2020/06/11/centos7%E4%B8%8B%E5%AE%89%E8%A3%85python3-7/</url>
    
    <content type="html"><![CDATA[<p>CentOS7é»˜è®¤å·²ç»å®‰è£…äº†Python2.7ï¼Œç°å®‰è£…3.7å’Œå®ƒå¹¶å­˜</p><h4 id="ä¸€ã€å®‰è£…ä¾èµ–"><a href="#ä¸€ã€å®‰è£…ä¾èµ–" class="headerlink" title="ä¸€ã€å®‰è£…ä¾èµ–"></a>ä¸€ã€å®‰è£…ä¾èµ–</h4><pre><code>yum -y groupinstall &quot;Development tools&quot;</code></pre><p>è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼šNo packages in any requested group available to install or update</p><p>è§£å†³æ–¹æ³•ï¼š</p><pre><code>cd /etc/yum.repos.dsudo wget http://public-yum.oracle.com/public-yum-el5.repocd /etc/pki/rpm-gpg/sudo wget https://public-yum.oracle.com/RPM-GPG-KEY-oracle-el5</code></pre><p>ç„¶åé‡è¯•å³å¯</p><pre><code>yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-develyum install -y libffi-devel zlib1g-devyum install zlib* -y</code></pre><h4 id="äºŒã€ä¸‹è½½è§£å‹"><a href="#äºŒã€ä¸‹è½½è§£å‹" class="headerlink" title="äºŒã€ä¸‹è½½è§£å‹"></a>äºŒã€ä¸‹è½½è§£å‹</h4><pre><code>cd /tmpwget wget https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tar.xztar -xvJf Python-3.7.2.tar.xz</code></pre><h4 id="ä¸‰ã€åˆ›å»ºç¼–è¯‘å®‰è£…ç›®å½•"><a href="#ä¸‰ã€åˆ›å»ºç¼–è¯‘å®‰è£…ç›®å½•" class="headerlink" title="ä¸‰ã€åˆ›å»ºç¼–è¯‘å®‰è£…ç›®å½•"></a>ä¸‰ã€åˆ›å»ºç¼–è¯‘å®‰è£…ç›®å½•</h4><pre><code>mkdir /usr/local/python3</code></pre><h4 id="å››ã€å®‰è£…"><a href="#å››ã€å®‰è£…" class="headerlink" title="å››ã€å®‰è£…"></a>å››ã€å®‰è£…</h4><pre><code>cd Python-3.7.2./configure --prefix=/usr/local/python3 --enable-optimizations --with-sslmake &amp;&amp; make install</code></pre><h4 id="äº”ã€å»ºç«‹è½¯é“¾æ¥"><a href="#äº”ã€å»ºç«‹è½¯é“¾æ¥" class="headerlink" title="äº”ã€å»ºç«‹è½¯é“¾æ¥"></a>äº”ã€å»ºç«‹è½¯é“¾æ¥</h4><pre><code>ln -s /usr/local/python3/bin/python3 /usr/local/bin/python3ln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3</code></pre><h4 id="å…­ã€éªŒè¯"><a href="#å…­ã€éªŒè¯" class="headerlink" title="å…­ã€éªŒè¯"></a>å…­ã€éªŒè¯</h4><pre><code>python3 -Vpip3 -V</code></pre><h4 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h4>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Androidæ—¥æœŸé€‰æ‹©å™¨DatePicker</title>
    <link href="/2020/06/01/android%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E5%99%A8datepicker/"/>
    <url>/2020/06/01/android%E6%97%A5%E6%9C%9F%E9%80%89%E6%8B%A9%E5%99%A8datepicker/</url>
    
    <content type="html"><![CDATA[<p>æ„Ÿè§‰è¿™ä¸ªçª—å£å½¢å¼çš„æ—¥æœŸé€‰æ‹©å™¨å¾ˆå®ç”¨ï¼Œç‰¹æ­¤è®°å½•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/06/image-5.png"></p><pre><code>public void dateSelect()    &#123;        //Calendar cal=Calendar.getInstance();        //è·å–å¹´æœˆæ—¥æ—¶åˆ†ç§’ä¿¡æ¯        //int year = cal.get(Calendar.YEAR);        //int month = cal.get(Calendar.MONTH)+1;//æ³¨æ„ç‚¹ ï¼Œè¦åŠ ä¸€        //int day = cal.get(Calendar.DAY_OF_MONTH);        //int hour = cal.get(Calendar.HOUR_OF_DAY);        //int minute = cal.get(Calendar.MINUTE);        Toast.makeText(register.this, &quot;å¯åœ¨é¡¶éƒ¨é€‰æ‹©å¹´ä»½å“¦~&quot;, Toast.LENGTH_SHORT).show();        new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() &#123;            @Override            public void onDateSet(DatePicker view, int year, int month, int day) &#123;                //setTitle(&quot;å½“å‰æ—¶é—´ï¼š&quot;+year+&quot;å¹´-&quot;+month+&quot;æœˆ-&quot;+day+&quot;æ—¥ &quot;);                //è¿™é‡Œæ˜¯ç‚¹å‡»ç¡®å®šåé€‰æ‹©çš„æ—¥æœŸ            &#125;        &#125;, year, month, day).show(); //åä¸‰ä¸ªå‚æ•°ç”¨äºæ—¥æœŸåˆå§‹åŒ–ï¼Œå³é»˜è®¤é€‰æ‹©çš„æ—¥æœŸ    &#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android9.0ä»¥ä¸Šè¯·æ±‚HTTPçš„æ–¹æ³•</title>
    <link href="/2020/06/01/android9-0%E4%BB%A5%E4%B8%8A%E8%AF%B7%E6%B1%82http%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <url>/2020/06/01/android9-0%E4%BB%A5%E4%B8%8A%E8%AF%B7%E6%B1%82http%E7%9A%84%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨ç”µè„‘æ¨¡æ‹Ÿå™¨ä¸Šè·‘å¾—å¥½å¥½çš„APPï¼Œç”¨æ‰‹æœºçœŸæœºè°ƒè¯•æ—¶ï¼Œå‘ç°åœ¨å‘å‡ºHTTPè¯·æ±‚æ—¶å‡ºç°é—ªé€€ï¼Œçªç„¶æƒ³èµ·ä¹‹å‰ç§»åŠ¨åº”ç”¨å¼€å‘çš„è€å¸ˆè®²è¿‡é«˜ç‰ˆæœ¬SDKå¯èƒ½è¯·æ±‚æ–¹å¼ä¸ä¸€æ ·ï¼Œç‰ˆæœ¬é—®é¢˜â€¦OMGï¼Œæ‰æƒ³èµ·æ¥æˆ‘ç»ƒæ‰‹æ—¶éƒ½æ˜¯åœ¨å®‰å“4.4å¼€å‘ï¼Œç°åœ¨è¦é€‚é…åˆ°å®‰å“9ï¼Œ10â€¦</p><p>OKï¼Œå‡¡äº‹ä¸è¦æ…Œï¼Œå¼€å§‹é¢å‘æœç´¢å¼•æ“ç¼–ç¨‹ã€‚</p></blockquote><p>å…ˆæ”¾ä¸€å¼ ç‰ˆæœ¬å›¾</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/06/image-1.png"></p><p>åœ¨Android9.0ä»¥ä¸Šçš„è®¾å¤‡ä¸Šï¼Œå¦‚æœåº”ç”¨ä½¿ç”¨çš„æ˜¯éåŠ å¯†çš„æ˜æ–‡æµé‡çš„HTTPç½‘ç»œè¯·æ±‚ï¼Œåˆ™ä¼šå¯¼è‡´è¯¥åº”ç”¨æ— æ³•è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼ŒHTTPSåˆ™ä¸ä¼šå—å½±å“ï¼Œå¦‚æœåº”ç”¨åµŒå¥—äº†webviewï¼Œwebviewä¹Ÿåªèƒ½ä½¿ç”¨HTTPSè¯·æ±‚ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡APPé…ç½®æ¥è§£é™¤é™åˆ¶</p><p>åœ¨Manifestä¸‹çš„applicationæ ‡ç­¾ä¸‹ï¼Œä¸activityå¹¶åˆ—ï¼ŒåŠ å…¥ï¼š</p><p>&lt;**uses-library android:name&#x3D;â€org.apache.http.legacyâ€ android:required&#x3D;â€falseâ€** &#x2F;&gt;</p><p>åœ¨Manifestä¸‹çš„applicationæ ‡ç­¾å†…ï¼ŒåŠ å…¥ï¼š</p><p><strong>android</strong><strong>:usesCleartextTraffic&#x3D;****â€trueâ€</strong></p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/06/image-3.png"></p><p>åˆ°æ­¤ï¼ŒHTTPç½‘ç»œé—®é¢˜åº”è¯¥å·²ç»è§£å†³ã€‚</p><p>å¦å¤–ï¼Œæˆ‘åœ¨è°ƒè¯•æ—¶è¿˜å‘ç°æœ‰ä¸€ä¸ªæ—¥å†çª—å£å¼¹ä¸å‡ºï¼Œä¼šç›´æ¥finishæ•´ä¸ªactivityï¼Œåœ¨Android4.4ç‰ˆæœ¬ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼ŒåŸå› å¥½åƒæ˜¯ï¼šandroid 9.0ä¸Šä½¿ç”¨å‰å°æœåŠ¡ï¼Œéœ€è¦æ·»åŠ æƒé™</p><p>åœ¨Manifesté‡Œé¢åŠ ä¸Šè¿™æƒé™</p><uses-permission android:name="android.permission.FOREGROUND_SERVICE" /><p>ç„¶åå°±è§£å†³å•¦</p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
      <tag>HTTP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LR(0)æ–‡æ³•ï¼šæ„é€ DFAã€åˆ†æè¡¨ï¼Œå¥å­æ¨å¯¼</title>
    <link href="/2020/05/19/lr0%E6%96%87%E6%B3%95%EF%BC%9A%E6%9E%84%E9%80%A0dfa%E3%80%81%E5%88%86%E6%9E%90%E8%A1%A8%EF%BC%8C%E5%8F%A5%E5%AD%90%E6%8E%A8%E5%AF%BC/"/>
    <url>/2020/05/19/lr0%E6%96%87%E6%B3%95%EF%BC%9A%E6%9E%84%E9%80%A0dfa%E3%80%81%E5%88%86%E6%9E%90%E8%A1%A8%EF%BC%8C%E5%8F%A5%E5%AD%90%E6%8E%A8%E5%AF%BC/</url>
    
    <content type="html"><![CDATA[<h3 id="LRåˆ†ææ³•ä»‹ç»"><a href="#LRåˆ†ææ³•ä»‹ç»" class="headerlink" title="LRåˆ†ææ³•ä»‹ç»"></a>LRåˆ†ææ³•ä»‹ç»</h3><p>é¢„æµ‹åˆ†æç®—æ³•LR(k):</p><ul><li>L: ä»å·¦åˆ°å³æ‰«æï¼›</li><li>R:æœ€å³æ¨å¯¼çš„é€†è¿‡ç¨‹ï¼›</li><li>(k): å‘å‰çœ‹kä¸ªtokenã€‚</li></ul><p>LRåˆ†ææ³•çš„ä¼˜ç‚¹ï¼š</p><ul><li>LRåˆ†æå™¨èƒ½è¯†åˆ«æ‰€æœ‰å¯ç”¨ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•æè¿°çš„ç¨‹åºè®¾è®¡è¯­è¨€çš„ç»“æ„ï¼›</li><li>LRåˆ†ææ³•æ˜¯å·²çŸ¥çš„æœ€ä¸€èˆ¬çš„æ— å›æº¯ç§»è¿›ä¸€å½’çº¦åˆ†ææ³•,è€Œä¸”å¯ä»¥å’Œå…¶ä»–ç§»è¿›å½’çº¦åˆ†ææ³•ï¼Œè€Œä¸”å¯ä»¥å’Œå…¶ä»–ç§»è¿›è§„çº¦åˆ†ææ³•ä¸€æ ·æœ‰æ•ˆåœ°å®ç°ï¼›</li><li>LRåˆ†ææ³•åˆ†æçš„æ–‡æ³•ç±»åŒ…å«é¢„æµ‹åˆ†ææ³•æ‰€èƒ½åˆ†æçš„æ–‡æ³•ç±»ï¼›</li><li>åœ¨è‡ªå·¦å‘å³æ‰«æè¾“å…¥æ—¶,LRåˆ†æå™¨èƒ½åŠæ—¶å¯Ÿè§‰è¯­æ³•é”™è¯¯ã€‚</li></ul><p>LRåˆ†ææ³•çš„ç¼ºç‚¹ï¼š</p><p>å¯¹å…¸å‹çš„ç¨‹åºè®¾è®¡è¯­è¨€æ–‡æ³•ï¼Œæ‰‹å·¥æ„é€ LRåˆ†æå™¨çš„å·¥ä½œé‡å¤ªå¤§ã€‚</p><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>è¾“å…¥å¤šæ¡äº§ç”Ÿå¼ï¼Œæ„é€ å‡ºDFAã€LR(0)åˆ†æè¡¨ï¼›</p><p>åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šè¾“å…¥ä¸€ä¸ªå¥å­ï¼Œåˆ¤åˆ«æ˜¯å¦ç¬¦åˆLR(0)æ–‡æ³•ã€‚</p><h3 id="ä¸»è¦ç®—æ³•è®¾è®¡"><a href="#ä¸»è¦ç®—æ³•è®¾è®¡" class="headerlink" title="ä¸»è¦ç®—æ³•è®¾è®¡"></a>ä¸»è¦ç®—æ³•è®¾è®¡</h3><p>3.1æ„é€ DFA(ç¡®å®šæœ‰é™è‡ªåŠ¨æœº)</p><p>ä¸¤ä¸ªä¸ªå‚æ•°ï¼šå½“å‰çŠ¶æ€èŠ‚ç‚¹current_state,èŠ‚ç‚¹ç¼–å·num</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image.png"></p><p>å›¾3-1</p><p>é‡‡ç”¨æ·±åº¦ä¼˜å…ˆçš„é€’å½’éå†ï¼šéå†å½“å‰çŠ¶æ€èŠ‚ç‚¹çš„äº§ç”Ÿå¼ï¼Œå¦‚æœæŸä¸€æ¡èƒ½äº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œåˆ™æ–°å»ºä¸€ä¸ªçŠ¶æ€èŠ‚ç‚¹ï¼Œç„¶åæ·»åŠ ä¸€æ¡æŒ‡å‘æ–°çŠ¶æ€çš„è¿æ¥ï¼Œæ•°æ®ç»“æ„å¦‚å›¾3-2ï¼›</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-1.png"></p><p>å›¾3-2</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-2.png"></p><p>å›¾3-3</p><p>ä¾‹å¦‚ï¼šå½“å‰çŠ¶æ€æ˜¯2ï¼›çŠ¶æ€2éå†åˆ°ç¬¬ä¸€æ¡äº§ç”Ÿå¼æ—¶åº”ç”Ÿæˆæ–°çš„çŠ¶æ€èŠ‚ç‚¹3ï¼ˆè¿™é‡Œçš„ç¼–å·å’Œç®—æ³•å®é™…ç”Ÿæˆçš„ç¼–å·é¡ºåºä¸åŒï¼‰ï¼Œæ­¤æ—¶æš‚åœå¤–å±‚çš„éå†ï¼Œåº”è¯¥è¿›è¡Œç¬¬äºŒå±‚éå†ï¼Œä»è¿™æ¡äº§ç”Ÿå¼çš„åä¸€æ¡å¼€å§‹éå†ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¯ä»¥å½’å¹¶åˆ°æ–°å»ºèŠ‚ç‚¹é‡Œçš„äº§ç”Ÿå¼ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªéœ€æŸ¥çœ‹E-&gt;E.+Tä¸­â€œ.â€ä¹‹åçš„ç¬¦å·æ˜¯ä¸æ˜¯â€œ$â€ï¼›</p><p>ç¬¬äºŒå±‚éå†åˆ°æœ€åä¸€æ¡äº§ç”Ÿå¼æ—¶ï¼Œåº”è®¡ç®—æ–°çŠ¶æ€çš„é—­åŒ…ï¼Œè¿™ä¸ªä¾‹å­åœ¨çŠ¶æ€5ä½“ç°ï¼šå®Œæˆå¯¹çŠ¶æ€2çš„éå†åï¼ŒçŠ¶æ€5åªæœ‰ç¬¬ä¸€æ¡E-&gt;E+.Tï¼Œæ­¤æ—¶è®¡ç®—å®ƒçš„é—­åŒ…ï¼Œä»åˆå§‹çŠ¶æ€ä¸­æŸ¥æ‰¾ï¼Œæ·»åŠ å¯¹åº”çš„äº§ç”Ÿå¼è¿›æ¥ï¼›</p><p>æ–°å»ºä¸€ä¸ªçŠ¶æ€å®Œæˆåï¼ŒæŠŠæ–°çŠ¶æ€æ”¾å…¥çŠ¶æ€èŠ‚ç‚¹å‘é‡ä¸­ï¼ˆä¾¿äºæŸ¥æ‰¾ï¼‰ï¼ŒèŠ‚ç‚¹ç¼–å·è‡ª+1ï¼Œç„¶åå¯¹æ–°çŠ¶æ€èŠ‚ç‚¹æ‰§è¡Œè¯¥ç®—æ³•ã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-3.png"></p><p>å›¾3-4</p><p>3.2æ„é€ LR(0)åˆ†æè¡¨</p><p>DFAæ„é€ å®Œæˆåï¼Œå…¶å®åƒå¦‚ä¸‹å½¢å¼çš„åˆ†æè¡¨ä¹Ÿå·²ç»æ„é€ å®Œæˆï¼ˆä¸æ•™æä¸Šçš„ä¸åŒï¼‰ï¼ŒGotoè¡¨å®é™…ä¸Šå°±æ˜¯å„ä¸ªçŠ¶æ€ä¹‹é—´çš„è”ç³»ï¼ŒDFAä¸­å·²ç»è®°å½•ï¼ŒActionè¡¨åªéœ€æŸ¥çœ‹æŸä¸ªçŠ¶æ€çš„ç‰¹ç‚¹å³å¯å½’çº³:æ˜¯å¥æŸ„å°±Reduceï¼Œæ˜¯å¥æŸ„ä¸”ä»¥ç»“æŸç¬¦$ç»“å°¾å°±æ˜¯Acceptï¼Œå…¶ä½™éƒ½æ˜¯Shiftã€‚</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-4.png"></p><p>å›¾3-5</p><p>3.3åˆ¤æ–­å¥å­æ˜¯å¦ç¬¦åˆLR(0)æ–‡æ³•</p><p>é¦–å…ˆè¿˜æ˜¯æŠŠå¥å­è½¬ä¸ºtokenæµå­˜å‚¨åœ¨ä¸€ä¸ªå‘é‡ä¸­ï¼Œç„¶ååå‘å­˜å‚¨åˆ°ä¸€ä¸ªæ ˆä¸­ï¼Œæ ‡è®°ä¸ºæœªå¤„ç†å­—ç¬¦æ ˆï¼Œå¦æœ‰ä¸€ä¸ªå·²å¤„ç†å­—ç¬¦æ ˆï¼Œå¦‚å›¾3-6æ‰€ç¤ºï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-5.png"></p><p>å›¾3-6</p><p>åˆå§‹çŠ¶æ€è¦åšçš„æ˜¯ï¼šæŠŠçŠ¶æ€1å‹å…¥çŠ¶æ€æ ˆï¼Œç„¶åé‡å¤åšå¦‚ä¸‹æ“ä½œï¼š</p><p>å–çŠ¶æ€æ ˆæ ˆé¡¶Så’Œæœªå¤„ç†å­—ç¬¦æ ˆæ ˆé¡¶a,</p><ul><li>å¦‚æœæ˜¯Shift:<ul><li>æ–°çŠ¶æ€å‹å…¥çŠ¶æ€æ ˆï¼›</li><li>å·²å¤„ç†å­—ç¬¦æ ˆå‹å…¥æœªå¤„ç†å­—ç¬¦æ ˆæ ˆé¡¶å…ƒç´ ï¼›</li><li>æœªå¤„ç†å­—ç¬¦æ ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼›</li></ul></li><li>å¦‚æœæ˜¯Reduce A-&gt;w(wä¸­å«æœ‰nä¸ªtoken)ï¼š<ul><li>çŠ¶æ€æ ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œé‡å¤næ¬¡ï¼›</li><li>å·²å¤„ç†å­—ç¬¦æ ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œé‡å¤næ¬¡ï¼›</li><li>æŠŠAå‹å…¥æœªå¤„ç†å­—ç¬¦æ ˆï¼›</li></ul></li><li>å¦‚æœæ˜¯Acceptï¼š<ul><li>è·³å‡ºå¾ªç¯ï¼Œç¨‹åºç»“æŸã€‚</li></ul></li></ul><h3 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h3><p>ä»¥ä¸‹ç”¨ä¸¤ä¸ªä¾‹å­æ¥éªŒè¯ç»“æœçš„æ­£ç¡®æ€§ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-6.png"></p><p>å›¾4-1 ä¾‹é¢˜1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-7.png"></p><p>å›¾4-2 ä¾‹é¢˜1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/1.png"></p><p>å›¾4-3 ä¾‹é¢˜1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/image-9.png"></p><p>å›¾4-4 ä¾‹é¢˜2</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/05/2.png"></p><p>å›¾4-5 ä¾‹é¢˜2</p><p>æµ‹è¯•ç»“æœå‡æ­£ç¡®æ— è¯¯ï¼Œè¯´æ˜ç®—æ³•åŠç¨‹åºåŸºæœ¬æ­£ç¡®ã€‚</p><h3 id="å®éªŒæ€»ç»“"><a href="#å®éªŒæ€»ç»“" class="headerlink" title="å®éªŒæ€»ç»“"></a>å®éªŒæ€»ç»“</h3><p>å•å•æ„é€ DFAå°±é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚è®¡ç®—é—­åŒ…çš„é—®é¢˜ï¼Œå»ºç«‹æ‰€æœ‰çŠ¶æ€è”ç³»çš„é—®é¢˜ï¼Œç»è¿‡ä¸æ–­åœ°è°ƒè¯•ä¿®æ”¹æ‰å¾—ä»¥è§£å†³ã€‚åæ¥æ„é€ åˆ†æè¡¨ï¼Œå‘ç°æ•™æä¸Šçš„åˆ†æè¡¨å’Œè¯¾ä¸Šè®²çš„åˆ†æè¡¨æ ·å¼ä¸åŒï¼Œç®—æ³•å’Œä¹Ÿä¸èƒ½ç›´æ¥å¥—ç”¨ï¼Œåªèƒ½é è‡ªå·±æ‘¸ç´¢æ€»ç»“ï¼Œç»è¿‡å¾ˆå¤šæ¬¡çº¸ä¸Šæ¨å¯¼ï¼Œç»ˆäºæ€»ç»“å‡ºäº†æ­£ç¡®çš„ç®—æ³•ã€‚</p><p>ç¨‹åºçš„ä¼˜ç‚¹ï¼š</p><ul><li>æ”¯æŒå­—ç¬¦ä¸²å½¢å¼çš„tokenï¼Œæ”¯æŒäº§ç”Ÿå¼ç”¨â€œâ€è¿æ¥ï¼Œæ‰©å±•æ€§å¼ºï¼›</li><li>å¯èƒ½ç¨‹åºæ•ˆç‡ä¸é«˜ï¼Œä½†æ•°æ®ç»“æ„ç›¸å¯¹è¾ƒåˆç†ï¼Œæ˜“æŸ¥æ˜“ç”¨æ˜“æ‡‚ï¼›</li><li>DFAã€åˆ†æè¡¨ã€å¥å­æ¨å¯¼è¿‡ç¨‹è¾“å‡ºæ ¼å¼ç®€æ´ç¾è§‚ï¼›</li><li>å¤šä¸ªæ ·ä¾‹æµ‹è¯•å‡æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œç¨‹åºå¯é æ€§å¼ºã€‚</li></ul><h3 id="å®éªŒä»£ç "><a href="#å®éªŒä»£ç " class="headerlink" title="å®éªŒä»£ç "></a>å®éªŒä»£ç </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// LR(0)table.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable : 4996)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable : 26495)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable : 6001)</span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> <span class="keyword">warning</span>(disable : 6031)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ca</span></span><br><span class="line">&#123; <span class="comment">//äº§ç”Ÿå¼</span></span><br><span class="line">    string str;</span><br><span class="line">    vector&lt;string&gt; vec;</span><br><span class="line">    <span class="type">int</span> index = <span class="number">-1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">cs</span></span><br><span class="line">&#123; <span class="comment">//æƒ…å†µ--æ–°çŠ¶æ€</span></span><br><span class="line">    string condition;</span><br><span class="line">    <span class="type">int</span> state_number;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">state_node</span></span><br><span class="line">&#123; <span class="comment">//çŠ¶æ€èŠ‚ç‚¹</span></span><br><span class="line">    <span class="type">int</span> state_number = <span class="number">0</span>;</span><br><span class="line">    vector&lt;ca&gt; ca;</span><br><span class="line">    vector&lt;cs&gt; cs;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LR_0</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;ca&gt; CA;                      <span class="comment">//äº§ç”Ÿå¼condition_action</span></span><br><span class="line">    vector&lt;string&gt; T;                   <span class="comment">//ç»ˆç»“ç¬¦</span></span><br><span class="line">    vector&lt;string&gt; N;                   <span class="comment">//éç»ˆç»“ç¬¦</span></span><br><span class="line">    vector&lt;state_node*&gt; state_table; <span class="comment">//æ‰€æœ‰çŠ¶æ€èŠ‚ç‚¹</span></span><br><span class="line">    state_node*first;                 <span class="comment">//åˆå§‹çŠ¶æ€æŒ‡é’ˆ</span></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; Goto;</span><br><span class="line">    vector&lt;string&gt; Action;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>;                                          <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_state_table</span><span class="params">()</span></span>;                         <span class="comment">//è¾“å‡ºDFA</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">cal_closure</span><span class="params">(state_node* node)</span></span>;                <span class="comment">//è®¡ç®—é—­åŒ…</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">state_exist</span><span class="params">(ca* ca)</span></span>;                            <span class="comment">//åˆ¤æ–­çŠ¶æ€æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">create_automaton</span><span class="params">(state_node* node, <span class="type">int</span> &amp;num)</span></span>; <span class="comment">//æ„é€ è‡ªåŠ¨æœº</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_parse_table</span><span class="params">()</span></span>;                         <span class="comment">//è¾“å‡ºåˆ†æè¡¨</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">judge</span><span class="params">(string str)</span></span>;                               <span class="comment">//åˆ¤åˆ«å¥å­æ˜¯å¦ç¬¦åˆLR0æ–‡æ³•</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">string <span class="title">pointNext</span><span class="params">(ca ca)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è¿”å›.åçš„token</span></span><br><span class="line">    <span class="type">int</span> len = ca.vec.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (ca.vec[i] == <span class="string">&quot;.&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> (i &lt; len - <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> ca.vec[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ca*<span class="title">copyca</span><span class="params">(ca item)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//å¤åˆ¶äº§ç”Ÿå¼</span></span><br><span class="line">    ca*newca = <span class="keyword">new</span> <span class="built_in">ca</span>();</span><br><span class="line">    newca-&gt;index = <span class="number">0</span>;</span><br><span class="line">    newca-&gt;str = item.str; <span class="comment">//å¤åˆ¶</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(item.vec.<span class="built_in">size</span>()); j++)</span><br><span class="line">    &#123;</span><br><span class="line">        newca-&gt;vec.<span class="built_in">push_back</span>(item.vec[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newca;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LR_0::cal_closure</span><span class="params">(state_node*node)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è®¡ç®—DFAæ¯ä¸ªèŠ‚ç‚¹çš„é—­åŒ…</span></span><br><span class="line">    <span class="type">int</span> m = first-&gt;ca.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span>*arr = <span class="keyword">new</span> <span class="type">int</span>[m];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        arr[i] = <span class="number">0</span>; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    <span class="type">int</span> s = node-&gt;ca.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> k = s;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        s = node-&gt;ca.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            string temp = <span class="built_in">pointNext</span>(node-&gt;ca[i]);</span><br><span class="line">            <span class="type">int</span> vsize = node-&gt;ca[i].vec.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;ca[i].vec[vsize - <span class="number">1</span>] == <span class="string">&quot;$&quot;</span>)</span><br><span class="line">            &#123; <span class="comment">// eg:A-&gt;B.C$  Cå¼€å¤´çš„äº§ç”Ÿå¼ä¹Ÿè¦åŠ å…¥</span></span><br><span class="line">                <span class="keyword">if</span> (node-&gt;ca[i].vec[vsize - <span class="number">3</span>] == <span class="string">&quot;.&quot;</span>)</span><br><span class="line">                    temp = node-&gt;ca[i].vec[vsize - <span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp != <span class="string">&quot;&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (first-&gt;ca[j].str == temp &amp;&amp; arr[j] == <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        node-&gt;ca.<span class="built_in">push_back</span>(* <span class="built_in">copyca</span>(first-&gt;ca[j]));</span><br><span class="line">                        arr[j] = <span class="number">1</span>;</span><br><span class="line">                        k += <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (k &gt; s); <span class="comment">//ä¸å†å¢åŠ æ—¶ï¼Œé—­åŒ…è®¡ç®—å®Œæˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPoint</span><span class="params">(ca &amp;v, <span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//ç»™äº§ç”Ÿå¼åŠ ç‚¹</span></span><br><span class="line">    v.vec.<span class="built_in">insert</span>(v.vec.<span class="built_in">begin</span>() + x, <span class="string">&quot;.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">shiftPoint</span><span class="params">(ca &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//äº§ç”Ÿå¼ç§»ç‚¹</span></span><br><span class="line">    <span class="type">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">int</span>(v.vec.<span class="built_in">size</span>()); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.vec[i] == <span class="string">&quot;.&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            temp = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    v.vec.<span class="built_in">erase</span>(v.vec.<span class="built_in">begin</span>() + temp);</span><br><span class="line">    v.vec.<span class="built_in">insert</span>(v.vec.<span class="built_in">begin</span>() + temp + <span class="number">1</span>, <span class="string">&quot;.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">LR_0::state_exist</span><span class="params">(ca*ca)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//åˆ¤æ–­çŠ¶æ€æ˜¯å¦å·²ç»å­˜åœ¨</span></span><br><span class="line">    <span class="type">int</span> len = state_table.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (state_table[i] -&gt; ca[<span class="number">0</span>].str == ca-&gt;str)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (state_table[i] -&gt; ca[<span class="number">0</span>].vec.<span class="built_in">size</span>() == ca-&gt;vec.<span class="built_in">size</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(state_table[i] -&gt; ca[<span class="number">0</span>].vec.<span class="built_in">size</span>()); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (state_table[i] -&gt; ca[<span class="number">0</span>].vec[j] == ca-&gt;vec[j])</span><br><span class="line">                        k++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (k == <span class="built_in">int</span>(ca-&gt;vec.<span class="built_in">size</span>()))</span><br><span class="line">                    <span class="keyword">return</span> i; <span class="comment">//å·²ç»å­˜åœ¨çš„è¯è¿”å›ä¸‹æ ‡</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">//ä¸å­˜åœ¨åˆ™è¿”å›-1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LR_0::init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">    string str;</span><br><span class="line">    vector&lt;string&gt; v;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è‹¥å¹²æ¡å½¢å¦‚â€˜ STMT -&gt; if EXPR then STMT  EXPR â€™çš„äº§ç”Ÿå¼ï¼š\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;(æ¯ä¸ªtokenä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œè¾“å…¥0ç»“æŸ)\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">getline</span>(cin, str); <span class="comment">//è·å–ä¸€è¡Œæ ‡å‡†è¾“å…¥ï¼Œå³å­—ç¬¦æµå½¢å¼çš„äº§ç”Ÿå¼</span></span><br><span class="line">        <span class="keyword">if</span> (str == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="type">int</span> l = str.<span class="built_in">length</span>();</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; index;</span><br><span class="line">        <span class="type">int</span> begin = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> end = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹å°†æ¯ä¸€è¡ŒåŒ–æˆè‹¥å¹²ä¸ªæœ€çŸ­äº§ç”Ÿå¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[i] == <span class="string">&#x27;&gt;&#x27;</span> &amp;&amp; i &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (str[i - <span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                    begin = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (str[i] == <span class="string">&#x27;&#x27;)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                index.push_back(i);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        string prefix = str.substr(0, begin + 1);</span></span><br><span class="line"><span class="string">        int len = int(index.size());</span></span><br><span class="line"><span class="string">        if (len == 0)</span></span><br><span class="line"><span class="string">            v.push_back(str);</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (i == 0)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    v.push_back(str.substr(0, index[0]));</span></span><br><span class="line"><span class="string">                    end = index[0];</span></span><br><span class="line"><span class="string">                    continue;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                begin = index[i - 1];</span></span><br><span class="line"><span class="string">                end = index[i];</span></span><br><span class="line"><span class="string">                v.push_back(prefix + str.substr(begin + 1, end - begin - 1));</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            v.push_back(prefix + str.substr(end + 1, l - end));</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125; //ä»¥ä¸Šå°†æ¯ä¸€è¡ŒåŒ–æˆè‹¥å¹²ä¸ªæœ€çŸ­äº§ç”Ÿå¼ï¼Œæ”¾åˆ°å‘é‡Vä¸­</span></span><br><span class="line"><span class="string">    //ä»¥ä¸‹ç»™tokenå½’ç±»ï¼Œåˆ†ä¸ºç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">    vector&lt;string&gt; left, right;</span></span><br><span class="line"><span class="string">    int len = int(v.size());</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        istringstream temp(v[i]);</span></span><br><span class="line"><span class="string">        string out;</span></span><br><span class="line"><span class="string">        int cal = 0;</span></span><br><span class="line"><span class="string">        ca new_item;</span></span><br><span class="line"><span class="string">        while (temp &gt;&gt; out)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (cal == 0)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                left.push_back(out);</span></span><br><span class="line"><span class="string">                new_item.str = out;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else if (cal == 1)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                cal++;</span></span><br><span class="line"><span class="string">                continue;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                right.push_back(out);</span></span><br><span class="line"><span class="string">                new_item.vec.push_back(out);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            cal++;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        CA.push_back(new_item);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    int len1 = int(left.size());</span></span><br><span class="line"><span class="string">    int len2 = int(right.size());</span></span><br><span class="line"><span class="string">    vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">    for (int k = 0; k &lt; len1; k++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        it = find(N.begin(), N.end(), left[k]);</span></span><br><span class="line"><span class="string">        if (it == N.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            N.push_back(left[k]); //äº§ç”Ÿå¼å·¦è¾¹çš„ä¸€å®šæ˜¯éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len2; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        bool flag = true; //é»˜è®¤æ˜¯ç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; len1; j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (right[i] == left[j]) //äº§ç”Ÿå¼å·¦è¾¹å‡ºç°è¿‡</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                flag = false; //æ˜¯éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">                break;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (flag)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            it = find(T.begin(), T.end(), right[i]);</span></span><br><span class="line"><span class="string">            if (it == T.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                T.push_back(right[i]);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            it = find(N.begin(), N.end(), right[i]);</span></span><br><span class="line"><span class="string">            if (it == N.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                N.push_back(right[i]);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    int num = 1;</span></span><br><span class="line"><span class="string">    state_node*first_node = new state_node();</span></span><br><span class="line"><span class="string">    //å…ˆæ„é€ åˆå§‹çŠ¶æ€</span></span><br><span class="line"><span class="string">    first_node-&gt;state_number = num++;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(CA.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        ca*p = copyca(CA[i]);</span></span><br><span class="line"><span class="string">        setPoint(* p, 0);</span></span><br><span class="line"><span class="string">        first_node-&gt;ca.push_back(* p);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    first = first_node;</span></span><br><span class="line"><span class="string">    //åˆå§‹çŠ¶æ€æ„é€ å®Œæˆ</span></span><br><span class="line"><span class="string">    state_table.push_back(first);</span></span><br><span class="line"><span class="string">    // S.push(first);</span></span><br><span class="line"><span class="string">    create_automaton(first, num);</span></span><br><span class="line"><span class="string">    //é€’å½’æ„é€ è‡ªåŠ¨æœº</span></span><br><span class="line"><span class="string">    return;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">void LR_0::create_automaton(state_node *current_state, int &amp;num)</span></span><br><span class="line"><span class="string">&#123; //æ„é€ è‡ªåŠ¨æœº</span></span><br><span class="line"><span class="string">    if (int(current_state-&gt;ca.size()) == 1)</span></span><br><span class="line"><span class="string">    &#123; //å½’çº¦çš„æƒ…å†µ</span></span><br><span class="line"><span class="string">        int d = int(current_state-&gt;ca[0].vec.size());</span></span><br><span class="line"><span class="string">        if (current_state-&gt;ca[0].vec[d - 1] == &quot;.&quot;)</span></span><br><span class="line"><span class="string">            return;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    vector&lt;string&gt; str;</span></span><br><span class="line"><span class="string">    vector&lt;int*&gt; index;</span></span><br><span class="line"><span class="string">    int x = 0;</span></span><br><span class="line"><span class="string">    int s = int(current_state-&gt;ca.size());</span></span><br><span class="line"><span class="string">    int len = 0;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; s; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        bool flag = true;   //æ˜¯ä¸æ˜¯æ–°çš„çŠ¶æ€</span></span><br><span class="line"><span class="string">        bool flag2 = false; //éœ€ä¸éœ€è¦è·³å‡ºå¾ªç¯</span></span><br><span class="line"><span class="string">        string temp = pointNext(current_state-&gt;ca[i]);</span></span><br><span class="line"><span class="string">        if (temp == &quot;&quot;)</span></span><br><span class="line"><span class="string">            return;</span></span><br><span class="line"><span class="string">        if (i &gt; 0)</span></span><br><span class="line"><span class="string">            len = int(str.size());</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; len; j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (str[j] == temp)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                flag = false;</span></span><br><span class="line"><span class="string">                break;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (flag)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            str.push_back(temp);</span></span><br><span class="line"><span class="string">            state_node*newstate = new state_node();</span></span><br><span class="line"><span class="string">            newstate-&gt;state_number = num++;</span></span><br><span class="line"><span class="string">            cs *newcs = new cs();</span></span><br><span class="line"><span class="string">            newcs-&gt;condition = temp;</span></span><br><span class="line"><span class="string">            newcs-&gt;state_number = num - 1;</span></span><br><span class="line"><span class="string">            for (int k = i; k &lt; s; k++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (pointNext(current_state-&gt;ca[k]) == temp)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    ca*p = copyca(current_state-&gt;ca[k]);</span></span><br><span class="line"><span class="string">                    int ss = p-&gt;vec.size();</span></span><br><span class="line"><span class="string">                    shiftPoint(* p);</span></span><br><span class="line"><span class="string">                    int res = state_exist(p);</span></span><br><span class="line"><span class="string">                    if (res != -1)</span></span><br><span class="line"><span class="string">                    &#123;</span></span><br><span class="line"><span class="string">                        num--;</span></span><br><span class="line"><span class="string">                        newcs-&gt;state_number = state_table[res] -&gt; state_number;</span></span><br><span class="line"><span class="string">                        current_state-&gt;cs.push_back(* newcs);</span></span><br><span class="line"><span class="string">                        flag2 = true;</span></span><br><span class="line"><span class="string">                        break;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                    newstate-&gt;ca.push_back(* p);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                if (k == s - 1)</span></span><br><span class="line"><span class="string">                &#123; //æœ€åä¸€æ¡å®Œæˆåï¼Œè®¡ç®—é—­åŒ…</span></span><br><span class="line"><span class="string">                    cal_closure(newstate);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            if (flag2) //éœ€è¦è·³å‡ºå¾ªç¯</span></span><br><span class="line"><span class="string">                continue;</span></span><br><span class="line"><span class="string">            current_state-&gt;cs.push_back(* newcs);</span></span><br><span class="line"><span class="string">            state_table.push_back(newstate);</span></span><br><span class="line"><span class="string">            create_automaton(newstate, num); //é€’å½’</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">void LR_0::display_parse_table()</span></span><br><span class="line"><span class="string">&#123; //è¾“å‡ºåˆ†æè¡¨</span></span><br><span class="line"><span class="string">    int len = state_table.size();</span></span><br><span class="line"><span class="string">    int s = T.size() + N.size();</span></span><br><span class="line"><span class="string">    string*str = new string[s];</span></span><br><span class="line"><span class="string">    int k = 0;</span></span><br><span class="line"><span class="string">    vector&lt;int&gt; line(s, 0);</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        Goto.push_back(line);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(T.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        str[k++] = T[i];</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(N.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        str[k++] = N[i];</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (state_table[i] -&gt; cs.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            bool flag = false;</span></span><br><span class="line"><span class="string">            string temp = &quot;Reduce &quot; + state_table[i] -&gt; ca[0].str + &quot;-&gt;&quot;;</span></span><br><span class="line"><span class="string">            int l = state_table[i] -&gt; ca[0].vec.size();</span></span><br><span class="line"><span class="string">            for (int k = 0; k &lt; l; k++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                temp = temp.append(state_table[i] -&gt; ca[0].vec[k]);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            if (state_table[i] -&gt; ca[0].vec[l - 1] == &quot;.&quot; &amp;&amp; state_table[i] -&gt; ca[0].vec[l - 2] == &quot;$&quot;)</span></span><br><span class="line"><span class="string">                Action.push_back(&quot;Accept&quot;);</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                Action.push_back(temp);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            Action.push_back(&quot;Shift&quot;);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; int(state_table[i] -&gt; cs.size()); j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            string temp = state_table[i] -&gt; cs[j].condition;</span></span><br><span class="line"><span class="string">            for (int k = 0; k &lt; s; k++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (temp == str[k])</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    Goto[state_table[i] -&gt; state_number - 1][k] = state_table[i] -&gt; cs[j].state_number;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    string temp(90, &#x27;</span>-<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">    cout &lt;&lt; setw(8) &lt;&lt; &quot;State&quot;</span></span><br><span class="line"><span class="string">         &lt;&lt; &quot;&quot;;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; s; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(8) &lt;&lt; str[i];</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; setw(16) &lt;&lt; &quot;Action&quot;;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; temp &lt;&lt; endl;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(8) &lt;&lt; i + 1 &lt;&lt; &quot;&quot;;</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; s; j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (Goto[i][j] != 0)</span></span><br><span class="line"><span class="string">                cout &lt;&lt; setw(8) &lt;&lt; Goto[i][j];</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                cout &lt;&lt; setw(8) &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(16) &lt;&lt; Action[i];</span></span><br><span class="line"><span class="string">        cout &lt;&lt; &#x27;</span>\n<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; temp;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">void LR_0::display_state_table()</span></span><br><span class="line"><span class="string">&#123; //è¾“å‡ºDFA</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(state_table.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; &quot;State&quot; &lt;&lt; state_table[i] -&gt; state_number &lt;&lt; &quot;:&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; int(state_table[i] -&gt; ca.size()); j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            cout &lt;&lt; setw(20) &lt;&lt; state_table[i] -&gt; ca[j].str &lt;&lt; &quot;-&gt;&quot;;</span></span><br><span class="line"><span class="string">            for (int k = 0; k &lt; int(state_table[i] -&gt; ca[j].vec.size()); k++)</span></span><br><span class="line"><span class="string">                cout &lt;&lt; state_table[i] -&gt; ca[j].vec[k];</span></span><br><span class="line"><span class="string">            cout &lt;&lt; endl;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; endl;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; &quot;Relation:\n&quot;;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(state_table.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; int(state_table[i] -&gt; cs.size()); j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            cout &lt;&lt; setw(20) &lt;&lt; state_table[i] -&gt; state_number &lt;&lt; &quot;-&gt; &quot;;</span></span><br><span class="line"><span class="string">            cout &lt;&lt; state_table[i] -&gt; cs[j].condition &lt;&lt; &quot; -&gt;&quot; &lt;&lt; state_table[i] -&gt; cs[j].state_number;</span></span><br><span class="line"><span class="string">            cout &lt;&lt; endl;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; endl;</span></span><br><span class="line"><span class="string">    return;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">bool LR_0::judge(string w)</span></span><br><span class="line"><span class="string">&#123; //åˆ¤æ–­å¥å­æ˜¯å¦ç¬¦åˆæ–‡æ³•</span></span><br><span class="line"><span class="string">    bool flag = false;</span></span><br><span class="line"><span class="string">    // getline(cin, str);//è¯»å–ä¸€è¡Œå‘½ä»¤å‚æ•°</span></span><br><span class="line"><span class="string">    vector&lt;string&gt; it;</span></span><br><span class="line"><span class="string">    istringstream temp(w);</span></span><br><span class="line"><span class="string">    string out;</span></span><br><span class="line"><span class="string">    while (temp &gt;&gt; out)</span></span><br><span class="line"><span class="string">        it.push_back(out);</span></span><br><span class="line"><span class="string">    //ä»¥ä¸Šï¼Œè½¬ä¸ºtokenæµ</span></span><br><span class="line"><span class="string">    stack&lt;string&gt; buffer;</span></span><br><span class="line"><span class="string">    for (int i = int(it.size()) - 1; i &gt;= 0; i--)</span></span><br><span class="line"><span class="string">        buffer.push(it[i]);</span></span><br><span class="line"><span class="string">    //å¾…å¤„ç†å­—ç¬¦å­˜åœ¨ä¸€ä¸ªæ ˆä¸­</span></span><br><span class="line"><span class="string">    stack&lt;state_node*&gt; state;</span></span><br><span class="line"><span class="string">    state.push(first);</span></span><br><span class="line"><span class="string">    stack&lt;string&gt; str;</span></span><br><span class="line"><span class="string">    string*arr = new string[int(T.size() + N.size())];</span></span><br><span class="line"><span class="string">    int j = 0;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(T.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        arr[j++] = T[i];</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(N.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        arr[j++] = N[i];</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    int a = 0;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line"><span class="string">    string tstr(90, &#x27;</span>-<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">    cout &lt;&lt; setw(20) &lt;&lt; &quot;State_stack&quot; &lt;&lt; setw(20) &lt;&lt; &quot;Processed&quot; &lt;&lt; setw(30) &lt;&lt; &quot;Unprocessed&quot; &lt;&lt; setw(20) &lt;&lt; &quot;Action_required&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="string">    cout &lt;&lt; tstr &lt;&lt; endl;</span></span><br><span class="line"><span class="string">    while (1)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        string outputstr1 = &quot;&quot;;</span></span><br><span class="line"><span class="string">        stack&lt;state_node*&gt; temp_state_stack;</span></span><br><span class="line"><span class="string">        while (!state.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            temp_state_stack.push(state.top());</span></span><br><span class="line"><span class="string">            state.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        while (!temp_state_stack.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            state.push(temp_state_stack.top());</span></span><br><span class="line"><span class="string">            outputstr1.append(to_string(temp_state_stack.top()-&gt;state_number) + &quot; &quot;);</span></span><br><span class="line"><span class="string">            temp_state_stack.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(20) &lt;&lt; outputstr1;</span></span><br><span class="line"><span class="string">        string outputstr2 = &quot;&quot;;</span></span><br><span class="line"><span class="string">        stack&lt;string&gt; temp_string_stack;</span></span><br><span class="line"><span class="string">        while (!str.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            temp_string_stack.push(str.top());</span></span><br><span class="line"><span class="string">            str.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        while (!temp_string_stack.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            str.push(temp_string_stack.top());</span></span><br><span class="line"><span class="string">            outputstr2.append(temp_string_stack.top() + &quot; &quot;);</span></span><br><span class="line"><span class="string">            temp_string_stack.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(20) &lt;&lt; outputstr2;</span></span><br><span class="line"><span class="string">        string outputstr3 = &quot;&quot;;</span></span><br><span class="line"><span class="string">        while (!buffer.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            temp_string_stack.push(buffer.top());</span></span><br><span class="line"><span class="string">            outputstr3.append(buffer.top() + &quot; &quot;);</span></span><br><span class="line"><span class="string">            buffer.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        while (!temp_string_stack.empty())</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            buffer.push(temp_string_stack.top());</span></span><br><span class="line"><span class="string">            temp_string_stack.pop();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(30) &lt;&lt; outputstr3;</span></span><br><span class="line"><span class="string">        if (buffer.empty()) //è¾“å…¥ä¸²å·²åˆ°æœ«å°¾</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            flag = true;</span></span><br><span class="line"><span class="string">            cout &lt;&lt; setw(20) &lt;&lt; &quot;Accept!\n&quot;;</span></span><br><span class="line"><span class="string">            break;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        string action = &quot;&quot;;</span></span><br><span class="line"><span class="string">        int s = state.top()-&gt;state_number - 1;</span></span><br><span class="line"><span class="string">        for (int i = 0; i &lt; int(T.size() + N.size()); i++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (buffer.top() == arr[i]) //å¾…è¾“å…¥çš„å­—ç¬¦æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                a = i; //è·å–åœ¨è¡¨æ ¼ä¸­çš„åˆ—å·</span></span><br><span class="line"><span class="string">                break;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        // s:è¡Œå· a:åˆ—å·</span></span><br><span class="line"><span class="string">        if (Goto[s][a] != 0) // shift</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            for (int i = 0; i &lt; int(state_table.size()); i++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (state_table[i] -&gt; state_number == Goto[s][a])</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    state.push(state_table[i]);</span></span><br><span class="line"><span class="string">                    break;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            str.push(buffer.top());</span></span><br><span class="line"><span class="string">            buffer.pop();</span></span><br><span class="line"><span class="string">            action = &quot;Shift,go to&quot; + to_string(Goto[s][a]);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (Action[s][0] == &#x27;</span>R<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                int index = 0;</span></span><br><span class="line"><span class="string">                for (int i = 0; i &lt; int(state_table.size()); i++)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    if (state_table[i] -&gt; state_number == s + 1)</span></span><br><span class="line"><span class="string">                    &#123;</span></span><br><span class="line"><span class="string">                        index = i; //æ‰¾åˆ°è¡Œå·</span></span><br><span class="line"><span class="string">                        break;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                int vsize = state_table[index] -&gt; ca[0].vec.size() - 1;</span></span><br><span class="line"><span class="string">                while (vsize--)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    state.pop();</span></span><br><span class="line"><span class="string">                    str.pop();</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                buffer.push(state_table[index] -&gt; ca[0].str);</span></span><br><span class="line"><span class="string">                int q = Action[s].length();</span></span><br><span class="line"><span class="string">                action = Action[s].substr(0, q - 1);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                action = Action[s];</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        //è¾“å‡º</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        cout &lt;&lt; setw(20) &lt;&lt; action &lt;&lt; endl;</span></span><br><span class="line"><span class="string">        cout &lt;&lt; tstr &lt;&lt; endl;</span></span><br><span class="line"><span class="string">        if (flag)</span></span><br><span class="line"><span class="string">            return flag;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return flag;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">int main()</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    // freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line"><span class="string">    LR_0 tag;</span></span><br><span class="line"><span class="string">    tag.init();</span></span><br><span class="line"><span class="string">    tag.display_state_table();</span></span><br><span class="line"><span class="string">    tag.display_parse_table();</span></span><br><span class="line"><span class="string">    // tag.judge(&quot;int +  ( int + int ) $&quot;);</span></span><br><span class="line"><span class="string">    cout &lt;&lt; &quot;è¯·è¾“å…¥å¥å­ï¼Œæ¯ä¸ªtokené—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä»¥$ç»“å°¾:\n&quot;;</span></span><br><span class="line"><span class="string">    string str;</span></span><br><span class="line"><span class="string">    getline(cin, str);</span></span><br><span class="line"><span class="string">    tag.judge(str);</span></span><br><span class="line"><span class="string">    return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>ç¼–è¯‘åŸç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
      <tag>ç¼–è¯‘åŸç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SLICè¶…åƒç´ è§†é¢‘è½¬æ¢</title>
    <link href="/2020/04/30/%E8%B6%85%E5%83%8F%E7%B4%A0%E8%A7%86%E9%A2%91%E8%BD%AC%E6%8D%A2/"/>
    <url>/2020/04/30/%E8%B6%85%E5%83%8F%E7%B4%A0%E8%A7%86%E9%A2%91%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1Â Â Â Â  é—®é¢˜æè¿°"></a>1Â Â Â Â  é—®é¢˜æè¿°</h2><p>è¶…åƒç´ è§†é¢‘ç”Ÿæˆå°è½¯ä»¶:å®Œæˆä¸€æ®µå°ç¨‹åºï¼Œè¯»å…¥ä¸€æ®µåŸå§‹è§†é¢‘ï¼Œè¦æ±‚è°ƒç”¨SLICç®—æ³•ç”Ÿæˆè¶…åƒç´ è§†é¢‘ã€‚è¯¥è½¯ä»¶è¦æ±‚æœ‰å‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œæœ‰åŠŸèƒ½æŒ‰é’®åŠè§†é¢‘æ˜¾ç¤ºç­‰ç»†èŠ‚ï¼Œè¦æ±‚èƒ½åœ¨ç•Œé¢ä¸Šè®¾ç½®SLICçš„è¾“å…¥å‚æ•°ã€‚</p><h2 id="2-è¶…åƒç´ ä»‹ç»"><a href="#2-è¶…åƒç´ ä»‹ç»" class="headerlink" title="2Â Â Â  è¶…åƒç´ ä»‹ç»"></a>2Â Â Â  è¶…åƒç´ ä»‹ç»</h2><h3 id="2-1æ¦‚å¿µ"><a href="#2-1æ¦‚å¿µ" class="headerlink" title="2.1æ¦‚å¿µ"></a>2.1æ¦‚å¿µ</h3><p>è¶…åƒç´ æ¦‚å¿µæ˜¯2003å¹´Xiaofeng Renæå‡ºå’Œå‘å±•èµ·æ¥çš„å›¾åƒåˆ†å‰²æŠ€æœ¯ï¼Œå®ƒæ˜¯æŒ‡å…·æœ‰ç›¸ä¼¼çº¹ç†ã€é¢œè‰²ã€äº®åº¦ç­‰ç‰¹å¾çš„ç›¸é‚»åƒç´ æ„æˆçš„æœ‰ä¸€å®šè§†è§‰æ„ä¹‰çš„ä¸è§„åˆ™åƒç´ å—ã€‚å®ƒåˆ©ç”¨åƒç´ ä¹‹é—´ç‰¹å¾çš„ç›¸ä¼¼æ€§å°†åƒç´ åˆ†ç»„,ç”¨å°‘é‡çš„è¶…åƒç´ ä»£æ›¿å¤§é‡çš„åƒç´ æ¥è¡¨è¾¾å›¾ç‰‡ç‰¹å¾,å¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½äº†å›¾åƒåå¤„ç†çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥é€šå¸¸ä½œä¸ºåˆ†å‰²<a href="https://edu.csdn.net/course/detail/25300">ç®—æ³•</a>çš„é¢„å¤„ç†æ­¥éª¤ã€‚è¯¥æŠ€æœ¯å·²ç»è¢«å¹¿æ³›çš„åº”ç”¨åˆ°å›¾åƒåˆ†å‰²ã€å§¿åŠ¿ä¼°è®¡ã€ç›®æ ‡è·Ÿè¸ªã€ç›®æ ‡è¯†åˆ«ç­‰å¤šä¸ª<a href="https://edu.csdn.net/course/detail/10552">è®¡ç®—æœºè§†è§‰</a>ä»»åŠ¡ç­‰ã€‚</p><h3 id="2-2ç‰¹ç‚¹"><a href="#2-2ç‰¹ç‚¹" class="headerlink" title="2.2ç‰¹ç‚¹"></a>2.2ç‰¹ç‚¹</h3><ul><li>è®¡ç®—æ•ˆç‡æ¯”è¾ƒé«˜</li></ul><p>è™½ç„¶è®¡ç®—å®é™…çš„è¶…åƒç´ ç»„å¯èƒ½å¾ˆæ˜‚è´µï¼Œä½†å®ƒå…è®¸æˆ‘ä»¬å°†å›¾åƒæœ¬èº«çš„å¤æ‚æ€§ä»å‡ åä¸‡åƒç´ é™ä½åˆ°å‡ ç™¾åƒç´ ã€‚è¿™äº›è¶…çº§åƒç´ ä¸­çš„æ¯ä¸€ä¸ªéƒ½å°†åŒ…å«æŸç§æ„ŸçŸ¥çš„ã€ç†æƒ³çš„è¯­ä¹‰å€¼ã€‚</p><ul><li>å«æœ‰æ›´å¤šçš„æ„ŸçŸ¥ä¿¡æ¯</li></ul><p>å•ä¸ªçš„åƒç´ ç½‘æ ¼å…¶å®å¹¶æ²¡æœ‰å¤ªå¤§çš„æ„ŸçŸ¥æ„ä¹‰ï¼Œè€Œè¶…åƒç´ ç»„ä¸­çš„åƒç´ å…·æœ‰å…±æ€§ï¼Œä¾‹å¦‚ç›¸ä¼¼çš„é¢œè‰²æˆ–çº¹ç†åˆ†å¸ƒã€‚ä¸‹å›¾å±•ç¤ºäº†è¿™ç§æƒ…å†µï¼Œå•å•å°†å›¾ä¸­ç®­å¤´æ‰€æŒ‡çš„å›¾åƒåƒç´ ç½‘æ ¼è¿›è¡Œæ”¾å¤§åå¹¶ä¸èƒ½å¾—åˆ°ä»€ä¹ˆæ„ŸçŸ¥ä¿¡æ¯ã€‚</p><ul><li>è¿‡åº¦åˆ†å‰²å¯ä»¥å‡å°‘åƒç´ æŸå¤±</li></ul><p>å¤§å¤šæ•°çš„è¶…åƒç´ ç®—æ³•éƒ½ä¼šä½¿å›¾åƒå¤±çœŸã€‚è¿™æ„å‘³ç€å›¾åƒä¸­çš„å¤§éƒ¨åˆ†é‡è¦è¾¹ç•Œéƒ½è¢«æ‰¾åˆ°äº†ï¼›ä½†æ˜¯å®ƒçš„ä»£ä»·æ˜¯ç”Ÿæˆè®¸å¤šæ— å…³ç´§è¦çš„è¾¹ç•Œã€‚è™½ç„¶è¿™å¬èµ·æ¥åƒæ˜¯ä½¿ç”¨è¶…çº§åƒç´ çš„é—®é¢˜ï¼Œä½†å®é™…ä¸Šå®ƒä¼šå¸¦æ¥ä¼˜ç‚¹ï¼Œè¿™ç§è¿‡åº¦æ‰©å¼ çš„æœ€ç»ˆç»“æœæ˜¯-ä»åƒç´ ç½‘æ ¼åˆ°è¶…çº§åƒç´ æ˜ å°„çš„åƒç´ æŸå¤±éå¸¸å°ã€‚</p><h2 id="3-SLICç®—æ³•ä»‹ç»"><a href="#3-SLICç®—æ³•ä»‹ç»" class="headerlink" title="3Â Â Â Â  SLICç®—æ³•ä»‹ç»"></a>3Â Â Â Â  SLICç®—æ³•ä»‹ç»</h2><h3 id="3-1ç®—æ³•åŸç†"><a href="#3-1ç®—æ³•åŸç†" class="headerlink" title="3.1ç®—æ³•åŸç†"></a>3.1ç®—æ³•åŸç†</h3><p>ç®€å•çº¿æ€§è¿­ä»£èšç±»SILCï¼ˆsimple linear iterative clusteringï¼‰æ˜¯ä¸€ç§å›¾åƒåˆ†å‰²ç®—æ³•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç®—æ³•çš„å”¯ä¸€å‚æ•°æ˜¯kï¼Œçº¦ç­‰äºè¶…åƒç´ å°ºå¯¸çš„æœŸæœ›æ•°é‡ã€‚å¯¹äºCIELABå½©è‰²ç©ºé—´çš„å›¾åƒï¼Œåœ¨ç›¸éš”Såƒç´ ä¸Šé‡‡æ ·å¾—åˆ°åˆå§‹èšç±»ä¸­å¿ƒã€‚ä¸ºäº†äº§ç”Ÿå¤§è‡´ç›¸åŒå°ºå¯¸çš„è¶…åƒç´ ï¼Œæ ¼ç‚¹çš„è·ç¦»æ˜¯S&#x3D;N&#x2F;kâˆ’âˆ’âˆ’âˆ’âˆšS&#x3D;N&#x2F;kã€‚ä¸­å¿ƒéœ€è¦è¢«ç§»åˆ°3x3é¢†åŸŸå†…çš„æœ€ä½æ¢¯åº¦å¤„ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é¿å…è¶…åƒç´ ä¸­å¿ƒåœ¨è¾¹ç¼˜å’Œå™ªå£°ç‚¹ä¸Šã€‚</p><p>ã€€ã€€æ¥ä¸‹æ¥ä¸ºæ¯ä¸€ä¸ªåƒç´ iiè®¾ç½®æœ€è¿‘çš„èšç±»ä¸­å¿ƒï¼Œè¯¥èšç±»ä¸­å¿ƒçš„æœç´¢åŒºåŸŸè¦è¦†ç›–è¯¥åƒç´ çš„ä½ç½®ã€‚è¿™æ˜¯æœ¬ç®—æ³•åŠ é€Ÿçš„å…³é”®ï¼Œå› ä¸ºé€šè¿‡é™åˆ¶æœç´¢åŒºåŸŸçš„å¤§å°å‡å°äº†è·ç¦»è®¡ç®—çš„æ•°é‡ï¼Œå¹¶ä¸”ç›¸å¯¹äºä¼ ç»Ÿçš„k-meansèšç±»ç®—æ³•æœ‰æ˜¾è‘—çš„é€Ÿåº¦ä¼˜åŠ¿ï¼Œå› ä¸ºåè€…çš„æ¯ä¸ªåƒç´ éƒ½å¿…é¡»å’Œæ‰€æœ‰çš„èšç±»ä¸­å¿ƒè¿›è¡Œæ¯”è¾ƒã€‚ä¸€ä¸ªè¶…åƒç´ çš„é¢„æœŸç©ºé—´èŒƒå›´æ˜¯çº¦ä¸ºSxSçš„åŒºåŸŸï¼Œè¿™é‡Œå¯¹äºç›¸ä¼¼åƒç´ çš„æœç´¢æ˜¯åœ¨è¶…åƒç´ ä¸­å¿ƒçš„2Sx2SåŒºåŸŸå®Œæˆã€‚</p><p>ã€€ã€€ä¸€æ—¦æ¯ä¸ªåƒç´ è¢«å…³è”åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒåï¼Œå°±é€šè¿‡æ±‚èšç±»ä¸­å¿ƒæ‰€æœ‰åƒç´ çš„å‡å€¼æ¥æ‰§è¡Œèšç±»ä¸­å¿ƒçš„æ›´æ–°ã€‚ä½¿ç”¨L2L2èŒƒæ•°è®¡ç®—å‰ä¸€ä¸ªèšç±»ä¸­å¿ƒå’Œå½“å‰èšç±»ä¸­å¿ƒçš„æ®‹å·®ã€‚assignmentå’Œupdateæ­¥éª¤è¢«é‡å¤è¿­ä»£ç›´åˆ°è¯¯å·®æ”¶æ•›ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°å¯¹äºå¤§å¤šæ•°å›¾åƒ10æ¬¡è¿­ä»£å°±å¤Ÿäº†ã€‚</p><h3 id="3-2ç®—æ³•æ­¥éª¤"><a href="#3-2ç®—æ³•æ­¥éª¤" class="headerlink" title="3.2ç®—æ³•æ­¥éª¤"></a>3.2ç®—æ³•æ­¥éª¤</h3><ul><li>æ­¥éª¤1-åˆå§‹åŒ–ç§å­ç‚¹ï¼ˆèšç±»ä¸­å¿ƒï¼‰æŒ‰ç…§è®¾å®šçš„è¶…åƒç´ ç»„ä¸ªæ•°ï¼Œåœ¨å›¾åƒå†…å‡åŒ€çš„åˆ†é…ä¸€äº›ç§å­ç‚¹ã€‚å‡è®¾å›¾ç‰‡æ€»å…±æœ‰å«æœ‰N ä¸ªåƒç´ ç‚¹ï¼Œé¢„åˆ†å‰²ä¸º K ä¸ªç›¸åŒå°ºå¯¸çš„è¶…åƒç´ ï¼Œé‚£ä¹ˆæ¯ä¸ªè¶…åƒç´ çš„å¤§å°ä¸ºN&#x2F; K ï¼Œåˆ™ç›¸é‚»ç§å­ç‚¹çš„è·ç¦»æˆ–è€…æ­¥é•¿è¿‘ä¼¼å¯ä»¥è¡¨ç¤ºä¸ºS&#x3D;sqrt(N&#x2F;K)ã€‚</li><li>æ­¥éª¤2-åœ¨ç§å­ç‚¹çš„n*né‚»åŸŸå†…é‡æ–°é€‰æ‹©ç§å­ç‚¹ï¼ˆä¸€èˆ¬å–n&#x3D;3ï¼‰ã€‚é¦–å…ˆè®¡ç®—è¯¥é‚»åŸŸå†…æ‰€æœ‰åƒç´ ç‚¹çš„æ¢¯åº¦å€¼ï¼›ç„¶åå°†ç§å­ç‚¹ç§»åˆ°è¯¥é‚»åŸŸå†…æ¢¯åº¦æœ€å°çš„åœ°æ–¹ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†é¿å…ç§å­ç‚¹è½åœ¨æ¢¯åº¦è¾ƒå¤§çš„è½®å»“è¾¹ç•Œä¸Šï¼Œä»¥å…å½±å“åç»­èšç±»æ•ˆæœã€‚</li><li>æ­¥éª¤3-åœ¨æ¯ä¸ªç§å­ç‚¹å‘¨å›´çš„é‚»åŸŸå†…ä¸ºæ¯ä¸ªåƒç´ ç‚¹åˆ†é…ç±»æ ‡ç­¾ï¼ˆå³å±äºå“ªä¸ªèšç±»ä¸­å¿ƒï¼‰ã€‚å’Œæ ‡å‡†çš„k-meansåœ¨æ•´å¼ å›¾ä¸­æœç´¢ä¸åŒï¼ŒSLICçš„æœç´¢èŒƒå›´é™åˆ¶ä¸º2S_2Sï¼Œå¯ä»¥åŠ é€Ÿç®—æ³•æ”¶æ•›ï¼Œå…·ä½“çš„åŒºåˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæœŸæœ›çš„è¶…åƒç´ å°ºå¯¸ä¸ºS_Sï¼Œä½†æ˜¯æœç´¢çš„èŒƒå›´æ˜¯2S*2Sã€‚</li></ul><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/kmean.png"></p><p>å›¾3-1 æ ‡å‡†K-meanså’ŒSLICæœç´¢èŒƒå›´åŒºåˆ«</p><ul><li>æ­¥éª¤4-è·ç¦»åº¦é‡ã€‚å…·ä½“åŒ…æ‹¬é¢œè‰²å’Œç©ºé—´è·ç¦»ã€‚å¯¹äºæ¯ä¸ªæœç´¢åˆ°çš„åƒç´ ç‚¹ï¼Œåˆ†åˆ«è®¡ç®—å®ƒåˆ°è¯¥ç§å­ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚å…·ä½“çš„è·ç¦»å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/juli.png"></p><p>å›¾3-2 è·ç¦»å…¬å¼</p><h3 id="3-3ç®—æ³•è°ƒç”¨"><a href="#3-3ç®—æ³•è°ƒç”¨" class="headerlink" title="3.3ç®—æ³•è°ƒç”¨"></a>3.3ç®—æ³•è°ƒç”¨</h3><p>slic(image,<br>n_segments&#x3D;100,<br>compactness&#x3D;10,<br>max_iter&#x3D;10,<br>sigma&#x3D;0,<br>spacing&#x3D;None,<br>multichannel&#x3D;True,<br>convert2lab&#x3D;None,<br>enforce_connectivity&#x3D;True,<br>min_size_factor&#x3D;0.5,<br>max_size_factor&#x3D;3,<br>slic_zero&#x3D;False)</p><p>image 2D, 3D or 4D æ•°ç»„</p><p>n_segmentsè¶…åƒç´ è¿‘ä¼¼ä¸ªæ•°</p><p>max_iteræœ€å¤§kå‡å€¼è¿­ä»£æ¬¡æ•°</p><p>sigmaé«˜æ–¯å¹³æ»‘æ ¸å®½</p><p>æœ¬å®éªŒä¸­æ”¯æŒè°ƒæ•´çš„å‚æ•°æœ‰ä¸¤ä¸ªï¼šn_segments, sigma</p><h2 id="4-ç¨‹åºè¯´æ˜"><a href="#4-ç¨‹åºè¯´æ˜" class="headerlink" title="4Â Â Â Â  ç¨‹åºè¯´æ˜"></a>4Â Â Â Â  ç¨‹åºè¯´æ˜</h2><h3 id="4-1ä¸»ç¨‹åºæµç¨‹å›¾"><a href="#4-1ä¸»ç¨‹åºæµç¨‹å›¾" class="headerlink" title="4.1ä¸»ç¨‹åºæµç¨‹å›¾"></a>4.1ä¸»ç¨‹åºæµç¨‹å›¾</h3><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200430194359.png"></p><p>å›¾4-1 ä¸»ç¨‹åºæµç¨‹å›¾(ä¸å«UIç•Œé¢äº‹ä»¶)</p><h3 id="4-2ä¸»è¦å‡½æ•°è¯´æ˜"><a href="#4-2ä¸»è¦å‡½æ•°è¯´æ˜" class="headerlink" title="4.2ä¸»è¦å‡½æ•°è¯´æ˜"></a>4.2ä¸»è¦å‡½æ•°è¯´æ˜</h3><p>è¡¨4-1 ä¸»è¦å‡½æ•°è¯´æ˜</p><table><thead><tr><th>å‡½æ•°å</th><th>åŠŸèƒ½</th><th>è¾“å…¥</th><th>è¾“å‡º</th></tr></thead><tbody><tr><td>Read_video(path,file_name)</td><td>æŠŠè§†é¢‘è½¬åŒ–ä¸ºå¾ˆå¤šå›¾ç‰‡ï¼Œå¹¶ä¸”æå–éŸ³é¢‘æ–‡ä»¶</td><td>è§†é¢‘è·¯å¾„ã€æ–‡ä»¶å</td><td>å¸§ç‡ã€å°ºå¯¸</td></tr><tr><td>Super_pixel(path,numSegments,numSigma,outputDir,outputFilename)</td><td>æŠŠå•å¼ å›¾ç‰‡è½¬ä¸ºè¶…åƒç´ å›¾åƒ</td><td>å›¾ç‰‡è·¯å¾„ã€è¶…åƒç´ ä¸ªæ•°ã€å¹³æ»‘åº¦ã€è¾“å‡ºè·¯å¾„ã€è¾“å‡ºæ–‡ä»¶å</td><td>æ— </td></tr><tr><td>Picture_conversion(inputDir,outputDir,numSegments,numSigma)</td><td>è°ƒç”¨Super_pixelæ‰¹é‡æŠŠå›¾ç‰‡è½¬åŒ–æˆè¶…åƒç´ å›¾åƒ</td><td>æºç›®å½•ã€è¾“å‡ºç›®å½•ã€è¶…åƒç´ ä¸ªæ•°ã€å¹³æ»‘åº¦</td><td>æ— </td></tr><tr><td>Create_video(videoDir,fps,height,width)</td><td>æŠŠæ‰¹é‡çš„è¶…åƒç´ å›¾åƒåˆæˆä¸ºè§†é¢‘å¹¶è¿›è¡Œå‹ç¼©ï¼ŒåŠ å…¥éŸ³é¢‘</td><td>è§†é¢‘è·¯å¾„ã€å¸§ç‡ã€å°ºå¯¸</td><td>æ— </td></tr></tbody></table><h2 id="5-åŠŸèƒ½æµ‹è¯•"><a href="#5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="5Â Â Â Â  åŠŸèƒ½æµ‹è¯•"></a>5Â Â Â Â  åŠŸèƒ½æµ‹è¯•</h2><p>å›¾å½¢ç•Œé¢æœ‰3ä¸ªå¯ä¿®æ”¹çš„å‚æ•°å’Œ4ä¸ªæŒ‰é’®ï¼Œå¦‚å›¾5-1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-1-1024x781.png"></p><p>å›¾5-1 åŸè§†é¢‘</p><p>ç‚¹å‡»å¼€å§‹è½¬æ¢æŒ‰é’®ï¼Œç»è¿‡ä¸€æ®µæ¼«é•¿çš„ç­‰å¾…æ—¶é—´ï¼Œæ˜¾ç¤ºè½¬æ¢æˆåŠŸ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-2-1024x724.png"></p><p>å›¾5-2 è½¬æ¢æˆåŠŸ</p><p>æ³¨æ„åˆ°ç¬¬äºŒä¸ªæ’­æ”¾æŒ‰é’®å˜ä¸ºå¯ç”¨ï¼Œç‚¹å‡»æ’­æ”¾è½¬æ¢åçš„è§†é¢‘</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-3-1024x781.png"></p><p>å›¾5-3 æ’­æ”¾è½¬æ¢åçš„è§†é¢‘</p><p>ä¸åŒå‚æ•°æƒ…å†µä¸‹çš„è½¬æ¢ç»“æœï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-4-592x1024.jpg"></p><p>å›¾5-4 n_segments&#x3D;100,sigma&#x3D;0</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-5-592x1024.jpg"></p><p>å›¾5-5 n_segments&#x3D;100,sigma&#x3D;5</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-6-592x1024.jpg"></p><p>å›¾5-6 n_segments&#x3D;100,sigma&#x3D;10</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-7-1-592x1024.jpg"></p><p>å›¾5-7 n_segments&#x3D;500,sigma&#x3D;5</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/5-8-592x1024.jpg"></p><p>å›¾5-4 n_segments&#x3D;1000,sigma&#x3D;5</p><h2 id="6-å®éªŒæ€»ç»“"><a href="#6-å®éªŒæ€»ç»“" class="headerlink" title="6Â Â Â Â  å®éªŒæ€»ç»“"></a>6Â Â Â Â  å®éªŒæ€»ç»“</h2><p>æœ¬æ¬¡å®éªŒæœ‰ä¸€å®šçš„æŒ‘æˆ˜æ€§ï¼Œä¸€æ–¹é¢æ˜¯è¿˜æ²¡ç”¨PyQt5å†™è¿‡ç•Œé¢ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¹³æ—¶åšçš„éƒ½æ˜¯å•å¼ å›¾åƒå¤„ç†ï¼Œè¿˜æ²¡åšè¿‡è§†é¢‘å¤„ç†ï¼Œæœ‰äº›ä¸çŸ¥æ‰€æªã€‚æŸ¥é˜…èµ„æ–™åå‘ç°æ²¡æœ‰èƒ½å¤Ÿç›´æ¥å¯¹è§†é¢‘å¯¹è±¡è¿›è¡Œè½¬æ¢çš„ï¼Œæ‰€ä»¥å°±ç¡®å®šäº†åŸºæœ¬æ€è·¯ï¼šæŠŠæ¯ä¸€å¸§å›¾åƒå•ç‹¬æ‹†åˆ†å‡ºæ¥è¿›è¡Œè¶…åƒç´ è½¬æ¢ï¼Œå†ç»„åˆæˆæ–°çš„è§†é¢‘ï¼Œç„¶åæŠŠåŸè§†é¢‘çš„éŸ³é¢‘ä¿¡æ¯å†åŠ å…¥åˆ°æ–°è§†é¢‘ä¸­ã€‚ç¢°åˆ°çš„éš¾ç‚¹ä¸»è¦åœ¨å•å¼ å›¾åƒçš„è¶…åƒç´ è½¬æ¢å’Œå­˜å‚¨ã€è§†é¢‘çš„å‹ç¼©ä»¥åŠåœ¨å›¾å½¢åŒ–ç•Œé¢ä¸­çš„è§†é¢‘æ’­æ”¾ã€‚ç»è¿‡ä¸€ç•ªæŠ˜è…¾ä¹Ÿç®—æ˜¯åŸºæœ¬å®Œæˆäº†ä»»åŠ¡éœ€æ±‚ï¼Œä¹Ÿç§¯ç´¯äº†ä¸å°‘ç›¸å…³çš„å¼€å‘ç»éªŒï¼Œå—ç›Šè‰¯å¤šï¼Œå¾ˆæœ‰æ„ä¹‰ã€‚</p><h2 id="7-æºç "><a href="#7-æºç " class="headerlink" title="7Â Â Â Â  æºç "></a>7Â Â Â Â  æºç </h2><h3 id="test-ui"><a href="#test-ui" class="headerlink" title="test.ui"></a>test.ui</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>SuperpixelVideo<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;SuperpixelVideo&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>1120<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>817<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>9<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralwidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;n_segments&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>80<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>151<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minimumSize&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">size</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>16<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">underline</span>&gt;</span>false<span class="tag">&lt;/<span class="name">underline</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>è¶…åƒç´ ä¸ªæ•°<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;textFormat&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::AutoText<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sigma&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>90<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>81<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">underline</span>&gt;</span>false<span class="tag">&lt;/<span class="name">underline</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>å¹³æ»‘åº¦<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;cofirmButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>830<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>221<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>91<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;palette&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">palette</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">active</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;Button&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>85<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>170<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>255<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">active</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inactive</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;Button&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>85<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>170<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>255<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">inactive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">disabled</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;Button&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>85<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>170<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>255<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">disabled</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">palette</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>28<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">italic</span>&gt;</span>false<span class="tag">&lt;/<span class="name">italic</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strikeout</span>&gt;</span>false<span class="tag">&lt;/<span class="name">strikeout</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>å¼€å§‹è½¬æ¢<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;videoPath&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>110<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>121<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">underline</span>&gt;</span>false<span class="tag">&lt;/<span class="name">underline</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>è§†é¢‘è·¯å¾„<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit01&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>10<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>351<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>14<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit02&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>81<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>14<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit03&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>90<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>81<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>14<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;button1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>220<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>710<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>111<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>æ’­æ”¾<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verticalLayoutWidget&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>20<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>130<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>511<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>561<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;QVBoxLayout&quot;</span> <span class="attr">name</span>=<span class="string">&quot;videoplayer1&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verticalLayoutWidget_2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>580<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>130<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>521<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>561<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;QVBoxLayout&quot;</span> <span class="attr">name</span>=<span class="string">&quot;videoplayer2&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;button2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enabled&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>780<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>710<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>111<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>æ’­æ”¾<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>620<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>60<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>211<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>41<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;palette&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">palette</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">active</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;WindowText&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>255<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>0<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>0<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">active</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inactive</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;WindowText&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>255<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>0<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>0<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">inactive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">disabled</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">colorrole</span> <span class="attr">role</span>=<span class="string">&quot;WindowText&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">brush</span> <span class="attr">brushstyle</span>=<span class="string">&quot;SolidPattern&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">color</span> <span class="attr">alpha</span>=<span class="string">&quot;255&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">red</span>&gt;</span>120<span class="tag">&lt;/<span class="name">red</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">green</span>&gt;</span>120<span class="tag">&lt;/<span class="name">green</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">blue</span>&gt;</span>120<span class="tag">&lt;/<span class="name">blue</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">brush</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">colorrole</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">disabled</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">palette</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;layoutDirection&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::LeftToRight<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>340<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>72<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>15<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>0ä¸ºä¸å¹³æ»‘<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>340<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>60<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>72<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>15<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>è¿‘ä¼¼<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>610<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>91<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>å•å·¦æ–œæ &#x27;/&#x27;<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;button3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>500<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>710<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>111<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>16<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">weight</span>&gt;</span>75<span class="tag">&lt;/<span class="name">weight</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bold</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bold</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>åœæ­¢<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menubar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>1120<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>26<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusbar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Ui-test-py"><a href="#Ui-test-py" class="headerlink" title="Ui_test.py"></a>Ui_test.py</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Form implementation generated from reading ui file &#x27;e:testtest.ui&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Created by: PyQt5 UI code generator 5.13.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># WARNING! All changes made in this file will be lost!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui, QtWidgets</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ui_SuperpixelVideo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setupUi</span>(<span class="params">self, SuperpixelVideo</span>):</span><br><span class="line">        SuperpixelVideo.setObjectName(<span class="string">&quot;SuperpixelVideo&quot;</span>)</span><br><span class="line">        SuperpixelVideo.resize(<span class="number">1120</span>, <span class="number">817</span>)</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">9</span>)</span><br><span class="line">        SuperpixelVideo.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.centralwidget = QtWidgets.QWidget(SuperpixelVideo)</span><br><span class="line">        <span class="variable language_">self</span>.centralwidget.setObjectName(<span class="string">&quot;centralwidget&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.n_segments = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setGeometry(QtCore.QRect(<span class="number">80</span>, <span class="number">40</span>, <span class="number">151</span>, <span class="number">51</span>))</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setMinimumSize(QtCore.QSize(<span class="number">16</span>, <span class="number">16</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setUnderline(<span class="literal">False</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setTextFormat(QtCore.Qt.AutoText)</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setObjectName(<span class="string">&quot;n_segments&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.sigma = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.sigma.setGeometry(QtCore.QRect(<span class="number">140</span>, <span class="number">90</span>, <span class="number">81</span>, <span class="number">31</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setUnderline(<span class="literal">False</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.sigma.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.sigma.setObjectName(<span class="string">&quot;sigma&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton = QtWidgets.QPushButton(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton.setGeometry(QtCore.QRect(<span class="number">830</span>, <span class="number">30</span>, <span class="number">221</span>, <span class="number">91</span>))</span><br><span class="line">        palette = QtGui.QPalette()</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">85</span>, <span class="number">170</span>, <span class="number">255</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Button, brush)</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">85</span>, <span class="number">170</span>, <span class="number">255</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Button, brush)</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">85</span>, <span class="number">170</span>, <span class="number">255</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Button, brush)</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton.setPalette(palette)</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">28</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setItalic(<span class="literal">False</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        font.setStrikeOut(<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton.setObjectName(<span class="string">&quot;cofirmButton&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoPath = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.videoPath.setGeometry(QtCore.QRect(<span class="number">110</span>, <span class="number">0</span>, <span class="number">121</span>, <span class="number">51</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setUnderline(<span class="literal">False</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoPath.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.videoPath.setObjectName(<span class="string">&quot;videoPath&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit01 = QtWidgets.QLineEdit(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit01.setGeometry(QtCore.QRect(<span class="number">240</span>, <span class="number">10</span>, <span class="number">351</span>, <span class="number">31</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">14</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit01.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit01.setObjectName(<span class="string">&quot;lineEdit01&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit02 = QtWidgets.QLineEdit(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit02.setGeometry(QtCore.QRect(<span class="number">240</span>, <span class="number">50</span>, <span class="number">81</span>, <span class="number">31</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">14</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit02.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit02.setObjectName(<span class="string">&quot;lineEdit02&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit03 = QtWidgets.QLineEdit(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit03.setGeometry(QtCore.QRect(<span class="number">240</span>, <span class="number">90</span>, <span class="number">81</span>, <span class="number">31</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">14</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit03.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.lineEdit03.setObjectName(<span class="string">&quot;lineEdit03&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button1 = QtWidgets.QPushButton(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.button1.setGeometry(QtCore.QRect(<span class="number">220</span>, <span class="number">710</span>, <span class="number">111</span>, <span class="number">51</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button1.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.button1.setObjectName(<span class="string">&quot;button1&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget = QtWidgets.QWidget(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget.setGeometry(QtCore.QRect(<span class="number">20</span>, <span class="number">130</span>, <span class="number">511</span>, <span class="number">561</span>))</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget.setObjectName(<span class="string">&quot;verticalLayoutWidget&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer1 = QtWidgets.QVBoxLayout(<span class="variable language_">self</span>.verticalLayoutWidget)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer1.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer1.setObjectName(<span class="string">&quot;videoplayer1&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget_2 = QtWidgets.QWidget(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget_2.setGeometry(QtCore.QRect(<span class="number">580</span>, <span class="number">130</span>, <span class="number">521</span>, <span class="number">561</span>))</span><br><span class="line">        <span class="variable language_">self</span>.verticalLayoutWidget_2.setObjectName(<span class="string">&quot;verticalLayoutWidget_2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer2 = QtWidgets.QVBoxLayout(<span class="variable language_">self</span>.verticalLayoutWidget_2)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer2.setContentsMargins(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.videoplayer2.setObjectName(<span class="string">&quot;videoplayer2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button2 = QtWidgets.QPushButton(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.button2.setEnabled(<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button2.setGeometry(QtCore.QRect(<span class="number">780</span>, <span class="number">710</span>, <span class="number">111</span>, <span class="number">51</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button2.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.button2.setObjectName(<span class="string">&quot;button2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.label.setGeometry(QtCore.QRect(<span class="number">620</span>, <span class="number">60</span>, <span class="number">211</span>, <span class="number">41</span>))</span><br><span class="line">        palette = QtGui.QPalette()</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)</span><br><span class="line">        brush = QtGui.QBrush(QtGui.QColor(<span class="number">120</span>, <span class="number">120</span>, <span class="number">120</span>))</span><br><span class="line">        brush.setStyle(QtCore.Qt.SolidPattern)</span><br><span class="line">        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)</span><br><span class="line">        <span class="variable language_">self</span>.label.setPalette(palette)</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.label.setLayoutDirection(QtCore.Qt.LeftToRight)</span><br><span class="line">        <span class="variable language_">self</span>.label.setText(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label.setObjectName(<span class="string">&quot;label&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_2 = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.label_2.setGeometry(QtCore.QRect(<span class="number">340</span>, <span class="number">100</span>, <span class="number">72</span>, <span class="number">15</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_2.setObjectName(<span class="string">&quot;label_2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_3 = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.label_3.setGeometry(QtCore.QRect(<span class="number">340</span>, <span class="number">60</span>, <span class="number">72</span>, <span class="number">15</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_3.setObjectName(<span class="string">&quot;label_3&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.label_4 = QtWidgets.QLabel(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.label_4.setGeometry(QtCore.QRect(<span class="number">610</span>, <span class="number">20</span>, <span class="number">91</span>, <span class="number">16</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_4.setObjectName(<span class="string">&quot;label_4&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button3 = QtWidgets.QPushButton(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.button3.setGeometry(QtCore.QRect(<span class="number">500</span>, <span class="number">710</span>, <span class="number">111</span>, <span class="number">51</span>))</span><br><span class="line">        font = QtGui.QFont()</span><br><span class="line">        font.setPointSize(<span class="number">16</span>)</span><br><span class="line">        font.setBold(<span class="literal">True</span>)</span><br><span class="line">        font.setWeight(<span class="number">75</span>)</span><br><span class="line">        <span class="variable language_">self</span>.button3.setFont(font)</span><br><span class="line">        <span class="variable language_">self</span>.button3.setObjectName(<span class="string">&quot;button3&quot;</span>)</span><br><span class="line">        SuperpixelVideo.setCentralWidget(<span class="variable language_">self</span>.centralwidget)</span><br><span class="line">        <span class="variable language_">self</span>.menubar = QtWidgets.QMenuBar(SuperpixelVideo)</span><br><span class="line">        <span class="variable language_">self</span>.menubar.setGeometry(QtCore.QRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1120</span>, <span class="number">26</span>))</span><br><span class="line">        <span class="variable language_">self</span>.menubar.setObjectName(<span class="string">&quot;menubar&quot;</span>)</span><br><span class="line">        SuperpixelVideo.setMenuBar(<span class="variable language_">self</span>.menubar)</span><br><span class="line">        <span class="variable language_">self</span>.statusbar = QtWidgets.QStatusBar(SuperpixelVideo)</span><br><span class="line">        <span class="variable language_">self</span>.statusbar.setObjectName(<span class="string">&quot;statusbar&quot;</span>)</span><br><span class="line">        SuperpixelVideo.setStatusBar(<span class="variable language_">self</span>.statusbar)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.retranslateUi(SuperpixelVideo)</span><br><span class="line">        QtCore.QMetaObject.connectSlotsByName(SuperpixelVideo)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">retranslateUi</span>(<span class="params">self, SuperpixelVideo</span>):</span><br><span class="line">        _translate = QtCore.QCoreApplication.translate</span><br><span class="line">        SuperpixelVideo.setWindowTitle(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;MainWindow&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.n_segments.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;è¶…åƒç´ ä¸ªæ•°&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.sigma.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;å¹³æ»‘åº¦&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.cofirmButton.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;å¼€å§‹è½¬æ¢&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.videoPath.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;è§†é¢‘è·¯å¾„&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.button1.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;æ’­æ”¾&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.button2.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;æ’­æ”¾&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_2.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;0ä¸ºä¸å¹³æ»‘&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_3.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;è¿‘ä¼¼&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.label_4.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;å•å·¦æ–œæ &#x27;/&#x27;&quot;</span>))</span><br><span class="line">        <span class="variable language_">self</span>.button3.setText(_translate(<span class="string">&quot;SuperpixelVideo&quot;</span>, <span class="string">&quot;åœæ­¢&quot;</span>))</span><br></pre></td></tr></table></figure><h3 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> subprocess <span class="keyword">import</span> call</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> ffmpy3 <span class="keyword">import</span> FFmpeg</span><br><span class="line"><span class="keyword">from</span> moviepy.editor <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore, QtGui, QtWidgets</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtMultimedia <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtMultimediaWidgets <span class="keyword">import</span> QVideoWidget</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> skimage.segmentation <span class="keyword">import</span> mark_boundaries, slic</span><br><span class="line"><span class="keyword">from</span> skimage.util <span class="keyword">import</span> img_as_float</span><br><span class="line"><span class="keyword">from</span> Ui_test <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Read_video</span>(<span class="params">path,file_name</span>):</span><br><span class="line">    video_path = path+file_name</span><br><span class="line">    sourceFileName=file_name</span><br><span class="line">    times=<span class="number">0</span></span><br><span class="line">    <span class="comment">#æå–è§†é¢‘çš„é¢‘ç‡ï¼Œæ¯1å¸§æå–ä¸€ä¸ª</span></span><br><span class="line">    frameFrequency=<span class="number">1</span></span><br><span class="line">    outPutDirName=path+<span class="string">&quot;input_pictures/&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(outPutDirName):</span><br><span class="line">        <span class="comment">#å¦‚æœæ–‡ä»¶ç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»ºç›®å½•</span></span><br><span class="line">        os.makedirs(outPutDirName) </span><br><span class="line">    video = cv2.VideoCapture(video_path)</span><br><span class="line">    video_temp = VideoFileClip(video_path)</span><br><span class="line">    audio=video_temp.audio</span><br><span class="line">    audio.write_audiofile(path+<span class="string">&#x27;audio.mp3&#x27;</span>)</span><br><span class="line">    fps = video.get(cv2.CAP_PROP_FPS)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        times+=<span class="number">1</span></span><br><span class="line">        res, image = video.read()</span><br><span class="line">        <span class="keyword">if</span> times==<span class="number">1</span>:</span><br><span class="line">            size=image.shape</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> res:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> times%frameFrequency==<span class="number">0</span>:</span><br><span class="line">            cv2.imwrite(outPutDirName + <span class="built_in">str</span>(times)+<span class="string">&#x27;.jpg&#x27;</span>, image)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;reading &quot;</span>+outPutDirName + <span class="built_in">str</span>(times)+<span class="string">&#x27;.jpg&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;done&#x27;</span>)</span><br><span class="line">    video.release()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(fps),size[<span class="number">0</span>],size[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Super_pixel</span>(<span class="params">path,numSegments,numSigma,outputDir,outputFilename</span>):</span><br><span class="line">        image = img_as_float(io.imread(path))</span><br><span class="line">        b,g,r = cv2.split(image)</span><br><span class="line">        image = cv2.merge([r,g,b])</span><br><span class="line">        segments = slic(image, n_segments = numSegments, sigma = numSigma)</span><br><span class="line">        image_out=mark_boundaries(image, segments)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(outputDir):</span><br><span class="line">            <span class="comment">#å¦‚æœæ–‡ä»¶ç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»ºç›®å½•</span></span><br><span class="line">            os.makedirs(outputDir) </span><br><span class="line">        cv2.imwrite(outputDir+outputFilename, image_out*<span class="number">255</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;writing &quot;</span>+outputDir+outputFilename)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Picture_conversion</span>(<span class="params">inputDir,outputDir,numSegments,numSigma</span>):</span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(inputDir):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            imgPath=root+<span class="string">&#x27;/&#x27;</span>+file</span><br><span class="line">            Super_pixel(imgPath,numSegments,numSigma,outputDir,file)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;done&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Create_video</span>(<span class="params">videoDir,fps,height,width</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;waiting...&quot;</span>)</span><br><span class="line">    path=videoDir+<span class="string">&quot;output_pictures/&quot;</span></span><br><span class="line">    filelist = os.listdir(path)</span><br><span class="line">    size = (width,height)</span><br><span class="line">    os.chdir(videoDir) <span class="comment">#è·³è½¬åˆ°ç›®æ ‡ç›®å½•</span></span><br><span class="line">    <span class="comment">#ç”Ÿæˆaviè§†é¢‘</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&#x27;video.avi&#x27;</span>):</span><br><span class="line">        os.remove(<span class="string">&#x27;video.avi&#x27;</span>)</span><br><span class="line">    video = cv2.VideoWriter(<span class="string">&quot;video.avi&quot;</span>, cv2.VideoWriter_fourcc(<span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;0&#x27;</span>), fps, size)</span><br><span class="line">    num=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> filelist:<span class="comment">#ç»Ÿè®¡æœ‰å¤šå°‘å¸§</span></span><br><span class="line">        <span class="keyword">if</span> item.endswith(<span class="string">&#x27;.jpg&#x27;</span>): </span><br><span class="line">            num+=<span class="number">1</span></span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;ç”Ÿæˆè¶…åƒç´ è§†é¢‘...&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        frame = cv2.imread(path+<span class="built_in">str</span>(i+<span class="number">1</span>)+<span class="string">&#x27;.jpg&#x27;</span>)</span><br><span class="line">        video.write(frame)<span class="comment">#æ·»åŠ åˆ°è§†é¢‘ä¸­</span></span><br><span class="line">    video.release()</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line">    inputVideo = videoDir+<span class="string">&#x27;video&#x27;</span></span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;å‹ç¼©è§†é¢‘...&quot;</span>)</span><br><span class="line">    command = <span class="string">&quot;ffmpeg -i %s.avi %s.mp4&quot;</span> % (inputVideo, inputVideo)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&#x27;video.mp4&#x27;</span>):</span><br><span class="line">        os.remove(<span class="string">&#x27;video.mp4&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&#x27;output.mp4&#x27;</span>):</span><br><span class="line">        os.remove(<span class="string">&#x27;output.mp4&#x27;</span>)</span><br><span class="line">    call(command.split())</span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;åŠ å…¥éŸ³é¢‘...&quot;</span>)</span><br><span class="line">    subprocess.call(<span class="string">&#x27;ffmpeg -i video.mp4 -i audio.mp3  -strict -2 -f mp4 output.mp4&#x27;</span>, shell=<span class="literal">True</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;video.avi&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;audio.mp3&quot;</span>)</span><br><span class="line">    os.remove(<span class="string">&quot;video.mp4&quot;</span>)</span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;è½¬æ¢æˆåŠŸ!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">confirm</span>():</span><br><span class="line">    window.ui.button2.setEnabled(<span class="literal">False</span>)</span><br><span class="line">    videoPath=window.ui.lineEdit01.text()</span><br><span class="line">    <span class="keyword">if</span> videoPath==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        videoPath=<span class="string">&#x27;E:/test/input.mp4&#x27;</span></span><br><span class="line">    index=videoPath.rfind(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    videoDir=videoPath[:index+<span class="number">1</span>]</span><br><span class="line">    videoName=videoPath[index+<span class="number">1</span>:]</span><br><span class="line">    strSegments=window.ui.lineEdit02.text()</span><br><span class="line">    <span class="keyword">if</span> strSegments==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        strSegments=<span class="string">&#x27;100&#x27;</span></span><br><span class="line">    numSegments=<span class="built_in">int</span>(strSegments)</span><br><span class="line">    strSigma=window.ui.lineEdit03.text()</span><br><span class="line">    <span class="keyword">if</span> strSigma==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        strSigma=<span class="string">&#x27;5&#x27;</span></span><br><span class="line">    numSigma=<span class="built_in">int</span>(strSigma)</span><br><span class="line">    inputDir=videoDir+<span class="string">&quot;input_pictures/&quot;</span></span><br><span class="line">    outputDir=videoDir+<span class="string">&quot;output_pictures/&quot;</span></span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;è¯»å–è§†é¢‘...&quot;</span>)</span><br><span class="line">    window.ui.button1.setEnabled(<span class="literal">False</span>)</span><br><span class="line">    otherInfo=Read_video(videoDir,videoName)</span><br><span class="line">    window.ui.button1.setEnabled(<span class="literal">True</span>)</span><br><span class="line">    <span class="comment">#otherInfo=(25, 1246, 720)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;fps,height,width=&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(otherInfo)</span><br><span class="line">    fps=otherInfo[<span class="number">0</span>]</span><br><span class="line">    height=otherInfo[<span class="number">1</span>]</span><br><span class="line">    width=otherInfo[<span class="number">2</span>]</span><br><span class="line">    window.ui.label.setText(<span class="string">&quot;è½¬æ¢æˆè¶…åƒç´ ...&quot;</span>)</span><br><span class="line">    <span class="comment">#Picture_conversion(inputDir,outputDir,numSegments,numSigma)</span></span><br><span class="line">    Create_video(videoDir,fps,height,width)</span><br><span class="line">    window.ui.button2.setEnabled(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">mainWindow</span>(<span class="title class_ inherited__">QMainWindow</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(QMainWindow, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.ui = Ui_SuperpixelVideo()</span><br><span class="line">        <span class="variable language_">self</span>.ui.setupUi(<span class="variable language_">self</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play1</span>():</span><br><span class="line">    path=window.ui.lineEdit01.text()</span><br><span class="line">    <span class="keyword">if</span> path==<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        path=<span class="string">&#x27;E:/test/input.mp4&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    window.ui.videoplayer1.addWidget(videoWidget)</span><br><span class="line">    player.setMedia(QMediaContent(QUrl.fromLocalFile(path)))</span><br><span class="line">    player.play()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">play2</span>():</span><br><span class="line">    path=window.ui.lineEdit01.text()</span><br><span class="line">    index=path.rfind(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    videoDir=path[:index+<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(videoDir+<span class="string">&#x27;output.mp4&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    window.ui.videoplayer2.addWidget(videoWidget)</span><br><span class="line">    player.setMedia(QMediaContent(QUrl.fromLocalFile(videoDir+<span class="string">&quot;output.mp4&quot;</span>)))</span><br><span class="line">    player.play()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stop</span>():</span><br><span class="line">    player.stop()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = mainWindow()</span><br><span class="line">    window.show()</span><br><span class="line">  </span><br><span class="line">    player = QMediaPlayer()</span><br><span class="line">    player.setVolume(<span class="number">100</span>)</span><br><span class="line">    playlist = QMediaPlaylist()</span><br><span class="line">    playlist.setPlaybackMode(QMediaPlaylist.CurrentItemOnce)<span class="comment">#åªæ’­æ”¾ä¸€æ¬¡</span></span><br><span class="line">    player.setPlaylist(playlist)</span><br><span class="line">    videoWidget = QVideoWidget()</span><br><span class="line">    palette = QPalette()</span><br><span class="line">    palette.setBrush(QPalette.Background, Qt.black)</span><br><span class="line">    player.setVideoOutput(videoWidget)</span><br><span class="line">    videoWidget.show()</span><br><span class="line">    window.ui.videoplayer1.addWidget(videoWidget)</span><br><span class="line"></span><br><span class="line">    window.ui.lineEdit01.setText(<span class="string">&quot;E:/test/input.mp4&quot;</span>)</span><br><span class="line">    window.ui.lineEdit02.setText(<span class="string">&quot;100&quot;</span>)</span><br><span class="line">    window.ui.lineEdit03.setText(<span class="string">&quot;5&quot;</span>)</span><br><span class="line"></span><br><span class="line">    window.ui.button1.setEnabled(<span class="literal">True</span>)</span><br><span class="line">    window.ui.button2.setEnabled(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    window.ui.button1.clicked.connect(<span class="keyword">lambda</span>:play1())</span><br><span class="line">    window.ui.button2.clicked.connect(<span class="keyword">lambda</span>:play2())</span><br><span class="line">    window.ui.button3.clicked.connect(<span class="keyword">lambda</span>:stop())</span><br><span class="line">    window.ui.cofirmButton.clicked.connect(<span class="keyword">lambda</span>:confirm())</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å›¾åƒå¤„ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è¶…åƒç´ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode+PyQt5+QtDesigner ç¯å¢ƒæ­å»º</title>
    <link href="/2020/04/30/vscodepyqt5qtdesigner-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2020/04/30/vscodepyqt5qtdesigner-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å®‰è£…PyQt5å’ŒPyQt5-tools"><a href="#ä¸€ã€å®‰è£…PyQt5å’ŒPyQt5-tools" class="headerlink" title="ä¸€ã€å®‰è£…PyQt5å’ŒPyQt5-tools"></a>ä¸€ã€å®‰è£…PyQt5å’ŒPyQt5-tools</h2><pre><code>pip3 install -i https://mirrors.aliyun.com/pypi/simple/ PyQt5pip3 install -i https://mirrors.aliyun.com/pypi/simple/ PyQt5-tools</code></pre><h2 id="äºŒã€æ‰¾åˆ°QtDesigner-å®‰è£…è·¯å¾„"><a href="#äºŒã€æ‰¾åˆ°QtDesigner-å®‰è£…è·¯å¾„" class="headerlink" title="äºŒã€æ‰¾åˆ°QtDesigner å®‰è£…è·¯å¾„"></a>äºŒã€æ‰¾åˆ°QtDesigner å®‰è£…è·¯å¾„</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/image.png"></p><p>æŒ‰é»„è‰²è­¦å‘Šæç¤ºçš„è·¯å¾„ä¸­æŸ¥æ‰¾designer.exeç”Ÿæˆæ¡Œé¢å¿«æ·æ–¹å¼ï¼Œæ–¹ä¾¿æ—¥ååˆ¶ä½œ.uiæ–‡ä»¶ã€‚</p><h2 id="ä¸‰ã€æ‰“å¼€designer-exeï¼Œç»˜åˆ¶UIç•Œé¢"><a href="#ä¸‰ã€æ‰“å¼€designer-exeï¼Œç»˜åˆ¶UIç•Œé¢" class="headerlink" title="ä¸‰ã€æ‰“å¼€designer.exeï¼Œç»˜åˆ¶UIç•Œé¢"></a>ä¸‰ã€æ‰“å¼€designer.exeï¼Œç»˜åˆ¶UIç•Œé¢</h2><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/22-1024x781.png"></p><p>ç»˜åˆ¶å®Œåä¿å­˜åˆ°ä½ å‡†å¤‡åˆ¶ä½œè¯¥é¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚ï¼šwelcome.uiã€‚</p><h2 id="å››ã€ç”¨VSCodeè½¬åŒ–-uiæ–‡ä»¶ä¸º-pyæ–‡ä»¶"><a href="#å››ã€ç”¨VSCodeè½¬åŒ–-uiæ–‡ä»¶ä¸º-pyæ–‡ä»¶" class="headerlink" title="å››ã€ç”¨VSCodeè½¬åŒ–.uiæ–‡ä»¶ä¸º.pyæ–‡ä»¶"></a>å››ã€ç”¨VSCodeè½¬åŒ–.uiæ–‡ä»¶ä¸º.pyæ–‡ä»¶</h2><p>é¦–å…ˆè¦ä¸ºvscodeå®‰è£…æ‰©å±•</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/kuozhan.png"></p><p>ä¿®æ”¹PYQT Intergrationçš„æ‰©å±•è®¾ç½®ï¼Œæ·»åŠ Qtdesignerè·¯å¾„</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/image-1.png"></p><p>å³é”®UIæ–‡ä»¶å¯ä»¥ç›´æ¥é€‰æ‹©ç¼–è¾‘ã€ç¼–è¯‘ã€é¢„è§ˆ</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/image-2.png"></p><h2 id="Done"><a href="#Done" class="headerlink" title="Done."></a>Done.</h2>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å®‰è£…é…ç½®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>è½¯ä»¶å®‰è£…é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LL(1)æ–‡æ³•ï¼šè®¡ç®—Firsté›†ã€Followé›†ä»¥åŠé¢„æµ‹åˆ†æè¡¨</title>
    <link href="/2020/04/22/ll1%E6%96%87%E6%B3%95%EF%BC%9A%E8%AE%A1%E7%AE%97first%E9%9B%86%E3%80%81follow%E9%9B%86%E4%BB%A5%E5%8F%8A%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E8%A1%A8/"/>
    <url>/2020/04/22/ll1%E6%96%87%E6%B3%95%EF%BC%9A%E8%AE%A1%E7%AE%97first%E9%9B%86%E3%80%81follow%E9%9B%86%E4%BB%A5%E5%8F%8A%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>é¢„æµ‹åˆ†æç®—æ³•LL(1):</p><ul><li>L: Left-to-right scan of the tokensä»å·¦åˆ°å³æ‰«æ</li><li>L: Leftmost derivationæœ€å·¦æ¨å¯¼</li><li>(1): One token of lookaheadåªå‘å‰çœ‹ä¸€ä¸ªtoken</li></ul><p>è¾“å…¥è‹¥å¹²ä¸ªå­—ç¬¦æµå½¢å¼çš„äº§ç”Ÿå¼ï¼Œè®¡ç®—éç»ˆç»“ç¬¦çš„Firsté›†å’ŒFollowé›†ï¼Œå¹¶æ„é€ é¢„æµ‹åˆ†æè¡¨ã€‚</p><h4 id="ç®—æ³•è®¾è®¡"><a href="#ç®—æ³•è®¾è®¡" class="headerlink" title="ç®—æ³•è®¾è®¡"></a>ç®—æ³•è®¾è®¡</h4><p>2.1æ³¨æ„ç‚¹</p><ul><li>è¾“å…¥ä¸ºå­—ç¬¦æµï¼Œåº”é¦–å…ˆè½¬ä¸ºtokenæµï¼›</li><li>è¾“å…¥äº§ç”Ÿå¼å¯èƒ½å¾ˆé•¿ï¼Œç”¨â€˜â€™è¿æ¥ï¼Œæœ€å¥½å…¨éƒ¨è½¬ä¸ºæœ€çŸ­å½¢å¼ï¼Œå»æ‰â€˜â€™ï¼›</li><li>äº§ç”Ÿå¼ã€ç»ˆç»“ç¬¦ã€éç»ˆç»“ç¬¦ã€Firsté›†ã€Followé›†ç­‰åº”å½“ç”¨åˆé€‚çš„æ•°æ®ç»“æ„å­˜å‚¨ï¼Œä¸€æ¬¡è®¡ç®—ä¾¿å†™å…¥ï¼Œä¾¿äºæŸ¥æ‰¾å’Œè°ƒç”¨ï¼›</li><li>Firsté›†å’ŒFollowé›†è®¡ç®—åº”é‡‡ç”¨é€’å½’ç®—æ³•ã€‚</li></ul><p>2.2ç”¨åˆ°çš„ç®—æ³•</p><p>Â Â Â Â Â  2.2.1Firsté›†</p><ul><li>å¦‚æœ X æ˜¯ç»ˆç»“ç¬¦å·ï¼Œé‚£ä¹ˆFIRST(X)&#x3D;{X}</li><li>å¦‚æœ X æ˜¯éç»ˆç»“ç¬¦å·ï¼Œä¸” X -&gt; Y1Y2Y3â€¦Yk æ˜¯äº§ç”Ÿå¼</li><li>å¦‚æœaåœ¨FIRST(Yi)ä¸­ï¼Œä¸” Îµ åœ¨FIRST(Y1)ï¼ŒFIRST(Y2)ï¼Œâ€¦ï¼ŒFIRST(Yi-1)ä¸­ï¼Œé‚£ä¹ˆaä¹Ÿåœ¨FIRST(X)ä¸­ï¼›</li><li>å¦‚æœÎµ åœ¨FIRST(Y1)ï¼ŒFIRST(Y2)ï¼Œâ€¦ï¼ŒFIRST(Yk)ä¸­ï¼Œé‚£ä¹ˆÎµåœ¨FIRST(X)ä¸­ï¼›</li><li>å¦‚æœXæ˜¯éç»ˆç»“ç¬¦å·ï¼Œä¸”æœ‰X-&gt;Îµï¼Œé‚£ä¹ˆÎµåœ¨FIRST(X)ä¸­ã€‚</li></ul><p>Â Â Â Â Â Â  2.2.2Followé›†</p><ul><li>å°†å³ç«¯ç»“æŸæ ‡è®° $ æ”¾åˆ° Follow (S) ä¸­ ï¼›</li><li>æŒ‰ç…§ä¸‹é¢ä¸¤ä¸ªè§„åˆ™ä¸æ–­è¿­ä»£ï¼ŒçŸ¥é“æ‰€æœ‰çš„Followé›†åˆéƒ½ä¸å†å¢é•¿ä¸ºæ­¢ ï¼›</li><li>å¦‚æœå­˜åœ¨äº§ç”Ÿå¼A -&gt; Î±BÎ² ï¼Œé‚£ä¹ˆ FIRST(Î²)ä¸­æ‰€æœ‰éÎµçš„ç¬¦å·éƒ½åœ¨Follow (B)ä¸­ï¼›</li><li>å¦‚æœå­˜åœ¨äº§ç”Ÿå¼A -&gt; Î±Bï¼Œæˆ–è€…A -&gt; Î±BÎ² ä¸”FIRST(Î²)åŒ…å«Îµï¼Œé‚£ä¹ˆFollow (A)ä¸­çš„æ‰€æœ‰ç¬¦å·éƒ½åŠ å…¥åˆ°Follow (B)ä¸­ã€‚</li></ul><p>Â Â Â Â Â Â Â Â Â Â Â Â Â  2.2.3é¢„æµ‹åˆ†æè¡¨</p><ul><li>å¯¹äºæ¯ä¸ªäº§ç”Ÿå¼A-&gt;Î±ï¼š</li><li>å¯¹äºFirst(Î±)ä¸­æ¯ä¸ªç»ˆç»“ç¬¦Î±ï¼Œå°†A-&gt;Î±åŠ å…¥åˆ°Table[Aï¼Œa]ä¸­ï¼›</li><li>å¦‚æœÎµåœ¨First(Î±)ä¸­ï¼Œé‚£ä¹ˆå¯¹äºFollow(A)ä¸­çš„æ¯ä¸ªç»ˆç»“ç¬¦bï¼Œå°†A-&gt;Î±åŠ å…¥åˆ°Table[Aï¼Œb]ä¸­ï¼›å¦‚æœÎµåœ¨First(Î±)ä¸­ï¼Œä¸”$åœ¨Follow(A)ä¸­ï¼Œä¹Ÿå°†A-&gt;Î±åŠ å…¥åˆ°Table[Aï¼Œ$]ä¸­ã€‚</li></ul><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p>ä¸ºäº†æ–¹ä¾¿éªŒè¯ç»“æœçš„æ­£ç¡®æ€§ï¼Œæµ‹è¯•æ—¶é‡‡ç”¨äº†4ç»„è¯¾ä»¶ä¸­æåˆ°çš„ä¾‹é¢˜ï¼Œç»“æœå¯¹æ¯”å¦‚ä¸‹ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.1-1024x614.png"></p><p>å›¾3-1ä¾‹é¢˜1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.2-1024x739.png"></p><p>å›¾3-2ä¾‹é¢˜1</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.3.png"></p><p>å›¾3-3ä¾‹é¢˜2</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.4-1024x853.png"></p><p>å›¾3-4ä¾‹é¢˜2</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.5-1024x668.png"></p><p>å›¾3-5ä¾‹é¢˜3</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.6-1024x853.png"></p><p>å›¾3-6ä¾‹é¢˜3</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.7-1024x709.png"></p><p>å›¾3-7ä¾‹é¢˜4</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.8-1024x263.png"></p><p>å›¾3-8ä¾‹é¢˜4</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/04/3.9-1024x925.png"></p><p>å›¾3-9ä¾‹é¢˜4</p><p>ç»è¿‡å¤šæ¬¡è°ƒè¯•ä¿®æ”¹ï¼Œ4ä¸ªä¾‹é¢˜æµ‹è¯•ç»“æœéƒ½å·²ç»æ­£ç¡®ï¼Œåº”å½“è¶³ä»¥è¯´æ˜ç¨‹åºçš„å¯é æ€§ã€‚</p><h4 id="å®éªŒä»£ç "><a href="#å®éªŒä»£ç " class="headerlink" title="å®éªŒä»£ç "></a>å®éªŒä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LL(1)Parse_Tables.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">item</span></span><br><span class="line">&#123; <span class="comment">//è¾…åŠ©æ•°æ®ç±»å‹</span></span><br><span class="line">    string str;</span><br><span class="line">    vector&lt;string&gt; vec;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LL_1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;item&gt; CA;                              <span class="comment">//äº§ç”Ÿå¼condition_action</span></span><br><span class="line">    vector&lt;string&gt; T;                             <span class="comment">//ç»ˆç»“ç¬¦</span></span><br><span class="line">    vector&lt;string&gt; N;                             <span class="comment">//éç»ˆç»“ç¬¦</span></span><br><span class="line">    vector&lt;item&gt; FIRST_SET;                       <span class="comment">//éç»ˆç»“ç¬¦FIRST(A)=&#123;tA-&gt;*tv&#125;</span></span><br><span class="line">    vector&lt;item&gt; FOLLOW_SET;                      <span class="comment">//å“ªäº›ç»ˆç»“ç¬¦ä¼šè·Ÿåœ¨éç»ˆç»“ç¬¦åé¢FOLLOW(A)=&#123;tB-&gt;*wAtv&#125;</span></span><br><span class="line">    <span class="type">int</span> PARSE_TABLE[<span class="number">100</span>][<span class="number">100</span>];                    <span class="comment">//åˆ†æè¡¨</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>;                                  <span class="comment">//è¾“å…¥åŠåˆå§‹åŒ–</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_state</span><span class="params">()</span></span>;                         <span class="comment">//è¾“å‡ºåˆå§‹åŒ–åçš„çŠ¶æ€</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_first</span><span class="params">()</span></span>;                         <span class="comment">//è¾“å‡ºfirsté›†</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_follow</span><span class="params">()</span></span>;                        <span class="comment">//è¾“å‡ºfollowé›†</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display_table</span><span class="params">()</span></span>;                         <span class="comment">//è¾“å‡ºLL_1åˆ†æè¡¨</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isTerminal</span><span class="params">(string str)</span></span>;                  <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç»ˆç»“ç¬¦</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">containEpsilon</span><span class="params">(string str)</span></span>;              <span class="comment">//åˆ¤æ–­firsté›†æ˜¯å¦åŒ…å«epsilon</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">find_index</span><span class="params">(string str)</span></span>;                   <span class="comment">//è·å–æŸä¸ªç¬¦å·åœ¨ç»ˆç»“ç¬¦å‘é‡æˆ–éç»ˆç»“ç¬¦å‘é‡ä¸­çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">find_first</span><span class="params">(string str, item &amp;new_item)</span></span>;  <span class="comment">// firsté›†</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">find_follow</span><span class="params">(string str, item &amp;new_item)</span></span>; <span class="comment">// followé›†</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">create_parse_table</span><span class="params">(<span class="type">int</span> i)</span></span>;               <span class="comment">//æ„é€ é¢„æµ‹åˆ†æè¡¨</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LL_1::display_state</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è¾“å‡ºç­‰ä»·äº§ç”Ÿå¼ã€å½’çº³å‡ºç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦</span></span><br><span class="line">    <span class="type">int</span> len1 = <span class="built_in">int</span>(CA.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> len2 = <span class="built_in">int</span>(T.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> len3 = <span class="built_in">int</span>(N.<span class="built_in">size</span>());</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\nç­‰ä»·äº§ç”Ÿå¼ï¼š\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len1; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">&quot;. &quot;</span> &lt;&lt; CA[i].str &lt;&lt; <span class="string">&quot; -&gt; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(CA[i].vec.<span class="built_in">size</span>()); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; CA[i].vec[j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\nç»ˆç»“ç¬¦ï¼š\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len2; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; T[i];</span><br><span class="line">        <span class="keyword">if</span> (i &lt; len2 - <span class="number">1</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot; ,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\néç»ˆç»“ç¬¦ï¼š\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len3; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; N[i];</span><br><span class="line">        <span class="keyword">if</span> (i &lt; len3 - <span class="number">1</span>)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot; ,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LL_1::display_first</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è¾“å‡ºfirsté›†</span></span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">int</span>(FIRST_SET.<span class="built_in">size</span>());</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\néç»ˆç»“ç¬¦çš„FIRSTé›†:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="built_in">int</span>(FIRST_SET[i].vec.<span class="built_in">size</span>());</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;FIRST(&quot;</span> &lt;&lt; FIRST_SET[i].str &lt;&lt; <span class="string">&quot;)=&#123; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; FIRST_SET[i].vec[j];</span><br><span class="line">            <span class="keyword">if</span> (j &lt; k - <span class="number">1</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot; &#125;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LL_1::display_follow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è¾“å‡ºfollowé›†</span></span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">int</span>(FOLLOW_SET.<span class="built_in">size</span>());</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\néç»ˆç»“ç¬¦çš„FOLLOWé›†:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="built_in">int</span>(FOLLOW_SET[i].vec.<span class="built_in">size</span>());</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;FOLLOW(&quot;</span> &lt;&lt; FOLLOW_SET[i].str &lt;&lt; <span class="string">&quot;)=&#123; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; FOLLOW_SET[i].vec[j];</span><br><span class="line">            <span class="keyword">if</span> (j &lt; k - <span class="number">1</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot; &#125;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LL_1::display_table</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//è¾“å‡ºåˆ†æè¡¨</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\nLL(1)åˆ†æè¡¨ï¼š\n&quot;</span>;</span><br><span class="line">    <span class="type">int</span> len_T = <span class="built_in">int</span>(T.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> len_N = <span class="built_in">int</span>(N.<span class="built_in">size</span>());</span><br><span class="line">    cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">8</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len_T; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">8</span>) &lt;&lt; T[i];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len_N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">8</span>) &lt;&lt; N[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; len_T; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (PARSE_TABLE[i][j] == <span class="number">0</span>)</span><br><span class="line">                cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">8</span>) &lt;&lt; <span class="string">&quot;x&quot;</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">8</span>) &lt;&lt; PARSE_TABLE[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LL_1::create_parse_table</span><span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//æ„é€ åˆ†æè¡¨</span></span><br><span class="line">    <span class="type">int</span> len_T = <span class="built_in">int</span>(T.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> len_N = <span class="built_in">int</span>(N.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> len_CA = <span class="built_in">int</span>(CA.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>, content = <span class="number">0</span>; <span class="comment">// tableçš„ç¬¬xè¡Œï¼Œç¬¬yåˆ—,å¡«å…¥ç¬¬contentæ¡äº§ç”Ÿå¼</span></span><br><span class="line">    content = i + <span class="number">1</span>;               <span class="comment">//ä»1å¼€å§‹</span></span><br><span class="line">    x = <span class="built_in">find_index</span>(CA[i].str);</span><br><span class="line">    string temp = CA[i].vec[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isTerminal</span>(temp))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (temp != <span class="string">&quot;epsilon&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            y = <span class="built_in">find_index</span>(temp);</span><br><span class="line">            <span class="keyword">if</span> (PARSE_TABLE[x][y] == content)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åŒä¸€å†…å®¹å†™ç¬¬äºŒæ¬¡ï¼Œè¿›å…¥äº†é€’å½’æ­»å¾ªç¯ï¼Œç›´æ¥è·³å‡º</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                PARSE_TABLE[x][y] = content;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123; <span class="comment">//æ˜¯ç©ºäº§ç”Ÿå¼</span></span><br><span class="line">            vector&lt;string&gt; &amp;vec = FOLLOW_SET[x].vec;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(vec.<span class="built_in">size</span>()); j++)</span><br><span class="line">            &#123; <span class="comment">//éå†Followé›†</span></span><br><span class="line">                y = <span class="built_in">find_index</span>(vec[j]);</span><br><span class="line">                <span class="keyword">if</span> (PARSE_TABLE[x][y] == content)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åŒä¸€å†…å®¹å†™ç¬¬äºŒæ¬¡ï¼Œè¿›å…¥äº†é€’å½’æ­»å¾ªç¯ï¼Œç›´æ¥è·³å‡º</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    PARSE_TABLE[x][y] = content;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123; <span class="comment">//éç»ˆç»“ç¬¦</span></span><br><span class="line">        <span class="type">int</span> len = <span class="built_in">int</span>(CA[i].vec.<span class="built_in">size</span>());</span><br><span class="line">        <span class="type">int</span> p = <span class="number">1</span>;</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            vector&lt;string&gt; &amp;vec = FIRST_SET[<span class="built_in">find_index</span>(temp)].vec;</span><br><span class="line">            <span class="type">int</span> s = <span class="built_in">int</span>(vec.<span class="built_in">size</span>());</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; s; j++)</span><br><span class="line">            &#123; <span class="comment">//éå†Firsté›†</span></span><br><span class="line">                <span class="keyword">if</span> (vec[j] == <span class="string">&quot;epsilon&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                y = <span class="built_in">find_index</span>(vec[j]);</span><br><span class="line">                <span class="keyword">if</span> (PARSE_TABLE[x][y] == content)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åŒä¸€å†…å®¹å†™ç¬¬äºŒæ¬¡ï¼Œè¿›å…¥äº†é€’å½’æ­»å¾ªç¯ï¼Œç›´æ¥è·³å‡º</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    PARSE_TABLE[x][y] = content;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (p &lt; len &amp;&amp; flag)</span><br><span class="line">            &#123;</span><br><span class="line">                temp = CA[i].vec[p];</span><br><span class="line">                <span class="keyword">if</span> (!<span class="built_in">isTerminal</span>(temp))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; len_CA; j++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span> (CA[j].str == temp)</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="built_in">create_parse_table</span>(j); <span class="comment">//å‡½æ•°è¿›å…¥é€’å½’</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    p++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    y = <span class="built_in">find_index</span>(temp);</span><br><span class="line">                    <span class="keyword">if</span> (PARSE_TABLE[x][y] == content)</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åŒä¸€å†…å®¹å†™ç¬¬äºŒæ¬¡ï¼Œè¿›å…¥äº†é€’å½’æ­»å¾ªç¯ï¼Œç›´æ¥è·³å‡º</span></span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        PARSE_TABLE[x][y] = content;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (p == len &amp;&amp; flag)</span><br><span class="line">            &#123; <span class="comment">//äº§ç”Ÿå¼å³è¾¹æ‰€æœ‰éƒ½æ˜¯éç»ˆç»“ç¬¦ï¼Œä¸”éƒ½èƒ½æ¨å‡ºepsilon</span></span><br><span class="line">                vector&lt;string&gt; &amp;vec_temp = FOLLOW_SET[x].vec;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">int</span>(vec_temp.<span class="built_in">size</span>()); j++)</span><br><span class="line">                &#123; <span class="comment">//éå†Followé›†</span></span><br><span class="line">                    y = <span class="built_in">find_index</span>(vec_temp[j]);</span><br><span class="line">                    <span class="keyword">if</span> (PARSE_TABLE[x][y] == content)</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åŒä¸€å†…å®¹å†™ç¬¬äºŒæ¬¡ï¼Œè¿›å…¥äº†é€’å½’æ­»å¾ªç¯ï¼Œç›´æ¥è·³å‡º</span></span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        PARSE_TABLE[x][y] = content;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (flag);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LL_1::init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string str;</span><br><span class="line">    vector&lt;string&gt; v;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è‹¥å¹²æ¡å½¢å¦‚â€˜ STMT -&gt; if EXPR then STMT  EXPR â€™çš„äº§ç”Ÿå¼ï¼š\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;(æ¯ä¸ªtokenä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œè¾“å…¥0ç»“æŸ)\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">getline</span>(cin, str); <span class="comment">//è·å–ä¸€è¡Œæ ‡å‡†è¾“å…¥ï¼Œå³å­—ç¬¦æµå½¢å¼çš„äº§ç”Ÿå¼</span></span><br><span class="line">        <span class="keyword">if</span> (str == <span class="string">&quot;0&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="type">int</span> l = str.<span class="built_in">length</span>();</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; index;</span><br><span class="line">        <span class="type">int</span> begin = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> end = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//ä»¥ä¸‹å°†æ¯ä¸€è¡ŒåŒ–æˆè‹¥å¹²ä¸ªæœ€çŸ­äº§ç”Ÿå¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (str[i] == <span class="string">&#x27;&gt;&#x27;</span> &amp;&amp; i &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (str[i - <span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                    begin = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (str[i] == <span class="string">&#x27;&#x27;)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                index.push_back(i);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        string prefix = str.substr(0, begin + 1);</span></span><br><span class="line"><span class="string">        int len = int(index.size());</span></span><br><span class="line"><span class="string">        if (len == 0)</span></span><br><span class="line"><span class="string">            v.push_back(str);</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (i == 0)</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    v.push_back(str.substr(0, index[0]));</span></span><br><span class="line"><span class="string">                    end = index[0];</span></span><br><span class="line"><span class="string">                    continue;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                begin = index[i - 1];</span></span><br><span class="line"><span class="string">                end = index[i];</span></span><br><span class="line"><span class="string">                v.push_back(prefix + str.substr(begin + 1, end - begin - 1));</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            v.push_back(prefix + str.substr(end + 1, l - end));</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125; //ä»¥ä¸Šå°†æ¯ä¸€è¡ŒåŒ–æˆè‹¥å¹²ä¸ªæœ€çŸ­äº§ç”Ÿå¼ï¼Œæ”¾åˆ°å‘é‡Vä¸­</span></span><br><span class="line"><span class="string">    //ä»¥ä¸‹ç»™tokenå½’ç±»ï¼Œåˆ†ä¸ºç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">    vector&lt;string&gt; left, right;</span></span><br><span class="line"><span class="string">    int len = int(v.size());</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        istringstream temp(v[i]);</span></span><br><span class="line"><span class="string">        string out;</span></span><br><span class="line"><span class="string">        int cal = 0;</span></span><br><span class="line"><span class="string">        item new_item;</span></span><br><span class="line"><span class="string">        while (temp &gt;&gt; out)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (cal == 0)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                left.push_back(out);</span></span><br><span class="line"><span class="string">                new_item.str = out;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else if (cal == 1)</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                cal++;</span></span><br><span class="line"><span class="string">                continue;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                right.push_back(out);</span></span><br><span class="line"><span class="string">                new_item.vec.push_back(out);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            cal++;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        CA.push_back(new_item);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    int len1 = int(left.size());</span></span><br><span class="line"><span class="string">    int len2 = int(right.size());</span></span><br><span class="line"><span class="string">    vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">    for (int k = 0; k &lt; len1; k++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        it = find(N.begin(), N.end(), left[k]);</span></span><br><span class="line"><span class="string">        if (it == N.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            N.push_back(left[k]); //äº§ç”Ÿå¼å·¦è¾¹çš„ä¸€å®šæ˜¯éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len2; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        bool flag = true; //é»˜è®¤æ˜¯ç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; len1; j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (right[i] == left[j]) //äº§ç”Ÿå¼å·¦è¾¹å‡ºç°è¿‡</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                flag = false; //æ˜¯éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">                break;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (flag)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            it = find(T.begin(), T.end(), right[i]);</span></span><br><span class="line"><span class="string">            if (it == T.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                T.push_back(right[i]);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            it = find(N.begin(), N.end(), right[i]);</span></span><br><span class="line"><span class="string">            if (it == N.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                N.push_back(right[i]);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    T.push_back(&quot;$&quot;);</span></span><br><span class="line"><span class="string">    for (int iter = 0; iter &lt; int(T.size()); iter++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (T[iter] == &quot;epsilon&quot;)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            T.erase(T.begin() + iter);</span></span><br><span class="line"><span class="string">            break;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">bool LL_1::isTerminal(string str)</span></span><br><span class="line"><span class="string">&#123; //åˆ¤æ–­æŸä¸ªtokenæ˜¯å¦ä¸ºç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">    if (str == &quot;epsilon&quot;)</span></span><br><span class="line"><span class="string">        return true;</span></span><br><span class="line"><span class="string">    vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">    it = find(T.begin(), T.end(), str);</span></span><br><span class="line"><span class="string">    if (it == T.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        return false;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return true;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">bool LL_1::containEpsilon(string str)</span></span><br><span class="line"><span class="string">&#123; //åˆ¤æ–­æŸä¸ªéç»ˆç»“ç¬¦çš„firsté›†ä¸­æ˜¯å¦åŒ…å«epsilon</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(CA.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (CA[i].str == str)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            string temp = CA[i].vec[0];</span></span><br><span class="line"><span class="string">            if (!isTerminal(temp))</span></span><br><span class="line"><span class="string">                containEpsilon(temp);</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                if (temp == &quot;epsilon&quot;)</span></span><br><span class="line"><span class="string">                    return true;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return false;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">int LL_1::find_index(string str)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    int len_N = int(N.size());</span></span><br><span class="line"><span class="string">    int len_T = int(T.size());</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len_N; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (N[i] == str)</span></span><br><span class="line"><span class="string">            return i;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len_T; i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (T[i] == str)</span></span><br><span class="line"><span class="string">            return i;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return -1;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">bool LL_1::find_first(string str, item &amp;new_item)</span></span><br><span class="line"><span class="string">&#123; //è®¡ç®—æŸä¸ªéç»ˆç»“ç¬¦çš„firsté›†</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(CA.size()); i++)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        if (CA[i].str == str)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            string temp = CA[i].vec[0];</span></span><br><span class="line"><span class="string">            if (!isTerminal(temp))</span></span><br><span class="line"><span class="string">            &#123; //éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">                find_first(temp, new_item);</span></span><br><span class="line"><span class="string">                if (containEpsilon(temp))</span></span><br><span class="line"><span class="string">                &#123; //èƒ½äº§ç”Ÿepsilon</span></span><br><span class="line"><span class="string">                    int p = 1;</span></span><br><span class="line"><span class="string">                    int s = int(CA[i].vec.size());</span></span><br><span class="line"><span class="string">                    while (s &gt; p)</span></span><br><span class="line"><span class="string">                    &#123;</span></span><br><span class="line"><span class="string">                        if (!isTerminal(CA[i].vec[p]))</span></span><br><span class="line"><span class="string">                        &#123;</span></span><br><span class="line"><span class="string">                            if (containEpsilon(CA[i].vec[p]))</span></span><br><span class="line"><span class="string">                            &#123;</span></span><br><span class="line"><span class="string">                                find_first(CA[i].vec[p], new_item);</span></span><br><span class="line"><span class="string">                                for (int iter = 0; iter &lt; int(new_item.vec.size()); iter++)</span></span><br><span class="line"><span class="string">                                &#123;</span></span><br><span class="line"><span class="string">                                    if (new_item.vec[iter] == &quot;epsilon&quot;)</span></span><br><span class="line"><span class="string">                                    &#123;</span></span><br><span class="line"><span class="string">                                        new_item.vec.erase(new_item.vec.begin() + iter);</span></span><br><span class="line"><span class="string">                                        break;</span></span><br><span class="line"><span class="string">                                    &#125;</span></span><br><span class="line"><span class="string">                                &#125;</span></span><br><span class="line"><span class="string">                                p++;</span></span><br><span class="line"><span class="string">                            &#125;</span></span><br><span class="line"><span class="string">                            else</span></span><br><span class="line"><span class="string">                                break;</span></span><br><span class="line"><span class="string">                        &#125;</span></span><br><span class="line"><span class="string">                        else</span></span><br><span class="line"><span class="string">                        &#123;</span></span><br><span class="line"><span class="string">                            new_item.vec.push_back(CA[i].vec[p]);</span></span><br><span class="line"><span class="string">                            break;</span></span><br><span class="line"><span class="string">                        &#125;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                    if (p == s - 1)</span></span><br><span class="line"><span class="string">                    &#123;</span></span><br><span class="line"><span class="string">                        vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">                        for (int k = 0; k &lt; s; k++)</span></span><br><span class="line"><span class="string">                        &#123;</span></span><br><span class="line"><span class="string">                            it = find(N.begin(), N.end(), &quot;epsilon&quot;);</span></span><br><span class="line"><span class="string">                            if (it == N.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">                            &#123;</span></span><br><span class="line"><span class="string">                                N.push_back(&quot;epsilon&quot;);</span></span><br><span class="line"><span class="string">                            &#125;</span></span><br><span class="line"><span class="string">                        &#125;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">            &#123; //æ˜¯ç»ˆç»“ç¬¦ï¼Œç›´æ¥åŠ å…¥ï¼Œå»é‡</span></span><br><span class="line"><span class="string">                vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">                it = find(new_item.vec.begin(), new_item.vec.end(), temp);</span></span><br><span class="line"><span class="string">                if (it == new_item.vec.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    new_item.vec.push_back(temp);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return true;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">bool LL_1::find_follow(string str, item &amp;new_item)</span></span><br><span class="line"><span class="string">&#123; //è®¡ç®—æŸä¸ªéç»ˆç»“ç¬¦çš„followé›†</span></span><br><span class="line"><span class="string">    if (str == CA[0].str)</span></span><br><span class="line"><span class="string">    &#123; //æ˜¯ç¬¬ä¸€ä¸ªäº§ç”Ÿå¼çš„å·¦è¾¹ç¬¦å·ï¼ŒåŠ å…¥ç»“æŸç¬¦$</span></span><br><span class="line"><span class="string">        vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">        it = find(new_item.vec.begin(), new_item.vec.end(), &quot;$&quot;);</span></span><br><span class="line"><span class="string">        if (it == new_item.vec.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">        &#123;                             //å¼€å§‹ç¬¦å·FOLLOWé›†ä¸­åŠ å…¥ç»“æŸç¬¦$</span></span><br><span class="line"><span class="string">            new_item.vec.push_back(&quot;$&quot;);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(CA.size()); i++)</span></span><br><span class="line"><span class="string">    &#123; //éå†æ‰€æœ‰äº§ç”Ÿå¼ï¼Œåœ¨å…¶å³è¾¹æ‰¾ç›®æ ‡éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">        int s = int(CA[i].vec.size());</span></span><br><span class="line"><span class="string">        for (int j = 0; j &lt; s; j++)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            if (CA[i].vec[j] == str)</span></span><br><span class="line"><span class="string">            &#123;                  //æ‰¾åˆ°</span></span><br><span class="line"><span class="string">                if (j + 1 &lt; s) // B-&gt;wAt</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    if (!isTerminal(CA[i].vec[j + 1])) //ä¸‹ä¸€ä¸ªæ˜¯éç»ˆç»“ç¬¦</span></span><br><span class="line"><span class="string">                    &#123;</span></span><br><span class="line"><span class="string">                        if (containEpsilon(CA[i].vec[j + 1]))   // firsté›†åŒ…å«epsilon//B-&gt;wA</span></span><br><span class="line"><span class="string">                            find_follow(CA[i].str, new_item);   // follow(A)=follow(B)+follow(A)</span></span><br><span class="line"><span class="string">                        find_first(CA[i].vec[j + 1], new_item); // follow(A)=first(A)-epsilon</span></span><br><span class="line"><span class="string">                        for (int iter = 0; iter &lt; int(new_item.vec.size()); iter++)</span></span><br><span class="line"><span class="string">                        &#123;</span></span><br><span class="line"><span class="string">                            if (new_item.vec[iter] == &quot;epsilon&quot;)</span></span><br><span class="line"><span class="string">                            &#123;</span></span><br><span class="line"><span class="string">                                new_item.vec.erase(new_item.vec.begin() + iter);</span></span><br><span class="line"><span class="string">                                break;</span></span><br><span class="line"><span class="string">                            &#125;</span></span><br><span class="line"><span class="string">                        &#125;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                    else</span></span><br><span class="line"><span class="string">                    &#123; //ä¸‹ä¸€ä¸ªæ˜¯ç»ˆç»“ç¬¦,ç›´æ¥åŠ å…¥ï¼Œå»é‡</span></span><br><span class="line"><span class="string">                        vector&lt;string&gt;::iterator it;</span></span><br><span class="line"><span class="string">                        it = find(new_item.vec.begin(), new_item.vec.end(), CA[i].vec[j + 1]);</span></span><br><span class="line"><span class="string">                        if (it == new_item.vec.end()) //ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">                        &#123;</span></span><br><span class="line"><span class="string">                            new_item.vec.push_back(CA[i].vec[j + 1]);</span></span><br><span class="line"><span class="string">                        &#125;</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">                else                               // B-&gt;wA</span></span><br><span class="line"><span class="string">                &#123;                                  // follow(A)=follow(B)+follow(A)</span></span><br><span class="line"><span class="string">                    if (CA[i].str != CA[i].vec[j]) //é˜²æ­¢A-&gt;wAå½¢å¼æ­»å¾ªç¯</span></span><br><span class="line"><span class="string">                        find_follow(CA[i].str, new_item);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return true;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">int main()</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    LL_1 tag;</span></span><br><span class="line"><span class="string">    tag.init();</span></span><br><span class="line"><span class="string">    tag.display_state();</span></span><br><span class="line"><span class="string">    int len = int(tag.N.size());</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123; //éå†éç»ˆç»“ç¬¦ï¼Œé€ä¸ªè®¡ç®—å…¶firsté›†</span></span><br><span class="line"><span class="string">        item new_item;</span></span><br><span class="line"><span class="string">        item &amp;new_ = new_item;</span></span><br><span class="line"><span class="string">        new_item.str = tag.N[i];</span></span><br><span class="line"><span class="string">        tag.find_first(tag.N[i], new_); // FIRST</span></span><br><span class="line"><span class="string">        tag.FIRST_SET.push_back(new_);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    tag.display_first();</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; len; i++)</span></span><br><span class="line"><span class="string">    &#123; //éå†éç»ˆç»“ç¬¦ï¼Œé€ä¸ªè®¡ç®—å…¶followé›†</span></span><br><span class="line"><span class="string">        item new_item;</span></span><br><span class="line"><span class="string">        item &amp;new_ = new_item;</span></span><br><span class="line"><span class="string">        new_item.str = tag.N[i];</span></span><br><span class="line"><span class="string">        tag.find_follow(tag.N[i], new_); // FOLLOW</span></span><br><span class="line"><span class="string">        tag.FOLLOW_SET.push_back(new_);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    tag.display_follow();</span></span><br><span class="line"><span class="string">    for (int i = 0; i &lt; int(tag.CA.size()); i++)</span></span><br><span class="line"><span class="string">        tag.create_parse_table(i); //æŒ‰äº§ç”Ÿå¼å¡«å†™table</span></span><br><span class="line"><span class="string">    tag.display_table();</span></span><br><span class="line"><span class="string">    return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="å®éªŒæ€»ç»“"><a href="#å®éªŒæ€»ç»“" class="headerlink" title="å®éªŒæ€»ç»“"></a>å®éªŒæ€»ç»“</h4><p>æœ¬æ¬¡å®éªŒç›¸æ¯”è¾ƒäºä¹‹å‰çš„å®éªŒéš¾åº¦è¾ƒå¤§ï¼Œç”¨åˆ°çš„ç®—æ³•è¾ƒå¤šï¼Œæƒ…å†µåˆ¤åˆ«ä¹Ÿæœ‰äº›å¤æ‚ï¼Œå…¶ä¸­æœ‰3å¤„è¦ä½¿ç”¨é€’å½’æ€æƒ³è®¡ç®—ï¼ˆFirsté›†å’ŒFollowé›†ï¼Œä»¥éç»ˆç»“ç¬¦ä¸ºå•ä½è¿›è¡Œè®¡ç®—ï¼›Parse_tableï¼Œä»¥æœ€çŸ­äº§ç”Ÿå¼ä¸ºå•ä½è¿›è¡Œè®¡ç®—ï¼‰ï¼Œå¦åˆ™æ¯”è¾ƒéš¾å¤„ç†ã€‚å®éªŒè€—æ—¶è¾ƒé•¿ï¼Œä½†å¥½åœ¨å®Œæˆåº¦æ¯”è¾ƒé«˜ï¼Œä¹Ÿè¾¾åˆ°äº†é¢„æœŸæ•ˆæœï¼Œèƒ½å¤Ÿå®ç°å¯¹å‡ è‹¥å¹²æ¡å­—ç¬¦æµå½¢å¼çš„äº§ç”Ÿå¼è¿›è¡Œè‡ªåŠ¨åˆ†æè®¡ç®—ï¼šè½¬ä¸ºtokenæµã€åˆ—å‡ºç­‰ä»·æœ€çŸ­äº§ç”Ÿå¼ã€è‡ªåŠ¨å½’ç±»ç»ˆç»“ç¬¦å’Œéç»ˆç»“ç¬¦ã€åˆ—å‡ºæ¯ä¸ªéç»ˆç»“ç¬¦çš„Firsté›†å’ŒFollowé›†ã€åˆ—å‡ºå‡†ç¡®çš„é¢„æµ‹åˆ†æè¡¨ï¼Œä¸”æœ‰ä»¤äººèˆ’é€‚çš„è¾“å‡ºæ ¼å¼ã€‚ä¸è¶³ä¹‹å¤„ï¼šå¤šæ¬¡é€’å½’ä½¿ç”¨äº†è¾ƒå¤§çš„å †æ ˆç©ºé—´ã€é¢„æµ‹åˆ†æè¡¨ç”¨äº†100*100çš„é™æ€è¡¨å­˜å‚¨â€¦æ€»çš„æ¥è®²æœ¬æ¬¡å®éªŒè®©æˆ‘å¯¹LL(1)ç®—æ³•æœ‰äº†æ·±åˆ»ç†è§£ï¼Œå¸®åŠ©å¾ˆå¤§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>ç¼–è¯‘åŸç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
      <tag>ç¼–è¯‘åŸç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android Stdioæ¢æºï¼ˆé˜¿é‡Œäº‘é•œåƒæºï¼‰</title>
    <link href="/2020/04/14/android%E6%8D%A2%E6%BA%90/"/>
    <url>/2020/04/14/android%E6%8D%A2%E6%BA%90/</url>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦å®‰å“å¼€å‘ï¼Œå¥½ä¸å®¹æ˜“å…´è‡´ä¸Šæ¥è¦å¼€å§‹å†™äº†ï¼Œç»“æœé¡¹ç›®buildä¸€ç›´è½¬åœˆâ€¦çœŸæ˜¯æå¾—å…´è‡´å…¨æ— ã€‚</p><p>è¯´ç™½äº†å°±æ˜¯ä¸‹è½½ä¾èµ–èµ„æºåŒ…å·¨æ…¢ï¼Œç»å¸¸è¿æ¥è¶…æ—¶ã€‚æˆ‘å¯»æ€ç€æˆ‘ä¹Ÿæ²¡è¢«å¢™å•Šï¼ŒçœŸæ˜¯ä¸å¤ªæ˜ç™½â€¦</p><p>å¥½åœ¨ä¸‡èƒ½çš„é˜¿é‡Œäº‘æœ‰é•œåƒæºï¼Œå¯é…ç½®é˜¿é‡Œäº‘é•œåƒï¼ŒåŠ é€Ÿä¸‹è½½ã€‚</p><p>ç‰¹æ­¤è®°å½•ã€‚</p><p>é…ç½®æ–¹æ³•ï¼š</p><p>1. å¯¹ç‰¹å®šé¡¹ç›®ç”Ÿæ•ˆï¼Œåœ¨é¡¹ç›®ä¸­çš„build.gradleä¿®æ”¹å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/repositories/jcenter&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/repositories/google&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/repositories/gradle-plugin&#x27;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath <span class="string">&#x27;com.android.tools.build:gradle:3.4.1&#x27;</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></span><br><span class="line">        <span class="comment">// in the individual module build.gradle files</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2. å¯¹æ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆ,åœ¨ç”¨æˆ·&#x2F;.gradle&#x2F;ä¸‹åˆ›å»ºinit.gradleæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">allprojects&#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        <span class="type">def</span> <span class="variable">ALIYUN_REPOSITORY_URL</span> <span class="operator">=</span> <span class="string">&#x27;http://maven.aliyun.com/nexus/content/groups/public&#x27;</span></span><br><span class="line">        <span class="type">def</span> <span class="variable">ALIYUN_JCENTER_URL</span> <span class="operator">=</span> <span class="string">&#x27;http://maven.aliyun.com/nexus/content/repositories/jcenter&#x27;</span></span><br><span class="line">        all &#123; ArtifactRepository repo -&gt;</span><br><span class="line">            <span class="keyword">if</span>(repo <span class="keyword">instanceof</span> MavenArtifactRepository)&#123;</span><br><span class="line">                <span class="type">def</span> <span class="variable">url</span> <span class="operator">=</span> repo.url.toString()</span><br><span class="line">                <span class="keyword">if</span> (url.startsWith(<span class="string">&#x27;https://repo1.maven.org/maven2&#x27;</span>)) &#123;</span><br><span class="line">                    project.logger.lifecycle <span class="string">&quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_REPOSITORY_URL.&quot;</span></span><br><span class="line">                    remove repo</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (url.startsWith(<span class="string">&#x27;https://jcenter.bintray.com/&#x27;</span>)) &#123;</span><br><span class="line">                    project.logger.lifecycle <span class="string">&quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_JCENTER_URL.&quot;</span></span><br><span class="line">                    remove repo</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        maven &#123;</span><br><span class="line">                url ALIYUN_REPOSITORY_URL</span><br><span class="line">            url ALIYUN_JCENTER_URL</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Done.</p>]]></content>
    
    
    <categories>
      
      <category>å®‰å“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å®‰å“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS7.4+DockerCE+é…·q=QQæœºå™¨äºº</title>
    <link href="/2020/04/03/centos7-4dockerce%E9%85%B7qqq%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    <url>/2020/04/03/centos7-4dockerce%E9%85%B7qqq%E6%9C%BA%E5%99%A8%E4%BA%BA/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€å®‰è£…åŠè¿è¡Œdocker"><a href="#ä¸€ã€å®‰è£…åŠè¿è¡Œdocker" class="headerlink" title="ä¸€ã€å®‰è£…åŠè¿è¡Œdocker"></a>ä¸€ã€å®‰è£…åŠè¿è¡Œdocker</h4><pre><code>sudo yum install docker#å®‰è£…sudo systemctl start docker#è¿è¡Œ</code></pre><h4 id="äºŒã€ä¸‹è½½é…·Qé•œåƒï¼Œåå°è¿è¡Œå®¹å™¨"><a href="#äºŒã€ä¸‹è½½é…·Qé•œåƒï¼Œåå°è¿è¡Œå®¹å™¨" class="headerlink" title="äºŒã€ä¸‹è½½é…·Qé•œåƒï¼Œåå°è¿è¡Œå®¹å™¨"></a>äºŒã€ä¸‹è½½é…·Qé•œåƒï¼Œåå°è¿è¡Œå®¹å™¨</h4><pre><code>sudo docker pull coolq/wine-coolq#é•œåƒæ–‡ä»¶è¾ƒå¤§ï¼Œå¤§çº¦2GBsudo docker images#æŸ¥çœ‹é…·Qé•œåƒè¯¦æƒ…</code></pre><h4 id="ä¸‰ã€åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾coolqæ•°æ®çš„ç›®å½•ï¼Œç”¨äºæŒä¹…åŒ–å­˜æ”¾coolqï¼ˆé…·Qåº”ç”¨ï¼‰çš„æ•°æ®"><a href="#ä¸‰ã€åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾coolqæ•°æ®çš„ç›®å½•ï¼Œç”¨äºæŒä¹…åŒ–å­˜æ”¾coolqï¼ˆé…·Qåº”ç”¨ï¼‰çš„æ•°æ®" class="headerlink" title="ä¸‰ã€åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾coolqæ•°æ®çš„ç›®å½•ï¼Œç”¨äºæŒä¹…åŒ–å­˜æ”¾coolqï¼ˆé…·Qåº”ç”¨ï¼‰çš„æ•°æ®"></a>ä¸‰ã€åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾coolqæ•°æ®çš„ç›®å½•ï¼Œç”¨äºæŒä¹…åŒ–å­˜æ”¾coolqï¼ˆé…·Qåº”ç”¨ï¼‰çš„æ•°æ®</h4><pre><code>sudo mkdir /coolq-data#åˆ›å»ºç›®å½•</code></pre><p>#å½“ç„¶å¯ä»¥è‡ªå®šä¹‰ä»»æ„ç›®å½•ï¼Œä½†è¦è®°ä½ï¼Œå› ä¸ºä¹‹åçš„é…·qåº”ç”¨æ–‡ä»¶.cpkéƒ½æ˜¯è¦ä¸Šä¼ åˆ°æ­¤ç›®å½•ä¸‹çš„appæ–‡ä»¶å¤¹ä¸‹çš„</p><h4 id="å››ã€åå°è¿è¡Œé…·Qå®¹å™¨"><a href="#å››ã€åå°è¿è¡Œé…·Qå®¹å™¨" class="headerlink" title="å››ã€åå°è¿è¡Œé…·Qå®¹å™¨"></a>å››ã€åå°è¿è¡Œé…·Qå®¹å™¨</h4><pre><code>sudo docker run --name=coolq -d -p 8080:9000 -v /coolq-data:/home/user/coolq -e VNC_PASSWD=12345678 -e COOLQ_ACCOUNT=2333456789 coolq/wine-coolq</code></pre><p>#å…¶ä¸­éƒ¨åˆ†å‚æ•°æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ›¿æ¢ï¼š</p><p>#è¿œç¨‹ç›‘å¬ç«¯å£</p><p>8080(9000æ˜ å°„æˆ8080)</p><p>#æ•°æ®å­˜æ”¾ä½ç½®</p><p>&#x2F;coolq-dataï¼ˆ&#x2F;home&#x2F;user&#x2F;coolq æ˜ å°„åˆ°&#x2F;coolq-dataï¼‰</p><p>#è¿œç¨‹è®¿é—®å¯†ç </p><p>12345678</p><p>#æœºå™¨äººQQ å¸å·</p><p>2333456789</p><p>#è¿œç¨‹ç›‘å¬çš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰çš„webç«¯å£éœ€è¦åœ¨æœåŠ¡å™¨é˜²ç«å¢™å’Œäº‘å®‰å…¨ç»„éƒ½æ”¾è¡Œï¼Œä¾‹å¦‚é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œæˆ‘éœ€è¦åœ¨å®å¡”é¢æ¿å’Œé˜¿é‡Œäº‘æ§</p><p>åˆ¶å°éƒ½æ”¾è¡Œ8080ç«¯å£</p><p>#-d æŒ‡çš„æ˜¯åå°è¿è¡Œå®¹å™¨</p><p>#-våé¢æ¥çš„å°±æ˜¯å°†æœåŠ¡å™¨çš„è‡ªå·±å®šä¹‰çš„coolqæ•°æ®ç›®å½•æ˜ å°„åˆ°å®¹å™¨å†…çš„&#x2F;home&#x2F;user&#x2F;coolqç›®å½•</p><p>#-eæ˜¯è®¾ç½®å®¹å™¨çš„ç³»ç»Ÿç¯å¢ƒ</p><p>#å› ä¸ºä¹‹åè¦é€šè¿‡vncè¿æ¥ï¼Œæ‰€ä»¥è¦æŒ‡å®šVNC_PASSWD</p><p>#é…·Qè¦ç™»å½•çš„qqå°å·(å……å½“æœºå™¨äºº)ä¹Ÿå¯ä»¥é€šè¿‡-e COOLQ_ACCOUNT å»æŒ‡å®š</p><h4 id="äº”ã€ç™»å½•vncè¿›è¡Œé…·Qæ“ä½œ"><a href="#äº”ã€ç™»å½•vncè¿›è¡Œé…·Qæ“ä½œ" class="headerlink" title="äº”ã€ç™»å½•vncè¿›è¡Œé…·Qæ“ä½œ"></a>äº”ã€ç™»å½•vncè¿›è¡Œé…·Qæ“ä½œ</h4><p>#åœ¨æµè§ˆå™¨ä¸­è®¿é—® http:&#x2F;&#x2F;ä½ çš„æœåŠ¡å™¨IP:ä½ å®šä¹‰çš„webç«¯å£,å³å¯çœ‹åˆ°noVNCè¿œç¨‹ç™»å½•é¡µé¢</p><p>#ç‚¹å‡»Connectè¿›è¡Œè¿æ¥ï¼Œåœ¨å¼¹å‡ºçš„å¯†ç æ¡†ä¸­è¾“å…¥å¯†ç ,å¯ä»¥çœ‹åˆ°é…·QAir çš„ç™»å½•ç•Œé¢</p><p>#è¾“å…¥QQå¯†ç ç™»å½•</p><p>#åœ¨ç™»å½•åï¼Œå³é”®ç‚¹å‡»æ‚¬æµ®çª— -&gt; ä½ çš„ QQ æ˜µç§° -&gt; å‹¾é€‰[å¼€æœºå¯åŠ¨]å’Œ[å¿«é€Ÿç™»å½•]å³å¯ä¿è¯é…·Qèƒ½è‡ªåŠ¨ç™»å½•</p><h4 id="å…­ã€è®¾ç½®dockeræœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨"><a href="#å…­ã€è®¾ç½®dockeræœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="å…­ã€è®¾ç½®dockeræœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨"></a>å…­ã€è®¾ç½®dockeræœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨</h4><pre><code>systemctl is-enabled docker.service #æ£€æŸ¥æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨systemctl enable docker.service#å°†æœåŠ¡é…ç½®æˆå¼€æœºå¯åŠ¨systemctl start docker.service#å¯åŠ¨æœåŠ¡systemctl disable docker.service#ç¦æ­¢å¼€æœºå¯åŠ¨systemctl stop docker.service#åœæ­¢systemctl restart docker.service#é‡å¯</code></pre><h4 id="ä¸ƒã€è®¾ç½®dockerå®¹å™¨å¼€æœºè‡ªå¯åŠ¨"><a href="#ä¸ƒã€è®¾ç½®dockerå®¹å™¨å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="ä¸ƒã€è®¾ç½®dockerå®¹å™¨å¼€æœºè‡ªå¯åŠ¨"></a>ä¸ƒã€è®¾ç½®dockerå®¹å™¨å¼€æœºè‡ªå¯åŠ¨</h4><pre><code>docker update --restart=always xxx#xxxä¸ºå®¹å™¨nameï¼Œåœ¨è¿™é‡Œæ˜¯coolq</code></pre><h4 id="å…«ã€ç»“è¯­"><a href="#å…«ã€ç»“è¯­" class="headerlink" title="å…«ã€ç»“è¯­"></a>å…«ã€ç»“è¯­</h4><p>é…·qå®˜æ–¹æ¨èæ˜¯Ubuntu16.04å…¼å®¹æ€§å¥½ä¸€äº›ï¼Œæˆ‘çš„CentOS7.4ç›®å‰æµ‹è¯•çš„é…·qåº”ç”¨è¿˜æ˜¯å¯ä»¥ç”¨çš„</p><p>è¿œç¨‹SSHè¿æ¥æœåŠ¡å™¨æ¨èä½¿ç”¨FinalShell,æµ·å¤–æœåŠ¡å™¨æœ‰å†…ç½®åŠ é€Ÿï¼Œå­—ç¬¦æ˜¾ç¤ºä¹Ÿæ²¡æœ‰ä¹±ç ï¼Œè¿˜å¯ä»¥ç›´æ¥æœ¬åœ°æ‹–æ‹½ä¸Šä¼ æ–‡ä»¶</p><p>å¤åˆ¶ä»¥ä¸Šå‘½ä»¤æ—¶æ³¨æ„â€˜-â€™å¯èƒ½ä¼šæœ‰å˜åŒ–ï¼Œå‡ºç°é—®é¢˜æ—¶ä¼˜å…ˆè€ƒè™‘é‡æ–°æ‰‹æ‰“</p>]]></content>
    
    
    <categories>
      
      <category>æ‚</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pascalæ— ç¬¦å·æ•°è¯†åˆ«</title>
    <link href="/2020/03/29/pascal%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E8%AF%86%E5%88%AB/"/>
    <url>/2020/03/29/pascal%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E8%AF%86%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<p><strong>Pascalæ— ç¬¦å·æ•°è¯†åˆ«-C++å®ç°</strong></p><ol><li><p>é—®é¢˜æè¿°</p><p>è®¾è®¡è¯†åˆ«Pascalçš„æ— ç¬¦å·æ•°çš„ç®—æ³•ã€‚å¯¹äºæ¯ä¸€ä¸ªè¾“å…¥ï¼Œç»™å‡ºä¸€ä¸ªtrue or falseçš„åˆ¤å®šã€‚</p></li><li><p>ç®—æ³•è®¾è®¡</p><p>ç”±æ­£è§„å¼æ¨å‡ºè‡ªåŠ¨æœºï¼Œå¦‚å›¾2.1å’Œå›¾2.2ï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/03/032920_1246_Pascal1.png"></p><p>å›¾2.1 æ— ç¬¦å·æ•°è¯†åˆ«-æ­£è§„å¼</p></li></ol><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/03/032920_1246_Pascal2.png"></p><p>å›¾2.2 æ— ç¬¦å·æ•°è¯†åˆ«-è‡ªåŠ¨æœº</p><p>è¯¥ç®—æ³•ä¸¥æ ¼ä¾æ®è‡ªåŠ¨æœºè¿›è¡Œæ¡ä»¶è·³è½¬ï¼Œå¹¶å®æ—¶æ›´æ–°è®°å½•å½“å‰çŠ¶æ€ï¼Œç„¶åæ ¹æ®æœ€åæ‰€åœ¨çŠ¶æ€åˆ¤åˆ«æ˜¯å¦æ˜¯æ— ç¬¦å·æ•°ï¼šå¦‚æœæœ€åçŠ¶æ€æ˜¯å¦‚å›¾çŠ¶æ€19ï¼Œé‚£ä¹ˆè¿”å›falseï¼Œå¦åˆ™ç¬¦åˆPascalæ— ç¬¦å·æ•°çš„æ­£è§„å¼ï¼Œè¿”å›trueã€‚</p><ol><li>æºä»£ç </li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// pascal_unsigned_number_judge.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judge</span><span class="params">(string str)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> len = str.<span class="built_in">length</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> state = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (state == <span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">13</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">13</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">13</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">16</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">14</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">15</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">15</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">16</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">18</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (str[i] == <span class="string">&#x27;+&#x27;</span> str[i] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">17</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">17</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">18</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (str[i] &gt;= <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">18</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                state = <span class="number">19</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (state == <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (state == <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    string str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (cin \&gt;&gt; str)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; (<span class="built_in">judge</span>(str) ? <span class="string">&quot;TRUE&quot;</span> : <span class="string">&quot;FALSE&quot;</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æµ‹è¯•ç»“æœ</li></ol><p>æµ‹è¯•ç»“æœå¦‚å›¾4.1æ‰€ç¤ºï¼š</p><p><img src="https://xinhaojin.github.io/imgs-host/past/2020/03/032920_1246_Pascal3.png"></p><p>å›¾4.1 æµ‹è¯•ç»“æœ</p><p>ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œè¯¥ç®—æ³•å¯ä»¥æœ‰æ•ˆè¯†åˆ«æ— ç¬¦å·æ•°ï¼Œå°šæœªå‘ç°é”™è¯¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>ç¼–è¯‘åŸç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
      <tag>ç¼–è¯‘åŸç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
